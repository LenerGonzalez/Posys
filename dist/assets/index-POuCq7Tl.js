var Vce=Object.defineProperty;var Hce=(t,e,r)=>e in t?Vce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var na=(t,e,r)=>Hce(t,typeof e!="symbol"?e+"":e,r);function $ce(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Hrt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oq={exports:{}},AI={},Dq={exports:{}},kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2=Symbol.for("react.element"),Kce=Symbol.for("react.portal"),Gce=Symbol.for("react.fragment"),qce=Symbol.for("react.strict_mode"),zce=Symbol.for("react.profiler"),Wce=Symbol.for("react.provider"),Xce=Symbol.for("react.context"),Yce=Symbol.for("react.forward_ref"),Jce=Symbol.for("react.suspense"),Zce=Symbol.for("react.memo"),eue=Symbol.for("react.lazy"),mM=Symbol.iterator;function tue(t){return t===null||typeof t!="object"?null:(t=mM&&t[mM]||t["@@iterator"],typeof t=="function"?t:null)}var Rq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mq=Object.assign,Lq={};function bv(t,e,r){this.props=t,this.context=e,this.refs=Lq,this.updater=r||Rq}bv.prototype.isReactComponent={};bv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uq(){}Uq.prototype=bv.prototype;function gF(t,e,r){this.props=t,this.context=e,this.refs=Lq,this.updater=r||Rq}var xF=gF.prototype=new Uq;xF.constructor=gF;Mq(xF,bv.prototype);xF.isPureReactComponent=!0;var pM=Array.isArray,Qq=Object.prototype.hasOwnProperty,vF={current:null},Vq={key:!0,ref:!0,__self:!0,__source:!0};function Hq(t,e,r){var n,a={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)Qq.call(e,n)&&!Vq.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:P2,type:t,key:s,ref:i,props:a,_owner:vF.current}}function rue(t,e){return{$$typeof:P2,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yF(t){return typeof t=="object"&&t!==null&&t.$$typeof===P2}function nue(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var gM=/\/+/g;function n5(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nue(""+t.key):e.toString(36)}function s_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case P2:case Kce:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+n5(i,0):n,pM(a)?(r="",t!=null&&(r=t.replace(gM,"$&/")+"/"),s_(a,e,r,"",function(u){return u})):a!=null&&(yF(a)&&(a=rue(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(gM,"$&/")+"/")+t)),e.push(a)),1;if(i=0,n=n===""?".":n+":",pM(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+n5(s,l);i+=s_(s,e,r,c,a)}else if(c=tue(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+n5(s,l++),i+=s_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function rN(t,e,r){if(t==null)return t;var n=[],a=0;return s_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function aue(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kl={current:null},i_={transition:null},sue={ReactCurrentDispatcher:Kl,ReactCurrentBatchConfig:i_,ReactCurrentOwner:vF};function $q(){throw Error("act(...) is not supported in production builds of React.")}kn.Children={map:rN,forEach:function(t,e,r){rN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return rN(t,function(){e++}),e},toArray:function(t){return rN(t,function(e){return e})||[]},only:function(t){if(!yF(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};kn.Component=bv;kn.Fragment=Gce;kn.Profiler=zce;kn.PureComponent=gF;kn.StrictMode=qce;kn.Suspense=Jce;kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sue;kn.act=$q;kn.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Mq({},t.props),a=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=vF.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Qq.call(e,c)&&!Vq.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:P2,type:t.type,key:a,ref:s,props:n,_owner:i}};kn.createContext=function(t){return t={$$typeof:Xce,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wce,_context:t},t.Consumer=t};kn.createElement=Hq;kn.createFactory=function(t){var e=Hq.bind(null,t);return e.type=t,e};kn.createRef=function(){return{current:null}};kn.forwardRef=function(t){return{$$typeof:Yce,render:t}};kn.isValidElement=yF;kn.lazy=function(t){return{$$typeof:eue,_payload:{_status:-1,_result:t},_init:aue}};kn.memo=function(t,e){return{$$typeof:Zce,type:t,compare:e===void 0?null:e}};kn.startTransition=function(t){var e=i_.transition;i_.transition={};try{t()}finally{i_.transition=e}};kn.unstable_act=$q;kn.useCallback=function(t,e){return Kl.current.useCallback(t,e)};kn.useContext=function(t){return Kl.current.useContext(t)};kn.useDebugValue=function(){};kn.useDeferredValue=function(t){return Kl.current.useDeferredValue(t)};kn.useEffect=function(t,e){return Kl.current.useEffect(t,e)};kn.useId=function(){return Kl.current.useId()};kn.useImperativeHandle=function(t,e,r){return Kl.current.useImperativeHandle(t,e,r)};kn.useInsertionEffect=function(t,e){return Kl.current.useInsertionEffect(t,e)};kn.useLayoutEffect=function(t,e){return Kl.current.useLayoutEffect(t,e)};kn.useMemo=function(t,e){return Kl.current.useMemo(t,e)};kn.useReducer=function(t,e,r){return Kl.current.useReducer(t,e,r)};kn.useRef=function(t){return Kl.current.useRef(t)};kn.useState=function(t){return Kl.current.useState(t)};kn.useSyncExternalStore=function(t,e,r){return Kl.current.useSyncExternalStore(t,e,r)};kn.useTransition=function(){return Kl.current.useTransition()};kn.version="18.3.1";Dq.exports=kn;var v=Dq.exports;const Lo=qA(v),iue=$ce({__proto__:null,default:Lo},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oue=v,lue=Symbol.for("react.element"),cue=Symbol.for("react.fragment"),uue=Object.prototype.hasOwnProperty,due=oue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fue={key:!0,ref:!0,__self:!0,__source:!0};function Kq(t,e,r){var n,a={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)uue.call(e,n)&&!fue.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:lue,type:t,key:s,ref:i,props:a,_owner:due.current}}AI.Fragment=cue;AI.jsx=Kq;AI.jsxs=Kq;Oq.exports=AI;var o=Oq.exports,UB={},Gq={exports:{}},Jc={},qq={exports:{}},zq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ae,se){var Ie=Ae.length;Ae.push(se);e:for(;0<Ie;){var Pe=Ie-1>>>1,k=Ae[Pe];if(0<a(k,se))Ae[Pe]=se,Ae[Ie]=k,Ie=Pe;else break e}}function r(Ae){return Ae.length===0?null:Ae[0]}function n(Ae){if(Ae.length===0)return null;var se=Ae[0],Ie=Ae.pop();if(Ie!==se){Ae[0]=Ie;e:for(var Pe=0,k=Ae.length,H=k>>>1;Pe<H;){var R=2*(Pe+1)-1,M=Ae[R],G=R+1,X=Ae[G];if(0>a(M,Ie))G<k&&0>a(X,M)?(Ae[Pe]=X,Ae[G]=Ie,Pe=G):(Ae[Pe]=M,Ae[R]=Ie,Pe=R);else if(G<k&&0>a(X,Ie))Ae[Pe]=X,Ae[G]=Ie,Pe=G;else break e}}return se}function a(Ae,se){var Ie=Ae.sortIndex-se.sortIndex;return Ie!==0?Ie:Ae.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,f=null,h=3,A=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Ae){for(var se=r(u);se!==null;){if(se.callback===null)n(u);else if(se.startTime<=Ae)n(u),se.sortIndex=se.expirationTime,e(c,se);else break;se=r(u)}}function w(Ae){if(p=!1,b(Ae),!m)if(r(c)!==null)m=!0,le(j);else{var se=r(u);se!==null&&de(w,se.startTime-Ae)}}function j(Ae,se){m=!1,p&&(p=!1,x(E),E=-1),A=!0;var Ie=h;try{for(b(se),f=r(c);f!==null&&(!(f.expirationTime>se)||Ae&&!P());){var Pe=f.callback;if(typeof Pe=="function"){f.callback=null,h=f.priorityLevel;var k=Pe(f.expirationTime<=se);se=t.unstable_now(),typeof k=="function"?f.callback=k:f===r(c)&&n(c),b(se)}else n(c);f=r(c)}if(f!==null)var H=!0;else{var R=r(u);R!==null&&de(w,R.startTime-se),H=!1}return H}finally{f=null,h=Ie,A=!1}}var I=!1,_=null,E=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function T(){if(_!==null){var Ae=t.unstable_now();O=Ae;var se=!0;try{se=_(!0,Ae)}finally{se?F():(I=!1,_=null)}}else I=!1}var F;if(typeof y=="function")F=function(){y(T)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ge=J.port2;J.port1.onmessage=T,F=function(){ge.postMessage(null)}}else F=function(){g(T,0)};function le(Ae){_=Ae,I||(I=!0,F())}function de(Ae,se){E=g(function(){Ae(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ae){Ae.callback=null},t.unstable_continueExecution=function(){m||A||(m=!0,le(j))},t.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Ae?Math.floor(1e3/Ae):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(Ae){switch(h){case 1:case 2:case 3:var se=3;break;default:se=h}var Ie=h;h=se;try{return Ae()}finally{h=Ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ae,se){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var Ie=h;h=Ae;try{return se()}finally{h=Ie}},t.unstable_scheduleCallback=function(Ae,se,Ie){var Pe=t.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Pe+Ie:Pe):Ie=Pe,Ae){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Ie+k,Ae={id:d++,callback:se,priorityLevel:Ae,startTime:Ie,expirationTime:k,sortIndex:-1},Ie>Pe?(Ae.sortIndex=Ie,e(u,Ae),r(c)===null&&Ae===r(u)&&(p?(x(E),E=-1):p=!0,de(w,Ie-Pe))):(Ae.sortIndex=k,e(c,Ae),m||A||(m=!0,le(j))),Ae},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Ae){var se=h;return function(){var Ie=h;h=se;try{return Ae.apply(this,arguments)}finally{h=Ie}}}})(zq);qq.exports=zq;var Aue=qq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hue=v,qc=Aue;function gr(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wq=new Set,db={};function qp(t,e){$x(t,e),$x(t+"Capture",e)}function $x(t,e){for(db[t]=e,t=0;t<e.length;t++)Wq.add(e[t])}var BA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QB=Object.prototype.hasOwnProperty,mue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xM={},vM={};function pue(t){return QB.call(vM,t)?!0:QB.call(xM,t)?!1:mue.test(t)?vM[t]=!0:(xM[t]=!0,!1)}function gue(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xue(t,e,r,n){if(e===null||typeof e>"u"||gue(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gl(t,e,r,n,a,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qo[t]=new Gl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qo[e]=new Gl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qo[t]=new Gl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qo[t]=new Gl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qo[t]=new Gl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qo[t]=new Gl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qo[t]=new Gl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qo[t]=new Gl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qo[t]=new Gl(t,5,!1,t.toLowerCase(),null,!1,!1)});var bF=/[\-:]([a-z])/g;function wF(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bF,wF);qo[e]=new Gl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bF,wF);qo[e]=new Gl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bF,wF);qo[e]=new Gl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qo[t]=new Gl(t,1,!1,t.toLowerCase(),null,!1,!1)});qo.xlinkHref=new Gl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qo[t]=new Gl(t,1,!1,t.toLowerCase(),null,!0,!0)});function NF(t,e,r,n){var a=qo.hasOwnProperty(e)?qo[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xue(e,r,a,n)&&(r=null),n||a===null?pue(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var zA=hue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nN=Symbol.for("react.element"),ix=Symbol.for("react.portal"),ox=Symbol.for("react.fragment"),CF=Symbol.for("react.strict_mode"),VB=Symbol.for("react.profiler"),Xq=Symbol.for("react.provider"),Yq=Symbol.for("react.context"),_F=Symbol.for("react.forward_ref"),HB=Symbol.for("react.suspense"),$B=Symbol.for("react.suspense_list"),EF=Symbol.for("react.memo"),Hh=Symbol.for("react.lazy"),Jq=Symbol.for("react.offscreen"),yM=Symbol.iterator;function g1(t){return t===null||typeof t!="object"?null:(t=yM&&t[yM]||t["@@iterator"],typeof t=="function"?t:null)}var Ps=Object.assign,a5;function ey(t){if(a5===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);a5=e&&e[1]||""}return`
`+a5+t}var s5=!1;function i5(t,e){if(!t||s5)return"";s5=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(i!==1||l!==1)do if(i--,l--,0>l||a[i]!==s[l]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=l);break}}}finally{s5=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ey(t):""}function vue(t){switch(t.tag){case 5:return ey(t.type);case 16:return ey("Lazy");case 13:return ey("Suspense");case 19:return ey("SuspenseList");case 0:case 2:case 15:return t=i5(t.type,!1),t;case 11:return t=i5(t.type.render,!1),t;case 1:return t=i5(t.type,!0),t;default:return""}}function KB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ox:return"Fragment";case ix:return"Portal";case VB:return"Profiler";case CF:return"StrictMode";case HB:return"Suspense";case $B:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yq:return(t.displayName||"Context")+".Consumer";case Xq:return(t._context.displayName||"Context")+".Provider";case _F:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case EF:return e=t.displayName||null,e!==null?e:KB(t.type)||"Memo";case Hh:e=t._payload,t=t._init;try{return KB(t(e))}catch{}}return null}function yue(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KB(e);case 8:return e===CF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function k0(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zq(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bue(t){var e=Zq(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function aN(t){t._valueTracker||(t._valueTracker=bue(t))}function ez(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Zq(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function q_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function GB(t,e){var r=e.checked;return Ps({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function bM(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=k0(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tz(t,e){e=e.checked,e!=null&&NF(t,"checked",e,!1)}function qB(t,e){tz(t,e);var r=k0(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zB(t,e.type,r):e.hasOwnProperty("defaultValue")&&zB(t,e.type,k0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wM(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zB(t,e,r){(e!=="number"||q_(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ty=Array.isArray;function Sx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+k0(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function WB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(gr(91));return Ps({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NM(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(gr(92));if(ty(r)){if(1<r.length)throw Error(gr(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:k0(r)}}function rz(t,e){var r=k0(e.value),n=k0(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function CM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sN,az=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sN=sN||document.createElement("div"),sN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fb(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ey={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wue=["Webkit","ms","Moz","O"];Object.keys(Ey).forEach(function(t){wue.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ey[e]=Ey[t]})});function sz(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ey.hasOwnProperty(t)&&Ey[t]?(""+e).trim():e+"px"}function iz(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=sz(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Nue=Ps({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function YB(t,e){if(e){if(Nue[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(gr(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(gr(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(gr(61))}if(e.style!=null&&typeof e.style!="object")throw Error(gr(62))}}function JB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZB=null;function SF(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eP=null,Ix=null,jx=null;function _M(t){if(t=F2(t)){if(typeof eP!="function")throw Error(gr(280));var e=t.stateNode;e&&(e=xI(e),eP(t.stateNode,t.type,e))}}function oz(t){Ix?jx?jx.push(t):jx=[t]:Ix=t}function lz(){if(Ix){var t=Ix,e=jx;if(jx=Ix=null,_M(t),e)for(t=0;t<e.length;t++)_M(e[t])}}function cz(t,e){return t(e)}function uz(){}var o5=!1;function dz(t,e,r){if(o5)return t(e,r);o5=!0;try{return cz(t,e,r)}finally{o5=!1,(Ix!==null||jx!==null)&&(uz(),lz())}}function Ab(t,e){var r=t.stateNode;if(r===null)return null;var n=xI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(gr(231,e,typeof r));return r}var tP=!1;if(BA)try{var x1={};Object.defineProperty(x1,"passive",{get:function(){tP=!0}}),window.addEventListener("test",x1,x1),window.removeEventListener("test",x1,x1)}catch{tP=!1}function Cue(t,e,r,n,a,s,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Sy=!1,z_=null,W_=!1,rP=null,_ue={onError:function(t){Sy=!0,z_=t}};function Eue(t,e,r,n,a,s,i,l,c){Sy=!1,z_=null,Cue.apply(_ue,arguments)}function Sue(t,e,r,n,a,s,i,l,c){if(Eue.apply(this,arguments),Sy){if(Sy){var u=z_;Sy=!1,z_=null}else throw Error(gr(198));W_||(W_=!0,rP=u)}}function zp(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function fz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function EM(t){if(zp(t)!==t)throw Error(gr(188))}function Iue(t){var e=t.alternate;if(!e){if(e=zp(t),e===null)throw Error(gr(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return EM(a),t;if(s===n)return EM(a),e;s=s.sibling}throw Error(gr(188))}if(r.return!==n.return)r=a,n=s;else{for(var i=!1,l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i){for(l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i)throw Error(gr(189))}}if(r.alternate!==n)throw Error(gr(190))}if(r.tag!==3)throw Error(gr(188));return r.stateNode.current===r?t:e}function Az(t){return t=Iue(t),t!==null?hz(t):null}function hz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hz(t);if(e!==null)return e;t=t.sibling}return null}var mz=qc.unstable_scheduleCallback,SM=qc.unstable_cancelCallback,jue=qc.unstable_shouldYield,Bue=qc.unstable_requestPaint,ai=qc.unstable_now,Pue=qc.unstable_getCurrentPriorityLevel,IF=qc.unstable_ImmediatePriority,pz=qc.unstable_UserBlockingPriority,X_=qc.unstable_NormalPriority,Tue=qc.unstable_LowPriority,gz=qc.unstable_IdlePriority,hI=null,bf=null;function kue(t){if(bf&&typeof bf.onCommitFiberRoot=="function")try{bf.onCommitFiberRoot(hI,t,void 0,(t.current.flags&128)===128)}catch{}}var Ed=Math.clz32?Math.clz32:Due,Fue=Math.log,Oue=Math.LN2;function Due(t){return t>>>=0,t===0?32:31-(Fue(t)/Oue|0)|0}var iN=64,oN=4194304;function ry(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Y_(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~a;l!==0?n=ry(l):(s&=i,s!==0&&(n=ry(s)))}else i=r&~a,i!==0?n=ry(i):s!==0&&(n=ry(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ed(e),a=1<<r,n|=t[r],e&=~a;return n}function Rue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mue(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Ed(s),l=1<<i,c=a[i];c===-1?(!(l&r)||l&n)&&(a[i]=Rue(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function nP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xz(){var t=iN;return iN<<=1,!(iN&4194240)&&(iN=64),t}function l5(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function T2(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ed(e),t[e]=r}function Lue(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Ed(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function jF(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ed(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Ca=0;function vz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yz,BF,bz,wz,Nz,aP=!1,lN=[],m0=null,p0=null,g0=null,hb=new Map,mb=new Map,Wh=[],Uue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IM(t,e){switch(t){case"focusin":case"focusout":m0=null;break;case"dragenter":case"dragleave":p0=null;break;case"mouseover":case"mouseout":g0=null;break;case"pointerover":case"pointerout":hb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mb.delete(e.pointerId)}}function v1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=F2(e),e!==null&&BF(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Que(t,e,r,n,a){switch(e){case"focusin":return m0=v1(m0,t,e,r,n,a),!0;case"dragenter":return p0=v1(p0,t,e,r,n,a),!0;case"mouseover":return g0=v1(g0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return hb.set(s,v1(hb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,mb.set(s,v1(mb.get(s)||null,t,e,r,n,a)),!0}return!1}function Cz(t){var e=Qm(t.target);if(e!==null){var r=zp(e);if(r!==null){if(e=r.tag,e===13){if(e=fz(r),e!==null){t.blockedOn=e,Nz(t.priority,function(){bz(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function o_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=sP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ZB=n,r.target.dispatchEvent(n),ZB=null}else return e=F2(r),e!==null&&BF(e),t.blockedOn=r,!1;e.shift()}return!0}function jM(t,e,r){o_(t)&&r.delete(e)}function Vue(){aP=!1,m0!==null&&o_(m0)&&(m0=null),p0!==null&&o_(p0)&&(p0=null),g0!==null&&o_(g0)&&(g0=null),hb.forEach(jM),mb.forEach(jM)}function y1(t,e){t.blockedOn===e&&(t.blockedOn=null,aP||(aP=!0,qc.unstable_scheduleCallback(qc.unstable_NormalPriority,Vue)))}function pb(t){function e(a){return y1(a,t)}if(0<lN.length){y1(lN[0],t);for(var r=1;r<lN.length;r++){var n=lN[r];n.blockedOn===t&&(n.blockedOn=null)}}for(m0!==null&&y1(m0,t),p0!==null&&y1(p0,t),g0!==null&&y1(g0,t),hb.forEach(e),mb.forEach(e),r=0;r<Wh.length;r++)n=Wh[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Wh.length&&(r=Wh[0],r.blockedOn===null);)Cz(r),r.blockedOn===null&&Wh.shift()}var Bx=zA.ReactCurrentBatchConfig,J_=!0;function Hue(t,e,r,n){var a=Ca,s=Bx.transition;Bx.transition=null;try{Ca=1,PF(t,e,r,n)}finally{Ca=a,Bx.transition=s}}function $ue(t,e,r,n){var a=Ca,s=Bx.transition;Bx.transition=null;try{Ca=4,PF(t,e,r,n)}finally{Ca=a,Bx.transition=s}}function PF(t,e,r,n){if(J_){var a=sP(t,e,r,n);if(a===null)x5(t,e,n,Z_,r),IM(t,n);else if(Que(a,t,e,r,n))n.stopPropagation();else if(IM(t,n),e&4&&-1<Uue.indexOf(t)){for(;a!==null;){var s=F2(a);if(s!==null&&yz(s),s=sP(t,e,r,n),s===null&&x5(t,e,n,Z_,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else x5(t,e,n,null,r)}}var Z_=null;function sP(t,e,r,n){if(Z_=null,t=SF(n),t=Qm(t),t!==null)if(e=zp(t),e===null)t=null;else if(r=e.tag,r===13){if(t=fz(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Z_=t,null}function _z(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pue()){case IF:return 1;case pz:return 4;case X_:case Tue:return 16;case gz:return 536870912;default:return 16}default:return 16}}var s0=null,TF=null,l_=null;function Ez(){if(l_)return l_;var t,e=TF,r=e.length,n,a="value"in s0?s0.value:s0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===a[s-n];n++);return l_=a.slice(t,1<n?1-n:void 0)}function c_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cN(){return!0}function BM(){return!1}function Zc(t){function e(r,n,a,s,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cN:BM,this.isPropagationStopped=BM,this}return Ps(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cN)},persist:function(){},isPersistent:cN}),e}var wv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kF=Zc(wv),k2=Ps({},wv,{view:0,detail:0}),Kue=Zc(k2),c5,u5,b1,mI=Ps({},k2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FF,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==b1&&(b1&&t.type==="mousemove"?(c5=t.screenX-b1.screenX,u5=t.screenY-b1.screenY):u5=c5=0,b1=t),c5)},movementY:function(t){return"movementY"in t?t.movementY:u5}}),PM=Zc(mI),Gue=Ps({},mI,{dataTransfer:0}),que=Zc(Gue),zue=Ps({},k2,{relatedTarget:0}),d5=Zc(zue),Wue=Ps({},wv,{animationName:0,elapsedTime:0,pseudoElement:0}),Xue=Zc(Wue),Yue=Ps({},wv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Jue=Zc(Yue),Zue=Ps({},wv,{data:0}),TM=Zc(Zue),ede={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nde(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rde[t])?!!e[t]:!1}function FF(){return nde}var ade=Ps({},k2,{key:function(t){if(t.key){var e=ede[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=c_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tde[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FF,charCode:function(t){return t.type==="keypress"?c_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?c_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sde=Zc(ade),ide=Ps({},mI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kM=Zc(ide),ode=Ps({},k2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FF}),lde=Zc(ode),cde=Ps({},wv,{propertyName:0,elapsedTime:0,pseudoElement:0}),ude=Zc(cde),dde=Ps({},mI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fde=Zc(dde),Ade=[9,13,27,32],OF=BA&&"CompositionEvent"in window,Iy=null;BA&&"documentMode"in document&&(Iy=document.documentMode);var hde=BA&&"TextEvent"in window&&!Iy,Sz=BA&&(!OF||Iy&&8<Iy&&11>=Iy),FM=" ",OM=!1;function Iz(t,e){switch(t){case"keyup":return Ade.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lx=!1;function mde(t,e){switch(t){case"compositionend":return jz(e);case"keypress":return e.which!==32?null:(OM=!0,FM);case"textInput":return t=e.data,t===FM&&OM?null:t;default:return null}}function pde(t,e){if(lx)return t==="compositionend"||!OF&&Iz(t,e)?(t=Ez(),l_=TF=s0=null,lx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sz&&e.locale!=="ko"?null:e.data;default:return null}}var gde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gde[t.type]:e==="textarea"}function Bz(t,e,r,n){oz(n),e=eE(e,"onChange"),0<e.length&&(r=new kF("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var jy=null,gb=null;function xde(t){Qz(t,0)}function pI(t){var e=dx(t);if(ez(e))return t}function vde(t,e){if(t==="change")return e}var Pz=!1;if(BA){var f5;if(BA){var A5="oninput"in document;if(!A5){var RM=document.createElement("div");RM.setAttribute("oninput","return;"),A5=typeof RM.oninput=="function"}f5=A5}else f5=!1;Pz=f5&&(!document.documentMode||9<document.documentMode)}function MM(){jy&&(jy.detachEvent("onpropertychange",Tz),gb=jy=null)}function Tz(t){if(t.propertyName==="value"&&pI(gb)){var e=[];Bz(e,gb,t,SF(t)),dz(xde,e)}}function yde(t,e,r){t==="focusin"?(MM(),jy=e,gb=r,jy.attachEvent("onpropertychange",Tz)):t==="focusout"&&MM()}function bde(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pI(gb)}function wde(t,e){if(t==="click")return pI(e)}function Nde(t,e){if(t==="input"||t==="change")return pI(e)}function Cde(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Td=typeof Object.is=="function"?Object.is:Cde;function xb(t,e){if(Td(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!QB.call(e,a)||!Td(t[a],e[a]))return!1}return!0}function LM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function UM(t,e){var r=LM(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=LM(r)}}function kz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fz(){for(var t=window,e=q_();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=q_(t.document)}return e}function DF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _de(t){var e=Fz(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&kz(r.ownerDocument.documentElement,r)){if(n!==null&&DF(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=UM(r,s);var i=UM(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ede=BA&&"documentMode"in document&&11>=document.documentMode,cx=null,iP=null,By=null,oP=!1;function QM(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;oP||cx==null||cx!==q_(n)||(n=cx,"selectionStart"in n&&DF(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),By&&xb(By,n)||(By=n,n=eE(iP,"onSelect"),0<n.length&&(e=new kF("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=cx)))}function uN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ux={animationend:uN("Animation","AnimationEnd"),animationiteration:uN("Animation","AnimationIteration"),animationstart:uN("Animation","AnimationStart"),transitionend:uN("Transition","TransitionEnd")},h5={},Oz={};BA&&(Oz=document.createElement("div").style,"AnimationEvent"in window||(delete ux.animationend.animation,delete ux.animationiteration.animation,delete ux.animationstart.animation),"TransitionEvent"in window||delete ux.transitionend.transition);function gI(t){if(h5[t])return h5[t];if(!ux[t])return t;var e=ux[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Oz)return h5[t]=e[r];return t}var Dz=gI("animationend"),Rz=gI("animationiteration"),Mz=gI("animationstart"),Lz=gI("transitionend"),Uz=new Map,VM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Y0(t,e){Uz.set(t,e),qp(e,[t])}for(var m5=0;m5<VM.length;m5++){var p5=VM[m5],Sde=p5.toLowerCase(),Ide=p5[0].toUpperCase()+p5.slice(1);Y0(Sde,"on"+Ide)}Y0(Dz,"onAnimationEnd");Y0(Rz,"onAnimationIteration");Y0(Mz,"onAnimationStart");Y0("dblclick","onDoubleClick");Y0("focusin","onFocus");Y0("focusout","onBlur");Y0(Lz,"onTransitionEnd");$x("onMouseEnter",["mouseout","mouseover"]);$x("onMouseLeave",["mouseout","mouseover"]);$x("onPointerEnter",["pointerout","pointerover"]);$x("onPointerLeave",["pointerout","pointerover"]);qp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qp("onBeforeInput",["compositionend","keypress","textInput","paste"]);qp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ny="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jde=new Set("cancel close invalid load scroll toggle".split(" ").concat(ny));function HM(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Sue(n,e,void 0,t),t.currentTarget=null}function Qz(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;HM(a,l,u),s=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;HM(a,l,u),s=c}}}if(W_)throw t=rP,W_=!1,rP=null,t}function qa(t,e){var r=e[fP];r===void 0&&(r=e[fP]=new Set);var n=t+"__bubble";r.has(n)||(Vz(e,t,2,!1),r.add(n))}function g5(t,e,r){var n=0;e&&(n|=4),Vz(r,t,n,e)}var dN="_reactListening"+Math.random().toString(36).slice(2);function vb(t){if(!t[dN]){t[dN]=!0,Wq.forEach(function(r){r!=="selectionchange"&&(jde.has(r)||g5(r,!1,t),g5(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dN]||(e[dN]=!0,g5("selectionchange",!1,e))}}function Vz(t,e,r,n){switch(_z(e)){case 1:var a=Hue;break;case 4:a=$ue;break;default:a=PF}r=a.bind(null,e,r,t),a=void 0,!tP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function x5(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=Qm(l),i===null)return;if(c=i.tag,c===5||c===6){n=s=i;continue e}l=l.parentNode}}n=n.return}dz(function(){var u=s,d=SF(r),f=[];e:{var h=Uz.get(t);if(h!==void 0){var A=kF,m=t;switch(t){case"keypress":if(c_(r)===0)break e;case"keydown":case"keyup":A=sde;break;case"focusin":m="focus",A=d5;break;case"focusout":m="blur",A=d5;break;case"beforeblur":case"afterblur":A=d5;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=PM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=que;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=lde;break;case Dz:case Rz:case Mz:A=Xue;break;case Lz:A=ude;break;case"scroll":A=Kue;break;case"wheel":A=fde;break;case"copy":case"cut":case"paste":A=Jue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=kM}var p=(e&4)!==0,g=!p&&t==="scroll",x=p?h!==null?h+"Capture":null:h;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,x!==null&&(w=Ab(y,x),w!=null&&p.push(yb(y,w,b)))),g)break;y=y.return}0<p.length&&(h=new A(h,m,null,r,d),f.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",h&&r!==ZB&&(m=r.relatedTarget||r.fromElement)&&(Qm(m)||m[PA]))break e;if((A||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,A?(m=r.relatedTarget||r.toElement,A=u,m=m?Qm(m):null,m!==null&&(g=zp(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(A=null,m=u),A!==m)){if(p=PM,w="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=kM,w="onPointerLeave",x="onPointerEnter",y="pointer"),g=A==null?h:dx(A),b=m==null?h:dx(m),h=new p(w,y+"leave",A,r,d),h.target=g,h.relatedTarget=b,w=null,Qm(d)===u&&(p=new p(x,y+"enter",m,r,d),p.target=b,p.relatedTarget=g,w=p),g=w,A&&m)t:{for(p=A,x=m,y=0,b=p;b;b=bg(b))y++;for(b=0,w=x;w;w=bg(w))b++;for(;0<y-b;)p=bg(p),y--;for(;0<b-y;)x=bg(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=bg(p),x=bg(x)}p=null}else p=null;A!==null&&$M(f,h,A,p,!1),m!==null&&g!==null&&$M(f,g,m,p,!0)}}e:{if(h=u?dx(u):window,A=h.nodeName&&h.nodeName.toLowerCase(),A==="select"||A==="input"&&h.type==="file")var j=vde;else if(DM(h))if(Pz)j=Nde;else{j=bde;var I=yde}else(A=h.nodeName)&&A.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=wde);if(j&&(j=j(t,u))){Bz(f,j,r,d);break e}I&&I(t,h,u),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&zB(h,"number",h.value)}switch(I=u?dx(u):window,t){case"focusin":(DM(I)||I.contentEditable==="true")&&(cx=I,iP=u,By=null);break;case"focusout":By=iP=cx=null;break;case"mousedown":oP=!0;break;case"contextmenu":case"mouseup":case"dragend":oP=!1,QM(f,r,d);break;case"selectionchange":if(Ede)break;case"keydown":case"keyup":QM(f,r,d)}var _;if(OF)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else lx?Iz(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Sz&&r.locale!=="ko"&&(lx||E!=="onCompositionStart"?E==="onCompositionEnd"&&lx&&(_=Ez()):(s0=d,TF="value"in s0?s0.value:s0.textContent,lx=!0)),I=eE(u,E),0<I.length&&(E=new TM(E,t,null,r,d),f.push({event:E,listeners:I}),_?E.data=_:(_=jz(r),_!==null&&(E.data=_)))),(_=hde?mde(t,r):pde(t,r))&&(u=eE(u,"onBeforeInput"),0<u.length&&(d=new TM("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}Qz(f,e)})}function yb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function eE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Ab(t,r),s!=null&&n.unshift(yb(t,s,a)),s=Ab(t,e),s!=null&&n.push(yb(t,s,a))),t=t.return}return n}function bg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $M(t,e,r,n,a){for(var s=e._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Ab(r,s),c!=null&&i.unshift(yb(r,c,l))):a||(c=Ab(r,s),c!=null&&i.push(yb(r,c,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var Bde=/\r\n?/g,Pde=/\u0000|\uFFFD/g;function KM(t){return(typeof t=="string"?t:""+t).replace(Bde,`
`).replace(Pde,"")}function fN(t,e,r){if(e=KM(e),KM(t)!==e&&r)throw Error(gr(425))}function tE(){}var lP=null,cP=null;function uP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dP=typeof setTimeout=="function"?setTimeout:void 0,Tde=typeof clearTimeout=="function"?clearTimeout:void 0,GM=typeof Promise=="function"?Promise:void 0,kde=typeof queueMicrotask=="function"?queueMicrotask:typeof GM<"u"?function(t){return GM.resolve(null).then(t).catch(Fde)}:dP;function Fde(t){setTimeout(function(){throw t})}function v5(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),pb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);pb(e)}function x0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nv=Math.random().toString(36).slice(2),Af="__reactFiber$"+Nv,bb="__reactProps$"+Nv,PA="__reactContainer$"+Nv,fP="__reactEvents$"+Nv,Ode="__reactListeners$"+Nv,Dde="__reactHandles$"+Nv;function Qm(t){var e=t[Af];if(e)return e;for(var r=t.parentNode;r;){if(e=r[PA]||r[Af]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=qM(t);t!==null;){if(r=t[Af])return r;t=qM(t)}return e}t=r,r=t.parentNode}return null}function F2(t){return t=t[Af]||t[PA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(gr(33))}function xI(t){return t[bb]||null}var AP=[],fx=-1;function J0(t){return{current:t}}function es(t){0>fx||(t.current=AP[fx],AP[fx]=null,fx--)}function Va(t,e){fx++,AP[fx]=t.current,t.current=e}var F0={},vl=J0(F0),uc=J0(!1),pp=F0;function Kx(t,e){var r=t.type.contextTypes;if(!r)return F0;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function dc(t){return t=t.childContextTypes,t!=null}function rE(){es(uc),es(vl)}function zM(t,e,r){if(vl.current!==F0)throw Error(gr(168));Va(vl,e),Va(uc,r)}function Hz(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(gr(108,yue(t)||"Unknown",a));return Ps({},r,n)}function nE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||F0,pp=vl.current,Va(vl,t),Va(uc,uc.current),!0}function WM(t,e,r){var n=t.stateNode;if(!n)throw Error(gr(169));r?(t=Hz(t,e,pp),n.__reactInternalMemoizedMergedChildContext=t,es(uc),es(vl),Va(vl,t)):es(uc),Va(uc,r)}var sA=null,vI=!1,y5=!1;function $z(t){sA===null?sA=[t]:sA.push(t)}function Rde(t){vI=!0,$z(t)}function Z0(){if(!y5&&sA!==null){y5=!0;var t=0,e=Ca;try{var r=sA;for(Ca=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}sA=null,vI=!1}catch(a){throw sA!==null&&(sA=sA.slice(t+1)),mz(IF,Z0),a}finally{Ca=e,y5=!1}}return null}var Ax=[],hx=0,aE=null,sE=0,ju=[],Bu=0,gp=null,uA=1,dA="";function _m(t,e){Ax[hx++]=sE,Ax[hx++]=aE,aE=t,sE=e}function Kz(t,e,r){ju[Bu++]=uA,ju[Bu++]=dA,ju[Bu++]=gp,gp=t;var n=uA;t=dA;var a=32-Ed(n)-1;n&=~(1<<a),r+=1;var s=32-Ed(e)+a;if(30<s){var i=a-a%5;s=(n&(1<<i)-1).toString(32),n>>=i,a-=i,uA=1<<32-Ed(e)+a|r<<a|n,dA=s+t}else uA=1<<s|r<<a|n,dA=t}function RF(t){t.return!==null&&(_m(t,1),Kz(t,1,0))}function MF(t){for(;t===aE;)aE=Ax[--hx],Ax[hx]=null,sE=Ax[--hx],Ax[hx]=null;for(;t===gp;)gp=ju[--Bu],ju[Bu]=null,dA=ju[--Bu],ju[Bu]=null,uA=ju[--Bu],ju[Bu]=null}var Kc=null,Qc=null,ds=!1,xd=null;function Gz(t,e){var r=Tu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function XM(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kc=t,Qc=x0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kc=t,Qc=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=gp!==null?{id:uA,overflow:dA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Tu(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Kc=t,Qc=null,!0):!1;default:return!1}}function hP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mP(t){if(ds){var e=Qc;if(e){var r=e;if(!XM(t,e)){if(hP(t))throw Error(gr(418));e=x0(r.nextSibling);var n=Kc;e&&XM(t,e)?Gz(n,r):(t.flags=t.flags&-4097|2,ds=!1,Kc=t)}}else{if(hP(t))throw Error(gr(418));t.flags=t.flags&-4097|2,ds=!1,Kc=t}}}function YM(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kc=t}function AN(t){if(t!==Kc)return!1;if(!ds)return YM(t),ds=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uP(t.type,t.memoizedProps)),e&&(e=Qc)){if(hP(t))throw qz(),Error(gr(418));for(;e;)Gz(t,e),e=x0(e.nextSibling)}if(YM(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(gr(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qc=x0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qc=null}}else Qc=Kc?x0(t.stateNode.nextSibling):null;return!0}function qz(){for(var t=Qc;t;)t=x0(t.nextSibling)}function Gx(){Qc=Kc=null,ds=!1}function LF(t){xd===null?xd=[t]:xd.push(t)}var Mde=zA.ReactCurrentBatchConfig;function w1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(gr(309));var n=r.stateNode}if(!n)throw Error(gr(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var l=a.refs;i===null?delete l[s]:l[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(gr(284));if(!r._owner)throw Error(gr(290,t))}return t}function hN(t,e){throw t=Object.prototype.toString.call(e),Error(gr(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JM(t){var e=t._init;return e(t._payload)}function zz(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function r(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=w0(x,y),x.index=0,x.sibling=null,x}function s(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,w){return y===null||y.tag!==6?(y=S5(b,x.mode,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,w){var j=b.type;return j===ox?d(x,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hh&&JM(j)===y.type)?(w=a(y,b.props),w.ref=w1(x,y,b),w.return=x,w):(w=p_(b.type,b.key,b.props,null,x.mode,w),w.ref=w1(x,y,b),w.return=x,w)}function u(x,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=I5(b,x.mode,w),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,w,j){return y===null||y.tag!==7?(y=Zm(b,x.mode,w,j),y.return=x,y):(y=a(y,b),y.return=x,y)}function f(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=S5(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case nN:return b=p_(y.type,y.key,y.props,null,x.mode,b),b.ref=w1(x,null,y),b.return=x,b;case ix:return y=I5(y,x.mode,b),y.return=x,y;case Hh:var w=y._init;return f(x,w(y._payload),b)}if(ty(y)||g1(y))return y=Zm(y,x.mode,b,null),y.return=x,y;hN(x,y)}return null}function h(x,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(x,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nN:return b.key===j?c(x,y,b,w):null;case ix:return b.key===j?u(x,y,b,w):null;case Hh:return j=b._init,h(x,y,j(b._payload),w)}if(ty(b)||g1(b))return j!==null?null:d(x,y,b,w,null);hN(x,b)}return null}function A(x,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(b)||null,l(y,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nN:return x=x.get(w.key===null?b:w.key)||null,c(y,x,w,j);case ix:return x=x.get(w.key===null?b:w.key)||null,u(y,x,w,j);case Hh:var I=w._init;return A(x,y,b,I(w._payload),j)}if(ty(w)||g1(w))return x=x.get(b)||null,d(y,x,w,j,null);hN(y,w)}return null}function m(x,y,b,w){for(var j=null,I=null,_=y,E=y=0,S=null;_!==null&&E<b.length;E++){_.index>E?(S=_,_=null):S=_.sibling;var O=h(x,_,b[E],w);if(O===null){_===null&&(_=S);break}t&&_&&O.alternate===null&&e(x,_),y=s(O,y,E),I===null?j=O:I.sibling=O,I=O,_=S}if(E===b.length)return r(x,_),ds&&_m(x,E),j;if(_===null){for(;E<b.length;E++)_=f(x,b[E],w),_!==null&&(y=s(_,y,E),I===null?j=_:I.sibling=_,I=_);return ds&&_m(x,E),j}for(_=n(x,_);E<b.length;E++)S=A(_,x,E,b[E],w),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?E:S.key),y=s(S,y,E),I===null?j=S:I.sibling=S,I=S);return t&&_.forEach(function(P){return e(x,P)}),ds&&_m(x,E),j}function p(x,y,b,w){var j=g1(b);if(typeof j!="function")throw Error(gr(150));if(b=j.call(b),b==null)throw Error(gr(151));for(var I=j=null,_=y,E=y=0,S=null,O=b.next();_!==null&&!O.done;E++,O=b.next()){_.index>E?(S=_,_=null):S=_.sibling;var P=h(x,_,O.value,w);if(P===null){_===null&&(_=S);break}t&&_&&P.alternate===null&&e(x,_),y=s(P,y,E),I===null?j=P:I.sibling=P,I=P,_=S}if(O.done)return r(x,_),ds&&_m(x,E),j;if(_===null){for(;!O.done;E++,O=b.next())O=f(x,O.value,w),O!==null&&(y=s(O,y,E),I===null?j=O:I.sibling=O,I=O);return ds&&_m(x,E),j}for(_=n(x,_);!O.done;E++,O=b.next())O=A(_,x,E,O.value,w),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?E:O.key),y=s(O,y,E),I===null?j=O:I.sibling=O,I=O);return t&&_.forEach(function(T){return e(x,T)}),ds&&_m(x,E),j}function g(x,y,b,w){if(typeof b=="object"&&b!==null&&b.type===ox&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case nN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===ox){if(I.tag===7){r(x,I.sibling),y=a(I,b.props.children),y.return=x,x=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hh&&JM(j)===I.type){r(x,I.sibling),y=a(I,b.props),y.ref=w1(x,I,b),y.return=x,x=y;break e}r(x,I);break}else e(x,I);I=I.sibling}b.type===ox?(y=Zm(b.props.children,x.mode,w,b.key),y.return=x,x=y):(w=p_(b.type,b.key,b.props,null,x.mode,w),w.ref=w1(x,y,b),w.return=x,x=w)}return i(x);case ix:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else e(x,y);y=y.sibling}y=I5(b,x.mode,w),y.return=x,x=y}return i(x);case Hh:return I=b._init,g(x,y,I(b._payload),w)}if(ty(b))return m(x,y,b,w);if(g1(b))return p(x,y,b,w);hN(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(x,y.sibling),y=a(y,b),y.return=x,x=y):(r(x,y),y=S5(b,x.mode,w),y.return=x,x=y),i(x)):r(x,y)}return g}var qx=zz(!0),Wz=zz(!1),iE=J0(null),oE=null,mx=null,UF=null;function QF(){UF=mx=oE=null}function VF(t){var e=iE.current;es(iE),t._currentValue=e}function pP(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Px(t,e){oE=t,UF=mx=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oc=!0),t.firstContext=null)}function Hu(t){var e=t._currentValue;if(UF!==t)if(t={context:t,memoizedValue:e,next:null},mx===null){if(oE===null)throw Error(gr(308));mx=t,oE.dependencies={lanes:0,firstContext:t}}else mx=mx.next=t;return e}var Vm=null;function HF(t){Vm===null?Vm=[t]:Vm.push(t)}function Xz(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,HF(e)):(r.next=a.next,a.next=r),e.interleaved=r,TA(t,n)}function TA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $h=!1;function $F(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function v0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Gn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,TA(t,r)}return a=n.interleaved,a===null?(e.next=e,HF(n)):(e.next=a.next,a.next=e),n.interleaved=e,TA(t,r)}function u_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jF(t,r)}}function ZM(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function lE(t,e,r,n){var a=t.updateQueue;$h=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;i=0,d=u=c=null,l=s;do{var h=l.lane,A=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(h=e,A=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(A,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(A,f,h):m,h==null)break e;f=Ps({},f,h);break e;case 2:$h=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else A={eventTime:A,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=A,c=f):d=d.next=A,i|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do i|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);vp|=i,t.lanes=i,t.memoizedState=f}}function eL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(gr(191,a));a.call(n)}}}var O2={},wf=J0(O2),wb=J0(O2),Nb=J0(O2);function Hm(t){if(t===O2)throw Error(gr(174));return t}function KF(t,e){switch(Va(Nb,e),Va(wb,t),Va(wf,O2),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:XB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=XB(e,t)}es(wf),Va(wf,e)}function zx(){es(wf),es(wb),es(Nb)}function Jz(t){Hm(Nb.current);var e=Hm(wf.current),r=XB(e,t.type);e!==r&&(Va(wb,t),Va(wf,r))}function GF(t){wb.current===t&&(es(wf),es(wb))}var Ss=J0(0);function cE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var b5=[];function qF(){for(var t=0;t<b5.length;t++)b5[t]._workInProgressVersionPrimary=null;b5.length=0}var d_=zA.ReactCurrentDispatcher,w5=zA.ReactCurrentBatchConfig,xp=0,Bs=null,Pi=null,uo=null,uE=!1,Py=!1,Cb=0,Lde=0;function Yo(){throw Error(gr(321))}function zF(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Td(t[r],e[r]))return!1;return!0}function WF(t,e,r,n,a,s){if(xp=s,Bs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,d_.current=t===null||t.memoizedState===null?Hde:$de,t=r(n,a),Py){s=0;do{if(Py=!1,Cb=0,25<=s)throw Error(gr(301));s+=1,uo=Pi=null,e.updateQueue=null,d_.current=Kde,t=r(n,a)}while(Py)}if(d_.current=dE,e=Pi!==null&&Pi.next!==null,xp=0,uo=Pi=Bs=null,uE=!1,e)throw Error(gr(300));return t}function XF(){var t=Cb!==0;return Cb=0,t}function ff(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return uo===null?Bs.memoizedState=uo=t:uo=uo.next=t,uo}function $u(){if(Pi===null){var t=Bs.alternate;t=t!==null?t.memoizedState:null}else t=Pi.next;var e=uo===null?Bs.memoizedState:uo.next;if(e!==null)uo=e,Pi=t;else{if(t===null)throw Error(gr(310));Pi=t,t={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},uo===null?Bs.memoizedState=uo=t:uo=uo.next=t}return uo}function _b(t,e){return typeof e=="function"?e(t):e}function N5(t){var e=$u(),r=e.queue;if(r===null)throw Error(gr(311));r.lastRenderedReducer=t;var n=Pi,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var i=a.next;a.next=s.next,s.next=i}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=i=null,c=null,u=s;do{var d=u.lane;if((xp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,i=n):c=c.next=f,Bs.lanes|=d,vp|=d}u=u.next}while(u!==null&&u!==s);c===null?i=n:c.next=l,Td(n,e.memoizedState)||(oc=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,Bs.lanes|=s,vp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function C5(t){var e=$u(),r=e.queue;if(r===null)throw Error(gr(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do s=t(s,i.action),i=i.next;while(i!==a);Td(s,e.memoizedState)||(oc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Zz(){}function eW(t,e){var r=Bs,n=$u(),a=e(),s=!Td(n.memoizedState,a);if(s&&(n.memoizedState=a,oc=!0),n=n.queue,YF(nW.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||uo!==null&&uo.memoizedState.tag&1){if(r.flags|=2048,Eb(9,rW.bind(null,r,n,a,e),void 0,null),mo===null)throw Error(gr(349));xp&30||tW(r,e,a)}return a}function tW(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function rW(t,e,r,n){e.value=r,e.getSnapshot=n,aW(e)&&sW(t)}function nW(t,e,r){return r(function(){aW(e)&&sW(t)})}function aW(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Td(t,r)}catch{return!0}}function sW(t){var e=TA(t,1);e!==null&&Sd(e,t,1,-1)}function tL(t){var e=ff();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_b,lastRenderedState:t},e.queue=t,t=t.dispatch=Vde.bind(null,Bs,t),[e.memoizedState,t]}function Eb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Bs.updateQueue,e===null?(e={lastEffect:null,stores:null},Bs.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function iW(){return $u().memoizedState}function f_(t,e,r,n){var a=ff();Bs.flags|=t,a.memoizedState=Eb(1|e,r,void 0,n===void 0?null:n)}function yI(t,e,r,n){var a=$u();n=n===void 0?null:n;var s=void 0;if(Pi!==null){var i=Pi.memoizedState;if(s=i.destroy,n!==null&&zF(n,i.deps)){a.memoizedState=Eb(e,r,s,n);return}}Bs.flags|=t,a.memoizedState=Eb(1|e,r,s,n)}function rL(t,e){return f_(8390656,8,t,e)}function YF(t,e){return yI(2048,8,t,e)}function oW(t,e){return yI(4,2,t,e)}function lW(t,e){return yI(4,4,t,e)}function cW(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uW(t,e,r){return r=r!=null?r.concat([t]):null,yI(4,4,cW.bind(null,e,t),r)}function JF(){}function dW(t,e){var r=$u();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zF(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function fW(t,e){var r=$u();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zF(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function AW(t,e,r){return xp&21?(Td(r,e)||(r=xz(),Bs.lanes|=r,vp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oc=!0),t.memoizedState=r)}function Ude(t,e){var r=Ca;Ca=r!==0&&4>r?r:4,t(!0);var n=w5.transition;w5.transition={};try{t(!1),e()}finally{Ca=r,w5.transition=n}}function hW(){return $u().memoizedState}function Qde(t,e,r){var n=b0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mW(t))pW(e,r);else if(r=Xz(t,e,r,n),r!==null){var a=Ul();Sd(r,t,n,a),gW(r,e,n)}}function Vde(t,e,r){var n=b0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mW(t))pW(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,l=s(i,r);if(a.hasEagerState=!0,a.eagerState=l,Td(l,i)){var c=e.interleaved;c===null?(a.next=a,HF(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Xz(t,e,a,n),r!==null&&(a=Ul(),Sd(r,t,n,a),gW(r,e,n))}}function mW(t){var e=t.alternate;return t===Bs||e!==null&&e===Bs}function pW(t,e){Py=uE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gW(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,jF(t,r)}}var dE={readContext:Hu,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},Hde={readContext:Hu,useCallback:function(t,e){return ff().memoizedState=[t,e===void 0?null:e],t},useContext:Hu,useEffect:rL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,f_(4194308,4,cW.bind(null,e,t),r)},useLayoutEffect:function(t,e){return f_(4194308,4,t,e)},useInsertionEffect:function(t,e){return f_(4,2,t,e)},useMemo:function(t,e){var r=ff();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ff();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Qde.bind(null,Bs,t),[n.memoizedState,t]},useRef:function(t){var e=ff();return t={current:t},e.memoizedState=t},useState:tL,useDebugValue:JF,useDeferredValue:function(t){return ff().memoizedState=t},useTransition:function(){var t=tL(!1),e=t[0];return t=Ude.bind(null,t[1]),ff().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Bs,a=ff();if(ds){if(r===void 0)throw Error(gr(407));r=r()}else{if(r=e(),mo===null)throw Error(gr(349));xp&30||tW(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,rL(nW.bind(null,n,s,t),[t]),n.flags|=2048,Eb(9,rW.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=ff(),e=mo.identifierPrefix;if(ds){var r=dA,n=uA;r=(n&~(1<<32-Ed(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Lde++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$de={readContext:Hu,useCallback:dW,useContext:Hu,useEffect:YF,useImperativeHandle:uW,useInsertionEffect:oW,useLayoutEffect:lW,useMemo:fW,useReducer:N5,useRef:iW,useState:function(){return N5(_b)},useDebugValue:JF,useDeferredValue:function(t){var e=$u();return AW(e,Pi.memoizedState,t)},useTransition:function(){var t=N5(_b)[0],e=$u().memoizedState;return[t,e]},useMutableSource:Zz,useSyncExternalStore:eW,useId:hW,unstable_isNewReconciler:!1},Kde={readContext:Hu,useCallback:dW,useContext:Hu,useEffect:YF,useImperativeHandle:uW,useInsertionEffect:oW,useLayoutEffect:lW,useMemo:fW,useReducer:C5,useRef:iW,useState:function(){return C5(_b)},useDebugValue:JF,useDeferredValue:function(t){var e=$u();return Pi===null?e.memoizedState=t:AW(e,Pi.memoizedState,t)},useTransition:function(){var t=C5(_b)[0],e=$u().memoizedState;return[t,e]},useMutableSource:Zz,useSyncExternalStore:eW,useId:hW,unstable_isNewReconciler:!1};function pd(t,e){if(t&&t.defaultProps){e=Ps({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function gP(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ps({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bI={isMounted:function(t){return(t=t._reactInternals)?zp(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Ul(),a=b0(t),s=vA(n,a);s.payload=e,r!=null&&(s.callback=r),e=v0(t,s,a),e!==null&&(Sd(e,t,a,n),u_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Ul(),a=b0(t),s=vA(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=v0(t,s,a),e!==null&&(Sd(e,t,a,n),u_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ul(),n=b0(t),a=vA(r,n);a.tag=2,e!=null&&(a.callback=e),e=v0(t,a,n),e!==null&&(Sd(e,t,n,r),u_(e,t,n))}};function nL(t,e,r,n,a,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!xb(r,n)||!xb(a,s):!0}function xW(t,e,r){var n=!1,a=F0,s=e.contextType;return typeof s=="object"&&s!==null?s=Hu(s):(a=dc(e)?pp:vl.current,n=e.contextTypes,s=(n=n!=null)?Kx(t,a):F0),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function aL(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&bI.enqueueReplaceState(e,e.state,null)}function xP(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},$F(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Hu(s):(s=dc(e)?pp:vl.current,a.context=Kx(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gP(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&bI.enqueueReplaceState(a,a.state,null),lE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Wx(t,e){try{var r="",n=e;do r+=vue(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function _5(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function vP(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Gde=typeof WeakMap=="function"?WeakMap:Map;function vW(t,e,r){r=vA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){AE||(AE=!0,jP=n),vP(t,e)},r}function yW(t,e,r){r=vA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){vP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){vP(t,e),typeof n!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function sL(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Gde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=ife.bind(null,t,e,r),e.then(t,t))}function iL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oL(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vA(-1,1),e.tag=2,v0(r,e,1))),r.lanes|=1),t)}var qde=zA.ReactCurrentOwner,oc=!1;function Fl(t,e,r,n){e.child=t===null?Wz(e,null,r,n):qx(e,t.child,r,n)}function lL(t,e,r,n,a){r=r.render;var s=e.ref;return Px(e,a),n=WF(t,e,r,n,s,a),r=XF(),t!==null&&!oc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kA(t,e,a)):(ds&&r&&RF(e),e.flags|=1,Fl(t,e,n,a),e.child)}function cL(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!iO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,bW(t,e,s,n,a)):(t=p_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:xb,r(i,n)&&t.ref===e.ref)return kA(t,e,a)}return e.flags|=1,t=w0(s,n),t.ref=e.ref,t.return=e,e.child=t}function bW(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(xb(s,n)&&t.ref===e.ref)if(oc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(oc=!0);else return e.lanes=t.lanes,kA(t,e,a)}return yP(t,e,r,n,a)}function wW(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Va(gx,Fc),Fc|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Va(gx,Fc),Fc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Va(gx,Fc),Fc|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Va(gx,Fc),Fc|=n;return Fl(t,e,a,r),e.child}function NW(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function yP(t,e,r,n,a){var s=dc(r)?pp:vl.current;return s=Kx(e,s),Px(e,a),r=WF(t,e,r,n,s,a),n=XF(),t!==null&&!oc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,kA(t,e,a)):(ds&&n&&RF(e),e.flags|=1,Fl(t,e,r,a),e.child)}function uL(t,e,r,n,a){if(dc(r)){var s=!0;nE(e)}else s=!1;if(Px(e,a),e.stateNode===null)A_(t,e),xW(e,r,n),xP(e,r,n,a),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Hu(u):(u=dc(r)?pp:vl.current,u=Kx(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==u)&&aL(e,i,n,u),$h=!1;var h=e.memoizedState;i.state=h,lE(e,n,i,a),c=e.memoizedState,l!==n||h!==c||uc.current||$h?(typeof d=="function"&&(gP(e,r,d,n),c=e.memoizedState),(l=$h||nL(e,r,l,n,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=u,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,Yz(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:pd(e.type,l),i.props=u,f=e.pendingProps,h=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Hu(c):(c=dc(r)?pp:vl.current,c=Kx(e,c));var A=r.getDerivedStateFromProps;(d=typeof A=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||h!==c)&&aL(e,i,n,c),$h=!1,h=e.memoizedState,i.state=h,lE(e,n,i,a);var m=e.memoizedState;l!==f||h!==m||uc.current||$h?(typeof A=="function"&&(gP(e,r,A,n),m=e.memoizedState),(u=$h||nL(e,r,u,n,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),i.props=n,i.state=m,i.context=c,n=u):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return bP(t,e,r,n,s,a)}function bP(t,e,r,n,a,s){NW(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return a&&WM(e,r,!1),kA(t,e,s);n=e.stateNode,qde.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=qx(e,t.child,null,s),e.child=qx(e,null,l,s)):Fl(t,e,l,s),e.memoizedState=n.state,a&&WM(e,r,!0),e.child}function CW(t){var e=t.stateNode;e.pendingContext?zM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zM(t,e.context,!1),KF(t,e.containerInfo)}function dL(t,e,r,n,a){return Gx(),LF(a),e.flags|=256,Fl(t,e,r,n),e.child}var wP={dehydrated:null,treeContext:null,retryLane:0};function NP(t){return{baseLanes:t,cachePool:null,transitions:null}}function _W(t,e,r){var n=e.pendingProps,a=Ss.current,s=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Va(Ss,a&1),t===null)return mP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=CI(i,n,0,null),t=Zm(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NP(r),e.memoizedState=wP,t):ZF(e,i));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return zde(t,e,i,n,l,a,r);if(s){s=n.fallback,i=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=w0(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=w0(l,s):(s=Zm(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?NP(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=wP,n}return s=t.child,t=s.sibling,n=w0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function ZF(t,e){return e=CI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function mN(t,e,r,n){return n!==null&&LF(n),qx(e,t.child,null,r),t=ZF(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zde(t,e,r,n,a,s,i){if(r)return e.flags&256?(e.flags&=-257,n=_5(Error(gr(422))),mN(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=CI({mode:"visible",children:n.children},a,0,null),s=Zm(s,a,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&qx(e,t.child,null,i),e.child.memoizedState=NP(i),e.memoizedState=wP,s);if(!(e.mode&1))return mN(t,e,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(gr(419)),n=_5(s,n,void 0),mN(t,e,i,n)}if(l=(i&t.childLanes)!==0,oc||l){if(n=mo,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,TA(t,a),Sd(n,t,a,-1))}return sO(),n=_5(Error(gr(421))),mN(t,e,i,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=ofe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Qc=x0(a.nextSibling),Kc=e,ds=!0,xd=null,t!==null&&(ju[Bu++]=uA,ju[Bu++]=dA,ju[Bu++]=gp,uA=t.id,dA=t.overflow,gp=e),e=ZF(e,n.children),e.flags|=4096,e)}function fL(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),pP(t.return,e,r)}function E5(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function EW(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Fl(t,e,n.children,r),n=Ss.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fL(t,r,e);else if(t.tag===19)fL(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Va(Ss,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&cE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),E5(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&cE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}E5(e,!0,r,null,s);break;case"together":E5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function A_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),vp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(gr(153));if(e.child!==null){for(t=e.child,r=w0(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=w0(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Wde(t,e,r){switch(e.tag){case 3:CW(e),Gx();break;case 5:Jz(e);break;case 1:dc(e.type)&&nE(e);break;case 4:KF(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Va(iE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Va(Ss,Ss.current&1),e.flags|=128,null):r&e.child.childLanes?_W(t,e,r):(Va(Ss,Ss.current&1),t=kA(t,e,r),t!==null?t.sibling:null);Va(Ss,Ss.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return EW(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Va(Ss,Ss.current),n)break;return null;case 22:case 23:return e.lanes=0,wW(t,e,r)}return kA(t,e,r)}var SW,CP,IW,jW;SW=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};CP=function(){};IW=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,Hm(wf.current);var s=null;switch(r){case"input":a=GB(t,a),n=GB(t,n),s=[];break;case"select":a=Ps({},a,{value:void 0}),n=Ps({},n,{value:void 0}),s=[];break;case"textarea":a=WB(t,a),n=WB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=tE)}YB(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(db.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(db.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&qa("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};jW=function(t,e,r,n){r!==n&&(e.flags|=4)};function N1(t,e){if(!ds)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Jo(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Xde(t,e,r){var n=e.pendingProps;switch(MF(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(e),null;case 1:return dc(e.type)&&rE(),Jo(e),null;case 3:return n=e.stateNode,zx(),es(uc),es(vl),qF(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(AN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xd!==null&&(TP(xd),xd=null))),CP(t,e),Jo(e),null;case 5:GF(e);var a=Hm(Nb.current);if(r=e.type,t!==null&&e.stateNode!=null)IW(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(gr(166));return Jo(e),null}if(t=Hm(wf.current),AN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Af]=e,n[bb]=s,t=(e.mode&1)!==0,r){case"dialog":qa("cancel",n),qa("close",n);break;case"iframe":case"object":case"embed":qa("load",n);break;case"video":case"audio":for(a=0;a<ny.length;a++)qa(ny[a],n);break;case"source":qa("error",n);break;case"img":case"image":case"link":qa("error",n),qa("load",n);break;case"details":qa("toggle",n);break;case"input":bM(n,s),qa("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},qa("invalid",n);break;case"textarea":NM(n,s),qa("invalid",n)}YB(r,s),a=null;for(var i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&fN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&fN(n.textContent,l,t),a=["children",""+l]):db.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&qa("scroll",n)}switch(r){case"input":aN(n),wM(n,s,!0);break;case"textarea":aN(n),CM(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=tE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nz(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Af]=e,t[bb]=n,SW(t,e,!1,!1),e.stateNode=t;e:{switch(i=JB(r,n),r){case"dialog":qa("cancel",t),qa("close",t),a=n;break;case"iframe":case"object":case"embed":qa("load",t),a=n;break;case"video":case"audio":for(a=0;a<ny.length;a++)qa(ny[a],t);a=n;break;case"source":qa("error",t),a=n;break;case"img":case"image":case"link":qa("error",t),qa("load",t),a=n;break;case"details":qa("toggle",t),a=n;break;case"input":bM(t,n),a=GB(t,n),qa("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=Ps({},n,{value:void 0}),qa("invalid",t);break;case"textarea":NM(t,n),a=WB(t,n),qa("invalid",t);break;default:a=n}YB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?iz(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&az(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&fb(t,c):typeof c=="number"&&fb(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(db.hasOwnProperty(s)?c!=null&&s==="onScroll"&&qa("scroll",t):c!=null&&NF(t,s,c,i))}switch(r){case"input":aN(t),wM(t,n,!1);break;case"textarea":aN(t),CM(t);break;case"option":n.value!=null&&t.setAttribute("value",""+k0(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Sx(t,!!n.multiple,s,!1):n.defaultValue!=null&&Sx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=tE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jo(e),null;case 6:if(t&&e.stateNode!=null)jW(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(gr(166));if(r=Hm(Nb.current),Hm(wf.current),AN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Af]=e,(s=n.nodeValue!==r)&&(t=Kc,t!==null))switch(t.tag){case 3:fN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Af]=e,e.stateNode=n}return Jo(e),null;case 13:if(es(Ss),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ds&&Qc!==null&&e.mode&1&&!(e.flags&128))qz(),Gx(),e.flags|=98560,s=!1;else if(s=AN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(gr(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(gr(317));s[Af]=e}else Gx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jo(e),s=!1}else xd!==null&&(TP(xd),xd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ss.current&1?Ui===0&&(Ui=3):sO())),e.updateQueue!==null&&(e.flags|=4),Jo(e),null);case 4:return zx(),CP(t,e),t===null&&vb(e.stateNode.containerInfo),Jo(e),null;case 10:return VF(e.type._context),Jo(e),null;case 17:return dc(e.type)&&rE(),Jo(e),null;case 19:if(es(Ss),s=e.memoizedState,s===null)return Jo(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)N1(s,!1);else{if(Ui!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=cE(t),i!==null){for(e.flags|=128,N1(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Va(Ss,Ss.current&1|2),e.child}t=t.sibling}s.tail!==null&&ai()>Xx&&(e.flags|=128,n=!0,N1(s,!1),e.lanes=4194304)}else{if(!n)if(t=cE(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),N1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ds)return Jo(e),null}else 2*ai()-s.renderingStartTime>Xx&&r!==1073741824&&(e.flags|=128,n=!0,N1(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ai(),e.sibling=null,r=Ss.current,Va(Ss,n?r&1|2:r&1),e):(Jo(e),null);case 22:case 23:return aO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Fc&1073741824&&(Jo(e),e.subtreeFlags&6&&(e.flags|=8192)):Jo(e),null;case 24:return null;case 25:return null}throw Error(gr(156,e.tag))}function Yde(t,e){switch(MF(e),e.tag){case 1:return dc(e.type)&&rE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zx(),es(uc),es(vl),qF(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GF(e),null;case 13:if(es(Ss),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(gr(340));Gx()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return es(Ss),null;case 4:return zx(),null;case 10:return VF(e.type._context),null;case 22:case 23:return aO(),null;case 24:return null;default:return null}}var pN=!1,Al=!1,Jde=typeof WeakSet=="function"?WeakSet:Set,Or=null;function px(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Vs(t,e,n)}else r.current=null}function _P(t,e,r){try{r()}catch(n){Vs(t,e,n)}}var AL=!1;function Zde(t,e){if(lP=J_,t=Fz(),DF(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var A;f!==r||a!==0&&f.nodeType!==3||(l=i+a),f!==s||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(A=f.firstChild)!==null;)h=f,f=A;for(;;){if(f===t)break t;if(h===r&&++u===a&&(l=i),h===s&&++d===n&&(c=i),(A=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=A}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(cP={focusedElem:t,selectionRange:r},J_=!1,Or=e;Or!==null;)if(e=Or,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Or=t;else for(;Or!==null;){e=Or;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,g=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?p:pd(e.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gr(163))}}catch(w){Vs(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Or=t;break}Or=e.return}return m=AL,AL=!1,m}function Ty(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&_P(e,r,s)}a=a.next}while(a!==n)}}function wI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function EP(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function BW(t){var e=t.alternate;e!==null&&(t.alternate=null,BW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Af],delete e[bb],delete e[fP],delete e[Ode],delete e[Dde])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PW(t){return t.tag===5||t.tag===3||t.tag===4}function hL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function SP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=tE));else if(n!==4&&(t=t.child,t!==null))for(SP(t,e,r),t=t.sibling;t!==null;)SP(t,e,r),t=t.sibling}function IP(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(IP(t,e,r),t=t.sibling;t!==null;)IP(t,e,r),t=t.sibling}var ko=null,gd=!1;function Ih(t,e,r){for(r=r.child;r!==null;)TW(t,e,r),r=r.sibling}function TW(t,e,r){if(bf&&typeof bf.onCommitFiberUnmount=="function")try{bf.onCommitFiberUnmount(hI,r)}catch{}switch(r.tag){case 5:Al||px(r,e);case 6:var n=ko,a=gd;ko=null,Ih(t,e,r),ko=n,gd=a,ko!==null&&(gd?(t=ko,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ko.removeChild(r.stateNode));break;case 18:ko!==null&&(gd?(t=ko,r=r.stateNode,t.nodeType===8?v5(t.parentNode,r):t.nodeType===1&&v5(t,r),pb(t)):v5(ko,r.stateNode));break;case 4:n=ko,a=gd,ko=r.stateNode.containerInfo,gd=!0,Ih(t,e,r),ko=n,gd=a;break;case 0:case 11:case 14:case 15:if(!Al&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&_P(r,e,i),a=a.next}while(a!==n)}Ih(t,e,r);break;case 1:if(!Al&&(px(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Vs(r,e,l)}Ih(t,e,r);break;case 21:Ih(t,e,r);break;case 22:r.mode&1?(Al=(n=Al)||r.memoizedState!==null,Ih(t,e,r),Al=n):Ih(t,e,r);break;default:Ih(t,e,r)}}function mL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Jde),e.forEach(function(n){var a=lfe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function id(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:ko=l.stateNode,gd=!1;break e;case 3:ko=l.stateNode.containerInfo,gd=!0;break e;case 4:ko=l.stateNode.containerInfo,gd=!0;break e}l=l.return}if(ko===null)throw Error(gr(160));TW(s,i,a),ko=null,gd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Vs(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kW(e,t),e=e.sibling}function kW(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(id(e,t),ef(t),n&4){try{Ty(3,t,t.return),wI(3,t)}catch(p){Vs(t,t.return,p)}try{Ty(5,t,t.return)}catch(p){Vs(t,t.return,p)}}break;case 1:id(e,t),ef(t),n&512&&r!==null&&px(r,r.return);break;case 5:if(id(e,t),ef(t),n&512&&r!==null&&px(r,r.return),t.flags&32){var a=t.stateNode;try{fb(a,"")}catch(p){Vs(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&tz(a,s),JB(l,i);var u=JB(l,s);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?iz(a,f):d==="dangerouslySetInnerHTML"?az(a,f):d==="children"?fb(a,f):NF(a,d,f,u)}switch(l){case"input":qB(a,s);break;case"textarea":rz(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?Sx(a,!!s.multiple,A,!1):h!==!!s.multiple&&(s.defaultValue!=null?Sx(a,!!s.multiple,s.defaultValue,!0):Sx(a,!!s.multiple,s.multiple?[]:"",!1))}a[bb]=s}catch(p){Vs(t,t.return,p)}}break;case 6:if(id(e,t),ef(t),n&4){if(t.stateNode===null)throw Error(gr(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){Vs(t,t.return,p)}}break;case 3:if(id(e,t),ef(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pb(e.containerInfo)}catch(p){Vs(t,t.return,p)}break;case 4:id(e,t),ef(t);break;case 13:id(e,t),ef(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(rO=ai())),n&4&&mL(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Al=(u=Al)||d,id(e,t),Al=u):id(e,t),ef(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Or=t,d=t.child;d!==null;){for(f=Or=d;Or!==null;){switch(h=Or,A=h.child,h.tag){case 0:case 11:case 14:case 15:Ty(4,h,h.return);break;case 1:px(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Vs(n,r,p)}}break;case 5:px(h,h.return);break;case 22:if(h.memoizedState!==null){gL(f);continue}}A!==null?(A.return=h,Or=A):gL(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sz("display",i))}catch(p){Vs(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Vs(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:id(e,t),ef(t),n&4&&mL(t);break;case 21:break;default:id(e,t),ef(t)}}function ef(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(PW(r)){var n=r;break e}r=r.return}throw Error(gr(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(fb(a,""),n.flags&=-33);var s=hL(t);IP(t,s,a);break;case 3:case 4:var i=n.stateNode.containerInfo,l=hL(t);SP(t,l,i);break;default:throw Error(gr(161))}}catch(c){Vs(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function efe(t,e,r){Or=t,FW(t)}function FW(t,e,r){for(var n=(t.mode&1)!==0;Or!==null;){var a=Or,s=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||pN;if(!i){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Al;l=pN;var u=Al;if(pN=i,(Al=c)&&!u)for(Or=a;Or!==null;)i=Or,c=i.child,i.tag===22&&i.memoizedState!==null?xL(a):c!==null?(c.return=i,Or=c):xL(a);for(;s!==null;)Or=s,FW(s),s=s.sibling;Or=a,pN=l,Al=u}pL(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Or=s):pL(t)}}function pL(t){for(;Or!==null;){var e=Or;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Al||wI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Al)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:pd(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eL(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}eL(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&pb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gr(163))}Al||e.flags&512&&EP(e)}catch(h){Vs(e,e.return,h)}}if(e===t){Or=null;break}if(r=e.sibling,r!==null){r.return=e.return,Or=r;break}Or=e.return}}function gL(t){for(;Or!==null;){var e=Or;if(e===t){Or=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Or=r;break}Or=e.return}}function xL(t){for(;Or!==null;){var e=Or;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{wI(4,e)}catch(c){Vs(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){Vs(e,a,c)}}var s=e.return;try{EP(e)}catch(c){Vs(e,s,c)}break;case 5:var i=e.return;try{EP(e)}catch(c){Vs(e,i,c)}}}catch(c){Vs(e,e.return,c)}if(e===t){Or=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Or=l;break}Or=e.return}}var tfe=Math.ceil,fE=zA.ReactCurrentDispatcher,eO=zA.ReactCurrentOwner,Mu=zA.ReactCurrentBatchConfig,Gn=0,mo=null,xi=null,Go=0,Fc=0,gx=J0(0),Ui=0,Sb=null,vp=0,NI=0,tO=0,ky=null,sc=null,rO=0,Xx=1/0,aA=null,AE=!1,jP=null,y0=null,gN=!1,i0=null,hE=0,Fy=0,BP=null,h_=-1,m_=0;function Ul(){return Gn&6?ai():h_!==-1?h_:h_=ai()}function b0(t){return t.mode&1?Gn&2&&Go!==0?Go&-Go:Mde.transition!==null?(m_===0&&(m_=xz()),m_):(t=Ca,t!==0||(t=window.event,t=t===void 0?16:_z(t.type)),t):1}function Sd(t,e,r,n){if(50<Fy)throw Fy=0,BP=null,Error(gr(185));T2(t,r,n),(!(Gn&2)||t!==mo)&&(t===mo&&(!(Gn&2)&&(NI|=r),Ui===4&&Xh(t,Go)),fc(t,n),r===1&&Gn===0&&!(e.mode&1)&&(Xx=ai()+500,vI&&Z0()))}function fc(t,e){var r=t.callbackNode;Mue(t,e);var n=Y_(t,t===mo?Go:0);if(n===0)r!==null&&SM(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&SM(r),e===1)t.tag===0?Rde(vL.bind(null,t)):$z(vL.bind(null,t)),kde(function(){!(Gn&6)&&Z0()}),r=null;else{switch(vz(n)){case 1:r=IF;break;case 4:r=pz;break;case 16:r=X_;break;case 536870912:r=gz;break;default:r=X_}r=VW(r,OW.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function OW(t,e){if(h_=-1,m_=0,Gn&6)throw Error(gr(327));var r=t.callbackNode;if(Tx()&&t.callbackNode!==r)return null;var n=Y_(t,t===mo?Go:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=mE(t,n);else{e=n;var a=Gn;Gn|=2;var s=RW();(mo!==t||Go!==e)&&(aA=null,Xx=ai()+500,Jm(t,e));do try{afe();break}catch(l){DW(t,l)}while(!0);QF(),fE.current=s,Gn=a,xi!==null?e=0:(mo=null,Go=0,e=Ui)}if(e!==0){if(e===2&&(a=nP(t),a!==0&&(n=a,e=PP(t,a))),e===1)throw r=Sb,Jm(t,0),Xh(t,n),fc(t,ai()),r;if(e===6)Xh(t,n);else{if(a=t.current.alternate,!(n&30)&&!rfe(a)&&(e=mE(t,n),e===2&&(s=nP(t),s!==0&&(n=s,e=PP(t,s))),e===1))throw r=Sb,Jm(t,0),Xh(t,n),fc(t,ai()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(gr(345));case 2:Em(t,sc,aA);break;case 3:if(Xh(t,n),(n&130023424)===n&&(e=rO+500-ai(),10<e)){if(Y_(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Ul(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=dP(Em.bind(null,t,sc,aA),e);break}Em(t,sc,aA);break;case 4:if(Xh(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var i=31-Ed(n);s=1<<i,i=e[i],i>a&&(a=i),n&=~s}if(n=a,n=ai()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tfe(n/1960))-n,10<n){t.timeoutHandle=dP(Em.bind(null,t,sc,aA),n);break}Em(t,sc,aA);break;case 5:Em(t,sc,aA);break;default:throw Error(gr(329))}}}return fc(t,ai()),t.callbackNode===r?OW.bind(null,t):null}function PP(t,e){var r=ky;return t.current.memoizedState.isDehydrated&&(Jm(t,e).flags|=256),t=mE(t,e),t!==2&&(e=sc,sc=r,e!==null&&TP(e)),t}function TP(t){sc===null?sc=t:sc.push.apply(sc,t)}function rfe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Td(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xh(t,e){for(e&=~tO,e&=~NI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ed(e),n=1<<r;t[r]=-1,e&=~n}}function vL(t){if(Gn&6)throw Error(gr(327));Tx();var e=Y_(t,0);if(!(e&1))return fc(t,ai()),null;var r=mE(t,e);if(t.tag!==0&&r===2){var n=nP(t);n!==0&&(e=n,r=PP(t,n))}if(r===1)throw r=Sb,Jm(t,0),Xh(t,e),fc(t,ai()),r;if(r===6)throw Error(gr(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Em(t,sc,aA),fc(t,ai()),null}function nO(t,e){var r=Gn;Gn|=1;try{return t(e)}finally{Gn=r,Gn===0&&(Xx=ai()+500,vI&&Z0())}}function yp(t){i0!==null&&i0.tag===0&&!(Gn&6)&&Tx();var e=Gn;Gn|=1;var r=Mu.transition,n=Ca;try{if(Mu.transition=null,Ca=1,t)return t()}finally{Ca=n,Mu.transition=r,Gn=e,!(Gn&6)&&Z0()}}function aO(){Fc=gx.current,es(gx)}function Jm(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Tde(r)),xi!==null)for(r=xi.return;r!==null;){var n=r;switch(MF(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&rE();break;case 3:zx(),es(uc),es(vl),qF();break;case 5:GF(n);break;case 4:zx();break;case 13:es(Ss);break;case 19:es(Ss);break;case 10:VF(n.type._context);break;case 22:case 23:aO()}r=r.return}if(mo=t,xi=t=w0(t.current,null),Go=Fc=e,Ui=0,Sb=null,tO=NI=vp=0,sc=ky=null,Vm!==null){for(e=0;e<Vm.length;e++)if(r=Vm[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=a,n.next=i}r.pending=n}Vm=null}return t}function DW(t,e){do{var r=xi;try{if(QF(),d_.current=dE,uE){for(var n=Bs.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}uE=!1}if(xp=0,uo=Pi=Bs=null,Py=!1,Cb=0,eO.current=null,r===null||r.return===null){Ui=1,Sb=e,xi=null;break}e:{var s=t,i=r.return,l=r,c=e;if(e=Go,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var A=iL(i);if(A!==null){A.flags&=-257,oL(A,i,l,s,e),A.mode&1&&sL(s,u,e),e=A,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){sL(s,u,e),sO();break e}c=Error(gr(426))}}else if(ds&&l.mode&1){var g=iL(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),oL(g,i,l,s,e),LF(Wx(c,l));break e}}s=c=Wx(c,l),Ui!==4&&(Ui=2),ky===null?ky=[s]:ky.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=vW(s,c,e);ZM(s,x);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(y0===null||!y0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=yW(s,l,e);ZM(s,w);break e}}s=s.return}while(s!==null)}LW(r)}catch(j){e=j,xi===r&&r!==null&&(xi=r=r.return);continue}break}while(!0)}function RW(){var t=fE.current;return fE.current=dE,t===null?dE:t}function sO(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),mo===null||!(vp&268435455)&&!(NI&268435455)||Xh(mo,Go)}function mE(t,e){var r=Gn;Gn|=2;var n=RW();(mo!==t||Go!==e)&&(aA=null,Jm(t,e));do try{nfe();break}catch(a){DW(t,a)}while(!0);if(QF(),Gn=r,fE.current=n,xi!==null)throw Error(gr(261));return mo=null,Go=0,Ui}function nfe(){for(;xi!==null;)MW(xi)}function afe(){for(;xi!==null&&!jue();)MW(xi)}function MW(t){var e=QW(t.alternate,t,Fc);t.memoizedProps=t.pendingProps,e===null?LW(t):xi=e,eO.current=null}function LW(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Yde(r,e),r!==null){r.flags&=32767,xi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ui=6,xi=null;return}}else if(r=Xde(r,e,Fc),r!==null){xi=r;return}if(e=e.sibling,e!==null){xi=e;return}xi=e=t}while(e!==null);Ui===0&&(Ui=5)}function Em(t,e,r){var n=Ca,a=Mu.transition;try{Mu.transition=null,Ca=1,sfe(t,e,r,n)}finally{Mu.transition=a,Ca=n}return null}function sfe(t,e,r,n){do Tx();while(i0!==null);if(Gn&6)throw Error(gr(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(gr(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Lue(t,s),t===mo&&(xi=mo=null,Go=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gN||(gN=!0,VW(X_,function(){return Tx(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Mu.transition,Mu.transition=null;var i=Ca;Ca=1;var l=Gn;Gn|=4,eO.current=null,Zde(t,r),kW(r,t),_de(cP),J_=!!lP,cP=lP=null,t.current=r,efe(r),Bue(),Gn=l,Ca=i,Mu.transition=s}else t.current=r;if(gN&&(gN=!1,i0=t,hE=a),s=t.pendingLanes,s===0&&(y0=null),kue(r.stateNode),fc(t,ai()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(AE)throw AE=!1,t=jP,jP=null,t;return hE&1&&t.tag!==0&&Tx(),s=t.pendingLanes,s&1?t===BP?Fy++:(Fy=0,BP=t):Fy=0,Z0(),null}function Tx(){if(i0!==null){var t=vz(hE),e=Mu.transition,r=Ca;try{if(Mu.transition=null,Ca=16>t?16:t,i0===null)var n=!1;else{if(t=i0,i0=null,hE=0,Gn&6)throw Error(gr(331));var a=Gn;for(Gn|=4,Or=t.current;Or!==null;){var s=Or,i=s.child;if(Or.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Or=u;Or!==null;){var d=Or;switch(d.tag){case 0:case 11:case 15:Ty(8,d,s)}var f=d.child;if(f!==null)f.return=d,Or=f;else for(;Or!==null;){d=Or;var h=d.sibling,A=d.return;if(BW(d),d===u){Or=null;break}if(h!==null){h.return=A,Or=h;break}Or=A}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Or=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Or=i;else e:for(;Or!==null;){if(s=Or,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ty(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Or=x;break e}Or=s.return}}var y=t.current;for(Or=y;Or!==null;){i=Or;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Or=b;else e:for(i=y;Or!==null;){if(l=Or,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wI(9,l)}}catch(j){Vs(l,l.return,j)}if(l===i){Or=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Or=w;break e}Or=l.return}}if(Gn=a,Z0(),bf&&typeof bf.onPostCommitFiberRoot=="function")try{bf.onPostCommitFiberRoot(hI,t)}catch{}n=!0}return n}finally{Ca=r,Mu.transition=e}}return!1}function yL(t,e,r){e=Wx(r,e),e=vW(t,e,1),t=v0(t,e,1),e=Ul(),t!==null&&(T2(t,1,e),fc(t,e))}function Vs(t,e,r){if(t.tag===3)yL(t,t,r);else for(;e!==null;){if(e.tag===3){yL(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(y0===null||!y0.has(n))){t=Wx(r,t),t=yW(e,t,1),e=v0(e,t,1),t=Ul(),e!==null&&(T2(e,1,t),fc(e,t));break}}e=e.return}}function ife(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Ul(),t.pingedLanes|=t.suspendedLanes&r,mo===t&&(Go&r)===r&&(Ui===4||Ui===3&&(Go&130023424)===Go&&500>ai()-rO?Jm(t,0):tO|=r),fc(t,e)}function UW(t,e){e===0&&(t.mode&1?(e=oN,oN<<=1,!(oN&130023424)&&(oN=4194304)):e=1);var r=Ul();t=TA(t,e),t!==null&&(T2(t,e,r),fc(t,r))}function ofe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),UW(t,r)}function lfe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(gr(314))}n!==null&&n.delete(e),UW(t,r)}var QW;QW=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||uc.current)oc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return oc=!1,Wde(t,e,r);oc=!!(t.flags&131072)}else oc=!1,ds&&e.flags&1048576&&Kz(e,sE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;A_(t,e),t=e.pendingProps;var a=Kx(e,vl.current);Px(e,r),a=WF(null,e,n,t,a,r);var s=XF();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dc(n)?(s=!0,nE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$F(e),a.updater=bI,e.stateNode=a,a._reactInternals=e,xP(e,n,t,r),e=bP(null,e,n,!0,s,r)):(e.tag=0,ds&&s&&RF(e),Fl(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(A_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=ufe(n),t=pd(n,t),a){case 0:e=yP(null,e,n,t,r);break e;case 1:e=uL(null,e,n,t,r);break e;case 11:e=lL(null,e,n,t,r);break e;case 14:e=cL(null,e,n,pd(n.type,t),r);break e}throw Error(gr(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pd(n,a),yP(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pd(n,a),uL(t,e,n,a,r);case 3:e:{if(CW(e),t===null)throw Error(gr(387));n=e.pendingProps,s=e.memoizedState,a=s.element,Yz(t,e),lE(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=Wx(Error(gr(423)),e),e=dL(t,e,n,r,a);break e}else if(n!==a){a=Wx(Error(gr(424)),e),e=dL(t,e,n,r,a);break e}else for(Qc=x0(e.stateNode.containerInfo.firstChild),Kc=e,ds=!0,xd=null,r=Wz(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gx(),n===a){e=kA(t,e,r);break e}Fl(t,e,n,r)}e=e.child}return e;case 5:return Jz(e),t===null&&mP(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,i=a.children,uP(n,a)?i=null:s!==null&&uP(n,s)&&(e.flags|=32),NW(t,e),Fl(t,e,i,r),e.child;case 6:return t===null&&mP(e),null;case 13:return _W(t,e,r);case 4:return KF(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=qx(e,null,n,r):Fl(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pd(n,a),lL(t,e,n,a,r);case 7:return Fl(t,e,e.pendingProps,r),e.child;case 8:return Fl(t,e,e.pendingProps.children,r),e.child;case 12:return Fl(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,i=a.value,Va(iE,n._currentValue),n._currentValue=i,s!==null)if(Td(s.value,i)){if(s.children===a.children&&!uc.current){e=kA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){i=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=vA(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),pP(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(gr(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),pP(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Fl(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Px(e,r),a=Hu(a),n=n(a),e.flags|=1,Fl(t,e,n,r),e.child;case 14:return n=e.type,a=pd(n,e.pendingProps),a=pd(n.type,a),cL(t,e,n,a,r);case 15:return bW(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:pd(n,a),A_(t,e),e.tag=1,dc(n)?(t=!0,nE(e)):t=!1,Px(e,r),xW(e,n,a),xP(e,n,a,r),bP(null,e,n,!0,t,r);case 19:return EW(t,e,r);case 22:return wW(t,e,r)}throw Error(gr(156,e.tag))};function VW(t,e){return mz(t,e)}function cfe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(t,e,r,n){return new cfe(t,e,r,n)}function iO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ufe(t){if(typeof t=="function")return iO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_F)return 11;if(t===EF)return 14}return 2}function w0(t,e){var r=t.alternate;return r===null?(r=Tu(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function p_(t,e,r,n,a,s){var i=2;if(n=t,typeof t=="function")iO(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case ox:return Zm(r.children,a,s,e);case CF:i=8,a|=8;break;case VB:return t=Tu(12,r,e,a|2),t.elementType=VB,t.lanes=s,t;case HB:return t=Tu(13,r,e,a),t.elementType=HB,t.lanes=s,t;case $B:return t=Tu(19,r,e,a),t.elementType=$B,t.lanes=s,t;case Jq:return CI(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xq:i=10;break e;case Yq:i=9;break e;case _F:i=11;break e;case EF:i=14;break e;case Hh:i=16,n=null;break e}throw Error(gr(130,t==null?t:typeof t,""))}return e=Tu(i,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Zm(t,e,r,n){return t=Tu(7,t,n,e),t.lanes=r,t}function CI(t,e,r,n){return t=Tu(22,t,n,e),t.elementType=Jq,t.lanes=r,t.stateNode={isHidden:!1},t}function S5(t,e,r){return t=Tu(6,t,null,e),t.lanes=r,t}function I5(t,e,r){return e=Tu(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dfe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l5(0),this.expirationTimes=l5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l5(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function oO(t,e,r,n,a,s,i,l,c){return t=new dfe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tu(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$F(s),t}function ffe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ix,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function HW(t){if(!t)return F0;t=t._reactInternals;e:{if(zp(t)!==t||t.tag!==1)throw Error(gr(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(gr(171))}if(t.tag===1){var r=t.type;if(dc(r))return Hz(t,r,e)}return e}function $W(t,e,r,n,a,s,i,l,c){return t=oO(r,n,!0,t,a,s,i,l,c),t.context=HW(null),r=t.current,n=Ul(),a=b0(r),s=vA(n,a),s.callback=e??null,v0(r,s,a),t.current.lanes=a,T2(t,a,n),fc(t,n),t}function _I(t,e,r,n){var a=e.current,s=Ul(),i=b0(a);return r=HW(r),e.context===null?e.context=r:e.pendingContext=r,e=vA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=v0(a,e,i),t!==null&&(Sd(t,a,i,s),u_(t,a,i)),i}function pE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function lO(t,e){bL(t,e),(t=t.alternate)&&bL(t,e)}function Afe(){return null}var KW=typeof reportError=="function"?reportError:function(t){console.error(t)};function cO(t){this._internalRoot=t}EI.prototype.render=cO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(gr(409));_I(t,e,null,null)};EI.prototype.unmount=cO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yp(function(){_I(null,t,null,null)}),e[PA]=null}};function EI(t){this._internalRoot=t}EI.prototype.unstable_scheduleHydration=function(t){if(t){var e=wz();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Wh.length&&e!==0&&e<Wh[r].priority;r++);Wh.splice(r,0,t),r===0&&Cz(t)}};function uO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function SI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wL(){}function hfe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=pE(i);s.call(u)}}var i=$W(e,n,t,0,null,!1,!1,"",wL);return t._reactRootContainer=i,t[PA]=i.current,vb(t.nodeType===8?t.parentNode:t),yp(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=pE(c);l.call(u)}}var c=oO(t,0,!1,null,null,!1,!1,"",wL);return t._reactRootContainer=c,t[PA]=c.current,vb(t.nodeType===8?t.parentNode:t),yp(function(){_I(e,c,r,n)}),c}function II(t,e,r,n,a){var s=r._reactRootContainer;if(s){var i=s;if(typeof a=="function"){var l=a;a=function(){var c=pE(i);l.call(c)}}_I(e,i,t,a)}else i=hfe(r,e,t,a,n);return pE(i)}yz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ry(e.pendingLanes);r!==0&&(jF(e,r|1),fc(e,ai()),!(Gn&6)&&(Xx=ai()+500,Z0()))}break;case 13:yp(function(){var n=TA(t,1);if(n!==null){var a=Ul();Sd(n,t,1,a)}}),lO(t,1)}};BF=function(t){if(t.tag===13){var e=TA(t,134217728);if(e!==null){var r=Ul();Sd(e,t,134217728,r)}lO(t,134217728)}};bz=function(t){if(t.tag===13){var e=b0(t),r=TA(t,e);if(r!==null){var n=Ul();Sd(r,t,e,n)}lO(t,e)}};wz=function(){return Ca};Nz=function(t,e){var r=Ca;try{return Ca=t,e()}finally{Ca=r}};eP=function(t,e,r){switch(e){case"input":if(qB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=xI(n);if(!a)throw Error(gr(90));ez(n),qB(n,a)}}}break;case"textarea":rz(t,r);break;case"select":e=r.value,e!=null&&Sx(t,!!r.multiple,e,!1)}};cz=nO;uz=yp;var mfe={usingClientEntryPoint:!1,Events:[F2,dx,xI,oz,lz,nO]},C1={findFiberByHostInstance:Qm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pfe={bundleType:C1.bundleType,version:C1.version,rendererPackageName:C1.rendererPackageName,rendererConfig:C1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Az(t),t===null?null:t.stateNode},findFiberByHostInstance:C1.findFiberByHostInstance||Afe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xN.isDisabled&&xN.supportsFiber)try{hI=xN.inject(pfe),bf=xN}catch{}}Jc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mfe;Jc.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uO(e))throw Error(gr(200));return ffe(t,e,null,r)};Jc.createRoot=function(t,e){if(!uO(t))throw Error(gr(299));var r=!1,n="",a=KW;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=oO(t,1,!1,null,null,r,!1,n,a),t[PA]=e.current,vb(t.nodeType===8?t.parentNode:t),new cO(e)};Jc.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(gr(188)):(t=Object.keys(t).join(","),Error(gr(268,t)));return t=Az(e),t=t===null?null:t.stateNode,t};Jc.flushSync=function(t){return yp(t)};Jc.hydrate=function(t,e,r){if(!SI(e))throw Error(gr(200));return II(null,t,e,!0,r)};Jc.hydrateRoot=function(t,e,r){if(!uO(t))throw Error(gr(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",i=KW;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=$W(e,null,t,1,r??null,a,!1,s,i),t[PA]=e.current,vb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new EI(e)};Jc.render=function(t,e,r){if(!SI(e))throw Error(gr(200));return II(null,t,e,!1,r)};Jc.unmountComponentAtNode=function(t){if(!SI(t))throw Error(gr(40));return t._reactRootContainer?(yp(function(){II(null,null,t,!1,function(){t._reactRootContainer=null,t[PA]=null})}),!0):!1};Jc.unstable_batchedUpdates=nO;Jc.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!SI(r))throw Error(gr(200));if(t==null||t._reactInternals===void 0)throw Error(gr(38));return II(t,e,r,!1,n)};Jc.version="18.3.1-next-f1338f8080-20240426";function GW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GW)}catch(t){console.error(t)}}GW(),Gq.exports=Jc;var Lu=Gq.exports,NL=Lu;UB.createRoot=NL.createRoot,UB.hydrateRoot=NL.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var CL="popstate";function gfe(t={}){function e(n,a){let{pathname:s,search:i,hash:l}=n.location;return kP("",{pathname:s,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ib(a)}return vfe(e,r,null,t)}function ps(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xfe(){return Math.random().toString(36).substring(2,10)}function _L(t,e){return{usr:t.state,key:t.key,idx:e}}function kP(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Cv(e):e,state:r,key:e&&e.key||n||xfe()}}function Ib({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Cv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function vfe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l="POP",c=null,u=d();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function h(g,x){l="PUSH";let y=kP(p.location,g,x);u=d()+1;let b=_L(y,u),w=p.createHref(y);try{i.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function A(g,x){l="REPLACE";let y=kP(p.location,g,x);u=d();let b=_L(y,u),w=p.createHref(y);i.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(g){return yfe(g)}let p={get action(){return l},get location(){return t(a,i)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(CL,f),c=g,()=>{a.removeEventListener(CL,f),c=null}},createHref(g){return e(a,g)},createURL:m,encodeLocation(g){let x=m(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:A,go(g){return i.go(g)}};return p}function yfe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ps(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Ib(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function qW(t,e,r="/"){return bfe(t,e,r,!1)}function bfe(t,e,r,n){let a=typeof e=="string"?Cv(e):e,s=FA(a.pathname||"/",r);if(s==null)return null;let i=zW(t);wfe(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=kfe(s);l=Pfe(i[c],u,n)}return l}function zW(t,e=[],r=[],n="",a=!1){let s=(i,l,c=a,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;ps(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=yA([n,d.relativePath]),h=r.concat(d);i.children&&i.children.length>0&&(ps(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),zW(i.children,e,h,f,c)),!(i.path==null&&!i.index)&&e.push({path:f,score:jfe(f,i.index),routesMeta:h})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of WW(i.path))s(i,l,!0,u)}),e}function WW(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=WW(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function wfe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Bfe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Nfe=/^:[\w-]+$/,Cfe=3,_fe=2,Efe=1,Sfe=10,Ife=-2,EL=t=>t==="*";function jfe(t,e){let r=t.split("/"),n=r.length;return r.some(EL)&&(n+=Ife),e&&(n+=_fe),r.filter(a=>!EL(a)).reduce((a,s)=>a+(Nfe.test(s)?Cfe:s===""?Efe:Sfe),n)}function Bfe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function Pfe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=gE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=gE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),i.push({params:a,pathname:yA([s,f.pathname]),pathnameBase:Rfe(yA([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=yA([s,f.pathnameBase]))}return i}function gE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Tfe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let m=l[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const A=l[h];return f&&!A?u[d]=void 0:u[d]=(A||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:t}}function Tfe(t,e=!1,r=!0){kd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function kfe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kd(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function FA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Ffe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Cv(t):t;return{pathname:r?r.startsWith("/")?r:Ofe(r,e):e,search:Mfe(n),hash:Lfe(a)}}function Ofe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function j5(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Dfe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function dO(t){let e=Dfe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function fO(t,e,r,n=!1){let a;typeof t=="string"?a=Cv(t):(a={...t},ps(!a.pathname||!a.pathname.includes("?"),j5("?","pathname","search",a)),ps(!a.pathname||!a.pathname.includes("#"),j5("#","pathname","hash",a)),ps(!a.search||!a.search.includes("#"),j5("#","search","hash",a)));let s=t===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let f=e.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=Ffe(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var yA=t=>t.join("/").replace(/\/\/+/g,"/"),Rfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Mfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Lfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ufe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var XW=["POST","PUT","PATCH","DELETE"];new Set(XW);var Qfe=["GET",...XW];new Set(Qfe);var _v=v.createContext(null);_v.displayName="DataRouter";var jI=v.createContext(null);jI.displayName="DataRouterState";v.createContext(!1);var YW=v.createContext({isTransitioning:!1});YW.displayName="ViewTransition";var Vfe=v.createContext(new Map);Vfe.displayName="Fetchers";var Hfe=v.createContext(null);Hfe.displayName="Await";var Ld=v.createContext(null);Ld.displayName="Navigation";var D2=v.createContext(null);D2.displayName="Location";var Ud=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ud.displayName="Route";var AO=v.createContext(null);AO.displayName="RouteError";function $fe(t,{relative:e}={}){ps(Ev(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Ld),{hash:a,pathname:s,search:i}=M2(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:yA([r,s])),n.createHref({pathname:l,search:i,hash:a})}function Ev(){return v.useContext(D2)!=null}function WA(){return ps(Ev(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(D2).location}var JW="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ZW(t){v.useContext(Ld).static||v.useLayoutEffect(t)}function R2(){let{isDataRoute:t}=v.useContext(Ud);return t?sAe():Kfe()}function Kfe(){ps(Ev(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(_v),{basename:e,navigator:r}=v.useContext(Ld),{matches:n}=v.useContext(Ud),{pathname:a}=WA(),s=JSON.stringify(dO(n)),i=v.useRef(!1);return ZW(()=>{i.current=!0}),v.useCallback((c,u={})=>{if(kd(i.current,JW),!i.current)return;if(typeof c=="number"){r.go(c);return}let d=fO(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:yA([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var Gfe=v.createContext(null);function qfe(t){let e=v.useContext(Ud).outlet;return e&&v.createElement(Gfe.Provider,{value:t},e)}function M2(t,{relative:e}={}){let{matches:r}=v.useContext(Ud),{pathname:n}=WA(),a=JSON.stringify(dO(r));return v.useMemo(()=>fO(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function zfe(t,e){return eX(t,e)}function eX(t,e,r,n){var x;ps(Ev(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(Ld),{matches:s}=v.useContext(Ud),i=s[s.length-1],l=i?i.params:{},c=i?i.pathname:"/",u=i?i.pathnameBase:"/",d=i&&i.route;{let y=d&&d.path||"";tX(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=WA(),h;if(e){let y=typeof e=="string"?Cv(e):e;ps(u==="/"||((x=y.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=f;let A=h.pathname||"/",m=A;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+A.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=qW(t,{pathname:m});kd(d||p!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),kd(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Zfe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:yA([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:yA([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&g?v.createElement(D2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},g):g}function Wfe(){let t=aAe(),e=Ufe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:s},"ErrorBoundary")," or"," ",v.createElement("code",{style:s},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,i)}var Xfe=v.createElement(Wfe,null),Yfe=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Ud.Provider,{value:this.props.routeContext},v.createElement(AO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Jfe({routeContext:t,match:e,children:r}){let n=v.useContext(_v);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Ud.Provider,{value:t},r)}function Zfe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);ps(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let i=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){i=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,h=!1,A=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,A=u.route.errorElement||Xfe,i&&(l<0&&d===0?(tX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),g=()=>{let x;return f?x=A:h?x=m:u.route.Component?x=v.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,v.createElement(Jfe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:x})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(Yfe,{location:r.location,revalidation:r.revalidation,component:A,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function hO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eAe(t){let e=v.useContext(_v);return ps(e,hO(t)),e}function tAe(t){let e=v.useContext(jI);return ps(e,hO(t)),e}function rAe(t){let e=v.useContext(Ud);return ps(e,hO(t)),e}function mO(t){let e=rAe(t),r=e.matches[e.matches.length-1];return ps(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function nAe(){return mO("useRouteId")}function aAe(){var n;let t=v.useContext(AO),e=tAe("useRouteError"),r=mO("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function sAe(){let{router:t}=eAe("useNavigate"),e=mO("useNavigate"),r=v.useRef(!1);return ZW(()=>{r.current=!0}),v.useCallback(async(a,s={})=>{kd(r.current,JW),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var SL={};function tX(t,e,r){!e&&!SL[t]&&(SL[t]=!0,kd(!1,r))}v.memo(iAe);function iAe({routes:t,future:e,state:r}){return eX(t,void 0,r,e)}function rA({to:t,replace:e,state:r,relative:n}){ps(Ev(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(Ld);kd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=v.useContext(Ud),{pathname:i}=WA(),l=R2(),c=fO(t,dO(s),i,n==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function rX(t){return qfe(t.context)}function mn(t){ps(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function oAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){ps(!Ev(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:i,navigator:a,static:s,future:{}}),[i,a,s]);typeof r=="string"&&(r=Cv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,A=v.useMemo(()=>{let m=FA(c,i);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:h},navigationType:n}},[i,c,u,d,f,h,n]);return kd(A!=null,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:v.createElement(Ld.Provider,{value:l},v.createElement(D2.Provider,{children:e,value:A}))}function lAe({children:t,location:e}){return zfe(FP(t),e)}function FP(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let s=[...e,a];if(n.type===v.Fragment){r.push.apply(r,FP(n.props.children,s));return}ps(n.type===mn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ps(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=FP(n.props.children,s)),r.push(i)}),r}var g_="get",x_="application/x-www-form-urlencoded";function BI(t){return t!=null&&typeof t.tagName=="string"}function cAe(t){return BI(t)&&t.tagName.toLowerCase()==="button"}function uAe(t){return BI(t)&&t.tagName.toLowerCase()==="form"}function dAe(t){return BI(t)&&t.tagName.toLowerCase()==="input"}function fAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AAe(t,e){return t.button===0&&(!e||e==="_self")&&!fAe(t)}var vN=null;function hAe(){if(vN===null)try{new FormData(document.createElement("form"),0),vN=!1}catch{vN=!0}return vN}var mAe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B5(t){return t!=null&&!mAe.has(t)?(kd(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${x_}"`),null):t}function pAe(t,e){let r,n,a,s,i;if(uAe(t)){let l=t.getAttribute("action");n=l?FA(l,e):null,r=t.getAttribute("method")||g_,a=B5(t.getAttribute("enctype"))||x_,s=new FormData(t)}else if(cAe(t)||dAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?FA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||g_,a=B5(t.getAttribute("formenctype"))||B5(l.getAttribute("enctype"))||x_,s=new FormData(l,t),!hAe()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(BI(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=g_,n=null,a=x_,i=t}return s&&a==="text/plain"&&(i=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pO(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gAe(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&FA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function xAe(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vAe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yAe(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let i=await xAe(s,r);return i.links?i.links():[]}return[]}));return CAe(n.flat(1).filter(vAe).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function IL(t,e,r,n,a,s){let i=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>i(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function bAe(t,e,{includeHydrateFallback:r}={}){return wAe(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function wAe(t){return[...new Set(t)]}function NAe(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function CAe(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(NAe(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function nX(){let t=v.useContext(_v);return pO(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _Ae(){let t=v.useContext(jI);return pO(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var gO=v.createContext(void 0);gO.displayName="FrameworkContext";function aX(){let t=v.useContext(gO);return pO(t,"You must render this element inside a <HydratedRouter> element"),t}function EAe(t,e){let r=v.useContext(gO),[n,a]=v.useState(!1),[s,i]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let p=x=>{x.forEach(y=>{i(y.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let p=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(p)}}},[n]);let A=()=>{a(!0)},m=()=>{a(!1),i(!1)};return r?t!=="intent"?[s,h,{}]:[s,h,{onFocus:_1(l,A),onBlur:_1(c,m),onMouseEnter:_1(u,A),onMouseLeave:_1(d,m),onTouchStart:_1(f,A)}]:[!1,h,{}]}function _1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function SAe({page:t,...e}){let{router:r}=nX(),n=v.useMemo(()=>qW(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(jAe,{page:t,matches:n,...e}):null}function IAe(t){let{manifest:e,routeModules:r}=aX(),[n,a]=v.useState([]);return v.useEffect(()=>{let s=!1;return yAe(t,e,r).then(i=>{s||a(i)}),()=>{s=!0}},[t,e,r]),n}function jAe({page:t,matches:e,...r}){let n=WA(),{manifest:a,routeModules:s}=aX(),{basename:i}=nX(),{loaderData:l,matches:c}=_Ae(),u=v.useMemo(()=>IL(t,e,c,a,n,"data"),[t,e,c,a,n]),d=v.useMemo(()=>IL(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(x=>{var b;let y=a.routes[x.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===x.route.id)&&x.route.id in l&&((b=s[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(x.route.id))}),m.size===0)return[];let g=gAe(t,i,"data");return p&&m.size>0&&g.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[i,l,n,a,u,e,t,s]),h=v.useMemo(()=>bAe(d,a),[d,a]),A=IAe(d);return v.createElement(v.Fragment,null,f.map(m=>v.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>v.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),A.map(({key:m,link:p})=>v.createElement("link",{key:m,nonce:r.nonce,...p})))}function BAe(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var sX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sX&&(window.__reactRouterVersion="7.8.1")}catch{}function PAe({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=gfe({window:r,v5Compat:!0}));let a=n.current,[s,i]=v.useState({action:a.action,location:a.location}),l=v.useCallback(c=>{v.startTransition(()=>i(c))},[i]);return v.useLayoutEffect(()=>a.listen(l),[a,l]),v.createElement(oAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var iX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oX=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},A){let{basename:m}=v.useContext(Ld),p=typeof u=="string"&&iX.test(u),g,x=!1;if(typeof u=="string"&&p&&(g=u,sX))try{let S=new URL(window.location.href),O=u.startsWith("//")?new URL(S.protocol+u):new URL(u),P=FA(O.pathname,m);O.origin===S.origin&&P!=null?u=P+O.search+O.hash:x=!0}catch{kd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=$fe(u,{relative:a}),[b,w,j]=EAe(n,h),I=FAe(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(S){e&&e(S),S.defaultPrevented||I(S)}let E=v.createElement("a",{...h,...j,href:g||y,onClick:x||s?e:_,ref:BAe(A,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?v.createElement(v.Fragment,null,E,v.createElement(SAe,{page:y})):E});oX.displayName="Link";var Qr=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:i,viewTransition:l,children:c,...u},d){let f=M2(i,{relative:u.relative}),h=WA(),A=v.useContext(jI),{navigator:m,basename:p}=v.useContext(Ld),g=A!=null&&LAe(f)&&l===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=h.pathname,b=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&p&&(b=FA(b,p)||b);const w=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=y===x||!a&&y.startsWith(x)&&y.charAt(w)==="/",I=b!=null&&(b===x||!a&&b.startsWith(x)&&b.charAt(x.length)==="/"),_={isActive:j,isPending:I,isTransitioning:g},E=j?e:void 0,S;typeof n=="function"?S=n(_):S=[n,j?"active":null,I?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(_):s;return v.createElement(oX,{...u,"aria-current":E,className:S,ref:d,style:O,to:i,viewTransition:l},typeof c=="function"?c(_):c)});Qr.displayName="NavLink";var TAe=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:i=g_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},A)=>{let m=RAe(),p=MAe(l,{relative:u}),g=i.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&iX.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:A,method:g,action:p,onSubmit:n?c:y,...h,"data-discover":!x&&t==="render"?"true":void 0})});TAe.displayName="Form";function kAe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lX(t){let e=v.useContext(_v);return ps(e,kAe(t)),e}function FAe(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:i}={}){let l=R2(),c=WA(),u=M2(t,{relative:s});return v.useCallback(d=>{if(AAe(d,e)){d.preventDefault();let f=r!==void 0?r:Ib(c)===Ib(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:i})}},[c,l,u,r,n,e,t,a,s,i])}var OAe=0,DAe=()=>`__${String(++OAe)}__`;function RAe(){let{router:t}=lX("useSubmit"),{basename:e}=v.useContext(Ld),r=nAe();return v.useCallback(async(n,a={})=>{let{action:s,method:i,encType:l,formData:c,body:u}=pAe(n,e);if(a.navigate===!1){let d=a.fetcherKey||DAe();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||i,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function MAe(t,{relative:e}={}){let{basename:r}=v.useContext(Ld),n=v.useContext(Ud);ps(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...M2(t||".",{relative:e})},i=WA();if(t==null){s.search=i.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:yA([r,s.pathname])),Ib(s)}function LAe(t,{relative:e}={}){let r=v.useContext(YW);ps(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lX("useViewTransitionState"),a=M2(t,{relative:e});if(!r.isTransitioning)return!1;let s=FA(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=FA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return gE(a.pathname,i)!=null||gE(a.pathname,s)!=null}function Jr(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var jL={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},UAe=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],i=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return e.join("")},uX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],i=a+1<t.length,l=i?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,A=u&63;c||(A=64,i||(h=64)),n.push(r[d],r[f],r[h],r[A])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cX(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UAe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new QAe;const h=s<<2|l>>4;if(n.push(h),u!==64){const A=l<<4&240|u>>2;if(n.push(A),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QAe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VAe=function(t){const e=cX(t);return uX.encodeByteArray(e,!0)},xE=function(t){return VAe(t).replace(/\./g,"")},dX=function(t){try{return uX.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Ae=()=>HAe().__FIREBASE_DEFAULTS__,KAe=()=>{if(typeof process>"u"||typeof jL>"u")return;const t=jL.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GAe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dX(t[1]);return e&&JSON.parse(e)},PI=()=>{try{return $Ae()||KAe()||GAe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fX=t=>{var e,r;return(r=(e=PI())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},qAe=t=>{const e=fX(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},AX=()=>{var t;return(t=PI())===null||t===void 0?void 0:t.config},hX=t=>{var e;return(e=PI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zAe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WAe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xE(JSON.stringify(r)),xE(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XAe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hi())}function YAe(){var t;const e=(t=PI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JAe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZAe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ehe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function the(){const t=Hi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mX(){return!YAe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pX(){try{return typeof indexedDB=="object"}catch{return!1}}function rhe(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nhe="FirebaseError";class XA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=nhe,Object.setPrototypeOf(this,XA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L2.prototype.create)}}class L2{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],i=s?ahe(s,n):"Error",l=`${this.serviceName}: ${i} (${a}).`;return new XA(a,l,n)}}function ahe(t,e){return t.replace(she,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const she=/\{\$([^}]+)}/g;function ihe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vE(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],i=e[a];if(BL(s)&&BL(i)){if(!vE(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function BL(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function ay(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function sy(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function ohe(t,e){const r=new lhe(t,e);return r.subscribe.bind(r)}class lhe{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");che(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=P5),a.error===void 0&&(a.error=P5),a.complete===void 0&&(a.complete=P5);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function che(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function P5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){return t&&t._delegate?t._delegate:t}class bp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uhe=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new zAe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fhe(e))try{this.getOrInitializeService({instanceIdentifier:Sm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Sm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sm){return this.instances.has(e)}getOptions(e=Sm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&i.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const i=this.instances.get(a);return i&&e(i,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:dhe(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Sm){return this.component?this.component.multipleInstances?e:Sm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dhe(t){return t===Sm?void 0:t}function fhe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ahe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new uhe(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rn||(Rn={}));const hhe={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},mhe=Rn.INFO,phe={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},ghe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=phe[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let xO=class{constructor(e){this.name=e,this._logLevel=mhe,this._logHandler=ghe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hhe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}};const xhe=(t,e)=>e.some(r=>t instanceof r);let PL,TL;function vhe(){return PL||(PL=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yhe(){return TL||(TL=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gX=new WeakMap,OP=new WeakMap,xX=new WeakMap,T5=new WeakMap,vO=new WeakMap;function bhe(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(N0(t.result)),a()},i=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&gX.set(r,t)}).catch(()=>{}),vO.set(e,t),e}function whe(t){if(OP.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});OP.set(t,e)}let DP={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return OP.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xX.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return N0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Nhe(t){DP=t(DP)}function Che(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(k5(this),e,...r);return xX.set(n,e.sort?e.sort():[e]),N0(n)}:yhe().includes(t)?function(...e){return t.apply(k5(this),e),N0(gX.get(this))}:function(...e){return N0(t.apply(k5(this),e))}}function _he(t){return typeof t=="function"?Che(t):(t instanceof IDBTransaction&&whe(t),xhe(t,vhe())?new Proxy(t,DP):t)}function N0(t){if(t instanceof IDBRequest)return bhe(t);if(T5.has(t))return T5.get(t);const e=_he(t);return e!==t&&(T5.set(t,e),vO.set(e,t)),e}const k5=t=>vO.get(t);function Ehe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(t,e),l=N0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(N0(i.result),c.oldVersion,c.newVersion,N0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const She=["get","getKey","getAll","getAllKeys","count"],Ihe=["put","add","delete","clear"],F5=new Map;function kL(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(F5.get(e))return F5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=Ihe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||She.includes(r)))return;const s=async function(i,...l){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return F5.set(e,s),s}Nhe(t=>({...t,get:(e,r,n)=>kL(e,r)||t.get(e,r,n),has:(e,r)=>!!kL(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jhe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Bhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Bhe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const RP="@firebase/app",FL="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new xO("@firebase/app"),Phe="@firebase/app-compat",The="@firebase/analytics-compat",khe="@firebase/analytics",Fhe="@firebase/app-check-compat",Ohe="@firebase/app-check",Dhe="@firebase/auth",Rhe="@firebase/auth-compat",Mhe="@firebase/database",Lhe="@firebase/data-connect",Uhe="@firebase/database-compat",Qhe="@firebase/functions",Vhe="@firebase/functions-compat",Hhe="@firebase/installations",$he="@firebase/installations-compat",Khe="@firebase/messaging",Ghe="@firebase/messaging-compat",qhe="@firebase/performance",zhe="@firebase/performance-compat",Whe="@firebase/remote-config",Xhe="@firebase/remote-config-compat",Yhe="@firebase/storage",Jhe="@firebase/storage-compat",Zhe="@firebase/firestore",e0e="@firebase/vertexai-preview",t0e="@firebase/firestore-compat",r0e="firebase",n0e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="[DEFAULT]",a0e={[RP]:"fire-core",[Phe]:"fire-core-compat",[khe]:"fire-analytics",[The]:"fire-analytics-compat",[Ohe]:"fire-app-check",[Fhe]:"fire-app-check-compat",[Dhe]:"fire-auth",[Rhe]:"fire-auth-compat",[Mhe]:"fire-rtdb",[Lhe]:"fire-data-connect",[Uhe]:"fire-rtdb-compat",[Qhe]:"fire-fn",[Vhe]:"fire-fn-compat",[Hhe]:"fire-iid",[$he]:"fire-iid-compat",[Khe]:"fire-fcm",[Ghe]:"fire-fcm-compat",[qhe]:"fire-perf",[zhe]:"fire-perf-compat",[Whe]:"fire-rc",[Xhe]:"fire-rc-compat",[Yhe]:"fire-gcs",[Jhe]:"fire-gcs-compat",[Zhe]:"fire-fst",[t0e]:"fire-fst-compat",[e0e]:"fire-vertex","fire-js":"fire-js",[r0e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map,LP=new Map,UP=new Map;function OL(t,e){try{t.container.addComponent(e)}catch(r){OA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Jx(t){const e=t.name;if(UP.has(e))return OA.debug(`There were multiple attempts to register component ${e}.`),!1;UP.set(e,t);for(const r of Yx.values())OL(r,t);for(const r of LP.values())OL(r,t);return!0}function yO(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function hf(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},C0=new L2("app","Firebase",s0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0e{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw C0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=n0e;function bO(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:MP,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw C0.create("bad-app-name",{appName:String(a)});if(r||(r=AX()),!r)throw C0.create("no-options");const s=Yx.get(a);if(s){if(vE(r,s.options)&&vE(n,s.config))return s;throw C0.create("duplicate-app",{appName:a})}const i=new Ahe(a);for(const c of UP.values())i.addComponent(c);const l=new i0e(r,n,i);return Yx.set(a,l),l}function wO(t=MP){const e=Yx.get(t);if(!e&&t===MP&&AX())return bO();if(!e)throw C0.create("no-app",{appName:t});return e}async function o0e(t){let e=!1;const r=t.name;Yx.has(r)?(e=!0,Yx.delete(r)):LP.has(r)&&t.decRefCount()<=0&&(LP.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function _0(t,e,r){var n;let a=(n=a0e[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),OA.warn(l.join(" "));return}Jx(new bp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0e="firebase-heartbeat-database",c0e=1,jb="firebase-heartbeat-store";let O5=null;function vX(){return O5||(O5=Ehe(l0e,c0e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jb)}catch(r){console.warn(r)}}}}).catch(t=>{throw C0.create("idb-open",{originalErrorMessage:t.message})})),O5}async function u0e(t){try{const r=(await vX()).transaction(jb),n=await r.objectStore(jb).get(yX(t));return await r.done,n}catch(e){if(e instanceof XA)OA.warn(e.message);else{const r=C0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});OA.warn(r.message)}}}async function DL(t,e){try{const n=(await vX()).transaction(jb,"readwrite");await n.objectStore(jb).put(e,yX(t)),await n.done}catch(r){if(r instanceof XA)OA.warn(r.message);else{const n=C0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});OA.warn(n.message)}}}function yX(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0e=1024,f0e=30*24*60*60*1e3;class A0e{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new m0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=RL();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=f0e}),this._storage.overwrite(this._heartbeatsCache))}catch(n){OA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=RL(),{heartbeatsToSend:n,unsentEntries:a}=h0e(this._heartbeatsCache.heartbeats),s=xE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return OA.warn(r),""}}}function RL(){return new Date().toISOString().substring(0,10)}function h0e(t,e=d0e){const r=[];let n=t.slice();for(const a of t){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),ML(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),ML(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class m0e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pX()?rhe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await u0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return DL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return DL(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function ML(t){return xE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0e(t){Jx(new bp("platform-logger",e=>new jhe(e),"PRIVATE")),Jx(new bp("heartbeat",e=>new A0e(e),"PRIVATE")),_0(RP,FL,t),_0(RP,FL,"esm2017"),_0("fire-js","")}p0e("");function NO(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function bX(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g0e=bX,wX=new L2("auth","Firebase",bX());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=new xO("@firebase/auth");function x0e(t,...e){yE.logLevel<=Rn.WARN&&yE.warn(`Auth (${Sv}): ${t}`,...e)}function v_(t,...e){yE.logLevel<=Rn.ERROR&&yE.error(`Auth (${Sv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t,...e){throw CO(t,...e)}function Nf(t,...e){return CO(t,...e)}function NX(t,e,r){const n=Object.assign(Object.assign({},g0e()),{[e]:r});return new L2("auth","Firebase",n).create(e,{appName:t.name})}function bA(t){return NX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CO(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return wX.create(t,...e)}function un(t,e,...r){if(!t)throw CO(e,...r)}function fA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw v_(e),new Error(e)}function DA(t,e){t||fA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function v0e(){return LL()==="http:"||LL()==="https:"}function LL(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v0e()||ZAe()||"connection"in navigator)?navigator.onLine:!0}function b0e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,r){this.shortDelay=e,this.longDelay=r,DA(r>e,"Short delay should be less than long delay!"),this.isMobile=XAe()||ehe()}get(){return y0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t,e){DA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0e=new Q2(3e4,6e4);function YA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function JA(t,e,r,n,a={}){return _X(t,a,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const l=U2(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return JAe()||(u.referrerPolicy="no-referrer"),CX.fetch()(EX(t,t.config.apiHost,r,l),u)})}async function _X(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},w0e),e);try{const a=new _0e(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw yN(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const l=s.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yN(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw yN(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw yN(t,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw NX(t,d,u);Fd(t,d)}}catch(a){if(a instanceof XA)throw a;Fd(t,"network-request-failed",{message:String(a)})}}async function V2(t,e,r,n,a={}){const s=await JA(t,e,r,n,a);return"mfaPendingCredential"in s&&Fd(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EX(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?_O(t.config,a):`${t.config.apiScheme}://${a}`}function C0e(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _0e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Nf(this.auth,"network-request-failed")),N0e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Nf(t,e,n);return a.customData._tokenResponse=r,a}function UL(t){return t!==void 0&&t.enterprise!==void 0}class E0e{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return C0e(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function S0e(t,e){return JA(t,"GET","/v2/recaptchaConfig",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0e(t,e){return JA(t,"POST","/v1/accounts:delete",e)}async function SX(t,e){return JA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j0e(t,e=!1){const r=Ts(t),n=await r.getIdToken(e),a=EO(n);un(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Oy(D5(a.auth_time)),issuedAtTime:Oy(D5(a.iat)),expirationTime:Oy(D5(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function D5(t){return Number(t)*1e3}function EO(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return v_("JWT malformed, contained fewer than 3 sections"),null;try{const a=dX(r);return a?JSON.parse(a):(v_("Failed to decode base64 JWT payload"),null)}catch(a){return v_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function QL(t){const e=EO(t);return un(e,"internal-error"),un(typeof e.exp<"u","internal-error"),un(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof XA&&B0e(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function B0e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oy(this.lastLoginAt),this.creationTime=Oy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Bb(t,SX(r,{idToken:n}));un(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?IX(s.providerUserInfo):[],l=k0e(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new VP(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function T0e(t){const e=Ts(t);await bE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k0e(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function IX(t){return t.map(e=>{var{providerId:r}=e,n=NO(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0e(t,e){const r=await _X(t,{},async()=>{const n=U2({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,i=EX(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",CX.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function O0e(t,e){return JA(t,"POST","/v2/accounts:revokeToken",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){un(e.idToken,"internal-error"),un(typeof e.idToken<"u","internal-error"),un(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){un(e.length!==0,"internal-error");const r=QL(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(un(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await F0e(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new kx;return n&&(un(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),a&&(un(typeof a=="string","internal-error",{appName:e}),i.accessToken=a),s&&(un(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kx,this.toJSON())}_performRefresh(){return fA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t,e){un(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class AA{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=NO(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new VP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Bb(this,this.stsTokenManager.getToken(this.auth,e));return un(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return j0e(this,e)}reload(){return T0e(this)}_assign(e){this!==e&&(un(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new AA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await bE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hf(this.auth.app))return Promise.reject(bA(this.auth));const e=await this.getIdToken();return await Bb(this,I0e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,i,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,h=(a=r.email)!==null&&a!==void 0?a:void 0,A=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=r.photoURL)!==null&&i!==void 0?i:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,g=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;un(b&&_,e,"internal-error");const E=kx.fromJSON(this.name,_);un(typeof b=="string",e,"internal-error"),jh(f,e.name),jh(h,e.name),un(typeof w=="boolean",e,"internal-error"),un(typeof j=="boolean",e,"internal-error"),jh(A,e.name),jh(m,e.name),jh(p,e.name),jh(g,e.name),jh(x,e.name),jh(y,e.name);const S=new AA({uid:b,auth:e,email:h,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:A,tenantId:p,stsTokenManager:E,createdAt:x,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map(O=>Object.assign({},O))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,r,n=!1){const a=new kx;a.updateFromServerResponse(r);const s=new AA({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await bE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];un(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?IX(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new kx;l.updateFromIdToken(n);const c=new AA({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new VP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=new Map;function hA(t){DA(t instanceof Function,"Expected a class definition");let e=VL.get(t);return e?(DA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VL.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}jX.type="NONE";const HL=jX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e,r){return`firebase:${t}:${e}:${r}`}class Fx{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=y_(this.userKey,a.apiKey,s),this.fullPersistenceKey=y_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?AA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Fx(hA(HL),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||hA(HL);const i=y_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(i);if(d){const f=AA._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Fx(s,e,n):(s=c[0],l&&await s._set(i,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new Fx(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OX(e))return"Blackberry";if(DX(e))return"Webos";if(PX(e))return"Safari";if((e.includes("chrome/")||TX(e))&&!e.includes("edge/"))return"Chrome";if(FX(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function BX(t=Hi()){return/firefox\//i.test(t)}function PX(t=Hi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TX(t=Hi()){return/crios\//i.test(t)}function kX(t=Hi()){return/iemobile/i.test(t)}function FX(t=Hi()){return/android/i.test(t)}function OX(t=Hi()){return/blackberry/i.test(t)}function DX(t=Hi()){return/webos/i.test(t)}function SO(t=Hi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D0e(t=Hi()){var e;return SO(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function R0e(){return the()&&document.documentMode===10}function RX(t=Hi()){return SO(t)||FX(t)||DX(t)||OX(t)||/windows phone/i.test(t)||kX(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(t,e=[]){let r;switch(t){case"Browser":r=$L(Hi());break;case"Worker":r=`${$L(Hi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Sv}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,l)=>{try{const c=e(s);i(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L0e(t,e={}){return JA(t,"GET","/v2/passwordPolicy",YA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0e=6;class Q0e{constructor(e){var r,n,a,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:U0e,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0e{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KL(this),this.idTokenSubscription=new KL(this),this.beforeStateQueue=new M0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wX,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=hA(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await Fx.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await SX(this,{idToken:e}),n=await AA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(hf(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(i){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b0e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hf(this.app))return Promise.reject(bA(this));const r=e?Ts(e):null;return r&&un(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&un(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hf(this.app)?Promise.reject(bA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hf(this.app)?Promise.reject(bA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L0e(this),r=new Q0e(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new L2("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await O0e(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&hA(e)||this._popupRedirectResolver;un(r,this,"argument-error"),this.redirectPersistenceManager=await Fx.create(this,[hA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(un(l,this,"internal-error"),l.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=e.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&x0e(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function em(t){return Ts(t)}class KL{constructor(e){this.auth=e,this.observer=null,this.addObserver=ohe(r=>this.observer=r)}get next(){return un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H0e(t){TI=t}function LX(t){return TI.loadJS(t)}function $0e(){return TI.recaptchaEnterpriseScript}function K0e(){return TI.gapiScript}function G0e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q0e="recaptcha-enterprise",z0e="NO_RECAPTCHA";class W0e{constructor(e){this.type=q0e,this.auth=em(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,l)=>{S0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new E0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,i,l){const c=window.grecaptcha;UL(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{i(u)}).catch(()=>{i(z0e)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(l=>{if(!r&&UL(window.grecaptcha))a(l,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=$0e();c.length!==0&&(c+=l),LX(c).then(()=>{a(l,s,i)}).catch(u=>{i(u)})}}).catch(l=>{i(l)})})}}async function GL(t,e,r,n=!1){const a=new W0e(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function wE(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await GL(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await GL(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0e(t,e){const r=yO(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(vE(s,e??{}))return a;Fd(a,"already-initialized")}return r.initialize({options:e})}function Y0e(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(hA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function J0e(t,e,r){const n=em(t);un(n._canInitEmulator,n,"emulator-config-failed"),un(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=UX(e),{host:i,port:l}=Z0e(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${i}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),eme()}function UX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z0e(t){const e=UX(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:qL(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:qL(i)}}}function qL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eme(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return fA("not implemented")}_getIdTokenResponse(e){return fA("not implemented")}_linkToIdToken(e,r){return fA("not implemented")}_getReauthenticationResolver(e){return fA("not implemented")}}async function tme(t,e){return JA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rme(t,e){return V2(t,"POST","/v1/accounts:signInWithPassword",YA(t,e))}async function nme(t,e){return JA(t,"POST","/v1/accounts:sendOobCode",YA(t,e))}async function ame(t,e){return nme(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sme(t,e){return V2(t,"POST","/v1/accounts:signInWithEmailLink",YA(t,e))}async function ime(t,e){return V2(t,"POST","/v1/accounts:signInWithEmailLink",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb extends IO{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new Pb(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Pb(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wE(e,r,"signInWithPassword",rme);case"emailLink":return sme(e,{email:this._email,oobCode:this._password});default:Fd(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wE(e,n,"signUpPassword",tme);case"emailLink":return ime(e,{idToken:r,email:this._email,oobCode:this._password});default:Fd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e){return V2(t,"POST","/v1/accounts:signInWithIdp",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ome="http://localhost";class wp extends IO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new wp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Fd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=NO(r,["providerId","signInMethod"]);if(!n||!a)return null;const i=new wp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Ox(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ox(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ox(e,r)}buildRequest(){const e={requestUri:ome,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=U2(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cme(t){const e=ay(sy(t)).link,r=e?ay(sy(e)).deep_link_id:null,n=ay(sy(t)).deep_link_id;return(n?ay(sy(n)).link:null)||n||r||e||t}class jO{constructor(e){var r,n,a,s,i,l;const c=ay(sy(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=lme((a=c.mode)!==null&&a!==void 0?a:null);un(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=c.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=cme(e);try{return new jO(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(){this.providerId=Iv.PROVIDER_ID}static credential(e,r){return Pb._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=jO.parseLink(r);return un(n,"argument-error"),Pb._fromEmailAndCode(e,n.code,n.tenantId)}}Iv.PROVIDER_ID="password";Iv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Iv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2 extends QX{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends H2{constructor(){super("facebook.com")}static credential(e){return wp._fromParams({providerId:Yh.PROVIDER_ID,signInMethod:Yh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yh.credentialFromTaggedObject(e)}static credentialFromError(e){return Yh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yh.credential(e.oauthAccessToken)}catch{return null}}}Yh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh extends H2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return wp._fromParams({providerId:Jh.PROVIDER_ID,signInMethod:Jh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Jh.credentialFromTaggedObject(e)}static credentialFromError(e){return Jh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Jh.credential(r,n)}catch{return null}}}Jh.GOOGLE_SIGN_IN_METHOD="google.com";Jh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends H2{constructor(){super("github.com")}static credential(e){return wp._fromParams({providerId:Zh.PROVIDER_ID,signInMethod:Zh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zh.credentialFromTaggedObject(e)}static credentialFromError(e){return Zh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zh.credential(e.oauthAccessToken)}catch{return null}}}Zh.GITHUB_SIGN_IN_METHOD="github.com";Zh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends H2{constructor(){super("twitter.com")}static credential(e,r){return wp._fromParams({providerId:e0.PROVIDER_ID,signInMethod:e0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return e0.credentialFromTaggedObject(e)}static credentialFromError(e){return e0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return e0.credential(r,n)}catch{return null}}}e0.TWITTER_SIGN_IN_METHOD="twitter.com";e0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ume(t,e){return V2(t,"POST","/v1/accounts:signUp",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await AA._fromIdTokenResponse(e,n,a),i=zL(n);return new Np({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=zL(n);return new Np({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function zL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE extends XA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,NE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new NE(e,r,n,a)}}function VX(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?NE._fromErrorAndOperation(t,s,e,n):s})}async function dme(t,e,r=!1){const n=await Bb(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Np._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fme(t,e,r=!1){const{auth:n}=t;if(hf(n.app))return Promise.reject(bA(n));const a="reauthenticate";try{const s=await Bb(t,VX(n,a,e,t),r);un(s.idToken,n,"internal-error");const i=EO(s.idToken);un(i,n,"internal-error");const{sub:l}=i;return un(t.uid===l,n,"user-mismatch"),Np._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HX(t,e,r=!1){if(hf(t.app))return Promise.reject(bA(t));const n="signIn",a=await VX(t,n,e),s=await Np._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function Ame(t,e){return HX(em(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $X(t){const e=em(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hme(t,e,r){const n=em(t);await wE(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ame)}async function mme(t,e,r){if(hf(t.app))return Promise.reject(bA(t));const n=em(t),i=await wE(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ume).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&$X(t),c}),l=await Np._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(l.user),l}function pme(t,e,r){return hf(t.app)?Promise.reject(bA(t)):Ame(Ts(t),Iv.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&$X(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KX(t,e){return Ts(t).setPersistence(e)}function gme(t,e,r,n){return Ts(t).onIdTokenChanged(e,r,n)}function xme(t,e,r){return Ts(t).beforeAuthStateChanged(e,r)}function BO(t,e,r,n){return Ts(t).onAuthStateChanged(e,r,n)}function PO(t){return Ts(t).signOut()}const CE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(CE,"1"),this.storage.removeItem(CE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme=1e3,yme=10;class qX extends GX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);R0e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,yme):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},vme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}qX.type="LOCAL";const TO=qX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX extends GX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}zX.type="SESSION";const WX=zX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new kI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(i).map(async u=>u(r.origin,s)),c=await bme(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kI.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((l,c)=>{const u=kO("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){return window}function Nme(t){Cf().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XX(){return typeof Cf().WorkerGlobalScope<"u"&&typeof Cf().importScripts=="function"}async function Cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _me(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Eme(){return XX()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX="firebaseLocalStorageDb",Sme=1,_E="firebaseLocalStorage",JX="fbase_key";class $2{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function FI(t,e){return t.transaction([_E],e?"readwrite":"readonly").objectStore(_E)}function Ime(){const t=indexedDB.deleteDatabase(YX);return new $2(t).toPromise()}function HP(){const t=indexedDB.open(YX,Sme);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(_E,{keyPath:JX})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(_E)?e(n):(n.close(),await Ime(),e(await HP()))})})}async function WL(t,e,r){const n=FI(t,!0).put({[JX]:e,value:r});return new $2(n).toPromise()}async function jme(t,e){const r=FI(t,!1).get(e),n=await new $2(r).toPromise();return n===void 0?null:n.value}function XL(t,e){const r=FI(t,!0).delete(e);return new $2(r).toPromise()}const Bme=800,Pme=3;class ZX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await HP(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Pme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XX()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kI._getInstance(Eme()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Cme(),!this.activeServiceWorker)return;this.sender=new wme(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_me()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await HP();return await WL(e,CE,"1"),await XL(e,CE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>WL(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>jme(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>XL(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=FI(a,!1).getAll();return new $2(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZX.type="LOCAL";const Tme=ZX;new Q2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kme(t,e){return e?hA(e):(un(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO extends IO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ox(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ox(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ox(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Fme(t){return HX(t.auth,new FO(t),t.bypassAuthState)}function Ome(t){const{auth:e,user:r}=t;return un(r,e,"internal-error"),fme(r,new FO(t),t.bypassAuthState)}async function Dme(t){const{auth:e,user:r}=t;return un(r,e,"internal-error"),dme(r,new FO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fme;case"linkViaPopup":case"linkViaRedirect":return Dme;case"reauthViaPopup":case"reauthViaRedirect":return Ome;default:Fd(this.auth,"internal-error")}}resolve(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme=new Q2(2e3,1e4);class xx extends eY{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,xx.currentPopupAction&&xx.currentPopupAction.cancel(),xx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return un(e,this.auth,"internal-error"),e}async onExecution(){DA(this.filter.length===1,"Popup operations only handle one event");const e=kO();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Nf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rme.get())};e()}}xx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme="pendingRedirect",b_=new Map;class Lme extends eY{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=b_.get(this.auth._key());if(!e){try{const n=await Ume(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}b_.set(this.auth._key(),e)}return this.bypassAuthState||b_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ume(t,e){const r=Hme(e),n=Vme(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Qme(t,e){b_.set(t._key(),e)}function Vme(t){return hA(t._redirectPersistence)}function Hme(t){return y_(Mme,t.config.apiKey,t.name)}async function $me(t,e,r=!1){if(hf(t.app))return Promise.reject(bA(t));const n=em(t),a=kme(n,e),i=await new Lme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kme=10*60*1e3;class Gme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qme(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!tY(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Nf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Kme&&this.cachedEventUids.clear(),this.cachedEventUids.has(YL(e))}saveEventToCache(e){this.cachedEventUids.add(YL(e)),this.lastProcessedEventTime=Date.now()}}function YL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tY({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qme(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tY(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zme(t,e={}){return JA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xme=/^https?/;async function Yme(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zme(t);for(const r of e)try{if(Jme(r))return}catch{}Fd(t,"unauthorized-domain")}function Jme(t){const e=QP(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Xme.test(r))return!1;if(Wme.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme=new Q2(3e4,6e4);function JL(){const t=Cf().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function epe(t){return new Promise((e,r)=>{var n,a,s;function i(){JL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JL(),r(Nf(t,"network-request-failed"))},timeout:Zme.get()})}if(!((a=(n=Cf().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=Cf().gapi)===null||s===void 0)&&s.load)i();else{const l=G0e("iframefcb");return Cf()[l]=()=>{gapi.load?i():r(Nf(t,"network-request-failed"))},LX(`${K0e()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw w_=null,e})}let w_=null;function tpe(t){return w_=w_||epe(t),w_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=new Q2(5e3,15e3),npe="__/auth/iframe",ape="emulator/auth/iframe",spe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ipe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ope(t){const e=t.config;un(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?_O(e,ape):`https://${t.config.authDomain}/${npe}`,n={apiKey:e.apiKey,appName:t.name,v:Sv},a=ipe.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${U2(n).slice(1)}`}async function lpe(t){const e=await tpe(t),r=Cf().gapi;return un(r,t,"internal-error"),e.open({where:document.body,url:ope(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:spe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=Nf(t,"network-request-failed"),l=Cf().setTimeout(()=>{s(i)},rpe.get());function c(){Cf().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},upe=500,dpe=600,fpe="_blank",Ape="http://localhost";class ZL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hpe(t,e,r,n=upe,a=dpe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},cpe),{width:n.toString(),height:a.toString(),top:s,left:i}),u=Hi().toLowerCase();r&&(l=TX(u)?fpe:r),BX(u)&&(e=e||Ape,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[A,m])=>`${h}${A}=${m},`,"");if(D0e(u)&&l!=="_self")return mpe(e||"",l),new ZL(null);const f=window.open(e||"",l,d);un(f,t,"popup-blocked");try{f.focus()}catch{}return new ZL(f)}function mpe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe="__/auth/handler",gpe="emulator/auth/handler",xpe=encodeURIComponent("fac");async function eU(t,e,r,n,a,s){un(t.config.authDomain,t,"auth-domain-config-required"),un(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Sv,eventId:a};if(e instanceof QX){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",ihe(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(e instanceof H2){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${xpe}=${encodeURIComponent(c)}`:"";return`${vpe(t)}?${U2(l).slice(1)}${u}`}function vpe({config:t}){return t.emulator?_O(t,gpe):`https://${t.authDomain}/${ppe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R5="webStorageSupport";class ype{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WX,this._completeRedirectFn=$me,this._overrideRedirectResult=Qme}async _openPopup(e,r,n,a){var s;DA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await eU(e,r,n,QP(),a);return hpe(e,i,kO())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await eU(e,r,n,QP(),a);return Nme(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(DA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await lpe(e),n=new Gme(e);return r.register("authEvent",a=>(un(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(R5,{type:R5},a=>{var s;const i=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[R5];i!==void 0&&r(!!i),Fd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Yme(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return RX()||PX()||SO()}}const bpe=ype;var tU="@firebase/auth",rU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cpe(t){Jx(new bp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;un(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MX(t)},u=new V0e(n,a,s,c);return Y0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Jx(new bp("auth-internal",e=>{const r=em(e.getProvider("auth").getImmediate());return(n=>new wpe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),_0(tU,rU,Npe(t)),_0(tU,rU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=5*60,Epe=hX("authIdTokenMaxAge")||_pe;let nU=null;const Spe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Epe)return;const a=r==null?void 0:r.token;nU!==a&&(nU=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $P(t=wO()){const e=yO(t,"auth");if(e.isInitialized())return e.getImmediate();const r=X0e(t,{popupRedirectResolver:bpe,persistence:[Tme,TO,WX]}),n=hX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=Spe(s.toString());xme(r,i,()=>i(r.currentUser)),gme(r,l=>i(l))}}const a=fX("auth");return a&&J0e(r,`http://${a}`),r}function Ipe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}H0e({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Nf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Ipe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cpe("Browser");var jpe="firebase",Bpe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_0(jpe,Bpe,"app");var aU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ep,rY;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,E){function S(){}S.prototype=E.prototype,_.D=E.prototype,_.prototype=new S,_.prototype.constructor=_,_.C=function(O,P,T){for(var F=Array(arguments.length-2),J=2;J<arguments.length;J++)F[J-2]=arguments[J];return E.prototype[P].apply(O,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,E,S){S||(S=0);var O=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)O[P]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(P=0;16>P;++P)O[P]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=_.g[0],S=_.g[1],P=_.g[2];var T=_.g[3],F=E+(T^S&(P^T))+O[0]+3614090360&4294967295;E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+O[1]+3905402710&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+O[2]+606105819&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+O[3]+3250441966&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+O[4]+4118548399&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+O[5]+1200080426&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+O[6]+2821735955&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+O[7]+4249261313&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+O[8]+1770035416&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+O[9]+2336552879&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+O[10]+4294925233&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+O[11]+2304563134&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(T^S&(P^T))+O[12]+1804603682&4294967295,E=S+(F<<7&4294967295|F>>>25),F=T+(P^E&(S^P))+O[13]+4254626195&4294967295,T=E+(F<<12&4294967295|F>>>20),F=P+(S^T&(E^S))+O[14]+2792965006&4294967295,P=T+(F<<17&4294967295|F>>>15),F=S+(E^P&(T^E))+O[15]+1236535329&4294967295,S=P+(F<<22&4294967295|F>>>10),F=E+(P^T&(S^P))+O[1]+4129170786&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+O[6]+3225465664&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+O[11]+643717713&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+O[0]+3921069994&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+O[5]+3593408605&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+O[10]+38016083&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+O[15]+3634488961&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+O[4]+3889429448&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+O[9]+568446438&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+O[14]+3275163606&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+O[3]+4107603335&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+O[8]+1163531501&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(P^T&(S^P))+O[13]+2850285829&4294967295,E=S+(F<<5&4294967295|F>>>27),F=T+(S^P&(E^S))+O[2]+4243563512&4294967295,T=E+(F<<9&4294967295|F>>>23),F=P+(E^S&(T^E))+O[7]+1735328473&4294967295,P=T+(F<<14&4294967295|F>>>18),F=S+(T^E&(P^T))+O[12]+2368359562&4294967295,S=P+(F<<20&4294967295|F>>>12),F=E+(S^P^T)+O[5]+4294588738&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+O[8]+2272392833&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+O[11]+1839030562&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+O[14]+4259657740&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+O[1]+2763975236&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+O[4]+1272893353&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+O[7]+4139469664&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+O[10]+3200236656&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+O[13]+681279174&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+O[0]+3936430074&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+O[3]+3572445317&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+O[6]+76029189&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(S^P^T)+O[9]+3654602809&4294967295,E=S+(F<<4&4294967295|F>>>28),F=T+(E^S^P)+O[12]+3873151461&4294967295,T=E+(F<<11&4294967295|F>>>21),F=P+(T^E^S)+O[15]+530742520&4294967295,P=T+(F<<16&4294967295|F>>>16),F=S+(P^T^E)+O[2]+3299628645&4294967295,S=P+(F<<23&4294967295|F>>>9),F=E+(P^(S|~T))+O[0]+4096336452&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+O[7]+1126891415&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+O[14]+2878612391&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+O[5]+4237533241&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+O[12]+1700485571&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+O[3]+2399980690&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+O[10]+4293915773&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+O[1]+2240044497&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+O[8]+1873313359&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+O[15]+4264355552&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+O[6]+2734768916&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+O[13]+1309151649&4294967295,S=P+(F<<21&4294967295|F>>>11),F=E+(P^(S|~T))+O[4]+4149444226&4294967295,E=S+(F<<6&4294967295|F>>>26),F=T+(S^(E|~P))+O[11]+3174756917&4294967295,T=E+(F<<10&4294967295|F>>>22),F=P+(E^(T|~S))+O[2]+718787259&4294967295,P=T+(F<<15&4294967295|F>>>17),F=S+(T^(P|~E))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+E&4294967295,_.g[1]=_.g[1]+(P+(F<<21&4294967295|F>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+T&4294967295}n.prototype.u=function(_,E){E===void 0&&(E=_.length);for(var S=E-this.blockSize,O=this.B,P=this.h,T=0;T<E;){if(P==0)for(;T<=S;)a(this,_,T),T+=this.blockSize;if(typeof _=="string"){for(;T<E;)if(O[P++]=_.charCodeAt(T++),P==this.blockSize){a(this,O),P=0;break}}else for(;T<E;)if(O[P++]=_[T++],P==this.blockSize){a(this,O),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var E=1;E<_.length-8;++E)_[E]=0;var S=8*this.o;for(E=_.length-8;E<_.length;++E)_[E]=S&255,S/=256;for(this.u(_),_=Array(16),E=S=0;4>E;++E)for(var O=0;32>O;O+=8)_[S++]=this.g[E]>>>O&255;return _};function s(_,E){var S=l;return Object.prototype.hasOwnProperty.call(S,_)?S[_]:S[_]=E(_)}function i(_,E){this.h=E;for(var S=[],O=!0,P=_.length-1;0<=P;P--){var T=_[P]|0;O&&T==E||(S[P]=T,O=!1)}this.g=S}var l={};function c(_){return-128<=_&&128>_?s(_,function(E){return new i([E|0],0>E?-1:0)}):new i([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return g(u(-_));for(var E=[],S=1,O=0;_>=S;O++)E[O]=_/S|0,S*=4294967296;return new i(E,0)}function d(_,E){if(_.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_.charAt(0)=="-")return g(d(_.substring(1),E));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),O=f,P=0;P<_.length;P+=8){var T=Math.min(8,_.length-P),F=parseInt(_.substring(P,P+T),E);8>T?(T=u(Math.pow(E,T)),O=O.j(T).add(u(F))):(O=O.j(S),O=O.add(u(F)))}return O}var f=c(0),h=c(1),A=c(16777216);t=i.prototype,t.m=function(){if(p(this))return-g(this).m();for(var _=0,E=1,S=0;S<this.g.length;S++){var O=this.i(S);_+=(0<=O?O:4294967296+O)*E,E*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+g(this).toString(_);for(var E=u(Math.pow(_,6)),S=this,O="";;){var P=w(S,E).g;S=x(S,P.j(E));var T=((0<S.g.length?S.g[0]:S.h)>>>0).toString(_);if(S=P,m(S))return T+O;for(;6>T.length;)T="0"+T;O=T+O}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var E=0;E<_.g.length;E++)if(_.g[E]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=x(this,_),p(_)?-1:m(_)?0:1};function g(_){for(var E=_.g.length,S=[],O=0;O<E;O++)S[O]=~_.g[O];return new i(S,~_.h).add(h)}t.abs=function(){return p(this)?g(this):this},t.add=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],O=0,P=0;P<=E;P++){var T=O+(this.i(P)&65535)+(_.i(P)&65535),F=(T>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);O=F>>>16,T&=65535,F&=65535,S[P]=F<<16|T}return new i(S,S[S.length-1]&-2147483648?-1:0)};function x(_,E){return _.add(g(E))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?g(this).j(g(_)):g(g(this).j(_));if(p(_))return g(this.j(g(_)));if(0>this.l(A)&&0>_.l(A))return u(this.m()*_.m());for(var E=this.g.length+_.g.length,S=[],O=0;O<2*E;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<_.g.length;P++){var T=this.i(O)>>>16,F=this.i(O)&65535,J=_.i(P)>>>16,ge=_.i(P)&65535;S[2*O+2*P]+=F*ge,y(S,2*O+2*P),S[2*O+2*P+1]+=T*ge,y(S,2*O+2*P+1),S[2*O+2*P+1]+=F*J,y(S,2*O+2*P+1),S[2*O+2*P+2]+=T*J,y(S,2*O+2*P+2)}for(O=0;O<E;O++)S[O]=S[2*O+1]<<16|S[2*O];for(O=E;O<2*E;O++)S[O]=0;return new i(S,0)};function y(_,E){for(;(_[E]&65535)!=_[E];)_[E+1]+=_[E]>>>16,_[E]&=65535,E++}function b(_,E){this.g=_,this.h=E}function w(_,E){if(m(E))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return E=w(g(_),E),new b(g(E.g),g(E.h));if(p(E))return E=w(_,g(E)),new b(g(E.g),E.h);if(30<_.g.length){if(p(_)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var S=h,O=E;0>=O.l(_);)S=j(S),O=j(O);var P=I(S,1),T=I(O,1);for(O=I(O,2),S=I(S,2);!m(O);){var F=T.add(O);0>=F.l(_)&&(P=P.add(S),T=F),O=I(O,1),S=I(S,1)}return E=x(_,P.j(E)),new b(P,E)}for(P=f;0<=_.l(E);){for(S=Math.max(1,Math.floor(_.m()/E.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),T=u(S),F=T.j(E);p(F)||0<F.l(_);)S-=O,T=u(S),F=T.j(E);m(T)&&(T=h),P=P.add(T),_=x(_,F)}return new b(P,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)&_.i(O);return new i(S,this.h&_.h)},t.or=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)|_.i(O);return new i(S,this.h|_.h)},t.xor=function(_){for(var E=Math.max(this.g.length,_.g.length),S=[],O=0;O<E;O++)S[O]=this.i(O)^_.i(O);return new i(S,this.h^_.h)};function j(_){for(var E=_.g.length+1,S=[],O=0;O<E;O++)S[O]=_.i(O)<<1|_.i(O-1)>>>31;return new i(S,_.h)}function I(_,E){var S=E>>5;E%=32;for(var O=_.g.length-S,P=[],T=0;T<O;T++)P[T]=0<E?_.i(T+S)>>>E|_.i(T+S+1)<<32-E:_.i(T+S);return new i(P,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,rY=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,ep=i}).apply(typeof aU<"u"?aU:typeof self<"u"?self:typeof window<"u"?window:{});var bN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nY,iy,aY,N_,KP,sY,iY,oY;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,Y,ue){return C==Array.prototype||C==Object.prototype||(C[Y]=ue.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof bN=="object"&&bN];for(var Y=0;Y<C.length;++Y){var ue=C[Y];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var n=r(this);function a(C,Y){if(Y)e:{var ue=n;C=C.split(".");for(var Ue=0;Ue<C.length-1;Ue++){var jt=C[Ue];if(!(jt in ue))break e;ue=ue[jt]}C=C[C.length-1],Ue=ue[C],Y=Y(Ue),Y!=Ue&&Y!=null&&e(ue,C,{configurable:!0,writable:!0,value:Y})}}function s(C,Y){C instanceof String&&(C+="");var ue=0,Ue=!1,jt={next:function(){if(!Ue&&ue<C.length){var Qt=ue++;return{value:Y(Qt,C[Qt]),done:!1}}return Ue=!0,{done:!0,value:void 0}}};return jt[Symbol.iterator]=function(){return jt},jt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(Y,ue){return ue})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function c(C){var Y=typeof C;return Y=Y!="object"?Y:C?Array.isArray(C)?"array":Y:"null",Y=="array"||Y=="object"&&typeof C.length=="number"}function u(C){var Y=typeof C;return Y=="object"&&C!=null||Y=="function"}function d(C,Y,ue){return C.call.apply(C.bind,arguments)}function f(C,Y,ue){if(!C)throw Error();if(2<arguments.length){var Ue=Array.prototype.slice.call(arguments,2);return function(){var jt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(jt,Ue),C.apply(Y,jt)}}return function(){return C.apply(Y,arguments)}}function h(C,Y,ue){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function A(C,Y){var ue=Array.prototype.slice.call(arguments,1);return function(){var Ue=ue.slice();return Ue.push.apply(Ue,arguments),C.apply(this,Ue)}}function m(C,Y){function ue(){}ue.prototype=Y.prototype,C.aa=Y.prototype,C.prototype=new ue,C.prototype.constructor=C,C.Qb=function(Ue,jt,Qt){for(var xr=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)xr[Ln-2]=arguments[Ln];return Y.prototype[jt].apply(Ue,xr)}}function p(C){const Y=C.length;if(0<Y){const ue=Array(Y);for(let Ue=0;Ue<Y;Ue++)ue[Ue]=C[Ue];return ue}return[]}function g(C,Y){for(let ue=1;ue<arguments.length;ue++){const Ue=arguments[ue];if(c(Ue)){const jt=C.length||0,Qt=Ue.length||0;C.length=jt+Qt;for(let xr=0;xr<Qt;xr++)C[jt+xr]=Ue[xr]}else C.push(Ue)}}class x{constructor(Y,ue){this.i=Y,this.j=ue,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,Y,ue){for(const Ue in C)Y.call(ue,C[Ue],Ue,C)}function _(C,Y){for(const ue in C)Y.call(void 0,C[ue],ue,C)}function E(C){const Y={};for(const ue in C)Y[ue]=C[ue];return Y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(C,Y){let ue,Ue;for(let jt=1;jt<arguments.length;jt++){Ue=arguments[jt];for(ue in Ue)C[ue]=Ue[ue];for(let Qt=0;Qt<S.length;Qt++)ue=S[Qt],Object.prototype.hasOwnProperty.call(Ue,ue)&&(C[ue]=Ue[ue])}}function P(C){var Y=1;C=C.split(":");const ue=[];for(;0<Y&&C.length;)ue.push(C.shift()),Y--;return C.length&&ue.push(C.join(":")),ue}function T(C){l.setTimeout(()=>{throw C},0)}function F(){var C=se;let Y=null;return C.g&&(Y=C.g,C.g=C.g.next,C.g||(C.h=null),Y.next=null),Y}class J{constructor(){this.h=this.g=null}add(Y,ue){const Ue=ge.get();Ue.set(Y,ue),this.h?this.h.next=Ue:this.g=Ue,this.h=Ue}}var ge=new x(()=>new le,C=>C.reset());class le{constructor(){this.next=this.g=this.h=null}set(Y,ue){this.h=Y,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ae=!1,se=new J,Ie=()=>{const C=l.Promise.resolve(void 0);de=()=>{C.then(Pe)}};var Pe=()=>{for(var C;C=F();){try{C.h.call(C.g)}catch(ue){T(ue)}var Y=ge;Y.j(C),100>Y.h&&(Y.h++,C.next=Y.g,Y.g=C)}Ae=!1};function k(){this.s=this.s,this.C=this.C}k.prototype.s=!1,k.prototype.ma=function(){this.s||(this.s=!0,this.N())},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(C,Y){this.type=C,this.g=this.target=Y,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,Y=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const ue=()=>{};l.addEventListener("test",ue,Y),l.removeEventListener("test",ue,Y)}catch{}return C}();function M(C,Y){if(H.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var ue=this.type=C.type,Ue=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=Y,Y=C.relatedTarget){if(j){e:{try{w(Y.nodeName);var jt=!0;break e}catch{}jt=!1}jt||(Y=null)}}else ue=="mouseover"?Y=C.fromElement:ue=="mouseout"&&(Y=C.toElement);this.relatedTarget=Y,Ue?(this.clientX=Ue.clientX!==void 0?Ue.clientX:Ue.pageX,this.clientY=Ue.clientY!==void 0?Ue.clientY:Ue.pageY,this.screenX=Ue.screenX||0,this.screenY=Ue.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:G[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&M.aa.h.call(this)}}m(M,H);var G={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),D=0;function Q(C,Y,ue,Ue,jt){this.listener=C,this.proxy=null,this.src=Y,this.type=ue,this.capture=!!Ue,this.ha=jt,this.key=++D,this.da=this.fa=!1}function te(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function me(C){this.src=C,this.g={},this.h=0}me.prototype.add=function(C,Y,ue,Ue,jt){var Qt=C.toString();C=this.g[Qt],C||(C=this.g[Qt]=[],this.h++);var xr=he(C,Y,Ue,jt);return-1<xr?(Y=C[xr],ue||(Y.fa=!1)):(Y=new Q(Y,this.src,Qt,!!Ue,jt),Y.fa=ue,C.push(Y)),Y};function L(C,Y){var ue=Y.type;if(ue in C.g){var Ue=C.g[ue],jt=Array.prototype.indexOf.call(Ue,Y,void 0),Qt;(Qt=0<=jt)&&Array.prototype.splice.call(Ue,jt,1),Qt&&(te(Y),C.g[ue].length==0&&(delete C.g[ue],C.h--))}}function he(C,Y,ue,Ue){for(var jt=0;jt<C.length;++jt){var Qt=C[jt];if(!Qt.da&&Qt.listener==Y&&Qt.capture==!!ue&&Qt.ha==Ue)return jt}return-1}var ne="closure_lm_"+(1e6*Math.random()|0),z={};function ce(C,Y,ue,Ue,jt){if(Array.isArray(Y)){for(var Qt=0;Qt<Y.length;Qt++)ce(C,Y[Qt],ue,Ue,jt);return null}return ue=ft(ue),C&&C[X]?C.K(Y,ue,u(Ue)?!!Ue.capture:!1,jt):K(C,Y,ue,!1,Ue,jt)}function K(C,Y,ue,Ue,jt,Qt){if(!Y)throw Error("Invalid event type");var xr=u(jt)?!!jt.capture:!!jt,Ln=Je(C);if(Ln||(C[ne]=Ln=new me(C)),ue=Ln.add(Y,ue,Ue,xr,Qt),ue.proxy)return ue;if(Ue=oe(),ue.proxy=Ue,Ue.src=C,Ue.listener=ue,C.addEventListener)R||(jt=xr),jt===void 0&&(jt=!1),C.addEventListener(Y.toString(),Ue,jt);else if(C.attachEvent)C.attachEvent(nt(Y.toString()),Ue);else if(C.addListener&&C.removeListener)C.addListener(Ue);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function oe(){function C(ue){return Y.call(C.src,C.listener,ue)}const Y=Me;return C}function xe(C,Y,ue,Ue,jt){if(Array.isArray(Y))for(var Qt=0;Qt<Y.length;Qt++)xe(C,Y[Qt],ue,Ue,jt);else Ue=u(Ue)?!!Ue.capture:!!Ue,ue=ft(ue),C&&C[X]?(C=C.i,Y=String(Y).toString(),Y in C.g&&(Qt=C.g[Y],ue=he(Qt,ue,Ue,jt),-1<ue&&(te(Qt[ue]),Array.prototype.splice.call(Qt,ue,1),Qt.length==0&&(delete C.g[Y],C.h--)))):C&&(C=Je(C))&&(Y=C.g[Y.toString()],C=-1,Y&&(C=he(Y,ue,Ue,jt)),(ue=-1<C?Y[C]:null)&&De(ue))}function De(C){if(typeof C!="number"&&C&&!C.da){var Y=C.src;if(Y&&Y[X])L(Y.i,C);else{var ue=C.type,Ue=C.proxy;Y.removeEventListener?Y.removeEventListener(ue,Ue,C.capture):Y.detachEvent?Y.detachEvent(nt(ue),Ue):Y.addListener&&Y.removeListener&&Y.removeListener(Ue),(ue=Je(Y))?(L(ue,C),ue.h==0&&(ue.src=null,Y[ne]=null)):te(C)}}}function nt(C){return C in z?z[C]:z[C]="on"+C}function Me(C,Y){if(C.da)C=!0;else{Y=new M(Y,this);var ue=C.listener,Ue=C.ha||C.src;C.fa&&De(C),C=ue.call(Ue,Y)}return C}function Je(C){return C=C[ne],C instanceof me?C:null}var lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ft(C){return typeof C=="function"?C:(C[lt]||(C[lt]=function(Y){return C.handleEvent(Y)}),C[lt])}function Ge(){k.call(this),this.i=new me(this),this.M=this,this.F=null}m(Ge,k),Ge.prototype[X]=!0,Ge.prototype.removeEventListener=function(C,Y,ue,Ue){xe(this,C,Y,ue,Ue)};function ye(C,Y){var ue,Ue=C.F;if(Ue)for(ue=[];Ue;Ue=Ue.F)ue.push(Ue);if(C=C.M,Ue=Y.type||Y,typeof Y=="string")Y=new H(Y,C);else if(Y instanceof H)Y.target=Y.target||C;else{var jt=Y;Y=new H(Ue,C),O(Y,jt)}if(jt=!0,ue)for(var Qt=ue.length-1;0<=Qt;Qt--){var xr=Y.g=ue[Qt];jt=We(xr,Ue,!0,Y)&&jt}if(xr=Y.g=C,jt=We(xr,Ue,!0,Y)&&jt,jt=We(xr,Ue,!1,Y)&&jt,ue)for(Qt=0;Qt<ue.length;Qt++)xr=Y.g=ue[Qt],jt=We(xr,Ue,!1,Y)&&jt}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var C=this.i,Y;for(Y in C.g){for(var ue=C.g[Y],Ue=0;Ue<ue.length;Ue++)te(ue[Ue]);delete C.g[Y],C.h--}}this.F=null},Ge.prototype.K=function(C,Y,ue,Ue){return this.i.add(String(C),Y,!1,ue,Ue)},Ge.prototype.L=function(C,Y,ue,Ue){return this.i.add(String(C),Y,!0,ue,Ue)};function We(C,Y,ue,Ue){if(Y=C.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var jt=!0,Qt=0;Qt<Y.length;++Qt){var xr=Y[Qt];if(xr&&!xr.da&&xr.capture==ue){var Ln=xr.listener,ws=xr.ha||xr.src;xr.fa&&L(C.i,xr),jt=Ln.call(ws,Ue)!==!1&&jt}}return jt&&!Ue.defaultPrevented}function qe(C,Y,ue){if(typeof C=="function")ue&&(C=h(C,ue));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:l.setTimeout(C,Y||0)}function je(C){C.g=qe(()=>{C.g=null,C.i&&(C.i=!1,je(C))},C.l);const Y=C.h;C.h=null,C.m.apply(null,Y)}class pe extends k{constructor(Y,ue){super(),this.m=Y,this.l=ue,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function He(C){k.call(this),this.h=C,this.g={}}m(He,k);var at=[];function yt(C){I(C.g,function(Y,ue){this.g.hasOwnProperty(ue)&&De(Y)},C),C.g={}}He.prototype.N=function(){He.aa.N.call(this),yt(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=l.JSON.stringify,kt=l.JSON.parse,Vt=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function ve(){}ve.prototype.h=null;function Qe(C){return C.h||(C.h=C.i())}function Z(){}var $e={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Le(){H.call(this,"d")}m(Le,H);function Ve(){H.call(this,"c")}m(Ve,H);var At={},pt=null;function Be(){return pt=pt||new Ge}At.La="serverreachability";function gt(C){H.call(this,At.La,C)}m(gt,H);function V(C){const Y=Be();ye(Y,new gt(Y))}At.STAT_EVENT="statevent";function ae(C,Y){H.call(this,At.STAT_EVENT,C),this.stat=Y}m(ae,H);function Se(C){const Y=Be();ye(Y,new ae(Y,C))}At.Ma="timingevent";function _e(C,Y){H.call(this,At.Ma,C),this.size=Y}m(_e,H);function Ee(C,Y){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},Y)}function ze(){this.g=!0}ze.prototype.xa=function(){this.g=!1};function ut(C,Y,ue,Ue,jt,Qt){C.info(function(){if(C.g)if(Qt)for(var xr="",Ln=Qt.split("&"),ws=0;ws<Ln.length;ws++){var jn=Ln[ws].split("=");if(1<jn.length){var Wn=jn[0];jn=jn[1];var Ra=Wn.split("_");xr=2<=Ra.length&&Ra[1]=="type"?xr+(Wn+"="+jn+"&"):xr+(Wn+"=redacted&")}}else xr=null;else xr=Qt;return"XMLHTTP REQ ("+Ue+") [attempt "+jt+"]: "+Y+`
`+ue+`
`+xr})}function st(C,Y,ue,Ue,jt,Qt,xr){C.info(function(){return"XMLHTTP RESP ("+Ue+") [ attempt "+jt+"]: "+Y+`
`+ue+`
`+Qt+" "+xr})}function ee(C,Y,ue,Ue){C.info(function(){return"XMLHTTP TEXT ("+Y+"): "+re(C,ue)+(Ue?" "+Ue:"")})}function W(C,Y){C.info(function(){return"TIMEOUT: "+Y})}ze.prototype.info=function(){};function re(C,Y){if(!C.g)return Y;if(!Y)return null;try{var ue=JSON.parse(Y);if(ue){for(C=0;C<ue.length;C++)if(Array.isArray(ue[C])){var Ue=ue[C];if(!(2>Ue.length)){var jt=Ue[1];if(Array.isArray(jt)&&!(1>jt.length)){var Qt=jt[0];if(Qt!="noop"&&Qt!="stop"&&Qt!="close")for(var xr=1;xr<jt.length;xr++)jt[xr]=""}}}}return bt(ue)}catch{return Y}}var fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},be;function Xe(){}m(Xe,ve),Xe.prototype.g=function(){return new XMLHttpRequest},Xe.prototype.i=function(){return{}},be=new Xe;function it(C,Y,ue,Ue){this.j=C,this.i=Y,this.l=ue,this.R=Ue||1,this.U=new He(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var _t={},Et={};function Gt(C,Y,ue){C.L=1,C.v=as(Rt(Y)),C.m=ue,C.P=!0,nr(C,null)}function nr(C,Y){C.F=Date.now(),cr(C),C.A=Rt(C.v);var ue=C.A,Ue=C.R;Array.isArray(Ue)||(Ue=[String(Ue)]),mg(ue.i,"t",Ue),C.C=0,ue=C.j.J,C.h=new xt,C.g=Os(C.j,ue?Y:null,!C.m),0<C.O&&(C.M=new pe(h(C.Y,C,C.g),C.O)),Y=C.U,ue=C.g,Ue=C.ca;var jt="readystatechange";Array.isArray(jt)||(jt&&(at[0]=jt.toString()),jt=at);for(var Qt=0;Qt<jt.length;Qt++){var xr=ce(ue,jt[Qt],Ue||Y.handleEvent,!1,Y.h||Y);if(!xr)break;Y.g[xr.key]=xr}Y=C.H?E(C.H):{},C.m?(C.u||(C.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,Y)):(C.u="GET",C.g.ea(C.A,C.u,null,Y)),V(),ut(C.i,C.u,C.A,C.l,C.R,C.m)}it.prototype.ca=function(C){C=C.target;const Y=this.M;Y&&Nl(C)==3?Y.j():this.Y(C)},it.prototype.Y=function(C){try{if(C==this.g)e:{const Ra=Nl(this.g);var Y=this.g.Ba();const bc=this.g.Z();if(!(3>Ra)&&(Ra!=3||this.g&&(this.h.h||this.g.oa()||um(this.g)))){this.J||Ra!=4||Y==7||(Y==8||0>=bc?V(3):V(2)),dn(this);var ue=this.g.Z();this.X=ue;t:if(ur(this)){var Ue=um(this.g);C="";var jt=Ue.length,Qt=Nl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),qr(this);var xr="";break t}this.h.i=new l.TextDecoder}for(Y=0;Y<jt;Y++)this.h.h=!0,C+=this.h.i.decode(Ue[Y],{stream:!(Qt&&Y==jt-1)});Ue.length=0,this.h.g+=C,this.C=0,xr=this.h.g}else xr=this.g.oa();if(this.o=ue==200,st(this.i,this.u,this.A,this.l,this.R,Ra,ue),this.o){if(this.T&&!this.K){t:{if(this.g){var Ln,ws=this.g;if((Ln=ws.g?ws.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ln)){var jn=Ln;break t}}jn=null}if(ue=jn)ee(this.i,this.l,ue,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qs(this,ue);else{this.o=!1,this.s=3,Se(12),ln(this),qr(this);break e}}if(this.P){ue=!0;let Wo;for(;!this.J&&this.C<xr.length;)if(Wo=rr(this,xr),Wo==Et){Ra==4&&(this.s=4,Se(14),ue=!1),ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Wo==_t){this.s=4,Se(15),ee(this.i,this.l,xr,"[Invalid Chunk]"),ue=!1;break}else ee(this.i,this.l,Wo,null),qs(this,Wo);if(ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ra!=4||xr.length!=0||this.h.h||(this.s=1,Se(16),ue=!1),this.o=this.o&&ue,!ue)ee(this.i,this.l,xr,"[Invalid Chunked Response]"),ln(this),qr(this);else if(0<xr.length&&!this.W){this.W=!0;var Wn=this.j;Wn.g==this&&Wn.ba&&!Wn.M&&(Wn.j.info("Great, no buffering proxy detected. Bytes received: "+xr.length),kr(Wn),Wn.M=!0,Se(11))}}else ee(this.i,this.l,xr,null),qs(this,xr);Ra==4&&ln(this),this.o&&!this.J&&(Ra==4?hn(this.j,this):(this.o=!1,cr(this)))}else gg(this.g),ue==400&&0<xr.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),ln(this),qr(this)}}}catch{}finally{}};function ur(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function rr(C,Y){var ue=C.C,Ue=Y.indexOf(`
`,ue);return Ue==-1?Et:(ue=Number(Y.substring(ue,Ue)),isNaN(ue)?_t:(Ue+=1,Ue+ue>Y.length?Et:(Y=Y.slice(Ue,Ue+ue),C.C=Ue+ue,Y)))}it.prototype.cancel=function(){this.J=!0,ln(this)};function cr(C){C.S=Date.now()+C.I,Ir(C,C.I)}function Ir(C,Y){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Ee(h(C.ba,C),Y)}function dn(C){C.B&&(l.clearTimeout(C.B),C.B=null)}it.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(W(this.i,this.A),this.L!=2&&(V(),Se(17)),ln(this),this.s=2,qr(this)):Ir(this,this.S-C)};function qr(C){C.j.G==0||C.J||hn(C.j,C)}function ln(C){dn(C);var Y=C.M;Y&&typeof Y.ma=="function"&&Y.ma(),C.M=null,yt(C.U),C.g&&(Y=C.g,C.g=null,Y.abort(),Y.ma())}function qs(C,Y){try{var ue=C.j;if(ue.G!=0&&(ue.g==C||It(ue.h,C))){if(!C.K&&It(ue.h,C)&&ue.G==3){try{var Ue=ue.Da.g.parse(Y)}catch{Ue=null}if(Array.isArray(Ue)&&Ue.length==3){var jt=Ue;if(jt[0]==0){e:if(!ue.u){if(ue.g)if(ue.g.F+3e3<C.F)rn(ue),iu(ue);else break e;sr(ue),Se(18)}}else ue.za=jt[1],0<ue.za-ue.T&&37500>jt[2]&&ue.F&&ue.v==0&&!ue.C&&(ue.C=Ee(h(ue.Za,ue),6e3));if(1>=ar(ue.h)&&ue.ca){try{ue.ca()}catch{}ue.ca=void 0}}else ra(ue,11)}else if((C.K||ue.g==C)&&rn(ue),!y(Y))for(jt=ue.Da.g.parse(Y),Y=0;Y<jt.length;Y++){let jn=jt[Y];if(ue.T=jn[0],jn=jn[1],ue.G==2)if(jn[0]=="c"){ue.K=jn[1],ue.ia=jn[2];const Wn=jn[3];Wn!=null&&(ue.la=Wn,ue.j.info("VER="+ue.la));const Ra=jn[4];Ra!=null&&(ue.Aa=Ra,ue.j.info("SVER="+ue.Aa));const bc=jn[5];bc!=null&&typeof bc=="number"&&0<bc&&(Ue=1.5*bc,ue.L=Ue,ue.j.info("backChannelRequestTimeoutMs_="+Ue)),Ue=ue;const Wo=C.g;if(Wo){const wo=Wo.g?Wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wo){var Qt=Ue.h;Qt.g||wo.indexOf("spdy")==-1&&wo.indexOf("quic")==-1&&wo.indexOf("h2")==-1||(Qt.j=Qt.l,Qt.g=new Set,Qt.h&&(mr(Qt,Qt.h),Qt.h=null))}if(Ue.D){const rd=Wo.g?Wo.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&(Ue.ya=rd,Cr(Ue.I,Ue.D,rd))}}ue.G=3,ue.l&&ue.l.ua(),ue.ba&&(ue.R=Date.now()-C.F,ue.j.info("Handshake RTT: "+ue.R+"ms")),Ue=ue;var xr=C;if(Ue.qa=da(Ue,Ue.J?Ue.ia:null,Ue.W),xr.K){fr(Ue.h,xr);var Ln=xr,ws=Ue.L;ws&&(Ln.I=ws),Ln.B&&(dn(Ln),cr(Ln)),Ue.g=xr}else Jt(Ue);0<ue.i.length&&U(ue)}else jn[0]!="stop"&&jn[0]!="close"||ra(ue,7);else ue.G==3&&(jn[0]=="stop"||jn[0]=="close"?jn[0]=="stop"?ra(ue,7):hh(ue):jn[0]!="noop"&&ue.l&&ue.l.ta(jn),ue.v=0)}}V(4)}catch{}}var rt=class{constructor(C,Y){this.g=C,this.map=Y}};function Mt(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yt(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function ar(C){return C.h?1:C.g?C.g.size:0}function It(C,Y){return C.h?C.h==Y:C.g?C.g.has(Y):!1}function mr(C,Y){C.g?C.g.add(Y):C.h=Y}function fr(C,Y){C.h&&C.h==Y?C.h=null:C.g&&C.g.has(Y)&&C.g.delete(Y)}Mt.prototype.cancel=function(){if(this.i=Ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Ht(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let Y=C.i;for(const ue of C.g.values())Y=Y.concat(ue.D);return Y}return p(C.i)}function ct(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var Y=[],ue=C.length,Ue=0;Ue<ue;Ue++)Y.push(C[Ue]);return Y}Y=[],ue=0;for(Ue in C)Y[ue++]=C[Ue];return Y}function Oe(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var Y=[];C=C.length;for(var ue=0;ue<C;ue++)Y.push(ue);return Y}Y=[],ue=0;for(const Ue in C)Y[ue++]=Ue;return Y}}}function ot(C,Y){if(C.forEach&&typeof C.forEach=="function")C.forEach(Y,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,Y,void 0);else for(var ue=Oe(C),Ue=ct(C),jt=Ue.length,Qt=0;Qt<jt;Qt++)Y.call(void 0,Ue[Qt],ue&&ue[Qt],C)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wt(C,Y){if(C){C=C.split("&");for(var ue=0;ue<C.length;ue++){var Ue=C[ue].indexOf("="),jt=null;if(0<=Ue){var Qt=C[ue].substring(0,Ue);jt=C[ue].substring(Ue+1)}else Qt=C[ue];Y(Qt,jt?decodeURIComponent(jt.replace(/\+/g," ")):"")}}}function Ct(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Ct){this.h=C.h,Pt(this,C.j),this.o=C.o,this.g=C.g,qt(this,C.s),this.l=C.l;var Y=C.i,ue=new bo;ue.i=Y.i,Y.g&&(ue.g=new Map(Y.g),ue.h=Y.h),Ar(this,ue),this.m=C.m}else C&&(Y=String(C).match(mt))?(this.h=!1,Pt(this,Y[1]||"",!0),this.o=oa(Y[2]||""),this.g=oa(Y[3]||"",!0),qt(this,Y[4]),this.l=oa(Y[5]||"",!0),Ar(this,Y[6]||"",!0),this.m=oa(Y[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}Ct.prototype.toString=function(){var C=[],Y=this.j;Y&&C.push(ta(Y,Xi,!0),":");var ue=this.g;return(ue||Y=="file")&&(C.push("//"),(Y=this.o)&&C.push(ta(Y,Xi,!0),"@"),C.push(encodeURIComponent(String(ue)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.s,ue!=null&&C.push(":",String(ue))),(ue=this.l)&&(this.g&&ue.charAt(0)!="/"&&C.push("/"),C.push(ta(ue,ue.charAt(0)=="/"?qd:Zu,!0))),(ue=this.i.toString())&&C.push("?",ue),(ue=this.m)&&C.push("#",ta(ue,Lf)),C.join("")};function Rt(C){return new Ct(C)}function Pt(C,Y,ue){C.j=ue?oa(Y,!0):Y,C.j&&(C.j=C.j.replace(/:$/,""))}function qt(C,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);C.s=Y}else C.s=null}function Ar(C,Y,ue){Y instanceof bo?(C.i=Y,Zv(C.i,C.h)):(ue||(Y=ta(Y,tu)),C.i=new bo(Y,C.h))}function Cr(C,Y,ue){C.i.set(Y,ue)}function as(C){return Cr(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function oa(C,Y){return C?Y?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function ta(C,Y,ue){return typeof C=="string"?(C=encodeURI(C).replace(Y,ss),ue&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function ss(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Xi=/[#\/\?@]/g,Zu=/[#\?:]/g,qd=/[#\?]/g,tu=/[#\?@]/g,Lf=/#/g;function bo(C,Y){this.h=this.g=null,this.i=C||null,this.j=!!Y}function ru(C){C.g||(C.g=new Map,C.h=0,C.i&&wt(C.i,function(Y,ue){C.add(decodeURIComponent(Y.replace(/\+/g," ")),ue)}))}t=bo.prototype,t.add=function(C,Y){ru(this),this.i=null,C=tn(this,C);var ue=this.g.get(C);return ue||this.g.set(C,ue=[]),ue.push(Y),this.h+=1,this};function zd(C,Y){ru(C),Y=tn(C,Y),C.g.has(Y)&&(C.i=null,C.h-=C.g.get(Y).length,C.g.delete(Y))}function uh(C,Y){return ru(C),Y=tn(C,Y),C.g.has(Y)}t.forEach=function(C,Y){ru(this),this.g.forEach(function(ue,Ue){ue.forEach(function(jt){C.call(Y,jt,Ue,this)},this)},this)},t.na=function(){ru(this);const C=Array.from(this.g.values()),Y=Array.from(this.g.keys()),ue=[];for(let Ue=0;Ue<Y.length;Ue++){const jt=C[Ue];for(let Qt=0;Qt<jt.length;Qt++)ue.push(Y[Ue])}return ue},t.V=function(C){ru(this);let Y=[];if(typeof C=="string")uh(this,C)&&(Y=Y.concat(this.g.get(tn(this,C))));else{C=Array.from(this.g.values());for(let ue=0;ue<C.length;ue++)Y=Y.concat(C[ue])}return Y},t.set=function(C,Y){return ru(this),this.i=null,C=tn(this,C),uh(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[Y]),this.h+=1,this},t.get=function(C,Y){return C?(C=this.V(C),0<C.length?String(C[0]):Y):Y};function mg(C,Y,ue){zd(C,Y),0<ue.length&&(C.i=null,C.g.set(tn(C,Y),p(ue)),C.h+=ue.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],Y=Array.from(this.g.keys());for(var ue=0;ue<Y.length;ue++){var Ue=Y[ue];const Qt=encodeURIComponent(String(Ue)),xr=this.V(Ue);for(Ue=0;Ue<xr.length;Ue++){var jt=Qt;xr[Ue]!==""&&(jt+="="+encodeURIComponent(String(xr[Ue]))),C.push(jt)}}return this.i=C.join("&")};function tn(C,Y){return Y=String(Y),C.j&&(Y=Y.toLowerCase()),Y}function Zv(C,Y){Y&&!C.j&&(ru(C),C.i=null,C.g.forEach(function(ue,Ue){var jt=Ue.toLowerCase();Ue!=jt&&(zd(this,Ue),mg(this,jt,ue))},C)),C.j=Y}function e1(C,Y){const ue=new ze;if(l.Image){const Ue=new Image;Ue.onload=A(Yi,ue,"TestLoadImage: loaded",!0,Y,Ue),Ue.onerror=A(Yi,ue,"TestLoadImage: error",!1,Y,Ue),Ue.onabort=A(Yi,ue,"TestLoadImage: abort",!1,Y,Ue),Ue.ontimeout=A(Yi,ue,"TestLoadImage: timeout",!1,Y,Ue),l.setTimeout(function(){Ue.ontimeout&&Ue.ontimeout()},1e4),Ue.src=C}else Y(!1)}function t1(C,Y){const ue=new ze,Ue=new AbortController,jt=setTimeout(()=>{Ue.abort(),Yi(ue,"TestPingServer: timeout",!1,Y)},1e4);fetch(C,{signal:Ue.signal}).then(Qt=>{clearTimeout(jt),Qt.ok?Yi(ue,"TestPingServer: ok",!0,Y):Yi(ue,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(jt),Yi(ue,"TestPingServer: error",!1,Y)})}function Yi(C,Y,ue,Ue,jt){try{jt&&(jt.onload=null,jt.onerror=null,jt.onabort=null,jt.ontimeout=null),Ue(ue)}catch{}}function ed(){this.g=new Vt}function r1(C,Y,ue){const Ue=ue||"";try{ot(C,function(jt,Qt){let xr=jt;u(jt)&&(xr=bt(jt)),Y.push(Ue+Qt+"="+encodeURIComponent(xr))})}catch(jt){throw Y.push(Ue+"type="+encodeURIComponent("_badmap")),jt}}function dh(C){this.l=C.Ub||null,this.j=C.eb||!1}m(dh,ve),dh.prototype.g=function(){return new td(this.l,this.j)},dh.prototype.i=function(C){return function(){return C}}({});function td(C,Y){Ge.call(this),this.D=C,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(td,Ge),t=td.prototype,t.open=function(C,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=Y,this.readyState=1,Uf(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(Y.body=C),(this.D||l).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yc(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Uf(this)),this.g&&(this.readyState=3,Uf(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fh(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function fh(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var Y=C.value?C.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!C.done}))&&(this.response=this.responseText+=Y)}C.done?yc(this):Uf(this),this.readyState==3&&fh(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,yc(this))},t.Qa=function(C){this.g&&(this.response=C,yc(this))},t.ga=function(){this.g&&yc(this)};function yc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Uf(C)}t.setRequestHeader=function(C,Y){this.u.append(C,Y)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],Y=this.h.entries();for(var ue=Y.next();!ue.done;)ue=ue.value,C.push(ue[0]+": "+ue[1]),ue=Y.next();return C.join(`\r
`)};function Uf(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(td.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function nu(C){let Y="";return I(C,function(ue,Ue){Y+=Ue,Y+=":",Y+=ue,Y+=`\r
`}),Y}function lm(C,Y,ue){e:{for(Ue in ue){var Ue=!1;break e}Ue=!0}Ue||(ue=nu(ue),typeof C=="string"?ue!=null&&encodeURIComponent(String(ue)):Cr(C,Y,ue))}function Ea(C){Ge.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ea,Ge);var cm=/^https?$/i,pg=["POST","PUT"];t=Ea.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,Y,ue,Ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);Y=Y?Y.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():be.g(),this.v=this.o?Qe(this.o):Qe(be),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(Y,String(C),!0),this.B=!1}catch(Qt){au(this,Qt);return}if(C=ue||"",ue=new Map(this.headers),Ue)if(Object.getPrototypeOf(Ue)===Object.prototype)for(var jt in Ue)ue.set(jt,Ue[jt]);else if(typeof Ue.keys=="function"&&typeof Ue.get=="function")for(const Qt of Ue.keys())ue.set(Qt,Ue.get(Qt));else throw Error("Unknown input type for opt_headers: "+String(Ue));Ue=Array.from(ue.keys()).find(Qt=>Qt.toLowerCase()=="content-type"),jt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(pg,Y,void 0))||Ue||jt||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Qt,xr]of ue)this.g.setRequestHeader(Qt,xr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xd(this),this.u=!0,this.g.send(C),this.u=!1}catch(Qt){au(this,Qt)}};function au(C,Y){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=Y,C.m=5,Ah(C),Wd(C)}function Ah(C){C.A||(C.A=!0,ye(C,"complete"),ye(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,ye(this,"complete"),ye(this,"abort"),Wd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wd(this,!0)),Ea.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qf(this):this.bb())},t.bb=function(){Qf(this)};function Qf(C){if(C.h&&typeof i<"u"&&(!C.v[1]||Nl(C)!=4||C.Z()!=2)){if(C.u&&Nl(C)==4)qe(C.Ea,0,C);else if(ye(C,"readystatechange"),Nl(C)==4){C.h=!1;try{const xr=C.Z();e:switch(xr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var ue;if(!(ue=Y)){var Ue;if(Ue=xr===0){var jt=String(C.D).match(mt)[1]||null;!jt&&l.self&&l.self.location&&(jt=l.self.location.protocol.slice(0,-1)),Ue=!cm.test(jt?jt.toLowerCase():"")}ue=Ue}if(ue)ye(C,"complete"),ye(C,"success");else{C.m=6;try{var Qt=2<Nl(C)?C.g.statusText:""}catch{Qt=""}C.l=Qt+" ["+C.Z()+"]",Ah(C)}}finally{Wd(C)}}}}function Wd(C,Y){if(C.g){Xd(C);const ue=C.g,Ue=C.v[0]?()=>{}:null;C.g=null,C.v=null,Y||ye(C,"ready");try{ue.onreadystatechange=Ue}catch{}}}function Xd(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function Nl(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<Nl(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var Y=this.g.responseText;return C&&Y.indexOf(C)==0&&(Y=Y.substring(C.length)),kt(Y)}};function um(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function gg(C){const Y={};C=(C.g&&2<=Nl(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ue=0;Ue<C.length;Ue++){if(y(C[Ue]))continue;var ue=P(C[Ue]);const jt=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const Qt=Y[jt]||[];Y[jt]=Qt,Qt.push(ue)}_(Y,function(Ue){return Ue.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cl(C,Y,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[C]||Y}function su(C){this.Aa=0,this.i=[],this.j=new ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cl("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cl("baseRetryDelayMs",5e3,C),this.cb=Cl("retryDelaySeedMs",1e4,C),this.Wa=Cl("forwardChannelMaxRetries",2,C),this.wa=Cl("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Mt(C&&C.concurrentRequestLimit),this.Da=new ed,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=su.prototype,t.la=8,t.G=1,t.connect=function(C,Y,ue,Ue){Se(0),this.W=C,this.H=Y||{},ue&&Ue!==void 0&&(this.H.OSID=ue,this.H.OAID=Ue),this.F=this.X,this.I=da(this,null,this.W),U(this)};function hh(C){if(dm(C),C.G==3){var Y=C.U++,ue=Rt(C.I);if(Cr(ue,"SID",C.K),Cr(ue,"RID",Y),Cr(ue,"TYPE","terminate"),dt(C,ue),Y=new it(C,C.j,Y),Y.L=2,Y.v=as(Rt(ue)),ue=!1,l.navigator&&l.navigator.sendBeacon)try{ue=l.navigator.sendBeacon(Y.v.toString(),"")}catch{}!ue&&l.Image&&(new Image().src=Y.v,ue=!0),ue||(Y.g=Os(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),cr(Y)}vs(C)}function iu(C){C.g&&(kr(C),C.g.cancel(),C.g=null)}function dm(C){iu(C),C.u&&(l.clearTimeout(C.u),C.u=null),rn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function U(C){if(!Yt(C.h)&&!C.s){C.s=!0;var Y=C.Ga;de||Ie(),Ae||(de(),Ae=!0),se.add(Y,C),C.B=0}}function we(C,Y){return ar(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=Y.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Ee(h(C.Ga,C,Y),Fn(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const jt=new it(this,this.j,C);let Qt=this.o;if(this.S&&(Qt?(Qt=E(Qt),O(Qt,this.S)):Qt=this.S),this.m!==null||this.O||(jt.H=Qt,Qt=null),this.P)e:{for(var Y=0,ue=0;ue<this.i.length;ue++){t:{var Ue=this.i[ue];if("__data__"in Ue.map&&(Ue=Ue.map.__data__,typeof Ue=="string")){Ue=Ue.length;break t}Ue=void 0}if(Ue===void 0)break;if(Y+=Ue,4096<Y){Y=ue;break e}if(Y===4096||ue===this.i.length-1){Y=ue+1;break e}}Y=1e3}else Y=1e3;Y=St(this,jt,Y),ue=Rt(this.I),Cr(ue,"RID",C),Cr(ue,"CVER",22),this.D&&Cr(ue,"X-HTTP-Session-Id",this.D),dt(this,ue),Qt&&(this.O?Y="headers="+encodeURIComponent(String(nu(Qt)))+"&"+Y:this.m&&lm(ue,this.m,Qt)),mr(this.h,jt),this.Ua&&Cr(ue,"TYPE","init"),this.P?(Cr(ue,"$req",Y),Cr(ue,"SID","null"),jt.T=!0,Gt(jt,ue,null)):Gt(jt,ue,Y),this.G=2}}else this.G==3&&(C?Ze(this,C):this.i.length==0||Yt(this.h)||Ze(this))};function Ze(C,Y){var ue;Y?ue=Y.l:ue=C.U++;const Ue=Rt(C.I);Cr(Ue,"SID",C.K),Cr(Ue,"RID",ue),Cr(Ue,"AID",C.T),dt(C,Ue),C.m&&C.o&&lm(Ue,C.m,C.o),ue=new it(C,C.j,ue,C.B+1),C.m===null&&(ue.H=C.o),Y&&(C.i=Y.D.concat(C.i)),Y=St(C,ue,1e3),ue.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),mr(C.h,ue),Gt(ue,Ue,Y)}function dt(C,Y){C.H&&I(C.H,function(ue,Ue){Cr(Y,Ue,ue)}),C.l&&ot({},function(ue,Ue){Cr(Y,Ue,ue)})}function St(C,Y,ue){ue=Math.min(C.i.length,ue);var Ue=C.l?h(C.l.Na,C.l,C):null;e:{var jt=C.i;let Qt=-1;for(;;){const xr=["count="+ue];Qt==-1?0<ue?(Qt=jt[0].g,xr.push("ofs="+Qt)):Qt=0:xr.push("ofs="+Qt);let Ln=!0;for(let ws=0;ws<ue;ws++){let jn=jt[ws].g;const Wn=jt[ws].map;if(jn-=Qt,0>jn)Qt=Math.max(0,jt[ws].g-100),Ln=!1;else try{r1(Wn,xr,"req"+jn+"_")}catch{Ue&&Ue(Wn)}}if(Ln){Ue=xr.join("&");break e}}}return C=C.i.splice(0,ue),Y.D=C,Ue}function Jt(C){if(!C.g&&!C.u){C.Y=1;var Y=C.Fa;de||Ie(),Ae||(de(),Ae=!0),se.add(Y,C),C.v=0}}function sr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Ee(h(C.Fa,C),Fn(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Ur(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Ee(h(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),iu(this),Ur(this))};function kr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function Ur(C){C.g=new it(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var Y=Rt(C.qa);Cr(Y,"RID","rpc"),Cr(Y,"SID",C.K),Cr(Y,"AID",C.T),Cr(Y,"CI",C.F?"0":"1"),!C.F&&C.ja&&Cr(Y,"TO",C.ja),Cr(Y,"TYPE","xmlhttp"),dt(C,Y),C.m&&C.o&&lm(Y,C.m,C.o),C.L&&(C.g.I=C.L);var ue=C.g;C=C.ia,ue.L=1,ue.v=as(Rt(Y)),ue.m=null,ue.P=!0,nr(ue,C)}t.Za=function(){this.C!=null&&(this.C=null,iu(this),sr(this),Se(19))};function rn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function hn(C,Y){var ue=null;if(C.g==Y){rn(C),kr(C),C.g=null;var Ue=2}else if(It(C.h,Y))ue=Y.D,fr(C.h,Y),Ue=1;else return;if(C.G!=0){if(Y.o)if(Ue==1){ue=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var jt=C.B;Ue=Be(),ye(Ue,new _e(Ue,ue)),U(C)}else Jt(C);else if(jt=Y.s,jt==3||jt==0&&0<Y.X||!(Ue==1&&we(C,Y)||Ue==2&&sr(C)))switch(ue&&0<ue.length&&(Y=C.h,Y.i=Y.i.concat(ue)),jt){case 1:ra(C,5);break;case 4:ra(C,10);break;case 3:ra(C,6);break;default:ra(C,2)}}}function Fn(C,Y){let ue=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(ue*=2),ue*Y}function ra(C,Y){if(C.j.info("Error code "+Y),Y==2){var ue=h(C.fb,C),Ue=C.Xa;const jt=!Ue;Ue=new Ct(Ue||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Pt(Ue,"https"),as(Ue),jt?e1(Ue.toString(),ue):t1(Ue.toString(),ue)}else Se(2);C.G=0,C.l&&C.l.sa(Y),vs(C),dm(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function vs(C){if(C.G=0,C.ka=[],C.l){const Y=Ht(C.h);(Y.length!=0||C.i.length!=0)&&(g(C.ka,Y),g(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function da(C,Y,ue){var Ue=ue instanceof Ct?Rt(ue):new Ct(ue);if(Ue.g!="")Y&&(Ue.g=Y+"."+Ue.g),qt(Ue,Ue.s);else{var jt=l.location;Ue=jt.protocol,Y=Y?Y+"."+jt.hostname:jt.hostname,jt=+jt.port;var Qt=new Ct(null);Ue&&Pt(Qt,Ue),Y&&(Qt.g=Y),jt&&qt(Qt,jt),ue&&(Qt.l=ue),Ue=Qt}return ue=C.D,Y=C.ya,ue&&Y&&Cr(Ue,ue,Y),Cr(Ue,"VER",C.la),dt(C,Ue),Ue}function Os(C,Y,ue){if(Y&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=C.Ca&&!C.pa?new Ea(new dh({eb:ue})):new Ea(C.pa),Y.Ha(C.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ys(){}t=ys.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ds(){}Ds.prototype.g=function(C,Y){return new bs(C,Y)};function bs(C,Y){Ge.call(this),this.g=new su(Y),this.l=C,this.h=Y&&Y.messageUrlParams||null,C=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(C?C["X-WebChannel-Content-Type"]=Y.messageContentType:C={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(C?C["X-WebChannel-Client-Profile"]=Y.va:C={"X-WebChannel-Client-Profile":Y.va}),this.g.S=C,(C=Y&&Y.Sb)&&!y(C)&&(this.g.m=C),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!y(Y)&&(this.g.D=Y,C=this.h,C!==null&&Y in C&&(C=this.h,Y in C&&delete C[Y])),this.j=new lu(this)}m(bs,Ge),bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){hh(this.g)},bs.prototype.o=function(C){var Y=this.g;if(typeof C=="string"){var ue={};ue.__data__=C,C=ue}else this.u&&(ue={},ue.__data__=bt(C),C=ue);Y.i.push(new rt(Y.Ya++,C)),Y.G==3&&U(Y)},bs.prototype.N=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,bs.aa.N.call(this)};function zl(C){Le.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var Y=C.__sm__;if(Y){e:{for(const ue in Y){C=ue;break e}C=void 0}(this.i=C)&&(C=this.i,Y=Y!==null&&C in Y?Y[C]:void 0),this.data=Y}else this.data=C}m(zl,Le);function ou(){Ve.call(this),this.status=1}m(ou,Ve);function lu(C){this.g=C}m(lu,ys),lu.prototype.ua=function(){ye(this.g,"a")},lu.prototype.ta=function(C){ye(this.g,new zl(C))},lu.prototype.sa=function(C){ye(this.g,new ou)},lu.prototype.ra=function(){ye(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,oY=function(){return new Ds},iY=function(){return Be()},sY=At,KP={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,N_=fe,Ne.COMPLETE="complete",aY=Ne,Z.EventType=$e,$e.OPEN="a",$e.CLOSE="b",$e.ERROR="c",$e.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,iy=Z,Ea.prototype.listenOnce=Ea.prototype.L,Ea.prototype.getLastError=Ea.prototype.Ka,Ea.prototype.getLastErrorCode=Ea.prototype.Ba,Ea.prototype.getStatus=Ea.prototype.Z,Ea.prototype.getResponseJson=Ea.prototype.Oa,Ea.prototype.getResponseText=Ea.prototype.oa,Ea.prototype.send=Ea.prototype.ea,Ea.prototype.setWithCredentials=Ea.prototype.Ha,nY=Ea}).apply(typeof bN<"u"?bN:typeof self<"u"?self:typeof window<"u"?window:{});const sU="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Do.UNAUTHENTICATED=new Do(null),Do.GOOGLE_CREDENTIALS=new Do("google-credentials-uid"),Do.FIRST_PARTY=new Do("first-party-uid"),Do.MOCK_USER=new Do("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=new xO("@firebase/firestore");function Wg(){return Cp.logLevel}function pr(t,...e){if(Cp.logLevel<=Rn.DEBUG){const r=e.map(OO);Cp.debug(`Firestore (${jv}): ${t}`,...r)}}function Ml(t,...e){if(Cp.logLevel<=Rn.ERROR){const r=e.map(OO);Cp.error(`Firestore (${jv}): ${t}`,...r)}}function O0(t,...e){if(Cp.logLevel<=Rn.WARN){const r=e.map(OO);Cp.warn(`Firestore (${jv}): ${t}`,...r)}}function OO(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t="Unexpected state"){const e=`FIRESTORE (${jv}) INTERNAL ASSERTION FAILED: `+t;throw Ml(e),new Error(e)}function Kr(t,e){t||Lr()}function An(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vr extends XA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Do.UNAUTHENTICATED))}shutdown(){}}class Ppe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Tpe{constructor(e){this.t=e,this.currentUser=Do.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Kr(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Id;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Id,e.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{pr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Id)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(pr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Kr(typeof n.accessToken=="string"),new lY(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kr(e===null||typeof e=="string"),new Do(e)}}class kpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Do.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fpe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new kpe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Do.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ope{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dpe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Kr(this.o===void 0);const n=s=>{s.error!=null&&pr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,pr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{pr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):pr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Kr(typeof r.token=="string"),this.R=r.token,new Ope(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rpe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Rpe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function xn(t,e){return t<e?-1:t>e?1:0}function Zx(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function uY(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new vr(Xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new vr(Xt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new vr(Xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vr(Xt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new dr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xn(this.nanoseconds,e.nanoseconds):xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wr(e)}static min(){return new Wr(new dr(0,0))}static max(){return new Wr(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,r,n){r===void 0?r=0:r>e.length&&Lr(),n===void 0?n=e.length-r:n>e.length-r&&Lr(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Tb.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Tb?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),i=r.get(a);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Jn extends Tb{construct(e,r,n){return new Jn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new vr(Xt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Jn(r)}static emptyPath(){return new Jn([])}}const Mpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class As extends Tb{construct(e,r,n){return new As(e,r,n)}static isValidIdentifier(e){return Mpe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),As.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new As(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new vr(Xt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new vr(Xt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new vr(Xt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(i=!i,a++):l!=="."||i?(n+=l,a++):(s(),a++)}if(s(),i)throw new vr(Xt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new As(r)}static emptyPath(){return new As([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.path=e}static fromPath(e){return new Sr(Jn.fromString(e))}static fromName(e){return new Sr(Jn.fromString(e).popFirst(5))}static empty(){return new Sr(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Jn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Jn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Sr(new Jn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function GP(t){return t.fields.find(e=>e.kind===2)}function Im(t){return t.fields.filter(e=>e.kind!==2)}EE.UNKNOWN_ID=-1;class C_{constructor(e,r){this.fieldPath=e,this.kind=r}}class kb{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new kb(0,zc.min())}}function Lpe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Wr.fromTimestamp(n===1e9?new dr(r+1,0):new dr(r,n));return new zc(a,Sr.empty(),e)}function dY(t){return new zc(t.readTime,t.key,-1)}class zc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new zc(Wr.min(),Sr.empty(),-1)}static max(){return new zc(Wr.max(),Sr.empty(),-1)}}function RO(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Sr.comparator(t.documentKey,e.documentKey),r!==0?r:xn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){if(t.code!==Xt.FAILED_PRECONDITION||t.message!==fY)throw t;pr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Lr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Dt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Dt.reject(r)}static resolve(e){return new Dt((r,n)=>{r(e)})}static reject(e){return new Dt((r,n)=>{n(e)})}static waitFor(e){return new Dt((r,n)=>{let a=0,s=0,i=!1;e.forEach(l=>{++a,l.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(e){let r=Dt.resolve(!1);for(const n of e)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new Dt((n,a)=>{const s=e.length,i=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{i[u]=d,++l,l===s&&n(i)},d=>a(d))}})}static doWhile(e,r){return new Dt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Id,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Dy(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=MO(n.target.error);this.V.reject(new Dy(e,a))}}static open(e,r,n,a){try{return new OI(r,e.transaction(a,n))}catch(s){throw new Dy(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(pr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Qpe(r)}}class E0{constructor(e,r,n){this.name=e,this.version=r,this.p=n,E0.S(Hi())===12.2&&Ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pr("SimpleDb","Removing database:",e),Om(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pX())return!1;if(E0.v())return!0;const e=Hi(),r=E0.S(e),n=0<r&&r<10,a=hY(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(pr("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const i=s.target.result;r(i)},a.onblocked=()=>{n(new Dy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new vr(Xt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new vr(Xt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Dy(e,i))},a.onupgradeneeded=s=>{pr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,a.transaction,s.oldVersion,this.version).next(()=>{pr("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=OI.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),Dt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&i<3;if(pr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Upe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Om(this.B.delete())}}class Dy extends vr{constructor(e,r){super(Xt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function tm(t){return t.name==="IndexedDbTransactionError"}class Qpe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(pr("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(pr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Om(n)}add(e){return pr("SimpleDb","ADD",this.store.name,e,e),Om(this.store.add(e))}get(e){return Om(this.store.get(e)).next(r=>(r===void 0&&(r=null),pr("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return pr("SimpleDb","DELETE",this.store.name,e),Om(this.store.delete(e))}count(){return pr("SimpleDb","COUNT",this.store.name),Om(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new Dt((i,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{i(c.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(l,c)=>{i.push(c)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Dt((a,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{a(i.target.result)}})}j(e,r){pr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Dt((n,a)=>{r.onerror=s=>{const i=MO(s.target.error);a(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new Dt((a,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void a();const c=new Upe(l),u=r(l.primaryKey,l.value,c);if(u instanceof Dt){const d=u.catch(f=>(c.done(),Dt.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>Dt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Om(t){return new Dt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=MO(n.target.error);r(a)}})}let iU=!1;function MO(t){const e=E0.S(Hi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new vr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iU||(iU=!0,setTimeout(()=>{throw n},0)),n}}return t}class Vpe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){pr("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{pr("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){tm(r)?pr("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Wp(r)}await this.X(6e4)})}}class Hpe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return Dt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return pr("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,a).next(l=>{a-=l,n.add(i)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(a,s)).next(l=>(pr("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const i=dY(s);RO(i,n)>0&&(n=i)}),new zc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ku.oe=-1;function K2(t){return t==null}function Fb(t){return t===0&&1/t==-1/0}function $pe(t){return typeof t=="number"&&Number.isInteger(t)&&!Fb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=oU(e)),e=Kpe(t.get(r),e);return oU(e)}function Kpe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function oU(t){return t+""}function mf(t){const e=t.length;if(Kr(e>=2),e===2)return Kr(t.charAt(0)===""&&t.charAt(1)===""),Jn.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Lr(),t.charAt(i+1)){case"":const l=t.substring(s,i);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,i),a+="\0";break;case"":a+=t.substring(s,i+1);break;default:Lr()}s=i+2}return new Jn(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t,e){return[t,Ql(e)]}function mY(t,e,r){return[t,Ql(e),r]}const Gpe={},qpe=["prefixPath","collectionGroup","readTime","documentId"],zpe=["prefixPath","collectionGroup","documentId"],Wpe=["collectionGroup","readTime","prefixPath","documentId"],Xpe=["canonicalId","targetId"],Ype=["targetId","path"],Jpe=["path","targetId"],Zpe=["collectionId","parent"],ege=["indexId","uid"],tge=["uid","sequenceNumber"],rge=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nge=["indexId","uid","orderedDocumentKey"],age=["userId","collectionPath","documentId"],sge=["userId","collectionPath","largestBatchId"],ige=["userId","collectionGroup","largestBatchId"],pY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oge=[...pY,"documentOverlays"],gY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xY=gY,LO=[...xY,"indexConfiguration","indexState","indexEntries"],lge=LO,cge=[...LO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP extends AY{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ki(t,e){const r=An(t);return E0.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Xp(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,r){this.comparator=e,this.root=r||Ro.EMPTY}insert(e,r){return new gs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ro.BLACK,null,null))}remove(e){return new gs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ro.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wN(this.root,e,this.comparator,!1)}getReverseIterator(){return new wN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wN(this.root,e,this.comparator,!0)}}class wN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ro{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??Ro.RED,this.left=a??Ro.EMPTY,this.right=s??Ro.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new Ro(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ro.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return Ro.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ro.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ro.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Lr();const e=this.left.check();if(e!==this.right.check())throw Lr();return e+(this.isRed()?0:1)}}Ro.EMPTY=null,Ro.RED=!0,Ro.BLACK=!1;Ro.EMPTY=new class{constructor(){this.size=0}get key(){throw Lr()}get value(){throw Lr()}get color(){throw Lr()}get left(){throw Lr()}get right(){throw Lr()}copy(e,r,n,a,s){return this}insert(e,r,n){return new Ro(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.comparator=e,this.data=new gs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new uU(this.data.getIterator())}getIteratorFrom(e){return new uU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ba)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ba(this.comparator);return r.data=e,r}}class uU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.fields=e,e.sort(As.comparator)}static empty(){return new lc([])}unionWith(e){let r=new Ba(As.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new lc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Zx(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yY("Invalid base64 string: "+s):s}}(e);return new ui(r)}static fromUint8Array(e){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(e);return new ui(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ui.EMPTY_BYTE_STRING=new ui("");const uge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RA(t){if(Kr(!!t),typeof t=="string"){let e=0;const r=uge.exec(t);if(Kr(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:us(t.seconds),nanos:us(t.nanos)}}function us(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function D0(t){return typeof t=="string"?ui.fromBase64String(t):ui.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function QO(t){const e=t.mapValue.fields.__previous_value__;return UO(e)?QO(e):e}function Ob(t){const e=RA(t.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(e,r,n,a,s,i,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class R0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new R0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof R0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},E_={nullValue:"NULL_VALUE"};function _p(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?UO(t)?4:bY(t)?9007199254740991:DI(t)?10:11:Lr()}function Ef(t,e){if(t===e)return!0;const r=_p(t);if(r!==_p(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ob(t).isEqual(Ob(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=RA(a.timestampValue),l=RA(s.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return D0(a.bytesValue).isEqual(D0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return us(a.geoPointValue.latitude)===us(s.geoPointValue.latitude)&&us(a.geoPointValue.longitude)===us(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return us(a.integerValue)===us(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=us(a.doubleValue),l=us(s.doubleValue);return i===l?Fb(i)===Fb(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return Zx(t.arrayValue.values||[],e.arrayValue.values||[],Ef);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},l=s.mapValue.fields||{};if(cU(i)!==cU(l))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(l[c]===void 0||!Ef(i[c],l[c])))return!1;return!0}(t,e);default:return Lr()}}function Db(t,e){return(t.values||[]).find(r=>Ef(r,e))!==void 0}function M0(t,e){if(t===e)return 0;const r=_p(t),n=_p(e);if(r!==n)return xn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return xn(t.booleanValue,e.booleanValue);case 2:return function(s,i){const l=us(s.integerValue||s.doubleValue),c=us(i.integerValue||i.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return dU(t.timestampValue,e.timestampValue);case 4:return dU(Ob(t),Ob(e));case 5:return xn(t.stringValue,e.stringValue);case 6:return function(s,i){const l=D0(s),c=D0(i);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const l=s.split("/"),c=i.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=xn(l[u],c[u]);if(d!==0)return d}return xn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const l=xn(us(s.latitude),us(i.latitude));return l!==0?l:xn(us(s.longitude),us(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fU(t.arrayValue,e.arrayValue);case 10:return function(s,i){var l,c,u,d;const f=s.fields||{},h=i.fields||{},A=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,p=xn(((u=A==null?void 0:A.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:fU(A,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===o0.mapValue&&i===o0.mapValue)return 0;if(s===o0.mapValue)return 1;if(i===o0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=xn(c[f],d[f]);if(h!==0)return h;const A=M0(l[c[f]],u[d[f]]);if(A!==0)return A}return xn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Lr()}}function dU(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xn(t,e);const r=RA(t),n=RA(e),a=xn(r.seconds,n.seconds);return a!==0?a:xn(r.nanos,n.nanos)}function fU(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=M0(r[a],n[a]);if(s)return s}return xn(r.length,n.length)}function ev(t){return zP(t)}function zP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=RA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return D0(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Sr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=zP(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${zP(r.fields[i])}`;return a+"}"}(t.mapValue):Lr()}function Rb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function WP(t){return!!t&&"integerValue"in t}function Mb(t){return!!t&&"arrayValue"in t}function AU(t){return!!t&&"nullValue"in t}function hU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function S_(t){return!!t&&"mapValue"in t}function DI(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Ry(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xp(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Ry(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ry(t.arrayValue.values[r]);return e}return Object.assign({},t)}function bY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const wY={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fge(t){return"nullValue"in t?E_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Rb(R0.empty(),Sr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?DI(t)?wY:{mapValue:{}}:Lr()}function Age(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Rb(R0.empty(),Sr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?wY:"mapValue"in t?DI(t)?{mapValue:{}}:o0:Lr()}function mU(t,e){const r=M0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function pU(t,e){const r=M0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.value=e}static empty(){return new Qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!S_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ry(r)}setAll(e){let r=As.emptyPath(),n={},a=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}i?n[l.lastSegment()]=Ry(i):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());S_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ef(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];S_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){Xp(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Qo(Ry(this.value))}}function NY(t){const e=[];return Xp(t.fields,(r,n)=>{const a=new As([r]);if(S_(n)){const s=NY(n.mapValue).fields;if(s.length===0)e.push(a);else for(const i of s)e.push(a.child(i))}else e.push(a)}),new lc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,r,n,a,s,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=l}static newInvalidDocument(e){return new fs(e,0,Wr.min(),Wr.min(),Wr.min(),Qo.empty(),0)}static newFoundDocument(e,r,n,a){return new fs(e,1,r,Wr.min(),n,a,0)}static newNoDocument(e,r){return new fs(e,2,r,Wr.min(),Wr.min(),Qo.empty(),0)}static newUnknownDocument(e,r){return new fs(e,3,r,Wr.min(),Wr.min(),Qo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,r){this.position=e,this.inclusive=r}}function gU(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],i=t.position[a];if(s.field.isKeyField()?n=Sr.comparator(Sr.fromName(i.referenceValue),r.key):n=M0(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function xU(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ef(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,r="asc"){this.field=e,this.dir=r}}function hge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{}class Mn extends CY{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new mge(e,r,n):r==="array-contains"?new xge(e,n):r==="in"?new BY(e,n):r==="not-in"?new vge(e,n):r==="array-contains-any"?new yge(e,n):new Mn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new pge(e,n):new gge(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(M0(r,this.value)):r!==null&&_p(this.value)===_p(r)&&this.matchesComparison(M0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Lr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wa extends CY{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new wa(e,r)}matches(e){return rv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rv(t){return t.op==="and"}function XP(t){return t.op==="or"}function VO(t){return _Y(t)&&rv(t)}function _Y(t){for(const e of t.filters)if(e instanceof wa)return!1;return!0}function YP(t){if(t instanceof Mn)return t.field.canonicalString()+t.op.toString()+ev(t.value);if(VO(t))return t.filters.map(e=>YP(e)).join(",");{const e=t.filters.map(r=>YP(r)).join(",");return`${t.op}(${e})`}}function EY(t,e){return t instanceof Mn?function(n,a){return a instanceof Mn&&n.op===a.op&&n.field.isEqual(a.field)&&Ef(n.value,a.value)}(t,e):t instanceof wa?function(n,a){return a instanceof wa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,l)=>s&&EY(i,a.filters[l]),!0):!1}(t,e):void Lr()}function SY(t,e){const r=t.filters.concat(e);return wa.create(r,t.op)}function IY(t){return t instanceof Mn?function(r){return`${r.field.canonicalString()} ${r.op} ${ev(r.value)}`}(t):t instanceof wa?function(r){return r.op.toString()+" {"+r.getFilters().map(IY).join(" ,")+"}"}(t):"Filter"}class mge extends Mn{constructor(e,r,n){super(e,r,n),this.key=Sr.fromName(n.referenceValue)}matches(e){const r=Sr.comparator(e.key,this.key);return this.matchesComparison(r)}}class pge extends Mn{constructor(e,r){super(e,"in",r),this.keys=jY("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class gge extends Mn{constructor(e,r){super(e,"not-in",r),this.keys=jY("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function jY(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Sr.fromName(n.referenceValue))}class xge extends Mn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Mb(r)&&Db(r.arrayValue,this.value)}}class BY extends Mn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Db(this.value.arrayValue,r)}}class vge extends Mn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Db(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Db(this.value.arrayValue,r)}}class yge extends Mn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Mb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Db(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(e,r=null,n=[],a=[],s=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=l,this.ue=null}}function JP(t,e=null,r=[],n=[],a=null,s=null,i=null){return new bge(t,e,r,n,a,s,i)}function Ep(t){const e=An(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>YP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),K2(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ev(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ev(n)).join(",")),e.ue=r}return e.ue}function G2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!hge(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!EY(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xU(t.startAt,e.startAt)&&xU(t.endAt,e.endAt)}function SE(t){return Sr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function IE(t,e){return t.filters.filter(r=>r instanceof Mn&&r.field.isEqual(e))}function vU(t,e,r){let n=E_,a=!0;for(const s of IE(t,e)){let i=E_,l=!0;switch(s.op){case"<":case"<=":i=fge(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,l=!1;break;case"!=":case"not-in":i=E_}mU({value:n,inclusive:a},{value:i,inclusive:l})<0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];mU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})<0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}function yU(t,e,r){let n=o0,a=!0;for(const s of IE(t,e)){let i=o0,l=!0;switch(s.op){case">=":case">":i=Age(s.value),l=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,l=!1;break;case"!=":case"not-in":i=o0}pU({value:n,inclusive:a},{value:i,inclusive:l})>0&&(n=i,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];pU({value:n,inclusive:a},{value:i,inclusive:r.inclusive})>0&&(n=i,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,r=null,n=[],a=[],s=null,i="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wge(t,e,r,n,a,s,i,l){return new Bv(t,e,r,n,a,s,i,l)}function q2(t){return new Bv(t)}function bU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PY(t){return t.collectionGroup!==null}function My(t){const e=An(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new Ba(As.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lb(s,n))}),r.has(As.keyField().canonicalString())||e.ce.push(new Lb(As.keyField(),n))}return e.ce}function Uu(t){const e=An(t);return e.le||(e.le=Nge(e,My(t))),e.le}function Nge(t,e){if(t.limitType==="F")return JP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Lb(a.field,s)});const r=t.endAt?new tv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new tv(t.startAt.position,t.startAt.inclusive):null;return JP(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function ZP(t,e){const r=t.filters.concat([e]);return new Bv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function jE(t,e,r){return new Bv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function RI(t,e){return G2(Uu(t),Uu(e))&&t.limitType===e.limitType}function TY(t){return`${Ep(Uu(t))}|lt:${t.limitType}`}function Xg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>IY(a)).join(", ")}]`),K2(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>ev(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>ev(a)).join(",")),`Target(${n})`}(Uu(t))}; limitType=${t.limitType})`}function z2(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Sr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of My(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(i,l,c){const u=gU(i,l,c);return i.inclusive?u<=0:u<0}(n.startAt,My(n),a)||n.endAt&&!function(i,l,c){const u=gU(i,l,c);return i.inclusive?u>=0:u>0}(n.endAt,My(n),a))}(t,e)}function Cge(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kY(t){return(e,r)=>{let n=!1;for(const a of My(t)){const s=_ge(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function _ge(t,e,r){const n=t.field.isKeyField()?Sr.comparator(e.key,r.key):function(s,i,l){const c=i.data.field(s),u=l.data.field(s);return c!==null&&u!==null?M0(c,u):Lr()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Lr()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Xp(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return vY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ege=new gs(Sr.comparator);function Vc(){return Ege}const FY=new gs(Sr.comparator);function oy(...t){let e=FY;for(const r of t)e=e.insert(r.key,r);return e}function OY(t){let e=FY;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function pf(){return Ly()}function DY(){return Ly()}function Ly(){return new rm(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sge=new gs(Sr.comparator),Ige=new Ba(Sr.comparator);function In(...t){let e=Ige;for(const r of t)e=e.add(r);return e}const jge=new Ba(xn);function Bge(){return jge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fb(e)?"-0":e}}function RY(t){return{integerValue:""+t}}function Pge(t,e){return $pe(e)?RY(e):HO(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this._=void 0}}function Tge(t,e,r){return t instanceof Ub?function(a,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&UO(s)&&(s=QO(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof nv?LY(t,e):t instanceof av?UY(t,e):function(a,s){const i=MY(a,s),l=wU(i)+wU(a.Pe);return WP(i)&&WP(a.Pe)?RY(l):HO(a.serializer,l)}(t,e)}function kge(t,e,r){return t instanceof nv?LY(t,e):t instanceof av?UY(t,e):r}function MY(t,e){return t instanceof Qb?function(n){return WP(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Ub extends MI{}class nv extends MI{constructor(e){super(),this.elements=e}}function LY(t,e){const r=QY(e);for(const n of t.elements)r.some(a=>Ef(a,n))||r.push(n);return{arrayValue:{values:r}}}class av extends MI{constructor(e){super(),this.elements=e}}function UY(t,e){let r=QY(e);for(const n of t.elements)r=r.filter(a=>!Ef(a,n));return{arrayValue:{values:r}}}class Qb extends MI{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function wU(t){return us(t.integerValue||t.doubleValue)}function QY(t){return Mb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fge{constructor(e,r){this.field=e,this.transform=r}}function Oge(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof nv&&a instanceof nv||n instanceof av&&a instanceof av?Zx(n.elements,a.elements,Ef):n instanceof Qb&&a instanceof Qb?Ef(n.Pe,a.Pe):n instanceof Ub&&a instanceof Ub}(t.transform,e.transform)}class Dge{constructor(e,r){this.version=e,this.transformResults=r}}class hs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function I_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class LI{}function VY(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tv(t.key,hs.none()):new Pv(t.key,t.data,hs.none());{const r=t.data,n=Qo.empty();let a=new Ba(As.comparator);for(let s of e.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new ZA(t.key,n,new lc(a.toArray()),hs.none())}}function Rge(t,e,r){t instanceof Pv?function(a,s,i){const l=a.value.clone(),c=CU(a.fieldTransforms,s,i.transformResults);l.setAll(c),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof ZA?function(a,s,i){if(!I_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const l=CU(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(HY(a)),c.setAll(l),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Uy(t,e,r,n){return t instanceof Pv?function(s,i,l,c){if(!I_(s.precondition,i))return l;const u=s.value.clone(),d=_U(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof ZA?function(s,i,l,c){if(!I_(s.precondition,i))return l;const u=_U(s.fieldTransforms,c,i),d=i.data;return d.setAll(HY(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,i,l){return I_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function Mge(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=MY(n.transform,a||null);s!=null&&(r===null&&(r=Qo.empty()),r.set(n.field,s))}return r||null}function NU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Zx(n,a,(s,i)=>Oge(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pv extends LI{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ZA extends LI{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HY(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function CU(t,e,r){const n=new Map;Kr(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],i=s.transform,l=e.data.field(s.field);n.set(s.field,kge(i,l,r[a]))}return n}function _U(t,e,r){const n=new Map;for(const a of t){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Tge(s,i,e))}return n}class Tv extends LI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $O extends LI{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Rge(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Uy(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Uy(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=DY();return this.mutations.forEach(a=>{const s=e.get(a.key),i=s.overlayedDocument;let l=this.applyToLocalView(i,s.mutatedFields);l=r.has(a.key)?null:l;const c=VY(i,l);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Wr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),In())}isEqual(e){return this.batchId===e.batchId&&Zx(this.mutations,e.mutations,(r,n)=>NU(r,n))&&Zx(this.baseMutations,e.baseMutations,(r,n)=>NU(r,n))}}class GO{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Kr(e.mutations.length===n.length);let a=function(){return Sge}();const s=e.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new GO(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lge{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Vn;function $Y(t){switch(t){default:return Lr();case Xt.CANCELLED:case Xt.UNKNOWN:case Xt.DEADLINE_EXCEEDED:case Xt.RESOURCE_EXHAUSTED:case Xt.INTERNAL:case Xt.UNAVAILABLE:case Xt.UNAUTHENTICATED:return!1;case Xt.INVALID_ARGUMENT:case Xt.NOT_FOUND:case Xt.ALREADY_EXISTS:case Xt.PERMISSION_DENIED:case Xt.FAILED_PRECONDITION:case Xt.ABORTED:case Xt.OUT_OF_RANGE:case Xt.UNIMPLEMENTED:case Xt.DATA_LOSS:return!0}}function KY(t){if(t===void 0)return Ml("GRPC error has no .code"),Xt.UNKNOWN;switch(t){case Ai.OK:return Xt.OK;case Ai.CANCELLED:return Xt.CANCELLED;case Ai.UNKNOWN:return Xt.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return Xt.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return Xt.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return Xt.INTERNAL;case Ai.UNAVAILABLE:return Xt.UNAVAILABLE;case Ai.UNAUTHENTICATED:return Xt.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return Xt.INVALID_ARGUMENT;case Ai.NOT_FOUND:return Xt.NOT_FOUND;case Ai.ALREADY_EXISTS:return Xt.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return Xt.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return Xt.FAILED_PRECONDITION;case Ai.ABORTED:return Xt.ABORTED;case Ai.OUT_OF_RANGE:return Xt.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return Xt.UNIMPLEMENTED;case Ai.DATA_LOSS:return Xt.DATA_LOSS;default:return Lr()}}(Vn=Ai||(Ai={}))[Vn.OK=0]="OK",Vn[Vn.CANCELLED=1]="CANCELLED",Vn[Vn.UNKNOWN=2]="UNKNOWN",Vn[Vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vn[Vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vn[Vn.NOT_FOUND=5]="NOT_FOUND",Vn[Vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vn[Vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vn[Vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vn[Vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vn[Vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vn[Vn.ABORTED=10]="ABORTED",Vn[Vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vn[Vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vn[Vn.INTERNAL=13]="INTERNAL",Vn[Vn.UNAVAILABLE=14]="UNAVAILABLE",Vn[Vn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qge=new ep([4294967295,4294967295],0);function EU(t){const e=Uge().encode(t),r=new rY;return r.update(e),new Uint8Array(r.digest())}function SU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ep([r,n],0),new ep([a,s],0)]}class zO{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ly(`Invalid padding: ${r}`);if(n<0)throw new ly(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ly(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ly(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ep.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(ep.fromNumber(n)));return a.compare(Qge)===1&&(a=new ep([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=EU(e),[n,a]=SU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new zO(s,a,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=EU(e),[n,a]=SU(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,a,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ly extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,W2.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new UI(Wr.min(),a,new gs(xn),Vc(),In())}}class W2{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new W2(n,r,In(),In(),In())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class GY{constructor(e,r){this.targetId=e,this.me=r}}class qY{constructor(e,r,n=ui.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class IU{constructor(){this.fe=0,this.ge=BU(),this.pe=ui.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=In(),r=In(),n=In();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Lr()}}),new W2(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=BU()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Kr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Vge{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vc(),this.qe=jU(),this.Qe=new gs(xn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Lr()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(SE(s))if(n===0){const i=new Sr(s.path);this.Ue(r,i,fs.newNoDocument(i,Wr.min()))}else Kr(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),c=l?this.Xe(l,e,i):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,l;try{i=D0(n).toUint8Array()}catch(c){if(c instanceof yY)return O0("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new zO(i,a,s)}catch(c){return O0(c instanceof ly?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const l=this.Je(i);if(l){if(s.current&&SE(l.target)){const c=new Sr(l.target.path);this.ke.get(c)!==null||this.it(i,c)||this.Ue(i,c,fs.newNoDocument(c,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=In();this.qe.forEach((s,i)=>{let l=!0;i.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const a=new UI(e,r,this.Qe,this.ke,n);return this.ke=Vc(),this.qe=jU(),this.Qe=new gs(xn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new IU,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ba(xn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||pr("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new IU),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function jU(){return new gs(Sr.comparator)}function BU(){return new gs(Sr.comparator)}const Hge={asc:"ASCENDING",desc:"DESCENDING"},$ge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kge={and:"AND",or:"OR"};class Gge{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function eT(t,e){return t.useProto3Json||K2(e)?e:{value:e}}function sv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zY(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qge(t,e){return sv(t,e.toTimestamp())}function po(t){return Kr(!!t),Wr.fromTimestamp(function(r){const n=RA(r);return new dr(n.seconds,n.nanos)}(t))}function WO(t,e){return tT(t,e).canonicalString()}function tT(t,e){const r=function(a){return new Jn(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function WY(t){const e=Jn.fromString(t);return Kr(aJ(e)),e}function Vb(t,e){return WO(t.databaseId,e.path)}function wA(t,e){const r=WY(e);if(r.get(1)!==t.databaseId.projectId)throw new vr(Xt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new vr(Xt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Sr(JY(r))}function XY(t,e){return WO(t.databaseId,e)}function YY(t){const e=WY(t);return e.length===4?Jn.emptyPath():JY(e)}function rT(t){return new Jn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JY(t){return Kr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function PU(t,e,r){return{name:Vb(t,e),fields:r.value.mapValue.fields}}function zge(t,e,r){const n=wA(t,e.name),a=po(e.updateTime),s=e.createTime?po(e.createTime):Wr.min(),i=new Qo({mapValue:{fields:e.fields}}),l=fs.newFoundDocument(n,a,s,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Wge(t,e){return"found"in e?function(n,a){Kr(!!a.found),a.found.name,a.found.updateTime;const s=wA(n,a.found.name),i=po(a.found.updateTime),l=a.found.createTime?po(a.found.createTime):Wr.min(),c=new Qo({mapValue:{fields:a.found.fields}});return fs.newFoundDocument(s,i,l,c)}(t,e):"missing"in e?function(n,a){Kr(!!a.missing),Kr(!!a.readTime);const s=wA(n,a.missing),i=po(a.readTime);return fs.newNoDocument(s,i)}(t,e):Lr()}function Xge(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Lr()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Kr(d===void 0||typeof d=="string"),ui.fromBase64String(d||"")):(Kr(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ui.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(u){const d=u.code===void 0?Xt.UNKNOWN:KY(u.code);return new vr(d,u.message||"")}(i);r=new qY(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=wA(t,n.document.name),s=po(n.document.updateTime),i=n.document.createTime?po(n.document.createTime):Wr.min(),l=new Qo({mapValue:{fields:n.document.fields}}),c=fs.newFoundDocument(a,s,i,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new j_(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=wA(t,n.document),s=n.readTime?po(n.readTime):Wr.min(),i=fs.newNoDocument(a,s),l=n.removedTargetIds||[];r=new j_([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=wA(t,n.document),s=n.removedTargetIds||[];r=new j_([],s,a,null)}else{if(!("filter"in e))return Lr();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Lge(a,s),l=n.targetId;r=new GY(l,i)}}return r}function Hb(t,e){let r;if(e instanceof Pv)r={update:PU(t,e.key,e.value)};else if(e instanceof Tv)r={delete:Vb(t,e.key)};else if(e instanceof ZA)r={update:PU(t,e.key,e.data),updateMask:rxe(e.fieldMask)};else{if(!(e instanceof $O))return Lr();r={verify:Vb(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const l=i.transform;if(l instanceof Ub)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nv)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof av)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qb)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Lr()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:qge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Lr()}(t,e.precondition)),r}function nT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?hs.updateTime(po(s.updateTime)):s.exists!==void 0?hs.exists(s.exists):hs.none()}(e.currentDocument):hs.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(i,l){let c=null;if("setToServerValue"in l)Kr(l.setToServerValue==="REQUEST_TIME"),c=new Ub;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new nv(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new av(d)}else"increment"in l?c=new Qb(i,l.increment):Lr();const u=As.fromServerFormat(l.fieldPath);return new Fge(u,c)}(t,a)):[];if(e.update){e.update.name;const a=wA(t,e.update.name),s=new Qo({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(c){const u=c.fieldPaths||[];return new lc(u.map(d=>As.fromServerFormat(d)))}(e.updateMask);return new ZA(a,s,i,r,n)}return new Pv(a,s,r,n)}if(e.delete){const a=wA(t,e.delete);return new Tv(a,r)}if(e.verify){const a=wA(t,e.verify);return new $O(a,r)}return Lr()}function Yge(t,e){return t&&t.length>0?(Kr(e!==void 0),t.map(r=>function(a,s){let i=a.updateTime?po(a.updateTime):po(s);return i.isEqual(Wr.min())&&(i=po(s)),new Dge(i,a.transformResults||[])}(r,e))):[]}function ZY(t,e){return{documents:[XY(t,e.path)]}}function eJ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=XY(t,a);const s=function(u){if(u.length!==0)return nJ(wa.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Yg(h.field),direction:Zge(h.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=eT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function tJ(t){let e=YY(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Kr(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=rJ(f);return h instanceof wa&&VO(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(m){return new Lb(Jg(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(r.orderBy));let l=null;r.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,K2(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,A=f.values||[];return new tv(A,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,A=f.values||[];return new tv(A,h)}(r.endAt)),wge(e,a,i,s,l,"F",c,u)}function Jge(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lr()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function rJ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Jg(r.unaryFilter.field);return Mn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Jg(r.unaryFilter.field);return Mn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jg(r.unaryFilter.field);return Mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Jg(r.unaryFilter.field);return Mn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Lr()}}(t):t.fieldFilter!==void 0?function(r){return Mn.create(Jg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lr()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return wa.create(r.compositeFilter.filters.map(n=>rJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Lr()}}(r.compositeFilter.op))}(t):Lr()}function Zge(t){return Hge[t]}function exe(t){return $ge[t]}function txe(t){return Kge[t]}function Yg(t){return{fieldPath:t.canonicalString()}}function Jg(t){return As.fromServerFormat(t.fieldPath)}function nJ(t){return t instanceof Mn?function(r){if(r.op==="=="){if(hU(r.value))return{unaryFilter:{field:Yg(r.field),op:"IS_NAN"}};if(AU(r.value))return{unaryFilter:{field:Yg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(hU(r.value))return{unaryFilter:{field:Yg(r.field),op:"IS_NOT_NAN"}};if(AU(r.value))return{unaryFilter:{field:Yg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yg(r.field),op:exe(r.op),value:r.value}}}(t):t instanceof wa?function(r){const n=r.getFilters().map(a=>nJ(a));return n.length===1?n[0]:{compositeFilter:{op:txe(r.op),filters:n}}}(t):Lr()}function rxe(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function aJ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,r,n,a,s=Wr.min(),i=Wr.min(),l=ui.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new mA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new mA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ{constructor(e){this.ct=e}}function nxe(t,e){let r;if(e.document)r=zge(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Sr.fromSegments(e.noDocument.path),a=Ip(e.noDocument.readTime);r=fs.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Lr();{const n=Sr.fromSegments(e.unknownDocument.path),a=Ip(e.unknownDocument.version);r=fs.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new dr(a[0],a[1]);return Wr.fromTimestamp(s)}(e.readTime)),r}function TU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:BE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:Vb(s,i.key),fields:i.data.value.mapValue.fields,updateTime:sv(s,i.version.toTimestamp()),createTime:sv(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Sp(e.version)};else{if(!e.isUnknownDocument())return Lr();n.unknownDocument={path:r.path.toArray(),version:Sp(e.version)}}return n}function BE(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ip(t){const e=new dr(t.seconds,t.nanoseconds);return Wr.fromTimestamp(e)}function Dm(t,e){const r=(e.baseMutations||[]).map(s=>nT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>nT(t.ct,s)),a=dr.fromMillis(e.localWriteTimeMs);return new KO(e.batchId,a,r,n)}function cy(t){const e=Ip(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Ip(t.lastLimboFreeSnapshotVersion):Wr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Kr(s.documents.length===1),Uu(q2(YY(s.documents[0])))}(t.query):function(s){return Uu(tJ(s))}(t.query),new mA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ui.fromBase64String(t.resumeToken))}function iJ(t,e){const r=Sp(e.snapshotVersion),n=Sp(e.lastLimboFreeSnapshotVersion);let a;a=SE(e.target)?ZY(t.ct,e.target):eJ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ep(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function oJ(t){const e=tJ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jE(e,e.limit,"L"):e}function M5(t,e){return new qO(e.largestBatchId,nT(t.ct,e.overlayMutation))}function kU(t,e){const r=e.path.lastSegment();return[t,Ql(e.path.popLast()),r]}function FU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Sp(n.readTime),documentKey:Ql(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class axe{getBundleMetadata(e,r){return OU(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Ip(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return OU(e).put(function(a){return{bundleId:a.id,createTime:Sp(po(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return DU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:oJ(s.bundledQuery),readTime:Ip(s.readTime)}}(n)})}saveNamedQuery(e,r){return DU(e).put(function(a){return{name:a.name,readTime:Sp(po(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function OU(t){return Ki(t,"bundles")}function DU(t){return Ki(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new QI(e,n)}getOverlay(e,r){return E1(e).get(kU(this.userId,r)).next(n=>n?M5(this.serializer,n):null)}getOverlays(e,r){const n=pf();return Dt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,i)=>{const l=new qO(r,i);a.push(this.ht(e,l))}),Dt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(i=>a.add(Ql(i.getCollectionPath())));const s=[];return a.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(E1(e).j("collectionPathOverlayIndex",l))}),Dt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=pf(),s=Ql(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return E1(e).U("collectionPathOverlayIndex",i).next(l=>{for(const c of l){const u=M5(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=pf();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return E1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=M5(this.serializer,u);s.size()<a||f.largestBatchId===i?(s.set(f.getKey(),f),i=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return E1(e).put(function(a,s,i){const[l,c,u]=kU(s,i.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Hb(a.ct,i.mutation)}}(this.serializer,this.userId,r))}}function E1(t){return Ki(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{Pt(e){return Ki(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ui.fromUint8Array(n):ui.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(us(e.integerValue));else if("doubleValue"in e){const n=us(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Fb(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=RA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(D0(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?bY(e)?this.dt(r,Number.MAX_SAFE_INTEGER):DI(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Lr()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const i="value",l=((a=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(us(l)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),Sr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Rm.vt=new Rm;function ixe(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function RU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const i=ixe(255&n[s]);if(a+=i,i!==8)break}return a}(t);return Math.ceil(e/8)}class oxe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=RU(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=RU(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class lxe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class cxe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class S1{constructor(){this.jt=new oxe,this.Ht=new lxe(this.jt),this.Jt=new cxe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Mm(this.indexId,this.documentKey,this.arrayValue,n)}}function Bh(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=MU(t.arrayValue,e.arrayValue),r!==0?r:(r=MU(t.directionalValue,e.directionalValue),r!==0?r:Sr.comparator(t.documentKey,e.documentKey)))}function MU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e){this.Xt=new Ba((r,n)=>As.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Kr(e.collectionGroup===this.collectionId),this.nn)return!1;const r=GP(e);if(r!==void 0&&!this.sn(r))return!1;const n=Im(e);let a=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[i++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new Ba(As.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new C_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new C_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new C_(n.field,n.dir==="asc"?0:1)));return new EE(EE.UNKNOWN_ID,this.collectionId,r,kb.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(t){var e,r;if(Kr(t instanceof Mn||t instanceof wa),t instanceof Mn){if(t instanceof BY){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>Mn.create(t.field,"==",s)))||[];return wa.create(a,"or")}return t}const n=t.filters.map(a=>lJ(a));return wa.create(n,t.op)}function uxe(t){if(t.getFilters().length===0)return[];const e=iT(lJ(t));return Kr(cJ(e)),aT(e)||sT(e)?[e]:e.getFilters()}function aT(t){return t instanceof Mn}function sT(t){return t instanceof wa&&VO(t)}function cJ(t){return aT(t)||sT(t)||function(r){if(r instanceof wa&&XP(r)){for(const n of r.getFilters())if(!aT(n)&&!sT(n))return!1;return!0}return!1}(t)}function iT(t){if(Kr(t instanceof Mn||t instanceof wa),t instanceof Mn)return t;if(t.filters.length===1)return iT(t.filters[0]);const e=t.filters.map(n=>iT(n));let r=wa.create(e,t.op);return r=PE(r),cJ(r)?r:(Kr(r instanceof wa),Kr(rv(r)),Kr(r.filters.length>1),r.filters.reduce((n,a)=>XO(n,a)))}function XO(t,e){let r;return Kr(t instanceof Mn||t instanceof wa),Kr(e instanceof Mn||e instanceof wa),r=t instanceof Mn?e instanceof Mn?function(a,s){return wa.create([a,s],"and")}(t,e):UU(t,e):e instanceof Mn?UU(e,t):function(a,s){if(Kr(a.filters.length>0&&s.filters.length>0),rv(a)&&rv(s))return SY(a,s.getFilters());const i=XP(a)?a:s,l=XP(a)?s:a,c=i.filters.map(u=>XO(u,l));return wa.create(c,"or")}(t,e),PE(r)}function UU(t,e){if(rv(e))return SY(e,t.getFilters());{const r=e.filters.map(n=>XO(t,n));return wa.create(r,"or")}}function PE(t){if(Kr(t instanceof Mn||t instanceof wa),t instanceof Mn)return t;const e=t.getFilters();if(e.length===1)return PE(e[0]);if(_Y(t))return t;const r=e.map(a=>PE(a)),n=[];return r.forEach(a=>{a instanceof Mn?n.push(a):a instanceof wa&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:wa.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(){this.un=new YO}addToCollectionParentIndex(e,r){return this.un.add(r),Dt.resolve()}getCollectionParents(e,r){return Dt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Dt.resolve()}deleteFieldIndex(e,r){return Dt.resolve()}deleteAllFieldIndexes(e){return Dt.resolve()}createTargetIndexes(e,r){return Dt.resolve()}getDocumentsMatchingTarget(e,r){return Dt.resolve(null)}getIndexType(e,r){return Dt.resolve(0)}getFieldIndexes(e,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(e){return Dt.resolve(null)}getMinOffset(e,r){return Dt.resolve(zc.min())}getMinOffsetFromCollectionGroup(e,r){return Dt.resolve(zc.min())}updateCollectionGroup(e,r,n){return Dt.resolve()}updateIndexEntries(e,r){return Dt.resolve()}}class YO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ba(Jn.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ba(Jn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new Uint8Array(0);class fxe{constructor(e,r){this.databaseId=r,this.cn=new YO,this.ln=new rm(n=>Ep(n),(n,a)=>G2(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Ql(a)};return QU(e).put(s)}return Dt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[uY(r),""],!1,!0);return QU(e).U(a).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(mf(i.parent))}return n})}addFieldIndex(e,r){const n=I1(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const i=Cg(e);return s.next(l=>{i.put(FU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=I1(e),a=Cg(e),s=Ng(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=I1(e),n=Ng(e),a=Cg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return Dt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new LU(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Ng(e);let a=!0;const s=new Map;return Dt.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{a&&(a=!!l),s.set(i,l)})).next(()=>{if(a){let i=In();const l=[];return Dt.forEach(s,(c,u)=>{pr("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${Ep(r)}`);const d=function(b,w){const j=GP(w);if(j===void 0)return null;for(const I of IE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of Im(w))for(const _ of IE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of Im(w)){const E=_.kind===0?vU(b,_.fieldPath,b.startAt):yU(b,_.fieldPath,b.startAt);j.push(E.value),I&&(I=E.inclusive)}return new tv(j,I)}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of Im(w)){const E=_.kind===0?yU(b,_.fieldPath,b.endAt):vU(b,_.fieldPath,b.endAt);j.push(E.value),I&&(I=E.inclusive)}return new tv(j,I)}(u,c),m=this.In(c,u,h),p=this.In(c,u,A),g=this.Tn(c,u,f),x=this.En(c.indexId,d,m,h.inclusive,p,A.inclusive,g);return Dt.forEach(x,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=Sr.fromSegments(w.documentKey);i.has(j)||(i=i.add(j),l.push(j))})}))}).next(()=>l)}return Dt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=uxe(wa.create(e.filters,"and")).map(n=>JP(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,i,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const h=r?this.dn(r[f/u]):NN,A=this.An(e,h,n[f%u],a),m=this.Rn(e,h,s[f%u],i),p=l.map(g=>this.An(e,h,g,!0));d.push(...this.createRange(A,m,p))}return d}An(e,r,n,a){const s=new Mm(e,Sr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new Mm(e,Sr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new LU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let i=null;for(const l of s)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const a=this.hn(r);return Dt.forEach(a,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(c){let u=new Ba(As.comparator),d=!1;for(const f of c.filters)for(const h of f.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:u=u.add(h.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new S1;for(const a of Im(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const i=n.Yt(a.kind);Rm.vt.It(s,i)}return n.zt()}dn(e){const r=new S1;return Rm.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new S1;return Rm.vt.It(Rb(this.databaseId,r),n.Yt(function(s){const i=Im(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new S1);let s=0;for(const i of Im(e)){const l=n[s++];for(const c of a)if(this.fn(r,i.fieldPath)&&Mb(l))a=this.gn(a,i,l);else{const u=c.Yt(i.kind);Rm.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const i of n.arrayValue.values||[])for(const l of a){const c=new S1;c.seed(l.zt()),Rm.vt.It(i,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof Mn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=I1(e),a=Cg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return Dt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{i.push(function(d,f){const h=f?new kb(f.sequenceNumber,new zc(Ip(f.readTime),new Sr(mf(f.documentKey)),f.largestBatchId)):kb.empty(),A=d.fields.map(([m,p])=>new C_(As.fromServerFormat(m),p));return new EE(d.indexId,d.collectionGroup,A,h)}(l,c))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:xn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=I1(e),s=Cg(e);return this.yn(e).next(i=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>Dt.forEach(l,c=>s.put(FU(c.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return Dt.forEach(r,(a,s)=>{const i=n.get(a.collectionGroup);return(i?Dt.resolve(i):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),Dt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?Dt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return Ng(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Ng(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Ng(e);let s=new Ba(Bh);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{s=s.add(new Mm(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new Ba(Bh);const a=this.Vn(r,e);if(a==null)return n;const s=GP(r);if(s!=null){const i=e.data.field(s.fieldPath);if(Mb(i))for(const l of i.arrayValue.values||[])n=n.add(new Mm(r.indexId,e.key,this.dn(l),a))}else n=n.add(new Mm(r.indexId,e.key,NN,a));return n}bn(e,r,n,a,s){pr("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(c,u,d,f,h){const A=c.getIterator(),m=u.getIterator();let p=wg(A),g=wg(m);for(;p||g;){let x=!1,y=!1;if(p&&g){const b=d(p,g);b<0?y=!0:b>0&&(x=!0)}else p!=null?y=!0:x=!0;x?(f(g),g=wg(m)):y?(h(p),p=wg(A)):(p=wg(A),g=wg(m))}}(a,s,Bh,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),Dt.waitFor(i)}yn(e){let r=1;return Cg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>Bh(i,l)).filter((i,l,c)=>!l||Bh(i,c[l-1])!==0);const a=[];a.push(e);for(const i of n){const l=Bh(i,e),c=Bh(i,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(i),a.push(i.Zt());else if(c>0)break}a.push(r);const s=[];for(let i=0;i<a.length;i+=2){if(this.Cn(a[i],a[i+1]))return[];const l=[a[i].indexId,this.uid,a[i].arrayValue,a[i].directionalValue,NN,[]],c=[a[i+1].indexId,this.uid,a[i+1].arrayValue,a[i+1].directionalValue,NN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return Bh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(VU)}getMinOffset(e,r){return Dt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||Lr())).next(VU)}}function QU(t){return Ki(t,"collectionParents")}function Ng(t){return Ki(t,"indexEntries")}function I1(t){return Ki(t,"indexConfiguration")}function Cg(t){return Ki(t,"indexState")}function VU(t){Kr(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;RO(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new zc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new nc(e,nc.DEFAULT_COLLECTION_PERCENTILE,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:i},(d,f,h)=>(l++,h.delete()));s.push(c.next(()=>{Kr(l===1)}));const u=[];for(const d of r.mutations){const f=mY(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return Dt.waitFor(s).next(()=>u)}function TE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Lr();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nc.DEFAULT_COLLECTION_PERCENTILE=10,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nc.DEFAULT=new nc(41943040,nc.DEFAULT_COLLECTION_PERCENTILE,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nc.DISABLED=new nc(-1,0,0);class VI{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Kr(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new VI(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).J({index:"userMutationsIndex",range:n},(a,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Zg(e),i=Ph(e);return i.add({}).next(l=>{Kr(typeof l=="number");const c=new KO(l,r,n,a),u=function(A,m,p){const g=p.baseMutations.map(y=>Hb(A.ct,y)),x=p.mutations.map(y=>Hb(A.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:g,mutations:x}}(this.serializer,this.userId,c),d=[];let f=new Ba((h,A)=>xn(h.canonicalString(),A.canonicalString()));for(const h of a){const A=mY(this.userId,h.key.path,l);f=f.add(h.key.path.popLast()),d.push(i.put(u)),d.push(s.put(A,Gpe))}return f.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),Dt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return Ph(e).get(r).next(n=>n?(Kr(n.userId===this.userId),Dm(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?Dt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Ph(e).J({index:"userMutationsIndex",range:a},(i,l,c)=>{l.userId===this.userId&&(Kr(l.batchId>=n),s=Dm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ph(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ph(e).U("userMutationsIndex",r).next(n=>n.map(a=>Dm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=__(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Zg(e).J({range:a},(i,l,c)=>{const[u,d,f]=i,h=mf(d);if(u===this.userId&&r.path.isEqual(h))return Ph(e).get(f).next(A=>{if(!A)throw Lr();Kr(A.userId===this.userId),s.push(Dm(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ba(xn);const a=[];return r.forEach(s=>{const i=__(this.userId,s.path),l=IDBKeyRange.lowerBound(i),c=Zg(e).J({range:l},(u,d,f)=>{const[h,A,m]=u,p=mf(A);h===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),Dt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=__(this.userId,n),i=IDBKeyRange.lowerBound(s);let l=new Ba(xn);return Zg(e).J({range:i},(c,u,d)=>{const[f,h,A]=c,m=mf(h);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(A)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(Ph(e).get(s).next(i=>{if(i===null)throw Lr();Kr(i.userId===this.userId),n.push(Dm(this.serializer,i))}))}),Dt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return uJ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),Dt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Dt.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),a=[];return Zg(e).J({range:n},(s,i,l)=>{if(s[0]===this.userId){const c=mf(s[1]);a.push(c)}else l.done()}).next(()=>{Kr(a.length===0)})})}containsKey(e,r){return dJ(e,this.userId,r)}Nn(e){return fJ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dJ(t,e,r){const n=__(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Zg(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,h]=l;d===e&&f===a&&(i=!0),u.done()}).next(()=>i)}function Ph(t){return Ki(t,"mutations")}function Zg(t){return Ki(t,"documentMutations")}function fJ(t){return Ki(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jp(0)}static kn(){return new jp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new jp(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Wr.fromTimestamp(new dr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>_g(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Kr(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return _g(e).J((i,l)=>{const c=cy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>Dt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return _g(e).J((n,a)=>{const s=cy(a);r(s)})}qn(e){return $U(e).get("targetGlobalKey").next(r=>(Kr(r!==null),r))}Qn(e,r){return $U(e).put("targetGlobalKey",r)}Kn(e,r){return _g(e).put(iJ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Ep(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return _g(e).J({range:a,index:"queryTargetsIndex"},(i,l,c)=>{const u=cy(l);G2(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=t0(e);return r.forEach(i=>{const l=Ql(i.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,i))}),Dt.waitFor(a)}removeMatchingKeys(e,r,n){const a=t0(e);return Dt.forEach(r,s=>{const i=Ql(s.path);return Dt.waitFor([a.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=t0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=t0(e);let s=In();return a.J({range:n,H:!0},(i,l,c)=>{const u=mf(i[1]),d=new Sr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Ql(r.path),a=IDBKeyRange.bound([n],[uY(n)],!1,!0);let s=0;return t0(e).J({index:"documentTargetsIndex",H:!0,range:a},([i,l],c,u)=>{i!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return _g(e).get(r).next(n=>n?cy(n):null)}}function _g(t){return Ki(t,"targets")}function $U(t){return Ki(t,"targetGlobal")}function t0(t){return Ki(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU([t,e],[r,n]){const a=xn(t,r);return a===0?xn(e,n):a}class hxe{constructor(e){this.Un=e,this.buffer=new Ba(KU),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();KU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class mxe{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){pr("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){tm(r)?pr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Wp(r)}await this.Hn(3e5)})}}class pxe{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Dt.resolve(ku.oe);const n=new hxe(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(pr("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(HU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HU):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,i,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(pr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),Wg()<=Rn.DEBUG&&pr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(l-i)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function gxe(t,e){return new pxe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(e,r){this.db=e,this.garbageCollector=gxe(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return CN(e,n)}removeReference(e,r,n){return CN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return CN(e,r)}nr(e,r){return function(a,s){let i=!1;return fJ(a).Y(l=>dJ(a,l,s).next(c=>(c&&(i=!0),Dt.resolve(!c)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(i,l)=>{if(l<=r){const c=this.nr(e,i).next(u=>{if(!u)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Wr.min()),t0(e).delete(function(f){return[0,Ql(f.path)]}(i))))});a.push(c)}}).next(()=>Dt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return CN(e,r)}tr(e,r){const n=t0(e);let a,s=ku.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:c,sequenceNumber:u})=>{i===0?(s!==ku.oe&&r(new Sr(mf(a)),s),s=u,a=c):s=ku.oe}).next(()=>{s!==ku.oe&&r(new Sr(mf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function CN(t,e){return t0(t).put(function(n,a){return{targetId:0,path:Ql(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(){this.changes=new rm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,fs.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vxe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return pm(e).put(n)}removeEntry(e,r,n){return pm(e).delete(function(s,i){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],BE(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=fs.newInvalidDocument(r);return pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(j1(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:fs.newInvalidDocument(r)};return pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(j1(r))},(a,s)=>{n={document:this.ir(r,s),size:TE(s)}}).next(()=>n)}getEntries(e,r){let n=Vc();return this._r(e,r,(a,s)=>{const i=this.ir(a,s);n=n.insert(a,i)}).next(()=>n)}ar(e,r){let n=Vc(),a=new gs(Sr.comparator);return this._r(e,r,(s,i)=>{const l=this.ir(s,i);n=n.insert(s,l),a=a.insert(s,TE(i))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return Dt.resolve();let a=new Ba(zU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(j1(a.first()),j1(a.last())),i=a.getIterator();let l=i.getNext();return pm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=Sr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&zU(l,f)<0;)n(l,null),l=i.getNext();l&&l.isEqual(f)&&(n(l,u),l=i.hasNext()?i.getNext():null),l?d.$(j1(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),BE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Vc();for(const f of u){const h=this.ir(Sr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);h.isFoundDocument()&&(z2(r,h)||a.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Vc();const i=qU(r,n),l=qU(r,zc.max());return pm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(c,u,d)=>{const f=this.ir(Sr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new yxe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return GU(e).get("remoteDocumentGlobalKey").next(r=>(Kr(!!r),r))}rr(e,r){return GU(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=nxe(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Wr.min())))return n}return fs.newInvalidDocument(e)}}function hJ(t){return new vxe(t)}class yxe extends AJ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new rm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ba((s,i)=>xn(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),i.isValidDocument()){const c=TU(this.cr.serializer,i);a=a.add(s.path.popLast());const u=TE(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=TU(this.cr.serializer,i.convertToNoDocument(Wr.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),Dt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function GU(t){return Ki(t,"remoteDocumentGlobal")}function pm(t){return Ki(t,"remoteDocumentsV14")}function j1(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qU(t,e){const r=e.documentKey.path.toArray();return[t,BE(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function zU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=xn(r[s],n[s]),a)return a;return a=xn(r.length,n.length),a||(a=xn(r[r.length-2],n[n.length-2]),a||xn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Uy(n.mutation,a,lc.empty(),dr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,In()).next(()=>n))}getLocalViewOfDocuments(e,r,n=In()){const a=pf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let i=oy();return s.forEach((l,c)=>{i=i.insert(l,c.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=pf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,In()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,a){let s=Vc();const i=Ly(),l=function(){return Ly()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof ZA)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Uy(d.mutation,u,d.mutation.getFieldMask(),dr.now())):i.set(u.key,lc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new bxe(d,(f=i.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Ly();let a=new gs((i,l)=>i-l),s=In();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||lc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||In()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const i=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=DY();d.forEach(h=>{if(!s.has(h)){const A=VY(r.get(h),n.get(h));A!==null&&f.set(h,A),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(i){return Sr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):PY(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):Dt.resolve(pf());let l=-1,c=s;return i.next(u=>Dt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,In())).next(d=>({batchId:l,changes:OY(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Sr(r)).next(n=>{let a=oy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let i=oy();return this.indexManager.getCollectionParents(e,s).next(l=>Dt.forEach(l,c=>{const u=function(f,h){return new Bv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,fs.newInvalidDocument(d)))});let l=oy();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Uy(d.mutation,u,lc.empty(),dr.now()),z2(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wxe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Dt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:po(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(e,r){return Dt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:oJ(a.bundledQuery),readTime:po(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{constructor(){this.overlays=new gs(Sr.comparator),this.Ir=new Map}getOverlay(e,r){return Dt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=pf();return Dt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),Dt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Dt.resolve()}getOverlaysForCollection(e,r,n){const a=pf(),s=r.length+1,i=new Sr(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new gs((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=pf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=pf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return Dt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new qO(r,n));let s=this.Ir.get(r);s===void 0&&(s=In(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(){this.sessionToken=ui.EMPTY_BYTE_STRING}getSessionToken(e){return Dt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this.Tr=new Ba(oo.Er),this.dr=new Ba(oo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new oo(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new oo(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Sr(new Jn([])),n=new oo(r,e),a=new oo(r,e+1),s=[];return this.dr.forEachInRange([n,a],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Sr(new Jn([])),n=new oo(r,e),a=new oo(r,e+1);let s=In();return this.dr.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new oo(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class oo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Sr.comparator(e.key,r.key)||xn(e.wr,r.wr)}static Ar(e,r){return xn(e.wr,r.wr)||Sr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _xe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ba(oo.Er)}checkEmpty(e){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new KO(s,r,n,a);this.mutationQueue.push(i);for(const l of a)this.br=this.br.add(new oo(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(e,r){return Dt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new oo(r,0),a=new oo(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],i=>{const l=this.Dr(i.wr);s.push(l)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ba(xn);return r.forEach(a=>{const s=new oo(a,0),i=new oo(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],l=>{n=n.add(l.wr)})}),Dt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Sr.isDocumentKey(s)||(s=s.child(""));const i=new oo(new Sr(s),0);let l=new Ba(xn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},i),Dt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Kr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Dt.forEach(r.mutations,a=>{const s=new oo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new oo(r,0),a=this.br.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exe{constructor(e){this.Mr=e,this.docs=function(){return new gs(Sr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():fs.newInvalidDocument(r))}getEntries(e,r){let n=Vc();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():fs.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Vc();const i=r.path,l=new Sr(i.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||RO(dY(d),n)<=0||(a.has(d.key)||z2(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Lr()}Or(e,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Sxe(this)}getSize(e){return Dt.resolve(this.size)}}class Sxe extends AJ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(e){this.persistence=e,this.Nr=new rm(r=>Ep(r),G2),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new JO,this.targetCount=0,this.kr=jp.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(e){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Dt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new jp(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Dt.resolve()}updateTargetData(e,r){return this.Kn(r),Dt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(e){return Dt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Dt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Dt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(e,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Dt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Dt.resolve(n)}containsKey(e,r){return Dt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ku(0),this.Kr=!1,this.Kr=!0,this.$r=new Cxe,this.referenceDelegate=e(this),this.Ur=new Ixe(this),this.indexManager=new dxe,this.remoteDocumentCache=function(a){return new Exe(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new sJ(r),this.Gr=new wxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Nxe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new _xe(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){pr("MemoryPersistence","Starting transaction:",e);const a=new jxe(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return Dt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class jxe extends AY{constructor(e){super(),this.currentSequenceNumber=e}}class HI{constructor(e){this.persistence=e,this.Jr=new JO,this.Yr=null}static Zr(e){return new HI(e)}get Xr(){if(this.Yr)return this.Yr;throw Lr()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Dt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Dt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.Xr,n=>{const a=Sr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,Wr.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Dt.or([()=>Dt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bxe{constructor(e){this.serializer=e}O(e,r,n,a){const s=new OI("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lU,{unique:!0}),c.createObjectStore("documentMutations")}(e),WU(e),function(c){c.createObjectStore("remoteDocuments")}(e));let i=Dt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),WU(e)),i=i.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wr.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(i=i.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lU,{unique:!0});const f=u.store("mutations"),h=d.map(A=>f.put(A));return Dt.waitFor(h)})}(e,s))),i=i.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(i=i.next(()=>this.ni(s))),n<6&&a>=6&&(i=i.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(i=i.next(()=>this.ii(s))),n<8&&a>=8&&(i=i.next(()=>this.si(e,s))),n<9&&a>=9&&(i=i.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(i=i.next(()=>this.oi(s))),n<11&&a>=11&&(i=i.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(i=i.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:age});u.createIndex("collectionPathOverlayIndex",sge,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",ige,{unique:!1})})(e)})),n<13&&a>=13&&(i=i.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:qpe});u.createIndex("documentKeyIndex",zpe),u.createIndex("collectionGroupIndex",Wpe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&a>=15&&(i=i.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:ege}).createIndex("sequenceNumberIndex",tge,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:rge}).createIndex("documentKeyIndex",nge,{unique:!1})}(e))),n<16&&a>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(i=i.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=TE(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>Dt.forEach(a,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>Dt.forEach(l,c=>{Kr(c.userId===s.userId);const u=Dm(this.serializer,c);return uJ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((i,l)=>{const c=new Jn(i),u=function(f){return[0,Ql(f)]}(c);s.push(r.get(u).next(d=>d?Dt.resolve():(f=>r.put({targetId:0,path:Ql(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>Dt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Zpe});const n=r.store("collectionParents"),a=new YO,s=i=>{if(a.add(i)){const l=i.lastSegment(),c=i.popLast();return n.put({collectionId:l,parent:Ql(c)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const c=new Jn(i);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,c],u)=>{const d=mf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=cy(a),i=iJ(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,i)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new Sr(Jn.fromString(f.document.name).popFirst(5)):f.noDocument?Sr.fromSegments(f.noDocument.path):f.unknownDocument?Sr.fromSegments(f.unknownDocument.path):Lr()}(i).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};a.push(l.put(u))}).next(()=>Dt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=hJ(this.serializer),s=new pJ(HI.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:In();Dm(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),Dt.forEach(l,(c,u)=>{const d=new Do(u),f=QI.lt(this.serializer,d),h=s.getIndexManager(d),A=VI.lt(d,this.serializer,h,s.referenceDelegate);return new mJ(a,A,f,h).recalculateAndSaveOverlaysForDocumentKeys(new qP(r,ku.oe),c).next()})})}}function WU(t){t.createObjectStore("targetDocuments",{keyPath:Ype}).createIndex("documentTargetsIndex",Jpe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xpe,{unique:!0}),t.createObjectStore("targetGlobal")}const L5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ZO{constructor(e,r,n,a,s,i,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!ZO.D())throw new vr(Xt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xxe(this,a),this.Ai=r+"main",this.serializer=new sJ(c),this.Ri=new E0(this.Ai,this.hi,new Bxe(this.serializer)),this.$r=new sxe,this.Ur=new Axe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hJ(this.serializer),this.Gr=new axe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vr(Xt.FAILED_PRECONDITION,L5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ku(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_N(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(tm(e))return pr("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return B1(e).get("owner").next(r=>Dt.resolve(this.vi(r)))}Ci(e){return _N(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Ki(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),i=a.filter(l=>s.indexOf(l)===-1);return Dt.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Dt.resolve(!0):B1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new vr(Xt.FAILED_PRECONDITION,L5);return!1}}return!(!this.networkEnabled||!this.inForeground)||_N(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,i=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&pr("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new qP(e,ku.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_N(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return VI.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fxe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return QI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){pr("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?cge:c===16?lge:c===15?LO:c===14?xY:c===13?gY:c===12?oge:c===11?pY:void Lr()}(this.hi);let i;return this.Ri.runTransaction(e,a,s,l=>(i=new qP(l,this.Qr?this.Qr.next():ku.oe),r==="readwrite-primary"?this.wi(i).next(c=>!!c||this.Si(i)).next(c=>{if(!c)throw Ml(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new vr(Xt.FAILED_PRECONDITION,fY);return n(i)}).next(c=>this.Di(i).next(()=>c)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return B1(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new vr(Xt.FAILED_PRECONDITION,L5)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return B1(e).put("owner",r)}static D(){return E0.D()}bi(e){const r=B1(e);return r.get("owner").next(n=>this.vi(n)?(pr("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Dt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Ml(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;mX()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return pr("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ml("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ml("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function B1(t){return Ki(t,"owner")}function _N(t){return Ki(t,"clientMetadata")}function Pxe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=In(),a=In();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new e6(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mX()?8:hY(Hi())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new Txe;return this.Xi(e,r,i).next(l=>{if(s.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(Wg()<=Rn.DEBUG&&pr("QueryEngine","SDK will not create cache indexes for query:",Xg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Dt.resolve()):(Wg()<=Rn.DEBUG&&pr("QueryEngine","Query:",Xg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(Wg()<=Rn.DEBUG&&pr("QueryEngine","The SDK decides to create cache indexes for query:",Xg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uu(r))):Dt.resolve())}Yi(e,r){if(bU(r))return Dt.resolve(null);let n=Uu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=jE(r,null,"F"),n=Uu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=In(...s);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,i,c.readTime)?this.Yi(e,jE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return bU(r)||a.isEqual(Wr.min())?Dt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,a)?Dt.resolve(null):(Wg()<=Rn.DEBUG&&pr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Xg(r)),this.rs(e,i,r,Lpe(a,-1)).next(l=>l))})}ts(e,r){let n=new Ba(kY(e));return r.forEach((a,s)=>{z2(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return Wg()<=Rn.DEBUG&&pr("QueryEngine","Using full collection scan to execute query:",Xg(r)),this.Ji.getDocumentsMatchingQuery(e,r,zc.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kxe{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new gs(xn),this._s=new rm(s=>Ep(s),G2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mJ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function xJ(t,e,r,n){return new kxe(t,e,r,n)}async function vJ(t,e){const r=An(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],l=[];let c=In();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:i,addedBatchIds:l}))})})}function Fxe(t,e){const r=An(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let A=Dt.resolve();return h.forEach(m=>{A=A.next(()=>d.getEntry(c,m)).next(p=>{const g=u.docVersions.get(m);Kr(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=In();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function yJ(t){const e=An(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Oxe(t,e){const r=An(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let A=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?A=A.withResumeToken(ui.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,n)),a=a.insert(f,A),function(p,g,x){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,A,d)&&l.push(r.Ur.updateTargetData(s,A))});let c=Vc(),u=In();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Dxe(s,i,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(Wr.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return Dt.waitFor(l).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function Dxe(t,e,r){let n=In(),a=In();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=Vc();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Wr.min())?(e.removeEntry(l,c.readTime),i=i.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(l,c)):pr("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:i,Is:a}})}function Rxe(t,e){const r=An(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Mxe(t,e){const r=An(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,Dt.resolve(a)):r.Ur.allocateTargetId(n).next(i=>(a=new mA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function oT(t,e,r){const n=An(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!tm(i))throw i;pr("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function XU(t,e,r){const n=An(t);let a=Wr.min(),s=In();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=An(c),h=f._s.get(d);return h!==void 0?Dt.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(n,i,Uu(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?a:Wr.min(),r?s:In())).next(l=>(Lxe(n,Cge(e),l),{documents:l,Ts:s})))}function Lxe(t,e,r){let n=t.us.get(e)||Wr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class YU{constructor(){this.activeTargetIds=Bge()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bJ{constructor(){this.so=new YU,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new YU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uxe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EN=null;function U5(){return EN===null?EN=function(){return 268435456+Math.round(2147483648*Math.random())}():EN++,"0x"+EN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vxe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class Hxe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,i){const l=U5(),c=this.xo(r,n.toUriEncodedString());pr("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,i),this.No(r,c,u,a).then(d=>(pr("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw O0("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,i,l){return this.Mo(r,n,a,s,i)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),a&&a.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const a=Qxe[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=U5();return new Promise((i,l)=>{const c=new nY;c.setWithCredentials(!0),c.listenOnce(aY.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case N_.NO_ERROR:const d=c.getResponseJson();pr(Zo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case N_.TIMEOUT:pr(Zo,`RPC '${e}' ${s} timed out`),l(new vr(Xt.DEADLINE_EXCEEDED,"Request time out"));break;case N_.HTTP_ERROR:const f=c.getStatus();if(pr(Zo,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const A=h==null?void 0:h.error;if(A&&A.status&&A.message){const m=function(g){const x=g.toLowerCase().replace(/_/g,"-");return Object.values(Xt).indexOf(x)>=0?x:Xt.UNKNOWN}(A.status);l(new vr(m,A.message))}else l(new vr(Xt.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new vr(Xt.UNAVAILABLE,"Connection failed."));break;default:Lr()}}finally{pr(Zo,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);pr(Zo,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=U5(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=oY(),l=iY(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");pr(Zo,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);let h=!1,A=!1;const m=new Vxe({Io:g=>{A?pr(Zo,`Not sending because RPC '${e}' stream ${a} is closed:`,g):(h||(pr(Zo,`Opening RPC '${e}' stream ${a} transport.`),f.open(),h=!0),pr(Zo,`RPC '${e}' stream ${a} sending:`,g),f.send(g))},To:()=>f.close()}),p=(g,x,y)=>{g.listen(x,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,iy.EventType.OPEN,()=>{A||(pr(Zo,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,iy.EventType.CLOSE,()=>{A||(A=!0,pr(Zo,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,iy.EventType.ERROR,g=>{A||(A=!0,O0(Zo,`RPC '${e}' stream ${a} transport errored:`,g),m.So(new vr(Xt.UNAVAILABLE,"The operation could not be completed")))}),p(f,iy.EventType.MESSAGE,g=>{var x;if(!A){const y=g.data[0];Kr(!!y);const b=y,w=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(w){pr(Zo,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(S){const O=Ai[S];if(O!==void 0)return KY(O)}(j),_=w.message;I===void 0&&(I=Xt.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),A=!0,m.So(new vr(I,_)),f.close()}else pr(Zo,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,sY.STAT_EVENT,g=>{g.stat===KP.PROXY?pr(Zo,`RPC '${e}' stream ${a} detected buffering proxy`):g.stat===KP.NOPROXY&&pr(Zo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $xe(){return typeof window<"u"?window:null}function B_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){return new Gge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&pr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(e,r,n,a,s,i,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t6(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Xt.RESOURCE_EXHAUSTED?(Ml(r.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Xt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new vr(Xt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(pr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kxe extends wJ{constructor(e,r,n,a,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Xge(this.serializer,e),n=function(s){if(!("targetChange"in s))return Wr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Wr.min():i.readTime?po(i.readTime):Wr.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=rT(this.serializer),r.addTarget=function(s,i){let l;const c=i.target;if(l=SE(c)?{documents:ZY(s,c)}:{query:eJ(s,c)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=zY(s,i.resumeToken);const u=eT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}else if(i.snapshotVersion.compareTo(Wr.min())>0){l.readTime=sv(s,i.snapshotVersion.toTimestamp());const u=eT(s,i.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Jge(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=rT(this.serializer),r.removeTarget=e,this.a_(r)}}class Gxe extends wJ{constructor(e,r,n,a,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Kr(!!e.streamToken),this.lastStreamToken=e.streamToken,Kr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Kr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Yge(e.writeResults,e.commitTime),n=po(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=rT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Hb(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qxe extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new vr(Xt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,tT(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vr(Xt.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,tT(r,n),a,i,l,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Xt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new vr(Xt.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zxe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ml(r),this.D_=!1):pr("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wxe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{Yp(this)&&(pr("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=An(c);u.L_.add(4),await X2(u),u.q_.set("Unknown"),u.L_.delete(4),await KI(u)}(this))})}),this.q_=new zxe(n,a)}}async function KI(t){if(Yp(t))for(const e of t.B_)await e(!0)}async function X2(t){for(const e of t.B_)await e(!1)}function NJ(t,e){const r=An(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),s6(r)?a6(r):kv(r).r_()&&n6(r,e))}function r6(t,e){const r=An(t),n=kv(r);r.N_.delete(e),n.r_()&&CJ(r,e),r.N_.size===0&&(n.r_()?n.o_():Yp(r)&&r.q_.set("Unknown"))}function n6(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Wr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}kv(t).A_(e)}function CJ(t,e){t.Q_.xe(e),kv(t).R_(e)}function a6(t){t.Q_=new Vge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kv(t).start(),t.q_.v_()}function s6(t){return Yp(t)&&!kv(t).n_()&&t.N_.size>0}function Yp(t){return An(t).L_.size===0}function _J(t){t.Q_=void 0}async function Xxe(t){t.q_.set("Online")}async function Yxe(t){t.N_.forEach((e,r)=>{n6(t,e)})}async function Jxe(t,e){_J(t),s6(t)?(t.q_.M_(e),a6(t)):t.q_.set("Unknown")}async function Zxe(t,e,r){if(t.q_.set("Online"),e instanceof qY&&e.state===2&&e.cause)try{await async function(a,s){const i=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,i),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){pr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await kE(t,n)}else if(e instanceof j_?t.Q_.Ke(e):e instanceof GY?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Wr.min()))try{const n=await yJ(t.localStore);r.compareTo(n)>=0&&await function(s,i){const l=s.Q_.rt(i);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,i))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ui.EMPTY_BYTE_STRING,d.snapshotVersion)),CJ(s,c);const f=new mA(d.target,c,u,d.sequenceNumber);n6(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){pr("RemoteStore","Failed to raise snapshot:",n),await kE(t,n)}}async function kE(t,e,r){if(!tm(e))throw e;t.L_.add(1),await X2(t),t.q_.set("Offline"),r||(r=()=>yJ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pr("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await KI(t)})}function EJ(t,e){return e().catch(r=>kE(t,r,e))}async function Y2(t){const e=An(t),r=L0(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eve(e);)try{const a=await Rxe(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,tve(e,a)}catch(a){await kE(e,a)}SJ(e)&&IJ(e)}function eve(t){return Yp(t)&&t.O_.length<10}function tve(t,e){t.O_.push(e);const r=L0(t);r.r_()&&r.V_&&r.m_(e.mutations)}function SJ(t){return Yp(t)&&!L0(t).n_()&&t.O_.length>0}function IJ(t){L0(t).start()}async function rve(t){L0(t).p_()}async function nve(t){const e=L0(t);for(const r of t.O_)e.m_(r.mutations)}async function ave(t,e,r){const n=t.O_.shift(),a=GO.from(n,e,r);await EJ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Y2(t)}async function sve(t,e){e&&L0(t).V_&&await async function(n,a){if(function(i){return $Y(i)&&i!==Xt.ABORTED}(a.code)){const s=n.O_.shift();L0(n).s_(),await EJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Y2(n)}}(t,e),SJ(t)&&IJ(t)}async function ZU(t,e){const r=An(t);r.asyncQueue.verifyOperationInProgress(),pr("RemoteStore","RemoteStore received new credentials");const n=Yp(r);r.L_.add(3),await X2(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await KI(r)}async function ive(t,e){const r=An(t);e?(r.L_.delete(2),await KI(r)):e||(r.L_.add(2),await X2(r),r.q_.set("Unknown"))}function kv(t){return t.K_||(t.K_=function(r,n,a){const s=An(r);return s.w_(),new Kxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:Xxe.bind(null,t),Ro:Yxe.bind(null,t),mo:Jxe.bind(null,t),d_:Zxe.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),s6(t)?a6(t):t.q_.set("Unknown")):(await t.K_.stop(),_J(t))})),t.K_}function L0(t){return t.U_||(t.U_=function(r,n,a){const s=An(r);return s.w_(),new Gxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rve.bind(null,t),mo:sve.bind(null,t),f_:nve.bind(null,t),g_:ave.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Y2(t)):(await t.U_.stop(),t.O_.length>0&&(pr("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Id,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const i=Date.now()+n,l=new i6(e,r,i,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vr(Xt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o6(t,e){if(Ml("AsyncQueue",`${e}: ${t}`),tm(t))return new vr(Xt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Sr.comparator(r.key,n.key):(r,n)=>Sr.comparator(r.key,n.key),this.keyedMap=oy(),this.sortedSet=new gs(this.comparator)}static emptySet(e){return new Dx(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Dx)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Dx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.W_=new gs(Sr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Lr():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class iv{constructor(e,r,n,a,s,i,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new iv(e,r,Dx.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&RI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ove{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class lve{constructor(){this.queries=t7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=An(r),s=a.queries;a.queries=t7(),s.forEach((i,l)=>{for(const c of l.j_)c.onError(n)})})(this,new vr(Xt.ABORTED,"Firestore shutting down"))}}function t7(){return new rm(t=>TY(t),RI)}async function l6(t,e){const r=An(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new ove,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const l=o6(i,`Initialization of query '${Xg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&u6(r)}async function c6(t,e){const r=An(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function cve(t,e){const r=An(t);let n=!1;for(const a of e){const s=a.query,i=r.queries.get(s);if(i){for(const l of i.j_)l.X_(a)&&(n=!0);i.z_=a}}n&&u6(r)}function uve(t,e,r){const n=An(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function u6(t){t.Y_.forEach(e=>{e.next()})}var lT,r7;(r7=lT||(lT={})).ea="default",r7.Cache="cache";class d6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new iv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=iv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==lT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e){this.key=e}}class BJ{constructor(e){this.key=e}}class dve{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=In(),this.mutatedKeys=In(),this.Aa=kY(e),this.Ra=new Dx(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new e7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const h=a.get(d),A=z2(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),p=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let g=!1;h&&A?h.data.isEqual(A.data)?m!==p&&(n.track({type:3,doc:A}),g=!0):this.ga(h,A)||(n.track({type:2,doc:A}),g=!0,(c&&this.Aa(A,c)>0||u&&this.Aa(A,u)<0)&&(l=!0)):!h&&A?(n.track({type:0,doc:A}),g=!0):h&&!A&&(n.track({type:1,doc:h}),g=!0,(c||u)&&(l=!0)),g&&(A?(i=i.add(A),s=p?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,f)=>function(A,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lr()}};return p(A)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,i.length!==0||u?{snapshot:new iv(this.query,e.Ra,s,i,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new e7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=In(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new BJ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new jJ(n))}),r}ba(e){this.Ta=e.Ts,this.da=In();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return iv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fve{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Ave{constructor(e){this.key=e,this.va=!1}}class hve{constructor(e,r,n,a,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new rm(l=>TY(l),RI),this.Ma=new Map,this.xa=new Set,this.Oa=new gs(Sr.comparator),this.Na=new Map,this.La=new JO,this.Ba={},this.ka=new Map,this.qa=jp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function mve(t,e,r=!0){const n=DJ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await PJ(n,e,r,!0),a}async function pve(t,e){const r=DJ(t);await PJ(r,e,!0,!1)}async function PJ(t,e,r,n){const a=await Mxe(t.localStore,Uu(e)),s=a.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await gve(t,e,s,i==="current",a.resumeToken)),t.isPrimaryClient&&r&&NJ(t.remoteStore,a),l}async function gve(t,e,r,n,a){t.Ka=(f,h,A)=>async function(p,g,x,y){let b=g.view.ma(x);b.ns&&(b=await XU(p.localStore,g.query,!1).then(({documents:_})=>g.view.ma(_,b)));const w=y&&y.targetChanges.get(g.targetId),j=y&&y.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(b,p.isPrimaryClient,w,j);return a7(p,g.targetId,I.wa),I.snapshot}(t,f,h,A);const s=await XU(t.localStore,e,!0),i=new dve(e,s.Ts),l=i.ma(s.documents),c=W2.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=i.applyChanges(l,t.isPrimaryClient,c);a7(t,r,u.wa);const d=new fve(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function xve(t,e,r){const n=An(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(i=>!RI(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await oT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&r6(n.remoteStore,a.targetId),cT(n,a.targetId)}).catch(Wp)):(cT(n,a.targetId),await oT(n.localStore,a.targetId,!0))}async function vve(t,e){const r=An(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),r6(r.remoteStore,n.targetId))}async function yve(t,e,r){const n=RJ(t);try{const a=await function(i,l){const c=An(i),u=dr.now(),d=l.reduce((A,m)=>A.add(m.key),In());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let m=Vc(),p=In();return c.cs.getEntries(A,d).next(g=>{m=g,m.forEach((x,y)=>{y.isValidDocument()||(p=p.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,m)).next(g=>{f=g;const x=[];for(const y of l){const b=Mge(y,f.get(y.key).overlayedDocument);b!=null&&x.push(new ZA(y.key,b,NY(b.value.mapValue),hs.exists(!0)))}return c.mutationQueue.addMutationBatch(A,u,x,l)}).next(g=>{h=g;const x=g.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(A,g.batchId,x)})}).then(()=>({batchId:h.batchId,changes:OY(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(i,l,c){let u=i.Ba[i.currentUser.toKey()];u||(u=new gs(xn)),u=u.insert(l,c),i.Ba[i.currentUser.toKey()]=u}(n,a.batchId,r),await J2(n,a.changes),await Y2(n.remoteStore)}catch(a){const s=o6(a,"Failed to persist write");r.reject(s)}}async function TJ(t,e){const r=An(t);try{const n=await Oxe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const i=r.Na.get(s);i&&(Kr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?i.va=!0:a.modifiedDocuments.size>0?Kr(i.va):a.removedDocuments.size>0&&(Kr(i.va),i.va=!1))}),await J2(r,n,e)}catch(n){await Wp(n)}}function n7(t,e,r){const n=An(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,i)=>{const l=i.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(i,l){const c=An(i);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&u6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function bve(t,e,r){const n=An(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let i=new gs(Sr.comparator);i=i.insert(s,fs.newNoDocument(s,Wr.min()));const l=In().add(s),c=new UI(Wr.min(),new Map,new gs(xn),i,l);await TJ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),f6(n)}else await oT(n.localStore,e,!1).then(()=>cT(n,e,r)).catch(Wp)}async function wve(t,e){const r=An(t),n=e.batch.batchId;try{const a=await Fxe(r.localStore,e);FJ(r,n,null),kJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await J2(r,a)}catch(a){await Wp(a)}}async function Nve(t,e,r){const n=An(t);try{const a=await function(i,l){const c=An(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Kr(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);FJ(n,e,r),kJ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await J2(n,a)}catch(a){await Wp(a)}}function kJ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function FJ(t,e,r){const n=An(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function cT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||OJ(t,n)})}function OJ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(r6(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),f6(t))}function a7(t,e,r){for(const n of r)n instanceof jJ?(t.La.addReference(n.key,e),Cve(t,n)):n instanceof BJ?(pr("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||OJ(t,n.key)):Lr()}function Cve(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(pr("SyncEngine","New document in limbo: "+r),t.xa.add(n),f6(t))}function f6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Sr(Jn.fromString(e)),n=t.qa.next();t.Na.set(n,new Ave(r)),t.Oa=t.Oa.insert(r,n),NJ(t.remoteStore,new mA(Uu(q2(r.path)),n,"TargetPurposeLimboResolution",ku.oe))}}async function J2(t,e,r){const n=An(t),a=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{i.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=e6.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Ca.d_(a),await async function(c,u){const d=An(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.$i,A=>d.persistence.referenceDelegate.addReference(f,h.targetId,A)).next(()=>Dt.forEach(h.Ui,A=>d.persistence.referenceDelegate.removeReference(f,h.targetId,A)))))}catch(f){if(!tm(f))throw f;pr("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const A=d.os.get(h),m=A.snapshotVersion,p=A.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,p)}}}(n.localStore,s))}async function _ve(t,e){const r=An(t);if(!r.currentUser.isEqual(e)){pr("SyncEngine","User change. New user:",e.toKey());const n=await vJ(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new vr(Xt.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await J2(r,n.hs)}}function Eve(t,e){const r=An(t),n=r.Na.get(e);if(n&&n.va)return In().add(n.key);{let a=In();const s=r.Ma.get(e);if(!s)return a;for(const i of s){const l=r.Fa.get(i);a=a.unionWith(l.view.Va)}return a}}function DJ(t){const e=An(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TJ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bve.bind(null,e),e.Ca.d_=cve.bind(null,e.eventManager),e.Ca.$a=uve.bind(null,e.eventManager),e}function RJ(t){const e=An(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nve.bind(null,e),e}class $b{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$I(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xJ(this.persistence,new gJ,e.initialUser,this.serializer)}Ga(e){return new pJ(HI.Zr,this.serializer)}Wa(e){return new bJ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$b.provider={build:()=>new $b};class Sve extends $b{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await RJ(this.Ja.syncEngine),await Y2(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return xJ(this.persistence,new gJ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new mxe(n,e.asyncQueue,r)}Ha(e,r){const n=new Hpe(r,this.persistence);return new Vpe(e.asyncQueue,n)}Ga(e){const r=Pxe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?nc.withCacheSize(this.cacheSizeBytes):nc.DEFAULT;return new ZO(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,$xe(),B_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bJ}}class FE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>n7(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=_ve.bind(null,this.syncEngine),await ive(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lve}()}createDatastore(e){const r=$I(e.databaseInfo.databaseId),n=function(s){return new Hxe(s)}(e.databaseInfo);return function(s,i,l,c){return new qxe(s,i,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,i,l){return new Wxe(n,a,s,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>n7(this.syncEngine,r,0),function(){return JU.D()?new JU:new Uxe}())}createSyncEngine(e,r){return function(a,s,i,l,c,u,d){const f=new hve(a,s,i,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=An(a);pr("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await X2(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}FE.provider={build:()=>new FE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ml("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ive{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new vr(Xt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const i=An(a),l={documents:s.map(f=>Vb(i.serializer,f))},c=await i.Lo("BatchGetDocuments",i.serializer.databaseId,Jn.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const h=Wge(i.serializer,f);u.set(h.key.toString(),h)});const d=[];return s.forEach(f=>{const h=u.get(f.toString());Kr(!!h),d.push(h)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=Sr.fromPath(n);this.mutations.push(new $O(a,this.precondition(a)))}),await async function(n,a){const s=An(n),i={writes:a.map(l=>Hb(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,Jn.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Lr();r=Wr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new vr(Xt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Wr.min())?hs.exists(!1):hs.updateTime(r):hs.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Wr.min()))throw new vr(Xt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hs.updateTime(r)}return hs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jve{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new t6(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new Ive(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!K2(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!$Y(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Do.UNAUTHENTICATED,this.clientId=DO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{pr("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(pr("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Id;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=o6(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Q5(t,e){t.asyncQueue.verifyOperationInProgress(),pr("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await vJ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s7(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Pve(t);pr("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>ZU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>ZU(e.remoteStore,a)),t._onlineComponents=e}async function Pve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Q5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Xt.FAILED_PRECONDITION||a.code===Xt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;O0("Error using user provided cache. Falling back to memory cache: "+r),await Q5(t,new $b)}}else pr("FirestoreClient","Using default OfflineComponentProvider"),await Q5(t,new $b);return t._offlineComponents}async function h6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pr("FirestoreClient","Using user provided OnlineComponentProvider"),await s7(t,t._uninitializedComponentsProvider._online)):(pr("FirestoreClient","Using default OnlineComponentProvider"),await s7(t,new FE))),t._onlineComponents}function Tve(t){return h6(t).then(e=>e.syncEngine)}function kve(t){return h6(t).then(e=>e.datastore)}async function OE(t){const e=await h6(t),r=e.eventManager;return r.onListen=mve.bind(null,e.syncEngine),r.onUnlisten=xve.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=pve.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=vve.bind(null,e.syncEngine),r}function Fve(t,e,r={}){const n=new Id;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new A6({next:h=>{d.Za(),i.enqueueAndForget(()=>c6(s,f));const A=h.docs.has(l);!A&&h.fromCache?u.reject(new vr(Xt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&h.fromCache&&c&&c.source==="server"?u.reject(new vr(Xt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new d6(q2(l.path),d,{includeMetadataChanges:!0,_a:!0});return l6(s,f)}(await OE(t),t.asyncQueue,e,r,n)),n.promise}function Ove(t,e,r={}){const n=new Id;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,l,c,u){const d=new A6({next:h=>{d.Za(),i.enqueueAndForget(()=>c6(s,f)),h.fromCache&&c.source==="server"?u.reject(new vr(Xt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new d6(l,d,{includeMetadataChanges:!0,_a:!0});return l6(s,f)}(await OE(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LJ(t,e,r){if(!r)throw new vr(Xt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function UJ(t,e,r,n){if(e===!0&&n===!0)throw new vr(Xt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function o7(t){if(!Sr.isDocumentKey(t))throw new vr(Xt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function l7(t){if(Sr.isDocumentKey(t))throw new vr(Xt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Lr()}function go(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vr(Xt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=GI(t);throw new vr(Xt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new vr(Xt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new vr(Xt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MJ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vr(Xt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qI{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c7({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new vr(Xt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new vr(Xt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c7(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cY;switch(n.type){case"firstParty":return new Fpe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new vr(Xt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=i7.get(r);n&&(pr("ComponentProvider","Removing Datastore"),i7.delete(r),n.terminate())}(this),Promise.resolve()}}function QJ(t,e,r,n={}){var a;const s=(t=go(t,qI))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&O0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Do.MOCK_USER;else{l=WAe(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new vr(Xt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Do(u)}t._authCredentials=new Ppe(new lY(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Tf(this.firestore,e,this._query)}}class xo{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new NA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xo(this.firestore,e,this._key)}}class NA extends Tf{constructor(e,r,n){super(e,r,q2(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xo(this.firestore,null,new Sr(e))}withConverter(e){return new NA(this.firestore,e,this._path)}}function ht(t,e,...r){if(t=Ts(t),LJ("collection","path",e),t instanceof qI){const n=Jn.fromString(e,...r);return l7(n),new NA(t,null,n)}{if(!(t instanceof xo||t instanceof NA))throw new vr(Xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Jn.fromString(e,...r));return l7(n),new NA(t.firestore,null,n)}}function $t(t,e,...r){if(t=Ts(t),arguments.length===1&&(e=DO.newId()),LJ("doc","path",e),t instanceof qI){const n=Jn.fromString(e,...r);return o7(n),new xo(t,null,new Sr(n))}{if(!(t instanceof xo||t instanceof NA))throw new vr(Xt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Jn.fromString(e,...r));return o7(n),new xo(t.firestore,t instanceof NA?t.converter:null,new Sr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new t6(this,"async_queue_retry"),this.Vu=()=>{const n=B_();n&&pr("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=B_();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=B_();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Id;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tm(e))throw e;pr("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw Ml("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=i6.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&Lr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function d7(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wc extends qI{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new u7,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u7(e),this._firestoreClient=void 0,await e}}}function VJ(t,e){const r=typeof t=="object"?t:wO(),n=typeof t=="string"?t:"(default)",a=yO(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=qAe("firestore");s&&QJ(a,...s)}return a}function Jp(t){if(t._terminated)throw new vr(Xt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HJ(t),t._firestoreClient}function HJ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new dge(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,MJ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Bve(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function $J(t,e){O0("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return Dve(t,FE.provider,{build:n=>new Sve(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function Dve(t,e,r){if((t=go(t,Wc))._firestoreClient||t._terminated)throw new vr(Xt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new vr(Xt.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},HJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new U0(ui.fromBase64String(e))}catch(r){throw new vr(Xt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new U0(ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new vr(Xt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new As(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new vr(Xt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new vr(Xt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xn(this._lat,e._lat)||xn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rve=/^__.*__$/;class Mve{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ZA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Pv(e,this.data,r,this.fieldTransforms)}}class KJ{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ZA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function GJ(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lr()}}class m6{constructor(e,r,n,a,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new m6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return DE(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GJ(this.Cu)&&Rve.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Lve{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||$I(e)}Qu(e,r,n,a=!1){return new m6({Cu:e,methodName:r,qu:n,path:As.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fv(t){const e=t._freezeSettings(),r=$I(t._databaseId);return new Lve(t._databaseId,!!e.ignoreUndefinedProperties,r)}function YI(t,e,r,n,a,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);x6("Data must be an object, but it was:",i,n);const l=qJ(n,i);let c,u;if(s.merge)c=new lc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=uT(e,f,r);if(!i.contains(h))throw new vr(Xt.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);WJ(d,h)||d.push(h)}c=new lc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Mve(new Qo(l),c,u)}class JI extends zI{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof JI}}function p6(t,e,r,n){const a=t.Qu(1,e,r);x6("Data must be an object, but it was:",a,n);const s=[],i=Qo.empty();Xp(n,(c,u)=>{const d=v6(e,c,r);u=Ts(u);const f=a.Nu(d);if(u instanceof JI)s.push(d);else{const h=Z2(u,f);h!=null&&(s.push(d),i.set(d,h))}});const l=new lc(s);return new KJ(i,l,a.fieldTransforms)}function g6(t,e,r,n,a,s){const i=t.Qu(1,e,r),l=[uT(e,n,r)],c=[a];if(s.length%2!=0)throw new vr(Xt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(uT(e,s[h])),c.push(s[h+1]);const u=[],d=Qo.empty();for(let h=l.length-1;h>=0;--h)if(!WJ(u,l[h])){const A=l[h];let m=c[h];m=Ts(m);const p=i.Nu(A);if(m instanceof JI)u.push(A);else{const g=Z2(m,p);g!=null&&(u.push(A),d.set(A,g))}}const f=new lc(u);return new KJ(d,f,i.fieldTransforms)}function Uve(t,e,r,n=!1){return Z2(r,t.Qu(n?4:3,e))}function Z2(t,e){if(zJ(t=Ts(t)))return x6("Unsupported field value:",e,t),qJ(t,e);if(t instanceof zI)return function(n,a){if(!GJ(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const l of n){let c=Z2(l,a.Lu(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Ts(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Pge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=dr.fromDate(n);return{timestampValue:sv(a.serializer,s)}}if(n instanceof dr){const s=new dr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:sv(a.serializer,s)}}if(n instanceof WI)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof U0)return{bytesValue:zY(a.serializer,n._byteString)};if(n instanceof xo){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WO(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof XI)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return HO(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${GI(n)}`)}(t,e)}function qJ(t,e){const r={};return vY(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xp(t,(n,a)=>{const s=Z2(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function zJ(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dr||t instanceof WI||t instanceof U0||t instanceof xo||t instanceof zI||t instanceof XI)}function x6(t,e,r){if(!zJ(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=GI(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function uT(t,e,r){if((e=Ts(e))instanceof Zp)return e._internalPath;if(typeof e=="string")return v6(t,e);throw DE("Field path arguments must be of type string or ",t,!1,void 0,r)}const Qve=new RegExp("[~\\*/\\[\\]]");function v6(t,e,r){if(e.search(Qve)>=0)throw DE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Zp(...e.split("."))._internalPath}catch{throw DE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function DE(t,e,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new vr(Xt.INVALID_ARGUMENT,l+t+c)}function WJ(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(ZI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Vve extends RE{data(){return super.data()}}function ZI(t,e){return typeof e=="string"?v6(t,e):e instanceof Zp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new vr(Xt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y6{}class e4 extends y6{}function er(t,e,...r){let n=[];e instanceof y6&&n.push(e),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof t4).length,l=s.filter(c=>c instanceof ew).length;if(i>1||i>0&&l>0)throw new vr(Xt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class ew extends e4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ew(e,r,n)}_apply(e){const r=this._parse(e);return JJ(e._query,r),new Tf(e.firestore,e.converter,ZP(e._query,r))}_parse(e){const r=Fv(e.firestore);return function(s,i,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new vr(Xt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){A7(f,d);const A=[];for(const m of f)A.push(f7(c,s,m));h={arrayValue:{values:A}}}else h=f7(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||A7(f,d),h=Uve(l,i,f,d==="in"||d==="not-in");return Mn.create(u,d,h)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function ir(t,e,r){const n=e,a=ZI("where",t);return ew._create(a,n,r)}class t4 extends y6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new t4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:wa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let i=a;const l=s.getFlattenedFilters();for(const c of l)JJ(i,c),i=ZP(i,c)}(e._query,r),new Tf(e.firestore,e.converter,ZP(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class r4 extends e4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new r4(e,r)}_apply(e){const r=function(a,s,i){if(a.startAt!==null)throw new vr(Xt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new vr(Xt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lb(s,i)}(e._query,this._field,this._direction);return new Tf(e.firestore,e.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Bv(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function on(t,e="asc"){const r=e,n=ZI("orderBy",t);return r4._create(n,r)}class n4 extends e4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new n4(e,r,n)}_apply(e){return new Tf(e.firestore,e.converter,jE(e._query,this._limit,this._limitType))}}function YJ(t){return n4._create("limit",t,"F")}function f7(t,e,r){if(typeof(r=Ts(r))=="string"){if(r==="")throw new vr(Xt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PY(e)&&r.indexOf("/")!==-1)throw new vr(Xt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Jn.fromString(r));if(!Sr.isDocumentKey(n))throw new vr(Xt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Rb(t,new Sr(n))}if(r instanceof xo)return Rb(t,r._key);throw new vr(Xt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${GI(r)}.`)}function A7(t,e){if(!Array.isArray(t)||t.length===0)throw new vr(Xt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JJ(t,e){const r=function(a,s){for(const i of a)for(const l of i.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new vr(Xt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new vr(Xt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class b6{convertValue(e,r="none"){switch(_p(e)){case 0:return null;case 1:return e.booleanValue;case 2:return us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(D0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Lr()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Xp(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(i=>us(i.doubleValue));return new XI(s)}convertGeoPoint(e){return new WI(us(e.latitude),us(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=QO(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ob(e));default:return null}}convertTimestamp(e){const r=RA(e);return new dr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Jn.fromString(e);Kr(aJ(n));const a=new R0(n.get(1),n.get(3)),s=new Sr(n.popFirst(5));return a.isEqual(r)||Ml(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Hve extends b6{constructor(e){super(),this.firestore=e}convertBytes(e){return new U0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xo(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class s4 extends RE{constructor(e,r,n,a,s,i){super(e,r,n,a,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Qy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ZI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Qy extends s4{data(e={}){return super.data(e)}}class w6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new $m(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Qy(this._firestore,this._userDataWriter,n.key,n,new $m(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new vr(Xt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(l=>{const c=new Qy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new $m(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Qy(a._firestore,a._userDataWriter,l.doc.key,l.doc,new $m(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:$ve(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function $ve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lr()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){t=go(t,xo);const e=go(t.firestore,Wc);return Fve(Jp(e),t._key).then(r=>eZ(e,t,r))}class i4 extends b6{constructor(e){super(),this.firestore=e}convertBytes(e){return new U0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xo(this.firestore,null,r)}}function Lt(t){t=go(t,Tf);const e=go(t.firestore,Wc),r=Jp(e),n=new i4(e);return XJ(t._query),Ove(r,t._query).then(a=>new w6(e,n,t,a))}function ZJ(t,e,r){t=go(t,xo);const n=go(t.firestore,Wc),a=a4(t.converter,e,r);return Ov(n,[YI(Fv(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,hs.none())])}function nn(t,e,r,...n){t=go(t,xo);const a=go(t.firestore,Wc),s=Fv(a);let i;return i=typeof(e=Ts(e))=="string"||e instanceof Zp?g6(s,"updateDoc",t._key,e,r,n):p6(s,"updateDoc",t._key,e),Ov(a,[i.toMutation(t._key,hs.exists(!0))])}function Cn(t){return Ov(go(t.firestore,Wc),[new Tv(t._key,hs.none())])}function _n(t,e){const r=go(t.firestore,Wc),n=$t(t),a=a4(t.converter,e);return Ov(r,[YI(Fv(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,hs.exists(!1))]).then(()=>n)}function Od(t,...e){var r,n,a;t=Ts(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||d7(e[i])||(s=e[i],i++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(d7(e[i])){const f=e[i];e[i]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[i+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[i+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof xo)u=go(t.firestore,Wc),d=q2(t._key.path),c={next:f=>{e[i]&&e[i](eZ(u,t,f))},error:e[i+1],complete:e[i+2]};else{const f=go(t,Tf);u=go(f.firestore,Wc),d=f._query;const h=new i4(u);c={next:A=>{e[i]&&e[i](new w6(u,h,f,A))},error:e[i+1],complete:e[i+2]},XJ(t._query)}return function(h,A,m,p){const g=new A6(p),x=new d6(A,g,m);return h.asyncQueue.enqueueAndForget(async()=>l6(await OE(h),x)),()=>{g.Za(),h.asyncQueue.enqueueAndForget(async()=>c6(await OE(h),x))}}(Jp(u),d,l,c)}function Ov(t,e){return function(n,a){const s=new Id;return n.asyncQueue.enqueueAndForget(async()=>yve(await Tve(n),a,s)),s.promise}(Jp(t),e)}function eZ(t,e,r){const n=r.docs.get(e._key),a=new i4(t);return new s4(t,a,e._key,n,new $m(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kve={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Fv(e)}set(e,r,n){this._verifyNotCommitted();const a=r0(e,this._firestore),s=a4(a.converter,r,n),i=YI(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,hs.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=r0(e,this._firestore);let i;return i=typeof(r=Ts(r))=="string"||r instanceof Zp?g6(this._dataReader,"WriteBatch.update",s._key,r,n,a):p6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=r0(e,this._firestore);return this._mutations=this._mutations.concat(new Tv(r._key,hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vr(Xt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function r0(t,e){if((t=Ts(t)).firestore!==e)throw new vr(Xt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Fv(r)}get(r){const n=r0(r,this._firestore),a=new Hve(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Lr();const i=s[0];if(i.isFoundDocument())return new RE(this._firestore,a,i.key,i,n.converter);if(i.isNoDocument())return new RE(this._firestore,a,n._key,null,n.converter);throw Lr()})}set(r,n,a){const s=r0(r,this._firestore),i=a4(s.converter,n,a),l=YI(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const i=r0(r,this._firestore);let l;return l=typeof(n=Ts(n))=="string"||n instanceof Zp?g6(this._dataReader,"Transaction.update",i._key,n,a,s):p6(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=r0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=r0(e,this._firestore),n=new i4(this._firestore);return super.get(e).then(a=>new s4(this._firestore,n,r._key,a._document,new $m(!1,!1),r.converter))}}function Qi(t,e,r){t=go(t,Wc);const n=Object.assign(Object.assign({},Kve),r);return function(s){if(s.maxAttempts<1)throw new vr(Xt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,l){const c=new Id;return s.asyncQueue.enqueueAndForget(async()=>{const u=await kve(s);new jve(s.asyncQueue,u,l,i,c).au()}),c.promise}(Jp(t),a=>e(new rZ(t,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){return Jp(t=go(t,Wc)),new tZ(t,e=>Ov(t,e))}(function(e,r=!0){(function(a){jv=a})(Sv),Jx(new bp("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),l=new Wc(new Tpe(n.getProvider("auth-internal")),new Dpe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new vr(Xt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new R0(u.options.projectId,d)}(i,a),i);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),_0(sU,"4.7.3",e),_0(sU,"4.7.3","esm2017")})();const Gve=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:b6,Bytes:U0,CollectionReference:NA,DocumentReference:xo,DocumentSnapshot:s4,FieldPath:Zp,FieldValue:zI,Firestore:Wc,FirestoreError:vr,GeoPoint:WI,Query:Tf,QueryCompositeFilterConstraint:t4,QueryConstraint:e4,QueryDocumentSnapshot:Qy,QueryFieldFilterConstraint:ew,QueryLimitConstraint:n4,QueryOrderByConstraint:r4,QuerySnapshot:w6,SnapshotMetadata:$m,Timestamp:dr,Transaction:rZ,VectorValue:XI,WriteBatch:tZ,_AutoId:DO,_ByteString:ui,_DatabaseId:R0,_DocumentKey:Sr,_EmptyAuthCredentialsProvider:cY,_FieldPath:As,_cast:go,_logWarn:O0,_validateIsNotUsedTogether:UJ,addDoc:_n,collection:ht,connectFirestoreEmulator:QJ,deleteDoc:Cn,doc:$t,enableIndexedDbPersistence:$J,ensureFirestoreConfigured:Jp,executeWrite:Ov,getDoc:li,getDocs:Lt,getFirestore:VJ,limit:YJ,onSnapshot:Od,orderBy:on,query:er,runTransaction:Qi,setDoc:ZJ,updateDoc:nn,where:ir,writeBatch:eg},Symbol.toStringTag,{value:"Module"})),qve={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},nZ=bO(qve),ke=VJ(nZ),Q0=$P(nZ);KX(Q0,TO).catch(t=>{console.warn(" No se pudo establecer persistencia local para Auth:",(t==null?void 0:t.code)||t)});$J(ke).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function zve(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState(!1),d=R2(),f=A=>{if(Array.isArray(A)){if(A.length!==1)return localStorage.setItem("role",A[0]||""),d("/admin");A=A[0]||""}const m=String(A||"");if(localStorage.setItem("role",m),Jr(m,"admin"))return d("/admin");if(Jr(m,"vendedor_pollo"))return d("/admin/salesV2");if(Jr(m,"vendedor_ropa"))return d("/admin/salesClothes");if(Jr(m,"vendedor_dulces"))return d("/admin/salesCandies");if(Jr(m,"supervisor_pollo")||Jr(m,"contador"))return d("/admin/batches")},h=async A=>{if(A.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await KX(Q0,TO);const m=await pme(Q0,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const g=await li($t(ke,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",g.exists()),!g.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const x=g.data();console.info&&console.info("[Login] user profile:",x);const y=Array.isArray(x.roles)?x.roles:x.role?[x.role]:[],b=y[0]||"",w=x.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return o.jsx("div",{className:"min-h-screen grid place-items-center ",children:o.jsxs("form",{onSubmit:h,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:A=>e(A.target.value),autoComplete:"username"}),o.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:A=>n(A.target.value),minLength:6,autoComplete:"current-password"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(A=>!A),children:a?"Ocultar":"Mostrar"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),o.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),i&&o.jsx("p",{className:`mt-3 text-sm ${i.startsWith("Error")||i.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:i})]})})}function wn({children:t,allowedRoles:e}){const[r,n]=v.useState(!0),[a,s]=v.useState(!1);return v.useEffect(()=>{const i=BO(Q0,async l=>{if(l){const c=$t(ke,"users",l.uid),u=await li(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let h=!1;for(const A of e)if(Jr(f,A)){h=!0;break}s(h)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>i()},[e]),r?o.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:o.jsx(rA,{to:"/"})}function Wve({role:t,roles:e}){const r="/admin",n=({isActive:ce})=>`block rounded px-3 py-2 text-sm ${ce?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=R2(),[s,i]=v.useState(!1),[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(!1),[A,m]=v.useState(!1),[p,g]=v.useState(!1),[x,y]=v.useState(!1),[b,w]=v.useState(!1),[j,I]=v.useState(!1),[_,E]=v.useState(!1),[S,O]=v.useState(!1),[P,T]=v.useState(!1),[F,J]=v.useState(!1),[ge,le]=v.useState(!1),[de,Ae]=v.useState(!1),[se,Ie]=v.useState(!1),[Pe,k]=v.useState(!1),[H,R]=v.useState(!1),M=async()=>{R(!0)},G=async()=>{try{await PO(Q0)}catch(ce){console.error("signOut error:",ce)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}R(!1),a("/")}},X=({open:ce,onClick:K,children:oe})=>o.jsxs("button",{type:"button",onClick:K,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[o.jsx("span",{children:oe}),o.jsx("span",{className:"text-xs",children:ce?"":""})]}),D=({open:ce,onClick:K,title:oe})=>o.jsxs("button",{type:"button",onClick:K,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[o.jsx("span",{className:"text-blue-500 font-medium ",children:oe}),o.jsx("span",{className:"text-xs",children:ce?"":""})]}),Q=e&&e.length?e:t,te=Jr(Q,"admin"),me=Jr(Q,"vendedor_pollo"),L=Jr(Q,"vendedor_ropa"),he=Jr(Q,"vendedor_dulces"),ne=Jr(Q,"supervisor_pollo")||Jr(Q,"contador"),z=Jr(Q,"contador");return o.jsxs("div",{className:"min-h-screen flex",children:[o.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[o.jsx("button",{onClick:()=>i(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?o.jsx("span",{title:"Expandir men",children:"Menu "}):o.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"space-y-1",children:[te&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(X,{open:l,onClick:()=>c(ce=>!ce),children:"Pollos Bea"}),l&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:p,onClick:()=>g(ce=>!ce),title:"Operaciones"}),p&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Qr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Qr,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendiente"}),o.jsx(Qr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),t!=="contador"&&o.jsx(Qr,{to:`${r}/bills`,className:n,children:"Cierres"})]}),o.jsx(D,{open:u,onClick:()=>d(ce=>!ce),title:"Inventarios"}),u&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Qr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),o.jsx(Qr,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),o.jsx(D,{open:f,onClick:()=>h(ce=>!ce),title:"Finanzas"}),f&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Qr,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),o.jsx(Qr,{to:`${r}/billing`,className:n,children:"Facturacion"}),o.jsx(Qr,{to:`${r}/expenses`,className:n,children:"Gastos"}),o.jsx(Qr,{to:`${r}/salesV2`,className:n,children:"Venta"}),t!=="contador"&&o.jsx(Qr,{to:`${r}/bills`,className:n,children:"Cierre"}),o.jsx(Qr,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),o.jsx(D,{open:A,onClick:()=>m(ce=>!ce),title:"Productos"}),A&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(X,{open:x,onClick:()=>y(ce=>!ce),children:"Gonper"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:b,onClick:()=>w(ce=>!ce),title:"Inventarios"}),b&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(X,{open:F,onClick:()=>J(ce=>!ce),children:"CandyShop"}),F&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:de,onClick:()=>Ae(ce=>!ce),title:"Vendedores"}),de&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),de&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),de&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),o.jsx(D,{open:ge,onClick:()=>le(ce=>!ce),title:"Inventario"}),ge&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),ge&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),ge&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),ge&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),o.jsx(D,{open:se,onClick:()=>Ie(ce=>!ce),title:"Finanzas"}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),se&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(X,{open:Pe,onClick:()=>k(ce=>!ce),children:"Operaciones Otras"}),Pe&&o.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[o.jsx(Qr,{to:`${r}/users`,className:n,children:"Usuarios"}),o.jsx(Qr,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),o.jsx(Qr,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!te&&(ne||me||z)&&o.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[o.jsx(X,{open:l,onClick:()=>c(ce=>!ce),children:"Pollos Bea"}),l&&o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:z?o.jsxs(o.Fragment,{children:[o.jsx(Qr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Qr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),o.jsx(Qr,{to:`${r}/bills`,className:n,children:"Cierres"}),o.jsx(Qr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),o.jsx(Qr,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]}):me?o.jsxs(o.Fragment,{children:[o.jsx(Qr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Qr,{to:`${r}/bills`,className:n,children:"Cierres"}),o.jsx(Qr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),o.jsx(Qr,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]}):ne?o.jsxs(o.Fragment,{children:[o.jsx(Qr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),o.jsx(Qr,{to:`${r}/bills`,className:n,children:"Cierres"}),o.jsx(Qr,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),o.jsx(Qr,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Qr,{to:`${r}/salesV2`,className:n,children:"Vender"}),o.jsx(Qr,{to:`${r}/batches`,className:n,children:"Inventario Pollo"})]})})]}),he&&o.jsxs("div",{className:"border rounded",children:[o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),o.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/customersCandies`,className:n,children:"Clientes"})})]}),L&&o.jsxs("div",{className:"border rounded",children:[o.jsx(X,{open:x,onClick:()=>y(ce=>!ce),children:"Operaciones Ropa"}),x&&o.jsxs("div",{className:"pb-2",children:[o.jsx(D,{open:S,onClick:()=>O(ce=>!ce),title:"Ventas"}),S&&o.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[o.jsx(Qr,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),o.jsx(Qr,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),o.jsx(D,{open:j,onClick:()=>I(ce=>!ce),title:"Productos"}),j&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),o.jsx(D,{open:_,onClick:()=>E(ce=>!ce),title:"Clientes"}),_&&o.jsx("div",{className:"ml-4 mt-1 space-y-1",children:o.jsx(Qr,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),o.jsx("button",{onClick:M,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),H&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>R(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>R(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:G,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),o.jsx("main",{className:"flex-1 p-6",children:o.jsx(rX,{})})]})}function P1(...t){return t.filter(Boolean).join(" ")}function Xve({role:t,roles:e}){const r=R2(),n=WA(),a="/admin",s=e&&e.length?e:t,i=Jr(s,"admin"),l=Jr(s,"vendedor_pollo"),c=Jr(s,"vendedor_dulces"),u=Jr(s,"supervisor_pollo")||Jr(s,"contador"),d=Jr(s,"contador"),f=l&&c,[h,A]=v.useState(()=>{try{const E=typeof window<"u"?localStorage.getItem("rubro"):null;if(E==="POLLO"||E==="DULCES")return E}catch{}return l||u?"POLLO":c?"DULCES":"POLLO"}),[m,p]=v.useState(!1),[g,x]=v.useState(!1),y=v.useMemo(()=>{if(i||f){if(h==="POLLO"){if(i)return[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"clientes",label:"Clientes",to:`${a}/customers`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];if(u){const E=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"clientes",label:"Clientes",to:`${a}/customers`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];return Jr(s,"contador")?E.filter(S=>S.key!=="cierre"):E}if(l)return[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"clientes",label:"Clientes",to:`${a}/customers`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}];if(d)return[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]}if(h==="DULCES"){if(i)return[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Global",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}];if(c)return[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]}}if(u){const E=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];return Jr(s,"contador")?E.filter(S=>S.key!=="cierre"):E}return l?[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:[{key:"home",label:"Inicio",to:`${a}`}]},[i,l,c,u,f,h]);v.useEffect(()=>{if((i||f)&&y.length){try{localStorage.setItem("rubro",h)}catch{}r(y[0].to,{replace:!0})}},[h]),v.useEffect(()=>{m&&p(!1)},[n.pathname]),v.useEffect(()=>{const E=S=>{S.key==="Escape"&&p(!1)};return m&&window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[m]);const b=async()=>{x(!0)},w=async()=>{try{await PO(Q0)}catch(E){console.error("signOut error:",E)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}x(!1),p(!1),r("/")}},j=({isActive:E})=>P1("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",E?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),I=y.length<=2,_=({isActive:E})=>P1("w-full flex items-center justify-between px-4 py-3 rounded-xl border",E?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return o.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[o.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[i||f?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:()=>A("POLLO"),className:P1("px-3 py-2 rounded-2xl text-sm font-semibold",h==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),o.jsx("button",{type:"button",onClick:()=>A("DULCES"),className:P1("px-3 py-2 rounded-2xl text-sm font-semibold",h==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):o.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),m&&o.jsxs("div",{className:"fixed inset-0 z-[80]",children:[o.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>p(!1),"aria-label":"Cerrar men"}),o.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),o.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),o.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),o.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:y.map(E=>o.jsxs(Qr,{to:E.to,className:_,children:[o.jsx("span",{className:"font-semibold",children:E.label}),o.jsx("span",{className:"text-sm opacity-80",children:""})]},E.key))}),o.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[o.jsx("button",{onClick:b,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),g&&o.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>x(!1)}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[o.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>x(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),o.jsx("button",{onClick:w,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),o.jsx("main",{className:P1("flex-1 overflow-y-auto px-3 pt-3",I?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:o.jsx(rX,{})}),I&&o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:o.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:y.map(E=>o.jsx(Qr,{to:E.to,className:j,children:E.label},E.key))})})]})}const aZ=6048e5,Yve=864e5,h7=Symbol.for("constructDateFrom");function Dd(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&h7 in t?t[h7](e):t instanceof Date?new t.constructor(e):new Date(e)}function ql(t,e){return Dd(e||t,t)}function Jve(t,e,r){const n=ql(t,r==null?void 0:r.in);return isNaN(e)?Dd(t,NaN):(n.setDate(n.getDate()+e),n)}function Zve(t,e,r){const n=ql(t,r==null?void 0:r.in);if(isNaN(e))return Dd(t,NaN);const a=n.getDate(),s=Dd(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return a>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let e1e={};function o4(){return e1e}function Kb(t,e){var l,c,u,d;const r=o4(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ql(t,e==null?void 0:e.in),s=a.getDay(),i=(s<n?7:0)+s-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function ME(t,e){return Kb(t,{...e,weekStartsOn:1})}function sZ(t,e){const r=ql(t,e==null?void 0:e.in),n=r.getFullYear(),a=Dd(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=ME(a),i=Dd(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=ME(i);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function m7(t){const e=ql(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function t1e(t,...e){const r=Dd.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function p7(t,e){const r=ql(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function r1e(t,e,r){const[n,a]=t1e(r==null?void 0:r.in,t,e),s=p7(n),i=p7(a),l=+s-m7(s),c=+i-m7(i);return Math.round((l-c)/Yve)}function n1e(t,e){const r=sZ(t,e),n=Dd(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ME(n)}function a1e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function s1e(t){return!(!a1e(t)&&typeof t!="number"||isNaN(+ql(t)))}function Qd(t,e){const r=ql(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Vd(t,e){const r=ql(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function i1e(t,e){const r=ql(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const o1e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},l1e=(t,e,r)=>{let n;const a=o1e[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function V5(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const c1e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},u1e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},d1e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f1e={date:V5({formats:c1e,defaultWidth:"full"}),time:V5({formats:u1e,defaultWidth:"full"}),dateTime:V5({formats:d1e,defaultWidth:"full"})},A1e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},h1e=(t,e,r,n)=>A1e[t];function T1(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):i;a=t.formattingValues[l]||t.formattingValues[i]}else{const i=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const m1e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},p1e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},g1e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},x1e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},v1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},y1e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},b1e=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},w1e={ordinalNumber:b1e,era:T1({values:m1e,defaultWidth:"wide"}),quarter:T1({values:p1e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:T1({values:g1e,defaultWidth:"wide"}),day:T1({values:x1e,defaultWidth:"wide"}),dayPeriod:T1({values:v1e,defaultWidth:"wide",formattingValues:y1e,defaultFormattingWidth:"wide"})};function k1(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const i=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?C1e(l,f=>f.test(i)):N1e(l,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function N1e(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function C1e(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function _1e(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=r.valueCallback?r.valueCallback(i):i;const l=e.slice(a.length);return{value:i,rest:l}}}const E1e=/^(\d+)(th|st|nd|rd)?/i,S1e=/\d+/i,I1e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j1e={any:[/^b/i,/^(a|c)/i]},B1e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},P1e={any:[/1/i,/2/i,/3/i,/4/i]},T1e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},k1e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F1e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},O1e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},D1e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},R1e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},M1e={ordinalNumber:_1e({matchPattern:E1e,parsePattern:S1e,valueCallback:t=>parseInt(t,10)}),era:k1({matchPatterns:I1e,defaultMatchWidth:"wide",parsePatterns:j1e,defaultParseWidth:"any"}),quarter:k1({matchPatterns:B1e,defaultMatchWidth:"wide",parsePatterns:P1e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:k1({matchPatterns:T1e,defaultMatchWidth:"wide",parsePatterns:k1e,defaultParseWidth:"any"}),day:k1({matchPatterns:F1e,defaultMatchWidth:"wide",parsePatterns:O1e,defaultParseWidth:"any"}),dayPeriod:k1({matchPatterns:D1e,defaultMatchWidth:"any",parsePatterns:R1e,defaultParseWidth:"any"})},L1e={code:"en-US",formatDistance:l1e,formatLong:f1e,formatRelative:h1e,localize:w1e,match:M1e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function U1e(t,e){const r=ql(t,e==null?void 0:e.in);return r1e(r,i1e(r))+1}function Q1e(t,e){const r=ql(t,e==null?void 0:e.in),n=+ME(r)-+n1e(r);return Math.round(n/aZ)+1}function iZ(t,e){var d,f,h,A;const r=ql(t,e==null?void 0:e.in),n=r.getFullYear(),a=o4(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((A=(h=a.locale)==null?void 0:h.options)==null?void 0:A.firstWeekContainsDate)??1,i=Dd((e==null?void 0:e.in)||t,0);i.setFullYear(n+1,0,s),i.setHours(0,0,0,0);const l=Kb(i,e),c=Dd((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Kb(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function V1e(t,e){var l,c,u,d;const r=o4(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=iZ(t,e),s=Dd((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Kb(s,e)}function H1e(t,e){const r=ql(t,e==null?void 0:e.in),n=+Kb(r,e)-+V1e(r,e);return Math.round(n/aZ)+1}function xa(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Th={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return xa(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):xa(r+1,2)},d(t,e){return xa(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return xa(t.getHours()%12||12,e.length)},H(t,e){return xa(t.getHours(),e.length)},m(t,e){return xa(t.getMinutes(),e.length)},s(t,e){return xa(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return xa(a,e.length)}},Eg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g7={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Th.y(t,e)},Y:function(t,e,r,n){const a=iZ(t,n),s=a>0?a:1-a;if(e==="YY"){const i=s%100;return xa(i,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):xa(s,e.length)},R:function(t,e){const r=sZ(t);return xa(r,e.length)},u:function(t,e){const r=t.getFullYear();return xa(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return xa(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return xa(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Th.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return xa(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=H1e(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):xa(a,e.length)},I:function(t,e,r){const n=Q1e(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):xa(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Th.d(t,e)},D:function(t,e,r){const n=U1e(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xa(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return xa(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return xa(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return xa(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Eg.noon:n===0?a=Eg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Eg.evening:n>=12?a=Eg.afternoon:n>=4?a=Eg.morning:a=Eg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Th.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Th.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xa(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):xa(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Th.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Th.s(t,e)},S:function(t,e){return Th.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return v7(n);case"XXXX":case"XX":return jm(n);case"XXXXX":case"XXX":default:return jm(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return v7(n);case"xxxx":case"xx":return jm(n);case"xxxxx":case"xxx":default:return jm(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+x7(n,":");case"OOOO":default:return"GMT"+jm(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+x7(n,":");case"zzzz":default:return"GMT"+jm(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return xa(n,e.length)},T:function(t,e,r){return xa(+t,e.length)}};function x7(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+xa(s,2)}function v7(t,e){return t%60===0?(t>0?"-":"+")+xa(Math.abs(t)/60,2):jm(t,e)}function jm(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=xa(Math.trunc(n/60),2),s=xa(n%60,2);return r+a+e+s}const y7=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oZ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$1e=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return y7(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",y7(n,e)).replace("{{time}}",oZ(a,e))},K1e={p:oZ,P:$1e},G1e=/^D+$/,q1e=/^Y+$/,z1e=["D","DD","YY","YYYY"];function W1e(t){return G1e.test(t)}function X1e(t){return q1e.test(t)}function Y1e(t,e,r){const n=J1e(t,e,r);if(console.warn(n),z1e.includes(t))throw new RangeError(n)}function J1e(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Z1e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tye=/^'([^]*?)'?$/,rye=/''/g,nye=/[a-zA-Z]/;function Er(t,e,r){var d,f,h,A;const n=o4(),a=n.locale??L1e,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=n.weekStartsOn??((A=(h=n.locale)==null?void 0:h.options)==null?void 0:A.weekStartsOn)??0,l=ql(t,r==null?void 0:r.in);if(!s1e(l))throw new RangeError("Invalid time value");let c=e.match(eye).map(m=>{const p=m[0];if(p==="p"||p==="P"){const g=K1e[p];return g(m,a.formatLong)}return m}).join("").match(Z1e).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:aye(m)};if(g7[p])return{isToken:!0,value:m};if(p.match(nye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(X1e(p)||W1e(p))&&Y1e(p,e,String(t));const g=g7[p[0]];return g(l,p,a.localize,u)}).join("")}function aye(t){const e=t.match(tye);return e?e[1].replace(rye,"'"):t}function lZ(t,e,r){return Jve(t,-14,r)}function sye(t,e,r){return Zve(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dT=function(t,e){return dT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},dT(t,e)};function Hd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fT=function(){return fT=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fT.apply(this,arguments)};function Tl(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function ll(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function SN(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var MA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),l4=function(t,e){return MA.fromClientRect(t,e.getBoundingClientRect())},iye=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new MA(0,0,n,a)},c4=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},ri=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},b7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var IN=0;IN<b7.length;IN++)oye[b7.charCodeAt(IN)]=IN;var w7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jN=0;jN<w7.length;jN++)uy[w7.charCodeAt(jN)]=jN;var lye=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=uy[t.charCodeAt(n)],i=uy[t.charCodeAt(n+1)],l=uy[t.charCodeAt(n+2)],c=uy[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},cye=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},uye=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},tp=5,N6=11,H5=2,dye=N6-tp,cZ=65536>>tp,fye=1<<tp,$5=fye-1,Aye=1024>>tp,hye=cZ+Aye,mye=hye,pye=32,gye=mye+pye,xye=65536>>N6,vye=1<<dye,yye=vye-1,N7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},bye=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},wye=function(t,e){var r=lye(t),n=Array.isArray(r)?uye(r):new Uint32Array(r),a=Array.isArray(r)?cye(r):new Uint16Array(r),s=24,i=N7(a,s/2,n[4]/2),l=n[5]===2?N7(a,(s+n[4])/2):bye(n,Math.ceil((s+n[4])/4));return new Nye(n[0],n[1],n[2],n[3],i,l)},Nye=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>tp],r=(r<<H5)+(e&$5),this.data[r];if(e<=65535)return r=this.index[cZ+(e-55296>>tp)],r=(r<<H5)+(e&$5),this.data[r];if(e<this.highStart)return r=gye-xye+(e>>N6),r=this.index[r],r+=e>>tp&yye,r=this.index[r],r=(r<<H5)+(e&$5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),C7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cye=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var BN=0;BN<C7.length;BN++)Cye[C7.charCodeAt(BN)]=BN;var _ye="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",_7=50,Eye=1,uZ=2,dZ=3,Sye=4,Iye=5,E7=7,fZ=8,S7=9,l0=10,AT=11,I7=12,hT=13,jye=14,dy=15,mT=16,PN=17,F1=18,Bye=19,j7=20,pT=21,O1=22,K5=23,Sg=24,kc=25,fy=26,Ay=27,Ig=28,Pye=29,Lm=30,Tye=31,TN=32,kN=33,gT=34,xT=35,vT=36,Gb=37,yT=38,P_=39,T_=40,G5=41,AZ=42,kye=43,Fye=[9001,65288],hZ="!",Dn="",FN="",bT=wye(_ye),qf=[Lm,vT],wT=[Eye,uZ,dZ,Iye],mZ=[l0,fZ],B7=[Ay,fy],Oye=wT.concat(mZ),P7=[yT,P_,T_,gT,xT],Dye=[dy,hT],Rye=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,i){var l=bT.get(s);if(l>_7?(a.push(!0),l-=_7):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(mT);if(l===Sye||l===AT){if(i===0)return n.push(i),r.push(Lm);var c=r[i-1];return Oye.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Lm))}if(n.push(i),l===Tye)return r.push(e==="strict"?pT:Gb);if(l===AZ||l===Pye)return r.push(Lm);if(l===kye)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Gb):r.push(Lm);r.push(l)}),[n,r,a]},q5=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==l0)break}if(a===l0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===e)return!0;if(i!==l0)break}if(l!==l0)break}return!1},T7=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===l0)r--;else return n}return 0},Mye=function(t,e,r,n,a){if(r[n]===0)return Dn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Dn;var i=s-1,l=s+1,c=e[s],u=i>=0?e[i]:0,d=e[l];if(c===uZ&&d===dZ)return Dn;if(wT.indexOf(c)!==-1)return hZ;if(wT.indexOf(d)!==-1||mZ.indexOf(d)!==-1)return Dn;if(T7(s,e)===fZ)return FN;if(bT.get(t[s])===AT||(c===TN||c===kN)&&bT.get(t[l])===AT||c===E7||d===E7||c===S7||[l0,hT,dy].indexOf(c)===-1&&d===S7||[PN,F1,Bye,Sg,Ig].indexOf(d)!==-1||T7(s,e)===O1||q5(K5,O1,s,e)||q5([PN,F1],pT,s,e)||q5(I7,I7,s,e))return Dn;if(c===l0)return FN;if(c===K5||d===K5)return Dn;if(d===mT||c===mT)return FN;if([hT,dy,pT].indexOf(d)!==-1||c===jye||u===vT&&Dye.indexOf(c)!==-1||c===Ig&&d===vT||d===j7||qf.indexOf(d)!==-1&&c===kc||qf.indexOf(c)!==-1&&d===kc||c===Ay&&[Gb,TN,kN].indexOf(d)!==-1||[Gb,TN,kN].indexOf(c)!==-1&&d===fy||qf.indexOf(c)!==-1&&B7.indexOf(d)!==-1||B7.indexOf(c)!==-1&&qf.indexOf(d)!==-1||[Ay,fy].indexOf(c)!==-1&&(d===kc||[O1,dy].indexOf(d)!==-1&&e[l+1]===kc)||[O1,dy].indexOf(c)!==-1&&d===kc||c===kc&&[kc,Ig,Sg].indexOf(d)!==-1)return Dn;if([kc,Ig,Sg,PN,F1].indexOf(d)!==-1)for(var f=s;f>=0;){var h=e[f];if(h===kc)return Dn;if([Ig,Sg].indexOf(h)!==-1)f--;else break}if([Ay,fy].indexOf(d)!==-1)for(var f=[PN,F1].indexOf(c)!==-1?i:s;f>=0;){var h=e[f];if(h===kc)return Dn;if([Ig,Sg].indexOf(h)!==-1)f--;else break}if(yT===c&&[yT,P_,gT,xT].indexOf(d)!==-1||[P_,gT].indexOf(c)!==-1&&[P_,T_].indexOf(d)!==-1||[T_,xT].indexOf(c)!==-1&&d===T_||P7.indexOf(c)!==-1&&[j7,fy].indexOf(d)!==-1||P7.indexOf(d)!==-1&&c===Ay||qf.indexOf(c)!==-1&&qf.indexOf(d)!==-1||c===Sg&&qf.indexOf(d)!==-1||qf.concat(kc).indexOf(c)!==-1&&d===O1&&Fye.indexOf(t[l])===-1||qf.concat(kc).indexOf(d)!==-1&&c===F1)return Dn;if(c===G5&&d===G5){for(var A=r[s],m=1;A>0&&(A--,e[A]===G5);)m++;if(m%2!==0)return Dn}return c===TN&&d===kN?Dn:FN},Lye=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Rye(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[kc,Lm,AZ].indexOf(l)!==-1?Gb:l}));var i=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,i]},Uye=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===hZ,this.start=n,this.end=a}return t.prototype.slice=function(){return ri.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Qye=function(t,e){var r=c4(t),n=Lye(r,e),a=n[0],s=n[1],i=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=Dn;u<l&&(d=Mye(r,s,a,++u,i))===Dn;);if(d!==Dn||u===l){var f=new Uye(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Vye=1,Hye=2,tw=4,k7=8,LE=10,F7=47,Vy=92,$ye=9,Kye=32,ON=34,D1=61,Gye=35,qye=36,zye=37,DN=39,RN=40,R1=41,Wye=95,ac=45,Xye=33,Yye=60,Jye=62,Zye=64,ebe=91,tbe=93,rbe=61,nbe=123,MN=63,abe=125,O7=124,sbe=126,ibe=128,D7=65533,z5=42,Km=43,obe=44,lbe=58,cbe=59,qb=46,ube=0,dbe=8,fbe=11,Abe=14,hbe=31,mbe=127,tf=-1,pZ=48,gZ=97,xZ=101,pbe=102,gbe=117,xbe=122,vZ=65,yZ=69,bZ=70,vbe=85,ybe=90,dl=function(t){return t>=pZ&&t<=57},bbe=function(t){return t>=55296&&t<=57343},jg=function(t){return dl(t)||t>=vZ&&t<=bZ||t>=gZ&&t<=pbe},wbe=function(t){return t>=gZ&&t<=xbe},Nbe=function(t){return t>=vZ&&t<=ybe},Cbe=function(t){return wbe(t)||Nbe(t)},_be=function(t){return t>=ibe},LN=function(t){return t===LE||t===$ye||t===Kye},UE=function(t){return Cbe(t)||_be(t)||t===Wye},R7=function(t){return UE(t)||dl(t)||t===ac},Ebe=function(t){return t>=ube&&t<=dbe||t===fbe||t>=Abe&&t<=hbe||t===mbe},Kh=function(t,e){return t!==Vy?!1:e!==LE},UN=function(t,e,r){return t===ac?UE(e)||Kh(e,r):UE(t)?!0:!!(t===Vy&&Kh(t,e))},W5=function(t,e,r){return t===Km||t===ac?dl(e)?!0:e===qb&&dl(r):dl(t===qb?e:t)},Sbe=function(t){var e=0,r=1;(t[e]===Km||t[e]===ac)&&(t[e]===ac&&(r=-1),e++);for(var n=[];dl(t[e]);)n.push(t[e++]);var a=n.length?parseInt(ri.apply(void 0,n),10):0;t[e]===qb&&e++;for(var s=[];dl(t[e]);)s.push(t[e++]);var i=s.length,l=i?parseInt(ri.apply(void 0,s),10):0;(t[e]===yZ||t[e]===xZ)&&e++;var c=1;(t[e]===Km||t[e]===ac)&&(t[e]===ac&&(c=-1),e++);for(var u=[];dl(t[e]);)u.push(t[e++]);var d=u.length?parseInt(ri.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-i))*Math.pow(10,c*d)},Ibe={type:2},jbe={type:3},Bbe={type:4},Pbe={type:13},Tbe={type:8},kbe={type:21},Fbe={type:9},Obe={type:10},Dbe={type:11},Rbe={type:12},Mbe={type:14},QN={type:23},Lbe={type:1},Ube={type:25},Qbe={type:24},Vbe={type:26},Hbe={type:27},$be={type:28},Kbe={type:29},Gbe={type:31},NT={type:32},wZ=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(c4(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==NT;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ON:return this.consumeStringToken(ON);case Gye:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(R7(r)||Kh(n,a)){var s=UN(r,n,a)?Hye:Vye,i=this.consumeName();return{type:5,value:i,flags:s}}break;case qye:if(this.peekCodePoint(0)===D1)return this.consumeCodePoint(),Pbe;break;case DN:return this.consumeStringToken(DN);case RN:return Ibe;case R1:return jbe;case z5:if(this.peekCodePoint(0)===D1)return this.consumeCodePoint(),Mbe;break;case Km:if(W5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case obe:return Bbe;case ac:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(W5(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(UN(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===ac&&u===Jye)return this.consumeCodePoint(),this.consumeCodePoint(),Qbe;break;case qb:if(W5(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case F7:if(this.peekCodePoint(0)===z5)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===z5&&(d=this.consumeCodePoint(),d===F7))return this.consumeToken();if(d===tf)return this.consumeToken()}break;case lbe:return Vbe;case cbe:return Hbe;case Yye:if(this.peekCodePoint(0)===Xye&&this.peekCodePoint(1)===ac&&this.peekCodePoint(2)===ac)return this.consumeCodePoint(),this.consumeCodePoint(),Ube;break;case Zye:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),A=this.peekCodePoint(2);if(UN(f,h,A)){var i=this.consumeName();return{type:7,value:i}}break;case ebe:return $be;case Vy:if(Kh(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case tbe:return Kbe;case rbe:if(this.peekCodePoint(0)===D1)return this.consumeCodePoint(),Tbe;break;case nbe:return Dbe;case abe:return Rbe;case gbe:case vbe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===Km&&(jg(p)||p===MN)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case O7:if(this.peekCodePoint(0)===D1)return this.consumeCodePoint(),Fbe;if(this.peekCodePoint(0)===O7)return this.consumeCodePoint(),kbe;break;case sbe:if(this.peekCodePoint(0)===D1)return this.consumeCodePoint(),Obe;break;case tf:return NT}return LN(e)?(this.consumeWhiteSpace(),Gbe):dl(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):UE(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ri(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();jg(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===MN&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(ri.apply(void 0,e.map(function(c){return c===MN?pZ:c})),16),s=parseInt(ri.apply(void 0,e.map(function(c){return c===MN?bZ:c})),16);return{type:30,start:a,end:s}}var i=parseInt(ri.apply(void 0,e),16);if(this.peekCodePoint(0)===ac&&jg(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];jg(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(ri.apply(void 0,l),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===RN?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===RN?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===tf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===DN||r===ON){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===tf||this.peekCodePoint(0)===R1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),QN)}for(;;){var a=this.consumeCodePoint();if(a===tf||a===R1)return{type:22,value:ri.apply(void 0,e)};if(LN(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===tf||this.peekCodePoint(0)===R1?(this.consumeCodePoint(),{type:22,value:ri.apply(void 0,e)}):(this.consumeBadUrlRemnants(),QN);if(a===ON||a===DN||a===RN||Ebe(a))return this.consumeBadUrlRemnants(),QN;if(a===Vy)if(Kh(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),QN;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;LN(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===R1||e===tf)return;Kh(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=ri.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===tf||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===LE)return this._value.splice(0,n),Lbe;if(a===Vy){var s=this._value[n+1];s!==tf&&s!==void 0&&(s===LE?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Kh(a,s)&&(r+=this.consumeStringSlice(n),r+=ri(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=tw,n=this.peekCodePoint(0);for((n===Km||n===ac)&&e.push(this.consumeCodePoint());dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===qb&&dl(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=k7;dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===yZ||n===xZ)&&((a===Km||a===ac)&&dl(s)||dl(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=k7;dl(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Sbe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(UN(a,s,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===zye?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(jg(e)){for(var r=ri(e);jg(this.peekCodePoint(0))&&r.length<6;)r+=ri(this.consumeCodePoint());LN(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||bbe(n)||n>1114111?D7:n}return e===tf?D7:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(R7(r))e+=ri(r);else if(Kh(r,this.peekCodePoint(0)))e+=ri(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),NZ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new wZ;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||zbe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?NT:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),rw=function(t){return t.type===15},Dv=function(t){return t.type===17},Ia=function(t){return t.type===20},qbe=function(t){return t.type===0},CT=function(t,e){return Ia(t)&&t.value===e},CZ=function(t){return t.type!==31},ov=function(t){return t.type!==31&&t.type!==4},kf=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},zbe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},V0=function(t){return t.type===17||t.type===15},gi=function(t){return t.type===16||V0(t)},_Z=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Ho={type:17,number:0,flags:tw},C6={type:16,number:50,flags:tw},c0={type:16,number:100,flags:tw},hy=function(t,e,r){var n=t[0],a=t[1];return[Qa(n,e),Qa(typeof a<"u"?a:n,r)]},Qa=function(t,e){if(t.type===16)return t.number/100*e;if(rw(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},EZ="deg",SZ="grad",IZ="rad",jZ="turn",u4={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case EZ:return Math.PI*e.number/180;case SZ:return Math.PI/200*e.number;case IZ:return e.number;case jZ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},BZ=function(t){return t.type===15&&(t.unit===EZ||t.unit===SZ||t.unit===IZ||t.unit===jZ)},PZ=function(t){var e=t.filter(Ia).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ho,Ho];case"to top":case"bottom":return Fu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ho,c0];case"to right":case"left":return Fu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[c0,c0];case"to bottom":case"top":return Fu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[c0,Ho];case"to left":case"right":return Fu(270)}return 0},Fu=function(t){return Math.PI*t/180},S0={name:"color",parse:function(t,e){if(e.type===18){var r=Wbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return u0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return u0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return u0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return u0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var l=CA[e.value.toUpperCase()];if(typeof l<"u")return l}return CA.TRANSPARENT}},I0=function(t){return(255&t)===0},ro=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},u0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},M7=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},L7=function(t,e){var r=e.filter(ov);if(r.length===3){var n=r.map(M7),a=n[0],s=n[1],i=n[2];return u0(a,s,i,1)}if(r.length===4){var l=r.map(M7),a=l[0],s=l[1],i=l[2],c=l[3];return u0(a,s,i,c)}return 0};function X5(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var U7=function(t,e){var r=e.filter(ov),n=r[0],a=r[1],s=r[2],i=r[3],l=(n.type===17?Fu(n.number):u4.parse(t,n))/(Math.PI*2),c=gi(a)?a.number/100:0,u=gi(s)?s.number/100:0,d=typeof i<"u"&&gi(i)?Qa(i,1):1;if(c===0)return u0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,A=X5(h,f,l+1/3),m=X5(h,f,l),p=X5(h,f,l-1/3);return u0(A*255,m*255,p*255,d)},Wbe={hsl:U7,hsla:U7,rgb:L7,rgba:L7},Hy=function(t,e){return S0.parse(t,NZ.create(e).parseComponentValue())},CA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Xbe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ia(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ybe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d4=function(t,e){var r=S0.parse(t,e[0]),n=e[1];return n&&gi(n)?{color:r,stop:n}:{color:r,stop:null}},Q7=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Ho),n.stop===null&&(n.stop=c0);for(var a=[],s=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var c=Qa(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],A=(d-h)/(f+1),m=1;m<=f;m++)a[u+m-1]=A*m;u=null}}return t.map(function(p,g){var x=p.color;return{color:x,stop:Math.max(Math.min(1,a[g]/e),0)}})},Jbe=function(t,e,r){var n=e/2,a=r/2,s=Qa(t[0],e)-n,i=a-Qa(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Zbe=function(t,e,r){var n=typeof t=="number"?t:Jbe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,i-c,i+c]},hd=function(t,e){return Math.sqrt(t*t+e*e)},V7=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,l){var c=l[0],u=l[1],d=hd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},e2e=function(t,e,r,n,a){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=i=Math.min(hd(e,r),hd(e,r-a),hd(e-n,r),hd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=V7(n,a,e,r,!0),u=c[0],d=c[1];s=hd(u-e,(d-r)/l),i=l*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=i=Math.max(hd(e,r),hd(e,r-a),hd(e-n,r),hd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=V7(n,a,e,r,!1),u=f[0],d=f[1];s=hd(u-e,(d-r)/l),i=l*s}break}return Array.isArray(t.size)&&(s=Qa(t.size[0],n),i=t.size.length===2?Qa(t.size[1],a):s),[s,i]},t2e=function(t,e){var r=Fu(180),n=[];return kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=PZ(a);return}else if(BZ(i)){r=u4.parse(t,i);return}}var l=d4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},VN=function(t,e){var r=Fu(180),n=[];return kf(e).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=PZ(a);return}else if(BZ(i)){r=(u4.parse(t,i)+Fu(270))%Fu(360);return}}var l=d4(t,a);n.push(l)}),{angle:r,stops:n,type:1}},r2e=function(t,e){var r=Fu(180),n=[],a=1,s=0,i=3,l=[];return kf(e).forEach(function(c,u){var d=c[0];if(u===0){if(Ia(d)&&d.value==="linear"){a=1;return}else if(Ia(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=S0.parse(t,d.values[0]);n.push({stop:Ho,color:f})}else if(d.name==="to"){var f=S0.parse(t,d.values[0]);n.push({stop:c0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(ov);if(h.length===2){var f=S0.parse(t,h[1]),A=h[0];Dv(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:f})}}}}),a===1?{angle:(r+Fu(180))%Fu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:l,type:a}},TZ="closest-side",kZ="farthest-side",FZ="closest-corner",OZ="farthest-corner",DZ="circle",RZ="ellipse",MZ="cover",LZ="contain",n2e=function(t,e){var r=0,n=3,a=[],s=[];return kf(e).forEach(function(i,l){var c=!0;if(l===0){var u=!1;c=i.reduce(function(f,h){if(u)if(Ia(h))switch(h.value){case"center":return s.push(C6),f;case"top":case"left":return s.push(Ho),f;case"right":case"bottom":return s.push(c0),f}else(gi(h)||V0(h))&&s.push(h);else if(Ia(h))switch(h.value){case DZ:return r=0,!1;case RZ:return r=1,!1;case"at":return u=!0,!1;case TZ:return n=0,!1;case MZ:case kZ:return n=1,!1;case LZ:case FZ:return n=2,!1;case OZ:return n=3,!1}else if(V0(h)||gi(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=d4(t,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},HN=function(t,e){var r=0,n=3,a=[],s=[];return kf(e).forEach(function(i,l){var c=!0;if(l===0?c=i.reduce(function(d,f){if(Ia(f))switch(f.value){case"center":return s.push(C6),!1;case"top":case"left":return s.push(Ho),!1;case"right":case"bottom":return s.push(c0),!1}else if(gi(f)||V0(f))return s.push(f),!1;return d},c):l===1&&(c=i.reduce(function(d,f){if(Ia(f))switch(f.value){case DZ:return r=0,!1;case RZ:return r=1,!1;case LZ:case TZ:return n=0,!1;case kZ:return n=1,!1;case FZ:return n=2,!1;case MZ:case OZ:return n=3,!1}else if(V0(f)||gi(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=d4(t,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},a2e=function(t){return t.type===1},s2e=function(t){return t.type===2},_6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=UZ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function i2e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!UZ[t.name])}var UZ={"linear-gradient":t2e,"-moz-linear-gradient":VN,"-ms-linear-gradient":VN,"-o-linear-gradient":VN,"-webkit-linear-gradient":VN,"radial-gradient":n2e,"-moz-radial-gradient":HN,"-ms-radial-gradient":HN,"-o-radial-gradient":HN,"-webkit-radial-gradient":HN,"-webkit-gradient":r2e},o2e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return ov(n)&&i2e(n)}).map(function(n){return _6.parse(t,n)})}},l2e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ia(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},c2e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return kf(e).map(function(r){return r.filter(gi)}).map(_Z)}},u2e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return kf(e).map(function(r){return r.filter(Ia).map(function(n){return n.value}).join(" ")}).map(d2e)}},d2e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Rx;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Rx||(Rx={}));var f2e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return kf(e).map(function(r){return r.filter(A2e)})}},A2e=function(t){return Ia(t)||gi(t)},f4=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},h2e=f4("top"),m2e=f4("right"),p2e=f4("bottom"),g2e=f4("left"),A4=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return _Z(r.filter(gi))}}},x2e=A4("top-left"),v2e=A4("top-right"),y2e=A4("bottom-right"),b2e=A4("bottom-left"),h4=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w2e=h4("top"),N2e=h4("right"),C2e=h4("bottom"),_2e=h4("left"),m4=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return rw(r)?r.number:0}}},E2e=m4("top"),S2e=m4("right"),I2e=m4("bottom"),j2e=m4("left"),B2e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},P2e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},T2e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ia).reduce(function(r,n){return r|k2e(n.value)},0)}},k2e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},F2e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},O2e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},QE;(function(t){t.NORMAL="normal",t.STRICT="strict"})(QE||(QE={}));var D2e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return QE.STRICT;case"normal":default:return QE.NORMAL}}},R2e={name:"line-height",initialValue:"normal",prefix:!1,type:4},H7=function(t,e){return Ia(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:gi(t)?Qa(t,e):e},M2e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:_6.parse(t,e)}},L2e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_T={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},p4=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},U2e=p4("top"),Q2e=p4("right"),V2e=p4("bottom"),H2e=p4("left"),$2e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ia).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},K2e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},g4=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},G2e=g4("top"),q2e=g4("right"),z2e=g4("bottom"),W2e=g4("left"),X2e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Y2e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},J2e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&CT(e[0],"none")?[]:kf(e).map(function(r){for(var n={color:CA.TRANSPARENT,offsetX:Ho,offsetY:Ho,blur:Ho},a=0,s=0;s<r.length;s++){var i=r[s];V0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=S0.parse(t,i)}return n})}},Z2e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ewe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=nwe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},twe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},rwe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,i,l]:null},nwe={matrix:twe,matrix3d:rwe},$7={type:16,number:50,flags:tw},awe=[$7,$7],swe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(gi);return r.length!==2?awe:[r[0],r[1]]}},iwe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},$y;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})($y||($y={}));var owe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return $y.BREAK_ALL;case"keep-all":return $y.KEEP_ALL;case"normal":default:return $y.NORMAL}}},lwe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Dv(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},QZ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},cwe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Dv(e)?e.number:1}},uwe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dwe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ia).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},fwe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},Awe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hwe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Dv(e))return e.number;if(Ia(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},mwe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ia).map(function(r){return r.value})}},pwe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Di=function(t,e){return(t&e)!==0},gwe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},xwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(CZ),s=0;s<a.length;s++){var i=a[s],l=a[s+1];if(i.type===20){var c=l&&Dv(l)?l.number:1;n.push({counter:i.value,increment:c})}}return n}},vwe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(CZ),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ia(s)&&s.value!=="none"){var l=i&&Dv(i)?i.number:0;r.push({counter:s.value,reset:l})}}return r}},ywe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(rw).map(function(r){return QZ.parse(t,r)})}},bwe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(qbe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,l=a[s+1].value;n.push({open:i,close:l})}return n}},K7=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},wwe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&CT(e[0],"none")?[]:kf(e).map(function(r){for(var n={color:255,offsetX:Ho,offsetY:Ho,blur:Ho,spread:Ho,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];CT(i,"inset")?n.inset=!0:V0(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=S0.parse(t,i)}return n})}},Nwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ia).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},Cwe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},_we={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return rw(e)?e.number:0}},Ewe=function(){function t(e,r){var n,a;this.animationDuration=Tr(e,ywe,r.animationDuration),this.backgroundClip=Tr(e,Xbe,r.backgroundClip),this.backgroundColor=Tr(e,Ybe,r.backgroundColor),this.backgroundImage=Tr(e,o2e,r.backgroundImage),this.backgroundOrigin=Tr(e,l2e,r.backgroundOrigin),this.backgroundPosition=Tr(e,c2e,r.backgroundPosition),this.backgroundRepeat=Tr(e,u2e,r.backgroundRepeat),this.backgroundSize=Tr(e,f2e,r.backgroundSize),this.borderTopColor=Tr(e,h2e,r.borderTopColor),this.borderRightColor=Tr(e,m2e,r.borderRightColor),this.borderBottomColor=Tr(e,p2e,r.borderBottomColor),this.borderLeftColor=Tr(e,g2e,r.borderLeftColor),this.borderTopLeftRadius=Tr(e,x2e,r.borderTopLeftRadius),this.borderTopRightRadius=Tr(e,v2e,r.borderTopRightRadius),this.borderBottomRightRadius=Tr(e,y2e,r.borderBottomRightRadius),this.borderBottomLeftRadius=Tr(e,b2e,r.borderBottomLeftRadius),this.borderTopStyle=Tr(e,w2e,r.borderTopStyle),this.borderRightStyle=Tr(e,N2e,r.borderRightStyle),this.borderBottomStyle=Tr(e,C2e,r.borderBottomStyle),this.borderLeftStyle=Tr(e,_2e,r.borderLeftStyle),this.borderTopWidth=Tr(e,E2e,r.borderTopWidth),this.borderRightWidth=Tr(e,S2e,r.borderRightWidth),this.borderBottomWidth=Tr(e,I2e,r.borderBottomWidth),this.borderLeftWidth=Tr(e,j2e,r.borderLeftWidth),this.boxShadow=Tr(e,wwe,r.boxShadow),this.color=Tr(e,B2e,r.color),this.direction=Tr(e,P2e,r.direction),this.display=Tr(e,T2e,r.display),this.float=Tr(e,F2e,r.cssFloat),this.fontFamily=Tr(e,fwe,r.fontFamily),this.fontSize=Tr(e,Awe,r.fontSize),this.fontStyle=Tr(e,pwe,r.fontStyle),this.fontVariant=Tr(e,mwe,r.fontVariant),this.fontWeight=Tr(e,hwe,r.fontWeight),this.letterSpacing=Tr(e,O2e,r.letterSpacing),this.lineBreak=Tr(e,D2e,r.lineBreak),this.lineHeight=Tr(e,R2e,r.lineHeight),this.listStyleImage=Tr(e,M2e,r.listStyleImage),this.listStylePosition=Tr(e,L2e,r.listStylePosition),this.listStyleType=Tr(e,_T,r.listStyleType),this.marginTop=Tr(e,U2e,r.marginTop),this.marginRight=Tr(e,Q2e,r.marginRight),this.marginBottom=Tr(e,V2e,r.marginBottom),this.marginLeft=Tr(e,H2e,r.marginLeft),this.opacity=Tr(e,cwe,r.opacity);var s=Tr(e,$2e,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Tr(e,K2e,r.overflowWrap),this.paddingTop=Tr(e,G2e,r.paddingTop),this.paddingRight=Tr(e,q2e,r.paddingRight),this.paddingBottom=Tr(e,z2e,r.paddingBottom),this.paddingLeft=Tr(e,W2e,r.paddingLeft),this.paintOrder=Tr(e,Nwe,r.paintOrder),this.position=Tr(e,Y2e,r.position),this.textAlign=Tr(e,X2e,r.textAlign),this.textDecorationColor=Tr(e,uwe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Tr(e,dwe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Tr(e,J2e,r.textShadow),this.textTransform=Tr(e,Z2e,r.textTransform),this.transform=Tr(e,ewe,r.transform),this.transformOrigin=Tr(e,swe,r.transformOrigin),this.visibility=Tr(e,iwe,r.visibility),this.webkitTextStrokeColor=Tr(e,Cwe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Tr(e,_we,r.webkitTextStrokeWidth),this.wordBreak=Tr(e,owe,r.wordBreak),this.zIndex=Tr(e,lwe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return I0(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Di(this.display,4)||Di(this.display,33554432)||Di(this.display,268435456)||Di(this.display,536870912)||Di(this.display,67108864)||Di(this.display,134217728)},t}(),Swe=function(){function t(e,r){this.content=Tr(e,gwe,r.content),this.quotes=Tr(e,bwe,r.quotes)}return t}(),G7=function(){function t(e,r){this.counterIncrement=Tr(e,xwe,r.counterIncrement),this.counterReset=Tr(e,vwe,r.counterReset)}return t}(),Tr=function(t,e,r){var n=new wZ,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new NZ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Ia(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return u4.parse(t,s.parseComponentValue());case"color":return S0.parse(t,s.parseComponentValue());case"image":return _6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return V0(l)?l:Ho;case"length-percentage":var c=s.parseComponentValue();return gi(c)?c:Ho;case"time":return QZ.parse(t,s.parseComponentValue())}break}},Iwe="data-html2canvas-debug",jwe=function(t){var e=t.getAttribute(Iwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ET=function(t,e){var r=jwe(t);return r===1||e===r},Ff=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,ET(r,3))debugger;this.styles=new Ewe(e,window.getComputedStyle(r,null)),jT(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=l4(this.context,r),ET(r,4)&&(this.flags|=16)}return t}(),Bwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",q7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",my=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $N=0;$N<q7.length;$N++)my[q7.charCodeAt($N)]=$N;var Pwe=function(t){var e=t.length*.75,r=t.length,n,a=0,s,i,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=my[t.charCodeAt(n)],i=my[t.charCodeAt(n+1)],l=my[t.charCodeAt(n+2)],c=my[t.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},Twe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},kwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},rp=5,E6=11,Y5=2,Fwe=E6-rp,VZ=65536>>rp,Owe=1<<rp,J5=Owe-1,Dwe=1024>>rp,Rwe=VZ+Dwe,Mwe=Rwe,Lwe=32,Uwe=Mwe+Lwe,Qwe=65536>>E6,Vwe=1<<Fwe,Hwe=Vwe-1,z7=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},$we=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Kwe=function(t,e){var r=Pwe(t),n=Array.isArray(r)?kwe(r):new Uint32Array(r),a=Array.isArray(r)?Twe(r):new Uint16Array(r),s=24,i=z7(a,s/2,n[4]/2),l=n[5]===2?z7(a,(s+n[4])/2):$we(n,Math.ceil((s+n[4])/4));return new Gwe(n[0],n[1],n[2],n[3],i,l)},Gwe=function(){function t(e,r,n,a,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>rp],r=(r<<Y5)+(e&J5),this.data[r];if(e<=65535)return r=this.index[VZ+(e-55296>>rp)],r=(r<<Y5)+(e&J5),this.data[r];if(e<this.highStart)return r=Uwe-Qwe+(e>>E6),r=this.index[r],r+=e>>rp&Hwe,r=this.index[r],r=(r<<Y5)+(e&J5),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),W7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var KN=0;KN<W7.length;KN++)qwe[W7.charCodeAt(KN)]=KN;var zwe=1,Z5=2,ej=3,X7=4,Y7=5,Wwe=7,J7=8,tj=9,rj=10,Z7=11,e9=12,t9=13,r9=14,nj=15,Xwe=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Ywe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=t[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Jwe=Kwe(Bwe),Eu="",aj="",Zwe=function(t){return Jwe.get(t)},eNe=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],i=e[r];if(s===Z5&&i===ej)return Eu;if(s===Z5||s===ej||s===X7||i===Z5||i===ej||i===X7)return aj;if(s===J7&&[J7,tj,Z7,e9].indexOf(i)!==-1||(s===Z7||s===tj)&&(i===tj||i===rj)||(s===e9||s===rj)&&i===rj||i===t9||i===Y7||i===Wwe||s===zwe)return Eu;if(s===t9&&i===r9){for(;a===Y7;)a=e[--n];if(a===r9)return Eu}if(s===nj&&i===nj){for(var l=0;a===nj;)l++,a=e[--n];if(l%2===0)return Eu}return aj},tNe=function(t){var e=Xwe(t),r=e.length,n=0,a=0,s=e.map(Zwe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Eu;n<r&&(i=eNe(e,s,++n))===Eu;);if(i!==Eu||n===r){var l=Ywe.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},rNe=function(t){for(var e=tNe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},nNe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},aNe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=c4(n.data).map(function(c){return ri(c)}),s=0,i={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return t.body.removeChild(e),l},sNe=function(){return typeof new Image().crossOrigin<"u"},iNe=function(){return typeof new XMLHttpRequest().responseType=="string"},oNe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},n9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},lNe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var i=ST(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),a9(i).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",n9(c)?a9(ST(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),n9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ST=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(a),i},a9=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Oo={get SUPPORT_RANGE_BOUNDS(){var t=nNe(document);return Object.defineProperty(Oo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Oo.SUPPORT_RANGE_BOUNDS&&aNe(document);return Object.defineProperty(Oo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=oNe(document);return Object.defineProperty(Oo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?lNe(document):Promise.resolve(!1);return Object.defineProperty(Oo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=sNe();return Object.defineProperty(Oo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=iNe();return Object.defineProperty(Oo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Oo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Oo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Ky=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),cNe=function(t,e,r,n){var a=fNe(e,r),s=[],i=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Oo.SUPPORT_RANGE_BOUNDS){var c=s9(n,i,l.length).getClientRects();if(c.length>1){var u=S6(l),d=0;u.forEach(function(h){s.push(new Ky(h,MA.fromDOMRectList(t,s9(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Ky(l,MA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new Ky(l,uNe(t,n))),n=f}else Oo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),s},uNe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=l4(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return MA.EMPTY},s9=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},S6=function(t){if(Oo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return rNe(t)},dNe=function(t,e){if(Oo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return hNe(t,e)},fNe=function(t,e){return e.letterSpacing!==0?S6(t):dNe(t,e)},ANe=[32,160,4961,65792,65793,4153,4241],hNe=function(t,e){for(var r=Qye(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),l=c4(i),c="";l.forEach(function(u){ANe.indexOf(u)===-1?c+=ri(u):(c.length&&n.push(c),n.push(ri(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},mNe=function(){function t(e,r,n){this.text=pNe(r.data,n.textTransform),this.textBounds=cNe(e,this.text,n,r)}return t}(),pNe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(gNe,xNe);case 2:return t.toUpperCase();default:return t}},gNe=/(^|\s|:|-|\(|\))([a-z])/g,xNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},HZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(Ff),$Z=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(Ff),KZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,i=l4(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(Ff),GZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ff),IT=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(Ff),vNe=[{type:15,flags:0,unit:"px",number:3}],yNe=[{type:16,flags:0,number:50}],bNe=function(t){return t.width>t.height?new MA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new MA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},wNe=function(t){var e=t.type===NNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},VE="checkbox",HE="radio",NNe="password",i9=707406591,I6=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=wNe(n),(a.type===VE||a.type===HE)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=bNe(a.bounds)),a.type){case VE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=vNe;break;case HE:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=yNe;break}return a}return e}(Ff),qZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(Ff),zZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(Ff),WZ=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=YZ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Hy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):CA.TRANSPARENT,i=n.contentWindow.document.body?Hy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):CA.TRANSPARENT;a.backgroundColor=I0(s)?I0(i)?a.styles.backgroundColor:i:s}}catch{}return a}return e}(Ff),CNe=["OL","UL","MENU"],k_=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,JZ(a)&&a.data.trim().length>0)r.textNodes.push(new mNe(t,a,r.styles));else if(vx(a))if(ree(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return k_(t,l,r,n)});else{var i=XZ(t,a);i.styles.isVisible()&&(_Ne(a,i,n)?i.flags|=4:ENe(i.styles)&&(i.flags|=2),CNe.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?k_(t,a.shadowRoot,i,n):!$E(a)&&!ZZ(a)&&!KE(a)&&k_(t,a,i,n))}},XZ=function(t,e){return BT(e)?new HZ(t,e):eee(e)?new $Z(t,e):ZZ(e)?new KZ(t,e):SNe(e)?new GZ(t,e):INe(e)?new IT(t,e):jNe(e)?new I6(t,e):KE(e)?new qZ(t,e):$E(e)?new zZ(t,e):tee(e)?new WZ(t,e):new Ff(t,e)},YZ=function(t,e){var r=XZ(t,e);return r.flags|=4,k_(t,e,r,r),r},_Ne=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||j6(t)&&r.styles.isTransparent()},ENe=function(t){return t.isPositioned()||t.isFloating()},JZ=function(t){return t.nodeType===Node.TEXT_NODE},vx=function(t){return t.nodeType===Node.ELEMENT_NODE},jT=function(t){return vx(t)&&typeof t.style<"u"&&!F_(t)},F_=function(t){return typeof t.className=="object"},SNe=function(t){return t.tagName==="LI"},INe=function(t){return t.tagName==="OL"},jNe=function(t){return t.tagName==="INPUT"},BNe=function(t){return t.tagName==="HTML"},ZZ=function(t){return t.tagName==="svg"},j6=function(t){return t.tagName==="BODY"},eee=function(t){return t.tagName==="CANVAS"},o9=function(t){return t.tagName==="VIDEO"},BT=function(t){return t.tagName==="IMG"},tee=function(t){return t.tagName==="IFRAME"},l9=function(t){return t.tagName==="STYLE"},PNe=function(t){return t.tagName==="SCRIPT"},$E=function(t){return t.tagName==="TEXTAREA"},KE=function(t){return t.tagName==="SELECT"},ree=function(t){return t.tagName==="SLOT"},c9=function(t){return t.tagName.indexOf("-")>0},TNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var i=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];i.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),i},t}(),u9={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},d9={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},kNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},FNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Bg=function(t,e,r,n,a,s){return t<e||t>r?zb(t,a,s.length>0):n.integers.reduce(function(i,l,c){for(;t>=l;)t-=l,i+=n.values[c];return i},"")+s},nee=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Js=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(nee(Math.abs(t),s,n,function(i){return ri(Math.floor(i%s)+e)})+a)},gm=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return nee(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},ex=1,Qh=2,Vh=4,py=8,zf=function(t,e,r,n,a,s){if(t<-9999||t>9999)return zb(t,4,a.length>0);var i=Math.abs(t),l=a;if(i===0)return e[0]+l;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Di(s,ex)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&Di(s,Qh)||u===1&&c===1&&Di(s,Vh)&&t>100||u===1&&c>1&&Di(s,py)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},f9="",A9="",h9="",sj="",zb=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=Js(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return gm(t,"",a);case 6:return Bg(t,1,3999,u9,3,n).toLowerCase();case 7:return Bg(t,1,3999,u9,3,n);case 8:return Js(t,945,969,!1,n);case 9:return Js(t,97,122,!1,n);case 10:return Js(t,65,90,!1,n);case 11:return Js(t,1632,1641,!0,n);case 12:case 49:return Bg(t,1,9999,d9,3,n);case 35:return Bg(t,1,9999,d9,3,n).toLowerCase();case 13:return Js(t,2534,2543,!0,n);case 14:case 30:return Js(t,6112,6121,!0,n);case 15:return gm(t,"",a);case 16:return gm(t,"",a);case 17:case 48:return zf(t,"",f9,"",a,Qh|Vh|py);case 47:return zf(t,"",A9,"",a,ex|Qh|Vh|py);case 42:return zf(t,"",f9,"",a,Qh|Vh|py);case 41:return zf(t,"",A9,"",a,ex|Qh|Vh|py);case 26:return zf(t,"","",h9,a,0);case 25:return zf(t,"","",h9,a,ex|Qh|Vh);case 31:return zf(t,"","",sj,s,ex|Qh|Vh);case 33:return zf(t,"","",sj,s,0);case 32:return zf(t,"","",sj,s,ex|Qh|Vh);case 18:return Js(t,2406,2415,!0,n);case 20:return Bg(t,1,19999,FNe,3,n);case 21:return Js(t,2790,2799,!0,n);case 22:return Js(t,2662,2671,!0,n);case 22:return Bg(t,1,10999,kNe,3,n);case 23:return gm(t,"");case 24:return gm(t,"");case 27:return Js(t,3302,3311,!0,n);case 28:return gm(t,"",a);case 29:return gm(t,"",a);case 34:return Js(t,3792,3801,!0,n);case 37:return Js(t,6160,6169,!0,n);case 38:return Js(t,4160,4169,!0,n);case 39:return Js(t,2918,2927,!0,n);case 40:return Js(t,1776,1785,!0,n);case 43:return Js(t,3046,3055,!0,n);case 44:return Js(t,3174,3183,!0,n);case 45:return Js(t,3664,3673,!0,n);case 46:return Js(t,3872,3881,!0,n);case 3:default:return Js(t,48,57,!0,n)}},aee="data-html2canvas-ignore",m9=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new TNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=ONe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=MNe(a).then(function(){return Tl(n,void 0,void 0,function(){var d,f;return ll(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(VNe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,RNe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(UNe(document.doctype)+"<html></html>"),QNe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(ET(e,2))debugger;if(eee(e))return this.createCanvasClone(e);if(o9(e))return this.createVideoClone(e);if(l9(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return BT(r)&&(BT(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),c9(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return ij(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!vx(r)||!PNe(r)&&!r.hasAttribute(aee)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!vx(r)||!l9(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(vx(s)&&ree(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(JZ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&vx(e)&&(jT(e)||F_(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&jT(a)&&(this.clonedReferenceElement=a),j6(a)&&KNe(a);var c=this.counters.parse(new G7(this.context,s)),u=this.resolvePseudoContent(e,a,i,Gy.BEFORE);c9(e)&&(r=!0),o9(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,Gy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||F_(e))&&!tee(e)||r)&&ij(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),($E(e)||KE(e))&&($E(a)||KE(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new G7(this.context,n));var c=new Swe(this.context,n),u=l.createElement("html2canvaspseudoelement");ij(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var h=l.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var A=f.values.filter(Ia);A.length&&u.appendChild(l.createTextNode(e.getAttribute(A[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(ov),p=m[0],g=m[1];if(p&&Ia(p)){var x=s.counters.getCounterValue(p.value),y=g&&Ia(g)?_T.parse(s.context,g.value):3;u.appendChild(l.createTextNode(zb(x,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(ov),p=b[0],w=b[1],g=b[2];if(p&&Ia(p)){var j=s.counters.getCounterValues(p.value),I=g&&Ia(g)?_T.parse(s.context,g.value):3,_=w&&w.type===0?w.value:"",E=j.map(function(P){return zb(P,I,!1)}).join(_);u.appendChild(l.createTextNode(E))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(K7(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(K7(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=PT+" "+TT;var d=a===Gy.BEFORE?" "+PT:" "+TT;return F_(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Gy;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Gy||(Gy={}));var ONe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(aee,"true"),t.body.appendChild(r),r},DNe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},RNe=function(t){return Promise.all([].slice.call(t.images,0).map(DNe))},MNe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},LNe=["all","d","content"],ij=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);LNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},UNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},QNe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},VNe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},HNe=":before",$Ne=":after",PT="___html2canvas___pseudoelement_before",TT="___html2canvas___pseudoelement_after",p9=`{
    content: "" !important;
    display: none !important;
}`,KNe=function(t){GNe(t,"."+PT+HNe+p9+`
         .`+TT+$Ne+p9)},GNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},see=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),qNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(lj(e)||YNe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Tl(this,void 0,void 0,function(){var r,n,a,s,i=this;return ll(this,function(l){switch(l.label){case 0:return r=see.isSameOrigin(e),n=!oj(e)&&this._options.useCORS===!0&&Oo.SUPPORT_CORS_IMAGES&&!r,a=!oj(e)&&!r&&!lj(e)&&typeof this._options.proxy=="string"&&Oo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!oj(e)&&!lj(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(JNe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,i){var l=Oo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),zNe=/^data:image\/svg\+xml/i,WNe=/^data:image\/.*;base64,/i,XNe=/^data:image\/.*/i,YNe=function(t){return Oo.SUPPORT_SVG_DRAWING||!ZNe(t)},oj=function(t){return XNe.test(t)},JNe=function(t){return WNe.test(t)},lj=function(t){return t.substr(0,4)==="blob"},ZNe=function(t){return t.substr(-3).toLowerCase()==="svg"||zNe.test(t)},Br=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Pg=function(t,e,r){return new Br(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},GN=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=Pg(this.start,this.startControl,e),a=Pg(this.startControl,this.endControl,e),s=Pg(this.endControl,this.end,e),i=Pg(n,a,e),l=Pg(a,s,e),c=Pg(i,l,e);return r?new t(this.start,n,i,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Pu=function(t){return t.type===1},eCe=function(){function t(e){var r=e.styles,n=e.bounds,a=hy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],l=hy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=hy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],A=hy(r.borderBottomLeftRadius,n.width,n.height),m=A[0],p=A[1],g=[];g.push((s+c)/n.width),g.push((m+f)/n.width),g.push((i+p)/n.height),g.push((u+h)/n.height);var x=Math.max.apply(Math,g);x>1&&(s/=x,i/=x,c/=x,u/=x,f/=x,h/=x,m/=x,p/=x);var y=n.width-c,b=n.height-h,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,E=r.borderBottomWidth,S=r.borderLeftWidth,O=Qa(r.paddingTop,e.bounds.width),P=Qa(r.paddingRight,e.bounds.width),T=Qa(r.paddingBottom,e.bounds.width),F=Qa(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?is(n.left+S/3,n.top+I/3,s-S/3,i-I/3,ua.TOP_LEFT):new Br(n.left+S/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?is(n.left+y,n.top+I/3,c-_/3,u-I/3,ua.TOP_RIGHT):new Br(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?is(n.left+w,n.top+b,f-_/3,h-E/3,ua.BOTTOM_RIGHT):new Br(n.left+n.width-_/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?is(n.left+S/3,n.top+j,m-S/3,p-E/3,ua.BOTTOM_LEFT):new Br(n.left+S/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?is(n.left+S*2/3,n.top+I*2/3,s-S*2/3,i-I*2/3,ua.TOP_LEFT):new Br(n.left+S*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?is(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,ua.TOP_RIGHT):new Br(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?is(n.left+w,n.top+b,f-_*2/3,h-E*2/3,ua.BOTTOM_RIGHT):new Br(n.left+n.width-_*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?is(n.left+S*2/3,n.top+j,m-S*2/3,p-E*2/3,ua.BOTTOM_LEFT):new Br(n.left+S*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=s>0||i>0?is(n.left+S/2,n.top+I/2,s-S/2,i-I/2,ua.TOP_LEFT):new Br(n.left+S/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?is(n.left+y,n.top+I/2,c-_/2,u-I/2,ua.TOP_RIGHT):new Br(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?is(n.left+w,n.top+b,f-_/2,h-E/2,ua.BOTTOM_RIGHT):new Br(n.left+n.width-_/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=m>0||p>0?is(n.left+S/2,n.top+j,m-S/2,p-E/2,ua.BOTTOM_LEFT):new Br(n.left+S/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||i>0?is(n.left,n.top,s,i,ua.TOP_LEFT):new Br(n.left,n.top),this.topRightBorderBox=c>0||u>0?is(n.left+y,n.top,c,u,ua.TOP_RIGHT):new Br(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?is(n.left+w,n.top+b,f,h,ua.BOTTOM_RIGHT):new Br(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?is(n.left,n.top+j,m,p,ua.BOTTOM_LEFT):new Br(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?is(n.left+S,n.top+I,Math.max(0,s-S),Math.max(0,i-I),ua.TOP_LEFT):new Br(n.left+S,n.top+I),this.topRightPaddingBox=c>0||u>0?is(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),ua.TOP_RIGHT):new Br(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||h>0?is(n.left+Math.min(w,n.width-S),n.top+Math.min(b,n.height-E),Math.max(0,f-_),Math.max(0,h-E),ua.BOTTOM_RIGHT):new Br(n.left+n.width-_,n.top+n.height-E),this.bottomLeftPaddingBox=m>0||p>0?is(n.left+S,n.top+Math.min(j,n.height-E),Math.max(0,m-S),Math.max(0,p-E),ua.BOTTOM_LEFT):new Br(n.left+S,n.top+n.height-E),this.topLeftContentBox=s>0||i>0?is(n.left+S+F,n.top+I+O,Math.max(0,s-(S+F)),Math.max(0,i-(I+O)),ua.TOP_LEFT):new Br(n.left+S+F,n.top+I+O),this.topRightContentBox=c>0||u>0?is(n.left+Math.min(y,n.width+S+F),n.top+I+O,y>n.width+S+F?0:c-S+F,u-(I+O),ua.TOP_RIGHT):new Br(n.left+n.width-(_+P),n.top+I+O),this.bottomRightContentBox=f>0||h>0?is(n.left+Math.min(w,n.width-(S+F)),n.top+Math.min(b,n.height+I+O),Math.max(0,f-(_+P)),h-(E+T),ua.BOTTOM_RIGHT):new Br(n.left+n.width-(_+P),n.top+n.height-(E+T)),this.bottomLeftContentBox=m>0||p>0?is(n.left+S+F,n.top+j,Math.max(0,m-(S+F)),p-(E+T),ua.BOTTOM_LEFT):new Br(n.left+S+F,n.top+n.height-(E+T))}return t}(),ua;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ua||(ua={}));var is=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,l=n*s,c=t+r,u=e+n;switch(a){case ua.TOP_LEFT:return new GN(new Br(t,u),new Br(t,u-l),new Br(c-i,e),new Br(c,e));case ua.TOP_RIGHT:return new GN(new Br(t,e),new Br(t+i,e),new Br(c,u-l),new Br(c,u));case ua.BOTTOM_RIGHT:return new GN(new Br(c,e),new Br(c,e+l),new Br(t+i,u),new Br(t,u));case ua.BOTTOM_LEFT:default:return new GN(new Br(c,u),new Br(c-i,u),new Br(t,e+l),new Br(t,e))}},GE=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},tCe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},qE=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},rCe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),qN=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),nCe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),aCe=function(t){return t.type===0},iee=function(t){return t.type===1},sCe=function(t){return t.type===2},g9=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},iCe=function(t,e,r,n,a){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},oee=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),lee=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new eCe(this.container),this.container.styles.opacity<1&&this.effects.push(new nCe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new rCe(n,a,s))}if(this.container.styles.overflowX!==0){var i=GE(this.curves),l=qE(this.curves);g9(i,l)?this.effects.push(new qN(i,6)):(this.effects.push(new qN(i,2)),this.effects.push(new qN(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!iee(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=GE(n.curves),l=qE(n.curves);g9(i,l)||a.unshift(new qN(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Di(c.target,e)})},t}(),kT=function(t,e,r,n){t.container.elements.forEach(function(a){var s=Di(a.flags,4),i=Di(a.flags,2),l=new lee(a,t);Di(a.styles.display,2048)&&n.push(l);var c=Di(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:e,d=new oee(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(h=p,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var A=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),u.positiveZIndex.splice(A,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);kT(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),kT(l,e,r,c);Di(a.flags,8)&&cee(a,c)})},cee=function(t,e){for(var r=t instanceof IT?t.start:1,n=t instanceof IT?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof GZ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=zb(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},oCe=function(t){var e=new lee(t,null),r=new oee(e),n=[];return kT(e,r,r,n),cee(e.container,n),r},x9=function(t,e){switch(e){case 0:return Ou(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ou(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ou(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ou(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lCe=function(t,e){switch(e){case 0:return Ou(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ou(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ou(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ou(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},cCe=function(t,e){switch(e){case 0:return Ou(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ou(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ou(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ou(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},uCe=function(t,e){switch(e){case 0:return zN(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return zN(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return zN(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return zN(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},zN=function(t,e){var r=[];return Pu(t)?r.push(t.subdivide(.5,!1)):r.push(t),Pu(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ou=function(t,e,r,n){var a=[];return Pu(t)?a.push(t.subdivide(.5,!1)):a.push(t),Pu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Pu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Pu(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},uee=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},zE=function(t){var e=t.styles,r=t.bounds,n=Qa(e.paddingLeft,r.width),a=Qa(e.paddingRight,r.width),s=Qa(e.paddingTop,r.width),i=Qa(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+i))},dCe=function(t,e){return t===0?e.bounds:t===2?zE(e):uee(e)},fCe=function(t,e){return t===0?e.bounds:t===2?zE(e):uee(e)},cj=function(t,e,r){var n=dCe(tx(t.styles.backgroundOrigin,e),t),a=fCe(tx(t.styles.backgroundClip,e),t),s=ACe(tx(t.styles.backgroundSize,e),r,n),i=s[0],l=s[1],c=hy(tx(t.styles.backgroundPosition,e),n.width-i,n.height-l),u=hCe(tx(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,l]},Tg=function(t){return Ia(t)&&t.value===Rx.AUTO},WN=function(t){return typeof t=="number"},ACe=function(t,e,r){var n=e[0],a=e[1],s=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(gi(i)&&l&&gi(l))return[Qa(i,r.width),Qa(l,r.height)];var c=WN(s);if(Ia(i)&&(i.value===Rx.CONTAIN||i.value===Rx.COVER)){if(WN(s)){var u=r.width/r.height;return u<s!=(i.value===Rx.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=WN(n),f=WN(a),h=d||f;if(Tg(i)&&(!l||Tg(l))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var A=d?n:a*s,m=f?a:n/s;return[A,m]}var p=d?n:r.width,g=f?a:r.height;return[p,g]}if(c){var x=0,y=0;return gi(i)?x=Qa(i,r.width):gi(l)&&(y=Qa(l,r.height)),Tg(i)?x=y*s:(!l||Tg(l))&&(y=x/s),[x,y]}var b=null,w=null;if(gi(i)?b=Qa(i,r.width):l&&gi(l)&&(w=Qa(l,r.height)),b!==null&&(!l||Tg(l))&&(w=d&&f?b/n*a:r.height),w!==null&&Tg(i)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},tx=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},hCe=function(t,e,r,n,a){var s=e[0],i=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Br(Math.round(n.left),Math.round(n.top+i)),new Br(Math.round(n.left+n.width),Math.round(n.top+i)),new Br(Math.round(n.left+n.width),Math.round(c+n.top+i)),new Br(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new Br(Math.round(n.left+s),Math.round(n.top)),new Br(Math.round(n.left+s+l),Math.round(n.top)),new Br(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Br(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Br(Math.round(n.left+s),Math.round(n.top+i)),new Br(Math.round(n.left+s+l),Math.round(n.top+i)),new Br(Math.round(n.left+s+l),Math.round(n.top+i+c)),new Br(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new Br(Math.round(a.left),Math.round(a.top)),new Br(Math.round(a.left+a.width),Math.round(a.top)),new Br(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Br(Math.round(a.left),Math.round(a.height+a.top))]}},mCe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",v9="Hidden Text",pCe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=mCe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(v9)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(v9)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),dee=function(){function t(e,r){this.context=e,this.options=r}return t}(),gCe=1e4,xCe=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new pCe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),sCe(r)&&(this.ctx.globalAlpha=r.opacity),aCe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),iee(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Tl(this,void 0,void 0,function(){var n;return ll(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Tl(this,void 0,void 0,function(){return ll(this,function(n){switch(n.label){case 0:if(Di(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=S6(r.text);i.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=NCe(r.fontFamily).join(", "),s=rw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return Tl(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h=this;return ll(this,function(A){return a=this.createFontStyle(n),s=a[0],i=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:h.ctx.fillStyle=ro(n.color),h.renderTextWithLetterSpacing(m,n.letterSpacing,u);var g=n.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(x){h.ctx.shadowColor=ro(x.color),h.ctx.shadowOffsetX=x.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=x.offsetY.number*h.options.scale,h.ctx.shadowBlur=x.blur.number,h.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=ro(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=ro(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=zE(r),i=qE(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c,y,y,u,d,f,h,w,A,m,j,p,g,x,y,b,w,j;return ll(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,l=n.textNodes,I.label=1;case 1:return i<l.length?(c=l[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof HZ))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof $Z&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof KZ))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof WZ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof I6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===VE?n.checked&&(this.ctx.save(),this.path([new Br(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Br(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Br(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Br(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Br(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Br(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Br(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=ro(i9),this.ctx.fill(),this.ctx.restore()):n.type===HE&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=ro(i9),this.ctx.fill(),this.ctx.restore())),vCe(n)&&n.value.length){switch(h=this.createFontStyle(s),w=h[0],A=h[1],m=this.fontMetrics.getMetrics(w,A).baseline,this.ctx.font=w,this.ctx.fillStyle=ro(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=bCe(n.styles.textAlign),j=zE(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}g=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Br(j.left,j.top),new Br(j.left+j.width,j.top),new Br(j.left+j.width,j.top+j.height),new Br(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ky(n.value,g),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Di(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];y=void 0,b=x.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=ro(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new MA(n.bounds.left,n.bounds.top+Qa(n.styles.paddingTop,n.bounds.width),n.bounds.width,H7(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ky(r.listValue,j),s.letterSpacing,H7(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Tl(this,void 0,void 0,function(){var n,a,x,s,i,x,l,c,x,u,d,x,f,h,x,A,m,x,p,g,x;return ll(this,function(y){switch(y.label){case 0:if(Di(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(x=a[n],[4,this.renderStack(x)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,i=r.nonInlineLevel,y.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(x=c[l],[4,this.renderStack(x)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(x=d[u],[4,this.renderStack(x)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,y.label=19;case 19:return f<h.length?(x=h[f],[4,this.renderNode(x)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:A=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return A<m.length?(x=m[A],[4,this.renderStack(x)]):[3,26];case 24:y.sent(),y.label=25;case 25:return A++,[3,23];case 26:p=0,g=r.positiveZIndex,y.label=27;case 27:return p<g.length?(x=g[p],[4,this.renderStack(x)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Pu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Pu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c;return ll(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,A,O,le,de,F,J,E,m,O,le,de,F,J,p,g,x,y,b,w,j,I,_,E,S,O,P,T,F,J,ge,le,de,Ae,se,Ie,Pe,k,H,R,M;return ll(this,function(G){switch(G.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,G.label=1;case 1:return G.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=G.sent(),[3,4];case 3:return G.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(A=cj(r,n,[f.width,f.height,f.width/f.height]),O=A[0],le=A[1],de=A[2],F=A[3],J=A[4],E=s.ctx.createPattern(s.resizeImage(f,F,J),"repeat"),s.renderRepeat(O,E,le,de)),[3,6];case 5:a2e(d)?(m=cj(r,n,[null,null,null]),O=m[0],le=m[1],de=m[2],F=m[3],J=m[4],p=Zbe(d.angle,F,J),g=p[0],x=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=F,j.height=J,I=j.getContext("2d"),_=I.createLinearGradient(x,b,y,w),Q7(d.stops,g).forEach(function(X){return _.addColorStop(X.stop,ro(X.color))}),I.fillStyle=_,I.fillRect(0,0,F,J),F>0&&J>0&&(E=s.ctx.createPattern(j,"repeat"),s.renderRepeat(O,E,le,de))):s2e(d)&&(S=cj(r,n,[null,null,null]),O=S[0],P=S[1],T=S[2],F=S[3],J=S[4],ge=d.position.length===0?[C6]:d.position,le=Qa(ge[0],F),de=Qa(ge[ge.length-1],J),Ae=e2e(d,le,de,F,J),se=Ae[0],Ie=Ae[1],se>0&&Ie>0&&(Pe=s.ctx.createRadialGradient(P+le,T+de,0,P+le,T+de,se),Q7(d.stops,se*2).forEach(function(X){return Pe.addColorStop(X.stop,ro(X.color))}),s.path(O),s.ctx.fillStyle=Pe,se!==Ie?(k=r.bounds.left+.5*r.bounds.width,H=r.bounds.top+.5*r.bounds.height,R=Ie/se,M=1/R,s.ctx.save(),s.ctx.translate(k,H),s.ctx.transform(1,0,0,R,0,0),s.ctx.translate(-k,-H),s.ctx.fillRect(P,M*(T-H)+H,F,J*M),s.ctx.restore()):s.ctx.fill())),G.label=6;case 6:return n--,[2]}})},s=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<l.length?(c=l[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return Tl(this,void 0,void 0,function(){return ll(this,function(s){return this.path(x9(a,n)),this.ctx.fillStyle=ro(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return Tl(this,void 0,void 0,function(){var i,l;return ll(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=lCe(s,a),this.path(i),this.ctx.fillStyle=ro(r),this.ctx.fill(),l=cCe(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Tl(this,void 0,void 0,function(){var n,a,s,i,l,c,u,d,f=this;return ll(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!I0(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=yCe(tx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),I0(n.backgroundColor)||(this.ctx.fillStyle=ro(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){f.ctx.save();var m=GE(r.curves),p=A.inset?0:gCe,g=iCe(m,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(f.path(m),f.ctx.clip(),f.mask(g)):(f.mask(m),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=A.offsetX.number+p,f.ctx.shadowOffsetY=A.offsetY.number,f.ctx.shadowColor=ro(A.color),f.ctx.shadowBlur=A.blur.number,f.ctx.fillStyle=A.inset?ro(A.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:l=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!I0(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:h.sent(),h.label=11;case 11:l++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return Tl(this,void 0,void 0,function(){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,j,I;return ll(this,function(_){return this.ctx.save(),l=uCe(s,a),c=x9(s,a),i===2&&(this.path(c),this.ctx.clip()),Pu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Pu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?A=Math.abs(u-f):A=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,i===3&&(m=n,p=n),g=!0,A<=m*2?g=!1:A<=m*2+p?(x=A/(2*m+p),m*=x,p*=x):(y=Math.floor((A+p)/(m+p)),b=(A-y*m)/(y-1),w=(A-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),g&&(i===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=ro(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Pu(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Br(j.end.x,j.end.y),new Br(I.start.x,I.start.y)]),this.ctx.stroke()),Pu(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Br(j.end.x,j.end.y),new Br(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Tl(this,void 0,void 0,function(){var n;return ll(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=oCe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(dee),vCe=function(t){return t instanceof zZ||t instanceof qZ?!0:t instanceof I6&&t.type!==HE&&t.type!==VE},yCe=function(t,e){switch(t){case 0:return GE(e);case 2:return tCe(e);case 1:default:return qE(e)}},bCe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},wCe=["-apple-system","system-ui"],NCe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return wCe.indexOf(e)===-1}):t},CCe=function(t){Hd(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return Tl(this,void 0,void 0,function(){var n,a;return ll(this,function(s){switch(s.label){case 0:return n=ST(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,_Ce(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ro(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(dee),_Ce=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ECe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,SN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,SN([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,SN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,SN([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),SCe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new ECe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new qNe(this,e)}return t.instanceCount=1,t}(),tg=function(t,e){return e===void 0&&(e={}),ICe(t,e)};typeof window<"u"&&see.setContext(window);var ICe=function(t,e){return Tl(void 0,void 0,void 0,function(){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,_,I,_,E,S,O,P,T,F,J,ge,le,de,Ae,se,Ie,Pe,k,H,R;return ll(this,function(M){switch(M.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(S=e.imageTimeout)!==null&&S!==void 0?S:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=fT({logging:(P=e.logging)!==null&&P!==void 0?P:!0,cache:e.cache},a),i={windowWidth:(T=e.windowWidth)!==null&&T!==void 0?T:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(J=e.scrollX)!==null&&J!==void 0?J:n.pageXOffset,scrollY:(ge=e.scrollY)!==null&&ge!==void 0?ge:n.pageYOffset},l=new MA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new SCe(s,l),u=(le=e.foreignObjectRendering)!==null&&le!==void 0?le:!1,d={allowTaint:(de=e.allowTaint)!==null&&de!==void 0?de:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new m9(c,t,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=M.sent(),m=j6(h)||BNe(h)?iye(h.ownerDocument):l4(c,h),p=m.width,g=m.height,x=m.left,y=m.top,b=jCe(c,h,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(se=(Ae=e.scale)!==null&&Ae!==void 0?Ae:n.devicePixelRatio)!==null&&se!==void 0?se:1,x:((Ie=e.x)!==null&&Ie!==void 0?Ie:0)+x,y:((Pe=e.y)!==null&&Pe!==void 0?Pe:0)+y,width:(k=e.width)!==null&&k!==void 0?k:Math.ceil(p),height:(H=e.height)!==null&&H!==void 0?H:Math.ceil(g)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new CCe(c,w),[4,_.render(h)]):[3,3];case 2:return j=M.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+x+","+y+" with size "+p+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=YZ(c,h),b===I.styles.backgroundColor&&(I.styles.backgroundColor=CA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new xCe(c,w),[4,_.render(I)];case 4:j=M.sent(),M.label=5;case 5:return(!((R=e.removeContainer)!==null&&R!==void 0)||R)&&(m9.destroy(A)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},jCe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?Hy(t,getComputedStyle(n.documentElement).backgroundColor):CA.TRANSPARENT,s=n.body?Hy(t,getComputedStyle(n.body).backgroundColor):CA.TRANSPARENT,i=typeof r=="string"?Hy(t,r):r===null?CA.TRANSPARENT:4294967295;return e===n.documentElement?I0(a)?I0(s)?i:s:a:i};const B6=Object.freeze(Object.defineProperty({__proto__:null,default:tg},Symbol.toStringTag,{value:"Module"})),BCe="modulepreload",PCe=function(t){return"/"+t},y9={},_A=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=PCe(c),c in y9)return;y9[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":BCe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,A)=>{f.addEventListener("load",h),f.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return a.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function ba(t){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(t)}var Rd=Uint8Array,Hc=Uint16Array,P6=Int32Array,T6=new Rd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),k6=new Rd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b9=new Rd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fee=function(t,e){for(var r=new Hc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new P6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Aee=fee(T6,2),TCe=Aee.b,FT=Aee.r;TCe[28]=258,FT[258]=28;var kCe=fee(k6,0),w9=kCe.r,OT=new Hc(32768);for(var Za=0;Za<32768;++Za){var kh=(Za&43690)>>1|(Za&21845)<<1;kh=(kh&52428)>>2|(kh&13107)<<2,kh=(kh&61680)>>4|(kh&3855)<<4,OT[Za]=((kh&65280)>>8|(kh&255)<<8)>>1}var qy=function(t,e,r){for(var n=t.length,a=0,s=new Hc(e);a<n;++a)t[a]&&++s[t[a]-1];var i=new Hc(e);for(a=1;a<e;++a)i[a]=i[a-1]+s[a-1]<<1;var l;if(r){l=new Hc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=i[t[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)l[OT[f]>>c]=u}else for(l=new Hc(n),a=0;a<n;++a)t[a]&&(l[a]=OT[i[t[a]-1]++]>>15-t[a]);return l},Bp=new Rd(288);for(var Za=0;Za<144;++Za)Bp[Za]=8;for(var Za=144;Za<256;++Za)Bp[Za]=9;for(var Za=256;Za<280;++Za)Bp[Za]=7;for(var Za=280;Za<288;++Za)Bp[Za]=8;var WE=new Rd(32);for(var Za=0;Za<32;++Za)WE[Za]=5;var FCe=qy(Bp,9,0),OCe=qy(WE,5,0),hee=function(t){return(t+7)/8|0},DCe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Rd(t.subarray(e,r))},Wf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},M1=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},uj=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:pee,l:0};if(a==1){var i=new Rd(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var A=new Hc(h+1),m=DT(r[d-1],A,0);if(m>e){var n=0,p=0,g=m-e,x=1<<g;for(s.sort(function(I,_){return A[_.s]-A[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(A[y]>e)p+=x-(1<<m-A[y]),A[y]=e;else break}for(p>>=g;p>0;){var b=s[n].s;A[b]<e?p-=1<<e-A[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;A[w]==e&&(--A[w],++p)}m=e}return{t:new Rd(A),l:m}},DT=function(t,e,r){return t.s==-1?Math.max(DT(t.l,e,r+1),DT(t.r,e,r+1)):e[t.s]=r},N9=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Hc(++e),n=0,a=t[0],s=1,i=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},L1=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},mee=function(t,e,r){var n=r.length,a=hee(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},C9=function(t,e,r,n,a,s,i,l,c,u,d){Wf(e,d++,r),++a[256];for(var f=uj(a,15),h=f.t,A=f.l,m=uj(s,15),p=m.t,g=m.l,x=N9(h),y=x.c,b=x.n,w=N9(p),j=w.c,I=w.n,_=new Hc(19),E=0;E<y.length;++E)++_[y[E]&31];for(var E=0;E<j.length;++E)++_[j[E]&31];for(var S=uj(_,7),O=S.t,P=S.l,T=19;T>4&&!O[b9[T-1]];--T);var F=u+5<<3,J=L1(a,Bp)+L1(s,WE)+i,ge=L1(a,h)+L1(s,p)+i+14+3*T+L1(_,O)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&F<=J&&F<=ge)return mee(e,d,t.subarray(c,c+u));var le,de,Ae,se;if(Wf(e,d,1+(ge<J)),d+=2,ge<J){le=qy(h,A,0),de=h,Ae=qy(p,g,0),se=p;var Ie=qy(O,P,0);Wf(e,d,b-257),Wf(e,d+5,I-1),Wf(e,d+10,T-4),d+=14;for(var E=0;E<T;++E)Wf(e,d+3*E,O[b9[E]]);d+=3*T;for(var Pe=[y,j],k=0;k<2;++k)for(var H=Pe[k],E=0;E<H.length;++E){var R=H[E]&31;Wf(e,d,Ie[R]),d+=O[R],R>15&&(Wf(e,d,H[E]>>5&127),d+=H[E]>>12)}}else le=FCe,de=Bp,Ae=OCe,se=WE;for(var E=0;E<l;++E){var M=n[E];if(M>255){var R=M>>18&31;M1(e,d,le[R+257]),d+=de[R+257],R>7&&(Wf(e,d,M>>23&31),d+=T6[R]);var G=M&31;M1(e,d,Ae[G]),d+=se[G],G>3&&(M1(e,d,M>>5&8191),d+=k6[G])}else M1(e,d,le[M]),d+=de[M]}return M1(e,d,le[256]),d+de[256]},RCe=new P6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pee=new Rd(0),MCe=function(t,e,r,n,a,s){var i=s.z||t.length,l=new Rd(n+i+5*(1+Math.ceil(i/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=RCe[e-1],h=f>>13,A=f&8191,m=(1<<r)-1,p=s.p||new Hc(32768),g=s.h||new Hc(m+1),x=Math.ceil(r/3),y=2*x,b=function(ne){return(t[ne]^t[ne+1]<<x^t[ne+2]<<y)&m},w=new P6(25e3),j=new Hc(288),I=new Hc(32),_=0,E=0,S=s.i||0,O=0,P=s.w||0,T=0;S+2<i;++S){var F=b(S),J=S&32767,ge=g[F];if(p[J]=ge,g[F]=J,P<=S){var le=i-S;if((_>7e3||O>24576)&&(le>423||!u)){d=C9(t,c,0,w,j,I,E,O,T,S-T,d),O=_=E=0,T=S;for(var de=0;de<286;++de)j[de]=0;for(var de=0;de<30;++de)I[de]=0}var Ae=2,se=0,Ie=A,Pe=J-ge&32767;if(le>2&&F==b(S-Pe))for(var k=Math.min(h,le)-1,H=Math.min(32767,S),R=Math.min(258,le);Pe<=H&&--Ie&&J!=ge;){if(t[S+Ae]==t[S+Ae-Pe]){for(var M=0;M<R&&t[S+M]==t[S+M-Pe];++M);if(M>Ae){if(Ae=M,se=Pe,M>k)break;for(var G=Math.min(Pe,M-2),X=0,de=0;de<G;++de){var D=S-Pe+de&32767,Q=p[D],te=D-Q&32767;te>X&&(X=te,ge=D)}}}J=ge,ge=p[J],Pe+=J-ge&32767}if(se){w[O++]=268435456|FT[Ae]<<18|w9[se];var me=FT[Ae]&31,L=w9[se]&31;E+=T6[me]+k6[L],++j[257+me],++I[L],P=S+Ae,++_}else w[O++]=t[S],++j[t[S]]}}for(S=Math.max(S,P);S<i;++S)w[O++]=t[S],++j[t[S]];d=C9(t,c,u,w,j,I,E,O,T,S-T,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=g,s.p=p,s.i=S,s.w=P)}else{for(var S=s.w||0;S<i+u;S+=65535){var he=S+65535;he>=i&&(c[d/8|0]=u,he=i),d=mee(c,d+1,t.subarray(S,he))}s.i=i}return DCe(l,0,n+hee(d)+a)},gee=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,i=0;i!=s;){for(var l=Math.min(i+2655,s);i<l;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},LCe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),i=new Rd(s.length+t.length);i.set(s),i.set(t,s.length),t=i,a.w=s.length}return MCe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},xee=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},UCe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=gee();a.p(e.dictionary),xee(t,2,a.d())}};function RT(t,e){e||(e={});var r=gee();r.p(t);var n=LCe(t,e,e.dictionary?6:2,4);return UCe(n,e),xee(n,n.length-4,r.d()),n}var QCe=typeof TextDecoder<"u"&&new TextDecoder,VCe=0;try{QCe.decode(pee,{stream:!0}),VCe=1}catch{}function HCe(t){if(Array.isArray(t))return t}function $Ce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function _9(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function KCe(t,e){if(t){if(typeof t=="string")return _9(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_9(t,e):void 0}}function GCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E9(t,e){return HCe(t)||$Ce(t,e)||KCe(t,e)||GCe()}function S9(t,e="utf8"){return new TextDecoder(e).decode(t)}const qCe=new TextEncoder;function zCe(t){return qCe.encode(t)}const WCe=1024*8,XCe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),dj={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class F6{constructor(e=WCe,r={}){na(this,"buffer");na(this,"byteLength");na(this,"byteOffset");na(this,"length");na(this,"offset");na(this,"lastWrittenByte");na(this,"littleEndian");na(this,"_data");na(this,"_mark");na(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let i=a;(ArrayBuffer.isView(e)||e instanceof F6)&&(e.byteLength!==e.buffer.byteLength&&(i=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=i,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,i,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=dj[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===XCe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new dj[r](l.buffer);return this.offset+=n,c.reverse(),c}const i=new dj[r](s);return this.offset+=n,i}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return S9(this.readBytes(e))}decodeText(e=1,r="utf8"){return S9(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(zCe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Rv(t){let e=t.length;for(;--e>=0;)t[e]=0}const YCe=3,JCe=258,vee=29,ZCe=256,e_e=ZCe+1+vee,yee=30,t_e=512,r_e=new Array((e_e+2)*2);Rv(r_e);const n_e=new Array(yee*2);Rv(n_e);const a_e=new Array(t_e);Rv(a_e);const s_e=new Array(JCe-YCe+1);Rv(s_e);const i_e=new Array(vee);Rv(i_e);const o_e=new Array(yee);Rv(o_e);const l_e=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,i=0;for(;r!==0;){i=r>2e3?2e3:r,r-=i;do a=a+e[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};var MT=l_e;const c_e=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},u_e=new Uint32Array(c_e()),d_e=(t,e,r,n)=>{const a=u_e,s=n+r;t^=-1;for(let i=n;i<s;i++)t=t>>>8^a[(t^e[i])&255];return t^-1};var rf=d_e,LT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bee={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const f_e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var A_e=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)f_e(r,n)&&(t[n]=r[n])}}return t},h_e=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let i=t[n];r.set(i,a),a+=i.length}return r},wee={assign:A_e,flattenChunks:h_e};let Nee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Nee=!1}const Wb=new Uint8Array(256);for(let t=0;t<256;t++)Wb[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Wb[254]=Wb[254]=1;var m_e=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,i=t.length,l=0;for(a=0;a<i;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<i&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const p_e=(t,e)=>{if(e<65534&&t.subarray&&Nee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var g_e=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let i=t[n++];if(i<128){s[a++]=i;continue}let l=Wb[i];if(l>4){s[a++]=65533,n+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&n<r;)i=i<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return p_e(s,a)},x_e=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Wb[t[r]]>e?r:e},UT={string2buf:m_e,buf2string:g_e,utf8border:x_e};function v_e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var y_e=v_e;const XN=16209,b_e=16191;var w_e=function(e,r){let n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S,O;const P=e.state;n=e.next_in,S=e.input,a=n+(e.avail_in-5),s=e.next_out,O=e.output,i=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,f=P.wnext,h=P.window,A=P.hold,m=P.bits,p=P.lencode,g=P.distcode,x=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{m<15&&(A+=S[n++]<<m,m+=8,A+=S[n++]<<m,m+=8),b=p[A&x];t:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w===0)O[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(A+=S[n++]<<m,m+=8),j+=A&(1<<w)-1,A>>>=w,m-=w),m<15&&(A+=S[n++]<<m,m+=8,A+=S[n++]<<m,m+=8),b=g[A&y];r:for(;;){if(w=b>>>24,A>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(A+=S[n++]<<m,m+=8,m<w&&(A+=S[n++]<<m,m+=8)),I+=A&(1<<w)-1,I>c){e.msg="invalid distance too far back",P.mode=XN;break e}if(A>>>=w,m-=w,w=s-i,I>w){if(w=I-w,w>d&&P.sane){e.msg="invalid distance too far back",P.mode=XN;break e}if(_=0,E=h,f===0){if(_+=u-w,w<j){j-=w;do O[s++]=h[_++];while(--w);_=s-I,E=O}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do O[s++]=h[_++];while(--w);if(_=0,f<j){w=f,j-=w;do O[s++]=h[_++];while(--w);_=s-I,E=O}}}else if(_+=f-w,w<j){j-=w;do O[s++]=h[_++];while(--w);_=s-I,E=O}for(;j>2;)O[s++]=E[_++],O[s++]=E[_++],O[s++]=E[_++],j-=3;j&&(O[s++]=E[_++],j>1&&(O[s++]=E[_++]))}else{_=s-I;do O[s++]=O[_++],O[s++]=O[_++],O[s++]=O[_++],j-=3;while(j>2);j&&(O[s++]=O[_++],j>1&&(O[s++]=O[_++]))}}else if(w&64){e.msg="invalid distance code",P.mode=XN;break e}else{b=g[(b&65535)+(A&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){P.mode=b_e;break e}else{e.msg="invalid literal/length code",P.mode=XN;break e}else{b=p[(b&65535)+(A&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,A&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=A,P.bits=m};const kg=15,I9=852,j9=592,B9=0,fj=1,P9=2,N_e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),C_e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),__e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),E_e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),S_e=(t,e,r,n,a,s,i,l)=>{const c=l.bits;let u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=0,b,w,j,I,_,E=null,S;const O=new Uint16Array(kg+1),P=new Uint16Array(kg+1);let T=null,F,J,ge;for(u=0;u<=kg;u++)O[u]=0;for(d=0;d<n;d++)O[e[r+d]]++;for(A=c,h=kg;h>=1&&O[h]===0;h--);if(A>h&&(A=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<h&&O[f]===0;f++);for(A<f&&(A=f),g=1,u=1;u<=kg;u++)if(g<<=1,g-=O[u],g<0)return-1;if(g>0&&(t===B9||h!==1))return-1;for(P[1]=0,u=1;u<kg;u++)P[u+1]=P[u]+O[u];for(d=0;d<n;d++)e[r+d]!==0&&(i[P[e[r+d]]++]=d);if(t===B9?(E=T=i,S=20):t===fj?(E=N_e,T=C_e,S=257):(E=__e,T=E_e,S=0),y=0,d=0,u=f,_=s,m=A,p=0,j=-1,x=1<<A,I=x-1,t===fj&&x>I9||t===P9&&x>j9)return 1;for(;;){F=u-p,i[d]+1<S?(J=0,ge=i[d]):i[d]>=S?(J=T[i[d]-S],ge=E[i[d]-S]):(J=96,ge=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=F<<24|J<<16|ge|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--O[u]===0){if(u===h)break;u=e[r+i[d]]}if(u>A&&(y&I)!==j){for(p===0&&(p=A),_+=f,m=u-p,g=1<<m;m+p<h&&(g-=O[m+p],!(g<=0));)m++,g<<=1;if(x+=1<<m,t===fj&&x>I9||t===P9&&x>j9)return 1;j=y&I,a[j]=A<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=A,0};var zy=S_e;const I_e=0,Cee=1,_ee=2,{Z_FINISH:T9,Z_BLOCK:j_e,Z_TREES:YN,Z_OK:Pp,Z_STREAM_END:B_e,Z_NEED_DICT:P_e,Z_STREAM_ERROR:Ku,Z_DATA_ERROR:Eee,Z_MEM_ERROR:See,Z_BUF_ERROR:T_e,Z_DEFLATED:k9}=bee,x4=16180,F9=16181,O9=16182,D9=16183,R9=16184,M9=16185,L9=16186,U9=16187,Q9=16188,V9=16189,XE=16190,Xf=16191,Aj=16192,H9=16193,hj=16194,$9=16195,K9=16196,G9=16197,q9=16198,JN=16199,ZN=16200,z9=16201,W9=16202,X9=16203,Y9=16204,J9=16205,mj=16206,Z9=16207,eQ=16208,os=16209,Iee=16210,jee=16211,k_e=852,F_e=592,O_e=15,D_e=O_e,tQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function R_e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const rg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<x4||e.mode>jee?1:0},Bee=t=>{if(rg(t))return Ku;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=x4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(k_e),e.distcode=e.distdyn=new Int32Array(F_e),e.sane=1,e.back=-1,Pp},Pee=t=>{if(rg(t))return Ku;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Bee(t)},Tee=(t,e)=>{let r;if(rg(t))return Ku;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ku:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Pee(t))},kee=(t,e)=>{if(!t)return Ku;const r=new R_e;t.state=r,r.strm=t,r.window=null,r.mode=x4;const n=Tee(t,e);return n!==Pp&&(t.state=null),n},M_e=t=>kee(t,D_e);let rQ=!0,pj,gj;const L_e=t=>{if(rQ){pj=new Int32Array(512),gj=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(zy(Cee,t.lens,0,288,pj,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;zy(_ee,t.lens,0,32,gj,0,t.work,{bits:5}),rQ=!1}t.lencode=pj,t.lenbits=9,t.distcode=gj,t.distbits=5},Fee=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},U_e=(t,e)=>{let r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=0,x,y,b,w,j,I,_,E;const S=new Uint8Array(4);let O,P;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(rg(t)||!t.output||!t.input&&t.avail_in!==0)return Ku;r=t.state,r.mode===Xf&&(r.mode=Aj),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,h=c,E=Pp;e:for(;;)switch(r.mode){case x4:if(r.wrap===0){r.mode=Aj;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,S[0]=u&255,S[1]=u>>>8&255,r.check=rf(r.check,S,2,0),u=0,d=0,r.mode=F9;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=os;break}if((u&15)!==k9){t.msg="unknown compression method",r.mode=os;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=os;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?V9:Xf,u=0,d=0;break;case F9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==k9){t.msg="unknown compression method",r.mode=os;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=os;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=rf(r.check,S,2,0)),u=0,d=0,r.mode=O9;case O9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=rf(r.check,S,4,0)),u=0,d=0,r.mode=D9;case D9:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=rf(r.check,S,2,0)),u=0,d=0,r.mode=R9;case R9:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(S[0]=u&255,S[1]=u>>>8&255,r.check=rf(r.check,S,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=M9;case M9:if(r.flags&1024&&(A=r.length,A>l&&(A=l),A&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+A),_)),r.flags&512&&r.wrap&4&&(r.check=rf(r.check,n,A,s)),l-=A,s+=A,r.length-=A),r.length))break e;r.length=0,r.mode=L9;case L9:if(r.flags&2048){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=rf(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=U9;case U9:if(r.flags&4096){if(l===0)break e;A=0;do _=n[s+A++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&A<l);if(r.flags&512&&r.wrap&4&&(r.check=rf(r.check,n,A,s)),l-=A,s+=A,_)break e}else r.head&&(r.head.comment=null);r.mode=Q9;case Q9:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=os;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Xf;break;case V9:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=tQ(u),u=0,d=0,r.mode=XE;case XE:if(r.havedict===0)return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,P_e;t.adler=r.check=1,r.mode=Xf;case Xf:if(e===j_e||e===YN)break e;case Aj:if(r.last){u>>>=d&7,d-=d&7,r.mode=mj;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=H9;break;case 1:if(L_e(r),r.mode=JN,e===YN){u>>>=2,d-=2;break e}break;case 2:r.mode=K9;break;case 3:t.msg="invalid block type",r.mode=os}u>>>=2,d-=2;break;case H9:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=os;break}if(r.length=u&65535,u=0,d=0,r.mode=hj,e===YN)break e;case hj:r.mode=$9;case $9:if(A=r.length,A){if(A>l&&(A=l),A>c&&(A=c),A===0)break e;a.set(n.subarray(s,s+A),i),l-=A,s+=A,c-=A,i+=A,r.length-=A;break}r.mode=Xf;break;case K9:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=os;break}r.have=0,r.mode=G9;case G9:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[T[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},E=zy(I_e,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid code lengths set",r.mode=os;break}r.have=0,r.mode=q9;case q9:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=x,d-=x,r.lens[r.have++]=b;else{if(b===16){for(P=x+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=x,d-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=os;break}_=r.lens[r.have-1],A=3+(u&3),u>>>=2,d-=2}else if(b===17){for(P=x+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=3+(u&7),u>>>=3,d-=3}else{for(P=x+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=x,d-=x,_=0,A=11+(u&127),u>>>=7,d-=7}if(r.have+A>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=os;break}for(;A--;)r.lens[r.have++]=_}}if(r.mode===os)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=os;break}if(r.lenbits=9,O={bits:r.lenbits},E=zy(Cee,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,E){t.msg="invalid literal/lengths set",r.mode=os;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},E=zy(_ee,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,E){t.msg="invalid distances set",r.mode=os;break}if(r.mode=JN,e===YN)break e;case JN:r.mode=ZN;case ZN:if(l>=6&&c>=258){t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,w_e(t,h),i=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Xf&&(r.back=-1);break}for(r.back=0;g=r.lencode[u&(1<<r.lenbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=x,j=y,I=b;g=r.lencode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,r.length=b,y===0){r.mode=J9;break}if(y&32){r.back=-1,r.mode=Xf;break}if(y&64){t.msg="invalid literal/length code",r.mode=os;break}r.extra=y&15,r.mode=z9;case z9:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=W9;case W9:for(;g=r.distcode[u&(1<<r.distbits)-1],x=g>>>24,y=g>>>16&255,b=g&65535,!(x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=x,j=y,I=b;g=r.distcode[I+((u&(1<<w+j)-1)>>w)],x=g>>>24,y=g>>>16&255,b=g&65535,!(w+x<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=x,d-=x,r.back+=x,y&64){t.msg="invalid distance code",r.mode=os;break}r.offset=b,r.extra=y&15,r.mode=X9;case X9:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=os;break}r.mode=Y9;case Y9:if(c===0)break e;if(A=h-c,r.offset>A){if(A=r.offset-A,A>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=os;break}A>r.wnext?(A-=r.wnext,m=r.wsize-A):m=r.wnext-A,A>r.length&&(A=r.length),p=r.window}else p=a,m=i-r.offset,A=r.length;A>c&&(A=c),c-=A,r.length-=A;do a[i++]=p[m++];while(--A);r.length===0&&(r.mode=ZN);break;case J9:if(c===0)break e;a[i++]=r.length,c--,r.mode=ZN;break;case mj:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(h-=c,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?rf(r.check,a,h,i-h):MT(r.check,a,h,i-h)),h=c,r.wrap&4&&(r.flags?u:tQ(u))!==r.check){t.msg="incorrect data check",r.mode=os;break}u=0,d=0}r.mode=Z9;case Z9:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=os;break}u=0,d=0}r.mode=eQ;case eQ:E=B_e;break e;case os:E=Eee;break e;case Iee:return See;case jee:default:return Ku}return t.next_out=i,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||h!==t.avail_out&&r.mode<os&&(r.mode<mj||e!==T9))&&Fee(t,t.output,t.next_out,h-t.avail_out),f-=t.avail_in,h-=t.avail_out,t.total_in+=f,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?rf(r.check,a,h,t.next_out-h):MT(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Xf?128:0)+(r.mode===JN||r.mode===hj?256:0),(f===0&&h===0||e===T9)&&E===Pp&&(E=T_e),E},Q_e=t=>{if(rg(t))return Ku;let e=t.state;return e.window&&(e.window=null),t.state=null,Pp},V_e=(t,e)=>{if(rg(t))return Ku;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Pp):Ku},H_e=(t,e)=>{const r=e.length;let n,a,s;return rg(t)||(n=t.state,n.wrap!==0&&n.mode!==XE)?Ku:n.mode===XE&&(a=1,a=MT(a,e,r,0),a!==n.check)?Eee:(s=Fee(t,e,r,r),s?(n.mode=Iee,See):(n.havedict=1,Pp))};var $_e=Pee,K_e=Tee,G_e=Bee,q_e=M_e,z_e=kee,W_e=U_e,X_e=Q_e,Y_e=V_e,J_e=H_e,Z_e="pako inflate (from Nodeca project)",iA={inflateReset:$_e,inflateReset2:K_e,inflateResetKeep:G_e,inflateInit:q_e,inflateInit2:z_e,inflate:W_e,inflateEnd:X_e,inflateGetHeader:Y_e,inflateSetDictionary:J_e,inflateInfo:Z_e};function eEe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var tEe=eEe;const Oee=Object.prototype.toString,{Z_NO_FLUSH:rEe,Z_FINISH:nEe,Z_OK:Xb,Z_STREAM_END:xj,Z_NEED_DICT:vj,Z_STREAM_ERROR:aEe,Z_DATA_ERROR:nQ,Z_MEM_ERROR:sEe}=bee;function nw(t){this.options=wee.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y_e,this.strm.avail_out=0;let r=iA.inflateInit2(this.strm,e.windowBits);if(r!==Xb)throw new Error(LT[r]);if(this.header=new tEe,iA.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=UT.string2buf(e.dictionary):Oee.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=iA.inflateSetDictionary(this.strm,e.dictionary),r!==Xb)))throw new Error(LT[r])}nw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,i,l;if(this.ended)return!1;for(e===~~e?i=e:i=e===!0?nEe:rEe,Oee.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=iA.inflate(r,i),s===vj&&a&&(s=iA.inflateSetDictionary(r,a),s===Xb?s=iA.inflate(r,i):s===nQ&&(s=vj));r.avail_in>0&&s===xj&&r.state.wrap>0&&t[r.next_in]!==0;)iA.inflateReset(r),s=iA.inflate(r,i);switch(s){case aEe:case nQ:case vj:case sEe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===xj))if(this.options.to==="string"){let c=UT.utf8border(r.output,r.next_out),u=r.next_out-c,d=UT.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===Xb&&l===0)){if(s===xj)return s=iA.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};nw.prototype.onData=function(t){this.chunks.push(t)};nw.prototype.onEnd=function(t){t===Xb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wee.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function iEe(t,e){const r=new nw(e);if(r.push(t),r.err)throw r.msg||LT[r.err];return r.result}var oEe=nw,lEe=iEe,cEe={Inflate:oEe,inflate:lEe};const{Inflate:uEe,inflate:dEe}=cEe;var aQ=uEe,fEe=dEe;const Dee=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Dee[t]=e}const sQ=4294967295;function AEe(t,e,r){let n=t;for(let a=0;a<r;a++)n=Dee[(n^e[a])&255]^n>>>8;return n}function hEe(t,e){return(AEe(sQ,t,e)^sQ)>>>0}function iQ(t,e,r){const n=t.readUint32(),a=hEe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Ree(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Mee(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Lee(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Uee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Qee(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+mEe(e[s-a],r[s],r[s-a])&255}}function mEe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),i=Math.abs(n-r);return a<=s&&a<=i?t:s<=i?e:r}function pEe(t,e,r,n,a,s){switch(t){case 0:Ree(e,r,a);break;case 1:Mee(e,r,a,s);break;case 2:Lee(e,r,n,a);break;case 3:Uee(e,r,n,a,s);break;case 4:Qee(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const gEe=new Uint16Array([255]),xEe=new Uint8Array(gEe.buffer),vEe=xEe[0]===255;function yEe(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=i[d],h=Math.ceil((r-f.x)/f.xStep),A=Math.ceil((n-f.y)/f.yStep);if(h<=0||A<=0)continue;const m=h*l,p=new Uint8Array(m);for(let g=0;g<A;g++){const x=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);pEe(x,y,b,p,m,l),p.set(b);for(let w=0;w<h;w++){const j=f.x+w*f.xStep,I=f.y+g*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(vEe)for(let f=0;f<d.length;f++)d[f]=bEe(d[f]);return d}else return c}function bEe(t){return(t&255)<<8|t>>8&255}const wEe=new Uint16Array([255]),NEe=new Uint8Array(wEe.buffer),CEe=NEe[0]===255,_Ee=new Uint8Array(0);function oQ(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,i=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=_Ee,d=0,f,h;for(let A=0;A<n;A++){switch(f=e.subarray(d+1,d+1+l),h=c.subarray(A*l,(A+1)*l),e[d]){case 0:Ree(f,h,l);break;case 1:Mee(f,h,l,i);break;case 2:Lee(f,h,u,l);break;case 3:Uee(f,h,u,l,i);break;case 4:Qee(f,h,u,l,i);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=h,d+=l+1}if(s===16){const A=new Uint16Array(c.buffer);if(CEe)for(let m=0;m<A.length;m++)A[m]=EEe(A[m]);return A}else return c}function EEe(t){return(t&255)<<8|t>>8&255}const O_=Uint8Array.of(137,80,78,71,13,10,26,10);function lQ(t){if(!SEe(t.readBytes(O_.length)))throw new Error("wrong PNG signature")}function SEe(t){if(t.length<O_.length)return!1;for(let e=0;e<O_.length;e++)if(t[e]!==O_[e])return!1;return!0}const IEe="tEXt",jEe=0,Vee=new TextDecoder("latin1");function BEe(t){if(TEe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const PEe=/^[\u0000-\u00FF]*$/;function TEe(t){if(!PEe.test(t))throw new Error("invalid latin1 text")}function kEe(t,e,r){const n=Hee(e);t[n]=FEe(e,r-n.length-1)}function Hee(t){for(t.mark();t.readByte()!==jEe;);const e=t.offset;t.reset();const r=Vee.decode(t.readBytes(e-t.offset-1));return t.skip(1),BEe(r),r}function FEe(t,e){return Vee.decode(t.readBytes(e))}const Bc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},yj={UNKNOWN:-1,DEFLATE:0},cQ={UNKNOWN:-1,ADAPTIVE:0},bj={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},eC={NONE:0,BACKGROUND:1,PREVIOUS:2},wj={SOURCE:0,OVER:1};class OEe extends F6{constructor(r,n={}){super(r);na(this,"_checkCrc");na(this,"_inflator");na(this,"_png");na(this,"_apng");na(this,"_end");na(this,"_hasPalette");na(this,"_palette");na(this,"_hasTransparency");na(this,"_transparency");na(this,"_compressionMethod");na(this,"_filterMethod");na(this,"_interlaceMethod");na(this,"_colorType");na(this,"_isAnimated");na(this,"_numberOfFrames");na(this,"_numberOfPlays");na(this,"_frames");na(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new aQ,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=yj.UNKNOWN,this._filterMethod=cQ.UNKNOWN,this._interlaceMethod=bj.UNKNOWN,this._colorType=Bc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(lQ(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case IEe:kEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?iQ(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?iQ(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=DEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case Bc.GREYSCALE:a=1;break;case Bc.TRUECOLOUR:a=3;break;case Bc.INDEXED_COLOUR:a=1;break;case Bc.GREYSCALE_ALPHA:a=2;break;case Bc.TRUECOLOUR_ALPHA:a=4;break;case Bc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==yj.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Bc.GREYSCALE:case Bc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Bc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Bc.UNKNOWN:case Bc.GREYSCALE_ALPHA:case Bc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Hee(this),a=this.readUint8();if(a!==yj.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:fEe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=oQ({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case eC.NONE:break;case eC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*r.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case eC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(i,l)=>{const c=((i+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(i*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case wj.SOURCE:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case wj.OVER:for(let i=0;i<n.height;i++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,h=d%(this._png.channels-1)===0?1:n.data[u+d],A=Math.floor(f*h+(1-f)*r.data[c+d]);r.data[c+d]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==cQ.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===bj.NO_INTERLACE)this._png.data=oQ({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===bj.ADAM7)this._png.data=yEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:eC.NONE,blendOp:wj.SOURCE,data:r}),this._inflator=new aQ,this._writingDataChunks=!1}}function DEe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var uQ;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(uQ||(uQ={}));function REe(t,e){return new OEe(t,e).decode()}var fn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Nj(){fn.console&&typeof fn.console.log=="function"&&fn.console.log.apply(fn.console,arguments)}var Fa={log:Nj,warn:function(t){fn.console&&(typeof fn.console.warn=="function"?fn.console.warn.apply(fn.console,arguments):Nj.call(null,arguments))},error:function(t){fn.console&&(typeof fn.console.error=="function"?fn.console.error.apply(fn.console,arguments):Nj(t))}};function Cj(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Bm(n.response,e,r)},n.onerror=function(){Fa.error("could not download file")},n.send()}function dQ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function tC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bm=fn.saveAs||((typeof window>"u"?"undefined":ba(window))!=="object"||window!==fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=fn.URL||fn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?dQ(a.href)?Cj(t,e,r):tC(a,a.target="_blank"):tC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){tC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(dQ(t))Cj(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){tC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ba(s)!=="object"&&(Fa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return Cj(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(fn.HTMLElement)||fn.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ba(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=fn.URL||fn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $ee(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(t);i&&(e=s(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var D_=fn.atob.bind(fn),fQ=fn.btoa.bind(fn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _j(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=el(r,n,a,s,e[0],7,-680876936),s=el(s,r,n,a,e[1],12,-389564586),a=el(a,s,r,n,e[2],17,606105819),n=el(n,a,s,r,e[3],22,-1044525330),r=el(r,n,a,s,e[4],7,-176418897),s=el(s,r,n,a,e[5],12,1200080426),a=el(a,s,r,n,e[6],17,-1473231341),n=el(n,a,s,r,e[7],22,-45705983),r=el(r,n,a,s,e[8],7,1770035416),s=el(s,r,n,a,e[9],12,-1958414417),a=el(a,s,r,n,e[10],17,-42063),n=el(n,a,s,r,e[11],22,-1990404162),r=el(r,n,a,s,e[12],7,1804603682),s=el(s,r,n,a,e[13],12,-40341101),a=el(a,s,r,n,e[14],17,-1502002290),r=tl(r,n=el(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=tl(s,r,n,a,e[6],9,-1069501632),a=tl(a,s,r,n,e[11],14,643717713),n=tl(n,a,s,r,e[0],20,-373897302),r=tl(r,n,a,s,e[5],5,-701558691),s=tl(s,r,n,a,e[10],9,38016083),a=tl(a,s,r,n,e[15],14,-660478335),n=tl(n,a,s,r,e[4],20,-405537848),r=tl(r,n,a,s,e[9],5,568446438),s=tl(s,r,n,a,e[14],9,-1019803690),a=tl(a,s,r,n,e[3],14,-187363961),n=tl(n,a,s,r,e[8],20,1163531501),r=tl(r,n,a,s,e[13],5,-1444681467),s=tl(s,r,n,a,e[2],9,-51403784),a=tl(a,s,r,n,e[7],14,1735328473),r=rl(r,n=tl(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=rl(s,r,n,a,e[8],11,-2022574463),a=rl(a,s,r,n,e[11],16,1839030562),n=rl(n,a,s,r,e[14],23,-35309556),r=rl(r,n,a,s,e[1],4,-1530992060),s=rl(s,r,n,a,e[4],11,1272893353),a=rl(a,s,r,n,e[7],16,-155497632),n=rl(n,a,s,r,e[10],23,-1094730640),r=rl(r,n,a,s,e[13],4,681279174),s=rl(s,r,n,a,e[0],11,-358537222),a=rl(a,s,r,n,e[3],16,-722521979),n=rl(n,a,s,r,e[6],23,76029189),r=rl(r,n,a,s,e[9],4,-640364487),s=rl(s,r,n,a,e[12],11,-421815835),a=rl(a,s,r,n,e[15],16,530742520),r=nl(r,n=rl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=nl(s,r,n,a,e[7],10,1126891415),a=nl(a,s,r,n,e[14],15,-1416354905),n=nl(n,a,s,r,e[5],21,-57434055),r=nl(r,n,a,s,e[12],6,1700485571),s=nl(s,r,n,a,e[3],10,-1894986606),a=nl(a,s,r,n,e[10],15,-1051523),n=nl(n,a,s,r,e[1],21,-2054922799),r=nl(r,n,a,s,e[8],6,1873313359),s=nl(s,r,n,a,e[15],10,-30611744),a=nl(a,s,r,n,e[6],15,-1560198380),n=nl(n,a,s,r,e[13],21,1309151649),r=nl(r,n,a,s,e[4],6,-145523070),s=nl(s,r,n,a,e[11],10,-1120210379),a=nl(a,s,r,n,e[2],15,718787259),n=nl(n,a,s,r,e[9],21,-343485551),t[0]=d0(r,t[0]),t[1]=d0(n,t[1]),t[2]=d0(a,t[2]),t[3]=d0(s,t[3])}function v4(t,e,r,n,a,s){return e=d0(d0(e,t),d0(n,s)),d0(e<<a|e>>>32-a,r)}function el(t,e,r,n,a,s,i){return v4(e&r|~e&n,t,e,a,s,i)}function tl(t,e,r,n,a,s,i){return v4(e&n|r&~n,t,e,a,s,i)}function rl(t,e,r,n,a,s,i){return v4(e^r^n,t,e,a,s,i)}function nl(t,e,r,n,a,s,i){return v4(r^(e|~n),t,e,a,s,i)}function Kee(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_j(n,MEe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(_j(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,_j(n,a),n}function MEe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var AQ="0123456789abcdef".split("");function LEe(t){for(var e="",r=0;r<4;r++)e+=AQ[t>>8*r+4&15]+AQ[t>>8*r&15];return e}function UEe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function QT(t){return Kee(t).map(UEe).join("")}var QEe=function(t){for(var e=0;e<t.length;e++)t[e]=LEe(t[e]);return t.join("")}(Kee("hello"))!="5d41402abc4b2a76b9719d911017c592";function d0(t,e){if(QEe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function VT(t,e){var r,n,a,s;if(t!==r){for(var i=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+i.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,h=0,A=0,m="";for(c=0;c<f;c++)A=(A+(d=l[h=(h+1)%256]))%256,l[h]=l[A],l[A]=d,i=l[(l[h]+l[A])%256],m+=String.fromCharCode(e.charCodeAt(c)^i);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var hQ={print:4,modify:8,copy:16,"annot-forms":32};function rx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(hQ.perm!==void 0)throw new Error("Invalid permission: "+l);a+=hQ[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=QT(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=VT(this.encryptionKey,this.padding)}function nx(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function mQ(t){if(ba(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var i=e[r][s];try{i[0].apply(t,n)}catch(l){fn.console&&Fa.error("jsPDF PubSub Error",l.message,l)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yb(t){if(!(this instanceof Yb))return new Yb(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Gee(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function n0(t,e,r,n,a){if(!(this instanceof n0))return new n0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Gee.call(this,n,a)}function Gm(t,e,r,n,a){if(!(this instanceof Gm))return new Gm(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Gee.call(this,n,a)}function Fr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],l=1,c=16,u="S",d=null;ba(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,h={},A={internal:{},__private__:{}};A.__private__.PubSub=mQ;var m="1.3",p=A.__private__.getPdfVersion=function(){return m};A.__private__.setPdfVersion=function(U){m=U};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return g};var x=A.__private__.getPageFormat=function(U){return g[U]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),z(new ae(je,0,0,-je,0,iu()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=A.__private__.combineFontStyleAndFontWeight=function(U,we){if(U=="bold"&&we=="normal"||U=="bold"&&we==400||U=="normal"&&we=="italic"||U=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(U=we==400||we==="normal"?U==="italic"?"italic":"normal":we!=700&&we!=="bold"||U!=="normal"?(we==700?"bold":we)+""+U:"bold"),U};A.advancedAPI=function(U){var we=w===y;return we&&j.call(this),typeof U!="function"||(U(this),we&&I.call(this)),this},A.compatAPI=function(U){var we=w===b;return we&&I.call(this),typeof U!="function"||(U(this),we&&j.call(this)),this},A.isAdvancedAPI=function(){return w===b};var E,S=function(U){if(w!==b)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=A.roundToPrecision=A.__private__.roundToPrecision=function(U,we){var Ze=e||we;if(isNaN(U)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(Ze).replace(/0+$/,"")};E=A.hpf=A.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return O(U,16)};var P=A.f2=A.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return O(U,2)},T=A.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return O(U,3)},F=A.scale=A.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?U*je:w===b?U:void 0},J=function(U){return F(function(we){return w===y?iu()-we:w===b?we:void 0}(U))};A.__private__.setPrecision=A.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var ge,le="00000000000000000000000000000000",de=A.__private__.getFileId=function(){return le},Ae=A.__private__.setFileId=function(U){return le=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Ct=new rx(d.userPermissions,d.userPassword,d.ownerPassword,le)),le};A.setFileId=function(U){return Ae(U),this},A.getFileId=function(){return de()};var se=A.__private__.convertDateToPDFDate=function(U){var we=U.getTimezoneOffset(),Ze=we<0?"+":"-",dt=Math.floor(Math.abs(we/60)),St=Math.abs(we%60),Jt=[Ze,R(dt),"'",R(St),"'"].join("");return["D:",U.getFullYear(),R(U.getMonth()+1),R(U.getDate()),R(U.getHours()),R(U.getMinutes()),R(U.getSeconds()),Jt].join("")},Ie=A.__private__.convertPDFDateToDate=function(U){var we=parseInt(U.substr(2,4),10),Ze=parseInt(U.substr(6,2),10)-1,dt=parseInt(U.substr(8,2),10),St=parseInt(U.substr(10,2),10),Jt=parseInt(U.substr(12,2),10),sr=parseInt(U.substr(14,2),10);return new Date(we,Ze,dt,St,Jt,sr,0)},Pe=A.__private__.setCreationDate=function(U){var we;if(U===void 0&&(U=new Date),U instanceof Date)we=se(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=U}return ge=we},k=A.__private__.getCreationDate=function(U){var we=ge;return U==="jsDate"&&(we=Ie(ge)),we};A.setCreationDate=function(U){return Pe(U),this},A.getCreationDate=function(U){return k(U)};var H,R=A.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},M=A.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},G=0,X=[],D=[],Q=0,te=[],me=[],L=!1,he=D;A.__private__.setCustomOutputDestination=function(U){L=!0,he=U};var ne=function(U){L||(he=U)};A.__private__.resetCustomOutputDestination=function(){L=!1,he=D};var z=A.__private__.out=function(U){return U=U.toString(),Q+=U.length+1,he.push(U),he},ce=A.__private__.write=function(U){return z(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},K=A.__private__.getArrayBuffer=function(U){for(var we=U.length,Ze=new ArrayBuffer(we),dt=new Uint8Array(Ze);we--;)dt[we]=U.charCodeAt(we);return Ze},oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return oe};var xe=t.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(U){return xe=w===b?U/je:U,this};var De,nt=A.__private__.getFontSize=A.getFontSize=function(){return w===y?xe:xe*je},Me=t.R2L||!1;A.__private__.setR2L=A.setR2L=function(U){return Me=U,this},A.__private__.getR2L=A.getR2L=function(){return Me};var Je,lt=A.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))De=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');De=U}else De=parseInt(U,10)};A.__private__.getZoomMode=function(){return De};var ft,Ge=A.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Je=U};A.__private__.getPageMode=function(){return Je};var ye=A.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');ft=U};A.__private__.getLayoutMode=function(){return ft},A.__private__.setDisplayMode=A.setDisplayMode=function(U,we,Ze){return lt(U),ye(we),Ge(Ze),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(U){if(Object.keys(We).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[U]},A.__private__.getDocumentProperties=function(){return We},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(U){for(var we in We)We.hasOwnProperty(we)&&U[we]&&(We[we]=U[we]);return this},A.__private__.setDocumentProperty=function(U,we){if(Object.keys(We).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[U]=we};var qe,je,pe,He,at,yt={},bt={},kt=[],Vt={},ve={},Qe={},Z={},$e=null,Le=0,Ve=[],At=new mQ(A),pt=t.hotfixes||[],Be={},gt={},V=[],ae=function U(we,Ze,dt,St,Jt,sr){if(!(this instanceof U))return new U(we,Ze,dt,St,Jt,sr);isNaN(we)&&(we=1),isNaN(Ze)&&(Ze=0),isNaN(dt)&&(dt=0),isNaN(St)&&(St=1),isNaN(Jt)&&(Jt=0),isNaN(sr)&&(sr=0),this._matrix=[we,Ze,dt,St,Jt,sr]};Object.defineProperty(ae.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(ae.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(ae.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(ae.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(ae.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(ae.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(ae.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(ae.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(ae.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(ae.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(ae.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(ae.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(ae.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ae.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ae.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ae.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ae.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(U)},ae.prototype.multiply=function(U){var we=U.sx*this.sx+U.shy*this.shx,Ze=U.sx*this.shy+U.shy*this.sy,dt=U.shx*this.sx+U.sy*this.shx,St=U.shx*this.shy+U.sy*this.sy,Jt=U.tx*this.sx+U.ty*this.shx+this.tx,sr=U.tx*this.shy+U.ty*this.sy+this.ty;return new ae(we,Ze,dt,St,Jt,sr)},ae.prototype.decompose=function(){var U=this.sx,we=this.shy,Ze=this.shx,dt=this.sy,St=this.tx,Jt=this.ty,sr=Math.sqrt(U*U+we*we),kr=(U/=sr)*Ze+(we/=sr)*dt;Ze-=U*kr,dt-=we*kr;var Ur=Math.sqrt(Ze*Ze+dt*dt);return kr/=Ur,U*(dt/=Ur)<we*(Ze/=Ur)&&(U=-U,we=-we,kr=-kr,sr=-sr),{scale:new ae(sr,0,0,Ur,0,0),translate:new ae(1,0,0,1,St,Jt),rotate:new ae(U,we,-we,U,0,0),skew:new ae(1,0,kr,1,0,0)}},ae.prototype.toString=function(U){return this.join(" ")},ae.prototype.inversed=function(){var U=this.sx,we=this.shy,Ze=this.shx,dt=this.sy,St=this.tx,Jt=this.ty,sr=1/(U*dt-we*Ze),kr=dt*sr,Ur=-we*sr,rn=-Ze*sr,hn=U*sr;return new ae(kr,Ur,rn,hn,-kr*St-rn*Jt,-Ur*St-hn*Jt)},ae.prototype.applyToPoint=function(U){var we=U.x*this.sx+U.y*this.shx+this.tx,Ze=U.x*this.shy+U.y*this.sy+this.ty;return new au(we,Ze)},ae.prototype.applyToRectangle=function(U){var we=this.applyToPoint(U),Ze=this.applyToPoint(new au(U.x+U.w,U.y+U.h));return new Ah(we.x,we.y,Ze.x-we.x,Ze.y-we.y)},ae.prototype.clone=function(){var U=this.sx,we=this.shy,Ze=this.shx,dt=this.sy,St=this.tx,Jt=this.ty;return new ae(U,we,Ze,dt,St,Jt)},A.Matrix=ae;var Se=A.matrixMult=function(U,we){return we.multiply(U)},_e=new ae(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=_e;var Ee=function(U,we){if(!ve[U]){var Ze=(we instanceof n0?"Sh":"P")+(Object.keys(Vt).length+1).toString(10);we.id=Ze,ve[U]=Ze,Vt[Ze]=we,At.publish("addPattern",we)}};A.ShadingPattern=n0,A.TilingPattern=Gm,A.addShadingPattern=function(U,we){return S("addShadingPattern()"),Ee(U,we),this},A.beginTilingPattern=function(U){S("beginTilingPattern()"),Wd(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},A.endTilingPattern=function(U,we){S("endTilingPattern()"),we.stream=me[H].join(`
`),Ee(U,we),At.publish("endTilingPattern",we),V.pop().restore()};var ze,ut=A.__private__.newObject=function(){var U=st();return ee(U,!0),U},st=A.__private__.newObjectDeferred=function(){return G++,X[G]=function(){return Q},G},ee=function(U,we){return we=typeof we=="boolean"&&we,X[U]=Q,we&&z(U+" 0 obj"),U},W=A.__private__.newAdditionalObject=function(){var U={objId:st(),content:""};return te.push(U),U},re=st(),fe=st(),Ne=A.__private__.decodeColorString=function(U){var we=U.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length!==5||we[4]!=="k"&&we[4]!=="K"||(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var Ze=parseFloat(we[0]);we=[Ze,Ze,Ze,"r"]}for(var dt="#",St=0;St<3;St++)dt+=("0"+Math.floor(255*parseFloat(we[St])).toString(16)).slice(-2);return dt},be=A.__private__.encodeColorString=function(U){var we;typeof U=="string"&&(U={ch1:U});var Ze=U.ch1,dt=U.ch2,St=U.ch3,Jt=U.ch4,sr=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var kr=new $ee(Ze);if(kr.ok)Ze=kr.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var Ur=parseInt(Ze.substr(1),16);Ze=Ur>>16&255,dt=Ur>>8&255,St=255&Ur}if(dt===void 0||Jt===void 0&&Ze===dt&&dt===St)we=typeof Ze=="string"?Ze+" "+sr[0]:U.precision===2?P(Ze/255)+" "+sr[0]:T(Ze/255)+" "+sr[0];else if(Jt===void 0||ba(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return["1.","1.","1.",sr[1]].join(" ");we=typeof Ze=="string"?[Ze,dt,St,sr[1]].join(" "):U.precision===2?[P(Ze/255),P(dt/255),P(St/255),sr[1]].join(" "):[T(Ze/255),T(dt/255),T(St/255),sr[1]].join(" ")}else we=typeof Ze=="string"?[Ze,dt,St,Jt,sr[2]].join(" "):U.precision===2?[P(Ze),P(dt),P(St),P(Jt),sr[2]].join(" "):[T(Ze),T(dt),T(St),T(Jt),sr[2]].join(" ");return we},Xe=A.__private__.getFilters=function(){return i},it=A.__private__.putStream=function(U){var we=(U=U||{}).data||"",Ze=U.filters||Xe(),dt=U.alreadyAppliedFilters||[],St=U.addLength1||!1,Jt=we.length,sr=U.objectId,kr=function(Os){return Os};if(d!==null&&sr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(kr=Ct.encryptor(sr,0));var Ur={};Ze===!0&&(Ze=["FlateEncode"]);var rn=U.additionalKeyValues||[],hn=(Ur=Fr.API.processDataByFilters!==void 0?Fr.API.processDataByFilters(we,Ze):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if(Ur.data.length!==0&&(rn.push({key:"Length",value:Ur.data.length}),St===!0&&rn.push({key:"Length1",value:Jt})),hn.length!=0)if(hn.split("/").length-1==1)rn.push({key:"Filter",value:hn});else{rn.push({key:"Filter",value:"["+hn+"]"});for(var Fn=0;Fn<rn.length;Fn+=1)if(rn[Fn].key==="DecodeParms"){for(var ra=[],vs=0;vs<Ur.reverseChain.split("/").length-1;vs+=1)ra.push("null");ra.push(rn[Fn].value),rn[Fn].value="["+ra.join(" ")+"]"}}z("<<");for(var da=0;da<rn.length;da++)z("/"+rn[da].key+" "+rn[da].value);z(">>"),Ur.data.length!==0&&(z("stream"),z(kr(Ur.data)),z("endstream"))},xt=A.__private__.putPage=function(U){var we=U.number,Ze=U.data,dt=U.objId,St=U.contentsObjId;ee(dt,!0),z("<</Type /Page"),z("/Parent "+U.rootDictionaryObjId+" 0 R"),z("/Resources "+U.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(E(U.mediaBox.bottomLeftX))+" "+parseFloat(E(U.mediaBox.bottomLeftY))+" "+E(U.mediaBox.topRightX)+" "+E(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&z("/CropBox ["+E(U.cropBox.bottomLeftX)+" "+E(U.cropBox.bottomLeftY)+" "+E(U.cropBox.topRightX)+" "+E(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&z("/BleedBox ["+E(U.bleedBox.bottomLeftX)+" "+E(U.bleedBox.bottomLeftY)+" "+E(U.bleedBox.topRightX)+" "+E(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&z("/TrimBox ["+E(U.trimBox.bottomLeftX)+" "+E(U.trimBox.bottomLeftY)+" "+E(U.trimBox.topRightX)+" "+E(U.trimBox.topRightY)+"]"),U.artBox!==null&&z("/ArtBox ["+E(U.artBox.bottomLeftX)+" "+E(U.artBox.bottomLeftY)+" "+E(U.artBox.topRightX)+" "+E(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&z("/UserUnit "+U.userUnit),At.publish("putPage",{objId:dt,pageContext:Ve[we],pageNumber:we,page:Ze}),z("/Contents "+St+" 0 R"),z(">>"),z("endobj");var Jt=Ze.join(`
`);return w===b&&(Jt+=`
Q`),ee(St,!0),it({data:Jt,filters:Xe(),objectId:St}),z("endobj"),dt},_t=A.__private__.putPages=function(){var U,we,Ze=[];for(U=1;U<=Le;U++)Ve[U].objId=st(),Ve[U].contentsObjId=st();for(U=1;U<=Le;U++)Ze.push(xt({number:U,data:me[U],objId:Ve[U].objId,contentsObjId:Ve[U].contentsObjId,mediaBox:Ve[U].mediaBox,cropBox:Ve[U].cropBox,bleedBox:Ve[U].bleedBox,trimBox:Ve[U].trimBox,artBox:Ve[U].artBox,userUnit:Ve[U].userUnit,rootDictionaryObjId:re,resourceDictionaryObjId:fe}));ee(re,!0),z("<</Type /Pages");var dt="/Kids [";for(we=0;we<Le;we++)dt+=Ze[we]+" 0 R ";z(dt+"]"),z("/Count "+Le),z(">>"),z("endobj"),At.publish("postPutPages")},Et=function(U){At.publish("putFont",{font:U,out:z,newObject:ut,putStream:it}),U.isAlreadyPutted!==!0&&(U.objectNumber=ut(),z("<<"),z("/Type /Font"),z("/BaseFont /"+nx(U.postScriptName)),z("/Subtype /Type1"),typeof U.encoding=="string"&&z("/Encoding /"+U.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},Gt=function(U){U.objectNumber=ut();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[E(U.x),E(U.y),E(U.x+U.width),E(U.y+U.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var Ze=U.pages[1].join(`
`);it({data:Ze,additionalKeyValues:we,objectId:U.objectNumber}),z("endobj")},nr=function(U,we){we||(we=21);var Ze=ut(),dt=function(sr,kr){var Ur,rn=[],hn=1/(kr-1);for(Ur=0;Ur<1;Ur+=hn)rn.push(Ur);if(rn.push(1),sr[0].offset!=0){var Fn={offset:0,color:sr[0].color};sr.unshift(Fn)}if(sr[sr.length-1].offset!=1){var ra={offset:1,color:sr[sr.length-1].color};sr.push(ra)}for(var vs="",da=0,Os=0;Os<rn.length;Os++){for(Ur=rn[Os];Ur>sr[da+1].offset;)da++;var ys=sr[da].offset,Ds=(Ur-ys)/(sr[da+1].offset-ys),bs=sr[da].color,zl=sr[da+1].color;vs+=M(Math.round((1-Ds)*bs[0]+Ds*zl[0]).toString(16))+M(Math.round((1-Ds)*bs[1]+Ds*zl[1]).toString(16))+M(Math.round((1-Ds)*bs[2]+Ds*zl[2]).toString(16))}return vs.trim()}(U.colors,we),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+we+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),it({data:dt,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),z("endobj"),U.objectNumber=ut(),z("<< /ShadingType "+U.type),z("/ColorSpace /DeviceRGB");var Jt="/Coords ["+E(parseFloat(U.coords[0]))+" "+E(parseFloat(U.coords[1]))+" ";U.type===2?Jt+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3])):Jt+=E(parseFloat(U.coords[2]))+" "+E(parseFloat(U.coords[3]))+" "+E(parseFloat(U.coords[4]))+" "+E(parseFloat(U.coords[5])),z(Jt+="]"),U.matrix&&z("/Matrix ["+U.matrix.toString()+"]"),z("/Function "+Ze+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},ur=function(U,we){var Ze=st(),dt=ut();we.push({resourcesOid:Ze,objectOid:dt}),U.objectNumber=dt;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+U.boundingBox.map(E).join(" ")+"]"}),St.push({key:"XStep",value:E(U.xStep)}),St.push({key:"YStep",value:E(U.yStep)}),St.push({key:"Resources",value:Ze+" 0 R"}),U.matrix&&St.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),it({data:U.stream,additionalKeyValues:St,objectId:U.objectNumber}),z("endobj")},rr=function(U){for(var we in U.objectNumber=ut(),z("<<"),U)switch(we){case"opacity":z("/ca "+P(U[we]));break;case"stroke-opacity":z("/CA "+P(U[we]))}z(">>"),z("endobj")},cr=function(U){ee(U.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var we in z("/Font <<"),yt)yt.hasOwnProperty(we)&&(f===!1||f===!0&&h.hasOwnProperty(we))&&z("/"+we+" "+yt[we].objectNumber+" 0 R");z(">>")}(),function(){if(Object.keys(Vt).length>0){for(var we in z("/Shading <<"),Vt)Vt.hasOwnProperty(we)&&Vt[we]instanceof n0&&Vt[we].objectNumber>=0&&z("/"+we+" "+Vt[we].objectNumber+" 0 R");At.publish("putShadingPatternDict"),z(">>")}}(),function(we){if(Object.keys(Vt).length>0){for(var Ze in z("/Pattern <<"),Vt)Vt.hasOwnProperty(Ze)&&Vt[Ze]instanceof A.TilingPattern&&Vt[Ze].objectNumber>=0&&Vt[Ze].objectNumber<we&&z("/"+Ze+" "+Vt[Ze].objectNumber+" 0 R");At.publish("putTilingPatternDict"),z(">>")}}(U.objectOid),function(){if(Object.keys(Qe).length>0){var we;for(we in z("/ExtGState <<"),Qe)Qe.hasOwnProperty(we)&&Qe[we].objectNumber>=0&&z("/"+we+" "+Qe[we].objectNumber+" 0 R");At.publish("putGStateDict"),z(">>")}}(),function(){for(var we in z("/XObject <<"),Be)Be.hasOwnProperty(we)&&Be[we].objectNumber>=0&&z("/"+we+" "+Be[we].objectNumber+" 0 R");At.publish("putXobjectDict"),z(">>")}(),z(">>"),z("endobj")},Ir=function(U){bt[U.fontName]=bt[U.fontName]||{},bt[U.fontName][U.fontStyle]=U.id},dn=function(U,we,Ze,dt,St){var Jt={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:U,fontName:we,fontStyle:Ze,encoding:dt,isStandardFont:St||!1,metadata:{}};return At.publish("addFont",{font:Jt,instance:this}),yt[Jt.id]=Jt,Ir(Jt),Jt.id},qr=A.__private__.pdfEscape=A.pdfEscape=function(U,we){return function(Ze,dt){var St,Jt,sr,kr,Ur,rn,hn,Fn,ra;if(sr=(dt=dt||{}).sourceEncoding||"Unicode",Ur=dt.outputEncoding,(dt.autoencode||Ur)&&yt[qe].metadata&&yt[qe].metadata[sr]&&yt[qe].metadata[sr].encoding&&(kr=yt[qe].metadata[sr].encoding,!Ur&&yt[qe].encoding&&(Ur=yt[qe].encoding),!Ur&&kr.codePages&&(Ur=kr.codePages[0]),typeof Ur=="string"&&(Ur=kr[Ur]),Ur)){for(hn=!1,rn=[],St=0,Jt=Ze.length;St<Jt;St++)(Fn=Ur[Ze.charCodeAt(St)])?rn.push(String.fromCharCode(Fn)):rn.push(Ze[St]),rn[St].charCodeAt(0)>>8&&(hn=!0);Ze=rn.join("")}for(St=Ze.length;hn===void 0&&St!==0;)Ze.charCodeAt(St-1)>>8&&(hn=!0),St--;if(!hn)return Ze;for(rn=dt.noBOM?[]:[254,255],St=0,Jt=Ze.length;St<Jt;St++){if((ra=(Fn=Ze.charCodeAt(St))>>8)>>8)throw new Error("Character at position "+St+" of string '"+Ze+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rn.push(ra),rn.push(Fn-(ra<<8))}return String.fromCharCode.apply(void 0,rn)}(U,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ln=A.__private__.beginPage=function(U){me[++Le]=[],Ve[Le]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},Mt(Le),ne(me[H])},qs=function(U,we){var Ze,dt,St;switch(r=we||r,typeof U=="string"&&(Ze=x(U.toLowerCase()),Array.isArray(Ze)&&(dt=Ze[0],St=Ze[1])),Array.isArray(U)&&(dt=U[0]*je,St=U[1]*je),isNaN(dt)&&(dt=a[0],St=a[1]),(dt>14400||St>14400)&&(Fa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),St=Math.min(14400,St)),a=[dt,St],r.substr(0,1)){case"l":St>dt&&(a=[St,dt]);break;case"p":dt>St&&(a=[St,dt])}ln(a),tn(uh),z(td),Ea!==0&&z(Ea+" J"),cm!==0&&z(cm+" j"),At.publish("addPage",{pageNumber:Le})},rt=function(U){U>0&&U<=Le&&(me.splice(U,1),Ve.splice(U,1),Le--,H>Le&&(H=Le),this.setPage(H))},Mt=function(U){U>0&&U<=Le&&(H=U)},Yt=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return me.length-1},ar=function(U,we,Ze){var dt,St=void 0;return Ze=Ze||{},U=U!==void 0?U:yt[qe].fontName,we=we!==void 0?we:yt[qe].fontStyle,dt=U.toLowerCase(),bt[dt]!==void 0&&bt[dt][we]!==void 0?St=bt[dt][we]:bt[U]!==void 0&&bt[U][we]!==void 0?St=bt[U][we]:Ze.disableWarning===!1&&Fa.warn("Unable to look up font label for font '"+U+"', '"+we+"'. Refer to getFontList() for available fonts."),St||Ze.noFallback||(St=bt.times[we])==null&&(St=bt.times.normal),St},It=A.__private__.putInfo=function(){var U=ut(),we=function(dt){return dt};for(var Ze in d!==null&&(we=Ct.encryptor(U,0)),z("<<"),z("/Producer ("+qr(we("jsPDF "+Fr.version))+")"),We)We.hasOwnProperty(Ze)&&We[Ze]&&z("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+qr(we(We[Ze]))+")");z("/CreationDate ("+qr(we(ge))+")"),z(">>"),z("endobj")},mr=A.__private__.putCatalog=function(U){var we=(U=U||{}).rootDictionaryObjId||re;switch(ut(),z("<<"),z("/Type /Catalog"),z("/Pages "+we+" 0 R"),De||(De="fullwidth"),De){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+De;Ze.substr(Ze.length-1)==="%"&&(De=parseInt(De)/100),typeof De=="number"&&z("/OpenAction [3 0 R /XYZ null null "+P(De)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}Je&&z("/PageMode /"+Je),At.publish("putCatalog"),z(">>"),z("endobj")},fr=A.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(G+1)),z("/Root "+G+" 0 R"),z("/Info "+(G-1)+" 0 R"),d!==null&&z("/Encrypt "+Ct.oid+" 0 R"),z("/ID [ <"+le+"> <"+le+"> ]"),z(">>")},Ht=A.__private__.putHeader=function(){z("%PDF-"+m),z("%")},ct=A.__private__.putXRef=function(){var U="0000000000";z("xref"),z("0 "+(G+1)),z("0000000000 65535 f ");for(var we=1;we<=G;we++)typeof X[we]=="function"?z((U+X[we]()).slice(-10)+" 00000 n "):X[we]!==void 0?z((U+X[we]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},Oe=A.__private__.buildDocument=function(){var U;G=0,Q=0,D=[],X=[],te=[],re=st(),fe=st(),ne(D),At.publish("buildDocument"),Ht(),_t(),function(){At.publish("putAdditionalObjects");for(var Ze=0;Ze<te.length;Ze++){var dt=te[Ze];ee(dt.objId,!0),z(dt.content),z("endobj")}At.publish("postPutAdditionalObjects")}(),U=[],function(){for(var Ze in yt)yt.hasOwnProperty(Ze)&&(f===!1||f===!0&&h.hasOwnProperty(Ze))&&Et(yt[Ze])}(),function(){var Ze;for(Ze in Qe)Qe.hasOwnProperty(Ze)&&rr(Qe[Ze])}(),function(){for(var Ze in Be)Be.hasOwnProperty(Ze)&&Gt(Be[Ze])}(),function(Ze){var dt;for(dt in Vt)Vt.hasOwnProperty(dt)&&(Vt[dt]instanceof n0?nr(Vt[dt]):Vt[dt]instanceof Gm&&ur(Vt[dt],Ze))}(U),At.publish("putResources"),U.forEach(cr),cr({resourcesOid:fe,objectOid:Number.MAX_SAFE_INTEGER}),At.publish("postPutResources"),d!==null&&(Ct.oid=ut(),z("<<"),z("/Filter /Standard"),z("/V "+Ct.v),z("/R "+Ct.r),z("/U <"+Ct.toHexString(Ct.U)+">"),z("/O <"+Ct.toHexString(Ct.O)+">"),z("/P "+Ct.P),z(">>"),z("endobj")),It(),mr();var we=Q;return ct(),fr(),z("startxref"),z(""+we),z("%%EOF"),ne(me[H]),D.join(`
`)},ot=A.__private__.getBlob=function(U){return new Blob([K(U)],{type:"application/pdf"})},mt=A.output=A.__private__.output=(ze=function(U,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",U){case void 0:return Oe();case"save":A.save(we.filename);break;case"arraybuffer":return K(Oe());case"blob":return ot(Oe());case"bloburi":case"bloburl":if(fn.URL!==void 0&&typeof fn.URL.createObjectURL=="function")return fn.URL&&fn.URL.createObjectURL(ot(Oe()))||void 0;Fa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",dt=Oe();try{Ze=fQ(dt)}catch{Ze=fQ(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+we.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(St=we.pdfObjectUrl,Jt="");var sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+Jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",kr=fn.open();return kr!==null&&kr.document.write(sr),kr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fn)==="[object Window]"){var Ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',rn=fn.open();if(rn!==null){rn.document.write(Ur);var hn=this;rn.document.documentElement.querySelector("#pdfViewer").onload=function(){rn.document.title=we.filename,rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(hn.output("bloburl"))}}return rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',ra=fn.open();if(ra!==null&&(ra.document.write(Fn),ra.document.title=we.filename),ra||typeof safari>"u")return ra;break;case"datauri":case"dataurl":return fn.document.location.href=this.output("datauristring",we);default:return null}},ze.foo=function(){try{return ze.apply(this,arguments)}catch(Ze){var U=Ze.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var we="Error in function "+U.split(`
`)[0].split("<")[0]+": "+Ze.message;if(!fn.console)throw new Error(we);fn.console.error(we,Ze),fn.alert&&alert(we)}},ze.foo.bar=ze,ze.foo),wt=function(U){return Array.isArray(pt)===!0&&pt.indexOf(U)>-1};switch(n){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=wt("px_scaling")==1?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);je=n}var Ct=null;Pe(),Ae();var Rt=A.__private__.getPageInfo=A.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ve[U].objId,pageNumber:U,pageContext:Ve[U]}},Pt=A.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Ve)if(Ve[we].objId===U)break;return Rt(we)},qt=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Ve[H].objId,pageNumber:H,pageContext:Ve[H]}};A.addPage=function(){return qs.apply(this,arguments),this},A.setPage=function(){return Mt.apply(this,arguments),ne.call(this,me[H]),this},A.insertPage=function(U){return this.addPage(),this.movePage(H,U),this},A.movePage=function(U,we){var Ze,dt;if(U>we){Ze=me[U],dt=Ve[U];for(var St=U;St>we;St--)me[St]=me[St-1],Ve[St]=Ve[St-1];me[we]=Ze,Ve[we]=dt,this.setPage(we)}else if(U<we){Ze=me[U],dt=Ve[U];for(var Jt=U;Jt<we;Jt++)me[Jt]=me[Jt+1],Ve[Jt]=Ve[Jt+1];me[we]=Ze,Ve[we]=dt,this.setPage(we)}return this},A.deletePage=function(){return rt.apply(this,arguments),this},A.__private__.text=A.text=function(U,we,Ze,dt,St){var Jt,sr,kr,Ur,rn,hn,Fn,ra,vs,da=(dt=dt||{}).scope||this;if(typeof U=="number"&&typeof we=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var Os=Ze;Ze=we,we=U,U=Os}if(arguments[3]instanceof ae==0?(kr=arguments[4],Ur=arguments[5],ba(Fn=arguments[3])==="object"&&Fn!==null||(typeof kr=="string"&&(Ur=kr,kr=null),typeof Fn=="string"&&(Ur=Fn,Fn=null),typeof Fn=="number"&&(kr=Fn,Fn=null),dt={flags:Fn,angle:kr,align:Ur})):(S("The transform parameter of text() with a Matrix value"),vs=St),isNaN(we)||isNaN(Ze)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return da;var ys,Ds="",bs=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:zd,zl=da.internal.scaleFactor;function ou(la){return la=la.split("	").join(Array(dt.TabLen||9).join(" ")),qr(la,Fn)}function lu(la){for(var Pa,Ws=la.concat(),wi=[],Hf=Ws.length;Hf--;)typeof(Pa=Ws.shift())=="string"?wi.push(Pa):Array.isArray(la)&&(Pa.length===1||Pa[1]===void 0&&Pa[2]===void 0)?wi.push(Pa[0]):wi.push([Pa[0],Pa[1],Pa[2]]);return wi}function C(la,Pa){var Ws;if(typeof la=="string")Ws=Pa(la)[0];else if(Array.isArray(la)){for(var wi,Hf,u1=la.concat(),vg=[],Lw=u1.length;Lw--;)typeof(wi=u1.shift())=="string"?vg.push(Pa(wi)[0]):Array.isArray(wi)&&typeof wi[0]=="string"&&(Hf=Pa(wi[0],wi[1],wi[2]),vg.push([Hf[0],Hf[1],Hf[2]]));Ws=vg}return Ws}var Y=!1,ue=!0;if(typeof U=="string")Y=!0;else if(Array.isArray(U)){var Ue=U.concat();sr=[];for(var jt,Qt=Ue.length;Qt--;)(typeof(jt=Ue.shift())!="string"||Array.isArray(jt)&&typeof jt[0]!="string")&&(ue=!1);Y=ue}if(Y===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var xr=xe/da.internal.scaleFactor,Ln=xr*(bs-1);switch(dt.baseline){case"bottom":Ze-=Ln;break;case"top":Ze+=xr-Ln;break;case"hanging":Ze+=xr-2*Ln;break;case"middle":Ze+=xr/2-Ln}if((hn=dt.maxWidth||0)>0&&(typeof U=="string"?U=da.splitTextToSize(U,hn):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(la,Pa){return la.concat(da.splitTextToSize(Pa,hn))},[]))),Jt={text:U,x:we,y:Ze,options:dt,mutex:{pdfEscape:qr,activeFontKey:qe,fonts:yt,activeFontSize:xe}},At.publish("preProcessText",Jt),U=Jt.text,kr=(dt=Jt.options).angle,vs instanceof ae==0&&kr&&typeof kr=="number"){kr*=Math.PI/180,dt.rotationDirection===0&&(kr=-kr),w===b&&(kr=-kr);var ws=Math.cos(kr),jn=Math.sin(kr);vs=new ae(ws,jn,-jn,ws,0,0)}else kr&&kr instanceof ae&&(vs=kr);w!==b||vs||(vs=_e),(rn=dt.charSpace||nu)!==void 0&&(Ds+=E(F(rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ra=dt.horizontalScale)!==void 0&&(Ds+=E(100*ra)+` Tz
`),dt.lang;var Wn=-1,Ra=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,bc=da.internal.getCurrentPageInfo().pageContext;switch(Ra){case 0:case!1:case"fill":Wn=0;break;case 1:case!0:case"stroke":Wn=1;break;case 2:case"fillThenStroke":Wn=2;break;case 3:case"invisible":Wn=3;break;case 4:case"fillAndAddForClipping":Wn=4;break;case 5:case"strokeAndAddPathForClipping":Wn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wn=6;break;case 7:case"addToPathForClipping":Wn=7}var Wo=bc.usedRenderingMode!==void 0?bc.usedRenderingMode:-1;Wn!==-1?Ds+=Wn+` Tr
`:Wo!==-1&&(Ds+=`0 Tr
`),Wn!==-1&&(bc.usedRenderingMode=Wn),Ur=dt.align||"left";var wo,rd=xe*bs,n1=da.internal.pageSize.getWidth(),a1=yt[qe];rn=dt.charSpace||nu,hn=dt.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var mh=[],fm=function(la){return da.getStringUnitWidth(la,{font:a1,charSpace:rn,fontSize:xe,doKerning:!1})*xe/zl};if(Object.prototype.toString.call(U)==="[object Array]"){var wc;sr=lu(U),Ur!=="left"&&(wo=sr.map(fm));var Nc,ph=0;if(Ur==="right"){we-=wo[0],U=[],Qt=sr.length;for(var Vf=0;Vf<Qt;Vf++)Vf===0?(Nc=Yi(we),wc=ed(Ze)):(Nc=F(ph-wo[Vf]),wc=-rd),U.push([sr[Vf],Nc,wc]),ph=wo[Vf]}else if(Ur==="center"){we-=wo[0]/2,U=[],Qt=sr.length;for(var gh=0;gh<Qt;gh++)gh===0?(Nc=Yi(we),wc=ed(Ze)):(Nc=F((ph-wo[gh])/2),wc=-rd),U.push([sr[gh],Nc,wc]),ph=wo[gh]}else if(Ur==="left"){U=[],Qt=sr.length;for(var s1=0;s1<Qt;s1++)U.push(sr[s1])}else if(Ur==="justify"&&a1.encoding==="Identity-H"){U=[],Qt=sr.length,hn=hn!==0?hn:n1;for(var xg=0,zs=0;zs<Qt;zs++)if(wc=zs===0?ed(Ze):-rd,Nc=zs===0?Yi(we):xg,zs<Qt-1){var Mw=F((hn-wo[zs])/(sr[zs].split(" ").length-1)),Yd=sr[zs].split(" ");U.push([Yd[0]+" ",Nc,wc]),xg=0;for(var Jd=1;Jd<Yd.length;Jd++){var i1=(fm(Yd[Jd-1]+" "+Yd[Jd])-fm(Yd[Jd]))*zl+Mw;Jd==Yd.length-1?U.push([Yd[Jd],i1,0]):U.push([Yd[Jd]+" ",i1,0]),xg-=i1}}else U.push([sr[zs],Nc,wc]);U.push(["",xg,0])}else{if(Ur!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Qt=sr.length,hn=hn!==0?hn:n1,zs=0;zs<Qt;zs++){wc=zs===0?ed(Ze):-rd,Nc=zs===0?Yi(we):0;var o1=sr[zs].split(" ").length-1,l1=o1>0?(hn-wo[zs])/o1:0;zs<Qt-1?mh.push(E(F(l1))):mh.push(0),U.push([sr[zs],Nc,wc])}}}(typeof dt.R2L=="boolean"?dt.R2L:Me)===!0&&(U=C(U,function(la,Pa,Ws){return[la.split("").reverse().join(""),Pa,Ws]})),Jt={text:U,x:we,y:Ze,options:dt,mutex:{pdfEscape:qr,activeFontKey:qe,fonts:yt,activeFontSize:xe}},At.publish("postProcessText",Jt),U=Jt.text,ys=Jt.mutex.isHex||!1;var c1=yt[qe].encoding;c1!=="WinAnsiEncoding"&&c1!=="StandardEncoding"||(U=C(U,function(la,Pa,Ws){return[ou(la),Pa,Ws]})),sr=lu(U),U=[];for(var xh,vh,yh,Am=Array.isArray(sr[0])?1:0,bh="",hm=function(la,Pa,Ws){var wi="";return Ws instanceof ae?(Ws=typeof dt.angle=="number"?Se(Ws,new ae(1,0,0,1,la,Pa)):Se(new ae(1,0,0,1,la,Pa),Ws),w===b&&(Ws=Se(new ae(1,0,0,-1,0,0),Ws)),wi=Ws.join(" ")+` Tm
`):wi=E(la)+" "+E(Pa)+` Td
`,wi},cu=0;cu<sr.length;cu++){switch(bh="",Am){case 1:yh=(ys?"<":"(")+sr[cu][0]+(ys?">":")"),xh=parseFloat(sr[cu][1]),vh=parseFloat(sr[cu][2]);break;case 0:yh=(ys?"<":"(")+sr[cu]+(ys?">":")"),xh=Yi(we),vh=ed(Ze)}mh!==void 0&&mh[cu]!==void 0&&(bh=mh[cu]+` Tw
`),cu===0?U.push(bh+hm(xh,vh,vs)+yh):Am===0?U.push(bh+yh):Am===1&&U.push(bh+hm(xh,vh,vs)+yh)}U=Am===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Zd=`BT
/`;return Zd+=qe+" "+xe+` Tf
`,Zd+=E(xe*bs)+` TL
`,Zd+=yc+`
`,Zd+=Ds,Zd+=U,z(Zd+="ET"),h[qe]=!0,da};var Ar=A.__private__.clip=A.clip=function(U){return z(U==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return Ar("evenodd")},A.__private__.discardPath=A.discardPath=function(){return z("n"),this};var Cr=A.__private__.isValidStyle=function(U){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(we=!0),we};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(U){return Cr(U)&&(u=U),this};var as=A.__private__.getStyle=A.getStyle=function(U){var we=u;switch(U){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=U}return we},oa=A.close=function(){return z("h"),this};A.stroke=function(){return z("S"),this},A.fill=function(U){return ta("f",U),this},A.fillEvenOdd=function(U){return ta("f*",U),this},A.fillStroke=function(U){return ta("B",U),this},A.fillStrokeEvenOdd=function(U){return ta("B*",U),this};var ta=function(U,we){ba(we)==="object"?Zu(we,U):z(U)},ss=function(U){U===null||w===b&&U===void 0||(U=as(U),z(U))};function Xi(U,we,Ze,dt,St){var Jt=new Gm(we||this.boundingBox,Ze||this.xStep,dt||this.yStep,this.gState,St||this.matrix);Jt.stream=this.stream;var sr=U+"$$"+this.cloneIndex+++"$$";return Ee(sr,Jt),Jt}var Zu=function(U,we){var Ze=ve[U.key],dt=Vt[Ze];if(dt instanceof n0)z("q"),z(qd(we)),dt.gState&&A.setGState(dt.gState),z(U.matrix.toString()+" cm"),z("/"+Ze+" sh"),z("Q");else if(dt instanceof Gm){var St=new ae(1,0,0,-1,0,iu());U.matrix&&(St=St.multiply(U.matrix||_e),Ze=Xi.call(dt,U.key,U.boundingBox,U.xStep,U.yStep,St).id),z("q"),z("/Pattern cs"),z("/"+Ze+" scn"),dt.gState&&A.setGState(dt.gState),z(we),z("Q")}},qd=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},tu=A.moveTo=function(U,we){return z(E(F(U))+" "+E(J(we))+" m"),this},Lf=A.lineTo=function(U,we){return z(E(F(U))+" "+E(J(we))+" l"),this},bo=A.curveTo=function(U,we,Ze,dt,St,Jt){return z([E(F(U)),E(J(we)),E(F(Ze)),E(J(dt)),E(F(St)),E(J(Jt)),"c"].join(" ")),this};A.__private__.line=A.line=function(U,we,Ze,dt,St){if(isNaN(U)||isNaN(we)||isNaN(Ze)||isNaN(dt)||!Cr(St))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[Ze-U,dt-we]],U,we,[1,1],St||"S"):this.lines([[Ze-U,dt-we]],U,we,[1,1]).stroke()},A.__private__.lines=A.lines=function(U,we,Ze,dt,St,Jt){var sr,kr,Ur,rn,hn,Fn,ra,vs,da,Os,ys,Ds;if(typeof U=="number"&&(Ds=Ze,Ze=we,we=U,U=Ds),dt=dt||[1,1],Jt=Jt||!1,isNaN(we)||isNaN(Ze)||!Array.isArray(U)||!Array.isArray(dt)||!Cr(St)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(tu(we,Ze),sr=dt[0],kr=dt[1],rn=U.length,Os=we,ys=Ze,Ur=0;Ur<rn;Ur++)(hn=U[Ur]).length===2?(Os=hn[0]*sr+Os,ys=hn[1]*kr+ys,Lf(Os,ys)):(Fn=hn[0]*sr+Os,ra=hn[1]*kr+ys,vs=hn[2]*sr+Os,da=hn[3]*kr+ys,Os=hn[4]*sr+Os,ys=hn[5]*kr+ys,bo(Fn,ra,vs,da,Os,ys));return Jt&&oa(),ss(St),this},A.path=function(U){for(var we=0;we<U.length;we++){var Ze=U[we],dt=Ze.c;switch(Ze.op){case"m":tu(dt[0],dt[1]);break;case"l":Lf(dt[0],dt[1]);break;case"c":bo.apply(this,dt);break;case"h":oa()}}return this},A.__private__.rect=A.rect=function(U,we,Ze,dt,St){if(isNaN(U)||isNaN(we)||isNaN(Ze)||isNaN(dt)||!Cr(St))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(dt=-dt),z([E(F(U)),E(J(we)),E(F(Ze)),E(F(dt)),"re"].join(" ")),ss(St),this},A.__private__.triangle=A.triangle=function(U,we,Ze,dt,St,Jt,sr){if(isNaN(U)||isNaN(we)||isNaN(Ze)||isNaN(dt)||isNaN(St)||isNaN(Jt)||!Cr(sr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-U,dt-we],[St-Ze,Jt-dt],[U-St,we-Jt]],U,we,[1,1],sr,!0),this},A.__private__.roundedRect=A.roundedRect=function(U,we,Ze,dt,St,Jt,sr){if(isNaN(U)||isNaN(we)||isNaN(Ze)||isNaN(dt)||isNaN(St)||isNaN(Jt)||!Cr(sr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kr=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*Ze),Jt=Math.min(Jt,.5*dt),this.lines([[Ze-2*St,0],[St*kr,0,St,Jt-Jt*kr,St,Jt],[0,dt-2*Jt],[0,Jt*kr,-St*kr,Jt,-St,Jt],[2*St-Ze,0],[-St*kr,0,-St,-Jt*kr,-St,-Jt],[0,2*Jt-dt],[0,-Jt*kr,St*kr,-Jt,St,-Jt]],U+St,we,[1,1],sr,!0),this},A.__private__.ellipse=A.ellipse=function(U,we,Ze,dt,St){if(isNaN(U)||isNaN(we)||isNaN(Ze)||isNaN(dt)||!Cr(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*Ze,sr=4/3*(Math.SQRT2-1)*dt;return tu(U+Ze,we),bo(U+Ze,we-sr,U+Jt,we-dt,U,we-dt),bo(U-Jt,we-dt,U-Ze,we-sr,U-Ze,we),bo(U-Ze,we+sr,U-Jt,we+dt,U,we+dt),bo(U+Jt,we+dt,U+Ze,we+sr,U+Ze,we),ss(St),this},A.__private__.circle=A.circle=function(U,we,Ze,dt){if(isNaN(U)||isNaN(we)||isNaN(Ze)||!Cr(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,we,Ze,Ze,dt)},A.setFont=function(U,we,Ze){return Ze&&(we=_(we,Ze)),qe=ar(U,we,{disableWarning:!1}),this};var ru=A.__private__.getFont=A.getFont=function(){return yt[ar.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var U,we,Ze={};for(U in bt)if(bt.hasOwnProperty(U))for(we in Ze[U]=[],bt[U])bt[U].hasOwnProperty(we)&&Ze[U].push(we);return Ze},A.addFont=function(U,we,Ze,dt,St){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(Ze=_(Ze,dt)),dn.call(this,U,we,Ze,St=St||"Identity-H")};var zd,uh=t.lineWidth||.200025,mg=A.__private__.getLineWidth=A.getLineWidth=function(){return uh},tn=A.__private__.setLineWidth=A.setLineWidth=function(U){return uh=U,z(E(F(U))+" w"),this};A.__private__.setLineDash=Fr.API.setLineDash=Fr.API.setLineDashPattern=function(U,we){if(U=U||[],we=we||0,isNaN(we)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(Ze){return E(F(Ze))}).join(" "),we=E(F(we)),z("["+U+"] "+we+" d"),this};var Zv=A.__private__.getLineHeight=A.getLineHeight=function(){return xe*zd};A.__private__.getLineHeight=A.getLineHeight=function(){return xe*zd};var e1=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(zd=U),this},t1=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return zd};e1(t.lineHeight);var Yi=A.__private__.getHorizontalCoordinate=function(U){return F(U)},ed=A.__private__.getVerticalCoordinate=function(U){return w===b?U:Ve[H].mediaBox.topRightY-Ve[H].mediaBox.bottomLeftY-F(U)},r1=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(U){return E(Yi(U))},dh=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(U){return E(ed(U))},td=t.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return Ne(td)},A.__private__.setStrokeColor=A.setDrawColor=function(U,we,Ze,dt){return td=be({ch1:U,ch2:we,ch3:Ze,ch4:dt,pdfColorType:"draw",precision:2}),z(td),this};var fh=t.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return Ne(fh)},A.__private__.setFillColor=A.setFillColor=function(U,we,Ze,dt){return fh=be({ch1:U,ch2:we,ch3:Ze,ch4:dt,pdfColorType:"fill",precision:2}),z(fh),this};var yc=t.textColor||"0 g",Uf=A.__private__.getTextColor=A.getTextColor=function(){return Ne(yc)};A.__private__.setTextColor=A.setTextColor=function(U,we,Ze,dt){return yc=be({ch1:U,ch2:we,ch3:Ze,ch4:dt,pdfColorType:"text",precision:3}),this};var nu=t.charSpace,lm=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(nu||0)};A.__private__.setCharSpace=A.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return nu=U,this};var Ea=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(U){var we=A.CapJoinStyles[U];if(we===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ea=we,z(we+" J"),this};var cm=0;A.__private__.setLineJoin=A.setLineJoin=function(U){var we=A.CapJoinStyles[U];if(we===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cm=we,z(we+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(E(F(U))+" M"),this},A.GState=Yb,A.setGState=function(U){(U=typeof U=="string"?Qe[Z[U]]:pg(null,U)).equals($e)||(z("/"+U.id+" gs"),$e=U)};var pg=function(U,we){if(!U||!Z[U]){var Ze=!1;for(var dt in Qe)if(Qe.hasOwnProperty(dt)&&Qe[dt].equals(we)){Ze=!0;break}if(Ze)we=Qe[dt];else{var St="GS"+(Object.keys(Qe).length+1).toString(10);Qe[St]=we,we.id=St}return U&&(Z[U]=we.id),At.publish("addGState",we),we}};A.addGState=function(U,we){return pg(U,we),this},A.saveGraphicsState=function(){return z("q"),kt.push({key:qe,size:xe,color:yc}),this},A.restoreGraphicsState=function(){z("Q");var U=kt.pop();return qe=U.key,xe=U.size,yc=U.color,$e=null,this},A.setCurrentTransformationMatrix=function(U){return z(U.toString()+" cm"),this},A.comment=function(U){return z("#"+U),this};var au=function(U,we){var Ze=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(Jt){isNaN(Jt)||(Ze=parseFloat(Jt))}});var dt=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function(Jt){isNaN(Jt)||(dt=parseFloat(Jt))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function(Jt){St=Jt.toString()}}),this},Ah=function(U,we,Ze,dt){au.call(this,U,we),this.type="rect";var St=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(sr){isNaN(sr)||(St=parseFloat(sr))}});var Jt=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(sr){isNaN(sr)||(Jt=parseFloat(sr))}}),this},Qf=function(){this.page=Le,this.currentPage=H,this.pages=me.slice(0),this.pagesContext=Ve.slice(0),this.x=pe,this.y=He,this.matrix=at,this.width=Nl(H),this.height=gg(H),this.outputDestination=he,this.id="",this.objectNumber=-1};Qf.prototype.restore=function(){Le=this.page,H=this.currentPage,Ve=this.pagesContext,me=this.pages,pe=this.x,He=this.y,at=this.matrix,um(H,this.width),Cl(H,this.height),he=this.outputDestination};var Wd=function(U,we,Ze,dt,St){V.push(new Qf),Le=H=0,me=[],pe=U,He=we,at=St,ln([Ze,dt])};for(var Xd in A.beginFormObject=function(U,we,Ze,dt,St){return Wd(U,we,Ze,dt,St),this},A.endFormObject=function(U){return function(we){if(gt[we])V.pop().restore();else{var Ze=new Qf,dt="Xo"+(Object.keys(Be).length+1).toString(10);Ze.id=dt,gt[we]=dt,Be[dt]=Ze,At.publish("addFormObject",Ze),V.pop().restore()}}(U),this},A.doFormObject=function(U,we){var Ze=Be[gt[U]];return z("q"),z(we.toString()+" cm"),z("/"+Ze.id+" Do"),z("Q"),this},A.getFormObject=function(U){var we=Be[gt[U]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},A.save=function(U,we){return U=U||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Bm(ot(Oe()),U),typeof Bm.unload=="function"&&fn.setTimeout&&setTimeout(Bm.unload,911),this):new Promise(function(Ze,dt){try{var St=Bm(ot(Oe()),U);typeof Bm.unload=="function"&&fn.setTimeout&&setTimeout(Bm.unload,911),Ze(St)}catch(Jt){dt(Jt.message)}})},Fr.API)Fr.API.hasOwnProperty(Xd)&&(Xd==="events"&&Fr.API.events.length?function(U,we){var Ze,dt,St;for(St=we.length-1;St!==-1;St--)Ze=we[St][0],dt=we[St][1],U.subscribe.apply(U,[Ze].concat(typeof dt=="function"?[dt]:dt))}(At,Fr.API.events):A[Xd]=Fr.API[Xd]);function Nl(U){return Ve[U].mediaBox.topRightX-Ve[U].mediaBox.bottomLeftX}function um(U,we){Ve[U].mediaBox.topRightX=we+Ve[U].mediaBox.bottomLeftX}function gg(U){return Ve[U].mediaBox.topRightY-Ve[U].mediaBox.bottomLeftY}function Cl(U,we){Ve[U].mediaBox.topRightY=we+Ve[U].mediaBox.bottomLeftY}var su=A.getPageWidth=function(U){return Nl(U=U||H)/je},hh=A.setPageWidth=function(U,we){um(U,we*je)},iu=A.getPageHeight=function(U){return gg(U=U||H)/je},dm=A.setPageHeight=function(U,we){Cl(U,we*je)};return A.internal={pdfEscape:qr,getStyle:as,getFont:ru,getFontSize:nt,getCharSpace:lm,getTextColor:Uf,getLineHeight:Zv,getLineHeightFactor:t1,getLineWidth:mg,write:ce,getHorizontalCoordinate:Yi,getVerticalCoordinate:ed,getCoordinateString:r1,getVerticalCoordinateString:dh,collections:{},newObject:ut,newAdditionalObject:W,newObjectDeferred:st,newObjectDeferredBegin:ee,getFilters:Xe,putStream:it,events:At,scaleFactor:je,pageSize:{getWidth:function(){return su(H)},setWidth:function(U){hh(H,U)},getHeight:function(){return iu(H)},setHeight:function(U){dm(H,U)}},encryptionOptions:d,encryption:Ct,getEncryptor:function(U){return d!==null?Ct.encryptor(U,0):function(we){return we}},output:mt,getNumberOfPages:Yt,get pages(){return me},out:z,f2:P,f3:T,getPageInfo:Rt,getPageInfoByObjId:Pt,getCurrentPageInfo:qt,getPDFVersion:p,Point:au,Rectangle:Ah,Matrix:ae,hasHotfix:wt},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return su(H)},set:function(U){hh(H,U)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return iu(H)},set:function(U){dm(H,U)},enumerable:!0,configurable:!0}),(function(U){for(var we=0,Ze=oe.length;we<Ze;we++){var dt=dn.call(this,U[we][0],U[we][1],U[we][2],oe[we][3],!0);f===!1&&(h[dt]=!0);var St=U[we][0].split("-");Ir({id:dt,fontName:St[0],fontStyle:St[1]||""})}At.publish("addFonts",{fonts:yt,dictionary:bt})}).call(A,oe),qe="F1",qs(a,r),At.publish("initialized"),A}rx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},rx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},rx.prototype.processOwnerPassword=function(t,e){return VT(QT(e).substr(0,5),t)},rx.prototype.encryptor=function(t,e){var r=QT(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return VT(r,n)}},Yb.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ba(t)!==ba(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Fr.API={events:[]},Fr.version="3.0.4";var Us=Fr.API,O6=1,ng=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pn=function(t){return t.toFixed(2)},Fh=function(t){return t.toFixed(5)};Us.__acroform__={};var mc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},pQ=function(t){return t*O6},cf=function(t){var e=new zee,r=Mr.internal.getHeight(t)||0,n=Mr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pn(n)),Number(pn(r))],e},VEe=Us.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},HEe=Us.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},$Ee=Us.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},si=Us.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $Ee(t,e-1)},ii=Us.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VEe(t,e-1)},oi=Us.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HEe(t,e-1)},KEe=Us.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],i=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(pn(c.lowerLeft_X)),Number(pn(c.lowerLeft_Y)),Number(pn(c.upperRight_X)),Number(pn(c.upperRight_Y))]},GEe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=HT(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+pn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=cf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},HT=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,i=Mr.internal.getHeight(t)||0;i=i<0?-i:i;var l=Mr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,T,F){if(P+1<a.length){var J=T+" "+a[P+1][0];return rC(J,t,F).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=rC("3",t,s).height,h=t.multiline?i-s:(i-f)/2,A=h+=2,m=0,p=0,g=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+rC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&g!==a[b].length-1){if((f+2)*(y+2)+2>i)continue e;x+=a[b][g],w=!0,p=b,b--}else{x=(x+=a[b][g]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var j=parseInt(b),I=c(j,x,s),_=b>=a.length-1;if(I&&!_){x+=" ",g=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>i)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>i)continue e;p=j}}for(var E="",S=m;S<=p;S++){var O=a[S];if(t.multiline){if(S===p){E+=O[g]+" ",g=(g+1)%O.length;continue}if(S===m){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=rC(E,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=pn(u)+" "+pn(A)+` Td
`,e+="("+ng(E)+`) Tj
`,e+=-pn(u)+` 0 Td
`,A=-(s+2),d=0,m=w?p:p+1,y++,x=""}break}return n.text=e,n.fontSize=s,n},rC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},qEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zEe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},WEe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if($d.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(qEe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");O6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Wee,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&zEe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var l=n[i],c=[],u=l.Rect;if(l.Rect&&(l.Rect=KEe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Mr.createDefaultAppearanceStream(l),ba(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=GEe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var h in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(h)){var A=l.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var i in A)if(A.hasOwnProperty(i)){var m=A[i];typeof m=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=A)=="function"&&(m=m.call(a,l)),f+="/"+i+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,g){for(var x in p)if(p.hasOwnProperty(x)){var y=x,b=p[x];g.internal.newObjectDeferredBegin(b.objId,!0),ba(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},qee=Us.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),ba(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+ng(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ej=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+ng(n(t))+")"},gf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};gf.prototype.toString=function(){return this.objId+" 0 R"},gf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},gf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:qee(a,this.objId,this.scope)}):a instanceof gf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var zee=function(){gf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};mc(zee,gf);var Wee=function(){gf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+ng(r(t))+")"}},set:function(r){t=r}})};mc(Wee,gf);var $d=function t(){gf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!si(e,3)},set:function(x){x?this.F=ii(e,3):this.F=oi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof YE)return;s="FieldObject"+t.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ng(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(x){i=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/O6:u},set:function(x){u=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof YE||this instanceof j0))return Ej(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ti==0?Ej(h,this.objId,this.scope):h},set:function(x){x=x.toString(),h=this instanceof Ti==0?x.substr(0,1)==="("?Fg(x.substr(1,x.length-2)):Fg(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?Fg(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof Ti==1?"/"+x:x}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Ti==0?Ej(A,this.objId,this.scope):A},set:function(x){x=x.toString(),A=this instanceof Ti==0?x.substr(0,1)==="("?Fg(x.substr(1,x.length-2)):Fg(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ti==1?Fg(A.substr(1,A.length-1)):A},set:function(x){x=x.toString(),A=this instanceof Ti==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(x){x=!!x,p=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,1)},set:function(x){x?this.Ff=ii(this.Ff,1):this.Ff=oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,2)},set:function(x){x?this.Ff=ii(this.Ff,2):this.Ff=oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,3)},set:function(x){x?this.Ff=ii(this.Ff,3):this.Ff=oi(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');g=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(g){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};mc($d,gf);var np=function(){$d.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return qee(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,l){l||(l=1);for(var c,u=[];c=i.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,18)},set:function(r){r?this.Ff=ii(this.Ff,18):this.Ff=oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ii(this.Ff,19):this.Ff=oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,20)},set:function(r){r?(this.Ff=ii(this.Ff,20),e.sort()):this.Ff=oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,22)},set:function(r){r?this.Ff=ii(this.Ff,22):this.Ff=oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,23)},set:function(r){r?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,27)},set:function(r){r?this.Ff=ii(this.Ff,27):this.Ff=oi(this.Ff,27)}}),this.hasAppearanceStream=!1};mc(np,$d);var ap=function(){np.call(this),this.fontName="helvetica",this.combo=!1};mc(ap,np);var sp=function(){ap.call(this),this.combo=!0};mc(sp,ap);var Wy=function(){sp.call(this),this.edit=!0};mc(Wy,sp);var Ti=function(){$d.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,15)},set:function(r){r?this.Ff=ii(this.Ff,15):this.Ff=oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,16)},set:function(r){r?this.Ff=ii(this.Ff,16):this.Ff=oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,17)},set:function(r){r?this.Ff=ii(this.Ff,17):this.Ff=oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,26)},set:function(r){r?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+ng(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ba(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};mc(Ti,$d);var Xy=function(){Ti.call(this),this.pushButton=!0};mc(Xy,Ti);var ip=function(){Ti.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};mc(ip,Ti);var YE=function(){var t,e;$d.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+ng(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ba(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mc(YE,$d),ip.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},ip.prototype.createOption=function(t){var e=new YE;return e.Parent=this,e.optionName=t,this.Kids.push(e),XEe.call(this.scope,e),e};var Yy=function(){Ti.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mr.CheckBox.createAppearanceStream()};mc(Yy,Ti);var j0=function(){$d.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,13)},set:function(e){e?this.Ff=ii(this.Ff,13):this.Ff=oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,21)},set:function(e){e?this.Ff=ii(this.Ff,21):this.Ff=oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,23)},set:function(e){e?this.Ff=ii(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,24)},set:function(e){e?this.Ff=ii(this.Ff,24):this.Ff=oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,25)},set:function(e){e?this.Ff=ii(this.Ff,25):this.Ff=oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,26)},set:function(e){e?this.Ff=ii(this.Ff,26):this.Ff=oi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mc(j0,$d);var Jy=function(){j0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,14)},set:function(t){t?this.Ff=ii(this.Ff,14):this.Ff=oi(this.Ff,14)}}),this.password=!0};mc(Jy,j0);var Mr={CheckBox:{createAppearanceStream:function(){return{N:{On:Mr.CheckBox.YesNormal},D:{On:Mr.CheckBox.YesPushDown,Off:Mr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=HT(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+pn(Mr.internal.getWidth(t))+" "+pn(Mr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+pn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=cf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Mr.internal.getHeight(t),i=Mr.internal.getWidth(t),l=HT(t,t.caption);return a.push("1 g"),a.push("0 0 "+pn(i)+" "+pn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+pn(i-1)+" "+pn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+pn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pn(Mr.internal.getWidth(t))+" "+pn(Mr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Mr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Mr.RadioButton.Circle.YesNormal,e.D[t]=Mr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=cf(t);e.scope=t.scope;var r=[],n=Mr.internal.getWidth(t)<=Mr.internal.getHeight(t)?Mr.internal.getWidth(t)/4:Mr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Mr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Fh(Mr.internal.getWidth(t)/2)+" "+Fh(Mr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=[],n=Mr.internal.getWidth(t)<=Mr.internal.getHeight(t)?Mr.internal.getWidth(t)/4:Mr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Mr.internal.Bezier_C).toFixed(5)),i=Number((n*Mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fh(Mr.internal.getWidth(t)/2)+" "+Fh(Mr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Fh(Mr.internal.getWidth(t)/2)+" "+Fh(Mr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=[],n=Mr.internal.getWidth(t)<=Mr.internal.getHeight(t)?Mr.internal.getWidth(t)/4:Mr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Mr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fh(Mr.internal.getWidth(t)/2)+" "+Fh(Mr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Mr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Mr.RadioButton.Cross.YesNormal,e.D[t]=Mr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=cf(t);e.scope=t.scope;var r=[],n=Mr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+pn(Mr.internal.getWidth(t)-2)+" "+pn(Mr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pn(n.x1.x)+" "+pn(n.x1.y)+" m"),r.push(pn(n.x2.x)+" "+pn(n.x2.y)+" l"),r.push(pn(n.x4.x)+" "+pn(n.x4.y)+" m"),r.push(pn(n.x3.x)+" "+pn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=Mr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+pn(Mr.internal.getWidth(t))+" "+pn(Mr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+pn(Mr.internal.getWidth(t)-2)+" "+pn(Mr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(pn(r.x1.x)+" "+pn(r.x1.y)+" m"),n.push(pn(r.x2.x)+" "+pn(r.x2.y)+" l"),n.push(pn(r.x4.x)+" "+pn(r.x4.y)+" m"),n.push(pn(r.x3.x)+" "+pn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=cf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+pn(Mr.internal.getWidth(t))+" "+pn(Mr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Mr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Mr.internal.getWidth(t),r=Mr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Mr.internal.getWidth=function(t){var e=0;return ba(t)==="object"&&(e=pQ(t.Rect[2])),e},Mr.internal.getHeight=function(t){var e=0;return ba(t)==="object"&&(e=pQ(t.Rect[3])),e};var XEe=Us.addField=function(t){if(WEe(this,t),!(t instanceof $d))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Us.AcroFormChoiceField=np,Us.AcroFormListBox=ap,Us.AcroFormComboBox=sp,Us.AcroFormEditBox=Wy,Us.AcroFormButton=Ti,Us.AcroFormPushButton=Xy,Us.AcroFormRadioButton=ip,Us.AcroFormCheckBox=Yy,Us.AcroFormTextField=j0,Us.AcroFormPasswordField=Jy,Us.AcroFormAppearance=Mr,Us.AcroForm={ChoiceField:np,ListBox:ap,ComboBox:sp,EditBox:Wy,Button:Ti,PushButton:Xy,RadioButton:ip,CheckBox:Yy,TextField:j0,PasswordField:Jy,Appearance:Mr},Fr.AcroForm={ChoiceField:np,ListBox:ap,ComboBox:sp,EditBox:Wy,Button:Ti,PushButton:Xy,RadioButton:ip,CheckBox:Yy,TextField:j0,PasswordField:Jy,Appearance:Mr};var YEe=Fr.AcroForm;function Xee(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,T){var F,J,ge,le,de,Ae=r;if((T=T||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(de in n)for(ge=n[de],F=0;F<ge.length;F+=1){for(le=!0,J=0;J<ge[F].length;J+=1)if(ge[F][J]!==void 0&&ge[F][J]!==P[J]){le=!1;break}if(le===!0){Ae=de;break}}else for(de in n)for(ge=n[de],F=0;F<ge.length;F+=1){for(le=!0,J=0;J<ge[F].length;J+=1)if(ge[F][J]!==void 0&&ge[F][J]!==P.charCodeAt(J)){le=!1;break}if(le===!0){Ae=de;break}}return Ae===r&&T!==r&&(Ae=T),Ae},s=function P(T){for(var F=this.internal.write,J=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);T.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:T.width}),le.push({key:"Height",value:T.height}),T.colorSpace===x.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(T.palette.length/3-1)+" "+("sMask"in T&&T.sMask!==void 0?T.objectId+2:T.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+T.colorSpace}),T.colorSpace===x.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:T.bitsPerComponent}),"decodeParameters"in T&&T.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+T.decodeParameters+">>"}),"transparency"in T&&Array.isArray(T.transparency)&&T.transparency.length>0){for(var de="",Ae=0,se=T.transparency.length;Ae<se;Ae++)de+=T.transparency[Ae]+" "+T.transparency[Ae]+" ";le.push({key:"Mask",value:"["+de+"]"})}T.sMask!==void 0&&le.push({key:"SMask",value:T.objectId+1+" 0 R"});var Ie=T.filter!==void 0?["/"+T.filter]:void 0;if(J({data:T.data,additionalKeyValues:le,alreadyAppliedFilters:Ie,objectId:T.objectId}),F("endobj"),"sMask"in T&&T.sMask!==void 0){var Pe,k=(Pe=T.sMaskBitsPerComponent)!==null&&Pe!==void 0?Pe:T.bitsPerComponent,H={width:T.width,height:T.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:T.sMask};"filter"in T&&(H.decodeParameters="/Predictor ".concat(T.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(T.width),H.filter=T.filter),P.call(this,H)}if(T.colorSpace===x.INDEXED){var R=this.internal.newObject();J({data:E(new Uint8Array(T.palette)),objectId:R}),F("endobj")}},i=function(){var P=this.internal.collections[e+"images"];for(var T in P)s.call(this,P[T])},l=function(){var P,T=this.internal.collections[e+"images"],F=this.internal.write;for(var J in T)F("/I"+(P=T[J]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(P){return typeof t["process"+P.toUpperCase()]=="function"},h=function(P){return ba(P)==="object"&&P.nodeType===1},A=function(P,T){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var F=""+P.getAttribute("src");if(F.indexOf("data:image/")===0)return D_(unescape(F).split("base64,").pop());var J=t.loadFile(F,!0);if(J!==void 0)return J}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var ge;switch(T){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return D_(P.toDataURL(ge,1).split("base64,").pop())}},m=function(P){var T=this.internal.collections[e+"images"];if(T){for(var F in T)if(P===T[F].alias)return T[F]}},p=function(P,T,F){return P||T||(P=-96,T=-96),P<0&&(P=-1*F.width*72/P/this.internal.scaleFactor),T<0&&(T=-1*F.height*72/T/this.internal.scaleFactor),P===0&&(P=T*F.width/F.height),T===0&&(T=P*F.height/F.width),[P,T]},g=function(P,T,F,J,ge,le){var de=p.call(this,F,J,ge),Ae=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,Ie=u.call(this);if(F=de[0],J=de[1],Ie[ge.index]=ge,le){le*=Math.PI/180;var Pe=Math.cos(le),k=Math.sin(le),H=function(M){return M.toFixed(4)},R=[H(Pe),H(k),H(-1*k),H(Pe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,Ae(P),se(T+J),"cm"].join(" ")),this.internal.write(R.join(" ")),this.internal.write([Ae(F),"0","0",Ae(J),"0","0","cm"].join(" "))):this.internal.write([Ae(F),"0","0",Ae(J),Ae(P),se(T+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(P){var T,F,J=0;if(typeof P=="string")for(F=P.length,T=0;T<F;T++)J=(J<<5)-J+P.charCodeAt(T),J|=0;else if(I(P))for(F=P.byteLength/2,T=0;T<F;T++)J=(J<<5)-J+P[T],J|=0;return J},w=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var T=!0;return P.length===0&&(T=!1),P.length%4!=0&&(T=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(T=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(T=!1),T},j=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var T=P.indexOf(",");return T<0?null:P.substring(0,T).trim().endsWith("base64")?P.substring(T+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(P){for(var T=P.length,F=new Uint8Array(T),J=0;J<T;J++)F[J]=P.charCodeAt(J);return F},E=t.__addimage__.arrayBufferToBinaryString=function(P){for(var T="",F=I(P)?P:new Uint8Array(P),J=0;J<F.length;J+=8192)T+=String.fromCharCode.apply(null,F.subarray(J,J+8192));return T};t.addImage=function(){var P,T,F,J,ge,le,de,Ae,se;if(typeof arguments[1]=="number"?(T=r,F=arguments[1],J=arguments[2],ge=arguments[3],le=arguments[4],de=arguments[5],Ae=arguments[6],se=arguments[7]):(T=arguments[1],F=arguments[2],J=arguments[3],ge=arguments[4],le=arguments[5],de=arguments[6],Ae=arguments[7],se=arguments[8]),ba(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var Ie=P;P=Ie.imageData,T=Ie.format||T||r,F=Ie.x||F||0,J=Ie.y||J||0,ge=Ie.w||Ie.width||ge,le=Ie.h||Ie.height||le,de=Ie.alias||de,Ae=Ie.compression||Ae,se=Ie.rotation||Ie.angle||se}var Pe=this.internal.getFilters();if(Ae===void 0&&Pe.indexOf("FlateEncode")!==-1&&(Ae="SLOW"),isNaN(F)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var k=S.call(this,P,T,de,Ae);return g.call(this,F,J,ge,le,k,se),this};var S=function(P,T,F,J){var ge,le,de;if(typeof P=="string"&&a(P)===r){P=unescape(P);var Ae=O(P,!1);(Ae!==""||(Ae=t.loadFile(P,!0))!==void 0)&&(P=Ae)}if(h(P)&&(P=A(P,T)),T=a(P,T),!f(T))throw new Error("addImage does not support files of type '"+T+"', please ensure that a plugin for '"+T+"' support is added.");if(((de=F)==null||de.length===0)&&(F=function(se){return typeof se=="string"||I(se)?b(se):I(se.data)?b(se.data):null}(P)),(ge=m.call(this,F))||(P instanceof Uint8Array||T==="RGBA"||(le=P,P=_(P)),ge=this["process"+T.toUpperCase()](P,d.call(this),F,function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in t.image_compression?se:y.NONE}(J),le)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},O=t.__addimage__.convertBase64ToBinaryString=function(P,T){T=typeof T!="boolean"||T;var F,J="";if(typeof P=="string"){var ge;F=(ge=j(P))!==null&&ge!==void 0?ge:P;try{J=D_(F)}catch(le){if(T)throw w(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};t.getImageProperties=function(P){var T,F,J="";if(h(P)&&(P=A(P)),typeof P=="string"&&a(P)===r&&((J=O(P,!1))===""&&(J=t.loadFile(P)||""),P=J),F=a(P),!f(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(P instanceof Uint8Array||(P=_(P)),!(T=this["process"+F.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return T.fileType=F,T}})(Fr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Fr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var A=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+A(x(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+A(x(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+l(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+A(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+A(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,i){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},t.textWithLink=function(r,n,a,s){var i,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;i=Math.ceil(u*d)}else l=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,i,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Fr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return i(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return i(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var g=0,x=r,y="",b=0;for(g=0;g<p.length;g+=1)x[p.charCodeAt(g)]!==void 0?(b++,typeof(x=x[p.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(x),x=r,b=0),g===p.length-1&&(x=r,y+=p.charAt(g-(b-1)),g-=b-1,b=0)):(x=r,y+=p.charAt(g-b),g-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(p,g,x){return i(p)?s(p)===!1?-1:!u(p)||!i(g)&&!i(x)||!i(x)&&l(g)||l(p)&&!i(g)||l(p)&&c(g)||l(p)&&l(g)?0:d(p)&&i(g)&&!l(g)&&i(x)&&u(x)?3:l(p)||!i(x)?1:2:-1},A=function(p){var g=0,x=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(g=0;g<I.length;g+=1){for(_.push(""),x=0;x<I[g].length;x+=1)b=I[g][x],w=I[g][x-1],j=I[g][x+1],i(b)?(y=h(b,w,j),_[g]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[g]+=b;_[g]=f(_[g])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(g)){var y=0;for(x=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?x.push([A(g[y][0]),g[y][1],g[y][2]]):x.push([A(g[y])]);p=x}else p=A(g);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(Fr.API),Fr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Fr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,A=0,m=0,p=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=u.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(g.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)A<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(A=p);return A!==0&&(m=c.length),{w:A/=h,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,A&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var A,m,p,g,x=[],y=[],b=[],w={},j={},I=[],_=[],E=(h=h||{}).autoSize||!1,S=h.printHeaders!==!1,O=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},e),T=typeof h.padding=="number"?h.padding:3,F=h.headerBackgroundColor||"#c8c8c8",J=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=J,this.setFontSize(O),f==null)y=x=Object.keys(d[0]),b=x.map(function(){return"left"});else if(Array.isArray(f)&&ba(f[0])==="object")for(x=f.map(function(Ie){return Ie.name}),y=f.map(function(Ie){return Ie.prompt||Ie.name||""}),b=f.map(function(Ie){return Ie.align||"left"}),A=0;A<f.length;A+=1)j[f[A].name]=.7499990551181103*f[A].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=x=f,b=x.map(function(){return"left"}));if(E||Array.isArray(f)&&typeof f[0]=="string")for(A=0;A<x.length;A+=1){for(w[g=x[A]]=d.map(function(Ie){return Ie[g]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[g],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[g]=Math.max.apply(null,I)+T+T,I=[]}if(S){var ge={};for(A=0;A<x.length;A+=1)ge[x[A]]={},ge[x[A]].text=y[A],ge[x[A]].align=b[A];var le=l.call(this,ge,j);_=x.map(function(Ie){return new s(c,u,j[Ie],le,ge[Ie].text,void 0,ge[Ie].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var de=f.reduce(function(Ie,Pe){return Ie[Pe.name]=Pe.align,Ie},{});for(A=0;A<d.length;A+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:A,data:d[A]},this);var Ae=l.call(this,d[A],j);for(p=0;p<x.length;p+=1){var se=d[A][x[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:A,col:p,data:se},this),i.call(this,new s(c,u,j[x[p]],Ae,se,A+2,de[x[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(A){var m=c[A];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[A]-d-d)},this).map(function(A){return this.getLineHeightFactor()*A.length*f/h+d+d},this).reduce(function(A,m){return Math.max(A,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){d=this.internal.__cell__.tableHeaderRow[A].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Fr.API);var Yee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Jee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$T=Xee(Jee),Zee=[100,200,300,400,500,600,700,800,900],JEe=Xee(Zee);function Sj(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Yee[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof $T[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function gQ(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var ZEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},xQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function vQ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function yQ(t){return t.trimLeft()}function eSe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function tSe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var nC,bQ,wQ,Og,aC,NQ,CQ,_Q,Ij=["times"];function EQ(t,e,r,n,a){var s=4,i=IQ;switch(a){case Fr.API.image_compression.FAST:s=1,i=SQ;break;case Fr.API.image_compression.MEDIUM:s=6,i=jQ;break;case Fr.API.image_compression.SLOW:s=9,i=BQ}t=function(c,u,d,f){for(var h,A=c.length/u,m=new Uint8Array(c.length+A),p=[rSe,SQ,IQ,jQ,BQ],g=0;g<A;g+=1){var x=g*u,y=c.subarray(x,x+u);if(f)m.set(f(y,d,h),x+g);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,h);var I=aSe(w.concat());m.set(w[I],x+g)}h=y}return m}(t,e,Math.ceil(r*n/8),i);var l=RT(t,{level:s});return Fr.API.__addimage__.arrayBufferToBinaryString(l)}function rSe(t){var e=Array.apply([],t);return e.unshift(0),e}function SQ(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function IQ(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var i=r&&r[s]||0;a[s+1]=t[s]-i+256&255}return a}function jQ(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var i=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(i+l>>>1)&255}return a}function BQ(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var i=nSe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-i+256&255}return a}function nSe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function aSe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function jj(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),i=(1<<r)-1;return ete(t,a)>>s&i}function PQ(t,e,r,n){var a=r*n,s=Math.floor(a/8),i=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<i;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var h=f>>8&255;u.setUint8(d,h)}})(t,s,ete(t,s)&~(l<<i)&65535|c)}function ete(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function sSe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,i=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=i,e+=3*i);var u=!0,d=[],f=0,h=null,A=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,h=t[e++],1&p||(h=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,E=c,S=!1;w>>7&&(S=!0,_=e,E=I,e+=3*I);var O=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:g,y:x,width:y,height:b,has_local_palette:S,palette_offset:_,palette_size:E,data_offset:O,data_length:e-O,transparent_index:h,interlaced:!!j,delay:f,disposal:A});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(T){if(T<0||T>=d.length)throw new Error("Frame index out of range.");return d[T]},this.decodeAndBlitFrameBGRA=function(T,F){var J=this.frameInfo(T),ge=J.width*J.height,le=new Uint8Array(ge);TQ(t,J.data_offset,le,ge);var de=J.palette_offset,Ae=J.transparent_index;Ae===null&&(Ae=256);var se=J.width,Ie=r-se,Pe=se,k=4*(J.y*r+J.x),H=4*((J.y+J.height)*r+J.x),R=k,M=4*Ie;J.interlaced===!0&&(M+=4*r*7);for(var G=8,X=0,D=le.length;X<D;++X){var Q=le[X];if(Pe===0&&(Pe=se,(R+=M)>=H&&(M=4*Ie+4*r*(G-1),R=k+(se+Ie)*(G<<1),G>>=1)),Q===Ae)R+=4;else{var te=t[de+3*Q],me=t[de+3*Q+1],L=t[de+3*Q+2];F[R++]=L,F[R++]=me,F[R++]=te,F[R++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(T,F){var J=this.frameInfo(T),ge=J.width*J.height,le=new Uint8Array(ge);TQ(t,J.data_offset,le,ge);var de=J.palette_offset,Ae=J.transparent_index;Ae===null&&(Ae=256);var se=J.width,Ie=r-se,Pe=se,k=4*(J.y*r+J.x),H=4*((J.y+J.height)*r+J.x),R=k,M=4*Ie;J.interlaced===!0&&(M+=4*r*7);for(var G=8,X=0,D=le.length;X<D;++X){var Q=le[X];if(Pe===0&&(Pe=se,(R+=M)>=H&&(M=4*Ie+4*r*(G-1),R=k+(se+Ie)*(G<<1),G>>=1)),Q===Ae)R+=4;else{var te=t[de+3*Q],me=t[de+3*Q+1],L=t[de+3*Q+2];F[R++]=te,F[R++]=me,F[R++]=L,F[R++]=255}--Pe}}}function TQ(t,e,r,n){for(var a=t[e++],s=1<<a,i=s+1,l=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,A=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&A!==0;)f|=t[e++]<<d,d+=8,A===1?A=t[e++]:--A;if(d<c)break;var g=f&u;if(f>>=c,d-=c,g!==s){if(g===i)break;for(var x=g<l?g:p,y=0,b=x;b>s;)b=m[b]>>8,++y;var w=b;if(h+y+(x!==g?1:0)>n)return void Fa.log("Warning, gif stream longer than expected.");r[h++]=w;var j=h+=y;for(x!==g&&(r[h++]=w),b=x;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=g}else l=i+1,u=(1<<(c=a+1))-1,p=null}return h!==n&&Fa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Bj(t){var e,r,n,a,s,i=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),A=new Array(64),m=new Array(64),p=[],g=0,x=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(k,H){for(var R=0,M=0,G=new Array,X=1;X<=16;X++){for(var D=1;D<=k[X];D++)G[H[M]]=[],G[H[M]][0]=R,G[H[M]][1]=X,M++,R++;R*=2}return G}function de(k){for(var H=k[0],R=k[1]-1;R>=0;)H&1<<R&&(g|=1<<x),R--,--x<0&&(g==255?(Ae(255),Ae(0)):Ae(g),x=7,g=0)}function Ae(k){p.push(k)}function se(k){Ae(k>>8&255),Ae(255&k)}function Ie(k,H,R,M,G){for(var X,D=G[0],Q=G[240],te=function(xe,De){var nt,Me,Je,lt,ft,Ge,ye,We,qe,je,pe=0;for(qe=0;qe<8;++qe){nt=xe[pe],Me=xe[pe+1],Je=xe[pe+2],lt=xe[pe+3],ft=xe[pe+4],Ge=xe[pe+5],ye=xe[pe+6];var He=nt+(We=xe[pe+7]),at=nt-We,yt=Me+ye,bt=Me-ye,kt=Je+Ge,Vt=Je-Ge,ve=lt+ft,Qe=lt-ft,Z=He+ve,$e=He-ve,Le=yt+kt,Ve=yt-kt;xe[pe]=Z+Le,xe[pe+4]=Z-Le;var At=.707106781*(Ve+$e);xe[pe+2]=$e+At,xe[pe+6]=$e-At;var pt=.382683433*((Z=Qe+Vt)-(Ve=bt+at)),Be=.5411961*Z+pt,gt=1.306562965*Ve+pt,V=.707106781*(Le=Vt+bt),ae=at+V,Se=at-V;xe[pe+5]=Se+Be,xe[pe+3]=Se-Be,xe[pe+1]=ae+gt,xe[pe+7]=ae-gt,pe+=8}for(pe=0,qe=0;qe<8;++qe){nt=xe[pe],Me=xe[pe+8],Je=xe[pe+16],lt=xe[pe+24],ft=xe[pe+32],Ge=xe[pe+40],ye=xe[pe+48];var _e=nt+(We=xe[pe+56]),Ee=nt-We,ze=Me+ye,ut=Me-ye,st=Je+Ge,ee=Je-Ge,W=lt+ft,re=lt-ft,fe=_e+W,Ne=_e-W,be=ze+st,Xe=ze-st;xe[pe]=fe+be,xe[pe+32]=fe-be;var it=.707106781*(Xe+Ne);xe[pe+16]=Ne+it,xe[pe+48]=Ne-it;var xt=.382683433*((fe=re+ee)-(Xe=ut+Ee)),_t=.5411961*fe+xt,Et=1.306562965*Xe+xt,Gt=.707106781*(be=ee+ut),nr=Ee+Gt,ur=Ee-Gt;xe[pe+40]=ur+_t,xe[pe+24]=ur-_t,xe[pe+8]=nr+Et,xe[pe+56]=nr-Et,pe++}for(qe=0;qe<64;++qe)je=xe[qe]*De[qe],A[qe]=je>0?je+.5|0:je-.5|0;return A}(k,H),me=0;me<64;++me)m[_[me]]=te[me];var L=m[0]-R;R=m[0],L==0?de(M[0]):(de(M[h[X=32767+L]]),de(f[X]));for(var he=63;he>0&&m[he]==0;)he--;if(he==0)return de(D),R;for(var ne,z=1;z<=he;){for(var ce=z;m[z]==0&&z<=he;)++z;var K=z-ce;if(K>=16){ne=K>>4;for(var oe=1;oe<=ne;++oe)de(Q);K&=15}X=32767+m[z],de(G[(K<<4)+h[X]]),de(f[X]),z++}return he!=63&&de(D),R}function Pe(k){k=Math.min(Math.max(k,1),100),s!=k&&(function(H){for(var R=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],M=0;M<64;M++){var G=i((R[M]*H+50)/100);G=Math.min(Math.max(G,1),255),l[_[M]]=G}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],D=0;D<64;D++){var Q=i((X[D]*H+50)/100);Q=Math.min(Math.max(Q,1),255),c[_[D]]=Q}for(var te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,L=0;L<8;L++)for(var he=0;he<8;he++)u[me]=1/(l[_[me]]*te[L]*te[he]*8),d[me]=1/(c[_[me]]*te[L]*te[he]*8),me++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),s=k)}this.encode=function(k,H){H&&Pe(H),p=new Array,g=0,x=7,se(65496),se(65504),se(16),Ae(74),Ae(70),Ae(73),Ae(70),Ae(0),Ae(1),Ae(1),Ae(0),se(1),se(1),Ae(0),Ae(0),function(){se(65499),se(132),Ae(0);for(var Me=0;Me<64;Me++)Ae(l[Me]);Ae(1);for(var Je=0;Je<64;Je++)Ae(c[Je])}(),function(Me,Je){se(65472),se(17),Ae(8),se(Je),se(Me),Ae(3),Ae(1),Ae(17),Ae(0),Ae(2),Ae(17),Ae(1),Ae(3),Ae(17),Ae(1)}(k.width,k.height),function(){se(65476),se(418),Ae(0);for(var Me=0;Me<16;Me++)Ae(E[Me+1]);for(var Je=0;Je<=11;Je++)Ae(S[Je]);Ae(16);for(var lt=0;lt<16;lt++)Ae(O[lt+1]);for(var ft=0;ft<=161;ft++)Ae(P[ft]);Ae(1);for(var Ge=0;Ge<16;Ge++)Ae(T[Ge+1]);for(var ye=0;ye<=11;ye++)Ae(F[ye]);Ae(17);for(var We=0;We<16;We++)Ae(J[We+1]);for(var qe=0;qe<=161;qe++)Ae(ge[qe])}(),se(65498),se(12),Ae(3),Ae(1),Ae(0),Ae(2),Ae(17),Ae(3),Ae(17),Ae(0),Ae(63),Ae(0);var R=0,M=0,G=0;g=0,x=7,this.encode.displayName="_encode_";for(var X,D,Q,te,me,L,he,ne,z,ce=k.data,K=k.width,oe=k.height,xe=4*K,De=0;De<oe;){for(X=0;X<xe;){for(me=xe*De+X,he=-1,ne=0,z=0;z<64;z++)L=me+(ne=z>>3)*xe+(he=4*(7&z)),De+ne>=oe&&(L-=xe*(De+1+ne-oe)),X+he>=xe&&(L-=X+he-xe+4),D=ce[L++],Q=ce[L++],te=ce[L++],y[z]=(I[D]+I[Q+256|0]+I[te+512|0]>>16)-128,b[z]=(I[D+768|0]+I[Q+1024|0]+I[te+1280|0]>>16)-128,w[z]=(I[D+1280|0]+I[Q+1536|0]+I[te+1792|0]>>16)-128;R=Ie(y,u,R,e,n),M=Ie(b,d,M,r,a),G=Ie(w,d,G,r,a),X+=32}De+=8}if(x>=0){var nt=[];nt[1]=x+1,nt[0]=(1<<x+1)-1,de(nt)}return se(65497),new Uint8Array(p)},t=t||50,function(){for(var k=String.fromCharCode,H=0;H<256;H++)j[H]=k(H)}(),e=le(E,S),r=le(T,F),n=le(O,P),a=le(J,ge),function(){for(var k=1,H=2,R=1;R<=15;R++){for(var M=k;M<H;M++)h[32767+M]=R,f[32767+M]=[],f[32767+M][1]=R,f[32767+M][0]=M;for(var G=-(H-1);G<=-k;G++)h[32767+G]=R,f[32767+G]=[],f[32767+G][1]=R,f[32767+G][0]=H-1+G;k<<=1,H<<=1}}(),function(){for(var k=0;k<256;k++)I[k]=19595*k,I[k+256|0]=38470*k,I[k+512|0]=7471*k+32768,I[k+768|0]=-11059*k,I[k+1024|0]=-21709*k,I[k+1280|0]=32768*k+8421375,I[k+1536|0]=-27439*k,I[k+1792|0]=-5329*k}(),Pe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function od(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kQ(t){function e(S){if(!S)throw Error("assert :P")}function r(S,O,P){for(var T=0;4>T;T++)if(S[O+T]!=P.charCodeAt(T))return!0;return!1}function n(S,O,P,T,F){for(var J=0;J<F;J++)S[O+J]=P[T+J]}function a(S,O,P,T){for(var F=0;F<T;F++)S[O+F]=P}function s(S){return new Int32Array(S)}function i(S,O){for(var P=[],T=0;T<S;T++)P.push(new O);return P}function l(S,O){var P=[];return function T(F,J,ge){for(var le=ge[J],de=0;de<le&&(F.push(ge.length>J+1?[]:new O),!(ge.length<J+1));de++)T(F[de],J+1,ge)}(P,0,S),P}var c=function(){var S=this;function O(N,B){for(var q=1<<B-1>>>0;N&q;)q>>>=1;return q?(N&q-1)+q:N}function P(N,B,q,ie,Ce){e(!(ie%q));do N[B+(ie-=q)]=Ce;while(0<ie)}function T(N,B,q,ie,Ce){if(e(2328>=Ce),512>=Ce)var Te=s(512);else if((Te=s(Ce))==null)return 0;return function(Fe,Re,Ke,et,vt,Ot){var tt,Nt,Bt=Re,Wt=1<<Ke,Ft=s(16),Zt=s(16);for(e(vt!=0),e(et!=null),e(Fe!=null),e(0<Ke),Nt=0;Nt<vt;++Nt){if(15<et[Nt])return 0;++Ft[et[Nt]]}if(Ft[0]==vt)return 0;for(Zt[1]=0,tt=1;15>tt;++tt){if(Ft[tt]>1<<tt)return 0;Zt[tt+1]=Zt[tt]+Ft[tt]}for(Nt=0;Nt<vt;++Nt)tt=et[Nt],0<et[Nt]&&(Ot[Zt[tt]++]=Nt);if(Zt[15]==1)return(et=new F).g=0,et.value=Ot[0],P(Fe,Bt,1,Wt,et),Wt;var tr,hr=-1,lr=Wt-1,zr=0,Rr=1,yn=1,Hr=1<<Ke;for(Nt=0,tt=1,vt=2;tt<=Ke;++tt,vt<<=1){if(Rr+=yn<<=1,0>(yn-=Ft[tt]))return 0;for(;0<Ft[tt];--Ft[tt])(et=new F).g=tt,et.value=Ot[Nt++],P(Fe,Bt+zr,vt,Hr,et),zr=O(zr,tt)}for(tt=Ke+1,vt=2;15>=tt;++tt,vt<<=1){if(Rr+=yn<<=1,0>(yn-=Ft[tt]))return 0;for(;0<Ft[tt];--Ft[tt]){if(et=new F,(zr&lr)!=hr){for(Bt+=Hr,tr=1<<(hr=tt)-Ke;15>hr&&!(0>=(tr-=Ft[hr]));)++hr,tr<<=1;Wt+=Hr=1<<(tr=hr-Ke),Fe[Re+(hr=zr&lr)].g=tr+Ke,Fe[Re+hr].value=Bt-Re-hr}et.g=tt-Ke,et.value=Ot[Nt++],P(Fe,Bt+(zr>>Ke),vt,Hr,et),zr=O(zr,tt)}}return Rr!=2*Zt[15]-1?0:Wt}(N,B,q,ie,Ce,Te)}function F(){this.value=this.g=0}function J(){this.value=this.g=0}function ge(){this.G=i(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(fm,J)}function le(N,B,q,ie){e(N!=null),e(B!=null),e(2147483648>ie),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=B,N.pa=q,N.Jd=B,N.Yc=q+ie,N.Zc=4<=ie?q+ie-4+1:q,D(N)}function de(N,B){for(var q=0;0<B--;)q|=te(N,128)<<B;return q}function Ae(N,B){var q=de(N,B);return Q(N)?-q:q}function se(N,B,q,ie){var Ce,Te=0;for(e(N!=null),e(B!=null),e(4294967288>ie),N.Sb=ie,N.Ra=0,N.u=0,N.h=0,4<ie&&(ie=4),Ce=0;Ce<ie;++Ce)Te+=B[q+Ce]<<8*Ce;N.Ra=Te,N.bb=ie,N.oa=B,N.pa=q}function Ie(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<ph-8>>>0,++N.bb,N.u-=8;M(N)&&(N.h=1,N.u=0)}function Pe(N,B){if(e(0<=B),!N.h&&B<=Nc){var q=R(N)&wc[B];return N.u+=B,Ie(N),q}return N.h=1,N.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function H(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(N){return N.Ra>>>(N.u&ph-1)>>>0}function M(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>ph}function G(N,B){N.u=B,N.h=M(N)}function X(N){N.u>=Vf&&(e(N.u>=Vf),Ie(N))}function D(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function Q(N){return de(N,1)}function te(N,B){var q=N.Ca;0>N.b&&D(N);var ie=N.b,Ce=q*B>>>8,Te=(N.I>>>ie>Ce)+0;for(Te?(q-=Ce,N.I-=Ce+1<<ie>>>0):q=Ce+1,ie=q,Ce=0;256<=ie;)Ce+=8,ie>>=8;return ie=7^Ce+gh[ie],N.b-=ie,N.Ca=(q<<ie)-1,Te}function me(N,B,q){N[B+0]=q>>24&255,N[B+1]=q>>16&255,N[B+2]=q>>8&255,N[B+3]=255&q}function L(N,B){return N[B+0]|N[B+1]<<8}function he(N,B){return L(N,B)|N[B+2]<<16}function ne(N,B){return L(N,B)|L(N,B+2)<<16}function z(N,B){var q=1<<B;return e(N!=null),e(0<B),N.X=s(q),N.X==null?0:(N.Mb=32-B,N.Xa=B,1)}function ce(N,B){e(N!=null),e(B!=null),e(N.Xa==B.Xa),n(B.X,0,N.X,0,1<<B.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function oe(N,B,q,ie){e(q!=null),e(ie!=null);var Ce=q[0],Te=ie[0];return Ce==0&&(Ce=(N*Te+B/2)/B),Te==0&&(Te=(B*Ce+N/2)/N),0>=Ce||0>=Te?0:(q[0]=Ce,ie[0]=Te,1)}function xe(N,B){return N+(1<<B)-1>>>B}function De(N,B){return((4278255360&N)+(4278255360&B)>>>0&4278255360)+((16711935&N)+(16711935&B)>>>0&16711935)>>>0}function nt(N,B){S[B]=function(q,ie,Ce,Te,Fe,Re,Ke){var et;for(et=0;et<Fe;++et){var vt=S[N](Re[Ke+et-1],Ce,Te+et);Re[Ke+et]=De(q[ie+et],vt)}}}function Me(){this.ud=this.hd=this.jd=0}function Je(N,B){return((4278124286&(N^B))>>>1)+(N&B)>>>0}function lt(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function ft(N,B){return lt(N+(N-B+.5>>1))}function Ge(N,B,q){return Math.abs(B-q)-Math.abs(N-q)}function ye(N,B,q,ie,Ce,Te,Fe){for(ie=Te[Fe-1],q=0;q<Ce;++q)Te[Fe+q]=ie=De(N[B+q],ie)}function We(N,B,q,ie,Ce){var Te;for(Te=0;Te<q;++Te){var Fe=N[B+Te],Re=Fe>>8&255,Ke=16711935&(Ke=(Ke=16711935&Fe)+((Re<<16)+Re));ie[Ce+Te]=(4278255360&Fe)+Ke>>>0}}function qe(N,B){B.jd=255&N,B.hd=N>>8&255,B.ud=N>>16&255}function je(N,B,q,ie,Ce,Te){var Fe;for(Fe=0;Fe<ie;++Fe){var Re=B[q+Fe],Ke=Re>>>8,et=Re,vt=255&(vt=(vt=Re>>>16)+((N.jd<<24>>24)*(Ke<<24>>24)>>>5));et=255&(et=(et+=(N.hd<<24>>24)*(Ke<<24>>24)>>>5)+((N.ud<<24>>24)*(vt<<24>>24)>>>5)),Ce[Te+Fe]=(4278255360&Re)+(vt<<16)+et}}function pe(N,B,q,ie,Ce){S[B]=function(Te,Fe,Re,Ke,et,vt,Ot,tt,Nt){for(Ke=Ot;Ke<tt;++Ke)for(Ot=0;Ot<Nt;++Ot)et[vt++]=Ce(Re[ie(Te[Fe++])])},S[N]=function(Te,Fe,Re,Ke,et,vt,Ot){var tt=8>>Te.b,Nt=Te.Ea,Bt=Te.K[0],Wt=Te.w;if(8>tt)for(Te=(1<<Te.b)-1,Wt=(1<<tt)-1;Fe<Re;++Fe){var Ft,Zt=0;for(Ft=0;Ft<Nt;++Ft)Ft&Te||(Zt=ie(Ke[et++])),vt[Ot++]=Ce(Bt[Zt&Wt]),Zt>>=tt}else S["VP8LMapColor"+q](Ke,et,Bt,Wt,vt,Ot,Fe,Re,Nt)}}function He(N,B,q,ie,Ce){for(q=B+q;B<q;){var Te=N[B++];ie[Ce++]=Te>>16&255,ie[Ce++]=Te>>8&255,ie[Ce++]=255&Te}}function at(N,B,q,ie,Ce){for(q=B+q;B<q;){var Te=N[B++];ie[Ce++]=Te>>16&255,ie[Ce++]=Te>>8&255,ie[Ce++]=255&Te,ie[Ce++]=Te>>24&255}}function yt(N,B,q,ie,Ce){for(q=B+q;B<q;){var Te=(Fe=N[B++])>>16&240|Fe>>12&15,Fe=240&Fe|Fe>>28&15;ie[Ce++]=Te,ie[Ce++]=Fe}}function bt(N,B,q,ie,Ce){for(q=B+q;B<q;){var Te=(Fe=N[B++])>>16&248|Fe>>13&7,Fe=Fe>>5&224|Fe>>3&31;ie[Ce++]=Te,ie[Ce++]=Fe}}function kt(N,B,q,ie,Ce){for(q=B+q;B<q;){var Te=N[B++];ie[Ce++]=255&Te,ie[Ce++]=Te>>8&255,ie[Ce++]=Te>>16&255}}function Vt(N,B,q,ie,Ce,Te){if(Te==0)for(q=B+q;B<q;)me(ie,((Te=N[B++])[0]>>24|Te[1]>>8&65280|Te[2]<<8&16711680|Te[3]<<24)>>>0),Ce+=32;else n(ie,Ce,N,B,q)}function ve(N,B){S[B][0]=S[N+"0"],S[B][1]=S[N+"1"],S[B][2]=S[N+"2"],S[B][3]=S[N+"3"],S[B][4]=S[N+"4"],S[B][5]=S[N+"5"],S[B][6]=S[N+"6"],S[B][7]=S[N+"7"],S[B][8]=S[N+"8"],S[B][9]=S[N+"9"],S[B][10]=S[N+"10"],S[B][11]=S[N+"11"],S[B][12]=S[N+"12"],S[B][13]=S[N+"13"],S[B][14]=S[N+"0"],S[B][15]=S[N+"0"]}function Qe(N){return N==H3||N==$3||N==Kw||N==K3}function Z(){this.eb=[],this.size=this.A=this.fb=0}function $e(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Le(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Z,this.f.kb=new $e,this.sd=null}function Ve(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function At(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pt(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Be(N,B){var q=N.T,ie=B.ba.f.RGBA,Ce=ie.eb,Te=ie.fb+N.ka*ie.A,Fe=du[B.ba.S],Re=N.y,Ke=N.O,et=N.f,vt=N.N,Ot=N.ea,tt=N.W,Nt=B.cc,Bt=B.dc,Wt=B.Mc,Ft=B.Nc,Zt=N.ka,tr=N.ka+N.T,hr=N.U,lr=hr+1>>1;for(Zt==0?Fe(Re,Ke,null,null,et,vt,Ot,tt,et,vt,Ot,tt,Ce,Te,null,null,hr):(Fe(B.ec,B.fc,Re,Ke,Nt,Bt,Wt,Ft,et,vt,Ot,tt,Ce,Te-ie.A,Ce,Te,hr),++q);Zt+2<tr;Zt+=2)Nt=et,Bt=vt,Wt=Ot,Ft=tt,vt+=N.Rc,tt+=N.Rc,Te+=2*ie.A,Fe(Re,(Ke+=2*N.fa)-N.fa,Re,Ke,Nt,Bt,Wt,Ft,et,vt,Ot,tt,Ce,Te-ie.A,Ce,Te,hr);return Ke+=N.fa,N.j+tr<N.o?(n(B.ec,B.fc,Re,Ke,hr),n(B.cc,B.dc,et,vt,lr),n(B.Mc,B.Nc,Ot,tt,lr),q--):1&tr||Fe(Re,Ke,null,null,et,vt,Ot,tt,et,vt,Ot,tt,Ce,Te+ie.A,null,null,hr),q}function gt(N,B,q){var ie=N.F,Ce=[N.J];if(ie!=null){var Te=N.U,Fe=B.ba.S,Re=Fe==$w||Fe==Kw;B=B.ba.f.RGBA;var Ke=[0],et=N.ka;Ke[0]=N.T,N.Kb&&(et==0?--Ke[0]:(--et,Ce[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ke[0]=N.o-N.j-et));var vt=B.eb;et=B.fb+et*B.A,N=L8(ie,Ce[0],N.width,Te,Ke,vt,et+(Re?0:3),B.A),e(q==Ke),N&&Qe(Fe)&&d1(vt,et,Re,Te,Ke,B.A)}return 0}function V(N){var B=N.ma,q=B.ba.S,ie=11>q,Ce=q==Vw||q==Hw||q==$w||q==V3||q==12||Qe(q);if(B.memory=null,B.Ib=null,B.Jb=null,B.Nd=null,!n1(B.Oa,N,Ce?11:12))return 0;if(Ce&&Qe(q)&&lu(),N.da)alert("todo:use_scaling");else{if(ie){if(B.Ib=pt,N.Kb){if(q=N.U+1>>1,B.memory=s(N.U+2*q),B.memory==null)return 0;B.ec=B.memory,B.fc=0,B.cc=B.ec,B.dc=B.fc+N.U,B.Mc=B.cc,B.Nc=B.dc+q,B.Ib=Be,lu()}}else alert("todo:EmitYUV");Ce&&(B.Jb=gt,ie&&zl())}if(ie&&!tM){for(N=0;256>N;++N)Nce[N]=89858*(N-128)+qw>>Gw,Ece[N]=-22014*(N-128)+qw,_ce[N]=-45773*(N-128),Cce[N]=113618*(N-128)+qw>>Gw;for(N=A1;N<z3;++N)B=76283*(N-16)+qw>>Gw,Sce[N-A1]=It(B,255),Ice[N-A1]=It(B+8>>4,15);tM=1}return 1}function ae(N){var B=N.ma,q=N.U,ie=N.T;return e(!(1&N.ka)),0>=q||0>=ie?0:(q=B.Ib(N,B),B.Jb!=null&&B.Jb(N,B,q),B.Dc+=q,1)}function Se(N){N.ma.memory=null}function _e(N,B,q,ie){return Pe(N,8)!=47?0:(B[0]=Pe(N,14)+1,q[0]=Pe(N,14)+1,ie[0]=Pe(N,1),Pe(N,3)!=0?0:!N.h)}function Ee(N,B){if(4>N)return N+1;var q=N-2>>1;return(2+(1&N)<<q)+Pe(B,q)+1}function ze(N,B){return 120<B?B-120:1<=(q=((q=cce[B-1])>>4)*N+(8-(15&q)))?q:1;var q}function ut(N,B,q){var ie=R(q),Ce=N[B+=255&ie].g-8;return 0<Ce&&(G(q,q.u+8),ie=R(q),B+=N[B].value,B+=ie&(1<<Ce)-1),G(q,q.u+N[B].g),N[B].value}function st(N,B,q){return q.g+=N.g,q.value+=N.value<<B>>>0,e(8>=q.g),N.g}function ee(N,B,q){var ie=N.xc;return e((B=ie==0?0:N.vc[N.md*(q>>ie)+(B>>ie)])<N.Wb),N.Ya[B]}function W(N,B,q,ie){var Ce=N.ab,Te=N.c*B,Fe=N.C;B=Fe+B;var Re=q,Ke=ie;for(ie=N.Ta,q=N.Ua;0<Ce--;){var et=N.gc[Ce],vt=Fe,Ot=B,tt=Re,Nt=Ke,Bt=(Ke=ie,Re=q,et.Ea);switch(e(vt<Ot),e(Ot<=et.nc),et.hc){case 2:zs(tt,Nt,(Ot-vt)*Bt,Ke,Re);break;case 0:var Wt=vt,Ft=Ot,Zt=Ke,tr=Re,hr=(Hr=et).Ea;Wt==0&&(s1(tt,Nt,null,null,1,Zt,tr),ye(tt,Nt+1,0,0,hr-1,Zt,tr+1),Nt+=hr,tr+=hr,++Wt);for(var lr=1<<Hr.b,zr=lr-1,Rr=xe(hr,Hr.b),yn=Hr.K,Hr=Hr.w+(Wt>>Hr.b)*Rr;Wt<Ft;){var Un=yn,Ni=Hr,bn=1;for(xg(tt,Nt,Zt,tr-hr,1,Zt,tr);bn<hr;){var $r=(bn&~zr)+lr;$r>hr&&($r=hr),(0,o1[Un[Ni++]>>8&15])(tt,Nt+ +bn,Zt,tr+bn-hr,$r-bn,Zt,tr+bn),bn=$r}Nt+=hr,tr+=hr,++Wt&zr||(Hr+=Rr)}Ot!=et.nc&&n(Ke,Re-Bt,Ke,Re+(Ot-vt-1)*Bt,Bt);break;case 1:for(Bt=tt,Ft=Nt,hr=(tt=et.Ea)-(tr=tt&~(Zt=(Nt=1<<et.b)-1)),Wt=xe(tt,et.b),lr=et.K,et=et.w+(vt>>et.b)*Wt;vt<Ot;){for(zr=lr,Rr=et,yn=new Me,Hr=Ft+tr,Un=Ft+tt;Ft<Hr;)qe(zr[Rr++],yn),l1(yn,Bt,Ft,Nt,Ke,Re),Ft+=Nt,Re+=Nt;Ft<Un&&(qe(zr[Rr++],yn),l1(yn,Bt,Ft,hr,Ke,Re),Ft+=hr,Re+=hr),++vt&Zt||(et+=Wt)}break;case 3:if(tt==Ke&&Nt==Re&&0<et.b){for(Ft=Ke,tt=Bt=Re+(Ot-vt)*Bt-(tr=(Ot-vt)*xe(et.Ea,et.b)),Nt=Ke,Zt=Re,Wt=[],tr=(hr=tr)-1;0<=tr;--tr)Wt[tr]=Nt[Zt+tr];for(tr=hr-1;0<=tr;--tr)Ft[tt+tr]=Wt[tr];Mw(et,vt,Ot,Ke,Bt,Ke,Re)}else Mw(et,vt,Ot,tt,Nt,Ke,Re)}Re=ie,Ke=q}Ke!=q&&n(ie,q,Re,Ke,Te)}function re(N,B){var q=N.V,ie=N.Ba+N.c*N.C,Ce=B-N.C;if(e(B<=N.l.o),e(16>=Ce),0<Ce){var Te=N.l,Fe=N.Ta,Re=N.Ua,Ke=Te.width;if(W(N,Ce,q,ie),Ce=Re=[Re],e((q=N.C)<(ie=B)),e(Te.v<Te.va),ie>Te.o&&(ie=Te.o),q<Te.j){var et=Te.j-q;q=Te.j,Ce[0]+=et*Ke}if(q>=ie?q=0:(Ce[0]+=4*Te.v,Te.ka=q-Te.j,Te.U=Te.va-Te.v,Te.T=ie-q,q=1),q){if(Re=Re[0],11>(q=N.ca).S){var vt=q.f.RGBA,Ot=(ie=q.S,Ce=Te.U,Te=Te.T,et=vt.eb,vt.A),tt=Te;for(vt=vt.fb+N.Ma*vt.A;0<tt--;){var Nt=Fe,Bt=Re,Wt=Ce,Ft=et,Zt=vt;switch(ie){case Qw:c1(Nt,Bt,Wt,Ft,Zt);break;case Vw:xh(Nt,Bt,Wt,Ft,Zt);break;case H3:xh(Nt,Bt,Wt,Ft,Zt),d1(Ft,Zt,0,Wt,1,0);break;case G8:Am(Nt,Bt,Wt,Ft,Zt);break;case Hw:Vt(Nt,Bt,Wt,Ft,Zt,1);break;case $3:Vt(Nt,Bt,Wt,Ft,Zt,1),d1(Ft,Zt,0,Wt,1,0);break;case $w:Vt(Nt,Bt,Wt,Ft,Zt,0);break;case Kw:Vt(Nt,Bt,Wt,Ft,Zt,0),d1(Ft,Zt,1,Wt,1,0);break;case V3:vh(Nt,Bt,Wt,Ft,Zt);break;case K3:vh(Nt,Bt,Wt,Ft,Zt),M8(Ft,Zt,Wt,1,0);break;case q8:yh(Nt,Bt,Wt,Ft,Zt);break;default:e(0)}Re+=Ke,vt+=Ot}N.Ma+=Te}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=q.height)}}N.C=B,e(N.C<=N.i)}function fe(N){var B;if(0<N.ua)return 0;for(B=0;B<N.Wb;++B){var q=N.Ya[B].G,ie=N.Ya[B].H;if(0<q[1][ie[1]+0].g||0<q[2][ie[2]+0].g||0<q[3][ie[3]+0].g)return 0}return 1}function Ne(N,B,q,ie,Ce,Te){if(N.Z!=0){var Fe=N.qd,Re=N.rd;for(e(Nh[N.Z]!=null);B<q;++B)Nh[N.Z](Fe,Re,ie,Ce,ie,Ce,Te),Fe=ie,Re=Ce,Ce+=Te;N.qd=Fe,N.rd=Re}}function be(N,B){var q=N.l.ma,ie=q.Z==0||q.Z==1?N.l.j:N.C;if(ie=N.C<ie?ie:N.C,e(B<=N.l.o),B>ie){var Ce=N.l.width,Te=q.ca,Fe=q.tb+Ce*ie,Re=N.V,Ke=N.Ba+N.c*ie,et=N.gc;e(N.ab==1),e(et[0].hc==3),Jd(et[0],ie,B,Re,Ke,Te,Fe),Ne(q,ie,B,Te,Fe,Ce)}N.C=N.Ma=B}function Xe(N,B,q,ie,Ce,Te,Fe){var Re=N.$/ie,Ke=N.$%ie,et=N.m,vt=N.s,Ot=q+N.$,tt=Ot;Ce=q+ie*Ce;var Nt=q+ie*Te,Bt=280+vt.ua,Wt=N.Pb?Re:16777216,Ft=0<vt.ua?vt.Wa:null,Zt=vt.wc,tr=Ot<Nt?ee(vt,Ke,Re):null;e(N.C<Te),e(Nt<=Ce);var hr=!1;e:for(;;){for(;hr||Ot<Nt;){var lr=0;if(Re>=Wt){var zr=Ot-q;e((Wt=N).Pb),Wt.wd=Wt.m,Wt.xd=zr,0<Wt.s.ua&&ce(Wt.s.Wa,Wt.s.vb),Wt=Re+dce}if(Ke&Zt||(tr=ee(vt,Ke,Re)),e(tr!=null),tr.Qb&&(B[Ot]=tr.qb,hr=!0),!hr)if(X(et),tr.jc){lr=et,zr=B;var Rr=Ot,yn=tr.pd[R(lr)&fm-1];e(tr.jc),256>yn.g?(G(lr,lr.u+yn.g),zr[Rr]=yn.value,lr=0):(G(lr,lr.u+yn.g-256),e(256<=yn.value),lr=yn.value),lr==0&&(hr=!0)}else lr=ut(tr.G[0],tr.H[0],et);if(et.h)break;if(hr||256>lr){if(!hr)if(tr.nd)B[Ot]=(tr.qb|lr<<8)>>>0;else{if(X(et),hr=ut(tr.G[1],tr.H[1],et),X(et),zr=ut(tr.G[2],tr.H[2],et),Rr=ut(tr.G[3],tr.H[3],et),et.h)break;B[Ot]=(Rr<<24|hr<<16|lr<<8|zr)>>>0}if(hr=!1,++Ot,++Ke>=ie&&(Ke=0,++Re,Fe!=null&&Re<=Te&&!(Re%16)&&Fe(N,Re),Ft!=null))for(;tt<Ot;)lr=B[tt++],Ft.X[(506832829*lr&4294967295)>>>Ft.Mb]=lr}else if(280>lr){if(lr=Ee(lr-256,et),zr=ut(tr.G[4],tr.H[4],et),X(et),zr=ze(ie,zr=Ee(zr,et)),et.h)break;if(Ot-q<zr||Ce-Ot<lr)break e;for(Rr=0;Rr<lr;++Rr)B[Ot+Rr]=B[Ot+Rr-zr];for(Ot+=lr,Ke+=lr;Ke>=ie;)Ke-=ie,++Re,Fe!=null&&Re<=Te&&!(Re%16)&&Fe(N,Re);if(e(Ot<=Ce),Ke&Zt&&(tr=ee(vt,Ke,Re)),Ft!=null)for(;tt<Ot;)lr=B[tt++],Ft.X[(506832829*lr&4294967295)>>>Ft.Mb]=lr}else{if(!(lr<Bt))break e;for(hr=lr-280,e(Ft!=null);tt<Ot;)lr=B[tt++],Ft.X[(506832829*lr&4294967295)>>>Ft.Mb]=lr;lr=Ot,e(!(hr>>>(zr=Ft).Xa)),B[lr]=zr.X[hr],hr=!0}hr||e(et.h==M(et))}if(N.Pb&&et.h&&Ot<Ce)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&ce(N.s.vb,N.s.Wa);else{if(et.h)break e;Fe!=null&&Fe(N,Re>Te?Te:Re),N.a=0,N.$=Ot-q}return 1}return N.a=3,0}function it(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var B=N.Wa;B!=null&&(B.X=null),N.vb=null,e(N!=null)}function xt(){var N=new rn;return N==null?null:(N.a=0,N.xb=X8,ve("Predictor","VP8LPredictors"),ve("Predictor","VP8LPredictors_C"),ve("PredictorAdd","VP8LPredictorsAdd"),ve("PredictorAdd","VP8LPredictorsAdd_C"),zs=We,l1=je,c1=He,xh=at,vh=yt,yh=bt,Am=kt,S.VP8LMapColor32b=Yd,S.VP8LMapColor8b=i1,N)}function _t(N,B,q,ie,Ce){var Te=1,Fe=[N],Re=[B],Ke=ie.m,et=ie.s,vt=null,Ot=0;e:for(;;){if(q)for(;Te&&Pe(Ke,1);){var tt=Fe,Nt=Re,Bt=ie,Wt=1,Ft=Bt.m,Zt=Bt.gc[Bt.ab],tr=Pe(Ft,2);if(Bt.Oc&1<<tr)Te=0;else{switch(Bt.Oc|=1<<tr,Zt.hc=tr,Zt.Ea=tt[0],Zt.nc=Nt[0],Zt.K=[null],++Bt.ab,e(4>=Bt.ab),tr){case 0:case 1:Zt.b=Pe(Ft,3)+2,Wt=_t(xe(Zt.Ea,Zt.b),xe(Zt.nc,Zt.b),0,Bt,Zt.K),Zt.K=Zt.K[0];break;case 3:var hr,lr=Pe(Ft,8)+1,zr=16<lr?0:4<lr?1:2<lr?2:3;if(tt[0]=xe(Zt.Ea,zr),Zt.b=zr,hr=Wt=_t(lr,1,0,Bt,Zt.K)){var Rr,yn=lr,Hr=Zt,Un=1<<(8>>Hr.b),Ni=s(Un);if(Ni==null)hr=0;else{var bn=Hr.K[0],$r=Hr.w;for(Ni[0]=Hr.K[0][0],Rr=1;Rr<1*yn;++Rr)Ni[Rr]=De(bn[$r+Rr],Ni[Rr-1]);for(;Rr<4*Un;++Rr)Ni[Rr]=0;Hr.K[0]=null,Hr.K[0]=Ni,hr=1}}Wt=hr;break;case 2:break;default:e(0)}Te=Wt}}if(Fe=Fe[0],Re=Re[0],Te&&Pe(Ke,1)&&!(Te=1<=(Ot=Pe(Ke,4))&&11>=Ot)){ie.a=3;break e}var _r;if(_r=Te)t:{var Xs,gn,Qn,Ga=ie,No=Fe,_l=Re,Rs=Ot,Xo=q,El=Ga.m,Ci=Ga.s,$n=[null],fa=1,Ms=0,Aa=uce[Rs];r:for(;;){if(Xo&&Pe(El,1)){var Co=Pe(El,3)+2,ad=xe(No,Co),Ys=xe(_l,Co),Wl=ad*Ys;if(!_t(ad,Ys,0,Ga,$n))break r;for($n=$n[0],Ci.xc=Co,Xs=0;Xs<Wl;++Xs){var Ta=$n[Xs]>>8&65535;$n[Xs]=Ta,Ta>=fa&&(fa=Ta+1)}}if(El.h)break r;for(gn=0;5>gn;++gn){var _i=z8[gn];!gn&&0<Rs&&(_i+=1<<Rs),Ms<_i&&(Ms=_i)}var _c=i(fa*Aa,F),Sl=fa,Ec=i(Sl,ge);if(Ec==null)var Sc=null;else e(65536>=Sl),Sc=Ec;var Xl=s(Ms);if(Sc==null||Xl==null||_c==null){Ga.a=1;break r}var Ic=_c;for(Xs=Qn=0;Xs<fa;++Xs){var Ma=Sc[Xs],jc=Ma.G,sd=Ma.H,mm=0,Kf=1,_o=0;for(gn=0;5>gn;++gn){_i=z8[gn],jc[gn]=Ic,sd[gn]=Qn,!gn&&0<Rs&&(_i+=1<<Rs);a:{var Ww,W3=_i,Xw=Ga,h1=Xl,Pce=Ic,Tce=Qn,X3=0,Ch=Xw.m,kce=Pe(Ch,1);if(a(h1,0,0,W3),kce){var Fce=Pe(Ch,1)+1,Oce=Pe(Ch,1),aM=Pe(Ch,Oce==0?1:8);h1[aM]=1,Fce==2&&(h1[aM=Pe(Ch,8)]=1);var Yw=1}else{var sM=s(19),iM=Pe(Ch,4)+4;if(19<iM){Xw.a=3;var Jw=0;break a}for(Ww=0;Ww<iM;++Ww)sM[lce[Ww]]=Pe(Ch,3);var Y3=void 0,m1=void 0,oM=Xw,Dce=sM,Zw=W3,lM=h1,J3=0,_h=oM.m,cM=8,uM=i(128,F);n:for(;T(uM,0,7,Dce,19);){if(Pe(_h,1)){var Rce=2+2*Pe(_h,3);if((Y3=2+Pe(_h,Rce))>Zw)break n}else Y3=Zw;for(m1=0;m1<Zw&&Y3--;){X(_h);var dM=uM[0+(127&R(_h))];G(_h,_h.u+dM.g);var yg=dM.value;if(16>yg)lM[m1++]=yg,yg!=0&&(cM=yg);else{var Mce=yg==16,fM=yg-16,Lce=ice[fM],AM=Pe(_h,sce[fM])+Lce;if(m1+AM>Zw)break n;for(var Uce=Mce?cM:0;0<AM--;)lM[m1++]=Uce}}J3=1;break n}J3||(oM.a=3),Yw=J3}(Yw=Yw&&!Ch.h)&&(X3=T(Pce,Tce,8,h1,W3)),Yw&&X3!=0?Jw=X3:(Xw.a=3,Jw=0)}if(Jw==0)break r;if(Kf&&oce[gn]==1&&(Kf=Ic[Qn].g==0),mm+=Ic[Qn].g,Qn+=Jw,3>=gn){var p1,Z3=Xl[0];for(p1=1;p1<_i;++p1)Xl[p1]>Z3&&(Z3=Xl[p1]);_o+=Z3}}if(Ma.nd=Kf,Ma.Qb=0,Kf&&(Ma.qb=(jc[3][sd[3]+0].value<<24|jc[1][sd[1]+0].value<<16|jc[2][sd[2]+0].value)>>>0,mm==0&&256>jc[0][sd[0]+0].value&&(Ma.Qb=1,Ma.qb+=jc[0][sd[0]+0].value<<8)),Ma.jc=!Ma.Qb&&6>_o,Ma.jc){var eN,Gf=Ma;for(eN=0;eN<fm;++eN){var Eh=eN,Sh=Gf.pd[Eh],tN=Gf.G[0][Gf.H[0]+Eh];256<=tN.value?(Sh.g=tN.g+256,Sh.value=tN.value):(Sh.g=0,Sh.value=0,Eh>>=st(tN,8,Sh),Eh>>=st(Gf.G[1][Gf.H[1]+Eh],16,Sh),Eh>>=st(Gf.G[2][Gf.H[2]+Eh],0,Sh),st(Gf.G[3][Gf.H[3]+Eh],24,Sh))}}}Ci.vc=$n,Ci.Wb=fa,Ci.Ya=Sc,Ci.yc=_c,_r=1;break t}_r=0}if(!(Te=_r)){ie.a=3;break e}if(0<Ot){if(et.ua=1<<Ot,!z(et.Wa,Ot)){ie.a=1,Te=0;break e}}else et.ua=0;var e5=ie,hM=Fe,Qce=Re,t5=e5.s,r5=t5.xc;if(e5.c=hM,e5.i=Qce,t5.md=xe(hM,r5),t5.wc=r5==0?-1:(1<<r5)-1,q){ie.xb=xce;break e}if((vt=s(Fe*Re))==null){ie.a=1,Te=0;break e}Te=(Te=Xe(ie,vt,0,Fe,Re,Re,null))&&!Ke.h;break e}return Te?(Ce!=null?Ce[0]=vt:(e(vt==null),e(q)),ie.$=0,q||it(et)):it(et),Te}function Et(N,B){var q=N.c*N.i,ie=q+B+16*B;return e(N.c<=B),N.V=s(ie),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+q+B,1)}function Gt(N,B){var q=N.C,ie=B-q,Ce=N.V,Te=N.Ba+N.c*q;for(e(B<=N.l.o);0<ie;){var Fe=16<ie?16:ie,Re=N.l.ma,Ke=N.l.width,et=Ke*Fe,vt=Re.ca,Ot=Re.tb+Ke*q,tt=N.Ta,Nt=N.Ua;W(N,Fe,Ce,Te),U8(tt,Nt,vt,Ot,et),Ne(Re,q,q+Fe,vt,Ot,Ke),ie-=Fe,Ce+=Fe*N.c,q+=Fe}e(q==B),N.C=N.Ma=B}function nr(){this.ub=this.yd=this.td=this.Rb=0}function ur(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function cr(){this.Yb=function(){var N=[];return function B(q,ie,Ce){for(var Te=Ce[ie],Fe=0;Fe<Te&&(q.push(Ce.length>ie+1?[]:0),!(Ce.length<ie+1));Fe++)B(q[Fe],ie+1,Ce)}(N,0,[3,11]),N}()}function Ir(){this.jb=s(3),this.Wc=l([4,8],cr),this.Xc=l([4,17],cr)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function qr(){this.ld=this.La=this.dd=this.tc=0}function ln(){this.Na=this.la=0}function qs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function rt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Mt(){this.uc=this.M=this.Nb=0,this.wa=Array(new qr),this.Y=0,this.ya=Array(new rt),this.aa=0,this.l=new mr}function Yt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ar(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new nr,this.Kc=new ur,this.ed=new dn,this.Qa=new rr,this.Ic=this.$c=this.Aa=0,this.D=new Mt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,k),this.ia=0,this.pb=i(4,qs),this.Pa=new Ir,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yt),this.Hd=0,this.rb=Array(new ln),this.sb=0,this.wa=Array(new qr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new rt),this.L=this.aa=0,this.gd=l([4,2],qr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function It(N,B){return 0>N?0:N>B?B:N}function mr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fr(){var N=new ar;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,f1||(f1=ot)),N}function Ht(N,B,q){return N.a==0&&(N.a=B,N.sc=q,N.cb=0),0}function ct(N,B,q){return 3<=q&&N[B+0]==157&&N[B+1]==1&&N[B+2]==42}function Oe(N,B){if(N==null)return 0;if(N.a=0,N.sc="OK",B==null)return Ht(N,2,"null VP8Io passed to VP8GetHeaders()");var q=B.data,ie=B.w,Ce=B.ha;if(4>Ce)return Ht(N,7,"Truncated header.");var Te=q[ie+0]|q[ie+1]<<8|q[ie+2]<<16,Fe=N.Od;if(Fe.Rb=!(1&Te),Fe.td=Te>>1&7,Fe.yd=Te>>4&1,Fe.ub=Te>>5,3<Fe.td)return Ht(N,3,"Incorrect keyframe parameters.");if(!Fe.yd)return Ht(N,4,"Frame not displayable.");ie+=3,Ce-=3;var Re=N.Kc;if(Fe.Rb){if(7>Ce)return Ht(N,7,"cannot parse picture header");if(!ct(q,ie,Ce))return Ht(N,3,"Bad code word");Re.c=16383&(q[ie+4]<<8|q[ie+3]),Re.Td=q[ie+4]>>6,Re.i=16383&(q[ie+6]<<8|q[ie+5]),Re.Ud=q[ie+6]>>6,ie+=7,Ce-=7,N.za=Re.c+15>>4,N.Ub=Re.i+15>>4,B.width=Re.c,B.height=Re.i,B.Da=0,B.j=0,B.v=0,B.va=B.width,B.o=B.height,B.da=0,B.ib=B.width,B.hb=B.height,B.U=B.width,B.T=B.height,a((Te=N.Pa).jb,0,255,Te.jb.length),e((Te=N.Qa)!=null),Te.Cb=0,Te.Bb=0,Te.Fb=1,a(Te.Zb,0,0,Te.Zb.length),a(Te.Lb,0,0,Te.Lb)}if(Fe.ub>Ce)return Ht(N,7,"bad partition length");le(Te=N.m,q,ie,Fe.ub),ie+=Fe.ub,Ce-=Fe.ub,Fe.Rb&&(Re.Ld=Q(Te),Re.Kd=Q(Te)),Re=N.Qa;var Ke,et=N.Pa;if(e(Te!=null),e(Re!=null),Re.Cb=Q(Te),Re.Cb){if(Re.Bb=Q(Te),Q(Te)){for(Re.Fb=Q(Te),Ke=0;4>Ke;++Ke)Re.Zb[Ke]=Q(Te)?Ae(Te,7):0;for(Ke=0;4>Ke;++Ke)Re.Lb[Ke]=Q(Te)?Ae(Te,6):0}if(Re.Bb)for(Ke=0;3>Ke;++Ke)et.jb[Ke]=Q(Te)?de(Te,8):255}else Re.Bb=0;if(Te.Ka)return Ht(N,3,"cannot parse segment header");if((Re=N.ed).zd=Q(Te),Re.Tb=de(Te,6),Re.wb=de(Te,3),Re.Pc=Q(Te),Re.Pc&&Q(Te)){for(et=0;4>et;++et)Q(Te)&&(Re.vd[et]=Ae(Te,6));for(et=0;4>et;++et)Q(Te)&&(Re.od[et]=Ae(Te,6))}if(N.L=Re.Tb==0?0:Re.zd?1:2,Te.Ka)return Ht(N,3,"cannot parse filter header");var vt=Ce;if(Ce=Ke=ie,ie=Ke+vt,Re=vt,N.Xb=(1<<de(N.m,2))-1,vt<3*(et=N.Xb))q=7;else{for(Ke+=3*et,Re-=3*et,vt=0;vt<et;++vt){var Ot=q[Ce+0]|q[Ce+1]<<8|q[Ce+2]<<16;Ot>Re&&(Ot=Re),le(N.Jc[+vt],q,Ke,Ot),Ke+=Ot,Re-=Ot,Ce+=3}le(N.Jc[+et],q,Ke,Re),q=Ke<ie?0:5}if(q!=0)return Ht(N,q,"cannot parse partitions");for(q=de(Ke=N.m,7),Ce=Q(Ke)?Ae(Ke,4):0,ie=Q(Ke)?Ae(Ke,4):0,Re=Q(Ke)?Ae(Ke,4):0,et=Q(Ke)?Ae(Ke,4):0,Ke=Q(Ke)?Ae(Ke,4):0,vt=N.Qa,Ot=0;4>Ot;++Ot){if(vt.Cb){var tt=vt.Zb[Ot];vt.Fb||(tt+=q)}else{if(0<Ot){N.pb[Ot]=N.pb[0];continue}tt=q}var Nt=N.pb[Ot];Nt.Sc[0]=G3[It(tt+Ce,127)],Nt.Sc[1]=q3[It(tt+0,127)],Nt.Eb[0]=2*G3[It(tt+ie,127)],Nt.Eb[1]=101581*q3[It(tt+Re,127)]>>16,8>Nt.Eb[1]&&(Nt.Eb[1]=8),Nt.Qc[0]=G3[It(tt+et,117)],Nt.Qc[1]=q3[It(tt+Ke,127)],Nt.lc=tt+Ke}if(!Fe.Rb)return Ht(N,4,"Not a key frame.");for(Q(Te),Fe=N.Pa,q=0;4>q;++q){for(Ce=0;8>Ce;++Ce)for(ie=0;3>ie;++ie)for(Re=0;11>Re;++Re)et=te(Te,pce[q][Ce][ie][Re])?de(Te,8):hce[q][Ce][ie][Re],Fe.Wc[q][Ce].Yb[ie][Re]=et;for(Ce=0;17>Ce;++Ce)Fe.Xc[q][Ce]=Fe.Wc[q][gce[Ce]]}return N.kc=Q(Te),N.kc&&(N.Bd=de(Te,8)),N.cb=1}function ot(N,B,q,ie,Ce,Te,Fe){var Re=B[Ce].Yb[q];for(q=0;16>Ce;++Ce){if(!te(N,Re[q+0]))return Ce;for(;!te(N,Re[q+1]);)if(Re=B[++Ce].Yb[0],q=0,Ce==16)return 16;var Ke=B[Ce+1].Yb;if(te(N,Re[q+2])){var et=N,vt=0;if(te(et,(tt=Re)[(Ot=q)+3]))if(te(et,tt[Ot+6])){for(Re=0,Ot=2*(vt=te(et,tt[Ot+8]))+(tt=te(et,tt[Ot+9+vt])),vt=0,tt=fce[Ot];tt[Re];++Re)vt+=vt+te(et,tt[Re]);vt+=3+(8<<Ot)}else te(et,tt[Ot+7])?(vt=7+2*te(et,165),vt+=te(et,145)):vt=5+te(et,159);else vt=te(et,tt[Ot+4])?3+te(et,tt[Ot+5]):2;Re=Ke[2]}else vt=1,Re=Ke[1];Ke=Fe+Ace[Ce],0>(et=N).b&&D(et);var Ot,tt=et.b,Nt=(Ot=et.Ca>>1)-(et.I>>tt)>>31;--et.b,et.Ca+=Nt,et.Ca|=1,et.I-=(Ot+1&Nt)<<tt,Te[Ke]=((vt^Nt)-Nt)*ie[(0<Ce)+0]}return 16}function mt(N){var B=N.rb[N.sb-1];B.la=0,B.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function wt(N,B,q,ie,Ce){Ce=N[B+q+32*ie]+(Ce>>3),N[B+q+32*ie]=-256&Ce?0>Ce?0:255:Ce}function Ct(N,B,q,ie,Ce,Te){wt(N,B,0,q,ie+Ce),wt(N,B,1,q,ie+Te),wt(N,B,2,q,ie-Te),wt(N,B,3,q,ie-Ce)}function Rt(N){return(20091*N>>16)+N}function Pt(N,B,q,ie){var Ce,Te=0,Fe=s(16);for(Ce=0;4>Ce;++Ce){var Re=N[B+0]+N[B+8],Ke=N[B+0]-N[B+8],et=(35468*N[B+4]>>16)-Rt(N[B+12]),vt=Rt(N[B+4])+(35468*N[B+12]>>16);Fe[Te+0]=Re+vt,Fe[Te+1]=Ke+et,Fe[Te+2]=Ke-et,Fe[Te+3]=Re-vt,Te+=4,B++}for(Ce=Te=0;4>Ce;++Ce)Re=(N=Fe[Te+0]+4)+Fe[Te+8],Ke=N-Fe[Te+8],et=(35468*Fe[Te+4]>>16)-Rt(Fe[Te+12]),wt(q,ie,0,0,Re+(vt=Rt(Fe[Te+4])+(35468*Fe[Te+12]>>16))),wt(q,ie,1,0,Ke+et),wt(q,ie,2,0,Ke-et),wt(q,ie,3,0,Re-vt),Te++,ie+=32}function qt(N,B,q,ie){var Ce=N[B+0]+4,Te=35468*N[B+4]>>16,Fe=Rt(N[B+4]),Re=35468*N[B+1]>>16;Ct(q,ie,0,Ce+Fe,N=Rt(N[B+1]),Re),Ct(q,ie,1,Ce+Te,N,Re),Ct(q,ie,2,Ce-Te,N,Re),Ct(q,ie,3,Ce-Fe,N,Re)}function Ar(N,B,q,ie,Ce){Pt(N,B,q,ie),Ce&&Pt(N,B+16,q,ie+4)}function Cr(N,B,q,ie){hm(N,B+0,q,ie,1),hm(N,B+32,q,ie+128,1)}function as(N,B,q,ie){var Ce;for(N=N[B+0]+4,Ce=0;4>Ce;++Ce)for(B=0;4>B;++B)wt(q,ie,B,Ce,N)}function oa(N,B,q,ie){N[B+0]&&la(N,B+0,q,ie),N[B+16]&&la(N,B+16,q,ie+4),N[B+32]&&la(N,B+32,q,ie+128),N[B+48]&&la(N,B+48,q,ie+128+4)}function ta(N,B,q,ie){var Ce,Te=s(16);for(Ce=0;4>Ce;++Ce){var Fe=N[B+0+Ce]+N[B+12+Ce],Re=N[B+4+Ce]+N[B+8+Ce],Ke=N[B+4+Ce]-N[B+8+Ce],et=N[B+0+Ce]-N[B+12+Ce];Te[0+Ce]=Fe+Re,Te[8+Ce]=Fe-Re,Te[4+Ce]=et+Ke,Te[12+Ce]=et-Ke}for(Ce=0;4>Ce;++Ce)Fe=(N=Te[0+4*Ce]+3)+Te[3+4*Ce],Re=Te[1+4*Ce]+Te[2+4*Ce],Ke=Te[1+4*Ce]-Te[2+4*Ce],et=N-Te[3+4*Ce],q[ie+0]=Fe+Re>>3,q[ie+16]=et+Ke>>3,q[ie+32]=Fe-Re>>3,q[ie+48]=et-Ke>>3,ie+=64}function ss(N,B,q){var ie,Ce=B-32,Te=Cc,Fe=255-N[Ce-1];for(ie=0;ie<q;++ie){var Re,Ke=Te,et=Fe+N[B-1];for(Re=0;Re<q;++Re)N[B+Re]=Ke[et+N[Ce+Re]];B+=32}}function Xi(N,B){ss(N,B,4)}function Zu(N,B){ss(N,B,8)}function qd(N,B){ss(N,B,16)}function tu(N,B){var q;for(q=0;16>q;++q)n(N,B+32*q,N,B-32,16)}function Lf(N,B){var q;for(q=16;0<q;--q)a(N,B,N[B-1],16),B+=32}function bo(N,B,q){var ie;for(ie=0;16>ie;++ie)a(B,q+32*ie,N,16)}function ru(N,B){var q,ie=16;for(q=0;16>q;++q)ie+=N[B-1+32*q]+N[B+q-32];bo(ie>>5,N,B)}function zd(N,B){var q,ie=8;for(q=0;16>q;++q)ie+=N[B-1+32*q];bo(ie>>4,N,B)}function uh(N,B){var q,ie=8;for(q=0;16>q;++q)ie+=N[B+q-32];bo(ie>>4,N,B)}function mg(N,B){bo(128,N,B)}function tn(N,B,q){return N+2*B+q+2>>2}function Zv(N,B){var q,ie=B-32;for(ie=new Uint8Array([tn(N[ie-1],N[ie+0],N[ie+1]),tn(N[ie+0],N[ie+1],N[ie+2]),tn(N[ie+1],N[ie+2],N[ie+3]),tn(N[ie+2],N[ie+3],N[ie+4])]),q=0;4>q;++q)n(N,B+32*q,ie,0,ie.length)}function e1(N,B){var q=N[B-1],ie=N[B-1+32],Ce=N[B-1+64],Te=N[B-1+96];me(N,B+0,16843009*tn(N[B-1-32],q,ie)),me(N,B+32,16843009*tn(q,ie,Ce)),me(N,B+64,16843009*tn(ie,Ce,Te)),me(N,B+96,16843009*tn(Ce,Te,Te))}function t1(N,B){var q,ie=4;for(q=0;4>q;++q)ie+=N[B+q-32]+N[B-1+32*q];for(ie>>=3,q=0;4>q;++q)a(N,B+32*q,ie,4)}function Yi(N,B){var q=N[B-1+0],ie=N[B-1+32],Ce=N[B-1+64],Te=N[B-1-32],Fe=N[B+0-32],Re=N[B+1-32],Ke=N[B+2-32],et=N[B+3-32];N[B+0+96]=tn(ie,Ce,N[B-1+96]),N[B+1+96]=N[B+0+64]=tn(q,ie,Ce),N[B+2+96]=N[B+1+64]=N[B+0+32]=tn(Te,q,ie),N[B+3+96]=N[B+2+64]=N[B+1+32]=N[B+0+0]=tn(Fe,Te,q),N[B+3+64]=N[B+2+32]=N[B+1+0]=tn(Re,Fe,Te),N[B+3+32]=N[B+2+0]=tn(Ke,Re,Fe),N[B+3+0]=tn(et,Ke,Re)}function ed(N,B){var q=N[B+1-32],ie=N[B+2-32],Ce=N[B+3-32],Te=N[B+4-32],Fe=N[B+5-32],Re=N[B+6-32],Ke=N[B+7-32];N[B+0+0]=tn(N[B+0-32],q,ie),N[B+1+0]=N[B+0+32]=tn(q,ie,Ce),N[B+2+0]=N[B+1+32]=N[B+0+64]=tn(ie,Ce,Te),N[B+3+0]=N[B+2+32]=N[B+1+64]=N[B+0+96]=tn(Ce,Te,Fe),N[B+3+32]=N[B+2+64]=N[B+1+96]=tn(Te,Fe,Re),N[B+3+64]=N[B+2+96]=tn(Fe,Re,Ke),N[B+3+96]=tn(Re,Ke,Ke)}function r1(N,B){var q=N[B-1+0],ie=N[B-1+32],Ce=N[B-1+64],Te=N[B-1-32],Fe=N[B+0-32],Re=N[B+1-32],Ke=N[B+2-32],et=N[B+3-32];N[B+0+0]=N[B+1+64]=Te+Fe+1>>1,N[B+1+0]=N[B+2+64]=Fe+Re+1>>1,N[B+2+0]=N[B+3+64]=Re+Ke+1>>1,N[B+3+0]=Ke+et+1>>1,N[B+0+96]=tn(Ce,ie,q),N[B+0+64]=tn(ie,q,Te),N[B+0+32]=N[B+1+96]=tn(q,Te,Fe),N[B+1+32]=N[B+2+96]=tn(Te,Fe,Re),N[B+2+32]=N[B+3+96]=tn(Fe,Re,Ke),N[B+3+32]=tn(Re,Ke,et)}function dh(N,B){var q=N[B+0-32],ie=N[B+1-32],Ce=N[B+2-32],Te=N[B+3-32],Fe=N[B+4-32],Re=N[B+5-32],Ke=N[B+6-32],et=N[B+7-32];N[B+0+0]=q+ie+1>>1,N[B+1+0]=N[B+0+64]=ie+Ce+1>>1,N[B+2+0]=N[B+1+64]=Ce+Te+1>>1,N[B+3+0]=N[B+2+64]=Te+Fe+1>>1,N[B+0+32]=tn(q,ie,Ce),N[B+1+32]=N[B+0+96]=tn(ie,Ce,Te),N[B+2+32]=N[B+1+96]=tn(Ce,Te,Fe),N[B+3+32]=N[B+2+96]=tn(Te,Fe,Re),N[B+3+64]=tn(Fe,Re,Ke),N[B+3+96]=tn(Re,Ke,et)}function td(N,B){var q=N[B-1+0],ie=N[B-1+32],Ce=N[B-1+64],Te=N[B-1+96];N[B+0+0]=q+ie+1>>1,N[B+2+0]=N[B+0+32]=ie+Ce+1>>1,N[B+2+32]=N[B+0+64]=Ce+Te+1>>1,N[B+1+0]=tn(q,ie,Ce),N[B+3+0]=N[B+1+32]=tn(ie,Ce,Te),N[B+3+32]=N[B+1+64]=tn(Ce,Te,Te),N[B+3+64]=N[B+2+64]=N[B+0+96]=N[B+1+96]=N[B+2+96]=N[B+3+96]=Te}function fh(N,B){var q=N[B-1+0],ie=N[B-1+32],Ce=N[B-1+64],Te=N[B-1+96],Fe=N[B-1-32],Re=N[B+0-32],Ke=N[B+1-32],et=N[B+2-32];N[B+0+0]=N[B+2+32]=q+Fe+1>>1,N[B+0+32]=N[B+2+64]=ie+q+1>>1,N[B+0+64]=N[B+2+96]=Ce+ie+1>>1,N[B+0+96]=Te+Ce+1>>1,N[B+3+0]=tn(Re,Ke,et),N[B+2+0]=tn(Fe,Re,Ke),N[B+1+0]=N[B+3+32]=tn(q,Fe,Re),N[B+1+32]=N[B+3+64]=tn(ie,q,Fe),N[B+1+64]=N[B+3+96]=tn(Ce,ie,q),N[B+1+96]=tn(Te,Ce,ie)}function yc(N,B){var q;for(q=0;8>q;++q)n(N,B+32*q,N,B-32,8)}function Uf(N,B){var q;for(q=0;8>q;++q)a(N,B,N[B-1],8),B+=32}function nu(N,B,q){var ie;for(ie=0;8>ie;++ie)a(B,q+32*ie,N,8)}function lm(N,B){var q,ie=8;for(q=0;8>q;++q)ie+=N[B+q-32]+N[B-1+32*q];nu(ie>>4,N,B)}function Ea(N,B){var q,ie=4;for(q=0;8>q;++q)ie+=N[B+q-32];nu(ie>>3,N,B)}function cm(N,B){var q,ie=4;for(q=0;8>q;++q)ie+=N[B-1+32*q];nu(ie>>3,N,B)}function pg(N,B){nu(128,N,B)}function au(N,B,q){var ie=N[B-q],Ce=N[B+0],Te=3*(Ce-ie)+Q3[1020+N[B-2*q]-N[B+q]],Fe=Uw[112+(Te+4>>3)];N[B-q]=Cc[255+ie+Uw[112+(Te+3>>3)]],N[B+0]=Cc[255+Ce-Fe]}function Ah(N,B,q,ie){var Ce=N[B+0],Te=N[B+q];return uu[255+N[B-2*q]-N[B-q]]>ie||uu[255+Te-Ce]>ie}function Qf(N,B,q,ie){return 4*uu[255+N[B-q]-N[B+0]]+uu[255+N[B-2*q]-N[B+q]]<=ie}function Wd(N,B,q,ie,Ce){var Te=N[B-3*q],Fe=N[B-2*q],Re=N[B-q],Ke=N[B+0],et=N[B+q],vt=N[B+2*q],Ot=N[B+3*q];return 4*uu[255+Re-Ke]+uu[255+Fe-et]>ie?0:uu[255+N[B-4*q]-Te]<=Ce&&uu[255+Te-Fe]<=Ce&&uu[255+Fe-Re]<=Ce&&uu[255+Ot-vt]<=Ce&&uu[255+vt-et]<=Ce&&uu[255+et-Ke]<=Ce}function Xd(N,B,q,ie){var Ce=2*ie+1;for(ie=0;16>ie;++ie)Qf(N,B+ie,q,Ce)&&au(N,B+ie,q)}function Nl(N,B,q,ie){var Ce=2*ie+1;for(ie=0;16>ie;++ie)Qf(N,B+ie*q,1,Ce)&&au(N,B+ie*q,1)}function um(N,B,q,ie){var Ce;for(Ce=3;0<Ce;--Ce)Xd(N,B+=4*q,q,ie)}function gg(N,B,q,ie){var Ce;for(Ce=3;0<Ce;--Ce)Nl(N,B+=4,q,ie)}function Cl(N,B,q,ie,Ce,Te,Fe,Re){for(Te=2*Te+1;0<Ce--;){if(Wd(N,B,q,Te,Fe))if(Ah(N,B,q,Re))au(N,B,q);else{var Ke=N,et=B,vt=q,Ot=Ke[et-2*vt],tt=Ke[et-vt],Nt=Ke[et+0],Bt=Ke[et+vt],Wt=Ke[et+2*vt],Ft=27*(tr=Q3[1020+3*(Nt-tt)+Q3[1020+Ot-Bt]])+63>>7,Zt=18*tr+63>>7,tr=9*tr+63>>7;Ke[et-3*vt]=Cc[255+Ke[et-3*vt]+tr],Ke[et-2*vt]=Cc[255+Ot+Zt],Ke[et-vt]=Cc[255+tt+Ft],Ke[et+0]=Cc[255+Nt-Ft],Ke[et+vt]=Cc[255+Bt-Zt],Ke[et+2*vt]=Cc[255+Wt-tr]}B+=ie}}function su(N,B,q,ie,Ce,Te,Fe,Re){for(Te=2*Te+1;0<Ce--;){if(Wd(N,B,q,Te,Fe))if(Ah(N,B,q,Re))au(N,B,q);else{var Ke=N,et=B,vt=q,Ot=Ke[et-vt],tt=Ke[et+0],Nt=Ke[et+vt],Bt=Uw[112+(4+(Wt=3*(tt-Ot))>>3)],Wt=Uw[112+(Wt+3>>3)],Ft=Bt+1>>1;Ke[et-2*vt]=Cc[255+Ke[et-2*vt]+Ft],Ke[et-vt]=Cc[255+Ot+Wt],Ke[et+0]=Cc[255+tt-Bt],Ke[et+vt]=Cc[255+Nt-Ft]}B+=ie}}function hh(N,B,q,ie,Ce,Te){Cl(N,B,q,1,16,ie,Ce,Te)}function iu(N,B,q,ie,Ce,Te){Cl(N,B,1,q,16,ie,Ce,Te)}function dm(N,B,q,ie,Ce,Te){var Fe;for(Fe=3;0<Fe;--Fe)su(N,B+=4*q,q,1,16,ie,Ce,Te)}function U(N,B,q,ie,Ce,Te){var Fe;for(Fe=3;0<Fe;--Fe)su(N,B+=4,1,q,16,ie,Ce,Te)}function we(N,B,q,ie,Ce,Te,Fe,Re){Cl(N,B,Ce,1,8,Te,Fe,Re),Cl(q,ie,Ce,1,8,Te,Fe,Re)}function Ze(N,B,q,ie,Ce,Te,Fe,Re){Cl(N,B,1,Ce,8,Te,Fe,Re),Cl(q,ie,1,Ce,8,Te,Fe,Re)}function dt(N,B,q,ie,Ce,Te,Fe,Re){su(N,B+4*Ce,Ce,1,8,Te,Fe,Re),su(q,ie+4*Ce,Ce,1,8,Te,Fe,Re)}function St(N,B,q,ie,Ce,Te,Fe,Re){su(N,B+4,1,Ce,8,Te,Fe,Re),su(q,ie+4,1,Ce,8,Te,Fe,Re)}function Jt(){this.ba=new Le,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new At,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ur(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new F}function rn(){this.xb=this.a=0,this.l=new mr,this.ca=new Le,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new H,this.Pb=0,this.wd=new H,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ur,this.ab=0,this.gc=i(4,kr),this.Oc=0}function hn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(N,B,q,ie,Ce,Te,Fe){for(N=N==null?0:N[B+0],B=0;B<Fe;++B)Ce[Te+B]=N+q[ie+B]&255,N=Ce[Te+B]}function ra(N,B,q,ie,Ce,Te,Fe){var Re;if(N==null)Fn(null,null,q,ie,Ce,Te,Fe);else for(Re=0;Re<Fe;++Re)Ce[Te+Re]=N[B+Re]+q[ie+Re]&255}function vs(N,B,q,ie,Ce,Te,Fe){if(N==null)Fn(null,null,q,ie,Ce,Te,Fe);else{var Re,Ke=N[B+0],et=Ke,vt=Ke;for(Re=0;Re<Fe;++Re)et=vt+(Ke=N[B+Re])-et,vt=q[ie+Re]+(-256&et?0>et?0:255:et)&255,et=Ke,Ce[Te+Re]=vt}}function da(N,B,q,ie){var Ce=B.width,Te=B.o;if(e(N!=null&&B!=null),0>q||0>=ie||q+ie>Te)return null;if(!N.Cc){if(N.ga==null){var Fe;if(N.ga=new hn,(Fe=N.ga==null)||(Fe=B.width*B.o,e(N.Gb.length==0),N.Gb=s(Fe),N.Uc=0,N.Gb==null?Fe=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Fe=1),Fe=!Fe),!Fe){Fe=N.ga;var Re=N.Fa,Ke=N.P,et=N.qc,vt=N.mb,Ot=N.nb,tt=Ke+1,Nt=et-1,Bt=Fe.l;if(e(Re!=null&&vt!=null&&B!=null),Nh[0]=null,Nh[1]=Fn,Nh[2]=ra,Nh[3]=vs,Fe.ca=vt,Fe.tb=Ot,Fe.c=B.width,Fe.i=B.height,e(0<Fe.c&&0<Fe.i),1>=et)B=0;else if(Fe.$a=3&Re[Ke+0],Fe.Z=Re[Ke+0]>>2&3,Fe.Lc=Re[Ke+0]>>4&3,Ke=Re[Ke+0]>>6&3,0>Fe.$a||1<Fe.$a||4<=Fe.Z||1<Fe.Lc||Ke)B=0;else if(Bt.put=ae,Bt.ac=V,Bt.bc=Se,Bt.ma=Fe,Bt.width=B.width,Bt.height=B.height,Bt.Da=B.Da,Bt.v=B.v,Bt.va=B.va,Bt.j=B.j,Bt.o=B.o,Fe.$a)e:{e(Fe.$a==1),B=xt();t:for(;;){if(B==null){B=0;break e}if(e(Fe!=null),Fe.mc=B,B.c=Fe.c,B.i=Fe.i,B.l=Fe.l,B.l.ma=Fe,B.l.width=Fe.c,B.l.height=Fe.i,B.a=0,se(B.m,Re,tt,Nt),!_t(Fe.c,Fe.i,1,B,null)||(B.ab==1&&B.gc[0].hc==3&&fe(B.s)?(Fe.ic=1,Re=B.c*B.i,B.Ta=null,B.Ua=0,B.V=s(Re),B.Ba=0,B.V==null?(B.a=1,B=0):B=1):(Fe.ic=0,B=Et(B,Fe.c)),!B))break t;B=1;break e}Fe.mc=null,B=0}else B=Nt>=Fe.c*Fe.i;Fe=!B}if(Fe)return null;N.ga.Lc!=1?N.Ga=0:ie=Te-q}e(N.ga!=null),e(q+ie<=Te);e:{if(B=(Re=N.ga).c,Te=Re.l.o,Re.$a==0){if(tt=N.rc,Nt=N.Vc,Bt=N.Fa,Ke=N.P+1+q*B,et=N.mb,vt=N.nb+q*B,e(Ke<=N.P+N.qc),Re.Z!=0)for(e(Nh[Re.Z]!=null),Fe=0;Fe<ie;++Fe)Nh[Re.Z](tt,Nt,Bt,Ke,et,vt,B),tt=et,Nt=vt,vt+=B,Ke+=B;else for(Fe=0;Fe<ie;++Fe)n(et,vt,Bt,Ke,B),tt=et,Nt=vt,vt+=B,Ke+=B;N.rc=tt,N.Vc=Nt}else{if(e(Re.mc!=null),B=q+ie,e((Fe=Re.mc)!=null),e(B<=Fe.i),Fe.C>=B)B=1;else if(Re.ic||zl(),Re.ic){Re=Fe.V,tt=Fe.Ba,Nt=Fe.c;var Wt=Fe.i,Ft=(Bt=1,Ke=Fe.$/Nt,et=Fe.$%Nt,vt=Fe.m,Ot=Fe.s,Fe.$),Zt=Nt*Wt,tr=Nt*B,hr=Ot.wc,lr=Ft<tr?ee(Ot,et,Ke):null;e(Ft<=Zt),e(B<=Wt),e(fe(Ot));t:for(;;){for(;!vt.h&&Ft<tr;){if(et&hr||(lr=ee(Ot,et,Ke)),e(lr!=null),X(vt),256>(Wt=ut(lr.G[0],lr.H[0],vt)))Re[tt+Ft]=Wt,++Ft,++et>=Nt&&(et=0,++Ke<=B&&!(Ke%16)&&be(Fe,Ke));else{if(!(280>Wt)){Bt=0;break t}Wt=Ee(Wt-256,vt);var zr,Rr=ut(lr.G[4],lr.H[4],vt);if(X(vt),!(Ft>=(Rr=ze(Nt,Rr=Ee(Rr,vt)))&&Zt-Ft>=Wt)){Bt=0;break t}for(zr=0;zr<Wt;++zr)Re[tt+Ft+zr]=Re[tt+Ft+zr-Rr];for(Ft+=Wt,et+=Wt;et>=Nt;)et-=Nt,++Ke<=B&&!(Ke%16)&&be(Fe,Ke);Ft<tr&&et&hr&&(lr=ee(Ot,et,Ke))}e(vt.h==M(vt))}be(Fe,Ke>B?B:Ke);break t}!Bt||vt.h&&Ft<Zt?(Bt=0,Fe.a=vt.h?5:3):Fe.$=Ft,B=Bt}else B=Xe(Fe,Fe.V,Fe.Ba,Fe.c,Fe.i,B,Gt);if(!B){ie=0;break e}}q+ie>=Te&&(N.Cc=1),ie=1}if(!ie)return null;if(N.Cc&&((ie=N.ga)!=null&&(ie.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+q*Ce}function Os(N,B,q,ie,Ce,Te){for(;0<Ce--;){var Fe,Re=N,Ke=B+(q?1:0),et=N,vt=B+(q?0:3);for(Fe=0;Fe<ie;++Fe){var Ot=et[vt+4*Fe];Ot!=255&&(Ot*=32897,Re[Ke+4*Fe+0]=Re[Ke+4*Fe+0]*Ot>>23,Re[Ke+4*Fe+1]=Re[Ke+4*Fe+1]*Ot>>23,Re[Ke+4*Fe+2]=Re[Ke+4*Fe+2]*Ot>>23)}B+=Te}}function ys(N,B,q,ie,Ce){for(;0<ie--;){var Te;for(Te=0;Te<q;++Te){var Fe=N[B+2*Te+0],Re=15&(et=N[B+2*Te+1]),Ke=4369*Re,et=(240&et|et>>4)*Ke>>16;N[B+2*Te+0]=(240&Fe|Fe>>4)*Ke>>16&240|(15&Fe|Fe<<4)*Ke>>16>>4&15,N[B+2*Te+1]=240&et|Re}B+=Ce}}function Ds(N,B,q,ie,Ce,Te,Fe,Re){var Ke,et,vt=255;for(et=0;et<Ce;++et){for(Ke=0;Ke<ie;++Ke){var Ot=N[B+Ke];Te[Fe+4*Ke]=Ot,vt&=Ot}B+=q,Fe+=Re}return vt!=255}function bs(N,B,q,ie,Ce){var Te;for(Te=0;Te<Ce;++Te)q[ie+Te]=N[B+Te]>>8}function zl(){d1=Os,M8=ys,L8=Ds,U8=bs}function ou(N,B,q){S[N]=function(ie,Ce,Te,Fe,Re,Ke,et,vt,Ot,tt,Nt,Bt,Wt,Ft,Zt,tr,hr){var lr,zr=hr-1>>1,Rr=Re[Ke+0]|et[vt+0]<<16,yn=Ot[tt+0]|Nt[Bt+0]<<16;e(ie!=null);var Hr=3*Rr+yn+131074>>2;for(B(ie[Ce+0],255&Hr,Hr>>16,Wt,Ft),Te!=null&&(Hr=3*yn+Rr+131074>>2,B(Te[Fe+0],255&Hr,Hr>>16,Zt,tr)),lr=1;lr<=zr;++lr){var Un=Re[Ke+lr]|et[vt+lr]<<16,Ni=Ot[tt+lr]|Nt[Bt+lr]<<16,bn=Rr+Un+yn+Ni+524296,$r=bn+2*(Un+yn)>>3;Hr=$r+Rr>>1,Rr=(bn=bn+2*(Rr+Ni)>>3)+Un>>1,B(ie[Ce+2*lr-1],255&Hr,Hr>>16,Wt,Ft+(2*lr-1)*q),B(ie[Ce+2*lr-0],255&Rr,Rr>>16,Wt,Ft+(2*lr-0)*q),Te!=null&&(Hr=bn+yn>>1,Rr=$r+Ni>>1,B(Te[Fe+2*lr-1],255&Hr,Hr>>16,Zt,tr+(2*lr-1)*q),B(Te[Fe+2*lr+0],255&Rr,Rr>>16,Zt,tr+(2*lr+0)*q)),Rr=Un,yn=Ni}1&hr||(Hr=3*Rr+yn+131074>>2,B(ie[Ce+hr-1],255&Hr,Hr>>16,Wt,Ft+(hr-1)*q),Te!=null&&(Hr=3*yn+Rr+131074>>2,B(Te[Fe+hr-1],255&Hr,Hr>>16,Zt,tr+(hr-1)*q)))}}function lu(){du[Qw]=vce,du[Vw]=Y8,du[G8]=yce,du[Hw]=J8,du[$w]=Z8,du[V3]=eM,du[q8]=bce,du[H3]=Y8,du[$3]=J8,du[Kw]=Z8,du[K3]=eM}function C(N){return N&-16384?0>N?0:255:N>>wce}function Y(N,B){return C((19077*N>>8)+(26149*B>>8)-14234)}function ue(N,B,q){return C((19077*N>>8)-(6419*B>>8)-(13320*q>>8)+8708)}function Ue(N,B){return C((19077*N>>8)+(33050*B>>8)-17685)}function jt(N,B,q,ie,Ce){ie[Ce+0]=Y(N,q),ie[Ce+1]=ue(N,B,q),ie[Ce+2]=Ue(N,B)}function Qt(N,B,q,ie,Ce){ie[Ce+0]=Ue(N,B),ie[Ce+1]=ue(N,B,q),ie[Ce+2]=Y(N,q)}function xr(N,B,q,ie,Ce){var Te=ue(N,B,q);B=Te<<3&224|Ue(N,B)>>3,ie[Ce+0]=248&Y(N,q)|Te>>5,ie[Ce+1]=B}function Ln(N,B,q,ie,Ce){var Te=240&Ue(N,B)|15;ie[Ce+0]=240&Y(N,q)|ue(N,B,q)>>4,ie[Ce+1]=Te}function ws(N,B,q,ie,Ce){ie[Ce+0]=255,jt(N,B,q,ie,Ce+1)}function jn(N,B,q,ie,Ce){Qt(N,B,q,ie,Ce),ie[Ce+3]=255}function Wn(N,B,q,ie,Ce){jt(N,B,q,ie,Ce),ie[Ce+3]=255}function Ra(N,B,q){S[N]=function(ie,Ce,Te,Fe,Re,Ke,et,vt,Ot){for(var tt=vt+(-2&Ot)*q;vt!=tt;)B(ie[Ce+0],Te[Fe+0],Re[Ke+0],et,vt),B(ie[Ce+1],Te[Fe+0],Re[Ke+0],et,vt+q),Ce+=2,++Fe,++Ke,vt+=2*q;1&Ot&&B(ie[Ce+0],Te[Fe+0],Re[Ke+0],et,vt)}}function bc(N,B,q){return q==0?N==0?B==0?6:5:B==0?4:0:q}function Wo(N,B,q,ie,Ce){switch(N>>>30){case 3:hm(B,q,ie,Ce,0);break;case 2:cu(B,q,ie,Ce);break;case 1:la(B,q,ie,Ce)}}function wo(N,B){var q,ie,Ce=B.M,Te=B.Nb,Fe=N.oc,Re=N.pc+40,Ke=N.oc,et=N.pc+584,vt=N.oc,Ot=N.pc+600;for(q=0;16>q;++q)Fe[Re+32*q-1]=129;for(q=0;8>q;++q)Ke[et+32*q-1]=129,vt[Ot+32*q-1]=129;for(0<Ce?Fe[Re-1-32]=Ke[et-1-32]=vt[Ot-1-32]=129:(a(Fe,Re-32-1,127,21),a(Ke,et-32-1,127,9),a(vt,Ot-32-1,127,9)),ie=0;ie<N.za;++ie){var tt=B.ya[B.aa+ie];if(0<ie){for(q=-1;16>q;++q)n(Fe,Re+32*q-4,Fe,Re+32*q+12,4);for(q=-1;8>q;++q)n(Ke,et+32*q-4,Ke,et+32*q+4,4),n(vt,Ot+32*q-4,vt,Ot+32*q+4,4)}var Nt=N.Gd,Bt=N.Hd+ie,Wt=tt.ad,Ft=tt.Hc;if(0<Ce&&(n(Fe,Re-32,Nt[Bt].y,0,16),n(Ke,et-32,Nt[Bt].f,0,8),n(vt,Ot-32,Nt[Bt].ea,0,8)),tt.Za){var Zt=Fe,tr=Re-32+16;for(0<Ce&&(ie>=N.za-1?a(Zt,tr,Nt[Bt].y[15],4):n(Zt,tr,Nt[Bt+1].y,0,4)),q=0;4>q;q++)Zt[tr+128+q]=Zt[tr+256+q]=Zt[tr+384+q]=Zt[tr+0+q];for(q=0;16>q;++q,Ft<<=2)Zt=Fe,tr=Re+rM[q],nd[tt.Ob[q]](Zt,tr),Wo(Ft,Wt,16*+q,Zt,tr)}else if(Zt=bc(ie,Ce,tt.Ob[0]),wh[Zt](Fe,Re),Ft!=0)for(q=0;16>q;++q,Ft<<=2)Wo(Ft,Wt,16*+q,Fe,Re+rM[q]);for(q=tt.Gc,Zt=bc(ie,Ce,tt.Dd),$f[Zt](Ke,et),$f[Zt](vt,Ot),Ft=Wt,Zt=Ke,tr=et,255&(tt=0|q)&&(170&tt?Zd(Ft,256,Zt,tr):Pa(Ft,256,Zt,tr)),tt=vt,Ft=Ot,255&(q>>=8)&&(170&q?Zd(Wt,320,tt,Ft):Pa(Wt,320,tt,Ft)),Ce<N.Ub-1&&(n(Nt[Bt].y,0,Fe,Re+480,16),n(Nt[Bt].f,0,Ke,et+224,8),n(Nt[Bt].ea,0,vt,Ot+224,8)),q=8*Te*N.B,Nt=N.sa,Bt=N.ta+16*ie+16*Te*N.R,Wt=N.qa,tt=N.ra+8*ie+q,Ft=N.Ha,Zt=N.Ia+8*ie+q,q=0;16>q;++q)n(Nt,Bt+q*N.R,Fe,Re+32*q,16);for(q=0;8>q;++q)n(Wt,tt+q*N.B,Ke,et+32*q,8),n(Ft,Zt+q*N.B,vt,Ot+32*q,8)}}function rd(N,B,q,ie,Ce,Te,Fe,Re,Ke){var et=[0],vt=[0],Ot=0,tt=Ke!=null?Ke.kd:0,Nt=Ke??new sr;if(N==null||12>q)return 7;Nt.data=N,Nt.w=B,Nt.ha=q,B=[B],q=[q],Nt.gb=[Nt.gb];e:{var Bt=B,Wt=q,Ft=Nt.gb;if(e(N!=null),e(Wt!=null),e(Ft!=null),Ft[0]=0,12<=Wt[0]&&!r(N,Bt[0],"RIFF")){if(r(N,Bt[0]+8,"WEBP")){Ft=3;break e}var Zt=ne(N,Bt[0]+4);if(12>Zt||4294967286<Zt){Ft=3;break e}if(tt&&Zt>Wt[0]-8){Ft=7;break e}Ft[0]=Zt,Bt[0]+=12,Wt[0]-=12}Ft=0}if(Ft!=0)return Ft;for(Zt=0<Nt.gb[0],q=q[0];;){e:{var tr=N;Wt=B,Ft=q;var hr=et,lr=vt,zr=Bt=[0];if((Hr=Ot=[Ot])[0]=0,8>Ft[0])Ft=7;else{if(!r(tr,Wt[0],"VP8X")){if(ne(tr,Wt[0]+4)!=10){Ft=3;break e}if(18>Ft[0]){Ft=7;break e}var Rr=ne(tr,Wt[0]+8),yn=1+he(tr,Wt[0]+12);if(2147483648<=yn*(tr=1+he(tr,Wt[0]+15))){Ft=3;break e}zr!=null&&(zr[0]=Rr),hr!=null&&(hr[0]=yn),lr!=null&&(lr[0]=tr),Wt[0]+=18,Ft[0]-=18,Hr[0]=1}Ft=0}}if(Ot=Ot[0],Bt=Bt[0],Ft!=0)return Ft;if(Wt=!!(2&Bt),!Zt&&Ot)return 3;if(Te!=null&&(Te[0]=!!(16&Bt)),Fe!=null&&(Fe[0]=Wt),Re!=null&&(Re[0]=0),Fe=et[0],Bt=vt[0],Ot&&Wt&&Ke==null){Ft=0;break}if(4>q){Ft=7;break}if(Zt&&Ot||!Zt&&!Ot&&!r(N,B[0],"ALPH")){q=[q],Nt.na=[Nt.na],Nt.P=[Nt.P],Nt.Sa=[Nt.Sa];e:{Rr=N,Ft=B,Zt=q;var Hr=Nt.gb;hr=Nt.na,lr=Nt.P,zr=Nt.Sa,yn=22,e(Rr!=null),e(Zt!=null),tr=Ft[0];var Un=Zt[0];for(e(hr!=null),e(zr!=null),hr[0]=null,lr[0]=null,zr[0]=0;;){if(Ft[0]=tr,Zt[0]=Un,8>Un){Ft=7;break e}var Ni=ne(Rr,tr+4);if(4294967286<Ni){Ft=3;break e}var bn=8+Ni+1&-2;if(yn+=bn,0<Hr&&yn>Hr){Ft=3;break e}if(!r(Rr,tr,"VP8 ")||!r(Rr,tr,"VP8L")){Ft=0;break e}if(Un[0]<bn){Ft=7;break e}r(Rr,tr,"ALPH")||(hr[0]=Rr,lr[0]=tr+8,zr[0]=Ni),tr+=bn,Un-=bn}}if(q=q[0],Nt.na=Nt.na[0],Nt.P=Nt.P[0],Nt.Sa=Nt.Sa[0],Ft!=0)break}q=[q],Nt.Ja=[Nt.Ja],Nt.xa=[Nt.xa];e:if(Hr=N,Ft=B,Zt=q,hr=Nt.gb[0],lr=Nt.Ja,zr=Nt.xa,Rr=Ft[0],tr=!r(Hr,Rr,"VP8 "),yn=!r(Hr,Rr,"VP8L"),e(Hr!=null),e(Zt!=null),e(lr!=null),e(zr!=null),8>Zt[0])Ft=7;else{if(tr||yn){if(Hr=ne(Hr,Rr+4),12<=hr&&Hr>hr-12){Ft=3;break e}if(tt&&Hr>Zt[0]-8){Ft=7;break e}lr[0]=Hr,Ft[0]+=8,Zt[0]-=8,zr[0]=yn}else zr[0]=5<=Zt[0]&&Hr[Rr+0]==47&&!(Hr[Rr+4]>>5),lr[0]=Zt[0];Ft=0}if(q=q[0],Nt.Ja=Nt.Ja[0],Nt.xa=Nt.xa[0],B=B[0],Ft!=0)break;if(4294967286<Nt.Ja)return 3;if(Re==null||Wt||(Re[0]=Nt.xa?2:1),Fe=[Fe],Bt=[Bt],Nt.xa){if(5>q){Ft=7;break}Re=Fe,tt=Bt,Wt=Te,N==null||5>q?N=0:5<=q&&N[B+0]==47&&!(N[B+4]>>5)?(Zt=[0],Hr=[0],hr=[0],se(lr=new H,N,B,q),_e(lr,Zt,Hr,hr)?(Re!=null&&(Re[0]=Zt[0]),tt!=null&&(tt[0]=Hr[0]),Wt!=null&&(Wt[0]=hr[0]),N=1):N=0):N=0}else{if(10>q){Ft=7;break}Re=Bt,N==null||10>q||!ct(N,B+3,q-3)?N=0:(tt=N[B+0]|N[B+1]<<8|N[B+2]<<16,Wt=16383&(N[B+7]<<8|N[B+6]),N=16383&(N[B+9]<<8|N[B+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=Nt.Ja||!Wt||!N?N=0:(Fe&&(Fe[0]=Wt),Re&&(Re[0]=N),N=1))}if(!N||(Fe=Fe[0],Bt=Bt[0],Ot&&(et[0]!=Fe||vt[0]!=Bt)))return 3;Ke!=null&&(Ke[0]=Nt,Ke.offset=B-Ke.w,e(4294967286>B-Ke.w),e(Ke.offset==Ke.ha-q));break}return Ft==0||Ft==7&&Ot&&Ke==null?(Te!=null&&(Te[0]|=Nt.na!=null&&0<Nt.na.length),ie!=null&&(ie[0]=Fe),Ce!=null&&(Ce[0]=Bt),0):Ft}function n1(N,B,q){var ie=B.width,Ce=B.height,Te=0,Fe=0,Re=ie,Ke=Ce;if(B.Da=N!=null&&0<N.Da,B.Da&&(Re=N.cd,Ke=N.bd,Te=N.v,Fe=N.j,11>q||(Te&=-2,Fe&=-2),0>Te||0>Fe||0>=Re||0>=Ke||Te+Re>ie||Fe+Ke>Ce))return 0;if(B.v=Te,B.j=Fe,B.va=Te+Re,B.o=Fe+Ke,B.U=Re,B.T=Ke,B.da=N!=null&&0<N.da,B.da){if(!oe(Re,Ke,q=[N.ib],Te=[N.hb]))return 0;B.ib=q[0],B.hb=Te[0]}return B.ob=N!=null&&N.ob,B.Kb=N==null||!N.Sd,B.da&&(B.ob=B.ib<3*ie/4&&B.hb<3*Ce/4,B.Kb=0),1}function a1(N){if(N==null)return 2;if(11>N.S){var B=N.f.RGBA;B.fb+=(N.height-1)*B.A,B.A=-B.A}else B=N.f.kb,N=N.height,B.O+=(N-1)*B.fa,B.fa=-B.fa,B.N+=(N-1>>1)*B.Ab,B.Ab=-B.Ab,B.W+=(N-1>>1)*B.Db,B.Db=-B.Db,B.F!=null&&(B.J+=(N-1)*B.lb,B.lb=-B.lb);return 0}function mh(N,B,q,ie){if(ie==null||0>=N||0>=B)return 2;if(q!=null){if(q.Da){var Ce=q.cd,Te=q.bd,Fe=-2&q.v,Re=-2&q.j;if(0>Fe||0>Re||0>=Ce||0>=Te||Fe+Ce>N||Re+Te>B)return 2;N=Ce,B=Te}if(q.da){if(!oe(N,B,Ce=[q.ib],Te=[q.hb]))return 2;N=Ce[0],B=Te[0]}}ie.width=N,ie.height=B;e:{var Ke=ie.width,et=ie.height;if(N=ie.S,0>=Ke||0>=et||!(N>=Qw&&13>N))N=2;else{if(0>=ie.Rd&&ie.sd==null){Fe=Te=Ce=B=0;var vt=(Re=Ke*nM[N])*et;if(11>N||(Te=(et+1)/2*(B=(Ke+1)/2),N==12&&(Fe=(Ce=Ke)*et)),(et=s(vt+2*Te+Fe))==null){N=1;break e}ie.sd=et,11>N?((Ke=ie.f.RGBA).eb=et,Ke.fb=0,Ke.A=Re,Ke.size=vt):((Ke=ie.f.kb).y=et,Ke.O=0,Ke.fa=Re,Ke.Fd=vt,Ke.f=et,Ke.N=0+vt,Ke.Ab=B,Ke.Cd=Te,Ke.ea=et,Ke.W=0+vt+Te,Ke.Db=B,Ke.Ed=Te,N==12&&(Ke.F=et,Ke.J=0+vt+2*Te),Ke.Tc=Fe,Ke.lb=Ce)}if(B=1,Ce=ie.S,Te=ie.width,Fe=ie.height,Ce>=Qw&&13>Ce)if(11>Ce)N=ie.f.RGBA,B&=(Re=Math.abs(N.A))*(Fe-1)+Te<=N.size,B&=Re>=Te*nM[Ce],B&=N.eb!=null;else{N=ie.f.kb,Re=(Te+1)/2,vt=(Fe+1)/2,Ke=Math.abs(N.fa),et=Math.abs(N.Ab);var Ot=Math.abs(N.Db),tt=Math.abs(N.lb),Nt=tt*(Fe-1)+Te;B&=Ke*(Fe-1)+Te<=N.Fd,B&=et*(vt-1)+Re<=N.Cd,B=(B&=Ot*(vt-1)+Re<=N.Ed)&Ke>=Te&et>=Re&Ot>=Re,B&=N.y!=null,B&=N.f!=null,B&=N.ea!=null,Ce==12&&(B&=tt>=Te,B&=Nt<=N.Tc,B&=N.F!=null)}else B=0;N=B?0:2}}return N!=0||q!=null&&q.fd&&(N=a1(ie)),N}var fm=64,wc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Nc=24,ph=32,Vf=8,gh=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(N){return N},S.Predictor2=function(N,B,q){return B[q+0]},S.Predictor3=function(N,B,q){return B[q+1]},S.Predictor4=function(N,B,q){return B[q-1]},S.Predictor5=function(N,B,q){return Je(Je(N,B[q+1]),B[q+0])},S.Predictor6=function(N,B,q){return Je(N,B[q-1])},S.Predictor7=function(N,B,q){return Je(N,B[q+0])},S.Predictor8=function(N,B,q){return Je(B[q-1],B[q+0])},S.Predictor9=function(N,B,q){return Je(B[q+0],B[q+1])},S.Predictor10=function(N,B,q){return Je(Je(N,B[q-1]),Je(B[q+0],B[q+1]))},S.Predictor11=function(N,B,q){var ie=B[q+0];return 0>=Ge(ie>>24&255,N>>24&255,(B=B[q-1])>>24&255)+Ge(ie>>16&255,N>>16&255,B>>16&255)+Ge(ie>>8&255,N>>8&255,B>>8&255)+Ge(255&ie,255&N,255&B)?ie:N},S.Predictor12=function(N,B,q){var ie=B[q+0];return(lt((N>>24&255)+(ie>>24&255)-((B=B[q-1])>>24&255))<<24|lt((N>>16&255)+(ie>>16&255)-(B>>16&255))<<16|lt((N>>8&255)+(ie>>8&255)-(B>>8&255))<<8|lt((255&N)+(255&ie)-(255&B)))>>>0},S.Predictor13=function(N,B,q){var ie=B[q-1];return(ft((N=Je(N,B[q+0]))>>24&255,ie>>24&255)<<24|ft(N>>16&255,ie>>16&255)<<16|ft(N>>8&255,ie>>8&255)<<8|ft(255&N,255&ie))>>>0};var s1=S.PredictorAdd0;S.PredictorAdd1=ye,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var xg=S.PredictorAdd2;pe("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),pe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var zs,Mw=S.ColorIndexInverseTransform,Yd=S.MapARGB,Jd=S.VP8LColorIndexInverseTransformAlpha,i1=S.MapAlpha,o1=S.VP8LPredictorsAdd=[];o1.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var l1,c1,xh,vh,yh,Am,bh,hm,cu,Zd,la,Pa,Ws,wi,Hf,u1,vg,Lw,T8,k8,F8,O8,D8,R8,d1,M8,L8,U8,Q8=s(511),V8=s(2041),H8=s(225),$8=s(767),K8=0,Q3=V8,Uw=H8,Cc=$8,uu=Q8,Qw=0,Vw=1,G8=2,Hw=3,$w=4,V3=5,q8=6,H3=7,$3=8,Kw=9,K3=10,sce=[2,3,7],ice=[3,3,11],z8=[280,256,256,256,40],oce=[0,1,1,1,0],lce=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],uce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],dce=8,G3=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],q3=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],f1=null,fce=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ace=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],W8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hce=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mce=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pce=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gce=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],wh=[],nd=[],$f=[],xce=1,X8=2,Nh=[],du=[];ou("UpsampleRgbLinePair",jt,3),ou("UpsampleBgrLinePair",Qt,3),ou("UpsampleRgbaLinePair",Wn,4),ou("UpsampleBgraLinePair",jn,4),ou("UpsampleArgbLinePair",ws,4),ou("UpsampleRgba4444LinePair",Ln,2),ou("UpsampleRgb565LinePair",xr,2);var vce=S.UpsampleRgbLinePair,yce=S.UpsampleBgrLinePair,Y8=S.UpsampleRgbaLinePair,J8=S.UpsampleBgraLinePair,Z8=S.UpsampleArgbLinePair,eM=S.UpsampleRgba4444LinePair,bce=S.UpsampleRgb565LinePair,Gw=16,qw=1<<Gw-1,A1=-227,z3=482,wce=6,tM=0,Nce=s(256),Cce=s(256),_ce=s(256),Ece=s(256),Sce=s(z3-A1),Ice=s(z3-A1);Ra("YuvToRgbRow",jt,3),Ra("YuvToBgrRow",Qt,3),Ra("YuvToRgbaRow",Wn,4),Ra("YuvToBgraRow",jn,4),Ra("YuvToArgbRow",ws,4),Ra("YuvToRgba4444Row",Ln,2),Ra("YuvToRgb565Row",xr,2);var rM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zw=[0,2,8],jce=[8,7,6,4,4,2,2,2,1,1,1,1],Bce=1;this.WebPDecodeRGBA=function(N,B,q,ie,Ce){var Te=Vw,Fe=new Jt,Re=new Le;Fe.ba=Re,Re.S=Te,Re.width=[Re.width],Re.height=[Re.height];var Ke=Re.width,et=Re.height,vt=new Ve;if(vt==null||N==null)var Ot=2;else e(vt!=null),Ot=rd(N,B,q,vt.width,vt.height,vt.Pd,vt.Qd,vt.format,null);if(Ot!=0?Ke=0:(Ke!=null&&(Ke[0]=vt.width[0]),et!=null&&(et[0]=vt.height[0]),Ke=1),Ke){Re.width=Re.width[0],Re.height=Re.height[0],ie!=null&&(ie[0]=Re.width),Ce!=null&&(Ce[0]=Re.height);e:{if(ie=new mr,(Ce=new sr).data=N,Ce.w=B,Ce.ha=q,Ce.kd=1,B=[0],e(Ce!=null),((N=rd(Ce.data,Ce.w,Ce.ha,null,null,null,B,null,Ce))==0||N==7)&&B[0]&&(N=4),(B=N)==0){if(e(Fe!=null),ie.data=Ce.data,ie.w=Ce.w+Ce.offset,ie.ha=Ce.ha-Ce.offset,ie.put=ae,ie.ac=V,ie.bc=Se,ie.ma=Fe,Ce.xa){if((N=xt())==null){Fe=1;break e}if(function(tt,Nt){var Bt=[0],Wt=[0],Ft=[0];t:for(;;){if(tt==null)return 0;if(Nt==null)return tt.a=2,0;if(tt.l=Nt,tt.a=0,se(tt.m,Nt.data,Nt.w,Nt.ha),!_e(tt.m,Bt,Wt,Ft)){tt.a=3;break t}if(tt.xb=X8,Nt.width=Bt[0],Nt.height=Wt[0],!_t(Bt[0],Wt[0],1,tt,null))break t;return 1}return e(tt.a!=0),0}(N,ie)){if(ie=(B=mh(ie.width,ie.height,Fe.Oa,Fe.ba))==0){t:{ie=N;r:for(;;){if(ie==null){ie=0;break t}if(e(ie.s.yc!=null),e(ie.s.Ya!=null),e(0<ie.s.Wb),e((q=ie.l)!=null),e((Ce=q.ma)!=null),ie.xb!=0){if(ie.ca=Ce.ba,ie.tb=Ce.tb,e(ie.ca!=null),!n1(Ce.Oa,q,Hw)){ie.a=2;break r}if(!Et(ie,q.width)||q.da)break r;if((q.da||Qe(ie.ca.S))&&zl(),11>ie.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ie.ca.f.kb.F!=null&&zl()),ie.Pb&&0<ie.s.ua&&ie.s.vb.X==null&&!z(ie.s.vb,ie.s.Wa.Xa)){ie.a=1;break r}ie.xb=0}if(!Xe(ie,ie.V,ie.Ba,ie.c,ie.i,q.o,re))break r;Ce.Dc=ie.Ma,ie=1;break t}e(ie.a!=0),ie=0}ie=!ie}ie&&(B=N.a)}else B=N.a}else{if((N=new fr)==null){Fe=1;break e}if(N.Fa=Ce.na,N.P=Ce.P,N.qc=Ce.Sa,Oe(N,ie)){if((B=mh(ie.width,ie.height,Fe.Oa,Fe.ba))==0){if(N.Aa=0,q=Fe.Oa,e((Ce=N)!=null),q!=null){if(0<(Ke=0>(Ke=q.Md)?0:100<Ke?255:255*Ke/100)){for(et=vt=0;4>et;++et)12>(Ot=Ce.pb[et]).lc&&(Ot.ia=Ke*jce[0>Ot.lc?0:Ot.lc]>>3),vt|=Ot.ia;vt&&(alert("todo:VP8InitRandom"),Ce.ia=1)}Ce.Ga=q.Id,100<Ce.Ga?Ce.Ga=100:0>Ce.Ga&&(Ce.Ga=0)}(function(tt,Nt){if(tt==null)return 0;if(Nt==null)return Ht(tt,2,"NULL VP8Io parameter in VP8Decode().");if(!tt.cb&&!Oe(tt,Nt))return 0;if(e(tt.cb),Nt.ac==null||Nt.ac(Nt)){Nt.ob&&(tt.L=0);var Bt=zw[tt.L];if(tt.L==2?(tt.yb=0,tt.zb=0):(tt.yb=Nt.v-Bt>>4,tt.zb=Nt.j-Bt>>4,0>tt.yb&&(tt.yb=0),0>tt.zb&&(tt.zb=0)),tt.Va=Nt.o+15+Bt>>4,tt.Hb=Nt.va+15+Bt>>4,tt.Hb>tt.za&&(tt.Hb=tt.za),tt.Va>tt.Ub&&(tt.Va=tt.Ub),0<tt.L){var Wt=tt.ed;for(Bt=0;4>Bt;++Bt){var Ft;if(tt.Qa.Cb){var Zt=tt.Qa.Lb[Bt];tt.Qa.Fb||(Zt+=Wt.Tb)}else Zt=Wt.Tb;for(Ft=0;1>=Ft;++Ft){var tr=tt.gd[Bt][Ft],hr=Zt;if(Wt.Pc&&(hr+=Wt.vd[0],Ft&&(hr+=Wt.od[0])),0<(hr=0>hr?0:63<hr?63:hr)){var lr=hr;0<Wt.wb&&(lr=4<Wt.wb?lr>>2:lr>>1)>9-Wt.wb&&(lr=9-Wt.wb),1>lr&&(lr=1),tr.dd=lr,tr.tc=2*hr+lr,tr.ld=40<=hr?2:15<=hr?1:0}else tr.tc=0;tr.La=Ft}}}Bt=0}else Ht(tt,6,"Frame setup failed"),Bt=tt.a;if(Bt=Bt==0){if(Bt){tt.$c=0,0<tt.Aa||(tt.Ic=Bce);t:{Bt=tt.Ic,Wt=4*(lr=tt.za);var zr=32*lr,Rr=lr+1,yn=0<tt.L?lr*(0<tt.Aa?2:1):0,Hr=(tt.Aa==2?2:1)*lr;if((tr=Wt+832+(Ft=3*(16*Bt+zw[tt.L])/2*zr)+(Zt=tt.Fa!=null&&0<tt.Fa.length?tt.Kc.c*tt.Kc.i:0))!=tr)Bt=0;else{if(tr>tt.Vb){if(tt.Vb=0,tt.Ec=s(tr),tt.Fc=0,tt.Ec==null){Bt=Ht(tt,1,"no memory during frame initialization.");break t}tt.Vb=tr}tr=tt.Ec,hr=tt.Fc,tt.Ac=tr,tt.Bc=hr,hr+=Wt,tt.Gd=i(zr,Yt),tt.Hd=0,tt.rb=i(Rr+1,ln),tt.sb=1,tt.wa=yn?i(yn,qr):null,tt.Y=0,tt.D.Nb=0,tt.D.wa=tt.wa,tt.D.Y=tt.Y,0<tt.Aa&&(tt.D.Y+=lr),e(!0),tt.oc=tr,tt.pc=hr,hr+=832,tt.ya=i(Hr,rt),tt.aa=0,tt.D.ya=tt.ya,tt.D.aa=tt.aa,tt.Aa==2&&(tt.D.aa+=lr),tt.R=16*lr,tt.B=8*lr,lr=(zr=zw[tt.L])*tt.R,zr=zr/2*tt.B,tt.sa=tr,tt.ta=hr+lr,tt.qa=tt.sa,tt.ra=tt.ta+16*Bt*tt.R+zr,tt.Ha=tt.qa,tt.Ia=tt.ra+8*Bt*tt.B+zr,tt.$c=0,hr+=Ft,tt.mb=Zt?tr:null,tt.nb=Zt?hr:null,e(hr+Zt<=tt.Fc+tt.Vb),mt(tt),a(tt.Ac,tt.Bc,0,Wt),Bt=1}}if(Bt){if(Nt.ka=0,Nt.y=tt.sa,Nt.O=tt.ta,Nt.f=tt.qa,Nt.N=tt.ra,Nt.ea=tt.Ha,Nt.Vd=tt.Ia,Nt.fa=tt.R,Nt.Rc=tt.B,Nt.F=null,Nt.J=0,!K8){for(Bt=-255;255>=Bt;++Bt)Q8[255+Bt]=0>Bt?-Bt:Bt;for(Bt=-1020;1020>=Bt;++Bt)V8[1020+Bt]=-128>Bt?-128:127<Bt?127:Bt;for(Bt=-112;112>=Bt;++Bt)H8[112+Bt]=-16>Bt?-16:15<Bt?15:Bt;for(Bt=-255;510>=Bt;++Bt)$8[255+Bt]=0>Bt?0:255<Bt?255:Bt;K8=1}bh=ta,hm=Ar,Zd=Cr,la=as,Pa=oa,cu=qt,Ws=hh,wi=iu,Hf=we,u1=Ze,vg=dm,Lw=U,T8=dt,k8=St,F8=Xd,O8=Nl,D8=um,R8=gg,nd[0]=t1,nd[1]=Xi,nd[2]=Zv,nd[3]=e1,nd[4]=Yi,nd[5]=r1,nd[6]=ed,nd[7]=dh,nd[8]=fh,nd[9]=td,wh[0]=ru,wh[1]=qd,wh[2]=tu,wh[3]=Lf,wh[4]=zd,wh[5]=uh,wh[6]=mg,$f[0]=lm,$f[1]=Zu,$f[2]=yc,$f[3]=Uf,$f[4]=cm,$f[5]=Ea,$f[6]=pg,Bt=1}else Bt=0}Bt&&(Bt=function(Un,Ni){for(Un.M=0;Un.M<Un.Va;++Un.M){var bn,$r=Un.Jc[Un.M&Un.Xb],_r=Un.m,Xs=Un;for(bn=0;bn<Xs.za;++bn){var gn=_r,Qn=Xs,Ga=Qn.Ac,No=Qn.Bc+4*bn,_l=Qn.zc,Rs=Qn.ya[Qn.aa+bn];if(Qn.Qa.Bb?Rs.$b=te(gn,Qn.Pa.jb[0])?2+te(gn,Qn.Pa.jb[2]):te(gn,Qn.Pa.jb[1]):Rs.$b=0,Qn.kc&&(Rs.Ad=te(gn,Qn.Bd)),Rs.Za=!te(gn,145)+0,Rs.Za){var Xo=Rs.Ob,El=0;for(Qn=0;4>Qn;++Qn){var Ci,$n=_l[0+Qn];for(Ci=0;4>Ci;++Ci){$n=mce[Ga[No+Ci]][$n];for(var fa=W8[te(gn,$n[0])];0<fa;)fa=W8[2*fa+te(gn,$n[fa])];$n=-fa,Ga[No+Ci]=$n}n(Xo,El,Ga,No,4),El+=4,_l[0+Qn]=$n}}else $n=te(gn,156)?te(gn,128)?1:3:te(gn,163)?2:0,Rs.Ob[0]=$n,a(Ga,No,$n,4),a(_l,0,$n,4);Rs.Dd=te(gn,142)?te(gn,114)?te(gn,183)?1:3:2:0}if(Xs.m.Ka)return Ht(Un,7,"Premature end-of-partition0 encountered.");for(;Un.ja<Un.za;++Un.ja){if(Xs=$r,gn=(_r=Un).rb[_r.sb-1],Ga=_r.rb[_r.sb+_r.ja],bn=_r.ya[_r.aa+_r.ja],No=_r.kc?bn.Ad:0)gn.la=Ga.la=0,bn.Za||(gn.Na=Ga.Na=0),bn.Hc=0,bn.Gc=0,bn.ia=0;else{var Ms,Aa;if(gn=Ga,Ga=Xs,No=_r.Pa.Xc,_l=_r.ya[_r.aa+_r.ja],Rs=_r.pb[_l.$b],Qn=_l.ad,Xo=0,El=_r.rb[_r.sb-1],$n=Ci=0,a(Qn,Xo,0,384),_l.Za)var Co=0,ad=No[3];else{fa=s(16);var Ys=gn.Na+El.Na;if(Ys=f1(Ga,No[1],Ys,Rs.Eb,0,fa,0),gn.Na=El.Na=(0<Ys)+0,1<Ys)bh(fa,0,Qn,Xo);else{var Wl=fa[0]+3>>3;for(fa=0;256>fa;fa+=16)Qn[Xo+fa]=Wl}Co=1,ad=No[0]}var Ta=15&gn.la,_i=15&El.la;for(fa=0;4>fa;++fa){var _c=1&_i;for(Wl=Aa=0;4>Wl;++Wl)Ta=Ta>>1|(_c=(Ys=f1(Ga,ad,Ys=_c+(1&Ta),Rs.Sc,Co,Qn,Xo))>Co)<<7,Aa=Aa<<2|(3<Ys?3:1<Ys?2:Qn[Xo+0]!=0),Xo+=16;Ta>>=4,_i=_i>>1|_c<<7,Ci=(Ci<<8|Aa)>>>0}for(ad=Ta,Co=_i>>4,Ms=0;4>Ms;Ms+=2){for(Aa=0,Ta=gn.la>>4+Ms,_i=El.la>>4+Ms,fa=0;2>fa;++fa){for(_c=1&_i,Wl=0;2>Wl;++Wl)Ys=_c+(1&Ta),Ta=Ta>>1|(_c=0<(Ys=f1(Ga,No[2],Ys,Rs.Qc,0,Qn,Xo)))<<3,Aa=Aa<<2|(3<Ys?3:1<Ys?2:Qn[Xo+0]!=0),Xo+=16;Ta>>=2,_i=_i>>1|_c<<5}$n|=Aa<<4*Ms,ad|=Ta<<4<<Ms,Co|=(240&_i)<<Ms}gn.la=ad,El.la=Co,_l.Hc=Ci,_l.Gc=$n,_l.ia=43690&$n?0:Rs.ia,No=!(Ci|$n)}if(0<_r.L&&(_r.wa[_r.Y+_r.ja]=_r.gd[bn.$b][bn.Za],_r.wa[_r.Y+_r.ja].La|=!No),Xs.Ka)return Ht(Un,7,"Premature end-of-file encountered.")}if(mt(Un),_r=Ni,Xs=1,bn=($r=Un).D,gn=0<$r.L&&$r.M>=$r.zb&&$r.M<=$r.Va,$r.Aa==0)t:{if(bn.M=$r.M,bn.uc=gn,wo($r,bn),Xs=1,bn=(Aa=$r.D).Nb,gn=($n=zw[$r.L])*$r.R,Ga=$n/2*$r.B,fa=16*bn*$r.R,Wl=8*bn*$r.B,No=$r.sa,_l=$r.ta-gn+fa,Rs=$r.qa,Qn=$r.ra-Ga+Wl,Xo=$r.Ha,El=$r.Ia-Ga+Wl,_i=(Ta=Aa.M)==0,Ci=Ta>=$r.Va-1,$r.Aa==2&&wo($r,Aa),Aa.uc)for(_c=(Ys=$r).D.M,e(Ys.D.uc),Aa=Ys.yb;Aa<Ys.Hb;++Aa){Co=Aa,ad=_c;var Sl=(Ec=(_o=Ys).D).Nb;Ms=_o.R;var Ec=Ec.wa[Ec.Y+Co],Sc=_o.sa,Xl=_o.ta+16*Sl*Ms+16*Co,Ic=Ec.dd,Ma=Ec.tc;if(Ma!=0)if(e(3<=Ma),_o.L==1)0<Co&&O8(Sc,Xl,Ms,Ma+4),Ec.La&&R8(Sc,Xl,Ms,Ma),0<ad&&F8(Sc,Xl,Ms,Ma+4),Ec.La&&D8(Sc,Xl,Ms,Ma);else{var jc=_o.B,sd=_o.qa,mm=_o.ra+8*Sl*jc+8*Co,Kf=_o.Ha,_o=_o.Ia+8*Sl*jc+8*Co;Sl=Ec.ld,0<Co&&(wi(Sc,Xl,Ms,Ma+4,Ic,Sl),u1(sd,mm,Kf,_o,jc,Ma+4,Ic,Sl)),Ec.La&&(Lw(Sc,Xl,Ms,Ma,Ic,Sl),k8(sd,mm,Kf,_o,jc,Ma,Ic,Sl)),0<ad&&(Ws(Sc,Xl,Ms,Ma+4,Ic,Sl),Hf(sd,mm,Kf,_o,jc,Ma+4,Ic,Sl)),Ec.La&&(vg(Sc,Xl,Ms,Ma,Ic,Sl),T8(sd,mm,Kf,_o,jc,Ma,Ic,Sl))}}if($r.ia&&alert("todo:DitherRow"),_r.put!=null){if(Aa=16*Ta,Ta=16*(Ta+1),_i?(_r.y=$r.sa,_r.O=$r.ta+fa,_r.f=$r.qa,_r.N=$r.ra+Wl,_r.ea=$r.Ha,_r.W=$r.Ia+Wl):(Aa-=$n,_r.y=No,_r.O=_l,_r.f=Rs,_r.N=Qn,_r.ea=Xo,_r.W=El),Ci||(Ta-=$n),Ta>_r.o&&(Ta=_r.o),_r.F=null,_r.J=null,$r.Fa!=null&&0<$r.Fa.length&&Aa<Ta&&(_r.J=da($r,_r,Aa,Ta-Aa),_r.F=$r.mb,_r.F==null&&_r.F.length==0)){Xs=Ht($r,3,"Could not decode alpha data.");break t}Aa<_r.j&&($n=_r.j-Aa,Aa=_r.j,e(!(1&$n)),_r.O+=$r.R*$n,_r.N+=$r.B*($n>>1),_r.W+=$r.B*($n>>1),_r.F!=null&&(_r.J+=_r.width*$n)),Aa<Ta&&(_r.O+=_r.v,_r.N+=_r.v>>1,_r.W+=_r.v>>1,_r.F!=null&&(_r.J+=_r.v),_r.ka=Aa-_r.j,_r.U=_r.va-_r.v,_r.T=Ta-Aa,Xs=_r.put(_r))}bn+1!=$r.Ic||Ci||(n($r.sa,$r.ta-gn,No,_l+16*$r.R,gn),n($r.qa,$r.ra-Ga,Rs,Qn+8*$r.B,Ga),n($r.Ha,$r.Ia-Ga,Xo,El+8*$r.B,Ga))}if(!Xs)return Ht(Un,6,"Output aborted.")}return 1}(tt,Nt)),Nt.bc!=null&&Nt.bc(Nt),Bt&=1}return Bt?(tt.cb=0,Bt):0})(N,ie)||(B=N.a)}}else B=N.a}B==0&&Fe.Oa!=null&&Fe.Oa.fd&&(B=a1(Fe.ba))}Fe=B}Te=Fe!=0?null:11>Te?Re.f.RGBA.eb:Re.f.kb.y}else Te=null;return Te};var nM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(S,O){for(var P="",T=0;T<4;T++)P+=String.fromCharCode(S[O++]);return P}function d(S,O){return S[O+0]|S[O+1]<<8}function f(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16)>>>0}function h(S,O){return(S[O+0]|S[O+1]<<8|S[O+2]<<16|S[O+3]<<24)>>>0}new c;var A=[0],m=[0],p=[],g=new c,x=t,y=function(S,O){var P={},T=0,F=!1,J=0,ge=0;if(P.frames=[],!function(k,H){for(var R=0;R<4;R++)if(k[H+R]!="RIFF".charCodeAt(R))return!0;return!1}(S,O)){for(h(S,O+=4),O+=8;O<S.length;){var le=u(S,O),de=h(S,O+=4);O+=4;var Ae=de+(1&de);switch(le){case"VP8 ":case"VP8L":P.frames[T]===void 0&&(P.frames[T]={}),(Pe=P.frames[T]).src_off=F?ge:O-8,Pe.src_size=J+de+8,T++,F&&(F=!1,J=0,ge=0);break;case"VP8X":(Pe=P.header={}).feature_flags=S[O];var se=O+4;Pe.canvas_width=1+f(S,se),se+=3,Pe.canvas_height=1+f(S,se),se+=3;break;case"ALPH":F=!0,J=Ae+8,ge=O-8;break;case"ANIM":(Pe=P.header).bgcolor=h(S,O),se=O+4,Pe.loop_count=d(S,se),se+=2;break;case"ANMF":var Ie,Pe;(Pe=P.frames[T]={}).offset_x=2*f(S,O),O+=3,Pe.offset_y=2*f(S,O),O+=3,Pe.width=1+f(S,O),O+=3,Pe.height=1+f(S,O),O+=3,Pe.duration=f(S,O),O+=3,Ie=S[O++],Pe.dispose=1&Ie,Pe.blend=Ie>>1&1}le!="ANMF"&&(O+=Ae)}return P}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,A=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=g.WebPDecodeRGBA(x,I.src_off,I.src_size,m,A);I.rgba=_,I.imgwidth=m[0],I.imgheight=A[0];for(var E=0;E<m[0]*A[0]*4;E++)p[E]=_[E];return this.width=m,this.height=A,this.data=p,this}(function(t){var e,r,n,a,s,i,l,c,u,d=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new c,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new i,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new i,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=k;Object.defineProperty(this,"pdf",{get:function(){return H}});var R=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return R},set:function(z){R=!!z}});var M=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return M},set:function(z){M=!!z}});var G=0;Object.defineProperty(this,"posX",{get:function(){return G},set:function(z){isNaN(z)||(G=z)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(z){isNaN(z)||(X=z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(z){var ce;typeof z=="number"?ce=[z,z,z,z]:((ce=new Array(4))[0]=z[0],ce[1]=z.length>=2?z[1]:ce[0],ce[2]=z.length>=3?z[2]:ce[0],ce[3]=z.length>=4?z[3]:ce[1]),u.margin=ce}});var D=!1;Object.defineProperty(this,"autoPaging",{get:function(){return D},set:function(z){D=z}});var Q=0;Object.defineProperty(this,"lastBreak",{get:function(){return Q},set:function(z){Q=z}});var te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return te},set:function(z){te=z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(z){z instanceof d&&(u=z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(z){u.path=z}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(z){me=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var ce;ce=h(z),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var ce=h(z);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var L=null,he=null,ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return ne},set:function(z){L=null,he=null,ne=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var ce;if(this.ctx.font=z,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(z))!==null){var K=ce[1];ce[2];var oe=ce[3],xe=ce[4];ce[5];var De=ce[6],nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xe)[2];xe=Math.floor(nt==="px"?parseFloat(xe)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(xe)*this.pdf.getFontSize():parseFloat(xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xe);var Me=function(pe){var He,at,yt=[],bt=pe.trim();if(bt==="")return Ij;if(bt in xQ)return[xQ[bt]];for(;bt!=="";){switch(at=null,He=(bt=yQ(bt)).charAt(0)){case'"':case"'":at=eSe(bt.substring(1),He);break;default:at=tSe(bt)}if(at===null||(yt.push(at[0]),(bt=yQ(at[1]))!==""&&bt.charAt(0)!==","))return Ij;bt=bt.replace(/^,/,"")}return yt}(De);if(this.fontFaces){var Je=function(pe,He){var at=pe.getFontList(),yt=JSON.stringify(at);if(L===null||he!==yt){var bt=function(kt){var Vt=[];return Object.keys(kt).forEach(function(ve){kt[ve].forEach(function(Qe){var Z=null;switch(Qe){case"bold":Z={family:ve,weight:"bold"};break;case"italic":Z={family:ve,style:"italic"};break;case"bolditalic":Z={family:ve,weight:"bold",style:"italic"};break;case"":case"normal":Z={family:ve}}Z!==null&&(Z.ref={name:ve,style:Qe},Vt.push(Z))})}),Vt}(at);L=function(kt){for(var Vt={},ve=0;ve<kt.length;++ve){var Qe=Sj(kt[ve]),Z=Qe.family,$e=Qe.stretch,Le=Qe.style,Ve=Qe.weight;Vt[Z]=Vt[Z]||{},Vt[Z][$e]=Vt[Z][$e]||{},Vt[Z][$e][Le]=Vt[Z][$e][Le]||{},Vt[Z][$e][Le][Ve]=Qe}return Vt}(bt.concat(He)),he=yt}return L}(this.pdf,this.fontFaces),lt=Me.map(function(pe){return{family:pe,stretch:"normal",weight:oe,style:K}}),ft=function(pe,He,at){for(var yt=(at=at||{}).defaultFontFamily||"times",bt=Object.assign({},ZEe,at.genericFontFamilies||{}),kt=null,Vt=null,ve=0;ve<He.length;++ve)if(bt[(kt=Sj(He[ve])).family]&&(kt.family=bt[kt.family]),pe.hasOwnProperty(kt.family)){Vt=pe[kt.family];break}if(!(Vt=Vt||pe[yt]))throw new Error("Could not find a font-family for the rule '"+vQ(kt)+"' and default family '"+yt+"'.");if(Vt=function(Qe,Z){if(Z[Qe])return Z[Qe];var $e=$T[Qe],Le=$e<=$T.normal?-1:1,Ve=gQ(Z,Jee,$e,Le);if(!Ve)throw new Error("Could not find a matching font-stretch value for "+Qe);return Ve}(kt.stretch,Vt),Vt=function(Qe,Z){if(Z[Qe])return Z[Qe];for(var $e=Yee[Qe],Le=0;Le<$e.length;++Le)if(Z[$e[Le]])return Z[$e[Le]];throw new Error("Could not find a matching font-style for "+Qe)}(kt.style,Vt),!(Vt=function(Qe,Z){if(Z[Qe])return Z[Qe];if(Qe===400&&Z[500])return Z[500];if(Qe===500&&Z[400])return Z[400];var $e=JEe[Qe],Le=gQ(Z,Zee,$e,Qe<400?-1:1);if(!Le)throw new Error("Could not find a matching font-weight for value "+Qe);return Le}(kt.weight,Vt)))throw new Error("Failed to resolve a font for the rule '"+vQ(kt)+"'.");return Vt}(Je,lt);this.pdf.setFont(ft.ref.name,ft.ref.style)}else{var Ge="";(oe==="bold"||parseInt(oe,10)>=700||K==="bold")&&(Ge="bold"),K==="italic"&&(Ge+="italic"),Ge.length===0&&(Ge="normal");for(var ye="",We={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Me.length;qe++){if(this.pdf.internal.getFont(Me[qe],Ge,{noFallback:!0,disableWarning:!0})!==void 0){ye=Me[qe];break}if(Ge==="bolditalic"&&this.pdf.internal.getFont(Me[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ye=Me[qe],Ge="bold";else if(this.pdf.internal.getFont(Me[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ye=Me[qe],Ge="normal";break}}if(ye===""){for(var je=0;je<Me.length;je++)if(We[Me[je]]){ye=We[Me[je]];break}}ye=ye===""?"Times":ye,this.pdf.setFont(ye,Ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=!!z}})};f.prototype.setLineDash=function(k){this.lineDash=k},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(k,H){if(isNaN(k)||isNaN(H))throw Fa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var R=this.ctx.transform.applyToPoint(new i(k,H));this.path.push({type:"mt",x:R.x,y:R.y}),this.ctx.lastPoint=new i(k,H)},f.prototype.closePath=function(){var k=new i(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&ba(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){k=new i(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(k.x,k.y)},f.prototype.lineTo=function(k,H){if(isNaN(k)||isNaN(H))throw Fa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var R=this.ctx.transform.applyToPoint(new i(k,H));this.path.push({type:"lt",x:R.x,y:R.y}),this.ctx.lastPoint=new i(R.x,R.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(k,H,R,M){if(isNaN(R)||isNaN(M)||isNaN(k)||isNaN(H))throw Fa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var G=this.ctx.transform.applyToPoint(new i(R,M)),X=this.ctx.transform.applyToPoint(new i(k,H));this.path.push({type:"qct",x1:X.x,y1:X.y,x:G.x,y:G.y}),this.ctx.lastPoint=new i(G.x,G.y)},f.prototype.bezierCurveTo=function(k,H,R,M,G,X){if(isNaN(G)||isNaN(X)||isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M))throw Fa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var D=this.ctx.transform.applyToPoint(new i(G,X)),Q=this.ctx.transform.applyToPoint(new i(k,H)),te=this.ctx.transform.applyToPoint(new i(R,M));this.path.push({type:"bct",x1:Q.x,y1:Q.y,x2:te.x,y2:te.y,x:D.x,y:D.y}),this.ctx.lastPoint=new i(D.x,D.y)},f.prototype.arc=function(k,H,R,M,G,X){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M)||isNaN(G))throw Fa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var D=this.ctx.transform.applyToPoint(new i(k,H));k=D.x,H=D.y;var Q=this.ctx.transform.applyToPoint(new i(0,R)),te=this.ctx.transform.applyToPoint(new i(0,0));R=Math.sqrt(Math.pow(Q.x-te.x,2)+Math.pow(Q.y-te.y,2))}Math.abs(G-M)>=2*Math.PI&&(M=0,G=2*Math.PI),this.path.push({type:"arc",x:k,y:H,radius:R,startAngle:M,endAngle:G,counterclockwise:X})},f.prototype.arcTo=function(k,H,R,M,G){throw new Error("arcTo not implemented.")},f.prototype.rect=function(k,H,R,M){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M))throw Fa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,H),this.lineTo(k+R,H),this.lineTo(k+R,H+M),this.lineTo(k,H+M),this.lineTo(k,H),this.lineTo(k+R,H),this.lineTo(k,H)},f.prototype.fillRect=function(k,H,R,M){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M))throw Fa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var G={};this.lineCap!=="butt"&&(G.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(G.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,H,R,M),this.fill(),G.hasOwnProperty("lineCap")&&(this.lineCap=G.lineCap),G.hasOwnProperty("lineJoin")&&(this.lineJoin=G.lineJoin)}},f.prototype.strokeRect=function(k,H,R,M){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M))throw Fa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(k,H,R,M),this.stroke())},f.prototype.clearRect=function(k,H,R,M){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M))throw Fa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,H,R,M))},f.prototype.save=function(k){k=typeof k!="boolean"||k;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var M=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=M}},f.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,R=0;R<this.pdf.internal.getNumberOfPages();R++)this.pdf.setPage(R+1),this.pdf.internal.out("Q");this.pdf.setPage(H),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(k){var H,R,M,G;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))H=0,R=0,M=0,G=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(X!==null)H=parseInt(X[1]),R=parseInt(X[2]),M=parseInt(X[3]),G=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)H=parseInt(X[1]),R=parseInt(X[2]),M=parseInt(X[3]),G=parseFloat(X[4]);else{if(G=1,typeof k=="string"&&k.charAt(0)!=="#"){var D=new $ee(k);k=D.ok?D.toHex():"#000000"}k.length===4?(H=k.substring(1,2),H+=H,R=k.substring(2,3),R+=R,M=k.substring(3,4),M+=M):(H=k.substring(1,3),R=k.substring(3,5),M=k.substring(5,7)),H=parseInt(H,16),R=parseInt(R,16),M=parseInt(M,16)}}return{r:H,g:R,b:M,a:G,style:k}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(k,H,R,M){if(isNaN(H)||isNaN(R)||typeof k!="string")throw Fa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(M=isNaN(M)?void 0:M,!A.call(this)){var G=Ae(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;T.call(this,{text:k,x:H,y:R,scale:X,angle:G,align:this.textAlign,maxWidth:M})}},f.prototype.strokeText=function(k,H,R,M){if(isNaN(H)||isNaN(R)||typeof k!="string")throw Fa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){M=isNaN(M)?void 0:M;var G=Ae(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;T.call(this,{text:k,x:H,y:R,scale:X,renderingMode:"stroke",angle:G,align:this.textAlign,maxWidth:M})}},f.prototype.measureText=function(k){if(typeof k!="string")throw Fa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,R=this.pdf.internal.scaleFactor,M=H.internal.getFontSize(),G=H.getStringUnitWidth(k)*M/H.internal.scaleFactor;return new function(X){var D=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this}({width:G*=Math.round(96*R/72*1e4)/1e4})},f.prototype.scale=function(k,H){if(isNaN(k)||isNaN(H))throw Fa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var R=new c(k,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.rotate=function(k){if(isNaN(k))throw Fa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new c(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},f.prototype.translate=function(k,H){if(isNaN(k)||isNaN(H))throw Fa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var R=new c(1,0,0,1,k,H);this.ctx.transform=this.ctx.transform.multiply(R)},f.prototype.transform=function(k,H,R,M,G,X){if(isNaN(k)||isNaN(H)||isNaN(R)||isNaN(M)||isNaN(G)||isNaN(X))throw Fa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var D=new c(k,H,R,M,G,X);this.ctx.transform=this.ctx.transform.multiply(D)},f.prototype.setTransform=function(k,H,R,M,G,X){k=isNaN(k)?1:k,H=isNaN(H)?0:H,R=isNaN(R)?0:R,M=isNaN(M)?1:M,G=isNaN(G)?0:G,X=isNaN(X)?0:X,this.ctx.transform=new c(k,H,R,M,G,X)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(k,H,R,M,G,X,D,Q,te){var me=this.pdf.getImageProperties(k),L=1,he=1,ne=1,z=1;M!==void 0&&Q!==void 0&&(ne=Q/M,z=te/G,L=me.width/M*Q/M,he=me.height/G*te/G),X===void 0&&(X=H,D=R,H=0,R=0),M!==void 0&&Q===void 0&&(Q=M,te=G),M===void 0&&Q===void 0&&(Q=me.width,te=me.height);var ce=this.ctx.transform.decompose(),K=Ae(ce.rotate.shx),oe=new c,xe=(oe=(oe=(oe=oe.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale)).applyToRectangle(new l(X-H*ne,D-R*z,M*L,G*he));if(this.autoPaging){for(var De,nt=g.call(this,xe),Me=[],Je=0;Je<nt.length;Je+=1)Me.indexOf(nt[Je])===-1&&Me.push(nt[Je]);b(Me);for(var lt=Me[0],ft=Me[Me.length-1],Ge=lt;Ge<ft+1;Ge++){this.pdf.setPage(Ge);var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],We=Ge===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=Ge===1?0:qe+(Ge-2)*je;if(this.ctx.clip_path.length!==0){var He=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(De,this.posX+this.margin[3],-pe+We+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=He}var at=JSON.parse(JSON.stringify(xe));at=y([at],this.posX+this.margin[3],-pe+We+this.ctx.prevPageLastElemOffset)[0];var yt=(Ge>lt||Ge<ft)&&p.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,je,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",at.x,at.y,at.w,at.h,null,null,K),yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(k,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,K)};var g=function(k,H,R){var M=[];H=H||this.pdf.internal.pageSize.width,R=R||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var G=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":M.push(Math.floor((k.y+G)/R)+1);break;case"arc":M.push(Math.floor((k.y+G-k.radius)/R)+1),M.push(Math.floor((k.y+G+k.radius)/R)+1);break;case"qct":var X=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);M.push(Math.floor((X.y+G)/R)+1),M.push(Math.floor((X.y+X.h+G)/R)+1);break;case"bct":var D=Ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);M.push(Math.floor((D.y+G)/R)+1),M.push(Math.floor((D.y+D.h+G)/R)+1);break;case"rect":M.push(Math.floor((k.y+G)/R)+1),M.push(Math.floor((k.y+k.h+G)/R)+1)}for(var Q=0;Q<M.length;Q+=1)for(;this.pdf.internal.getNumberOfPages()<M[Q];)x.call(this);return M},x=function(){var k=this.fillStyle,H=this.strokeStyle,R=this.font,M=this.lineCap,G=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=H,this.font=R,this.lineCap=M,this.lineWidth=G,this.lineJoin=X},y=function(k,H,R){for(var M=0;M<k.length;M++)switch(k[M].type){case"bct":k[M].x2+=H,k[M].y2+=R;case"qct":k[M].x1+=H,k[M].y1+=R;default:k[M].x+=H,k[M].y+=R}return k},b=function(k){return k.sort(function(H,R){return H-R})},w=function(k,H){var R=this.fillStyle,M=this.strokeStyle,G=this.lineCap,X=this.lineWidth,D=Math.abs(X*this.ctx.transform.scaleX),Q=this.lineJoin;if(this.autoPaging){for(var te,me,L=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),ne=[],z=0;z<he.length;z++)if(he[z].x!==void 0)for(var ce=g.call(this,he[z]),K=0;K<ce.length;K+=1)ne.indexOf(ce[K])===-1&&ne.push(ce[K]);for(var oe=0;oe<ne.length;oe++)for(;this.pdf.internal.getNumberOfPages()<ne[oe];)x.call(this);b(ne);for(var xe=ne[0],De=ne[ne.length-1],nt=xe;nt<De+1;nt++){this.pdf.setPage(nt),this.fillStyle=R,this.strokeStyle=M,this.lineCap=G,this.lineWidth=D,this.lineJoin=Q;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=nt===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=nt===1?0:lt+(nt-2)*ft;if(this.ctx.clip_path.length!==0){var ye=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-Ge+Je+this.ctx.prevPageLastElemOffset),j.call(this,k,!0),this.path=ye}if(me=JSON.parse(JSON.stringify(L)),this.path=y(me,this.posX+this.margin[3],-Ge+Je+this.ctx.prevPageLastElemOffset),H===!1||nt===0){var We=(nt>xe||nt<De)&&p.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ft,null).clip().discardPath()),j.call(this,k,H),We&&this.pdf.restoreGraphicsState()}this.lineWidth=X}this.path=L}else this.lineWidth=D,j.call(this,k,H),this.lineWidth=X},j=function(k,H){if((k!=="stroke"||H||!m.call(this))&&(k==="stroke"||H||!A.call(this))){for(var R,M,G=[],X=this.path,D=0;D<X.length;D++){var Q=X[D];switch(Q.type){case"begin":G.push({begin:!0});break;case"close":G.push({close:!0});break;case"mt":G.push({start:Q,deltas:[],abs:[]});break;case"lt":var te=G.length;if(X[D-1]&&!isNaN(X[D-1].x)&&(R=[Q.x-X[D-1].x,Q.y-X[D-1].y],te>0)){for(;te>=0;te--)if(G[te-1].close!==!0&&G[te-1].begin!==!0){G[te-1].deltas.push(R),G[te-1].abs.push(Q);break}}break;case"bct":R=[Q.x1-X[D-1].x,Q.y1-X[D-1].y,Q.x2-X[D-1].x,Q.y2-X[D-1].y,Q.x-X[D-1].x,Q.y-X[D-1].y],G[G.length-1].deltas.push(R);break;case"qct":var me=X[D-1].x+2/3*(Q.x1-X[D-1].x),L=X[D-1].y+2/3*(Q.y1-X[D-1].y),he=Q.x+2/3*(Q.x1-Q.x),ne=Q.y+2/3*(Q.y1-Q.y),z=Q.x,ce=Q.y;R=[me-X[D-1].x,L-X[D-1].y,he-X[D-1].x,ne-X[D-1].y,z-X[D-1].x,ce-X[D-1].y],G[G.length-1].deltas.push(R);break;case"arc":G.push({deltas:[],abs:[],arc:!0}),Array.isArray(G[G.length-1].abs)&&G[G.length-1].abs.push(Q)}}M=H?null:k==="stroke"?"stroke":"fill";for(var K=!1,oe=0;oe<G.length;oe++)if(G[oe].arc)for(var xe=G[oe].abs,De=0;De<xe.length;De++){var nt=xe[De];nt.type==="arc"?E.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,H,!K):F.call(this,nt.x,nt.y),K=!0}else if(G[oe].close===!0)this.pdf.internal.out("h"),K=!1;else if(G[oe].begin!==!0){var Me=G[oe].start.x,Je=G[oe].start.y;J.call(this,G[oe].deltas,Me,Je),K=!0}M&&S.call(this,M),H&&O.call(this)}},I=function(k){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,R=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-R;case"top":return k+H-R;case"hanging":return k+H-2*R;case"middle":return k+H/2-R;default:return k}},_=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(H,R){this.colorStops.push([H,R])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,H,R,M,G,X,D,Q,te){for(var me=le.call(this,R,M,G,X),L=0;L<me.length;L++){var he=me[L];L===0&&(te?P.call(this,he.x1+k,he.y1+H):F.call(this,he.x1+k,he.y1+H)),ge.call(this,k,H,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}Q?O.call(this):S.call(this,D)},S=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(k,H){this.pdf.internal.out(r(k)+" "+n(H)+" m")},T=function(k){var H;switch(k.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var R,M,G,X=this.pdf.getTextDimensions(k.text),D=I.call(this,k.y),Q=_.call(this,D)-X.h,te=this.ctx.transform.applyToPoint(new i(k.x,D));if(this.autoPaging){var me=this.ctx.transform.decompose(),L=new c;L=(L=(L=L.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var he=this.ctx.transform.applyToRectangle(new l(k.x,D,X.w,X.h)),ne=L.applyToRectangle(new l(k.x,Q,X.w,X.h)),z=g.call(this,ne),ce=[],K=0;K<z.length;K+=1)ce.indexOf(z[K])===-1&&ce.push(z[K]);b(ce);for(var oe=ce[0],xe=ce[ce.length-1],De=oe;De<xe+1;De++){this.pdf.setPage(De);var nt=De===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[2],lt=Je-this.margin[0],ft=this.pdf.internal.pageSize.width-this.margin[1],Ge=ft-this.margin[3],ye=De===1?0:Me+(De-2)*lt;if(this.ctx.clip_path.length!==0){var We=this.path;R=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(R,this.posX+this.margin[3],-1*ye+nt),j.call(this,"fill",!0),this.path=We}var qe=y([JSON.parse(JSON.stringify(ne))],this.posX+this.margin[3],-ye+nt+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),G=this.lineWidth,this.lineWidth=G*k.scale);var je=this.autoPaging!=="text";if(je||qe.y+qe.h<=Je){if(je||qe.y>=nt&&qe.x<=ft){var pe=je?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||ft-qe.x)[0],He=y([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-ye+nt+this.ctx.prevPageLastElemOffset)[0],at=je&&(De>oe||De<xe)&&p.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,lt,null).clip().discardPath()),this.pdf.text(pe,He.x,He.y,{angle:k.angle,align:H,renderingMode:k.renderingMode}),at&&this.pdf.restoreGraphicsState()}}else qe.y<Je&&(this.ctx.prevPageLastElemOffset+=Je-qe.y);k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=G)}}else k.scale>=.01&&(M=this.pdf.internal.getFontSize(),this.pdf.setFontSize(M*k.scale),G=this.lineWidth,this.lineWidth=G*k.scale),this.pdf.text(k.text,te.x+this.posX,te.y+this.posY,{angle:k.angle,align:H,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(M),this.lineWidth=G)},F=function(k,H,R,M){R=R||0,M=M||0,this.pdf.internal.out(r(k+R)+" "+n(H+M)+" l")},J=function(k,H,R){return this.pdf.lines(k,H,R,null,null)},ge=function(k,H,R,M,G,X,D,Q){this.pdf.internal.out([e(a(R+k)),e(s(M+H)),e(a(G+k)),e(s(X+H)),e(a(D+k)),e(s(Q+H)),"c"].join(" "))},le=function(k,H,R,M){for(var G=2*Math.PI,X=Math.PI/2;H>R;)H-=G;var D=Math.abs(R-H);D<G&&M&&(D=G-D);for(var Q=[],te=M?-1:1,me=H;D>1e-5;){var L=me+te*Math.min(D,X);Q.push(de.call(this,k,me,L)),D-=Math.abs(L-me),me=L}return Q},de=function(k,H,R){var M=(R-H)/2,G=k*Math.cos(M),X=k*Math.sin(M),D=G,Q=-X,te=D*D+Q*Q,me=te+D*G+Q*X,L=4/3*(Math.sqrt(2*te*me)-me)/(D*X-Q*G),he=D-L*Q,ne=Q+L*D,z=he,ce=-ne,K=M+H,oe=Math.cos(K),xe=Math.sin(K);return{x1:k*Math.cos(H),y1:k*Math.sin(H),x2:he*oe-ne*xe,y2:he*xe+ne*oe,x3:z*oe-ce*xe,y3:z*xe+ce*oe,x4:k*Math.cos(R),y4:k*Math.sin(R)}},Ae=function(k){return 180*k/Math.PI},se=function(k,H,R,M,G,X){var D=k+.5*(R-k),Q=H+.5*(M-H),te=G+.5*(R-G),me=X+.5*(M-X),L=Math.min(k,G,D,te),he=Math.max(k,G,D,te),ne=Math.min(H,X,Q,me),z=Math.max(H,X,Q,me);return new l(L,ne,he-L,z-ne)},Ie=function(k,H,R,M,G,X,D,Q){var te,me,L,he,ne,z,ce,K,oe,xe,De,nt,Me,Je,lt=R-k,ft=M-H,Ge=G-R,ye=X-M,We=D-G,qe=Q-X;for(me=0;me<41;me++)oe=(ce=(L=k+(te=me/40)*lt)+te*((ne=R+te*Ge)-L))+te*(ne+te*(G+te*We-ne)-ce),xe=(K=(he=H+te*ft)+te*((z=M+te*ye)-he))+te*(z+te*(X+te*qe-z)-K),me==0?(De=oe,nt=xe,Me=oe,Je=xe):(De=Math.min(De,oe),nt=Math.min(nt,xe),Me=Math.max(Me,oe),Je=Math.max(Je,xe));return new l(Math.round(De),Math.round(nt),Math.round(Me-De),Math.round(Je-nt))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,H,R=(k=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:H}));this.prevLineDash!==R&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=R)}}})(Fr.API),function(t){var e=function(i){var l,c,u,d,f,h,A,m,p,g;for(c=[],u=0,d=(i+=l="\0\0\0\0".slice(i.length%4||4)).length;d>u;u+=4)(f=(i.charCodeAt(u)<<24)+(i.charCodeAt(u+1)<<16)+(i.charCodeAt(u+2)<<8)+i.charCodeAt(u+3))!==0?(h=(f=((f=((f=((f=(f-(g=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(A=f%85))/85)%85,c.push(h+33,A+33,m+33,p+33,g+33)):c.push(122);return function(x,y){for(var b=y;b>0;b--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(i){var l,c,u,d,f,h=String,A="length",m=255,p="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],d=0,f=(i+=l="uuuuu"[g](i[A]%5||5))[A];f>d;d+=5)c=52200625*(i[p](d)-33)+614125*(i[p](d+1)-33)+7225*(i[p](d+2)-33)+85*(i[p](d+3)-33)+(i[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[A]),h.fromCharCode.apply(h,u)},n=function(i){return i.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(i){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),l.test(i)===!1)return"";for(var c="",u=0;u<i.length;u+=2)c+=String.fromCharCode("0x"+(i[u]+i[u+1]));return c},s=function(i){for(var l=new Uint8Array(i.length),c=i.length;c--;)l[c]=i.charCodeAt(c);return(l=RT(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(i,l){var c=0,u=i||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(Fr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,h=0,A=function(m){var p=m.length,g=[],x=String.fromCharCode;for(h=0;h<p;h+=1)g.push(x(255&m.charCodeAt(h)));return g.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(A(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return A(f.responseText)}(a,s,i)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(Fr.API),function(t){function e(){return(fn.html2canvas?Promise.resolve(fn.html2canvas):_A(()=>Promise.resolve().then(()=>B6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(fn.DOMPurify?Promise.resolve(fn.DOMPurify):_A(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=ba(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},i=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(l,c){return l.__proto__=c||i.prototype,l},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},i.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var A=0;A<d.length;++A){var m=d[A],p=m.src.find(function(g){return g.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),c(this.prop.container,h)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},i.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},i.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},i.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in i.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},i.prototype.get=function(l,c){return this.then(function(){var u=l in i.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},i.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},i.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||Fr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},i.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,d),h}).then(d,f).then(function(h){return u.updateProgress(1),h})})},i.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:i.convert(Object.assign({},d),Promise.prototype),h=u.call(f,l,c);return i.convert(h,d.__proto__)},i.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},i.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},i.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return i.convert(c,this)},i.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},i.prototype.error=function(l){return this.then(function(){throw new Error(l)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Fr.getPageSize=function(l,c,u){if(ba(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,h=(""+u).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,g=0;if(A.hasOwnProperty(h))p=A[h][1]/f,g=A[h][0]/f;else try{p=u[1],g=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",g>p&&(m=g,g=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>g&&(m=g,g=p,p=m)}return{width:g,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(Sj):null;var u=new i(c);return c.worker?u:u.from(l).doCallback()}}(Fr.API),Fr.API.addJS=function(t){return wQ=t,this.internal.events.subscribe("postPutResources",function(){nC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(nC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+wQ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){nC!==void 0&&bQ!==void 0&&this.internal.out("/Names <</JavaScript "+nC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],l=n.exec(i);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var A=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+A+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var l=this.count=this.count_r({count:0},i);if(l>0&&this.line("/Count "+l),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(Fr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,i,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var h,A=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},g=4;g<m;g+=2){if(g+=A,e.indexOf(f.charCodeAt(g+1))!==-1){h=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),p={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:h,numcomponents:f.charCodeAt(g+9)};break}A=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(Fr.API),Fr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=REe(t,{checkCrc:!0}),i=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(E){for(var S=E.width,O=E.height,P=E.data,T=E.palette,F=E.depth,J=!1,ge=[],le=[],de=void 0,Ae=!1,se=0,Ie=0;Ie<T.length;Ie++){var Pe=E9(T[Ie],4),k=Pe[0],H=Pe[1],R=Pe[2],M=Pe[3];ge.push(k,H,R),M!=null&&(M===0?(se++,le.length<1&&le.push(Ie)):M<255&&(Ae=!0))}if(Ae||se>1){J=!0,le=void 0;var G=S*O;de=new Uint8Array(G);for(var X=new DataView(P.buffer),D=0;D<G;D++){var Q=jj(X,D,F),te=E9(T[Q],4)[3];de[D]=te}}else se===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:J?8:void 0,colorBytes:P,alphaBytes:de,needSMask:J,palette:ge,mask:le}}(s):c===2||c===4?function(E){for(var S=E.data,O=E.width,P=E.height,T=E.channels,F=E.depth,J=T===2?"DeviceGray":"DeviceRGB",ge=T-1,le=O*P,de=ge,Ae=le*de,se=1*le,Ie=Math.ceil(Ae*F/8),Pe=Math.ceil(se*F/8),k=new Uint8Array(Ie),H=new Uint8Array(Pe),R=new DataView(S.buffer),M=new DataView(k.buffer),G=new DataView(H.buffer),X=!1,D=0;D<le;D++){for(var Q=D*T,te=0;te<de;te++)PQ(M,jj(R,Q+te,F),D*de+te,F);var me=jj(R,Q+de,F);me<(1<<F)-1&&(X=!0),PQ(G,me,1*D,F)}return{colorSpace:J,colorsPerPixel:ge,sMaskBitsPerComponent:X?F:void 0,colorBytes:k,alphaBytes:H,needSMask:X}}(s):function(E){var S=E.data,O=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:S instanceof Uint16Array?function(P){for(var T=P.length,F=new Uint8Array(2*T),J=new DataView(F.buffer,F.byteOffset,F.byteLength),ge=0;ge<T;ge++)J.setUint16(2*ge,P[ge],!1);return F}(S):S,needSMask:!1}}(s);var f,h,A,m=a,p=m.colorSpace,g=m.colorsPerPixel,x=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==Fr.API.image_compression.NONE&&typeof RT=="function"?(_=function(E){var S;switch(E){case Fr.API.image_compression.FAST:S=11;break;case Fr.API.image_compression.MEDIUM:S=13;break;case Fr.API.image_compression.SLOW:S=14;break;default:S=12}return S}(n),f=this.decode.FLATE_DECODE,h="/Predictor ".concat(_," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(i),t=EQ(y,Math.ceil(i*g*d/8),g,d,n),w&&(A=EQ(b,Math.ceil(i*x/8),1,x,n))):(f=void 0,h=void 0,t=y,w&&(A=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(A&&this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),{alias:r,data:t,index:e,filter:f,decodeParameters:h,transparency:I,palette:j,sMask:A,predictor:_,width:i,height:l,bitsPerComponent:d,sMaskBitsPerComponent:x,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new sSe(e),i=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:l},d=new Bj(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(Fr.API),od.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},od.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Fa.log("bit decode error:"+r)}},od.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[i+4*l]=c.blue,this.data[i+4*l+1]=c.green,this.data[i+4*l+2]=c.red,this.data[i+4*l+3]=255}r!==0&&(this.pos+=4-r)}},od.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},od.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},od.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},od.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},od.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},od.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=i}},od.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new od(e,!1),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new Bj(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Fr.API),kQ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new kQ(e),i=s.width,l=s.height,c={data:s.getData(),width:i,height:l},u=new Bj(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(Fr.API),Fr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],A=n[u+3];s[l++]=d,s[l++]=f,s[l++]=h,i[c++]=A}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Fr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Og=Fr.API,aC=Og.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,h=0,A=t.length,m=0,p=l[0]||c,g=[];for(r=0;r<A;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?g.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ba(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,g.push((l[n]||p)/c+h)),m=n;return g},NQ=Og.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Og.processArabic&&(t=Og.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:aC.apply(this,arguments).reduce(function(s,i){return s+i},0)},CQ=function(t,e,r,n){for(var a=[],s=0,i=t.length,l=0;s!==i&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==i;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},_Q=function(t,e,r){r||(r={});var n,a,s,i,l,c,u,d=[],f=[d],h=r.textIndent||0,A=0,m=0,p=t.split(" "),g=aC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var x=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=NQ.apply(this,[x,r])}for(s=0,i=p.length;s<i;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),h+A+(m=(a=aC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=CQ.apply(this,[n,a,e-(h+A),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),h=m+c,A=g}else d.push(n),h+=A+m,A=g}return u=c?function(w,j){return(j?x:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},Og.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),h="Unicode";return f.metadata[h]?{widths:f.metadata[h].widths||{0:1},kerning:f.metadata[h].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(_Q.apply(this,[n[l],i,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},l=t.__fontmetrics__.compress=function(h){var A,m,p,g,x=["{"];for(var y in h){if(A=h[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=i(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof A=="number")A<0?(p=i(A).slice(3),g="-"):(p=i(A).slice(2),g=""),p=g+p.slice(0,-1)+a[p.slice(-1)];else{if(ba(A)!=="object")throw new Error("Don't know what to do with value type "+ba(A)+".");p=l(A)}x.push(m+p)}return x.push("}"),x.join("")},c=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,m,p,g,x={},y=1,b=x,w=[],j="",I="",_=h.length-1,E=1;E<_;E+=1)(g=h[E])=="'"?A?(p=A.join(""),A=void 0):A=[]:A?A.push(g):g=="{"?(w.push([b,p]),b={},p=void 0):g=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):g=="-"?y=-1:p===void 0?n.hasOwnProperty(g)?(j+=n[g],p=parseInt(j,16)*y,y=1,j=""):j+=g:n.hasOwnProperty(g)?(I+=n[g],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=g;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var A=h.font,m=f.Unicode[A.postScriptName];m&&(A.metadata.Unicode={},A.metadata.Unicode.widths=m.widths,A.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[A.postScriptName];p&&(A.metadata.Unicode.encoding=p,A.encoding=p.codePages[0])}])}(Fr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(D_(l)),i.metadata=t.API.TTFFont.open(l),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(Fr),Fr.API.addSvgAsImage=function(t,e,r,n,a,s,i,l){if(isNaN(e)||isNaN(r))throw Fa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Fa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(fn.canvg?Promise.resolve(fn.canvg):_A(()=>import("./index.es-BhibQPhP.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,i,l)})},Fr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Fr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(i),c=[],u=0,d=0,f=0;function h(m,p){var g,x=!1;for(g=0;g<m.length;g+=1)m[g]===p&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var A=l.length;for(f=0;f<A;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(ba(t)==="object"){for(a in t)if(s=t[a],h(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Fr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,i){for(var l,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(l=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(l),i.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(i.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var i,l,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(l=Object.keys(s).sort(function(A,m){return A-m})).length;f<h;f++)i=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,h=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),A="",m=0;m<h.length;m++)A+=String.fromCharCode(h[m]);var p=u();d({data:A,addLength1:!0,objectId:p}),c("endobj");var g=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+nx(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+nx(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+nx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(i){var l=i.font,c=i.out,u=i.newObject,d=i.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,h="",A=0;A<f.length;A++)h+=String.fromCharCode(f[A]);var m=u();d({data:h,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+nx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+nx(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,A=f.activeFontKey,m=f.fonts,p=A,g="",x=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=A,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)m[p].metadata.hasOwnProperty("cmap")&&(i=m[p].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),i||y[x].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?g+=y[x]:g+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=h(g,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(g,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var i=s.text||"",l=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?l.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):l.push(a(Object.assign({},c,{text:i[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:i})).text}])}(Fr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Fr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,i,l,c,u,d,f=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(P){var T=P.charCodeAt(),F=T>>8,J=p[F];return J!==void 0?f[256*J+(255&T)]:F===252||F===253?"AL":x.test(F)?"L":F===8?"R":"N"},j=function(P){for(var T,F=0;F<P.length;F++){if((T=w(P.charAt(F)))==="L")return!1;if(T==="R")return!0}return!1},I=function(P,T,F,J){var ge,le,de,Ae,se=T[J];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(se="AN");break;case"AL":y=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":J<1||J+1>=T.length||(ge=F[J-1])!=="EN"&&ge!=="AN"||(le=T[J+1])!=="EN"&&le!=="AN"?se="N":y&&(le="AN"),se=le===ge?le:"N";break;case"ES":se=(ge=J>0?F[J-1]:"B")==="EN"&&J+1<T.length&&T[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&F[J-1]==="EN"){se="EN";break}if(y){se="N";break}for(de=J+1,Ae=T.length;de<Ae&&T[de]==="ET";)de++;se=de<Ae&&T[de]==="EN"?"EN":"N";break;case"NSM":if(i&&!l){for(Ae=T.length,de=J+1;de<Ae&&T[de]==="NSM";)de++;if(de<Ae){var Ie=P[J],Pe=Ie>=1425&&Ie<=2303||Ie===64286;if(ge=T[de],Pe&&(ge==="R"||ge==="AL")){se="R";break}}}se=J<1||(ge=T[J-1])==="B"?"N":F[J-1];break;case"B":y=!1,a=!0,se=b;break;case"S":s=!0,se="N"}return se},_=function(P,T,F){var J=P.split("");return F&&E(J,F,{hiLevel:b}),J.reverse(),T&&T.reverse(),J.join("")},E=function(P,T,F){var J,ge,le,de,Ae,se=-1,Ie=P.length,Pe=0,k=[],H=b?A:h,R=[];for(y=!1,a=!1,s=!1,ge=0;ge<Ie;ge++)R[ge]=w(P[ge]);for(le=0;le<Ie;le++){if(Ae=Pe,k[le]=I(P,R,k,le),J=240&(Pe=H[Ae][m[k[le]]]),Pe&=15,T[le]=de=H[Pe][5],J>0)if(J===16){for(ge=se;ge<le;ge++)T[ge]=1;se=-1}else se=-1;if(H[Pe][6])se===-1&&(se=le);else if(se>-1){for(ge=se;ge<le;ge++)T[ge]=de;se=-1}R[le]==="B"&&(T[le]=0),F.hiLevel|=de}s&&function(M,G,X){for(var D=0;D<X;D++)if(M[D]==="S"){G[D]=b;for(var Q=D-1;Q>=0&&M[Q]==="WS";Q--)G[Q]=b}}(R,T,Ie)},S=function(P,T,F,J,ge){if(!(ge.hiLevel<P)){if(P===1&&b===1&&!a)return T.reverse(),void(F&&F.reverse());for(var le,de,Ae,se,Ie=T.length,Pe=0;Pe<Ie;){if(J[Pe]>=P){for(Ae=Pe+1;Ae<Ie&&J[Ae]>=P;)Ae++;for(se=Pe,de=Ae-1;se<de;se++,de--)le=T[se],T[se]=T[de],T[de]=le,F&&(le=F[se],F[se]=F[de],F[de]=le);Pe=Ae}Pe++}}},O=function(P,T,F){var J=P.split(""),ge={hiLevel:b};return F||(F=[]),E(J,F,ge),function(le,de,Ae){if(Ae.hiLevel!==0&&d)for(var se,Ie=0;Ie<le.length;Ie++)de[Ie]===1&&(se=g.indexOf(le[Ie]))>=0&&(le[Ie]=g[se+1])}(J,F,ge),S(2,J,T,F,ge),S(1,J,T,F,ge),J.join("")};return this.__bidiEngine__.doBidiReorder=function(P,T,F){if(function(ge,le){if(le)for(var de=0;de<ge.length;de++)le[de]=de;l===void 0&&(l=j(ge)),u===void 0&&(u=j(ge))}(P,T),i||!c||u)if(i&&c&&l^u)b=l?1:0,P=_(P,T,F);else if(!i&&c&&u)b=l?1:0,P=O(P,T,F),P=_(P,T);else if(!i||l||c||u){if(i&&!c&&l^u)P=_(P,T),l?(b=0,P=O(P,T,F)):(b=1,P=O(P,T,F),P=_(P,T));else if(i&&l&&!c&&u)b=1,P=O(P,T,F),P=_(P,T);else if(!i&&!c&&l^u){var J=d;l?(b=1,P=O(P,T,F),b=0,d=!1,P=O(P,T,F),d=J):(b=0,P=O(P,T,F),P=_(P,T),b=1,d=!1,P=O(P,T,F),d=J,P=_(P,T))}}else b=0,P=O(P,T,F);else b=l?1:0,P=O(P,T,F);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var i=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(i=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?i.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):i.push([r.doBidiReorder(a[l])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Fr),Fr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new H0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ySe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new iSe(this.contents),this.head=new lSe(this),this.name=new ASe(this),this.cmap=new tte(this),this.toUnicode={},this.hhea=new cSe(this),this.maxp=new hSe(this),this.hmtx=new mSe(this),this.post=new dSe(this),this.os2=new uSe(this),this.loca=new vSe(this),this.glyf=new pSe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,l,c,u;for(u=[],i=0,l=(c=this.bbox).length;i<l;i++)e=c[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,i,l;for(i=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Kd,H0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,i,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),iSe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,i,l,c,u,d,f,h,A,m,p;for(p in A=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(A)/c),i=Math.floor(f/c),d=16*A-f,(a=new H0).writeInt(this.scalarType),a.writeShort(A),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*A,u=a.pos+s,l=null,m=[],r)for(h=r[p],a.writeString(p),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),m=m.concat(h),p==="head"&&(l=u),u+=h.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,i;for(r=rte.call(r);r.length%4;)r.push(0);for(s=new H0(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),oSe={}.hasOwnProperty,Of=function(t,e){for(var r in e)oSe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Kd=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new H0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),FQ=function(){function t(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(A=e.readUInt16(),h=A/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=h?w<h:w>h;c=0<=h?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=x=0,b=s.length;x<b;c=++x)for(g=s[c],n=y=m=p[c];m<=g?y<=g:y>=g;n=m<=g?++y:--y)d[c]===0?i=n+u[c]:(i=l[d[c]/2+(n-m)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}e.pos=f}return t.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S,O,P,T,F,J,ge,le,de,Ae,se,Ie,Pe,k,H,R,M,G,X,D,Q,te,me,L;switch(J=new H0,i=Object.keys(e).sort(function(he,ne){return he-ne}),r){case"macroman":for(p=0,g=function(){var he=[];for(m=0;m<256;++m)he.push(0);return he}(),y={0:0},s={},ge=0,se=i.length;ge<se;ge++)y[Q=e[a=i[ge]]]==null&&(y[Q]=++p),s[a]={old:e[a],new:y[e[a]]},g[a]=y[e[a]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(g),{charMap:s,subtable:J.data,maxGlyphID:p+1};case"unicode":for(T=[],f=[],b=0,y={},n={},x=u=null,le=0,Ie=i.length;le<Ie;le++)y[j=e[a=i[le]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,x!=null&&l===u||(x&&f.push(x),T.push(a),u=l),x=a;for(x&&f.push(x),f.push(65535),T.push(65535),O=2*(S=T.length),E=2*Math.pow(Math.log(S)/Math.LN2,2),h=Math.log(E/2)/Math.LN2,_=2*S-E,c=[],I=[],A=[],m=de=0,Pe=T.length;de<Pe;m=++de){if(P=T[m],d=f[m],P===65535){c.push(0),I.push(0);break}if(P-(F=n[P].new)>=32768)for(c.push(0),I.push(2*(A.length+S-m)),a=Ae=P;P<=d?Ae<=d:Ae>=d;a=P<=d?++Ae:--Ae)A.push(n[a].new);else c.push(F-P),I.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*S+2*A.length),J.writeUInt16(0),J.writeUInt16(O),J.writeUInt16(E),J.writeUInt16(h),J.writeUInt16(_),X=0,k=f.length;X<k;X++)a=f[X],J.writeUInt16(a);for(J.writeUInt16(0),D=0,H=T.length;D<H;D++)a=T[D],J.writeUInt16(a);for(te=0,R=c.length;te<R;te++)l=c[te],J.writeUInt16(l);for(me=0,M=I.length;me<M;me++)w=I[me],J.writeUInt16(w);for(L=0,G=A.length;L<G;L++)p=A[L],J.writeUInt16(p);return{charMap:n,subtable:J.data,maxGlyphID:b+1}}},t}(),tte=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new FQ(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=FQ.encode(e,r),(a=new H0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),cSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),uSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),dSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var i,l,c;for(c=[],s=i=0,l=this.file.maxp.numGlyphs;0<=l?i<l:i>l;s=0<=l?++i:--i)c.push(e.readUInt32());return c}).call(this)}},t}(),fSe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ASe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,i,l,c,u,d,f,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),i=new fSe(u,a),c[h=a.nameID]==null&&(c[h]=[]),c[a.nameID].push(i);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),hSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),mSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,i,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,h;for(h=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],h.push(s.advance);return h}).call(this),n=this.widths[this.widths.length-1],c=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),rte=[].slice,pSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,i,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,i=(l=new H0(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=i===-1?new xSe(l,u,f,c,d):new gSe(l,i,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,i,l,c;for(i=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(i.length),a&&(i=i.concat(a.encode(n)));return s.push(i.length),{table:i,offsets:s}},t}(),gSe=function(){function t(e,r,n,a,s,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),xSe=function(){function t(e,r,n,a,s){var i,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;l=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&l;)i.pos+=1&l?4:2,128&l?i.pos+=8:64&l?i.pos+=4:8&l&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new H0(rte.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),vSe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Of(t,Kd),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,i=0;i<n.length;++i)if(n[i]=a,s<r.length&&r[s]==i){++s,n[i]=a;var l=this.offsets[i],c=this.offsets[i+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),ySe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,i,l,c;for(a={},i=0,l=e.length;i<l;i++)a[s=e[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,i,l,c,u,d,f,h,A,m,p,g,x;for(a in n=tte.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),A={0:0},x=n.charMap)A[(c=x[a]).old]=c.new;for(m in h=n.maxGlyphID,i)m in A||(A[m]=h++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(A),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(i,p,A),u=this.font.loca.encode(s.offsets,p),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Fr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+e.convert(i));return s.push(">>"),s.join(`
`)}return""+r},e}();const KT=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:YEe,AcroFormAppearance:Mr,AcroFormButton:Ti,AcroFormCheckBox:Yy,AcroFormChoiceField:np,AcroFormComboBox:sp,AcroFormEditBox:Wy,AcroFormListBox:ap,AcroFormPasswordField:Jy,AcroFormPushButton:Xy,AcroFormRadioButton:ip,AcroFormTextField:j0,GState:Yb,ShadingPattern:n0,TilingPattern:Gm,default:Fr,jsPDF:Fr},Symbol.toStringTag,{value:"Module"}));async function OQ(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:dr.now()};return _n(ht(ke,"inventory_batches"),e)}async function nte(t,e){await nn($t(ke,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:dr.now()})}async function bSe(t,e){const r=er(ht(ke,"batch_allocations"),ir("saleDate",">=",t),ir("saleDate","<=",e)),n=await Lt(r),a={};return n.forEach(s=>{const i=s.data(),l=i.batchId;a[l]||(a[l]={batchId:i.batchId,batchDate:i.batchDate,productName:i.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(i.quantity||0),a[l].amountCharged+=Number(i.amountCharged||0)}),Object.values(a)}async function ate(t){const e=$t(ke,"salesV2",t),r=await li(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Qi(ke,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let i=0;return await Qi(ke,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>$t(ke,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,h],A)=>{const m=d[A];if(!m.exists())return;const p=m.data(),g=Number((p==null?void 0:p.remaining)??0),x=Number((g+Number(h||0)).toFixed(3));l.update(u[A],{remaining:x}),i+=Number(h||0)}),l.delete(e)}),{restored:i}}var ste={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},DQ=Lo.createContext&&Lo.createContext(ste),wSe=["attr","size","title"];function NSe(t,e){if(t==null)return{};var r=CSe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JE.apply(this,arguments)}function RQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RQ(Object(r),!0).forEach(function(n){_Se(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RQ(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Se(t,e,r){return e=ESe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ESe(t){var e=SSe(t,"string");return typeof e=="symbol"?e:e+""}function SSe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ite(t){return t&&t.map((e,r)=>Lo.createElement(e.tag,ZE({key:r},e.attr),ite(e.child)))}function ISe(t){return e=>Lo.createElement(jSe,JE({attr:ZE({},t.attr)},e),ite(t.child))}function jSe(t){var e=r=>{var{attr:n,size:a,title:s}=t,i=NSe(t,wSe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Lo.createElement("svg",JE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,i,{className:c,style:ZE(ZE({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Lo.createElement("title",null,s),t.children)};return DQ!==void 0?Lo.createElement(DQ.Consumer,null,r=>e(r)):e(ste)}function BSe(t){return ISe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function pc({onClick:t,loading:e,className:r=""}){return o.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[o.jsx(BSe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function gc(){const[t,e]=v.useState(0),r=v.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const vu=t=>Math.round((Number(t)||0)*100)/100,sC=t=>Math.round((Number(t)||0)*1e3)/1e3,xm=t=>Number(t??0).toFixed(2),iC=t=>Number(t??0).toFixed(3),MQ=(t,e)=>{var n;const r=t.date??((n=t.timestamp)!=null&&n.toDate?Er(t.timestamp.toDate(),"yyyy-MM-dd"):"");return r?Array.isArray(t.items)&&t.items.length>0?t.items.map((a,s)=>{const i=Number((a==null?void 0:a.qty)??0),l=Number((a==null?void 0:a.lineFinal)??0)||Math.max(0,Number((a==null?void 0:a.unitPrice)||0)*i-Number((a==null?void 0:a.discount)||0));return{id:`${e}#${s}`,productName:String((a==null?void 0:a.productName)??"(sin nombre)"),quantity:i,amount:vu(l),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(a==null?void 0:a.allocations)?a.allocations:t.allocations,avgUnitCost:Number((a==null?void 0:a.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((a==null?void 0:a.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]:[]};function PSe({role:t,roles:e}){const[r,n]=v.useState([]),[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),[m,p]=v.useState(null),[g,x]=v.useState(0),[y,b]=v.useState(0),[w,j]=v.useState(""),[I,_]=v.useState(0),[E,S]=v.useState("0"),O=Er(new Date,"yyyy-MM-dd"),[P,T]=v.useState(O),[F,J]=v.useState(O),[ge,le]=v.useState(!1),[de,Ae]=v.useState(!1),[se,Ie]=v.useState(!1),[Pe,k]=v.useState(""),H=v.useRef(null),{refreshKey:R,refresh:M}=gc(),G=e&&e.length?e:t,X=Jr(G,"admin"),D=({title:Me,open:Je,onToggle:lt,right:ft})=>o.jsxs("button",{type:"button",onClick:lt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[o.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[o.jsx("span",{className:"font-semibold truncate",children:Me}),ft?o.jsx("span",{className:"text-xs text-gray-600",children:ft}):null]}),o.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:Je?"":"+"})]});v.useEffect(()=>{if(!P||!F)return;u(!0);const Me=er(ht(ke,"salesV2"),ir("date",">=",P),ir("date","<=",F)),Je=Od(Me,lt=>{const ft=[];lt.forEach(Ge=>{const ye=MQ(Ge.data(),Ge.id);ft.push(...ye)}),n(ft),u(!1)},lt=>{console.error("Error cargando ventas por periodo:",lt),n([]),u(!1)});return()=>Je()},[P,F,R]),v.useEffect(()=>{if(!P||!F)return;const Me=er(ht(ke,"salesV2"),ir("status","==","FLOTANTE"),ir("date",">=",P),ir("date","<=",F)),Je=Od(Me,lt=>{const ft=[];lt.forEach(Ge=>{const ye=MQ(Ge.data(),Ge.id);ft.push(...ye)}),s(ft)});return()=>Je()},[P,F,R]),v.useEffect(()=>{(async()=>{const Je=er(ht(ke,"daily_closures"),ir("date","==",O)),lt=await Lt(Je);if(lt.empty)l(null);else{const ft=lt.docs[0];l({id:ft.id,...ft.data()})}})()},[O,R]);const Q=Lo.useMemo(()=>{let Me=[];if(h==="FLOTANTE"){const lt=[...r,...a],ft=new Map;for(const Ge of lt)Ge.status==="FLOTANTE"&&ft.set(Ge.id,Ge);Me=Array.from(ft.values())}else if(h==="ALL"){const lt=[...r,...a],ft=new Map;for(const Ge of lt)ft.set(Ge.id,Ge);Me=Array.from(ft.values())}else Me=r.filter(lt=>lt.status==="PROCESADA");const Je=Pe.trim().toLowerCase();if(Je){const lt=Ge=>String(Ge||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),ft=lt(Je);Me=Me.filter(Ge=>lt(Ge.productName).includes(ft))}return Me},[h,r,a,Pe]);vu(Q.reduce((Me,Je)=>Me+(Je.amountSuggested||0),0));const te=vu(Q.reduce((Me,Je)=>Me+(Je.amount||0),0)),me=sC(Q.reduce((Me,Je)=>Me+(Je.quantity||0),0)),L=vu(Q.reduce((Me,Je)=>Me+Number(Je.cogsAmount??0),0)),he=vu(te-L),ne={};Q.forEach(Me=>{const Je=Me.productName||"(sin nombre)";ne[Je]||(ne[Je]={totalQuantity:0,totalAmount:0}),ne[Je].totalQuantity=sC(ne[Je].totalQuantity+(Me.quantity||0)),ne[Je].totalAmount=vu(ne[Je].totalAmount+(Me.amount||0))});const z=Object.entries(ne).map(([Me,Je])=>({productName:Me,totalQuantity:Je.totalQuantity,totalAmount:Je.totalAmount})),ce=async()=>{try{const Me=Q.filter(qe=>qe.status==="FLOTANTE"),Je=Me.length>0?Me:r.filter(qe=>qe.status!=="PROCESADA");if(Je.length===0){f("No hay ventas para procesar.");return}const lt={totalCharged:vu(Je.reduce((qe,je)=>qe+(je.amount||0),0)),totalSuggested:vu(Je.reduce((qe,je)=>qe+(je.amountSuggested||0),0)),totalUnits:sC(Je.reduce((qe,je)=>qe+(je.quantity||0),0)),totalCOGS:vu(Je.reduce((qe,je)=>qe+Number(je.cogsAmount??0),0))},ft=vu(lt.totalCharged-lt.totalSuggested),Ge=vu(lt.totalCharged-lt.totalCOGS),ye=await _n(ht(ke,"daily_closures"),{date:O,createdAt:dr.now(),periodStart:P,periodEnd:F,totalCharged:lt.totalCharged,totalSuggested:lt.totalSuggested,totalDifference:ft,totalUnits:lt.totalUnits,totalCOGS:lt.totalCOGS,grossProfit:Ge,products:Je.map(qe=>({productName:qe.productName,quantity:qe.quantity,amount:qe.amount})),salesV2:Je.map(qe=>({id:qe.id,productName:qe.productName,quantity:qe.quantity,amount:qe.amount,amountSuggested:qe.amountSuggested,userEmail:qe.userEmail,clientName:qe.clientName,amountReceived:qe.amountReceived,change:qe.change,status:qe.status,cogsAmount:qe.cogsAmount??0,avgUnitCost:qe.avgUnitCost??null,allocations:qe.allocations??[],date:qe.date})),productSummary:Object.entries(Je.reduce((qe,je)=>{const pe=je.productName||"(sin nombre)";return qe[pe]||(qe[pe]={totalQuantity:0,totalAmount:0}),qe[pe].totalQuantity=sC(qe[pe].totalQuantity+(je.quantity||0)),qe[pe].totalAmount=vu(qe[pe].totalAmount+(je.amount||0)),qe},{})).map(([qe,je])=>({productName:qe,totalQuantity:je.totalQuantity,totalAmount:je.totalAmount}))}),We=eg(ke);Je.forEach(qe=>{We.update($t(ke,"salesV2",qe.id.split("#")[0]),{status:"PROCESADA",closureId:ye.id,closureDate:O})}),await We.commit(),f(` Cierre guardado. Ventas procesadas: ${Je.length}.`)}catch(Me){console.error(Me),f(" Error al guardar el cierre.")}},K=async Me=>{if(!X){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await nn($t(ke,"salesV2",Me.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(Je){console.error(Je),f(" No se pudo revertir la venta.")}},oe=Me=>{if(!X){f(" No tienes permisos para editar esta venta.");return}p(Me),x(Me.quantity),b(Me.amount),j(Me.clientName),_(Me.amountReceived),S(Me.change)},xe=async()=>{if(!X){f(" No tienes permisos para guardar cambios.");return}if(m)try{await nn($t(ke,"salesV2",m.id.split("#")[0]),{quantity:g,amount:y,amountCharged:y,clientName:w,amountReceived:I,change:E}),p(null),f(" Venta actualizada.")}catch(Me){console.error(Me),f(" No se pudo actualizar la venta.")}},De=async Me=>{if(!X){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Je}=await ate(Me.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(Je).toFixed(2)}.`)}catch(Je){console.error(Je),f(" No se pudo eliminar la venta.")}},nt=async()=>{if(H.current){H.current.classList.add("force-pdf-colors"),H.current.classList.add("pdf-print-mode");try{const Je=(await tg(H.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),lt=new Fr;lt.addImage(Je,"PNG",10,10,190,0),lt.save(`cierre_${O}.pdf`)}finally{H.current.classList.remove("pdf-print-mode"),H.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[o.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",P,"  ",F]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(pc,{onClick:M})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx(D,{title:"Filtros",open:ge,onToggle:()=>le(Me=>!Me),right:o.jsxs("span",{className:"ml-1",children:[P,"  ",F,h!=="ALL"?`  ${h}`:"",Pe.trim()?`  "${Pe.trim()}"`:""]})}),ge&&o.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:P,onChange:Me=>T(Me.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:F,onChange:Me=>J(Me.target.value)})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:h,onChange:Me=>A(Me.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),o.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:Pe,onChange:Me=>k(Me.target.value)})]})]})})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:H,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[Q.map(Me=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Me.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Me.status})}),o.jsx("td",{className:"border p-1",children:Me.productName}),o.jsx("td",{className:"border p-1",children:iC(Me.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",xm(Me.amount)]}),o.jsx("td",{className:"border p-1",children:Me.date}),o.jsx("td",{className:"border p-1",children:Me.userEmail}),o.jsx("td",{className:"border p-1",children:Me.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:X?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>oe(Me),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>De(Me.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):Me.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:X?o.jsx("button",{onClick:()=>K(Me.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},Me.id)),Q.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[o.jsx(D,{title:"Ventas",open:de,onToggle:()=>Ae(Me=>!Me),right:o.jsxs("span",{className:"ml-1",children:[Q.length,"  C$",xm(te)]})}),de&&o.jsxs("div",{className:"mt-3 space-y-3",children:[Q.map(Me=>o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:Me.productName}),o.jsx("div",{className:"text-xs text-gray-500",children:Me.date})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",xm(Me.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Me.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Me.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cantidad"}),o.jsx("strong",{children:iC(Me.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:Me.userEmail})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("strong",{className:"text-right break-all",children:Me.clientName||""})]}),o.jsx("div",{className:"pt-2",children:Me.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:X?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>oe(Me),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>De(Me.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):Me.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:X?o.jsx("button",{onClick:()=>K(Me.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},Me.id)),Q.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-2",children:[o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:iC(me)})]}),o.jsxs("div",{children:["Total cobrado: ",o.jsxs("strong",{children:["C$",xm(te)]})]})]}),(L>0||he!==te)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Calculo a Precio compra:"," ",o.jsxs("strong",{children:["C$",xm(L)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",xm(he)]})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx(D,{title:"Consolidado por producto",open:se,onToggle:()=>Ie(Me=>!Me),right:o.jsx("span",{className:"ml-1",children:z.length})}),se&&o.jsx("div",{className:"mt-3",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsxs("tbody",{children:[z.map(Me=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:Me.productName}),o.jsx("td",{className:"border p-1",children:iC(Me.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",xm(Me.totalAmount)]})]},Me.productName)),z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[X&&o.jsx("button",{onClick:ce,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),o.jsx("button",{onClick:nt,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),m&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[m.productName,"  ",m.userEmail]}),o.jsx("label",{className:"text-sm",children:"Cantidad"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:g,onChange:Me=>x(parseFloat(Me.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:y,onChange:Me=>b(parseFloat(Me.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:Me=>j(Me.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:Me=>_(parseFloat(Me.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:E,onChange:Me=>S(Me.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>p(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:xe,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const fu=t=>Number(t??0).toFixed(2),Dg=t=>Number(t??0).toFixed(3);function TSe(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const E=await Lt(er(ht(ke,"salesV2"),ir("closureId","==",I.id)));if(!E.empty){const S=eg(ke);E.forEach(O=>{S.update($t(ke,"salesV2",O.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await S.commit()}}await Cn($t(ke,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),h(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(E){console.error(E),h(" No se pudo eliminar el cierre.")}},[e,r]=v.useState(Er(lZ(new Date),"yyyy-MM-dd")),[n,a]=v.useState(Er(new Date,"yyyy-MM-dd")),[s,i]=v.useState(!0),[l,c]=v.useState([]),[u,d]=v.useState(null),[f,h]=v.useState(""),A=v.useRef(null),m=async()=>{try{i(!0);const I=er(ht(ke,"daily_closures"),ir("date",">=",e),ir("date","<=",n)),_=await Lt(I),E=[];_.forEach(S=>E.push({id:S.id,...S.data()})),E.sort((S,O)=>S.date<O.date?1:S.date>O.date?-1:0),c(E)}catch(I){console.error(I),h(" Error cargando el historial.")}finally{i(!1)}};v.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},g=v.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),E=Number(u.totalCharged??0),S=Number(u.totalDifference??(isFinite(E-_)?E-_:0)),O=Number(u.totalCOGS??0),P=Number(u.grossProfit??(isFinite(E-O)?E-O:0));return{units:I,sug:_,chg:E,diff:S,cogs:O,profit:P}},[u]),x=async()=>{if(!A.current||!u)return;const I=A.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:E}]=await Promise.all([_A(()=>Promise.resolve().then(()=>B6),void 0),_A(()=>Promise.resolve().then(()=>KT),void 0)]),O=(await _(I,{backgroundColor:"#ffffff",onclone:F=>{const J=F.defaultView;F.body.querySelectorAll("*").forEach(le=>{const de=J.getComputedStyle(le);de.color&&(le.style.color=de.color),de.backgroundColor&&de.backgroundColor!=="rgba(0, 0, 0, 0)"&&(le.style.backgroundColor=de.backgroundColor),de.borderColor&&(le.style.borderColor=de.borderColor)})}})).toDataURL("image/png"),{jsPDF:P}=await _A(async()=>{const{jsPDF:F}=await Promise.resolve().then(()=>KT);return{jsPDF:F}},void 0),T=new P;T.addImage(O,"PNG",10,10,190,0),T.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),o.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?o.jsx("p",{children:"Cargando..."}):l.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Monto de venta"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsx("tbody",{children:l.map(I=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.date}),o.jsx("td",{className:"border p-1",children:Dg(I.totalUnits)}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.totalCharged)]}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.totalCOGS)]}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),o.jsx("td",{className:"border p-1",children:o.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),o.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:x,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:A,className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:o.jsxs("div",{children:["Total Libras/Unidades: ",o.jsx("strong",{children:Dg(g.units)})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[o.jsxs("div",{children:["Monto al costo:"," ",o.jsxs("strong",{children:["C$",fu(g.cogs)]})]}),o.jsxs("div",{children:["Ganancia sin gastos:"," ",o.jsxs("strong",{children:["C$",fu(g.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto de ventas"}),o.jsx("th",{className:"border p-2",children:"Monto al costo"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),o.jsx("tbody",{children:u.salesV2.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Dg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.amount)]}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.cogsAmount)]}),o.jsx("td",{className:"border p-1",children:I.date??""}),o.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Paga con"}),o.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),o.jsx("tbody",{children:u.sales.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),o.jsx("td",{className:"border p-1",children:Dg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.amount)]}),o.jsx("td",{className:"border p-1",children:I.userEmail??""}),o.jsx("td",{className:"border p-1",children:I.clientName??""}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.amountReceived)]}),o.jsx("td",{className:"border p-1",children:typeof I.change=="number"?fu(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Cantidad"}),o.jsx("th",{className:"border p-2",children:"Monto"})]})}),o.jsx("tbody",{children:u.products.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Dg(I.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.amount)]})]},_))})]})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),o.jsx("tbody",{children:u.productSummary.map((I,_)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:I.productName}),o.jsx("td",{className:"border p-1",children:Dg(I.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",fu(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&o.jsx("p",{className:"mt-3 text-sm",children:f})]})}function kSe(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,s]=v.useState(""),[i,l]=v.useState(!1),[c,u]=v.useState(["vendedor_pollo"]),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState([]),[g,x]=v.useState(!0),[y,b]=v.useState(null),[w,j]=v.useState(["vendedor_pollo"]),[I,_]=v.useState(""),[E,S]=v.useState(""),[O,P]=v.useState(!1),[T,F]=v.useState([]),J=M=>!M||M==="vendedor"?"vendedor_pollo":M==="admin"||M==="supervisor_pollo"||M==="contador"||M==="vendedor_pollo"||M==="vendedor_ropa"||M==="vendedor_dulces"?M:"vendedor_pollo",ge=M=>M?Array.isArray(M)?M.map(G=>J(String(G))):[J(String(M))]:["vendedor_pollo"],le=async()=>{x(!0);const M=await Lt(ht(ke,"users")),G=[];M.forEach(X=>{const D=X.data();G.push({id:X.id,email:D.email??"",name:D.name??"",roles:ge(D.roles??D.role),sellerCandyId:D.sellerCandyId??""})}),p(G),x(!1)},de=async()=>{try{const M=await Lt(ht(ke,"sellers_candies")),G=[];M.forEach(X=>{const D=X.data();G.push({id:X.id,name:D.name??"(sin nombre)",branchLabel:D.branch??"",commissionPercent:Number(D.commissionPercent??0)})}),F(G)}catch(M){console.error("Error cargando sellers_candies:",M)}};v.useEffect(()=>{le(),de()},[]);const Ae=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),A("")},se=async M=>{if(M.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const L=$t(ke,"users",y),he=w.length?w:["vendedor_pollo"],ne=he.includes("vendedor_dulces")&&(I||h)||"";if(await nn(L,{email:r,name:t.trim(),roles:he,role:he[0]||"vendedor_pollo",sellerCandyId:ne}),p(z=>z.map(ce=>ce.id===y?{...ce,email:r,name:t.trim(),roles:he,sellerCandyId:ne}:ce)),a&&a.length>=6)try{const z=$P(),ce=E||r;await hme(z,ce),f(` Usuario actualizado. Se envi correo de restablecimiento a ${ce}`)}catch(z){console.error("Error sending password reset:",z),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Pe();return}const G=wO(),X=bO(G.options,"Secondary"),D=$P(X),Q=await mme(D,r,a),te=c.length?c:["vendedor_pollo"],me=te.includes("vendedor_dulces")&&h||"";await ZJ($t(ht(ke,"users"),Q.user.uid),{email:r,name:t.trim(),roles:te,role:te[0]||"vendedor_pollo",sellerCandyId:me}),await PO(D),await o0e(X),p(L=>[{id:Q.user.uid,email:r,name:t.trim(),roles:te,sellerCandyId:me},...L]),f(" Usuario creado correctamente."),Ae(),P(!1)}catch(G){console.error(G),f(" Error al crear el usuario: "+G.message)}},Ie=M=>{b(M.id),e(M.name||""),n(M.email||""),S(M.email||""),j(M.roles&&M.roles.length?M.roles:["vendedor_pollo"]),A(M.sellerCandyId||""),_(M.sellerCandyId||""),s(""),P(!0)},Pe=()=>{b(null),j(["vendedor_pollo"]),_(""),S(""),Ae(),P(!1)},k=async M=>{confirm("Eliminar este usuario del listado?")&&(await Cn($t(ke,"users",M)),p(X=>X.filter(D=>D.id!==M)))},H=M=>{const G=M==="admin"?"admin":M==="supervisor_pollo"?"supervisor_pollo":M==="vendedor_ropa"?"vendedor_ropa":M==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",X=G==="admin"?"bg-blue-100 text-blue-700":G==="supervisor_pollo"?"bg-amber-100 text-amber-700":G==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":G==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${X}`,children:G})},R=M=>`${M.name}  ${M.branchLabel||"Sin sucursal"}  ${M.commissionPercent.toFixed(2)}%`;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),o.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>P(!0),type:"button",children:"Crear usuario"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Email"}),o.jsx("th",{className:"p-2 border",children:"Rol"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:g?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(M=>{const G=y===M.id,X=(G?w:M.roles).includes("vendedor_dulces");return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:M.name||""}),o.jsx("td",{className:"p-2 border",children:M.email}),o.jsx("td",{className:"p-2 border",children:G?o.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(D=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(D),onChange:()=>j(Q=>Q.includes(D)?Q.filter(te=>te!==D):[...Q,D])}),o.jsx("span",{className:"text-sm",children:D})]},D)),w.includes("vendedor_dulces")&&o.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:D=>_(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),T.map(D=>o.jsx("option",{value:D.id,children:R(D)},D.id))]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex gap-2 justify-center",children:M.roles.map(D=>o.jsx("span",{children:H(D)},D))}),X&&M.sellerCandyId&&o.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),o.jsx("td",{className:"p-2 border space-x-2",children:o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ie(M),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>k(M.id),children:"Eliminar"})]})})]},M.id)})})]})}),d&&o.jsx("p",{className:"text-sm mt-2",children:d}),O&&o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>P(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:se,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:M=>e(M.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),o.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:M=>n(M.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-1 relative",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),o.jsx("input",{type:i?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:M=>s(M.target.value),required:!y}),o.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(M=>!M),children:i?"":""})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(M=>o.jsxs("label",{className:"inline-flex items-center mr-3",children:[o.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(M):c.includes(M),onChange:()=>{y?j(G=>G.includes(M)?G.filter(X=>X!==M):[...G,M]):u(G=>G.includes(M)?G.filter(X=>X!==M):[...G,M])}}),o.jsx("span",{className:"text-sm",children:M})]},M))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),o.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:h,onChange:M=>A(M.target.value),children:[o.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),T.map(M=>o.jsx("option",{value:M.id,children:R(M)},M.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"}),o.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&o.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const LQ=t=>`C$${(Number(t)||0).toFixed(2)}`;function FSe(){const[t,e]=v.useState(""),[r,n]=v.useState(0),[a,s]=v.useState(0),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState([]),[m,p]=v.useState(!0),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[E,S]=v.useState(""),[O,P]=v.useState(0),[T,F]=v.useState(0),[J,ge]=v.useState(!1),le=async()=>{p(!0);const R=await Lt(ht(ke,"products")),M=[];R.forEach(G=>{const X=G.data();M.push({id:G.id,name:X.name??"",price:Number(X.price??0),providerPrice:Number(X.providerPrice??0),category:X.category??"",measurement:X.measurement??"",active:X.active!==!1})}),A(M),p(!1)};v.useEffect(()=>{le()},[]);const de=async R=>{if(R.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const M={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},G=await _n(ht(ke,"products"),M);A(X=>[{id:G.id,...M},...X]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),ge(!1)}catch(M){l(" Error: "+M.message)}},Ae=R=>{b(R.id),j(R.name),_(R.category),S(R.measurement),P(R.price),F(R.providerPrice||0)},se=()=>{b(null),j(""),_(""),S(""),P(0)},Ie=async()=>{if(!y)return;const R=$t(ke,"products",y);await nn(R,{name:w,category:I,measurement:E,price:parseFloat((O||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}),A(M=>M.map(G=>G.id===y?{...G,name:w,category:I,measurement:E,price:parseFloat((O||0).toFixed(2)),providerPrice:parseFloat((T||0).toFixed(2))}:G)),se()},Pe=async R=>{const M=$t(ke,"products",R.id),G=R.active===!1;await nn(M,{active:G}),A(X=>X.map(D=>D.id===R.id?{...D,active:G}:D))},k=async R=>{const M=er(ht(ke,"inventory_batches"),ir("productId","==",R),YJ(1));if(!(await Lt(M)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Cn($t(ke,"products",R)),A(D=>D.filter(Q=>Q.id!==R)))},H=g?h:h.filter(R=>R.active!==!1);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),ge(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),J&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>ge(!1)}),o.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),children:"Cerrar"})]}),o.jsxs("form",{onSubmit:de,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),o.jsxs("select",{value:c,onChange:R=>u(R.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),o.jsxs("select",{value:d,onChange:R=>f(R.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:R=>s(parseFloat(R.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:R=>n(parseFloat(R.target.value)),onFocus:R=>R.target.value==="0"?n(NaN):null})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),i&&o.jsx("p",{className:"text-sm mt-2",children:i})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[o.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:g,onChange:R=>x(R.target.checked)}),"Mostrar inactivos"]})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):H.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):H.map(R=>{const M=y===R.id,G=R.active!==!1;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:X=>j(X.target.value)}):R.name}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:X=>_(X.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"pollo",children:"Pollo"}),o.jsx("option",{value:"cerdo",children:"Cerdo"}),o.jsx("option",{value:"huevo",children:"Huevos"}),o.jsx("option",{value:"ropa",children:"Ropa"}),o.jsx("option",{value:"otros",children:"Otros"})]}):R.category}),o.jsx("td",{className:"p-2 border",children:M?o.jsxs("select",{className:"w-full border p-1 rounded",value:E,onChange:X=>S(X.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),o.jsx("option",{value:"lb",children:"Libra"}),o.jsx("option",{value:"kg",children:"Kilogramo"}),o.jsx("option",{value:"unidad",children:"Unidad"})]}):R.measurement}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(T)?"":T,onChange:X=>F(parseFloat(X.target.value))}):LQ(R.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:M?o.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(O)?"":O,onChange:X=>P(parseFloat(X.target.value))}):LQ(R.price)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${G?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:G?"Activo":"Inactivo"})}),o.jsx("td",{className:"p-2 border space-x-2",children:M?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ie,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:se,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Ae(R),children:"Editar"}),o.jsx("button",{className:`px-2 py-1 rounded ${G?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Pe(R),children:G?"Desactivar":"Activar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>k(R.id),children:"Eliminar"})]})})]},R.id)})})]})})]})}const Io=[];for(let t=0;t<256;++t)Io.push((t+256).toString(16).slice(1));function OSe(t,e=0){return(Io[t[e+0]]+Io[t[e+1]]+Io[t[e+2]]+Io[t[e+3]]+"-"+Io[t[e+4]]+Io[t[e+5]]+"-"+Io[t[e+6]]+Io[t[e+7]]+"-"+Io[t[e+8]]+Io[t[e+9]]+"-"+Io[t[e+10]]+Io[t[e+11]]+Io[t[e+12]]+Io[t[e+13]]+Io[t[e+14]]+Io[t[e+15]]).toLowerCase()}let Pj;const DSe=new Uint8Array(16);function RSe(){if(!Pj){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pj=crypto.getRandomValues.bind(crypto)}return Pj(DSe)}const MSe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),UQ={randomUUID:MSe};function LSe(t,e,r){var a;if(UQ.randomUUID&&!t)return UQ.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??RSe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,OSe(n)}async function USe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=ht(t,"inventory_batches"),s=er(a,ir("productName","==",e)),c=(await Lt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,g;const f=u.data.date??"",h=d.data.date??"";if(f!==h)return f<h?-1:1;const A=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((g=d.data.createdAt)==null?void 0:g.seconds)??0;return A-m}).map(u=>$t(t,"inventory_batches",u.id));return Qi(t,async u=>{let d=Number(r);const f=[],h=await Promise.all(c.map(g=>u.get(g)));for(let g=0;g<c.length&&d>0;g++){const x=c[g],y=h[g];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),E=Number((j-_).toFixed(3));u.update(x,{remaining:E}),f.push({batchId:x.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const A=Number(f.reduce((g,x)=>g+x.lineCost,0).toFixed(2)),m=f.reduce((g,x)=>g+x.qty,0),p=m>0?Number((A/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:A}})}const ote=3,QSe=.5*10**-ote;function Wa(t){const e=Number(t??0);return Number(e.toFixed(ote))}function Tj(t,e){return Wa((t??0)+(e??0))}function oC(t,e){return Wa(t)+QSe>=Wa(e)}async function VSe(t,e){const r=await Lt(ht(ke,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const i=s.data();(i.productName||"").trim().toLowerCase()===n&&i.productId!==e&&(await nn($t(ke,"inventory_batches",s.id),{productId:e}),a++)}return a}function QQ({user:t,role:e,roles:r}){r&&r.length;const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState(""),[u,d]=v.useState(Er(new Date,"yyyy-MM-dd")),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState([]),[x,y]=v.useState(0),[b,w]=v.useState(0),[j,I]=v.useState("0"),[_,E]=v.useState(""),[S,O]=v.useState(!1),[P,T]=v.useState({}),F=he=>Math.round(he*100)/100,J=he=>Wa(he).toFixed(3),ge=he=>{const ne=Number(he.specialPrice||0);return ne>0?ne:Number(he.price||0)},le=async he=>{if(!he)return 0;const ne=er(ht(ke,"inventory_batches"),ir("productId","==",he)),z=await Lt(ne);let ce=0;return z.forEach(K=>{const oe=K.data();ce=Tj(ce,Number(oe.remaining||0))}),Wa(ce)},de=async he=>{if(!he)return 0;const ne=await Lt(ht(ke,"inventory_batches"));let z=0;return ne.forEach(ce=>{const K=ce.data();(K.productName||"").trim().toLowerCase()===he.trim().toLowerCase()&&(z=Tj(z,Number(K.remaining||0)))}),Wa(z)};v.useEffect(()=>{(async()=>{const he=await Lt(ht(ke,"products")),ne=[];he.forEach(z=>{const ce=z.data();(ce==null?void 0:ce.active)!==!1&&ne.push({id:z.id,productName:ce.name??ce.productName??"(sin nombre)",price:Number(ce.price??0),measurement:ce.measurement??"(sin unidad)",category:ce.category??"(sin categora)"})}),a(ne)})()},[]),v.useEffect(()=>{(async()=>{const he=await Lt(ht(ke,"inventory_batches")),ne={};he.forEach(z=>{const ce=z.data(),K=ce.productId,oe=Number(ce.remaining||0);K&&(ne[K]=Tj(ne[K]||0,oe))}),Object.keys(ne).forEach(z=>ne[z]=Wa(ne[z])),T(ne)})()},[]),v.useEffect(()=>{(async()=>{const he=await Lt(ht(ke,"users")),ne=[];he.forEach(z=>{const ce=z.data();ne.push({id:z.id,email:ce.email??"(sin email)",role:ce.role??"USER"})}),i(ne)})()},[]);const Ae=async()=>{if(!l)return;const he=n.find(z=>z.id===l);if(!he)return;if(p.some(z=>z.productId===he.id)){c("");return}const ne=await le(he.id);g(z=>[...z,{productId:he.id,productName:he.productName,measurement:he.measurement,price:Number(he.price||0),specialPrice:0,stock:ne,qty:0,discount:0}]),c("")},se=async he=>{if(!he)return;const ne=n.find(ce=>ce.id===he);if(!ne||p.some(ce=>ce.productId===ne.id))return;const z=await le(ne.id);g(ce=>[...ce,{productId:ne.id,productName:ne.productName,measurement:ne.measurement,price:Number(ne.price||0),specialPrice:0,stock:z,qty:0,discount:0}]),c("")},Ie=he=>{g(ne=>ne.filter(z=>z.productId!==he))},Pe=async(he,ne)=>{g(z=>z.map(ce=>{if(ce.productId!==he)return ce;const K=(ce.measurement||"").toLowerCase()!=="lb",oe=ne===""?0:Number(ne);let xe=K?Math.max(0,Math.round(oe)):Wa(oe);const De=K?Math.max(0,Math.floor(Number(ce.stock||0))):Wa(Number(ce.stock||0));return xe>De&&(xe=De,E(` Cantidad limitada a existencias (${De})`)),{...ce,qty:xe}}))},k=(he,ne)=>{g(z=>z.map(ce=>{if(ce.productId!==he)return ce;const K=(ne||"").replace(",","."),oe=K.trim()===""?0:Number(K),xe=Number.isFinite(oe)?Math.max(0,F(oe)):0;return{...ce,specialPrice:xe}}))},H=(he,ne)=>{g(z=>z.map(ce=>{if(ce.productId!==he)return ce;const K=Math.max(0,Math.floor(Number(ne||0)));return{...ce,discount:K}}))},R=v.useMemo(()=>{let he=0;for(const ne of p){const z=ge(ne),ce=Number(z||0)*Number(ne.qty||0),K=Math.max(0,ce-Math.max(0,Number(ne.discount||0)));he+=K}return F(he)},[p]);v.useEffect(()=>{y(R)},[R]),v.useEffect(()=>{const he=Number(b)||0,ne=Number(x)||0;I((he-ne).toFixed(2))},[b,x]);const M=he=>{he.key===","&&(he.preventDefault(),he.target.value+=".")},[G,X]=v.useState(!1);v.useEffect(()=>{var z;const he=window.matchMedia("(max-width: 900px)"),ne=()=>X(he.matches);return ne(),(z=he.addEventListener)==null||z.call(he,"change",ne),()=>{var ce;return(ce=he.removeEventListener)==null?void 0:ce.call(he,"change",ne)}},[]);const D=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const he of p){if(!he.qty||he.qty<=0)return`Cantidad invlida para "${he.productName}".`;const ne=await le(he.productId);if(!oC(ne,he.qty)){const z=await de(he.productName);if(oC(z,0)&&!oC(ne,0)){const ce=await VSe(he.productName,he.productId),K=await le(he.productId);if(!oC(K,he.qty))return`Stock insuficiente tras corregir ${ce} lote(s) para "${he.productName}".`}else return`Stock insuficiente para "${he.productName}". Disponible: ${ne}`}}return null},Q=async he=>{var z,ce;he.preventDefault(),E("");const ne=await D();if(ne){E(" "+ne);return}try{O(!0);const K=[];for(const De of p){const nt=De.qty,{allocations:Me,avgUnitCost:Je,cogsAmount:lt}=await USe(ke,De.productName,nt,!1),ft=ge(De),Ge=Number(ft||0)*Number(nt||0),ye=Math.max(0,Number(De.discount||0)),We=Math.max(0,Ge-ye);K.push({productId:De.productId,productName:De.productName,measurement:De.measurement,unitPrice:Number(ft||0),regularPrice:Number(De.price||0),specialPrice:Number(De.specialPrice||0)>0?Number(De.specialPrice):null,qty:nt,discount:ye,lineTotal:F(Ge),lineFinal:F(We),allocations:Me,avgUnitCost:Je,cogsAmount:lt})}const oe=K.reduce((De,nt)=>De+nt.lineFinal,0),xe=K.reduce((De,nt)=>De+Number(nt.qty||0),0);await _n(ht(ke,"salesV2"),{id:LSe(),quantity:xe,amount:oe,amountCharged:oe,amountReceived:Number(b)||0,change:j,clientName:f.trim(),timestamp:dr.now(),date:u,userEmail:((z=s[0])==null?void 0:z.email)??"sin usuario",vendor:((ce=s[0])==null?void 0:ce.role)??"sin usuario",status:"FLOTANTE",items:K,itemsTotal:oe}),E(" Venta registrada y asignada a inventario (FIFO)."),g([]),c(""),y(0),w(0),I("0"),h(""),d(Er(new Date,"yyyy-MM-dd"))}catch(K){console.error(K),E(` ${(K==null?void 0:K.message)||"Error al registrar la venta."}`)}finally{O(!1)}},te=v.useMemo(()=>new Set(p.map(he=>he.productId)),[p]),me=v.useMemo(()=>n.filter(he=>(P[he.id]||0)>0),[n,P]),L=v.useMemo(()=>{const he=String(A||"").trim().toLowerCase();return he?me.filter(ne=>`${ne.productName||""}`.toLowerCase().includes(he)):me},[me,A]);return G?o.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),o.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:he=>d(he.target.value),"aria-label":"Fecha de la venta"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Cliente"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:he=>h(he.target.value),placeholder:"Opcional"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:A,onChange:he=>m(he.target.value)}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{className:"flex-1 border rounded px-2 py-2",value:l,onChange:async he=>{const ne=he.target.value;c(ne),await se(ne)},children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),L.map(he=>o.jsxs("option",{value:he.id,disabled:te.has(he.id),children:[he.productName,"  ",he.measurement,"  C$ ",he.price]},he.id))]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?o.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):o.jsx("div",{className:"space-y-2",children:p.map(he=>{const ne=ge(he),z=Number(ne||0)*Number(he.qty||0),ce=Math.max(0,z-Math.max(0,Number(he.discount||0))),K=(he.measurement||"").toLowerCase()!=="lb";return o.jsxs("div",{className:"border rounded p-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-semibold",children:he.productName}),o.jsxs("div",{className:"text-sm",children:["C$ ",F(ne).toFixed(2)]})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:K?"numeric":"decimal",step:K?1:.01,value:he.qty===0?"":he.qty,onChange:oe=>Pe(he.productId,oe.target.value),placeholder:K?"Unid":"Libras",title:K?"Unidades":"Libras"}),o.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:he.discount===0?"":he.discount,onChange:oe=>H(he.productId,oe.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),o.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:he.specialPrice===0?"":he.specialPrice,onChange:oe=>k(he.productId,oe.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",Wa(Number(he.stock)-Number(he.qty||0)).toFixed(3)]}),o.jsxs("div",{className:"font-semibold",children:["C$ ",F(ce).toFixed(2)]})]}),o.jsx("div",{className:"mt-2 text-right",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>Ie(he.productId),children:"Quitar"})})]},he.productId)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),o.jsxs("div",{className:"text-xl font-bold",children:["C$ ",x.toFixed(2)]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:he=>w(Number(he.target.value||0)),placeholder:"Monto recibido"}),o.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),o.jsx("button",{onClick:Q,disabled:p.length===0||S,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:S?"Guardando...":"Guardar venta"}),_&&o.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):o.jsxs("div",{className:"relative",children:[o.jsxs("form",{onSubmit:Q,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl\r
                 p-4 sm:p-6 md:p-8\r
                 max-w-5xl space-y-4`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:he=>c(he.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),me.map(he=>o.jsxs("option",{value:he.id,disabled:te.has(he.id),title:te.has(he.id)?"Ya est en la lista":`Disponible: ${J(P[he.id]||0)}`,children:[he.productName,"  ",he.measurement,"  C$ ",he.price," (disp:"," ",J(P[he.id]||0),")"]},he.id))]}),o.jsx("button",{type:"button",onClick:Ae,disabled:!l||te.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),o.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:he=>d(he.target.value)})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente"}),o.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:he=>h(he.target.value),placeholder:"Opcional"})]})]}),o.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:o.jsxs("table",{className:"min-w-full text-sm r",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"text-center",children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:""})]})}),o.jsx("tbody",{children:p.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(he=>{const ne=ge(he),z=Number(ne||0)*Number(he.qty||0),ce=Math.max(0,z-Math.max(0,Number(he.discount||0))),K=(he.measurement||"").toLowerCase()!=="lb",oe=Wa(Number(he.stock)-Number(he.qty||0));return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[he.productName,"  ",he.measurement]}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",F(he.price).toFixed(2)]}),o.jsxs("td",{className:"p-2 border",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:he.specialPrice===0?"":he.specialPrice,onKeyDown:M,onChange:xe=>k(he.productId,xe.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),o.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",F(ne).toFixed(2)]})]}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:oe.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:K?1:.01,inputMode:K?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:he.qty===0?"":he.qty,onKeyDown:M,onChange:xe=>Pe(he.productId,xe.target.value),placeholder:"0",title:"Cantidad"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:he.discount===0?"":he.discount,onChange:xe=>H(he.productId,xe.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",F(ce).toFixed(2)]}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>Ie(he.productId),title:"Quitar",children:""})})]},he.productId)})})]})}),o.jsxs("div",{className:"space-y-1 ",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${x.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:he=>w(Number(he.target.value||0))})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),o.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||S,children:S?"Guardando...":"Guardar venta"}),_&&o.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),S&&o.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}const Ji=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function kj(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function HSe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=v.useState([]),[i,l]=v.useState([]),[c,u]=v.useState(!0),[d,f]=v.useState(""),{refreshKey:h,refresh:A}=gc(),m=e&&e.length?e:t,p=Jr(m,"admin"),g=p||Jr(m,"contador"),[x,y]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[b,w]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[j,I]=v.useState(""),[_,E]=v.useState(!1),[S,O]=v.useState(""),[P,T]=v.useState(Er(new Date,"yyyy-MM-dd")),[F,J]=v.useState("lb"),[ge,le]=v.useState(""),[de,Ae]=v.useState(0),[se,Ie]=v.useState(NaN),[Pe,k]=v.useState(0),[H,R]=v.useState([]),[M,G]=v.useState(null),[X,D]=v.useState([]),[Q,te]=v.useState(!1),[me,L]=v.useState(null),[he,ne]=v.useState(!1),[z,ce]=v.useState(null),[K,oe]=v.useState(null),xe=Z=>oe($e=>$e===Z?null:Z),[De,nt]=v.useState(!1),Me=()=>nt(Z=>!Z),Je=Z=>{const $e=(Z||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test($e)||$e==="lb"};v.useEffect(()=>{(async()=>{u(!0),f("");const Z=await Lt(ht(ke,"products")),$e=[];Z.forEach(pt=>{const Be=pt.data();Be.active===!0&&$e.push({id:pt.id,name:Be.name??Be.productName??"(sin nombre)",category:Be.category??"(sin categora)",measurement:Be.measurement??"lb",price:Number(Be.price??0),providerPrice:Object.prototype.hasOwnProperty.call(Be,"providerPrice")?Number(Be.providerPrice):void 0})}),s($e);const Le=er(ht(ke,"inventory_batches"),on("date","desc")),Ve=await Lt(Le),At=[];Ve.forEach(pt=>{const Be=pt.data(),gt=Wa(Number(Be.quantity||0)),V=Number(Be.purchasePrice||0),ae=Number(Be.salePrice||0),Se=Number((gt*V).toFixed(2)),_e=Number((gt*ae).toFixed(2));At.push({id:pt.id,productId:Be.productId,productName:Be.productName,category:Be.category,unit:Be.unit,quantity:gt,remaining:Wa(Number(Be.remaining||0)),purchasePrice:V,salePrice:ae,invoiceTotal:Be.invoiceTotal!=null?Number(Be.invoiceTotal):Se,expectedTotal:Be.expectedTotal!=null?Number(Be.expectedTotal):_e,date:Be.date,createdAt:Be.createdAt,status:Be.status,notes:Be.notes,paidAmount:Number(Be.paidAmount||0),paidAt:Be.paidAt,batchGroupId:Be.batchGroupId,orderName:Be.orderName})}),l(At),u(!1)})()},[h]);const lt=v.useMemo(()=>i.filter(Z=>!(x&&Z.date<x||b&&Z.date>b||j&&Z.productId!==j)),[i,x,b,j]),ft=v.useMemo(()=>{const Z=lt.reduce((V,ae)=>V+Number(ae.invoiceTotal||0),0),$e=lt.reduce((V,ae)=>V+Number(ae.expectedTotal||0),0);let Le=0,Ve=0,At=0,pt=0;for(const V of lt)Je(V.unit)?(Le+=V.quantity,Ve+=V.remaining):(At+=V.quantity,pt+=V.remaining);const Be=lt.reduce((V,ae)=>V+ae.quantity,0),gt=lt.reduce((V,ae)=>V+ae.remaining,0);return{lbsIng:Le,lbsRem:Ve,udsIng:At,udsRem:pt,qty:Be,rem:gt,totalFacturado:Z,totalEsperado:$e}},[lt]),Ge=v.useMemo(()=>{var Le,Ve;const Z=new Map;for(const At of lt){const pt=At.batchGroupId&&String(At.batchGroupId).trim()||At.id;Z.has(pt)||Z.set(pt,[]),Z.get(pt).push(At)}const $e=[];for(const[At,pt]of Z.entries()){const Be=[...pt].sort((W,re)=>{var be,Xe;const fe=((be=W.createdAt)==null?void 0:be.seconds)??0;return(((Xe=re.createdAt)==null?void 0:Xe.seconds)??0)-fe}),gt=((Le=Be[0])==null?void 0:Le.date)||"",V=String(((Ve=Be[0])==null?void 0:Ve.orderName)||"").trim()||`Pedido ${gt||""}`.trim()||"Pedido",ae=new Set(Be.map(W=>String(W.category||"").trim()).filter(Boolean)),Se=ae.size===1?Array.from(ae)[0].toUpperCase():"MIXTO",_e=Be.some(W=>W.status==="PENDIENTE")?"PENDIENTE":"PAGADO",Ee=Wa(Be.reduce((W,re)=>W+(Je(re.unit)?Number(re.quantity||0):0),0)),ze=Wa(Be.reduce((W,re)=>W+(Je(re.unit)?Number(re.remaining||0):0),0)),ut=Number(Be.reduce((W,re)=>W+Number(re.invoiceTotal||0),0).toFixed(2)),st=Number(Be.reduce((W,re)=>W+Number(re.expectedTotal||0),0).toFixed(2)),ee=Number((st-ut).toFixed(2));$e.push({groupId:At,orderName:V,date:gt,typeLabel:Se,status:_e,lbsIn:Ee,lbsRem:ze,totalFacturado:ut,totalEsperado:st,utilidadBruta:ee,items:Be})}return $e.sort((At,pt)=>At.date===pt.date?At.groupId<pt.groupId?1:-1:At.date<pt.date?1:-1),$e},[lt]),ye=v.useMemo(()=>{const Z=String(F||"").toLowerCase().trim();return a.filter(Le=>String(Le.measurement||"").toLowerCase().trim()===Z).sort((Le,Ve)=>Le.name.localeCompare(Ve.name,"es"))},[a,F]);v.useEffect(()=>{const Z=a.find($e=>$e.id===ge);Z?(k(Number(Z.price||0)),Z.providerPrice!=null&&Number.isFinite(Number(Z.providerPrice))?Ie(Number(Z.providerPrice)):Ie(NaN)):(k(0),Ie(NaN))},[ge,a,h]);const We=()=>{f("");const Z=a.find(gt=>gt.id===ge);if(!Z)return f("Selecciona un producto.");if(de<=0||!Number.isFinite(se)||se<=0)return f("Completa libras a ingresar y precio proveedor.");const $e=Wa(de),Le=Z.measurement,Ve=Number(($e*Number(se||0)).toFixed(2)),At=Number(($e*Number(Pe||0)).toFixed(2)),pt=Number((At-Ve).toFixed(2)),Be=H.findIndex(gt=>gt.productId===Z.id);Be>=0?R(gt=>gt.map((V,ae)=>ae!==Be?V:{...V,quantity:$e,remaining:$e,purchasePrice:Number(se||0),salePrice:Number(Pe||0),invoiceTotal:Ve,expectedTotal:At,utilidadBruta:pt})):R(gt=>[...gt,{tempId:kj("IT"),productId:Z.id,productName:Z.name,category:Z.category,unit:Le,quantity:$e,remaining:$e,purchasePrice:Number(se||0),salePrice:Number(Pe||0),invoiceTotal:Ve,expectedTotal:At,utilidadBruta:pt}]),le(""),Ae(0),Ie(NaN),k(0)},qe=Z=>{R($e=>$e.filter(Le=>Le.tempId!==Z))},je=(Z,$e,Le)=>{R(Ve=>Ve.map(At=>{if(At.tempId!==Z)return At;const pt={...At};return $e==="quantity"&&(pt.quantity=Wa(Math.max(0,Le)),M||(pt.remaining=pt.quantity)),$e==="purchasePrice"&&(pt.purchasePrice=Math.max(0,Number(Le||0))),$e==="salePrice"&&(pt.salePrice=Math.max(0,Number(Le||0))),pt.invoiceTotal=Number((pt.quantity*pt.purchasePrice).toFixed(2)),pt.expectedTotal=Number((pt.quantity*pt.salePrice).toFixed(2)),pt.utilidadBruta=Number((pt.expectedTotal-pt.invoiceTotal).toFixed(2)),pt}))},pe=v.useMemo(()=>{const Z=Wa(H.reduce((pt,Be)=>pt+(Je(Be.unit)?Number(Be.quantity||0):0),0)),$e=Wa(H.reduce((pt,Be)=>pt+(Je(Be.unit)?Number(Be.remaining||0):0),0)),Le=Number(H.reduce((pt,Be)=>pt+Number(Be.invoiceTotal||0),0).toFixed(2)),Ve=Number(H.reduce((pt,Be)=>pt+Number(Be.expectedTotal||0),0).toFixed(2)),At=Number((Ve-Le).toFixed(2));return{lbsIn:Z,lbsRem:$e,totalFacturado:Le,totalEsperado:Ve,utilidadBruta:At}},[H]),He=()=>{G(null),D([]),O(""),T(Er(new Date,"yyyy-MM-dd")),J("lb"),le(""),Ae(0),Ie(NaN),k(0),R([])},at=async()=>{if(f(""),!H.length)return f("Agrega al menos un producto al pedido.");const Z=P||Er(new Date,"yyyy-MM-dd"),$e=String(S||"").trim()||`Pedido ${Z}`,Le=M||kj("BATCH");try{if(!M){for(const Be of H)await OQ({productId:Be.productId,productName:Be.productName,category:Be.category,unit:Be.unit,quantity:Wa(Be.quantity),purchasePrice:Number(Be.purchasePrice||0),salePrice:Number(Be.salePrice||0),invoiceTotal:Number(Be.invoiceTotal||0),expectedTotal:Number(Be.expectedTotal||0),date:Z,notes:"",batchGroupId:Le,orderName:$e});f(" Pedido creado"),E(!1),He(),A();return}const Ve=X,At=new Map;for(const Be of Ve)At.set(Be.productId,Be);const pt=new Set(H.map(Be=>Be.productId));for(const Be of H){const gt=At.get(Be.productId),V=Wa(Be.quantity);if(gt){const ae=Wa(gt.quantity-gt.remaining),Se=Math.max(0,Wa(V-ae));await nn($t(ke,"inventory_batches",gt.id),{date:Z,orderName:$e,batchGroupId:Le,quantity:V,purchasePrice:Number(Be.purchasePrice||0),salePrice:Number(Be.salePrice||0),invoiceTotal:Number(Be.invoiceTotal||0),expectedTotal:Number(Be.expectedTotal||0),remaining:Se})}else await OQ({productId:Be.productId,productName:Be.productName,category:Be.category,unit:Be.unit,quantity:V,purchasePrice:Number(Be.purchasePrice||0),salePrice:Number(Be.salePrice||0),invoiceTotal:Number(Be.invoiceTotal||0),expectedTotal:Number(Be.expectedTotal||0),date:Z,notes:"",batchGroupId:Le,orderName:$e})}for(const Be of Ve)pt.has(Be.productId)||await Cn($t(ke,"inventory_batches",Be.id));f(" Pedido actualizado"),E(!1),He(),A()}catch(Ve){console.error(Ve),f(" Error al guardar pedido")}},yt=Z=>{L(Z),te(!0)},bt=Z=>{G(Z.groupId),D(Z.items),O(Z.orderName),T(Z.date||Er(new Date,"yyyy-MM-dd"));const $e=Z.items.map(Le=>{const Ve=Number(Le.invoiceTotal||0),At=Number(Le.expectedTotal||0);return{tempId:kj("IT"),productId:Le.productId,productName:Le.productName,category:Le.category,unit:Le.unit,quantity:Wa(Le.quantity),remaining:Wa(Le.remaining),purchasePrice:Number(Le.purchasePrice||0),salePrice:Number(Le.salePrice||0),invoiceTotal:Ve,expectedTotal:At,utilidadBruta:Number((At-Ve).toFixed(2))}});R($e),E(!0)},kt=async Z=>{if(confirm(`Eliminar el pedido "${Z.orderName}" del ${Z.date}?`))try{for(const Le of Z.items)await Cn($t(ke,"inventory_batches",Le.id));f(" Pedido eliminado"),A()}catch(Le){console.error(Le),f(" Error al eliminar pedido")}},Vt=Z=>{ce(Z),ne(!0)},ve=async()=>{if(z)try{for(const Z of z.items){if(Z.status!=="PENDIENTE")continue;await nte(Z.id),await nn($t(ke,"inventory_batches",Z.id),{remaining:0});const $e={date:Z.date,productName:Z.productName,quantity:Z.quantity,amount:Number((Z.expectedTotal??Z.salePrice*Z.quantity).toFixed(2)),allocations:[{batchId:Z.id,qty:Z.quantity,unitCost:Z.purchasePrice,lineCost:Number((Z.purchasePrice*Z.quantity).toFixed(2))}],avgUnitCost:Z.purchasePrice,measurement:Z.unit,createdAt:dr.now(),autoGeneratedFromInventory:!0};await _n(ht(ke,"salesV2"),$e)}f(" Pedido pagado y reflejado como venta"),A()}catch(Z){console.error(Z),f(" Error al pagar pedido")}finally{ne(!1),ce(null)}},Qe=()=>{ne(!1),ce(null)};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),g&&o.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{He(),E(!0)},children:"Crear Lote"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:Z=>y(Z.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:Z=>w(Z.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:Z=>I(Z.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),a.map(Z=>o.jsxs("option",{value:Z.id,children:[Z.name,"  ",Z.category]},Z.id))]})]}),o.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),o.jsx("div",{className:"ml-auto",children:o.jsx(pc,{onClick:()=>A(),loading:c})})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:Me,role:"button","aria-expanded":De,children:[o.jsxs("div",{className:"flex gap-6 items-center",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ft.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ft.lbsRem.toFixed(3)]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:De?"Cerrar":"Ver ms"})]}),De&&o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",ft.lbsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",ft.lbsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ft.udsIng.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ft.udsRem.toFixed(3)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",ft.totalEsperado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",ft.totalFacturado.toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(ft.totalEsperado-ft.totalFacturado).toFixed(2)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",lt.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"md:hidden space-y-3",children:c?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):Ge.length===0?o.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:"Sin lotes"}):Ge.map(Z=>{const $e=K===Z.groupId;return o.jsxs("div",{className:"bg-white border rounded-2xl",children:[o.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>xe(Z.groupId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold text-lg",children:Z.date}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:Z.orderName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${Z.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Z.status}),o.jsx("div",{className:"text-sm text-gray-500",children:Z.typeLabel})]})]}),$e&&o.jsxs("div",{className:"p-4 pt-0",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),o.jsx("div",{className:"font-semibold",children:Z.typeLabel})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),o.jsx("div",{className:"font-semibold",children:Ji(Z.utilidadBruta)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),o.jsx("div",{className:"font-semibold",children:Z.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),o.jsx("div",{className:"font-semibold",children:Z.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[o.jsx("span",{children:"Total facturado"}),o.jsx("span",{children:"Total esperado"})]}),o.jsxs("div",{className:"flex justify-between font-semibold",children:[o.jsx("span",{children:Ji(Z.totalFacturado)}),o.jsx("span",{children:Ji(Z.totalEsperado)})]})]})]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>yt(Z),children:"Ver detalle"}),p?o.jsxs(o.Fragment,{children:[Z.status==="PENDIENTE"&&o.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Vt(Z),children:"Pagar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>bt(Z),children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>kt(Z),children:"Borrar"})]}):null]})]})]},Z.groupId)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Total Facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:c?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):Ge.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin lotes"})}):Ge.map(Z=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border",children:[o.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>yt(Z),title:Z.orderName,children:Z.date}),o.jsx("div",{className:"text-[11px] text-gray-500",children:Z.orderName})]}),o.jsx("td",{className:"p-2 border",children:Z.typeLabel}),o.jsx("td",{className:"p-2 border",children:Z.lbsIn.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Z.lbsRem.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.totalFacturado)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.totalEsperado)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Z.status})}),o.jsx("td",{className:"p-2 border",children:p?o.jsxs("div",{className:"flex gap-2 justify-center",children:[Z.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>Vt(Z),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>bt(Z),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>kt(Z),children:"Borrar"})]}):o.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},Z.groupId))})]})}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),_&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>E(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:M?"Editar pedido":"Crear pedido"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>E(!1),type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:S,onChange:Z=>O(Z.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:P,onChange:Z=>T(Z.target.value)})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:F,onChange:Z=>{J(Z.target.value),le(""),Ae(0),Ie(NaN),k(0)},children:[o.jsx("option",{value:"lb",children:"lb"}),o.jsx("option",{value:"unidad",children:"unidad"}),o.jsx("option",{value:"kg",children:"kg"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ge,onChange:Z=>le(Z.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),ye.map(Z=>o.jsxs("option",{value:Z.id,children:[Z.name,"  ",Z.category,"  ",Z.measurement]},Z.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:de===0?"":de,onChange:Z=>{const $e=Z.target.value.replace(",","."),Le=parseFloat($e),Ve=Number.isFinite(Le)?parseFloat(Le.toFixed(3)):0;Ae(Math.max(0,Ve))},disabled:!ge})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(se)?"":se,onChange:Z=>{const $e=Z.target.value.replace(",",".");if($e==="")return Ie(NaN);const Le=parseFloat($e),Ve=Number.isFinite(Le)?parseFloat(Le.toFixed(2)):NaN;Ie(Number.isFinite(Ve)?Math.max(0,Ve):NaN)},disabled:!ge})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Pe===0?"":Pe,onChange:Z=>{const $e=Z.target.value.replace(",","."),Le=parseFloat($e),Ve=Number.isFinite(Le)?parseFloat(Le.toFixed(2)):0;k(Math.max(0,Ve))},disabled:!ge})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",onClick:We,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),o.jsx("th",{className:"p-2 border",children:"Libras restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:H.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):H.map(Z=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsxs("td",{className:"p-2 border text-left",children:[Z.productName,o.jsxs("div",{className:"text-[11px] text-gray-500",children:[Z.category,"  ",Z.unit]})]}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Z.quantity,onChange:$e=>{const Le=$e.target.value.replace(",","."),Ve=parseFloat(Le),At=Number.isFinite(Ve)?parseFloat(Ve.toFixed(3)):0;je(Z.tempId,"quantity",At)}})}),o.jsx("td",{className:"p-2 border",children:Number(Z.remaining||0).toFixed(3)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Z.purchasePrice,onChange:$e=>{const Le=$e.target.value.replace(",","."),Ve=parseFloat(Le),At=Number.isFinite(Ve)?parseFloat(Ve.toFixed(2)):0;je(Z.tempId,"purchasePrice",At)}})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Z.salePrice,onChange:$e=>{const Le=$e.target.value.replace(",","."),Ve=parseFloat(Le),At=Number.isFinite(Ve)?parseFloat(Ve.toFixed(2)):0;je(Z.tempId,"salePrice",At)}})}),o.jsx("td",{className:"p-2 border",children:Ji(Z.invoiceTotal)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.expectedTotal)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.utilidadBruta)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>qe(Z.tempId),children:"Quitar"})})]},Z.tempId))})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:pe.lbsIn.toFixed(3)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:pe.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),o.jsx("div",{className:"text-lg font-semibold",children:Ji(pe.totalFacturado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-semibold",children:Ji(pe.totalEsperado)}),o.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Ji(pe.utilidadBruta)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>E(!1),children:"Cancelar"}),o.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:at,disabled:H.length===0,children:M?"Editar pedido":"Crear pedido"})]})]})]}),document.body),Q&&me&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{te(!1),L(null)}}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsx("strong",{children:me.orderName})," "," ",me.date]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te(!1),L(null)},type:"button",children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:me.items.map(Z=>{const $e=Number(Z.invoiceTotal||0),Le=Number(Z.expectedTotal||0);return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border text-left",children:Z.productName}),o.jsx("td",{className:"p-2 border",children:(Z.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Z.quantity.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Z.remaining.toFixed(3)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Ji(Z.salePrice)}),o.jsx("td",{className:"p-2 border",children:Ji($e)}),o.jsx("td",{className:"p-2 border",children:Ji(Le)}),o.jsx("td",{className:"p-2 border",children:Ji(Le-$e)}),o.jsx("td",{className:"p-2 border",children:Z.status})]},Z.id)})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),o.jsx("div",{className:"text-lg font-semibold",children:me.lbsIn.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),o.jsx("div",{className:"text-lg font-semibold",children:me.lbsRem.toFixed(3)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-semibold",children:Ji(me.utilidadBruta)})]})]})]})]}),document.body),he&&z&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:Qe}),o.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),o.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",o.jsx("br",{}),o.jsx("strong",{children:z.orderName})," "," ",z.date,o.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:ve,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),o.jsx("button",{onClick:Qe,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Yf=t=>`C$${(Number(t)||0).toFixed(2)}`;function $Se(){const t=sye(new Date),[e,r]=v.useState(Er(t,"yyyy-MM")),[n,a]=v.useState([]),[s,i]=v.useState(!1),[l,c]=v.useState(""),u=v.useRef(null),d=v.useMemo(()=>{const[g,x]=e.split("-").map(w=>parseInt(w,10)),y=Er(Vd(new Date(g,x-1,1)),"yyyy-MM-dd"),b=Er(Qd(new Date(g,x-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{i(!0);try{const g=await bSe(d.from,d.to),x=[];for(const y of g){const b=$t(ke,"inventory_batches",y.batchId),w=await li(b);if(!w.exists())continue;const j=w.data();x.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(x)}catch(g){console.error(g),c(" Error al cargar liquidaciones")}finally{i(!1)}};v.useEffect(()=>{f()},[e]);const h=async g=>{confirm("Marcar este lote como PAGADO?")&&(await nte(g),a(y=>y.map(b=>b.batchId===g?{...b,status:"PAGADO"}:b)))},A=v.useMemo(()=>{const g=n.reduce((w,j)=>w+j.soldQty,0),x=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=x-y;return{q:g,amt:x,cogs:y,profit:b}},[n]),m=v.useMemo(()=>{const g=new Map;for(const x of n){const y=x.productName||"(sin nombre)";g.has(y)||g.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=g.get(y);b.qty+=x.soldQty,b.revenue+=x.soldAmount;const w=x.soldQty*x.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(g.values()).sort((x,y)=>x.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const g=u.current;g.classList.add("force-pdf-colors");try{const[{default:x},{jsPDF:y}]=await Promise.all([_A(()=>Promise.resolve().then(()=>B6),void 0),_A(()=>Promise.resolve().then(()=>KT),void 0)]),w=(await x(g,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),E=I,S=_.height*E/_.width;j.addImage(w,"PNG",10,10,E,S),j.save(`liquidaciones_${e}.pdf`)}catch(x){console.error(x),alert("No se pudo generar el PDF")}finally{g.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),o.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[o.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),o.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:g=>r(g.target.value)}),o.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),o.jsxs("div",{ref:u,children:[o.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",A.q]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Yf(A.amt)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Yf(A.cogs)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Yf(A.profit)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Vendido"}),o.jsx("th",{className:"p-2 border",children:"Monto vendido"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:s?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(g=>{const x=g.soldQty*g.purchasePrice,y=g.soldAmount-x;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.batchDate}),o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.supplier||"-"}),o.jsx("td",{className:"p-2 border",children:g.soldQty}),o.jsx("td",{className:"p-2 border",children:Yf(g.soldAmount)}),o.jsx("td",{className:"p-2 border",children:Yf(x)}),o.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Yf(y)}),o.jsx("td",{className:"p-2 border",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${g.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:g.status})}),o.jsx("td",{className:"p-2 border",children:g.status==="PENDIENTE"&&o.jsx("button",{onClick:()=>h(g.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},g.batchId)})})]})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),o.jsx("th",{className:"p-2 border",children:"Ingreso"}),o.jsx("th",{className:"p-2 border",children:"COGS"}),o.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),o.jsx("tbody",{children:m.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(g=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:g.productName}),o.jsx("td",{className:"p-2 border",children:g.qty}),o.jsx("td",{className:"p-2 border",children:Yf(g.revenue)}),o.jsx("td",{className:"p-2 border",children:Yf(g.cogs)}),o.jsx("td",{className:`p-2 border ${g.profit>=0?"text-green-700":"text-red-700"}`,children:Yf(g.profit)})]},g.productName))})]})})]}),l&&o.jsx("p",{className:"mt-2 text-sm",children:l})]})}const Ls=t=>`C$${Number(t??0).toFixed(2)}`,KSe=()=>Er(new Date,"yyyy-MM-dd"),Jf=t=>Number(t||0).toFixed(3);function GSe(){const[t,e]=v.useState(()=>{const R=new Date,M=new Date(R.getFullYear(),R.getMonth(),1);return Er(M,"yyyy-MM-dd")}),[r,n]=v.useState(KSe()),[a,s]=v.useState(!0),[i,l]=v.useState([]),[c,u]=v.useState([]),{refreshKey:d,refresh:f}=gc(),[h,A]=v.useState({}),[m,p]=v.useState({}),[g,x]=v.useState(!1),y=()=>x(R=>!R),[b,w]=v.useState(!1),j=()=>w(R=>!R),[I,_]=v.useState(!1),E=()=>_(R=>!R),[S,O]=v.useState("");v.useEffect(()=>{(async()=>{s(!0);const M=er(ht(ke,"salesV2"),ir("date",">=",t),ir("date","<=",r)),G=await Lt(M),X=[];G.forEach(me=>{const L=me.data(),he=L.date??"";if(Array.isArray(L.items)&&L.items.length>0){L.items.forEach((ne,z)=>{const ce=String(ne.productName??"(sin nombre)"),K=Number(ne.qty??0),oe=Number(ne.lineFinal??0)||Math.max(0,Number(ne.unitPrice||0)*K-Number(ne.discount||0));X.push({id:`${me.id}#${z}`,date:he,productName:ce,quantity:K,amount:oe,allocations:Array.isArray(ne.allocations)?ne.allocations:L.allocations,avgUnitCost:Number(ne.avgUnitCost??L.avgUnitCost??0),measurement:ne.measurement??L.measurement??""})});return}X.push({id:me.id,date:he,productName:L.productName??"(sin nombre)",quantity:Number(L.quantity??0),amount:Number(L.amount??L.amountCharged??0),allocations:Array.isArray(L.allocations)?L.allocations:[],avgUnitCost:Number(L.avgUnitCost??0),measurement:L.measurement??""})}),l(X);const D=er(ht(ke,"expenses"),ir("date",">=",t),ir("date","<=",r)),Q=await Lt(D),te=[];Q.forEach(me=>{const L=me.data();te.push({id:me.id,date:L.date??"",category:L.category??"(sin categora)",description:L.description??"",amount:Number(L.amount??0),status:L.status??"PAGADO",createdAt:L.createdAt})}),u(te),s(!1)})()},[t,r,d]),v.useMemo(()=>{const R=i.reduce((Q,te)=>Q+(te.amount||0),0);let M=0;i.forEach(Q=>{var te;(te=Q.allocations)!=null&&te.length?M+=Q.allocations.reduce((me,L)=>me+Number(L.lineCost||0),0):Q.avgUnitCost&&Q.quantity&&(M+=Number(Q.avgUnitCost)*Number(Q.quantity))});const G=R-M,X=c.reduce((Q,te)=>Q+(te.amount||0),0),D=G-X;return{revenue:R,cogsReal:M,grossProfit:G,expensesSum:X,netProfit:D}},[i,c]);const P=v.useMemo(()=>S?i.filter(R=>(R.productName||"")===S):i,[i,S]),T=v.useMemo(()=>{const R=P.reduce((Q,te)=>Q+(te.amount||0),0);let M=0;P.forEach(Q=>{var te;(te=Q.allocations)!=null&&te.length?M+=Q.allocations.reduce((me,L)=>me+Number(L.lineCost||0),0):Q.avgUnitCost&&Q.quantity&&(M+=Number(Q.avgUnitCost)*Number(Q.quantity))});const G=R-M,X=c.reduce((Q,te)=>Q+(te.amount||0),0),D=G-X;return{revenue:R,cogsReal:M,grossProfit:G,expensesSum:X,netProfit:D}},[P,c]),F=R=>String(R??"").toLowerCase().trim(),J=R=>Number(R.qty??R.quantity??0),ge=R=>["lb","lbs","libra","libras"].includes(F(R)),le=R=>["unidad","unidades","ud","uds","pieza","piezas"].includes(F(R));v.useMemo(()=>i.reduce((R,M)=>ge(M.measurement)?R+J(M):R,0),[i]);const de=v.useMemo(()=>P.reduce((R,M)=>ge(M.measurement)?R+J(M):R,0),[P]);v.useMemo(()=>i.reduce((R,M)=>le(M.measurement)?R+J(M):R,0),[i]);const Ae=v.useMemo(()=>P.reduce((R,M)=>le(M.measurement)?R+J(M):R,0),[P]),se=v.useMemo(()=>Array.from(new Set(i.map(R=>R.productName||"(sin nombre)"))).sort(),[i]),Ie=v.useMemo(()=>{var M;const R=new Map;for(const G of P){const X=G.productName||"(sin nombre)";R.has(X)||R.set(X,{productName:X,units:0,revenue:0,cogs:0,profit:0,firstDate:G.date||"",lastDate:G.date||""});const D=R.get(X);D.units+=Number(G.quantity||0),D.revenue+=Number(G.amount||0),(!D.firstDate||G.date<(D.firstDate||G.date))&&(D.firstDate=G.date),(!D.lastDate||G.date>(D.lastDate||G.date))&&(D.lastDate=G.date);let Q=0;(M=G.allocations)!=null&&M.length?Q=G.allocations.reduce((te,me)=>te+Number(me.lineCost||0),0):G.avgUnitCost&&(Q=Number(G.avgUnitCost)*Number(G.quantity||0)),D.cogs+=Q,D.profit=D.revenue-D.cogs}return Array.from(R.values()).sort((G,X)=>G.productName.localeCompare(X.productName))},[P]),Pe=v.useMemo(()=>[...Ie].sort((R,M)=>M.units-R.units).slice(0,3).map((R,M)=>({idx:M+1,name:R.productName,units:R.units})),[Ie]),k=R=>A(M=>({...M,[R]:!M[R]})),H=R=>p(M=>({...M,[R]:!M[R]}));return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),o.jsx(pc,{onClick:f,loading:a})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:R=>e(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:R=>n(R.target.value)})]})]}),a?o.jsx("p",{children:"Cargando"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex gap-2 mb-2 items-center",children:o.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:S,onChange:R=>O(R.target.value),children:[o.jsx("option",{value:"",children:"Todos los productos"}),se.map(R=>o.jsx("option",{value:R,children:R},R))]})}),o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:E,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"KPIs"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",o.jsx("b",{children:Ls(T.revenue)}),"  Utilidad Neta:"," ",o.jsx("b",{children:Ls(T.netProfit)})]})]}),o.jsx("div",{className:"text-gray-500",children:I?"":""})]}),I&&o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(nf,{title:"Ventas",value:Ls(T.revenue)}),o.jsx(nf,{title:"Costo",value:Ls(T.cogsReal)}),o.jsx(nf,{title:"Ganancia Bruta",value:Ls(T.grossProfit),positive:!0}),o.jsx(nf,{title:"Gastos",value:Ls(T.expensesSum)}),o.jsx(nf,{title:"Ganancia Neta",value:Ls(T.netProfit),positive:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(lC,{title:"Libras Vendidas",value:Jf(de)}),o.jsx(lC,{title:"Unidades Vendidas",value:Jf(Ae)}),o.jsx(VQ,{title:"Productos ms vendidos",items:Pe.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${Jf(R.units)})`}))})]})]})]})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[o.jsx(nf,{title:"Ventas",value:Ls(T.revenue)}),o.jsx(nf,{title:"Costo",value:Ls(T.cogsReal)}),o.jsx(nf,{title:"Ganancia Bruta",value:Ls(T.grossProfit),positive:!0}),o.jsx(nf,{title:"Gastos",value:Ls(T.expensesSum)}),o.jsx(nf,{title:"Ganancia Neta",value:Ls(T.netProfit),positive:!0})]}),o.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[o.jsx(lC,{title:"Libras Vendidas",value:Jf(de)}),o.jsx(lC,{title:"Unidades Vendidas",value:Jf(Ae)}),o.jsx(VQ,{title:"Productos ms vendidos",items:Pe.map(R=>({key:`${R.idx}`,label:`${R.idx}. ${R.name}`,value:`(${Jf(R.units)})`}))})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Fechas"}),o.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),o.jsx("th",{className:"border p-2",children:"Ingreso"}),o.jsx("th",{className:"border p-2",children:"Costo"}),o.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),o.jsxs("tbody",{children:[Ie.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.productName}),o.jsx("td",{className:"border p-1",children:R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:""}),o.jsx("td",{className:"border p-1",children:Jf(R.units)}),o.jsx("td",{className:"border p-1",children:Ls(R.revenue)}),o.jsx("td",{className:"border p-1",children:Ls(R.cogs)}),o.jsx("td",{className:`border p-1 ${R.profit>=0?"text-green-700":"text-red-700"}`,children:Ls(R.profit)})]},R.productName)),Ie.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:y,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Consolidado por producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[Ie.length," productos"]})]}),o.jsx("div",{className:"text-gray-500",children:g?"":""})]}),g&&o.jsx("div",{className:"space-y-2 mt-3",children:Ie.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):Ie.map(R=>{const M=!!h[R.productName],G=R.firstDate&&R.lastDate?R.firstDate===R.lastDate?R.firstDate:`${R.firstDate}  ${R.lastDate}`:"";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>k(R.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:R.productName}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Total: ",o.jsx("b",{children:Jf(R.units)}),"  Utilidad:"," ",o.jsx("b",{className:R.profit>=0?"text-green-700":"text-red-700",children:Ls(R.profit)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:M?"":""})]}),M&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx(af,{label:"Fechas",value:G}),o.jsx(af,{label:"Total",value:Jf(R.units)}),o.jsx(af,{label:"Ingreso",value:Ls(R.revenue)}),o.jsx(af,{label:"Costo",value:Ls(R.cogs)}),o.jsx(af,{label:"Utilidad",value:Ls(R.profit),valueClass:R.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},R.productName)})})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Categora"}),o.jsx("th",{className:"border p-2",children:"Descripcin"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Estado"})]})}),o.jsxs("tbody",{children:[c.map(R=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:R.date}),o.jsx("td",{className:"border p-1",children:R.category}),o.jsx("td",{className:"border p-1",children:R.description}),o.jsx("td",{className:"border p-1",children:Ls(R.amount)}),o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})})]},R.id)),c.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),o.jsxs("div",{className:"md:hidden mb-6",children:[o.jsxs("button",{type:"button",onClick:j,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),o.jsx("div",{className:"text-gray-500",children:b?"":""})]}),b&&o.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(R=>{const M=!!m[R.id],G=R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>H(R.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:R.category}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${G}`,children:R.status})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[R.date,"  ",o.jsx("b",{children:Ls(R.amount)})]})]}),o.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:M?"":""})]}),M&&o.jsx("div",{className:"px-3 pb-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsx(af,{label:"Fecha",value:R.date}),o.jsx(af,{label:"Categora",value:R.category}),o.jsx(af,{label:"Descripcin",value:R.description||""}),o.jsx(af,{label:"Monto",value:Ls(R.amount)}),o.jsx(af,{label:"Estado",value:R.status||""})]})})]},R.id)})})]})]})]})}function nf({title:t,value:e,positive:r}){return o.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${r?"text-green-700":""}`,children:e})]})}function lC({title:t,value:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),o.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function VQ({title:t,items:e}){return o.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[o.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),o.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?o.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>o.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function af({label:t,value:e,valueClass:r}){return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:t}),o.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const cC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],Rg=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function qSe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[i,l]=v.useState(Er(new Date,"yyyy-MM-dd")),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState("PENDIENTE"),[g,x]=v.useState(""),[y,b]=v.useState([]),[w,j]=v.useState(!0),[I,_]=v.useState(""),[E,S]=v.useState(null),[O,P]=v.useState(""),[T,F]=v.useState(""),[J,ge]=v.useState(""),[le,de]=v.useState(0),[Ae,se]=v.useState("PENDIENTE"),[Ie,Pe]=v.useState(""),[k,H]=v.useState(!1),R=()=>H(K=>!K),[M,G]=v.useState(null),X=K=>G(oe=>oe===K?null:K);v.useEffect(()=>{(async()=>{j(!0),_("");try{const K=er(ht(ke,"expenses"),on("date","desc")),oe=await Lt(K),xe=[];oe.forEach(De=>{const nt=De.data();xe.push({id:De.id,date:nt.date||Er(new Date,"yyyy-MM-dd"),category:nt.category||"",description:nt.description||"",amount:Number(nt.amount||0),status:nt.status||"PENDIENTE",notes:nt.notes||"",createdAt:nt.createdAt??dr.now()})}),b(xe)}catch(K){console.error(K),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const D=v.useMemo(()=>y.filter(K=>!(r&&K.date<r||a&&K.date>a)),[y,r,a]),Q=v.useMemo(()=>{const K=D.reduce((De,nt)=>De+(nt.amount||0),0),oe=D.filter(De=>De.status==="PAGADO").reduce((De,nt)=>De+(nt.amount||0),0),xe=K-oe;return{total:K,pagado:oe,pendiente:xe}},[D]),te=()=>{l(Er(new Date,"yyyy-MM-dd")),u(""),f(""),A(0),p("PENDIENTE"),x("")},me=async K=>{if(K.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!h||h<=0)return _("Ingresa un monto vlido.");try{const oe={date:i,category:c,description:d.trim(),amount:Number(Number(h||0).toFixed(2)),status:m,notes:g||"",createdAt:dr.now()},xe=await _n(ht(ke,"expenses"),oe);b(De=>[{id:xe.id,...oe},...De]),te(),_(" Gasto registrado")}catch(oe){console.error(oe),_(" Error al guardar gasto")}},L=K=>{_(""),S(K.id),P(K.date),F(K.category||""),ge(K.description||""),de(Number(K.amount||0)),se(K.status||"PENDIENTE"),Pe(K.notes||"")},he=()=>{S(null),P(""),F(""),ge(""),de(0),se("PENDIENTE"),Pe("")},ne=async()=>{if(E){if(!T)return _("Selecciona una categora.");if(!J.trim())return _("Ingresa una descripcin.");if(!le||le<=0)return _("Ingresa un monto vlido.");try{const K={date:O,category:T,description:J.trim(),amount:Number(Number(le||0).toFixed(2)),status:Ae,notes:Ie||""};await nn($t(ke,"expenses",E),K),b(oe=>oe.map(xe=>xe.id===E?{...xe,...K}:xe)),he(),_(" Gasto actualizado")}catch(K){console.error(K),_(" Error al actualizar gasto")}}},z=async K=>{if(confirm(`Eliminar el gasto "${K.description}"?`))try{await Cn($t(ke,"expenses",K.id)),b(xe=>xe.filter(De=>De.id!==K.id)),_(" Gasto borrado")}catch(xe){console.error(xe),_(" Error al borrar gasto")}},ce=K=>K==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),o.jsx(pc,{onClick:e,loading:w})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:K=>n(K.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:K=>s(K.target.value)})]})]}),o.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",Rg(Q.total)]}),o.jsxs("div",{children:["Pagado: ",Rg(Q.pagado)]}),o.jsxs("div",{children:["Pendiente: ",Rg(Q.pendiente)]})]})]}),o.jsxs("div",{className:"md:hidden mb-4",children:[o.jsxs("button",{type:"button",onClick:R,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Crear gasto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",i,"  Monto: ",h===0?"":Rg(h)]})]}),o.jsx("div",{className:"text-gray-500",children:k?"":""})]}),k&&o.jsxs("form",{onSubmit:me,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:K=>l(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:K=>u(K.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),cC.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:K=>f(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:K=>{const oe=String(K.target.value||"").replace(",","."),xe=parseFloat(oe);A(Number.isFinite(xe)?Math.max(0,xe):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:K=>p(K.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:K=>x(K.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})]}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("form",{onSubmit:me,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:i,onChange:K=>l(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:K=>u(K.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),cC.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:K=>f(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:h===0?"":h,onChange:K=>{const oe=String(K.target.value||"").replace(",","."),xe=parseFloat(oe);A(Number.isFinite(xe)?Math.max(0,xe):0)},placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:K=>p(K.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:g,onChange:K=>x(K.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[g.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),o.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})}),o.jsx("div",{className:"block md:hidden space-y-3",children:w?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):D.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):D.map(K=>{const oe=M===K.id,xe=E===K.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>X(K.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:K.description}),o.jsxs("div",{className:"text-xs text-gray-500",children:[K.category||"","  ",K.date]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"font-bold",children:Rg(K.amount)}),o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce(K.status)}`,children:K.status})]})]}),oe&&o.jsxs("div",{className:"p-3",children:[o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:K.notes?K.notes:""}),xe?o.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:De=>P(De.target.value)}),o.jsxs("select",{className:"w-full border p-2 rounded",value:T,onChange:De=>F(De.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),cC.map(De=>o.jsx("option",{value:De,children:De},De))]}),o.jsx("input",{className:"w-full border p-2 rounded",value:J,onChange:De=>ge(De.target.value)}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(le)?"":le,onChange:De=>{const nt=String(De.target.value||"").replace(",","."),Me=parseFloat(nt);de(Number.isFinite(Me)?Math.max(0,Me):0)}}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ae,onChange:De=>se(De.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Ie,onChange:De=>Pe(De.target.value),maxLength:500}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ne,children:"Guardar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:he,children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(K),children:"Editar"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(K),children:"Borrar"})]})]})]},K.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:w?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):D.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):D.map(K=>{const oe=E===K.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:O,onChange:xe=>P(xe.target.value)}):K.date}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("select",{className:"w-full border p-1 rounded",value:T,onChange:xe=>F(xe.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),cC.map(xe=>o.jsx("option",{value:xe,children:xe},xe))]}):K.category||""}),o.jsx("td",{className:"p-2 border",children:oe?o.jsx("input",{className:"w-full border p-1 rounded",value:J,onChange:xe=>ge(xe.target.value)}):o.jsx("span",{title:K.description,children:K.description.length>45?K.description.slice(0,45)+"":K.description})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(le)?"":le,onChange:xe=>{const De=String(xe.target.value||"").replace(",","."),nt=parseFloat(De);de(Number.isFinite(nt)?Math.max(0,nt):0)}}):Rg(K.amount)}),o.jsx("td",{className:"p-2 border",children:oe?o.jsxs("select",{className:"w-full border p-1 rounded",value:Ae,onChange:xe=>se(xe.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ce(K.status)}`,children:K.status})}),o.jsx("td",{className:"p-2 border",children:oe?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Ie,onChange:xe=>Pe(xe.target.value),maxLength:500}):o.jsx("span",{title:K.notes||"",children:(K.notes||"").length>45?(K.notes||"").slice(0,45)+"":K.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:oe?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ne,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:he,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>L(K),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>z(K),children:"Borrar"})]})})})]},K.id)})})]})}),I&&o.jsx("p",{className:"mt-2 text-sm",children:I})]})}function eS(t){return(t||"").trim().toLowerCase()}async function lte(){const t=await Lt(ht(ke,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=eS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function zSe(t=!1){const e=await lte(),r=await Lt(ht(ke,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),i=eS(s.productName);if(!i){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(i);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await nn($t(ke,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function WSe(t,e=!1){const r=eS(t),a=(await lte()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Lt(ht(ke,"inventory_batches"));let i=0;for(const l of s.docs){const c=l.data();eS(c.productName)===r&&c.productId!==a&&(e||await nn($t(ke,"inventory_batches",l.id),{productId:a}),i++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${i} lote(s)`),i}function XSe(){const[t,e]=v.useState(!1),[r,n]=v.useState(""),a=async()=>{try{e(!0),n("");const c=await zSe(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,i]=v.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await WSe(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return o.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[o.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",o.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),o.jsx("div",{className:"space-y-2",children:o.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),o.jsx("hr",{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),o.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>i(c.target.value)}),o.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&o.jsx("p",{className:"text-sm",children:r})]})}const Pc=t=>`C$${Number(t||0).toFixed(2)}`,Mg=t=>Number(t||0).toFixed(3),YSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),Fj=()=>{const t=new Date;return Er(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},uC=()=>Er(new Date,"yyyy-MM-dd");function JSe({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState(Fj()),[i,l]=v.useState(uC()),[c,u]=v.useState(""),d=v.useMemo(()=>{const je=new Map;return n.forEach(pe=>je.set(pe.productId,{id:pe.productId,name:pe.productName})),Array.from(je.values()).sort((pe,He)=>pe.name.localeCompare(He.name))},[n]),f=v.useMemo(()=>n.filter(je=>!(a&&je.date<a||i&&je.date>i||c&&je.productId!==c)),[n,a,i,c]),[h,A]=v.useState(uC()),[m,p]=v.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[g,x]=v.useState(""),[y,b]=v.useState([]);v.useEffect(()=>{b(je=>{const pe=je.filter(He=>f.some(at=>at.id===He));return pe.length===0&&f.length>0?f.map(He=>He.id):pe})},[f]);const[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState(!1),[O,P]=v.useState(Fj()),[T,F]=v.useState(uC());v.useEffect(()=>{(async()=>{try{S(!0);const je=er(ht(ke,"expenses"),on("date","desc")),pe=await Lt(je),He=[];pe.forEach(at=>{const yt=at.data();He.push({id:at.id,date:yt.date,description:yt.description,amount:Number(yt.amount||0)})}),j(He)}catch(je){console.error(je)}finally{S(!1)}})()},[]);const J=v.useMemo(()=>w.filter(je=>!(!je.date||O&&je.date<O||T&&je.date>T)),[w,O,T]),[ge,le]=v.useState([]),[de,Ae]=v.useState(!1),[se,Ie]=v.useState(""),[Pe,k]=v.useState("DEBITO"),[H,R]=v.useState(""),M=()=>{const je=Number(H);!se.trim()||!isFinite(je)||je<=0||(le(pe=>[...pe,{id:`${Date.now()}_${pe.length+1}`,description:se.trim(),type:Pe,amount:Number(je.toFixed(2))}]),Ie(""),R(""))},[G,X]=v.useState(null),[D,Q]=v.useState(""),[te,me]=v.useState("DEBITO"),[L,he]=v.useState(""),ne=je=>{X(je.id),Q(je.description),me(je.type),he(je.amount.toFixed(2))},z=()=>{X(null),Q(""),me("DEBITO"),he("")},ce=()=>{if(!G)return;const je=Number(L);!isFinite(je)||je<=0||(le(pe=>pe.map(He=>He.id===G?{...He,description:D.trim(),type:te,amount:Number(je.toFixed(2))}:He)),z())},K=je=>{le(pe=>pe.filter(He=>He.id!==je)),G===je&&z()},oe=(je,pe)=>{b(He=>pe?[...new Set([...He,je])]:He.filter(at=>at!==je))},xe=je=>{b(je?f.map(pe=>pe.id):[])},De=(je,pe)=>{_(He=>pe?[...new Set([...He,je])]:He.filter(at=>at!==je))},nt=v.useMemo(()=>f.filter(je=>y.includes(je.id)),[f,y]),Me=v.useMemo(()=>ge.filter(je=>je.type==="DEBITO").reduce((je,pe)=>je+pe.amount,0),[ge]),Je=v.useMemo(()=>ge.filter(je=>je.type==="CREDITO").reduce((je,pe)=>je+pe.amount,0),[ge]),lt=v.useMemo(()=>{let je=0,pe=0,He=0,at=0;for(const kt of nt){YSe(kt.unit)?je+=Number(kt.quantity||0):pe+=Number(kt.quantity||0);const Vt=kt.expectedTotal??Number((Number(kt.quantity||0)*Number(kt.salePrice||0)).toFixed(2)),ve=kt.invoiceTotal!==void 0&&kt.invoiceTotal!==null?Number(kt.invoiceTotal):Number((Number(kt.quantity||0)*Number(kt.purchasePrice||0)).toFixed(2));He+=Number(Vt||0),at+=Number(ve||0)}const yt=J.filter(kt=>I.includes(kt.id)).reduce((kt,Vt)=>kt+Number(Vt.amount||0),0),bt=He-yt-Me+Je;return{totalLbs:je,totalUnits:pe,totalExpected:Number(He.toFixed(2)),totalInvoiced:Number(at.toFixed(2)),totalGastos:Number(yt.toFixed(2)),debits:Number(Me.toFixed(2)),credits:Number(Je.toFixed(2)),finalAmount:Number(bt.toFixed(2)),grossProfit:Number((He-at).toFixed(2))}},[nt,J,I,Me,Je]),[ft,Ge]=v.useState(!1),[ye,We]=v.useState(""),qe=async()=>{if(We(""),nt.length===0){We("Selecciona al menos 1 lote pagado.");return}try{Ge(!0);const je={number:m.trim(),date:h,description:g.trim(),status:"PENDIENTE",createdAt:dr.now(),totalLbs:Number(Mg(lt.totalLbs)),totalUnits:Number(Mg(lt.totalUnits)),totalAmount:lt.totalExpected,invoiceTotal:lt.totalInvoiced,totalExpenses:lt.totalGastos,totalDebits:lt.debits,totalCredits:lt.credits,finalAmount:lt.finalAmount,batches:nt.map(pe=>{var He;return{id:pe.id,productId:pe.productId,productName:pe.productName,unit:pe.unit,quantity:Number(Mg(pe.quantity)),salePrice:Number(Number(pe.salePrice||0).toFixed(2)),purchasePrice:Number(Number(pe.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(pe.quantity||0)*Number(pe.salePrice||0)).toFixed(2)),invoiceTotal:pe.invoiceTotal!==void 0&&pe.invoiceTotal!==null?Number(pe.invoiceTotal):Number((Number(pe.quantity||0)*Number(pe.purchasePrice||0)).toFixed(2)),batchDate:pe.date,paidAt:(He=pe.paidAt)!=null&&He.toDate?Er(pe.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:J.filter(pe=>I.includes(pe.id)).map(pe=>({id:pe.id,date:pe.date||null,description:pe.description||"",amount:Number(Number(pe.amount||0).toFixed(2))})),adjustments:ge.map(pe=>({id:pe.id,description:pe.description,type:pe.type,amount:Number(pe.amount.toFixed(2))}))};await _n(ht(ke,"invoices"),je),We(" Factura creada."),r()}catch(je){console.error(je),We(` Error al crear factura: ${(je==null?void 0:je.message)||"desconocido"}`)}finally{Ge(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:h,onChange:je=>A(je.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:je=>p(je.target.value),placeholder:"FAC-001"})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:g,onChange:je=>x(je.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:je=>s(je.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:je=>l(je.target.value)})]}),o.jsxs("div",{className:"min-w-[220px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:je=>u(je.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),d.map(je=>o.jsx("option",{value:je.id,children:je.name},je.id))]})]}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(Fj()),l(uC()),u("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:je=>xe(je.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha lote"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Cantidad"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total facturado"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),o.jsx("tbody",{children:f.map(je=>{var bt;const pe=y.includes(je.id),He=je.expectedTotal??Number((Number(je.quantity||0)*Number(je.salePrice||0)).toFixed(2)),at=je.invoiceTotal!==void 0&&je.invoiceTotal!==null?Number(je.invoiceTotal):Number((Number(je.quantity||0)*Number(je.purchasePrice||0)).toFixed(2)),yt=He-at;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:pe,onChange:kt=>oe(je.id,kt.target.checked)})}),o.jsx("td",{className:"p-2 border",children:je.date}),o.jsx("td",{className:"p-2 border",children:je.productName}),o.jsx("td",{className:"p-2 border",children:(je.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Mg(je.quantity)}),o.jsx("td",{className:"p-2 border",children:Pc(je.salePrice)}),o.jsx("td",{className:"p-2 border",children:Pc(at)}),o.jsx("td",{className:"p-2 border",children:Pc(He)}),o.jsx("td",{className:"p-2 border",children:Pc(yt)}),o.jsx("td",{className:"p-2 border",children:(bt=je.paidAt)!=null&&bt.toDate?Er(je.paidAt.toDate(),"yyyy-MM-dd"):""})]},je.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),E&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:O,onChange:je=>P(je.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:T,onChange:je=>F(je.target.value)})]})]})]}),J.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:J.map(je=>{const pe=I.includes(je.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:pe,onChange:He=>De(je.id,He.target.checked)})}),o.jsx("td",{className:"p-2 border",children:je.date||""}),o.jsx("td",{className:"p-2 border",children:je.description||""}),o.jsx("td",{className:"p-2 border",children:Pc(Number(je.amount||0))})]},je.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ae(!0),children:"Crear Cargo"})]}),ge.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:ge.map(je=>{const pe=G===je.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:pe?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:D,onChange:He=>Q(He.target.value)}):o.jsx("span",{title:je.description,children:je.description.length>60?`${je.description.slice(0,60)}`:je.description})}),o.jsx("td",{className:"p-2 border",children:pe?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:te,onChange:He=>me(He.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${je.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:je.type})}),o.jsx("td",{className:"p-2 border",children:pe?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:L,onChange:He=>he(He.target.value)}):Pc(je.amount)}),o.jsx("td",{className:"p-2 border",children:pe?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:ce,children:"Guardar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:z,children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>K(je.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ne(je),children:"Editar"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>K(je.id),children:"Eliminar"})]})})]},je.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total libras: ",o.jsx("strong",{children:Mg(lt.totalLbs)})]}),o.jsxs("div",{children:["Total unidades: ",o.jsx("strong",{children:Mg(lt.totalUnits)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total facturado (costo):"," ",o.jsx("strong",{children:Pc(lt.totalInvoiced)})]}),o.jsxs("div",{children:["Total esperado (ventas):"," ",o.jsx("strong",{children:Pc(lt.totalExpected)})]}),o.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",o.jsx("strong",{children:Pc(lt.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:Pc(lt.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:Pc(lt.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:Pc(lt.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",o.jsx("span",{className:"text-blue-700",children:Pc(lt.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",disabled:ft,onClick:qe,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:ft?"Creando":"Crear factura"}),o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),ye&&o.jsx("span",{className:"text-sm ml-2",children:ye})]}),ft&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),de&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>Ae(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:se,onChange:je=>Ie(je.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:je=>k(je.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:H,onChange:je=>R(je.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Agregar"})})]})]})})]})}const Au=t=>`C$ ${Number(t||0).toFixed(2)}`,Yl=t=>Number(t||0).toFixed(3),ZSe=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function eIe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(!1),[i,l]=v.useState(null),[c,u]=v.useState(Er(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=v.useState(Er(new Date,"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(!1),{refreshKey:g,refresh:x}=gc(),[y,b]=v.useState(!1),w=()=>b(F=>!F),[j,I]=v.useState(null),_=F=>I(J=>J===F?null:F);v.useEffect(()=>{(async()=>{n(!0);const F=er(ht(ke,"inventory_batches"),ir("status","==","PAGADO"),on("date","desc")),J=await Lt(F),ge=[];J.forEach(le=>{const de=le.data(),Ae=Number(de.quantity||0),se=Number(de.remaining||0),Ie=Number(de.purchasePrice||0),Pe=Number(de.salePrice||0),k=Number((Ae*Ie).toFixed(2)),H=Number((Ae*Pe).toFixed(2));ge.push({id:le.id,productId:de.productId,productName:de.productName,category:de.category,unit:de.unit,quantity:Ae,remaining:se,purchasePrice:Ie,salePrice:Pe,invoiceTotal:de.invoiceTotal!=null?Number(de.invoiceTotal):k,expectedTotal:de.expectedTotal!=null?Number(de.expectedTotal):H,date:de.date,status:de.status,paidAt:de.paidAt})}),e(ge),n(!1)})()},[g]);const E=v.useMemo(()=>t.filter(F=>!(c&&F.date<c||d&&F.date>d||h&&F.productId!==h)),[t,c,d,h]),S=v.useMemo(()=>{let F=0,J=0,ge=0,le=0,de=0,Ae=0;for(const se of E)ZSe(se.unit)?(F+=se.quantity,J+=se.remaining):(ge+=se.quantity,le+=se.remaining),de+=Number(se.expectedTotal||0),Ae+=Number(se.invoiceTotal||0);return{lbsIng:F,lbsRem:J,udsIng:ge,udsRem:le,totalEsperado:de,totalFact:Ae,gross:de-Ae}},[E]),O=F=>{l(F),s(!0)},P=async()=>{if(i)try{const F=$t(ke,"inventory_batches",i.id);await nn(F,{status:"PENDIENTE",remaining:i.quantity});const J=ht(ke,"salesV2"),ge=await Lt(er(J,ir("batchId","==",i.id))),le=await Lt(er(J,ir("productName","==",i.productName),ir("date","==",i.date))),de=[...ge.docs,...le.docs];for(const Ae of de)await Cn($t(ke,"salesV2",Ae.id));s(!1),l(null),x()}catch(F){console.error("Error al marcar pendiente:",F)}},T=v.useMemo(()=>{const F=new Map;return t.forEach(J=>F.set(J.productId,{id:J.productId,name:J.productName})),Array.from(F.values()).sort((J,ge)=>J.name.localeCompare(ge.name))},[t]);return o.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),o.jsx(pc,{onClick:x,loading:r})]}),o.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:F=>u(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:F=>f(F.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:F=>A(F.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),T.map(F=>o.jsx("option",{value:F.id,children:F.name},F.id))]})]}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"})]}),o.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"Totales"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",o.jsx("b",{children:Yl(S.lbsIng)}),"  Restantes:"," ",o.jsx("b",{children:Yl(S.lbsRem)})]})]}),o.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&o.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Yl(S.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Yl(S.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Au(S.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Yl(S.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Yl(S.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Au(S.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Au(S.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",E.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Yl(S.lbsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Yl(S.udsIng)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Au(S.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Yl(S.lbsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Yl(S.udsRem)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Au(S.totalFact)]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Au(S.gross)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",E.length.toLocaleString()]})]})})]}),o.jsx("div",{className:"block md:hidden space-y-3",children:r?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):E.length===0?o.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):E.map(F=>{var ge;const J=j===F.id;return o.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",onClick:()=>_(F.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:F.productName}),o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(F.category||"").toUpperCase(),"  ",F.date," "," ",(F.unit||"").toUpperCase()]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-sm font-bold",children:Au(F.expectedTotal||0)}),o.jsx("div",{className:"text-[11px] text-gray-500",children:J?"Detalles":"Esperado"})]})]}),J&&o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),o.jsx("div",{className:"font-semibold",children:Yl(F.quantity)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:Yl(F.remaining)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:Au(F.invoiceTotal||0)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),o.jsx("div",{className:"font-semibold",children:(ge=F.paidAt)!=null&&ge.toDate?Er(F.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>O(F),children:"Marcar PENDIENTE"})})]})]},F.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Unidad"}),o.jsx("th",{className:"p-2 border",children:"Ingresado"}),o.jsx("th",{className:"p-2 border",children:"Restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Compra"}),o.jsx("th",{className:"p-2 border",children:"Precio Venta"}),o.jsx("th",{className:"p-2 border",children:"Total factura"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Fecha pago"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):E.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):E.map(F=>{var J;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:F.date}),o.jsx("td",{className:"p-2 border",children:(F.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:F.productName}),o.jsx("td",{className:"p-2 border",children:(F.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 border",children:Yl(F.quantity)}),o.jsx("td",{className:"p-2 border",children:Yl(F.remaining)}),o.jsx("td",{className:"p-2 border",children:Au(F.purchasePrice)}),o.jsx("td",{className:"p-2 border",children:Au(F.salePrice)}),o.jsx("td",{className:"p-2 border",children:Au(F.invoiceTotal||0)}),o.jsx("td",{className:"p-2 border",children:Au(F.expectedTotal||0)}),o.jsx("td",{className:"p-2 border",children:(J=F.paidAt)!=null&&J.toDate?Er(F.paidAt.toDate(),"yyyy-MM-dd"):""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>O(F),children:"Marcar PENDIENTE"})})]},F.id)})})]})}),m&&o.jsx(JSe,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&i&&o.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",o.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const Zi=t=>`C$ ${(Number(t)||0).toFixed(2)}`,tIe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function dC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function rIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function nIe(t){const e="ROP",r=dC(t.subcat).slice(0,3)||"GEN",n=rIe(t.gender),a=dC(t.color).slice(0,3)||"COL",s=dC(t.size)||"TLL",i=dC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${i}-${l}`}const U1=/^[A-Za-z0-9._-]{0,32}$/;function aIe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(Er(new Date,"yyyy-MM-dd")),[y,b]=v.useState(0),[w,j]=v.useState(0),[I,_]=v.useState(0),[E,S]=v.useState(0),[O,P]=v.useState(0),[T,F]=v.useState(""),[J,ge]=v.useState(""),[le,de]=v.useState(""),[Ae,se]=v.useState(""),[Ie,Pe]=v.useState(""),[k,H]=v.useState(""),[R,M]=v.useState(""),[G,X]=v.useState(!1),[D,Q]=v.useState(""),[te,me]=v.useState("Camisa"),[L,he]=v.useState(null),[ne,z]=v.useState(""),[ce,K]=v.useState(0),[oe,xe]=v.useState(0),[De,nt]=v.useState(0),[Me,Je]=v.useState(0),[lt,ft]=v.useState(0),[Ge,ye]=v.useState(""),[We,qe]=v.useState(""),[je,pe]=v.useState(""),[He,at]=v.useState(""),[yt,bt]=v.useState(""),[kt,Vt]=v.useState(""),[ve,Qe]=v.useState(""),[Z,$e]=v.useState(null),[Le,Ve]=v.useState({x:0,y:0}),[At,pt]=v.useState(!1);v.useEffect(()=>{const W=()=>$e(null),re=fe=>fe.key==="Escape"&&$e(null);return document.addEventListener("click",W),document.addEventListener("keydown",re),()=>{document.removeEventListener("click",W),document.removeEventListener("keydown",re)}},[]);const Be=(W,re,fe=192,Ne=160)=>{let Xe=W;W+fe+8>window.innerWidth&&(Xe=W-fe),Xe=Math.max(8,Math.min(Xe,window.innerWidth-fe-8));let it=re;return re+Ne+8>window.innerHeight&&(it=window.innerHeight-Ne-8),it=Math.max(8,Math.min(it,window.innerHeight-Ne-8)),{x:Xe,y:it}},gt=(W,re)=>{W.stopPropagation();const fe=W.currentTarget.getBoundingClientRect(),Ne=fe.right,be=fe.bottom,Xe=Be(Ne,be);Ve(Xe),$e(it=>it===re?null:re)};v.useEffect(()=>{const W=()=>$e(null),re=fe=>{fe.key==="Escape"&&$e(null)};return document.addEventListener("click",W),document.addEventListener("keydown",re),()=>{document.removeEventListener("click",W),document.removeEventListener("keydown",re)}},[]),v.useEffect(()=>{if(!Z)return;const W=()=>$e(null);return window.addEventListener("scroll",W,!0),window.addEventListener("resize",W),()=>{window.removeEventListener("scroll",W,!0),window.removeEventListener("resize",W)}},[Z]),v.useEffect(()=>{(async()=>{const W=await Lt(ht(ke,"products_clothes")),re=[];W.forEach(Xe=>{const it=Xe.data();re.push({id:Xe.id,name:it.name??"(sin nombre)",category:it.category??"(sin categora)",measurement:it.measurement??"unidad",price:Number(it.price??0),sku:it.sku||"",size:it.size||"",color:it.color||"",gender:it.gender||"",brand:it.brand||""})}),e(re);const fe=er(ht(ke,"inventory_clothes_batches"),on("date","desc")),Ne=await Lt(fe),be=[];Ne.forEach(Xe=>{const it=Xe.data();be.push({id:Xe.id,productId:it.productId,productName:it.productName,category:it.category,unit:it.unit,quantity:Number(it.quantity||0),remaining:Number(it.remaining??it.quantity??0),purchasePrice:Number(it.purchasePrice||0),salePrice:Number(it.salePrice||0),invoiceTotal:Number(it.invoiceTotal??Number(it.quantity||0)*Number(it.purchasePrice||0)),expectedTotal:Number(it.expectedTotal??Number(it.quantity||0)*Number(it.salePrice||0)),date:it.date,createdAt:it.createdAt,status:it.status,notes:it.notes||"",sku:it.sku||"",size:it.size||"",color:it.color||"",gender:it.gender||"",brand:it.brand||"",clientCode:it.clientCode||""})}),n(be),s(!1)})()},[]),v.useEffect(()=>{const W=t.find(re=>re.id===m);W&&(_(Number(W.price||0)),W.sku&&ge(W.sku),W.size&&de(re=>re||W.size),W.color&&se(re=>re||W.color),W.gender&&Pe(re=>re||W.gender),W.brand&&H(re=>re||W.brand))},[m,t]),v.useEffect(()=>{S(Math.floor(y*w*100)/100)},[y,w]),v.useEffect(()=>{P(Math.floor(y*I*100)/100)},[y,I]),v.useEffect(()=>{const W=t.find(Ne=>Ne.id===m);if(W!=null&&W.sku){ge(W.sku);return}const re=G&&te?te:(W==null?void 0:W.category)||"";if(!re&&!Ie&&!Ae&&!le&&!k){ge("");return}const fe=nIe({subcat:re,gender:Ie||"",color:Ae||"",size:le||"",brand:k||""});ge(fe)},[G,te,m,Ie,Ae,le,k,t]);const V=v.useMemo(()=>r.filter(W=>!(c&&W.date<c||d&&W.date>d||h&&W.productId!==h)),[r,c,d,h]),ae=v.useMemo(()=>{const W=V.reduce((be,Xe)=>be+(Xe.invoiceTotal||0),0),re=V.reduce((be,Xe)=>be+(Xe.expectedTotal||0),0),fe=V.reduce((be,Xe)=>be+Xe.quantity,0),Ne=V.reduce((be,Xe)=>be+Xe.remaining,0);return{udsIng:fe,udsRem:Ne,totalFacturado:W,totalEsperado:re}},[V]),Se=async W=>{W.preventDefault(),l("");const re=!!m&&!G,fe=t.find(it=>it.id===m),Ne=re?(fe==null?void 0:fe.name)||"":D||"",be=re?(fe==null?void 0:fe.category)||"":te||"General",Xe=re&&(fe==null?void 0:fe.measurement)||"unidad";if(!Ne||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(R&&!U1.test(R)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const it=await _n(ht(ke,"inventory_clothes_batches"),{productId:re?fe.id:"",productName:Ne,category:be,unit:Xe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:E,expectedTotal:O,date:g,createdAt:dr.now(),status:"PENDIENTE",notes:T||"",sku:J||"",size:le||"",color:Ae||"",gender:Ie||"",brand:k||"",clientCode:R||""});n(xt=>[{id:it.id,productId:re?fe.id:"",productName:Ne,category:be,unit:Xe,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:E,expectedTotal:O,date:g,createdAt:dr.now(),status:"PENDIENTE",notes:T||"",sku:J||"",size:le||"",color:Ae||"",gender:Ie||"",brand:k||"",clientCode:R||""},...xt]),l(" Lote de ropa creado"),p(""),x(Er(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),S(0),P(0),F(""),ge(""),de(""),se(""),Pe(""),H(""),M(""),X(!1),Q(""),me("Camisa")}catch(it){console.error(it),l(" Error al crear lote")}},_e=async W=>{confirm(`Marcar PAGADO el lote del ${W.date} (${W.productName})?`)&&(await nn($t(ke,"inventory_clothes_batches",W.id),{status:"PAGADO"}),n(fe=>fe.map(Ne=>Ne.id===W.id?{...Ne,status:"PAGADO"}:Ne)))},Ee=W=>{he(W.id),z(W.date),K(W.quantity),xe(W.purchasePrice),nt(W.salePrice),Je(Number((W.quantity*W.purchasePrice).toFixed(2))),ft(Number((W.quantity*W.salePrice).toFixed(2))),ye(W.notes||""),qe(W.sku||""),pe(W.size||""),at(W.color||""),bt(W.gender||""),Vt(W.brand||""),Qe(W.clientCode||"")},ze=()=>{he(null),z(""),K(0),xe(0),nt(0),Je(0),ft(0),ye(""),qe(""),pe(""),at(""),bt(""),Vt(""),Qe("")};v.useEffect(()=>{L&&Je(Math.floor(ce*oe*100)/100)},[L,ce,oe]),v.useEffect(()=>{L&&ft(Math.floor(ce*De*100)/100)},[L,ce,De]);const ut=async()=>{if(!L)return;const W=r.find(be=>be.id===L);if(!W)return;const re=Math.max(0,W.quantity-W.remaining),fe=Math.max(0,ce-re);if(ve&&!U1.test(ve)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const Ne=$t(ke,"inventory_clothes_batches",L);await nn(Ne,{date:ne,quantity:ce,purchasePrice:oe,salePrice:De,invoiceTotal:Me,expectedTotal:lt,notes:Ge,remaining:fe,sku:We,size:je,color:He,gender:yt||"",brand:kt||"",clientCode:ve||""}),n(be=>be.map(Xe=>Xe.id===L?{...Xe,date:ne,quantity:ce,purchasePrice:oe,salePrice:De,invoiceTotal:Me,expectedTotal:lt,notes:Ge,remaining:fe,sku:We,size:je,color:He,gender:yt||"",brand:kt||"",clientCode:ve||""}:Xe)),ze(),l(" Lote actualizado")},st=async W=>{confirm(`Eliminar el lote del ${W.date} (${W.productName})?`)&&(await Cn($t(ke,"inventory_clothes_batches",W.id)),n(fe=>fe.filter(Ne=>Ne.id!==W.id)),l(" Lote eliminado"))},ee=()=>{const W=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),re=Xe=>(Xe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),fe=V.map(Xe=>`
      <tr>
        <td>${Xe.date}</td>
        <td>${(Xe.category||"").toUpperCase()}</td>
        <td>${re(Xe.productName)}</td>
        <td>${re(Xe.sku||"")}</td>
        <td>${re(Xe.size||"")}</td>
        <td>${re(Xe.color||"")}</td>
        <td>${re(Xe.clientCode||"")}</td>
        <td>${re(Xe.gender||"")}</td>
        <td>${(Xe.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${Xe.quantity.toFixed(0)}</td>
        <td style="text-align:right">${Xe.remaining.toFixed(0)}</td>
        <td style="text-align:right">${Zi(Xe.purchasePrice)}</td>
        <td style="text-align:right">${Zi(Xe.salePrice)}</td>
        <td style="text-align:right">${Zi(Xe.invoiceTotal||0)}</td>
        <td style="text-align:right">${Zi(Xe.expectedTotal||0)}</td>
        <td>${re((Xe.notes||"").slice(0,120))}</td>
        <td>${Xe.status}</td>
      </tr>`).join(""),Ne=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${W}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${ae.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${ae.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${Zi(ae.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${Zi(ae.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${Zi(Number((ae.totalEsperado-ae.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${fe||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,be=window.open("","_blank");be&&(be.document.open(),be.document.write(Ne),be.document.close())};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>pt(!0),type:"button",children:"Crear Inventario"})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:W=>u(W.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:W=>f(W.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:W=>A(W.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(W=>o.jsxs("option",{value:W.id,children:[W.name,"  ",W.category]},W.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A("")},children:"Quitar filtro"}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ee,children:"Imprimir PDF"})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:o.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",ae.udsIng.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",ae.udsRem.toFixed(0)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",Zi(ae.totalEsperado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",Zi(ae.totalFacturado)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",Zi(Number((ae.totalEsperado-ae.totalFacturado).toFixed(2)))]})]})}),o.jsx("div",{className:"bg-white rounded shadow border",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),o.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),o.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),o.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),o.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):V.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):V.map(W=>{const re=L===W.id;return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 md:p-3 border align-top",children:re?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ne,onChange:fe=>z(fe.target.value)}):W.date}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(W.category||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:o.jsx("span",{className:"block truncate",title:W.productName,children:W.productName})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:We,onChange:fe=>qe(fe.target.value)}):o.jsx("span",{className:"block truncate",title:W.sku||"",children:W.sku||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:je,onChange:fe=>pe(fe.target.value)}):W.size||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:He,onChange:fe=>at(fe.target.value)}):W.color||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:re?o.jsx("input",{className:"w-full border p-1 rounded",value:ve,onChange:fe=>{const Ne=fe.target.value;U1.test(Ne)&&Qe(Ne)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):o.jsx("span",{className:"block truncate",title:W.clientCode||"",children:W.clientCode||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:re?o.jsx("select",{className:"w-full border p-1 rounded",value:yt,onChange:fe=>bt(fe.target.value),children:tIe.map(fe=>o.jsx("option",{value:fe,children:fe||""},fe))}):W.gender||""}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(W.unit||"").toUpperCase()}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:re?o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(ce)?"":ce,onChange:fe=>K(Math.max(0,parseInt(fe.target.value||"0",10)))}):W.quantity.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:re?W.remaining:W.remaining.toFixed(0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:re?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(oe)?"":oe,onChange:fe=>xe(Math.max(0,parseFloat(fe.target.value||"0")))}):Zi(W.purchasePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:re?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(De)?"":De,onChange:fe=>nt(Math.max(0,parseFloat(fe.target.value||"0")))}):Zi(W.salePrice)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Zi(re?Me:W.invoiceTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:Zi(re?lt:W.expectedTotal||0)}),o.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:re?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Ge,onChange:fe=>ye(fe.target.value),maxLength:500}):o.jsx("span",{className:"block truncate",title:W.notes||"",children:W.notes||""})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${W.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:W.status})}),o.jsx("td",{className:"p-2 md:p-3 border align-top",children:re?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ut,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ze,children:"Cancelar"})]}):o.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:fe=>gt(fe,W.id),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),o.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},W.id)})})]})})}),Z&&Lu.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:()=>$e(null),className:"fixed inset-0 z-[60]"}),o.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:Le.x,top:Le.y},onClick:W=>W.stopPropagation(),role:"menu","aria-orientation":"vertical",children:o.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const W=V.find(re=>re.id===Z);return(W==null?void 0:W.status)==="PENDIENTE"?o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{$e(null),_e(W)},children:" Pagar"}):null})(),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const W=V.find(re=>re.id===Z);W&&($e(null),Ee(W))},children:" Editar"}),o.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const W=V.find(re=>re.id===Z);W&&($e(null),st(W))},children:" Borrar"})]})})]}),document.body),At&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>pt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>pt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:Se,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:W=>p(W.target.value),children:[o.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(W=>o.jsxs("option",{value:W.id,children:[W.name,"  ",W.category,"  ",W.sku?`SKU: ${W.sku}`:""]},W.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:g,onChange:W=>x(W.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:W=>b(Math.max(0,parseInt(W.target.value||"0",10))),placeholder:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:W=>j(Math.max(0,parseFloat(W.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:W=>_(Math.max(0,parseFloat(W.target.value||"0")))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:J,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:le,readOnly:!0,onChange:W=>de(W.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Ae,readOnly:!0,onChange:W=>se(W.target.value),placeholder:"Negro, Azul, Rojo"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Ie,readOnly:!0,onChange:W=>Pe(W.target.value),placeholder:"Masculino, Femenino, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:k,onChange:W=>H(W.target.value),placeholder:"Shein, Usado, Otro"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:R,onChange:W=>{const re=W.target.value;U1.test(re)&&M(re)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!U1.test(R)&&R.length>0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:T,onChange:W=>F(W.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[T.length,"/500"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Zi(E),readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),o.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:Zi(O),readOnly:!0})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>pt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const sIe=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],iIe=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],oIe=["XS","S","M","L","XL","2XL"],lIe=["2","4","6","8","10","12","14"],cIe=["26","28","30","32","34","36","38"],uIe=["Shein","Usado","Otro"],dIe=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function fC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function fIe(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function AIe(t){const e="ROP",r=fC(t.subcat).slice(0,3)||"GEN",n=fIe(t.gender),a=fC(t.color).slice(0,3)||"COL",s=fC(t.size)||"TLL",i=fC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${i}`}const hIe=/^[A-Za-z0-9._-]{0,32}$/;function mIe(){const[t,e]=v.useState(""),[r,n]=v.useState("Camisa"),[a,s]=v.useState(""),[i,l]=v.useState(""),[c,u]=v.useState("Shein"),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState(""),[E,S]=v.useState(""),O=v.useMemo(()=>{const M=Number(w||0),G=Number(y||0);return Math.floor(M*G*100)/100},[w,y]),[P,T]=v.useState([]),[F,J]=v.useState(!0),[ge,le]=v.useState(""),{refreshKey:de,refresh:Ae}=gc(),[se,Ie]=v.useState(!1),Pe=v.useMemo(()=>r.toLowerCase()==="jean"?cIe:d==="NINO"||d==="NINA"?lIe:oIe,[r,d]);v.useEffect(()=>{p(AIe({subcat:r,gender:d,color:i,size:a,brand:c}))},[r,d,i,a,c]),v.useEffect(()=>{(async()=>{J(!0);const M=er(ht(ke,"products_clothes"),on("createdAt","desc")),G=await Lt(M),X=[];G.forEach(D=>{const Q=D.data();X.push({id:D.id,name:Q.name??"(sin nombre)",category:Q.category??"",measurement:Q.measurement??"unidad",sku:Q.sku??"",size:Q.size||"",color:Q.color||"",brand:Q.brand||"",gender:Q.gender||"",clientCode:Q.clientCode||"",notes:Q.notes||"",createdAt:Q.createdAt??dr.now()})}),T(X),J(!1)})()},[de]);const k=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),A(""),x(""),b(""),j("0"),_(""),S("")},H=async M=>{if(M.preventDefault(),le(""),!t.trim()){le("Ingresa el nombre del producto.");return}if(h&&!hIe.test(h)){le("Cdigo del cliente invlido");return}const G=Number(w||0),X=Number(y||0);if(G<0){le("La cantidad de piezas debe ser 0 o mayor.");return}if(X<0){le("El precio de venta no puede ser negativo.");return}try{const D=await _n(ht(ke,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:dr.now(),price:X||0});if(T(Q=>[{id:D.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:i||"",brand:c||"",gender:d||"",clientCode:h||"",notes:g||"",createdAt:dr.now()},...Q]),G>0){const Q=new Date().toISOString().slice(0,10),te=I||Q;await _n(ht(ke,"inventory_clothes_batches"),{productId:D.id,productName:t.trim(),category:r,unit:"unidad",quantity:G,remaining:G,purchasePrice:0,salePrice:X||0,invoiceTotal:0,expectedTotal:O||0,date:te,createdAt:dr.now(),status:"PENDIENTE",notes:E||"",sku:m||"",size:a||"",color:i||"",gender:d||"",brand:c||"",clientCode:h||""})}le(G>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),k()}catch(D){console.error(D),le(" Error al crear producto")}},R=async M=>{confirm(`Eliminar el producto "${M.name}"?`)&&(await Cn($t(ke,"products_clothes",M.id)),T(X=>X.filter(D=>D.id!==M.id)))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pc,{onClick:Ae,loading:F}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Ie(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),se&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),o.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:M=>e(M.target.value),placeholder:"Ej: Blusa floral"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),o.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:M=>n(M.target.value),children:sIe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:M=>f(M.target.value),children:dIe.map(M=>o.jsx("option",{value:M,children:M||""},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value),children:[o.jsx("option",{value:"",children:""}),Pe.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:M=>l(M.target.value),children:[o.jsx("option",{value:"",children:""}),iIe.map(M=>o.jsx("option",{value:M,children:M},M))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),o.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:M=>u(M.target.value),children:uIe.map(M=>o.jsx("option",{value:M,children:M},M))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),o.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:M=>A(M.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:M=>b(M.target.value),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:M=>j(M.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),o.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:M=>_(M.target.value)})]}),o.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(O)?"":O.toFixed(2)]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:k,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),o.jsx("button",{type:"button",onClick:()=>Ie(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Subcat."}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Talla"}),o.jsx("th",{className:"p-2 border",children:"Color"}),o.jsx("th",{className:"p-2 border",children:"Marca"}),o.jsx("th",{className:"p-2 border",children:"Gnero"}),o.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:F?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):P.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):P.map(M=>{var G;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(G=M.createdAt)!=null&&G.toDate?M.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:M.category}),o.jsx("td",{className:"p-2 border",children:M.name}),o.jsx("td",{className:"p-2 border",children:M.sku}),o.jsx("td",{className:"p-2 border",children:M.size||""}),o.jsx("td",{className:"p-2 border",children:M.color||""}),o.jsx("td",{className:"p-2 border",children:M.brand||""}),o.jsx("td",{className:"p-2 border",children:M.gender||""}),o.jsx("td",{className:"p-2 border",children:M.clientCode||""}),o.jsx("td",{className:"p-2 border",children:M.notes||""}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>R(M),children:"Borrar"})})]},M.id)})})]})}),ge&&o.jsx("p",{className:"mt-2 text-sm",children:ge})]})}async function pIe(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const i=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",e)),u=(await Lt(i)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,h)=>{var x,y;const A=String(f.data.date||""),m=String(h.data.date||"");if(A!==m)return A<m?-1:1;const p=((x=f.data.createdAt)==null?void 0:x.seconds)??0,g=((y=h.data.createdAt)==null?void 0:y.seconds)??0;return p-g}).map(f=>$t(ke,"inventory_clothes_batches",f.id)),d=[];return await Qi(ke,async f=>{const h=await Promise.all(u.map(m=>f.get(m)));let A=s;for(let m=0;m<u.length&&A>0;m++){const p=u[m],g=h[m];if(!g.exists())continue;const x=g.data(),y=Math.max(0,Math.floor(Number(x.quantity||0))),b=Number.isFinite(Number(x.remaining))?Math.max(0,Math.floor(Number(x.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,A),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(x.date||""),productName:String(x.productName||"")}),A-=w}if(A>0)throw new Error(`Inventario insuficiente. Faltan ${A} unidades.`);if(a)for(const m of d)await _n(ht(ke,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:dr.now()})}),{allocations:d}}async function GT(t){const e=$t(ke,"sales_clothes",t),r=await li(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Qi(ke,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Qi(ke,async c=>{const u=[];for(const f of a)for(const h of f.allocations||[])u.push({ref:$t(ke,"inventory_clothes_batches",h.batchId),addBack:Math.max(0,Math.floor(Number(h.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const h=d[f];if(!h.exists())continue;const A=h.data(),m=Math.max(0,Math.floor(Number(A.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Qi(ke,async l=>{const c={};for(const A of a){if(!A.productId||A.qty<=0)continue;const m=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",A.productId)),g=(await Lt(m)).docs.map(x=>{const y=x.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:x.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((x,y)=>x.date.localeCompare(y.date));c[A.productId]=g}const u=[];for(const A of a){if(!A.productId||A.qty<=0)continue;if(Array.isArray(A.allocations)&&A.allocations.length>0){for(const g of A.allocations)u.push({id:g.batchId,addBack:Math.max(0,Math.floor(Number(g.qty||0)))});continue}const m=c[A.productId]||[];let p=A.qty;for(const g of m){if(p<=0)break;const x=Math.max(0,g.quantity-g.remaining);if(x<=0)continue;const y=Math.min(x,p);u.push({id:g.id,addBack:y}),p-=y}for(const g of m){if(p<=0)break;const x=Math.min(p,A.qty);u.push({id:g.id,addBack:x}),p-=x}}const d={};for(const A of u)d[A.id]=(d[A.id]||0)+Math.max(0,Math.floor(Number(A.addBack||0)));const f=Object.keys(d).map(A=>$t(ke,"inventory_clothes_batches",A)),h=await Promise.all(f.map(A=>l.get(A)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=Math.max(0,Math.floor(Number(p.remaining||0))),x=Math.max(0,Math.floor(Number(d[f[A].id]||0)));l.update(f[A],{remaining:g+x})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const HQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Zf=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function AC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function $Q(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function gIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async ae=>{e(!0),n(!0),s(ae),l([]);try{const _e=(await Lt(er(ht(ke,"sales_clothes"),ir("__name__","==",ae)))).docs[0],Ee=_e==null?void 0:_e.data(),ut=(Array.isArray(Ee==null?void 0:Ee.items)?Ee.items:Ee!=null&&Ee.item?[Ee.item]:[]).map(st=>({productName:String(st.productName||""),qty:Number(st.qty||0),unitPrice:Number(st.unitPrice||0),discount:Number(st.discount||0),total:Number(st.total||0)}));l(ut)}catch(Se){console.error(Se)}finally{n(!1)}},[u,d]=v.useState(""),[f,h]=v.useState("+505 "),[A,m]=v.useState(""),[p,g]=v.useState(""),[x,y]=v.useState("ACTIVO"),[b,w]=v.useState(0),[j,I]=v.useState([]),[_,E]=v.useState(!0),[S,O]=v.useState(""),[P,T]=v.useState(null),[F,J]=v.useState(""),[ge,le]=v.useState("+505 "),[de,Ae]=v.useState(""),[se,Ie]=v.useState(""),[Pe,k]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,G]=v.useState(!1),[X,D]=v.useState(null),[Q,te]=v.useState(!1),[me,L]=v.useState([]),[he,ne]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[z,ce]=v.useState(!1),[K,oe]=v.useState(0),[xe,De]=v.useState(new Date().toISOString().slice(0,10)),[nt,Me]=v.useState(""),[Je,lt]=v.useState(!1),[ft,Ge]=v.useState(null),[ye,We]=v.useState(""),[qe,je]=v.useState(0),[pe,He]=v.useState(""),[at,yt]=v.useState(!1);v.useEffect(()=>{(async()=>{const ae=er(ht(ke,"customers_clothes"),on("createdAt","desc")),Se=await Lt(ae),_e=[];Se.forEach(Ee=>{const ze=Ee.data();_e.push({id:Ee.id,name:ze.name??"",phone:ze.phone??"+505 ",place:ze.place??"",notes:ze.notes??"",status:ze.status??"ACTIVO",creditLimit:Number(ze.creditLimit??0),createdAt:ze.createdAt??dr.now(),balance:0})});for(const Ee of _e)try{const ze=er(ht(ke,"ar_movements"),ir("customerId","==",Ee.id)),ut=await Lt(ze);let st=0;ut.forEach(ee=>st+=Number(ee.data().amount||0)),Ee.balance=st}catch{Ee.balance=0}I(_e),E(!1)})()},[]);const bt=()=>{d(""),h("+505 "),m(""),g(""),y("ACTIVO"),w(0)},kt=async ae=>{if(ae.preventDefault(),O(""),!u.trim()){O("Ingresa el nombre.");return}const Se=AC(f);if(Se.length<6){O("Telfono incompleto.");return}try{const _e=await _n(ht(ke,"customers_clothes"),{name:u.trim(),phone:Se,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:dr.now()});I(Ee=>[{id:_e.id,name:u.trim(),phone:Se,place:A||"",notes:p||"",status:x,creditLimit:Number(b||0),createdAt:dr.now(),balance:0},...Ee]),bt(),yt(!1),O(" Cliente creado")}catch(_e){console.error(_e),O(" Error al crear cliente")}},Vt=ae=>{T(ae.id),J(ae.name),le(ae.phone||"+505 "),Ae(ae.place||""),Ie(ae.notes||""),k(ae.status||"ACTIVO"),R(Number(ae.creditLimit||0))},ve=()=>{T(null),J(""),le("+505 "),Ae(""),Ie(""),k("ACTIVO"),R(0)},Qe=async()=>{if(!P)return;const ae=AC(ge);if(!F.trim()){O("Ingresa el nombre.");return}try{await nn($t(ke,"customers_clothes",P),{name:F.trim(),phone:ae,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0)}),I(Se=>Se.map(_e=>_e.id===P?{..._e,name:F.trim(),phone:ae,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0)}:_e)),ve(),O(" Cliente actualizado")}catch(Se){console.error(Se),O(" Error al actualizar")}},Z=async ae=>{if(confirm(`Eliminar al cliente "${ae.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{E(!0);const _e=er(ht(ke,"sales_clothes"),ir("customerId","==",ae.id)),Ee=await Lt(_e);for(const st of Ee.docs){const ee=st.id;try{await GT(ee)}catch(W){console.warn("restoreSaleAndDeleteClothes error",W);try{await Cn($t(ke,"sales_clothes",ee))}catch{}}await $Q(ee)}const ze=er(ht(ke,"ar_movements"),ir("customerId","==",ae.id)),ut=await Lt(ze);await Promise.all(ut.docs.map(st=>Cn($t(ke,"ar_movements",st.id)))),await Cn($t(ke,"customers_clothes",ae.id)),I(st=>st.filter(ee=>ee.id!==ae.id)),O(" Cliente eliminado y prendas devueltas al inventario")}catch(_e){console.error(_e),O(" No se pudo eliminar el cliente.")}finally{E(!1)}},$e=async ae=>{D(ae),L([]),ne({saldoActual:0,totalAbonado:0,totalCargos:0}),G(!0),ce(!1),oe(0),De(new Date().toISOString().slice(0,10)),Me(""),Ge(null),te(!0);try{const Se=er(ht(ke,"ar_movements"),ir("customerId","==",ae.id)),_e=await Lt(Se),Ee=[];_e.forEach(ze=>{var st,ee;const ut=ze.data();Ee.push({id:ze.id,date:ut.date??((ee=(st=ut.createdAt)==null?void 0:st.toDate)!=null&&ee.call(st)?ut.createdAt.toDate().toISOString().slice(0,10):""),type:ut.type??"CARGO",amount:Number(ut.amount||0),ref:ut.ref||{},comment:ut.comment||"",createdAt:ut.createdAt})}),Ee.sort((ze,ut)=>{var W,re;if(ze.date!==ut.date)return ze.date.localeCompare(ut.date);const st=((W=ze.createdAt)==null?void 0:W.seconds)||0,ee=((re=ut.createdAt)==null?void 0:re.seconds)||0;return st-ee}),L(Ee),Le(Ee)}catch(Se){console.error(Se),O(" No se pudo cargar el estado de cuenta")}finally{te(!1)}},Le=ae=>{const Se=ae.reduce((ze,ut)=>ze+(Number(ut.amount)||0),0),_e=ae.filter(ze=>Number(ze.amount)<0).reduce((ze,ut)=>ze+Math.abs(Number(ut.amount)||0),0),Ee=ae.filter(ze=>Number(ze.amount)>0).reduce((ze,ut)=>ze+Number(ut.amount)||0,0);ne({saldoActual:Se,totalAbonado:_e,totalCargos:Ee})},Ve=async()=>{if(!X)return;O("");const ae=Number(K||0);if(!(ae>0)){O("Ingresa un monto de abono mayor a 0.");return}const Se=parseFloat(ae.toFixed(2));if(!xe){O("Selecciona la fecha del abono.");return}try{lt(!0);const _e={customerId:X.id,type:"ABONO",amount:-Se,date:xe,comment:nt||"",createdAt:dr.now()},ze={id:(await _n(ht(ke,"ar_movements"),_e)).id,date:xe,type:"ABONO",amount:-Se,comment:nt||"",createdAt:dr.now()},ut=[...me,ze].sort((st,ee)=>{var fe,Ne;if(st.date!==ee.date)return st.date.localeCompare(ee.date);const W=((fe=st.createdAt)==null?void 0:fe.seconds)||0,re=((Ne=ee.createdAt)==null?void 0:Ne.seconds)||0;return W-re});L(ut),Le(ut),I(st=>st.map(ee=>ee.id===X.id?{...ee,balance:(ee.balance||0)-Se}:ee)),D(st=>st&&{...st,balance:(st.balance||0)-Se}),oe(0),Me(""),De(new Date().toISOString().slice(0,10)),ce(!1),O(" Abono registrado")}catch(_e){console.error(_e),O(" Error al registrar el abono")}finally{lt(!1)}},At=ae=>{Ge(ae.id),We(ae.date||new Date().toISOString().slice(0,10)),je(Math.abs(Number(ae.amount||0))),He(ae.comment||"")},pt=()=>{Ge(null),We(""),je(0),He("")},Be=async()=>{if(!ft)return;const ae=me.findIndex(ze=>ze.id===ft);if(ae===-1)return;const Se=me[ae],_e=Number(qe||0);if(!(_e>0)){O("El monto debe ser mayor a 0.");return}const Ee=Se.type==="ABONO"?-parseFloat(_e.toFixed(2)):+parseFloat(_e.toFixed(2));try{await nn($t(ke,"ar_movements",ft),{date:ye,amount:Ee,comment:pe||""});const ze=[...me];ze[ae]={...Se,date:ye,amount:Ee,comment:pe||""},ze.sort((st,ee)=>{var fe,Ne;if(st.date!==ee.date)return st.date.localeCompare(ee.date);const W=((fe=st.createdAt)==null?void 0:fe.seconds)||0,re=((Ne=ee.createdAt)==null?void 0:Ne.seconds)||0;return W-re}),L(ze),Le(ze);const ut=ze.reduce((st,ee)=>st+(Number(ee.amount)||0),0);I(st=>st.map(ee=>ee.id===(X==null?void 0:X.id)?{...ee,balance:ut}:ee)),D(st=>st&&{...st,balance:ut}),pt(),O(" Movimiento actualizado")}catch(ze){console.error(ze),O(" Error al actualizar movimiento")}},gt=async ae=>{var _e,Ee;if(confirm(`Eliminar este movimiento (${ae.type==="ABONO"?"Abono":"Compra"}) del ${ae.date}?${ae.type==="CARGO"&&((_e=ae.ref)!=null&&_e.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(E(!0),ae.type==="CARGO"&&((Ee=ae.ref)!=null&&Ee.saleId)){try{await GT(ae.ref.saleId)}catch(st){console.warn("restoreSaleAndDeleteClothes error",st),E(!1),O(" No se pudo devolver inventario de la venta.");return}await $Q(ae.ref.saleId)}else await Cn($t(ke,"ar_movements",ae.id));const ze=me.filter(st=>{var ee,W;return ae.type==="CARGO"&&((ee=ae.ref)!=null&&ee.saleId)?((W=st.ref)==null?void 0:W.saleId)!==ae.ref.saleId:st.id!==ae.id});L(ze),Le(ze);const ut=ze.reduce((st,ee)=>st+(Number(ee.amount)||0),0);I(st=>st.map(ee=>ee.id===(X==null?void 0:X.id)?{...ee,balance:ut}:ee)),D(st=>st&&{...st,balance:ut}),O(" Movimiento eliminado")}catch(ze){console.error(ze),O(" Error al eliminar movimiento")}finally{E(!1)}},V=v.useMemo(()=>[...j].sort((ae,Se)=>{var _e,Ee;return ae.status!==Se.status?ae.status==="BLOQUEADO"?1:-1:(((_e=Se.createdAt)==null?void 0:_e.seconds)||0)-(((Ee=ae.createdAt)==null?void 0:Ee.seconds)||0)}),[j]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>yt(!0),type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):V.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):V.map(ae=>{var _e;const Se=P===ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(_e=ae.createdAt)!=null&&_e.toDate?ae.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{className:"w-full border p-1 rounded",value:F,onChange:Ee=>J(Ee.target.value)}):ae.name}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{className:"w-full border p-1 rounded",value:ge,onChange:Ee=>le(AC(Ee.target.value))}):ae.phone}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:de,onChange:Ee=>Ae(Ee.target.value),children:[o.jsx("option",{value:"",children:""}),HQ.map(Ee=>o.jsx("option",{value:Ee,children:Ee},Ee))]}):ae.place||""}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("select",{className:"w-full border p-1 rounded",value:Pe,onChange:Ee=>k(Ee.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ae.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ae.status})}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(H)?"":H,onChange:Ee=>R(Math.max(0,Number(Ee.target.value||0)))}):Zf(ae.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:Zf(ae.balance||0)}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:se,onChange:Ee=>Ie(Ee.target.value),maxLength:500}):o.jsx("span",{title:ae.notes||"",children:(ae.notes||"").length>40?(ae.notes||"").slice(0,40)+"":ae.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Se?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Qe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ve,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Vt(ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Z(ae),children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>$e(ae),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},ae.id)})})]})}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),at&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>yt(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>yt(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:kt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:ae=>d(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:ae=>h(AC(ae.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:ae=>m(ae.target.value),children:[o.jsx("option",{value:"",children:""}),HQ.map(ae=>o.jsx("option",{value:ae,children:ae},ae))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:ae=>y(ae.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:ae=>w(Math.max(0,Number(ae.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:ae=>g(ae.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>yt(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),M&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(X==null?void 0:X.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{oe(0),De(new Date().toISOString().slice(0,10)),Me(""),ce(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>G(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(he.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(he.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:Zf(he.saldoActual)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:Q?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):me.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):me.map(ae=>{var _e,Ee;const Se=ft===ae.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ye,onChange:ze=>We(ze.target.value)}):ae.date||""}),o.jsx("td",{className:"p-2 border",children:ae.amount>=0?(_e=ae.ref)!=null&&_e.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(ae.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(Ee=ae.ref)!=null&&Ee.saleId?`Venta #${ae.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:Se?o.jsx("input",{className:"w-full border p-1 rounded",value:pe,onChange:ze=>He(ze.target.value),placeholder:"Comentario"}):o.jsx("span",{title:ae.comment||"",children:(ae.comment||"").length>40?(ae.comment||"").slice(0,40)+"":ae.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:Se?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(qe)?"":qe,onChange:ze=>{const ut=Number(ze.target.value||0),st=Number.isFinite(ut)?Math.max(0,parseFloat(ut.toFixed(2))):0;je(st)},placeholder:"0.00",title:ae.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Zf(ae.amount)}),o.jsx("td",{className:"p-2 border",children:Se?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Be,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:pt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>At(ae),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>gt(ae),children:"Borrar"})]})})]},ae.id)})})]})})]})}),z&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(X==null?void 0:X.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:xe,onChange:ae=>De(ae.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:K===0?"":K,onChange:ae=>{const Se=Number(ae.target.value||0),_e=Number.isFinite(Se)?Math.max(0,parseFloat(Se.toFixed(2))):0;oe(_e)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:nt,onChange:ae=>Me(ae.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[nt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ce(!1),disabled:Je,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Ve,disabled:Je,children:Je?"Guardando...":"Guardar abono"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((ae,Se)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ae.productName}),o.jsx("td",{className:"p-2 border text-right",children:ae.qty}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:Zf(ae.total)})]},Se))})]})})]})})]})}const Lg=t=>`C$ ${(Number(t)||0).toFixed(2)}`,xIe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function vIe(t){if(!t)return 0;const e=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",t)),r=await Lt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(i=>{const l=i.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function KQ(t){if(!t)return 0;const e=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",t)),r=await Lt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function GQ(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function yIe({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;Jr(r,"admin"),Jr(r,"vendedor_ropa");const[n,a]=v.useState([]),[s,i]=v.useState([]),[l,c]=v.useState({}),[u,d]=v.useState("CONTADO"),[f,h]=v.useState(""),[A,m]=v.useState(""),[p,g]=v.useState(new Date().toISOString().slice(0,10)),[x,y]=v.useState(""),[b,w]=v.useState([]),j=v.useMemo(()=>b.reduce((K,oe)=>K+(oe.qty||0),0),[b]),I=v.useMemo(()=>{const K=b.reduce((oe,xe)=>{const De=Math.max(0,(Number(xe.unitPrice)||0)*(xe.qty||0)-(Number(xe.discount)||0));return oe+De},0);return Math.floor(K*100)/100},[b]),[_,E]=v.useState(0),[S,O]=v.useState(""),[P,T]=v.useState(!1),[F,J]=v.useState(!1),[ge,le]=v.useState(""),[de,Ae]=v.useState("+505 "),[se,Ie]=v.useState(""),[Pe,k]=v.useState(""),[H,R]=v.useState("ACTIVO"),[M,G]=v.useState(0),X=()=>{le(""),Ae("+505 "),Ie(""),k(""),R("ACTIVO"),G(0)};v.useEffect(()=>{(async()=>{const K=er(ht(ke,"customers_clothes"),on("createdAt","desc")),oe=await Lt(K),xe=[];oe.forEach(Ge=>{const ye=Ge.data();xe.push({id:Ge.id,name:ye.name??"",phone:ye.phone??"+505 ",place:ye.place??"",status:ye.status??"ACTIVO",creditLimit:Number(ye.creditLimit??0),balance:0})});for(const Ge of xe)try{const ye=er(ht(ke,"ar_movements"),ir("customerId","==",Ge.id)),We=await Lt(ye);let qe=0;We.forEach(je=>qe+=Number(je.data().amount||0)),Ge.balance=qe}catch{Ge.balance=0}a(xe);const De=er(ht(ke,"products_clothes"),on("createdAt","desc")),nt=await Lt(De),Me=[];nt.forEach(Ge=>{const ye=Ge.data();Me.push({id:Ge.id,name:ye.name??"(sin nombre)",sku:ye.sku??""})}),i(Me);const Je=er(ht(ke,"inventory_clothes_batches"),ir("remaining",">",0)),lt=await Lt(Je),ft={};lt.forEach(Ge=>{const ye=Ge.data(),We=ye.productId||"",qe=Number(ye.remaining||0);We&&(ft[We]=(ft[We]||0)+qe)}),c(ft)})()},[]);const D=v.useMemo(()=>n.find(K=>K.id===f),[n,f]),Q=(D==null?void 0:D.balance)||0,te=u==="CREDITO"?Q+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,me=async K=>{if(!K)return;if(b.some(Me=>Me.productId===K)){y("");return}const oe=s.find(Me=>Me.id===K);if(!oe){y("");return}let xe=await vIe(K);xe||(xe=Number((oe==null?void 0:oe.price)||0));const De=await KQ(K),nt={productId:K,productName:oe.name||"",sku:oe.sku||"",unitPrice:Number(xe)||0,available:Number(De)||0,qty:0,discount:0};w(Me=>[...Me,nt]),y("")},L=(K,oe)=>{w(xe=>xe.map(De=>{if(De.productId!==K)return De;if(oe==="")return{...De,qty:0};const nt=Math.max(0,Math.floor(Number(oe)));return{...De,qty:nt}}))},he=(K,oe)=>{w(xe=>xe.map(De=>{if(De.productId!==K)return De;if(oe==="")return{...De,discount:0};const nt=Math.max(0,Math.floor(Number(oe)));return{...De,discount:nt}}))},ne=K=>w(oe=>oe.filter(xe=>xe.productId!==K)),z=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const K=b.filter(oe=>(oe.qty||0)>0);if(K.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!A.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((D==null?void 0:D.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const oe of K){const xe=await KQ(oe.productId);if(oe.qty>xe)return`Inventario insuficiente para "${oe.productName}". Disponible: ${xe} unidades.`;const De=(Number(oe.unitPrice)||0)*(oe.qty||0),nt=Number(oe.discount)||0;if(!Number.isInteger(nt)||nt<0)return`El descuento en "${oe.productName}" debe ser entero y  0.`;if(nt>De)return`El descuento en "${oe.productName}" no puede exceder C$ ${De.toFixed(2)}.`}return null},ce=async K=>{K.preventDefault(),O("");const oe=await z();if(oe){O(" "+oe);return}try{T(!0);const xe=b.filter(Je=>(Je.qty||0)>0).map(Je=>{const lt=(Number(Je.unitPrice)||0)*(Je.qty||0),ft=Math.max(0,Math.floor(Number(Je.discount)||0)),Ge=Math.max(0,lt-ft);return{productId:Je.productId,productName:Je.productName,sku:Je.sku||"",qty:Je.qty,unitPrice:Number(Je.unitPrice)||0,discount:ft,total:Math.floor(Ge*100)/100}}),De={type:u,date:p,createdAt:dr.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:xe};u==="CONTADO"?De.customerName=A.trim():(De.customerId=f,De.downPayment=Number(_)||0);const nt=await _n(ht(ke,"sales_clothes"),De);if(u==="CREDITO"&&f){const Je={customerId:f,date:p,createdAt:dr.now(),ref:{saleId:nt.id}};await _n(ht(ke,"ar_movements"),{...Je,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await _n(ht(ke,"ar_movements"),{...Je,type:"ABONO",amount:-Number(_)})}const Me={};for(const Je of xe)if(Je.qty>0){const{allocations:lt}=await pIe({productId:Je.productId,quantity:Je.qty,saleDate:p,saleId:nt.id});Me[Je.productId]={productId:Je.productId,allocations:lt}}await nn($t(ke,"sales_clothes",nt.id),{allocationsByItem:Me}),d("CONTADO"),h(""),m(""),g(new Date().toISOString().slice(0,10)),w([]),E(0),u==="CREDITO"&&f&&a(Je=>Je.map(lt=>lt.id===f?{...lt,balance:(lt.balance||0)+(Number(I)||0)-(Number(_)||0)}:lt)),O(" Venta registrada"),(async()=>{const Je=er(ht(ke,"inventory_clothes_batches"),ir("remaining",">",0)),lt=await Lt(Je),ft={};lt.forEach(Ge=>{const ye=Ge.data(),We=ye.productId||"",qe=Number(ye.remaining||0);We&&(ft[We]=(ft[We]||0)+qe)}),c(ft)})()}catch(xe){console.error(xe),O(" Error al guardar la venta")}finally{T(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),o.jsxs("form",{onSubmit:ce,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:K=>d(K.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:A,onChange:K=>m(K.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:K=>h(K.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(K=>o.jsxs("option",{value:K.status==="ACTIVO"?K.id:"",disabled:K.status==="BLOQUEADO",children:[K.name," | ",K.phone," | Saldo: ",Lg(K.balance||0)]},K.id))]}),o.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>J(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Lg(Q)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:K=>E(Math.max(0,Number(K.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Lg(te)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:K=>g(K.target.value)})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:async K=>{const oe=K.target.value;y(oe),await me(oe)},children:[o.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(K=>{const oe=b.some(nt=>nt.productId===K.id),xe=l[K.id]||0,De=oe||xe<=0;return o.jsxs("option",{value:De?"":K.id,disabled:De,children:[K.name," ",K.sku?` ${K.sku}`:""," ",xe>0?`(disp: ${xe})`:"(sin stock)",oe?" (seleccionado)":""]},K.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("div",{className:"border rounded overflow-hidden",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(K=>{const oe=Math.max(0,(K.available||0)-(K.qty||0)),xe=(Number(K.unitPrice)||0)*(K.qty||0),De=Math.max(0,xe-(Number(K.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[K.productName,K.sku?`  ${K.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Lg(K.unitPrice)}),o.jsx("div",{className:"col-span-2 text-right",children:oe}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(K.qty)||K.qty===0?"":K.qty,onChange:nt=>L(K.productId,nt.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(K.discount)||K.discount===0?"":K.discount,onChange:nt=>he(K.productId,nt.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),o.jsx("div",{className:"col-span-1 text-right",children:Lg(De)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ne(K.productId),title:"Quitar producto",children:""})})]},K.productId)})]}),b.length>0&&o.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),o.jsx("span",{className:"font-semibold",children:j})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Lg(I)})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:P,children:P?"Guardando...":"Registrar venta"})})]}),S&&o.jsx("p",{className:"mt-2 text-sm",children:S}),F&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ge,onChange:K=>le(K.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:de,onChange:K=>Ae(GQ(K.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:se,onChange:K=>Ie(K.target.value),children:[o.jsx("option",{value:"",children:""}),xIe.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:H,onChange:K=>R(K.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:M===0?"":M,onChange:K=>G(Math.max(0,Number(K.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:K=>k(K.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{X(),J(!1)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(O(""),!ge.trim()){O("Ingresa el nombre del nuevo cliente.");return}const K=GQ(de);try{const oe=await _n(ht(ke,"customers_clothes"),{name:ge.trim(),phone:K,place:se||"",notes:Pe||"",status:H,creditLimit:Number(M||0),createdAt:dr.now()}),xe={id:oe.id,name:ge.trim(),phone:K,place:se||"",status:H,creditLimit:Number(M||0),balance:0};a(De=>[xe,...De]),h(oe.id),X(),J(!1),O(" Cliente creado")}catch(oe){console.error(oe),O(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),P&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const Ei=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function R_(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Er(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function bIe(t,e){const r=R_(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(i=>({productId:String(i.productId||""),productName:String(i.productName||""),sku:i.sku||"",qty:Number(i.qty||0),unitPrice:Number(i.unitPrice??(Number(i.total||0)/Math.max(1,Number(i.qty||0))||0)),discount:Number(i.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function wIe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}function NIe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(!1),[E,S]=v.useState(null),[O,P]=v.useState([]),[T,F]=v.useState(!1),[J,ge]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});v.useEffect(()=>{(async()=>{b(!0),j("");try{const k=await Lt(ht(ke,"sales_clothes")),H=[],R=[];k.forEach(ne=>{const z=ne.data(),ce=bIe(z,ne.id);ce&&(ce.date<=a&&H.push(ce),ce.date>=r&&ce.date<=a&&R.push(ce))}),u(H),l(R);const M=await Lt(ht(ke,"inventory_clothes_batches")),G=[];M.forEach(ne=>{const z=ne.data(),ce=R_(z);!ce||ce>a||G.push({id:ne.id,productId:z.productId,productName:z.productName||"",date:ce,quantity:Number(z.quantity||0),remaining:Number(z.remaining||0),purchasePrice:Number(z.purchasePrice||0)})}),f(G);const X=await Lt(ht(ke,"expenses_clothes")),D=[];X.forEach(ne=>{const z=ne.data(),ce=R_(z);ce&&ce>=r&&ce<=a&&D.push({id:ne.id,date:ce,category:z.category||"",description:z.description||"",amount:Number(z.amount||0),status:z.status||""})}),A(D);const Q=await Lt(ht(ke,"ar_movements")),te=[],me={};Q.forEach(ne=>{const z=ne.data(),ce=R_(z);if(!ce)return;const K=z.customerId,oe=Number(z.amount||0);K&&(me[K]=(me[K]||0)+oe),z.type==="ABONO"&&ce>=r&&ce<=a&&te.push({id:ne.id,customerId:K,type:"ABONO",amount:oe,date:ce})}),p(te);const L=await Lt(ht(ke,"customers_clothes")),he=[];L.forEach(ne=>{const z=ne.data();he.push({id:ne.id,name:z.name||"",balance:me[ne.id]||0})}),x(he)}catch(k){console.error(k),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const le=v.useMemo(()=>{try{return wIe(d,c,r,a)}catch(k){return console.error(k),0}},[d,c,r,a]),de=v.useMemo(()=>{const k=i.reduce((me,L)=>me+(L.total||0),0),H=h.reduce((me,L)=>me+(L.amount||0),0),R=k-le,M=R-H,G=m.reduce((me,L)=>me+Math.abs(L.amount||0),0),X=g.filter(me=>(me.balance||0)>0),D=X.reduce((me,L)=>me+(L.balance||0),0);let Q=0,te=0;for(const me of i){const L=(me.items||[]).reduce((he,ne)=>he+(Number(ne.qty)||0),0);me.type==="CONTADO"?Q+=L:te+=L}return{ventasTotales:k,costoMercaderia:le,gastosPeriodo:H,gananciaAntes:R,gananciaDespues:M,abonosRecibidos:G,saldosPendientes:D,clientesConSaldo:X.length,prendasCash:Q,prendasCredito:te}},[i,h,m,g,le]),Ae=v.useMemo(()=>{const k={};for(const H of i){if(H.type!=="CREDITO"||!H.customerId)continue;const R=(H.items||[]).reduce((M,G)=>M+(Number(G.qty)||0),0);k[H.customerId]=(k[H.customerId]||0)+R}return g.filter(H=>(H.balance||0)>0).map(H=>({customerId:H.id,name:H.name,prendasCredito:k[H.id]||0,saldo:H.balance||0})).sort((H,R)=>R.saldo-H.saldo)},[g,i]),se=v.useMemo(()=>{const k={};return g.forEach(H=>k[H.id]=H.name),k},[g]),Ie=v.useMemo(()=>[...i].sort((k,H)=>H.date.localeCompare(k.date)).map(k=>{var M;const H=(k.items||[]).reduce((G,X)=>G+(Number(X.qty)||0),0);let R="Cash";return k.type==="CREDITO"&&k.customerId?R=se[k.customerId]||"":k.type==="CONTADO"&&(R=((M=k.customerName)==null?void 0:M.trim())||"Cash"),{id:k.id,date:k.date,type:k.type==="CREDITO"?"Crdito":"Cash",customer:R,piezas:H,total:Number(k.total||0)}}),[i,se]),Pe=async k=>{_(!0),S({id:k.customerId,name:k.name}),P([]),F(!0),ge({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const H=[];let R=0,M=0,G=0;for(const te of i)if(!(te.type!=="CREDITO"||te.customerId!==k.customerId))for(const me of te.items||[]){const L=Number(me.qty||0),he=Number(me.unitPrice||0),ne=L*he,z=Math.max(0,Number(me.discount||0)),ce=Math.max(0,ne-z);H.push({saleId:te.id,date:te.date,productName:me.productName,sku:me.sku||"",qty:L,unitPrice:he,lineTotal:ne,discount:z,lineFinal:ce}),R+=ne,M+=z,G+=ce}let X=0;for(const te of m)te.customerId===k.customerId&&(X+=Math.abs(te.amount||0));const D=g.find(te=>te.id===k.customerId),Q=(D==null?void 0:D.balance)||0;P(H),ge({totalBruto:R,totalDescuento:M,totalFiado:G,saldoActual:Q,abonadoPeriodo:X})}catch(H){console.error(H),j(" No se pudo cargar el detalle del cliente.")}finally{F(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),o.jsx(pc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:k=>n(k.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:k=>s(k.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(de.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(de.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ei(de.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(de.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:Ei(de.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(de.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(de.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:de.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:de.prendasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),o.jsx("div",{className:"text-xl font-semibold",children:de.prendasCredito})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):Ae.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):Ae.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Pe({customerId:k.customerId,name:k.name}),title:"Ver piezas fiadas del periodo",children:k.prendasCredito})}),o.jsx("td",{className:"p-2 border font-semibold",children:Ei(k.saldo)})]},k.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Ie.map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.customer}),o.jsx("td",{className:"p-2 border",children:k.type}),o.jsx("td",{className:"p-2 border",children:k.piezas}),o.jsx("td",{className:"p-2 border",children:Ei(k.total)})]},k.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((k,H)=>k.date.localeCompare(H.date)).map(k=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.category||""}),o.jsx("td",{className:"p-2 border",children:k.description?o.jsx("span",{title:k.description,children:k.description.length>40?k.description.slice(0,40)+"":k.description}):""}),o.jsx("td",{className:"p-2 border",children:Ei(k.amount)}),o.jsx("td",{className:"p-2 border",children:k.status||""})]},k.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(E==null?void 0:E.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(J.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(J.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(J.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(J.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:Ei(J.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Pieza"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Cant."}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"})," ",o.jsx("th",{className:"p-2 border",children:"Descuento"})," ",o.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),o.jsx("tbody",{children:T?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):O.sort((k,H)=>k.date.localeCompare(H.date)).map((k,H)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:k.date}),o.jsx("td",{className:"p-2 border",children:k.productName}),o.jsx("td",{className:"p-2 border",children:k.sku||""}),o.jsx("td",{className:"p-2 border",children:k.qty}),o.jsx("td",{className:"p-2 border",children:Ei(k.unitPrice)}),o.jsx("td",{className:"p-2 border",children:Ei(k.lineTotal)}),o.jsx("td",{className:"p-2 border",children:Ei(k.discount)}),o.jsx("td",{className:"p-2 border",children:Ei(k.lineFinal)})]},`${k.saleId}-${H}`))})]})})]})})]})}const qQ=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],hC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function CIe(){const[t,e]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Er(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState(""),[O,P]=v.useState(""),[T,F]=v.useState(""),[J,ge]=v.useState(0),[le,de]=v.useState("PENDIENTE"),[Ae,se]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=er(ht(ke,"expenses_clothes"),on("date","desc")),Q=await Lt(D),te=[];Q.forEach(me=>{const L=me.data();te.push({id:me.id,date:L.date||Er(new Date,"yyyy-MM-dd"),category:L.category||"",description:L.description||"",amount:Number(L.amount||0),status:L.status||"PENDIENTE",notes:L.notes||"",createdAt:L.createdAt??dr.now()})}),x(te)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Ie=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Pe=v.useMemo(()=>{const D=Ie.reduce((me,L)=>me+(L.amount||0),0),Q=Ie.filter(me=>me.status==="PAGADO").reduce((me,L)=>me+(L.amount||0),0),te=D-Q;return{total:D,pagado:Q,pendiente:te}},[Ie]),k=()=>{s(Er(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},H=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const Q=await _n(ht(ke,"expenses_clothes"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:dr.now()});x(te=>[{id:Q.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:dr.now()},...te]),k(),j(" Gasto registrado")}catch(Q){console.error(Q),j(" Error al guardar gasto")}},R=D=>{_(D.id),S(D.date),P(D.category||""),F(D.description||""),ge(Number(D.amount||0)),de(D.status||"PENDIENTE"),se(D.notes||"")},M=()=>{_(null),S(""),P(""),F(""),ge(0),de("PENDIENTE"),se("")},G=async()=>{if(I){if(!O){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!J||J<=0){j("Ingresa un monto vlido.");return}try{await nn($t(ke,"expenses_clothes",I),{date:E,category:O,description:T.trim(),amount:Number(J.toFixed(2)),status:le,notes:Ae||""}),x(D=>D.map(Q=>Q.id===I?{...Q,date:E,category:O,description:T.trim(),amount:Number(J.toFixed(2)),status:le,notes:Ae||""}:Q)),M(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},X=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await Cn($t(ke,"expenses_clothes",D.id)),x(te=>te.filter(me=>me.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",hC(Pe.total)]}),o.jsxs("div",{children:["Pagado: ",hC(Pe.pagado)]}),o.jsxs("div",{children:["Pendiente: ",hC(Pe.pendiente)]})]})]}),o.jsxs("form",{onSubmit:H,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),qQ.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Ie.slice().sort((D,Q)=>D.date.localeCompare(Q.date)).map(D=>{const Q=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:te=>S(te.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:te=>P(te.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),qQ.map(te=>o.jsx("option",{value:te,children:te},te))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:te=>F(te.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:te=>ge(Math.max(0,Number(te.target.value||0)))}):hC(D.amount)}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:le,onChange:te=>de(te.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Ae,onChange:te=>se(te.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Q?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:G,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>R(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>X(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const ld=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function _Ie(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Er(t.createdAt.toDate(),"yyyy-MM-dd"):""}function EIe(t,e){const r=_Ie(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,i=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:i,total:a*i}}}async function SIe(t,e){if(e<=0)return;const r=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",t)),n=await Lt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;if(i.remaining<=0)continue;const l=Math.min(i.remaining,s);s-=l,await nn($t(ke,"inventory_clothes_batches",i.id),{remaining:Math.max(0,Number((i.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function IIe(t,e){if(e<=0)return;const r=er(ht(ke,"inventory_clothes_batches"),ir("productId","==",t)),n=await Lt(r),a=[];n.forEach(i=>{const l=i.data();a.push({id:i.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((i,l)=>i.date.localeCompare(l.date));let s=e;for(const i of a){if(s<=0)break;const l=Math.max(0,i.quantity-i.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await nn($t(ke,"inventory_clothes_batches",i.id),{remaining:Number((i.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function cte(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}async function jIe(t,e,r){if(await cte(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:dr.now(),ref:{saleId:t.id}},{addDoc:a}=await _A(async()=>{const{addDoc:i}=await Promise.resolve().then(()=>Gve);return{addDoc:i}},void 0);await a(ht(ke,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(ht(ke,"ar_movements"),{...n,type:"ABONO",amount:-s})}function BIe(){const[t,e]=v.useState(!1),[r,n]=v.useState(!1),[a,s]=v.useState(null),[i,l]=v.useState([]),c=async ne=>{e(!0),n(!0),s(ne),l([]);try{const ce=(await Lt(er(ht(ke,"sales_clothes"),ir("__name__","==",ne)))).docs[0],K=ce==null?void 0:ce.data(),xe=(Array.isArray(K==null?void 0:K.items)?K.items:K!=null&&K.item?[K.item]:[]).map(De=>({productName:String(De.productName||""),qty:Number(De.qty||0),unitPrice:Number(De.unitPrice||0),discount:Number(De.discount||0),total:Number(De.total||0)}));l(xe)}catch(z){console.error(z)}finally{n(!1)}},[u,d]=v.useState(Er(new Date,"yyyy-MM-01")),[f,h]=v.useState(Er(new Date,"yyyy-MM-dd")),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState(!0),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,E]=v.useState(""),[S,O]=v.useState(null),[P,T]=v.useState(!1),[F,J]=v.useState(null),[ge,le]=v.useState(0),de=15,[Ae,se]=v.useState(1),Ie=v.useMemo(()=>{const ne={};return A.forEach(z=>ne[z.id]=z.name),ne},[A]);v.useEffect(()=>{(async()=>{y(!0),w("");try{const ne=await Lt(ht(ke,"customers_clothes")),z=[];ne.forEach(oe=>z.push({id:oe.id,name:oe.data().name||""})),m(z);const ce=await Lt(er(ht(ke,"sales_clothes"),on("createdAt","desc"))),K=[];ce.forEach(oe=>{const xe=EIe(oe.data(),oe.id);xe&&xe.date>=u&&xe.date<=f&&K.push(xe)}),g(K.sort((oe,xe)=>xe.date.localeCompare(oe.date))),se(1)}catch(ne){console.error(ne),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Pe=v.useMemo(()=>p.filter(ne=>!(j&&ne.customerId!==j||_&&ne.type!==_)),[p,j,_]),k=v.useMemo(()=>{let ne=0,z=0,ce=0,K=0;for(const oe of Pe)oe.type==="CONTADO"?(ne+=oe.item.qty,ce+=oe.total):(z+=oe.item.qty,K+=oe.total);return{piezasCash:ne,piezasCredito:z,montoCash:ce,montoCredito:K}},[Pe]),H=Math.max(1,Math.ceil(Pe.length/de)),R=v.useMemo(()=>{const ne=(Ae-1)*de;return Pe.slice(ne,ne+de)},[Pe,Ae]),M=ne=>{O(null),J(ne),le(ne.item.qty||0),T(!0)},G=async ne=>{if(O(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await GT(ne.id),await cte(ne.id),g(z=>z.filter(ce=>ce.id!==ne.id)),w(" Venta eliminada")}catch(z){console.error(z),w(" No se pudo eliminar la venta.")}finally{y(!1)}},X=async()=>{if(!F)return;const ne=Number(F.item.qty||0),z=Math.max(1,Math.floor(Number(ge)||0));if(z===ne){T(!1);return}const ce=Number(F.item.unitPrice||0),K=Number((ce*z).toFixed(2));try{y(!0);const oe=z-ne;oe>0?await SIe(F.item.productId,oe):oe<0&&await IIe(F.item.productId,-oe);const xe=$t(ke,"sales_clothes",F.id);await nn(xe,{quantity:z,total:K,itemsTotal:K,"item.qty":z,"item.total":K,updatedAt:dr.now()});const De=Math.min(Number(F.downPayment||0),K);await jIe(F,K,De),g(nt=>nt.map(Me=>Me.id===F.id?{...Me,quantity:z,total:K,item:{...Me.item,qty:z,total:K},downPayment:De}:Me)),w(" Venta actualizada"),T(!1)}catch(oe){console.error(oe),w(" No se pudo actualizar la venta.")}finally{y(!1)}},D=()=>{const ne=`Reporte de transacciones (Ropa)  ${u} a ${f}`,z=xe=>(xe||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ce=Pe.map(xe=>{const De=xe.customerName||(xe.customerId?Ie[xe.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${xe.date}</td>
          <td>${z(De)}</td>
          <td>${xe.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${xe.item.qty}</td>
          <td style="text-align:right">${ld(xe.total)}</td>
        </tr>`}).join(""),K=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${z(ne)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${z(ne)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${k.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${k.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${ld(k.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${ld(k.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${ce||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,oe=window.open("","_blank");oe&&(oe.document.open(),oe.document.write(K),oe.document.close())},Q=()=>se(1),te=()=>se(ne=>Math.max(1,ne-1)),me=()=>se(ne=>Math.min(H,ne+1)),L=()=>se(H),he=()=>{const ne=[];if(H<=7)for(let ce=1;ce<=H;ce++)ne.push(ce);else{const ce=Math.max(1,Ae-2),K=Math.min(H,Ae+2);ne.push(1),ce>2&&ne.push(-1);for(let oe=ce;oe<=K;oe++)oe!==1&&oe!==H&&ne.push(oe);K<H-1&&ne.push(-2),ne.push(H)}return o.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:Ae===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:Ae===1,children:" Anterior"}),ne.map((ce,K)=>typeof ce=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${ce===Ae?"bg-blue-600 text-white":""}`,onClick:()=>se(ce),children:ce},K):o.jsx("span",{className:"px-2",children:""},K)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:me,disabled:Ae===H,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:L,disabled:Ae===H,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Ae," de ",H,"  ",Pe.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ne=>{d(ne.target.value),se(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ne=>{h(ne.target.value),se(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ne=>{I(ne.target.value),se(1)},children:[o.jsx("option",{value:"",children:"Todos"}),A.map(ne=>o.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ne=>{E(ne.target.value),se(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:D,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:k.piezasCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:ld(k.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:ld(k.montoCredito)})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Piezas"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:x?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):R.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):R.map(ne=>{const z=ne.customerName||(ne.customerId?Ie[ne.customerId]:"")||"Nombre cliente";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ne.date}),o.jsx("td",{className:"p-2 border",children:z}),o.jsx("td",{className:"p-2 border",children:ne.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ne.id),children:ne.item.qty})}),o.jsx("td",{className:"p-2 border",children:ld(ne.total)}),o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>O(ce=>ce===ne.id?null:ne.id),title:"Acciones",children:""}),S===ne.id&&o.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>M(ne),children:"Editar"}),o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>G(ne),children:"Eliminar"})]})]})]},ne.id)})})]}),he()]}),b&&o.jsx("p",{className:"mt-2 text-sm",children:b}),P&&F&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),o.jsxs("div",{className:"font-semibold",children:[F.item.productName," ",F.item.sku?` ${F.item.sku}`:""]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),o.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:ge,onChange:ne=>le(Math.max(1,Math.floor(Number(ne.target.value||0))))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),o.jsx("div",{className:"text-lg font-semibold",children:ld(F.item.unitPrice)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),o.jsx("div",{className:"text-lg font-semibold",children:ld(Number(F.item.unitPrice)*Number(ge||0))})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),J(null)},children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:X,children:"Guardar cambios"})]})]})}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):i.map((ne,z)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ne.productName}),o.jsx("td",{className:"p-2 border text-right",children:ne.qty}),o.jsx("td",{className:"p-2 border text-right",children:ld(ne.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:ld(ne.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:ld(ne.total)})]},z))})]})})]})})]})}const zQ=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],sf=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function mC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function WQ(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function PIe({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=Jr(a,"vendedor_pollo"),l=Jr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[E,S]=v.useState(null),[O,P]=v.useState([]),T=async ct=>{var Oe;j(!0),_(!0),S(ct),P([]);try{const ot=await li($t(ke,"sales_pollo",ct));let mt=null;ot.exists()?mt=ot.data():mt=(Oe=(await Lt(er(ht(ke,"sales_pollo"),ir("name","==",ct)))).docs[0])==null?void 0:Oe.data();const Ct=(Array.isArray(mt==null?void 0:mt.items)?mt.items:mt!=null&&mt.item?[mt.item]:[]).map(Rt=>({productName:String(Rt.productName||""),qty:Number(Rt.qty||0),unitPrice:Number(Rt.unitPrice||0),discount:Number(Rt.discount||0),total:Number(Rt.total||0)}));P(Ct)}catch(ot){console.error(ot)}finally{_(!1)}},[F,J]=v.useState(""),[ge,le]=v.useState("+505 "),[de,Ae]=v.useState(""),[se,Ie]=v.useState(""),[Pe,k]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,G]=v.useState(""),[X,D]=v.useState(0),[Q,te]=v.useState([]),[me,L]=v.useState(!0),[he,ne]=v.useState(""),[z,ce]=v.useState(null),[K,oe]=v.useState(""),[xe,De]=v.useState("+505 "),[nt,Me]=v.useState(""),[Je,lt]=v.useState(""),[ft,Ge]=v.useState("ACTIVO"),[ye,We]=v.useState(0),[qe,je]=v.useState(""),[pe,He]=v.useState(!1),[at,yt]=v.useState(null),[bt,kt]=v.useState(!1),[Vt,ve]=v.useState([]),[Qe,Z]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[$e,Le]=v.useState(!1),[Ve,At]=v.useState(0),[pt,Be]=v.useState(new Date().toISOString().slice(0,10)),[gt,V]=v.useState(""),[ae,Se]=v.useState(!1),[_e,Ee]=v.useState(null),[ze,ut]=v.useState(""),[st,ee]=v.useState(0),[W,re]=v.useState(""),[fe,Ne]=v.useState(!1),[be,Xe]=v.useState(null),[it,xt]=v.useState(!1),[_t,Et]=v.useState(!1),[Gt,nr]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(L(!0),i&&!s){te([]),ne(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const ct=await Lt(ht(ke,"sellers_candies")),Oe=[];ct.forEach(Ct=>{const Rt=Ct.data();Oe.push({id:Ct.id,name:String(Rt.name||"")})}),u(Oe);const ot=i?er(ht(ke,"customers_pollo"),ir("vendorId","==",s),on("createdAt","desc")):er(ht(ke,"customers_pollo"),on("createdAt","desc")),mt=await Lt(ot),wt=[];mt.forEach(Ct=>{const Rt=Ct.data();wt.push({id:Ct.id,name:Rt.name??"",phone:Rt.phone??"+505 ",place:Rt.place??"",notes:Rt.notes??"",status:Rt.status??"ACTIVO",creditLimit:Number(Rt.creditLimit??0),createdAt:Rt.createdAt??dr.now(),balance:0,sellerId:Rt.sellerId||"",vendorId:Rt.vendorId||"",vendorName:Rt.vendorName||"",initialDebt:Number(Rt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Ct of wt)try{const Rt=er(ht(ke,"ar_movements"),ir("customerId","==",Ct.id)),Pt=await Lt(Rt);let qt=0,Ar=null;Pt.forEach(as=>{var ss,Xi,Zu;const oa=as.data(),ta=Number(oa.amount||0);if(qt+=ta,ta<0){const qd=oa.date??((Xi=(ss=oa.createdAt)==null?void 0:ss.toDate)!=null&&Xi.call(ss)?oa.createdAt.toDate().toISOString().slice(0,10):""),tu=(Zu=oa.createdAt)!=null&&Zu.seconds?Number(oa.createdAt.seconds):0;(!Ar||tu>=Ar.ts)&&(Ar={date:qd,amount:Math.abs(ta),ts:tu})}});const Cr=Number(Ct.initialDebt||0);Ct.balance=Cr+qt,Ar?(Ct.lastAbonoDate=Ar==null?void 0:Ar.date,Ct.lastAbonoAmount=Ar==null?void 0:Ar.amount):(Ct.lastAbonoDate="",Ct.lastAbonoAmount=0)}catch{Ct.balance=Number(Ct.initialDebt||0),Ct.lastAbonoDate="",Ct.lastAbonoAmount=0}te(wt)}catch(ct){console.error(ct),ne(" Error cargando clientes.")}finally{L(!1)}})()},[i,s]);const ur=()=>{J(""),le("+505 "),Ae(""),Ie(""),k("ACTIVO"),R(0),G(""),D(0)},rr=async ct=>{var wt;if(ct.preventDefault(),ne(""),!F.trim()){ne("Ingresa el nombre.");return}const Oe=mC(ge);if(Oe.length<6){ne("Telfono incompleto.");return}const ot=i?s:String(M||""),mt=ot&&((wt=c.find(Ct=>Ct.id===ot))==null?void 0:wt.name)||"";try{const Ct=Number(X||0),Rt=await _n(ht(ke,"customers_pollo"),{name:F.trim(),phone:Oe,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0),vendorId:ot,vendorName:mt,initialDebt:Ct,createdAt:dr.now()});te(Pt=>[{id:Rt.id,name:F.trim(),phone:Oe,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0),vendorId:ot,vendorName:mt,initialDebt:Ct,createdAt:dr.now(),balance:Ct,lastAbonoDate:"",lastAbonoAmount:0},...Pt]),ur(),Ne(!1),ne(" Cliente creado")}catch(Ct){console.error(Ct),ne(" Error al crear cliente")}},cr=ct=>{if(i){ne(" No permitido: vendedores no editan clientes desde el listado.");return}ce(ct.id),oe(ct.name),De(ct.phone||"+505 "),Me(ct.place||""),lt(ct.notes||""),Ge(ct.status||"ACTIVO"),We(Number(ct.creditLimit||0)),je(String(ct.vendorId||""))},Ir=()=>{ce(null),oe(""),De("+505 "),Me(""),lt(""),Ge("ACTIVO"),We(0),je("")},dn=async()=>{var Rt;if(i){ne(" No permitido.");return}if(!z)return;const ct=mC(xe);if(!K.trim()){ne("Ingresa el nombre.");return}const Oe=Q.find(Pt=>Pt.id===z),ot=String((Oe==null?void 0:Oe.vendorId)||""),mt=i?s:String(qe||"");if(i&&ot&&ot!==s){ne(" Este cliente pertenece a otro vendedor.");return}if(l&&ot&&mt&&ot!==mt){ne(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const wt=i?s:String(qe||""),Ct=wt&&((Rt=c.find(Pt=>Pt.id===wt))==null?void 0:Rt.name)||"";try{await nn($t(ke,"customers_pollo",z),{name:K.trim(),phone:ct,place:nt||"",notes:Je||"",status:ft,creditLimit:Number(ye||0),vendorId:wt,vendorName:Ct}),te(Pt=>Pt.map(qt=>qt.id===z?{...qt,name:K.trim(),phone:ct,place:nt||"",notes:Je||"",status:ft,creditLimit:Number(ye||0),vendorId:wt,vendorName:Ct}:qt)),Ir(),ne(" Cliente actualizado")}catch(Pt){console.error(Pt),ne(" Error al actualizar")}},qr=async ct=>{if(confirm(`Eliminar al cliente "${ct.name}"?
Se borrarn todas sus ventas y movimientos.`))try{L(!0);const ot=er(ht(ke,"sales_pollo"),ir("customerId","==",ct.id)),mt=await Lt(ot);for(const Rt of mt.docs){const Pt=Rt.id;try{await Cn($t(ke,"sales_pollo",Pt))}catch(qt){console.warn("delete sale error",qt)}await WQ(Pt)}const wt=er(ht(ke,"ar_movements"),ir("customerId","==",ct.id)),Ct=await Lt(wt);await Promise.all(Ct.docs.map(Rt=>Cn($t(ke,"ar_movements",Rt.id)))),await Cn($t(ke,"customers_pollo",ct.id)),te(Rt=>Rt.filter(Pt=>Pt.id!==ct.id)),ne(" Cliente eliminado y registros borrados")}catch(ot){console.error(ot),ne(" No se pudo eliminar el cliente.")}finally{L(!1)}},ln=(ct,Oe)=>{const ot=ct.reduce((Rt,Pt)=>Rt+(Number(Pt.amount)||0),0),mt=ct.filter(Rt=>Number(Rt.amount)<0).reduce((Rt,Pt)=>Rt+Math.abs(Number(Pt.amount)||0),0),wt=ct.filter(Rt=>Number(Rt.amount)>0).reduce((Rt,Pt)=>Rt+(Number(Pt.amount)||0),0),Ct=Number(Oe||0)+ot;Z({saldoActual:Ct,totalAbonado:mt,totalCargos:Number(Oe||0)+wt,saldoRestante:Ct})},qs=async ct=>{yt(ct),ve([]),Z({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),He(!0),xt(!1),Et(!1),nr(null),Le(!1),At(0),Be(new Date().toISOString().slice(0,10)),V(""),Ee(null),kt(!0);try{const Oe=er(ht(ke,"ar_movements"),ir("customerId","==",ct.id)),ot=await Lt(Oe),mt=[];ot.forEach(wt=>{var qt,Ar;const Ct=wt.data(),Rt=Ct.date??((Ar=(qt=Ct.createdAt)==null?void 0:qt.toDate)!=null&&Ar.call(qt)?Ct.createdAt.toDate().toISOString().slice(0,10):""),Pt=Number(Ct.amount||0);mt.push({id:wt.id,date:Rt,type:Ct.type??(Pt<0?"ABONO":"CARGO"),amount:Pt,ref:Ct.ref||{},comment:Ct.comment||"",createdAt:Ct.createdAt})}),mt.sort((wt,Ct)=>{var qt,Ar;if(wt.date!==Ct.date)return wt.date.localeCompare(Ct.date);const Rt=((qt=wt.createdAt)==null?void 0:qt.seconds)||0,Pt=((Ar=Ct.createdAt)==null?void 0:Ar.seconds)||0;return Rt-Pt}),ve(mt),ln(mt,Number(ct.initialDebt||0))}catch(Oe){console.error(Oe),ne(" No se pudo cargar el estado de cuenta")}finally{kt(!1)}},rt=ct=>{const Oe=ct.filter(ot=>Number(ot.amount)<0).map(ot=>{var mt;return{date:ot.date,amount:Math.abs(Number(ot.amount||0)),ts:((mt=ot.createdAt)==null?void 0:mt.seconds)||0}}).sort((ot,mt)=>(ot.ts||0)-(mt.ts||0));return Oe.length?Oe[Oe.length-1]:null},Mt=ct=>{Ee(ct.id),ut(ct.date||new Date().toISOString().slice(0,10)),ee(Math.abs(Number(ct.amount||0))),re(ct.comment||"")},Yt=()=>{Ee(null),ut(""),ee(0),re("")},ar=async()=>{if(!_e||!at)return;const ct=Vt.findIndex(wt=>wt.id===_e);if(ct===-1)return;const Oe=Vt[ct],ot=Number(st||0);if(!(ot>0)){ne("El monto debe ser mayor a 0.");return}const mt=Oe.type==="ABONO"?-parseFloat(ot.toFixed(2)):+parseFloat(ot.toFixed(2));try{await nn($t(ke,"ar_movements",_e),{date:ze,amount:mt,comment:W||""});const wt=[...Vt];wt[ct]={...Oe,date:ze,amount:mt,comment:W||""},wt.sort((qt,Ar)=>{var oa,ta;if(qt.date!==Ar.date)return qt.date.localeCompare(Ar.date);const Cr=((oa=qt.createdAt)==null?void 0:oa.seconds)||0,as=((ta=Ar.createdAt)==null?void 0:ta.seconds)||0;return Cr-as}),ve(wt),ln(wt,Number(at.initialDebt||0));const Ct=wt.reduce((qt,Ar)=>qt+(Number(Ar.amount)||0),0),Rt=Number(at.initialDebt||0)+Ct,Pt=rt(wt);te(qt=>qt.map(Ar=>Ar.id===at.id?{...Ar,balance:Rt,lastAbonoDate:(Pt==null?void 0:Pt.date)||"",lastAbonoAmount:(Pt==null?void 0:Pt.amount)||0}:Ar)),yt(qt=>qt&&{...qt,balance:Rt,lastAbonoDate:(Pt==null?void 0:Pt.date)||"",lastAbonoAmount:(Pt==null?void 0:Pt.amount)||0}),Yt(),ne(" Movimiento actualizado")}catch(wt){console.error(wt),ne(" Error al actualizar movimiento")}},It=async ct=>{var ot,mt;if(confirm(`Eliminar este movimiento (${ct.type==="ABONO"?"Abono":"Compra"}) del ${ct.date}?${ct.type==="CARGO"&&((ot=ct.ref)!=null&&ot.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&at)try{if(L(!0),ct.type==="CARGO"&&((mt=ct.ref)!=null&&mt.saleId)){try{await Cn($t(ke,"sales_pollo",ct.ref.saleId))}catch(qt){console.warn("delete sale error",qt),L(!1),ne(" No se pudo borrar la venta asociada.");return}await WQ(ct.ref.saleId)}else await Cn($t(ke,"ar_movements",ct.id));const wt=Vt.filter(qt=>{var Ar,Cr;return ct.type==="CARGO"&&((Ar=ct.ref)!=null&&Ar.saleId)?((Cr=qt.ref)==null?void 0:Cr.saleId)!==ct.ref.saleId:qt.id!==ct.id});ve(wt),ln(wt,Number(at.initialDebt||0));const Ct=wt.reduce((qt,Ar)=>qt+(Number(Ar.amount)||0),0),Rt=Number(at.initialDebt||0)+Ct,Pt=rt(wt);te(qt=>qt.map(Ar=>Ar.id===at.id?{...Ar,balance:Rt,lastAbonoDate:(Pt==null?void 0:Pt.date)||"",lastAbonoAmount:(Pt==null?void 0:Pt.amount)||0}:Ar)),yt(qt=>qt&&{...qt,balance:Rt,lastAbonoDate:(Pt==null?void 0:Pt.date)||"",lastAbonoAmount:(Pt==null?void 0:Pt.amount)||0}),nr(null),ne(" Movimiento eliminado")}catch(wt){console.error(wt),ne(" Error al eliminar movimiento")}finally{L(!1)}},mr=v.useMemo(()=>[...Q].sort((ct,Oe)=>{var ot,mt;return ct.status!==Oe.status?ct.status==="BLOQUEADO"?1:-1:(((ot=Oe.createdAt)==null?void 0:ot.seconds)||0)-(((mt=ct.createdAt)==null?void 0:mt.seconds)||0)}),[Q]),fr=ct=>ct==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",Ht=v.useMemo(()=>{const ct=h.trim().toLowerCase(),Oe=g.trim()===""?null:Number(g),ot=y.trim()===""?null:Number(y);return mr.filter(mt=>{const wt=!ct||String(mt.name||"").toLowerCase().includes(ct),Ct=!m||mt.status===m,Rt=Number(mt.balance||0),Pt=Oe===null||!Number.isNaN(Oe)&&Rt>=Oe,qt=ot===null||!Number.isNaN(ot)&&Rt<=ot;return wt&&Ct&&Pt&&qt})},[mr,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ne(!0),i&&G(s)},type:"button",children:"Crear Cliente"})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:me?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):Ht.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):Ht.map(ct=>{var ot;const Oe=z===ct.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(ot=ct.createdAt)!=null&&ot.toDate?ct.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:Oe?o.jsx("input",{className:"w-full border p-1 rounded",value:K,onChange:mt=>oe(mt.target.value)}):o.jsx("div",{className:"font-medium",children:ct.name})}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:mt=>De(mC(mt.target.value))}):ct.phone}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:qe,onChange:mt=>je(mt.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(mt=>o.jsx("option",{value:mt.id,children:mt.name},mt.id))]}):ct.vendorName||""}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsxs("select",{className:"w-full border p-1 rounded",value:nt,onChange:mt=>Me(mt.target.value),children:[o.jsx("option",{value:"",children:""}),zQ.map(mt=>o.jsx("option",{value:mt,children:mt},mt))]}):ct.place||""}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsxs("select",{className:"w-full border p-1 rounded",value:ft,onChange:mt=>Ge(mt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${fr(ct.status)}`,children:ct.status})}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ye)?"":ye,onChange:mt=>We(Math.max(0,Number(mt.target.value||0)))}):sf(ct.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:sf(ct.balance||0)}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Je,onChange:mt=>lt(mt.target.value),maxLength:500}):o.jsx("span",{title:ct.notes||"",children:(ct.notes||"").length>40?(ct.notes||"").slice(0,40)+"":ct.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Oe?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:dn,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ir,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>cr(ct),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>qr(ct),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>qs(ct),children:"Estado de cuenta"})]})})})]},ct.id)})})]})})}),he&&o.jsx("p",{className:"mt-2 text-sm",children:he}),fe&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:rr,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:F,onChange:ct=>J(ct.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ge,onChange:ct=>le(mC(ct.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:ct=>Ae(ct.target.value),children:[o.jsx("option",{value:"",children:""}),zQ.map(ct=>o.jsx("option",{value:ct,children:ct},ct))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:ct=>k(ct.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:M,onChange:ct=>G(ct.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(ct=>o.jsx("option",{value:ct.id,children:ct.name},ct.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:X===0?"":X,onChange:ct=>D(Math.max(0,Number(ct.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:H===0?"":H,onChange:ct=>R(Math.max(0,Number(ct.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:se,onChange:ct=>Ie(ct.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[se.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),pe&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(at==null?void 0:at.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{At(0),Be(new Date().toISOString().slice(0,10)),V(""),Le(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>He(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:sf(Number((at==null?void 0:at.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:sf(Qe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:sf(Qe.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:sf(Qe.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:bt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Vt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Vt.map(ct=>{var ot,mt;const Oe=_e===ct.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Oe?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ze,onChange:wt=>ut(wt.target.value)}):ct.date||""}),o.jsx("td",{className:"p-2 border",children:ct.amount>=0?(ot=ct.ref)!=null&&ot.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver productos de esta venta",onClick:()=>T(ct.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(mt=ct.ref)!=null&&mt.saleId?`Venta #${ct.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsx("input",{className:"w-full border p-1 rounded",value:W,onChange:wt=>re(wt.target.value),placeholder:"Comentario"}):o.jsx("span",{title:ct.comment||"",children:(ct.comment||"").length>40?(ct.comment||"").slice(0,40)+"":ct.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:Oe?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(st)?"":st,onChange:wt=>{const Ct=Number(wt.target.value||0),Rt=Number.isFinite(Ct)?Math.max(0,parseFloat(Ct.toFixed(2))):0;ee(Rt)},placeholder:"0.00"}):sf(ct.amount)}),o.jsx("td",{className:"p-2 border",children:Oe?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ar,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Yt,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Mt(ct),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>It(ct),children:"Borrar"})]})})]},ct.id)})})]})})]})]})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",E?` #${E}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):O.map((ct,Oe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:ct.productName}),o.jsx("td",{className:"p-2 border text-right",children:ct.qty}),o.jsx("td",{className:"p-2 border text-right",children:sf(ct.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:sf(ct.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:sf(ct.total)})]},Oe))})]})})]})})]})}function TIe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function kIe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var FIe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s[i])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OIe=function(t){FIe(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),TIe(s,a.prototype),kIe(s),s}return e}(Error),DIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xc=function(t){DIe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(OIe),RIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ni=function(t){RIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(xc),MIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),en=function(t){MIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(xc),ute=function(){function t(e){if(this.binarizer=e,e===null)throw new en("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),LIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vi=function(t){LIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(xc),UIe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Ha=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),QIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D6=function(t){QIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(xc),VIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XQ=function(t){VIe(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(D6),HIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mi=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new en("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new XQ(r);if(n>e)throw new XQ(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=HIe(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=31*a+l}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return Ha.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var i=s+a>>1,l=n(r,e[i]);if(l>0)a=i+1;else if(l<0)s=i-1;else return i}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Pn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ao=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Ha.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=n[a]}var l=a*32+Pn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var i=n.length;s===0;){if(++a===i)return r;s=~n[a]}var l=a*32+Pn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new en;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,i=n;i<=a;i++){var l=i>n?0:e&31,c=i<a?31:r&31,u=(2<<c)-(1<<l);s[i]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new en;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),i=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((i[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new en("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new en("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var i=0,l=0;l<8;l++)this.get(e)&&(i|=1<<7-l),e++;r[n+s]=i}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var i=a[s];i=i>>1&1431655765|(i&1431655765)<<1,i=i>>2&858993459|(i&858993459)<<2,i=i>>4&252645135|(i&252645135)<<4,i=i>>8&16711935|(i&16711935)<<8,i=i>>16&65535|(i&65535)<<16,e[r-s]=i}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Mi.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Mi.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),qT;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(qT||(qT={}));const $a=qT;var $Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nr=function(t){$Ie(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(xc),KIe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ma;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(ma||(ma={}));var Ri=function(){function t(e,r,n){for(var a,s,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=i,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=KIe(i),A=h.next();!A.done;A=h.next()){var m=A.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Nr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Nr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Nr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(ma.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(ma.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(ma.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(ma.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(ma.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(ma.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(ma.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(ma.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(ma.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(ma.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(ma.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(ma.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(ma.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(ma.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(ma.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(ma.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(ma.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(ma.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(ma.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(ma.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(ma.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(ma.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(ma.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(ma.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(ma.Big5,28,"Big5"),t.GB18030=new t(ma.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(ma.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),GIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M_=function(t){GIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(xc),Qu=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ri?e:Ri.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,i=e.length;s<i;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(Ri.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new M_("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ri.UTF8)||e.equals(Ri.ISO8859_1)||e.equals(Ri.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),Hn=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Qu.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get($a.CHARACTER_SET)!==void 0)return r.get($a.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,i=!0,l=0,c=0,u=0,d=0,f=0,h=0,A=0,m=0,p=0,g=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||i);b++){var w=e[b]&255;i&&(l>0?w&128?l--:i=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?i=!1:d++):u++):c++):i=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(h++,m=0,A++,A>p&&(p=A)):w>127?(f++,A=0,m++,m>g&&(g=m)):(A=0,m=0))}return i&&l>0&&(i=!1),s&&f>0&&(s=!1),i&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||g>=3)?t.SHIFT_JIS:a&&s?p===2&&h===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:i?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,h){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var A=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(A||16);break;case"d":m=parseFloat(parseInt(r[a],A||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(A);for(var p=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+g:g+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,s)},t.getBytes=function(e,r){return Qu.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ri.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ri.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ri.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),En=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Hn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),Sf=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new en("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var i=e[s],l=0;l<n;l++)i[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new en("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,i=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new en("row lengths do not match");i=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new en("illegal character encountered: "+e.substring(u));if(s>i){if(l===-1)l=s-i;else if(s-i!==l)throw new en("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new en("input matrix dimensions do not match");for(var r=new Ao(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,i=this.height;s<i;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new en("Left and top must be nonnegative");if(a<1||n<1)throw new en("Height and width must be at least 1");var s=e+n,i=r+a;if(i>this.height||s>this.width)throw new en("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<i;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Ao(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,i=0;i<n;i++)r.setBulk(i*32,a[s+i]);return r},t.prototype.setRow=function(e,r){Ha.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Ao(e),a=new Ao(e),s=0,i=Math.floor((r+1)/2);s<i;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,i=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<i&&(i=u),u>c&&(c=u),d*32<s){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<s&&(s=d*32+h)}if(d*32+31>l){for(var h=31;!(f>>>h);)h--;d*32+h>l&&(l=d*32+h)}}}return l<s||c<i?null:Int32Array.from([s,i,l-s+1,c-i+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,i=r[n],l=0;!(i<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,i=r[n],l=31;!(i>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Mi.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Mi.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new En,s=0,i=this.height;s<i;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),qIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kt=function(t){qIe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(xc),zIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WIe=function(t){zIe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Ao(s):n.clear(),this.initArrays(s);for(var i=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(i[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(i[c]&255)<u&&n.set(c);else for(var d=i[0]&255,f=i[1]&255,c=1;c<s-1;c++){var h=i[c+1]&255;(f*4-d-h)/2<u&&n.set(c),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new Sf(n,a);this.initArrays(n);for(var i=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;i[h>>e.LUMINANCE_SHIFT]++}for(var A=e.estimateBlackPoint(i),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var h=m[p+f]&255;h<A&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,i=0,l=0;l<n;l++)r[l]>i&&(s=l,i=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var h=s;s=c,c=h}if(c-s<=n/16)throw new Kt;for(var A=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(A=l,m=f)}return A<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(UIe),XIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dte=function(t){XIe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),i=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&i++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,i,l,n,a),u=new Sf(n,a);e.calculateThresholdForBlock(s,i,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,i,l,c){for(var u=i-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var A=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var g=e.cap(m,2,n-3),x=0,y=-2;y<=2;y++){var b=l[A+y];x+=b[g-2]+b[g-1]+b[g]+b[g+1]+b[g+2]}var w=x/25;e.thresholdBlock(r,p,h,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,i,l){for(var c=0,u=a*i+n;c<e.BLOCK_SIZE;c++,u+=i)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,i){for(var l=i-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var h=0;h<n;h++){var A=h<<e.BLOCK_SIZE_POWER;A>c&&(A=c);for(var m=0,p=255,g=0,x=0,y=f*s+A;x<e.BLOCK_SIZE;x++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>g&&(g=w)}if(g-p>e.MIN_DYNAMIC_RANGE)for(x++,y+=s;x<e.BLOCK_SIZE;x++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(g-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&h>0)){var I=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;p<I&&(j=I)}u[d][h]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(WIe),aw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new M_("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new M_("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new M_("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new En,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var i=a[s]&255,l=void 0;i<64?l="#":i<128?l="+":i<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),YIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y4=function(t){YIe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),i=0;i<s;i++)a[i]=255-(a[i]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(aw),JIe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZIe=function(t){JIe(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var i=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var h=r[l],A=r[l+1],m=r[l+2];d=306*h+601*A+117*m+512>>10}i[c]=255-d}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*i+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*i+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,i/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new y4(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(aw),e4e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Il=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},jl=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},t4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mv=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Il(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return jl(this,function(A){switch(A.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=t4e(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Il(this,void 0,void 0,function(){var e;return jl(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new e4e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Il(this,void 0,void 0,function(){var r;return jl(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Il(this,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Il(this,void 0,void 0,function(){var n,a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Il(this,void 0,void 0,function(){var n;return jl(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Il(this,void 0,void 0,function(){var n,a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Il(this,void 0,void 0,function(){return jl(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Il(this,void 0,void 0,function(){var a,s;return jl(this,function(i){switch(i.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Il(this,void 0,void 0,function(){var a;return jl(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Il(this,void 0,void 0,function(){var a;return jl(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Il(this,void 0,void 0,function(){var n;return jl(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Il(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ni("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ni("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new ni("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new ni("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new ni("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ni("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ni("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new ni("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Il(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Il(this,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(i,l){if(a._stopAsyncDecode){l(new Kt("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);i(c)}catch(h){var u=r&&h instanceof Kt,d=h instanceof vi||h instanceof Nr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,i,l);l(h)}};return new Promise(function(i,l){return s(i,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var i=c instanceof vi||c instanceof Nr,l=c instanceof Kt;(i||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new ZIe(n,r),s=new dte(a);return new ute(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),bl=function(){function t(e,r,n,a,s,i){n===void 0&&(n=r==null?0:8*r.length),i===void 0&&(i=Ha.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=i,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,i==null?this.timestamp=Ha.currentTimeMillis():this.timestamp=i}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Ha.arraycopy(r,0,n,0,r.length),Ha.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),zT;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(zT||(zT={}));const Zr=zT;var WT;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(WT||(WT={}));const $o=WT;var b4=function(){function t(e,r,n,a,s,i){s===void 0&&(s=-1),i===void 0&&(i=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=i,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),gy=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new en;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),B0=function(){function t(e,r){if(r.length===0)throw new en;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Ha.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var i=r[a];n=gy.addOrSubtract(n,i)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=gy.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ha.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=gy.addOrSubtract(r[l-i],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)i[c+d]=gy.addOrSubtract(i[c+d],l.multiply(u,a[d]));return new t(l,i)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,i=0;i<r;i++)a[i]=n.multiply(s[i],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new en;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),i=this.field,l=0;l<a;l++)s[l]=i.multiply(n[l],r);return new t(i,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new en("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new en("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),i=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),i),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),r4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fte=function(t){r4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(xc),n4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ic=function(t){n4e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var i=new Int32Array(n),l=1,c=0;c<n;c++)i[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=i;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[i[c]]=c;return s.logTable=u,s.zero=new B0(s,Int32Array.from([0])),s.one=new B0(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new en;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new B0(this,a)},e.prototype.inverse=function(r){if(r===0)throw new fte;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Pn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(gy),a4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pC=function(t){a4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(xc),s4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sw=function(t){s4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(xc),w4=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new B0(n,e),s=new Int32Array(r),i=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(i=!1)}if(!i)for(var u=new B0(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],A=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,A),l=0;l<A.length;l++){var p=e.length-1-n.log(A[l]);if(p<0)throw new pC("Bad error location");e[p]=ic.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,i=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=i,f=c;if(i=l,c=u,i.isZero())throw new pC("r_{i-1} was zero");l=d;for(var h=s.getZero(),A=i.getCoefficient(i.getDegree()),m=s.inverse(A);l.getDegree()>=i.getDegree()&&!l.isZero();){var p=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),m);h=h.addOrSubtract(s.buildMonomial(p,g)),l=l.addOrSubtract(i.multiplyByMonomial(p,g))}if(u=h.multiply(c).addOrSubtract(f),l.getDegree()>=i.getDegree())throw new sw("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new pC("sigmaTilde(0) was zero");var y=s.inverse(x),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,i=1;i<s.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=s.inverse(i),a++);if(a!==r)throw new pC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,i=0;i<n;i++){for(var l=s.inverse(r[i]),c=1,u=0;u<n;u++)if(i!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[i]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[i]=s.multiply(a[i],l))}return a},t}(),jo;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(jo||(jo={}));var YQ=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),i=t.getEncodedData(a),l=new b4(s,i,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=jo.UPPER,a=jo.UPPER,s="",i=0;i<r;)if(a===jo.BINARY){if(r-i<5)break;var l=t.readCode(e,i,5);if(i+=5,l===0){if(r-i<11)break;l=t.readCode(e,i,11)+31,i+=11}for(var c=0;c<l;c++){if(r-i<8){i=r;break}var u=t.readCode(e,i,8);s+=Hn.castAsNonUtf8Char(u),i+=8}a=n}else{var d=a===jo.DIGIT?4:5;if(r-i<d)break;var u=t.readCode(e,i,d);i+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return jo.LOWER;case"P":return jo.PUNCT;case"M":return jo.MIXED;case"D":return jo.DIGIT;case"B":return jo.BINARY;case"U":default:return jo.UPPER}},t.getCharacter=function(e,r){switch(e){case jo.UPPER:return t.UPPER_TABLE[r];case jo.LOWER:return t.LOWER_TABLE[r];case jo.MIXED:return t.MIXED_TABLE[r];case jo.PUNCT:return t.PUNCT_TABLE[r];case jo.DIGIT:return t.DIGIT_TABLE[r];default:throw new sw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=ic.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=ic.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=ic.AZTEC_DATA_10):(n=12,r=ic.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Nr;for(var i=e.length%n,l=new Int32Array(s),c=0;c<s;c++,i+=n)l[c]=t.readCode(e,i,n);try{var u=new w4(r);u.decode(l,s-a)}catch(g){throw new Nr(g)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var h=l[c];if(h===0||h===d)throw new Nr;(h===1||h===d-1)&&f++}for(var A=new Array(a*n-f),m=0,c=0;c<a;c++){var h=l[c];if(h===1||h===d-1)A.fill(h>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)A[m++]=(h&1<<p)!==0}return A},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),i=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Pn.truncDivision(Pn.truncDivision(a,2)-1,15),u=a/2,d=Pn.truncDivision(c,2),l=0;l<u;l++){var f=l+Pn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,h=0;l<n;l++){for(var A=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,g=0;g<A;g++)for(var x=g*2,y=0;y<2;y++)i[h+x+y]=e.get(s[m+y],s[m+g]),i[h+2*A+x+y]=e.get(s[m+g],s[p-y]),i[h+4*A+x+y]=e.get(s[p-y],s[p-g]),i[h+6*A+x+y]=e.get(s[p-g],s[m+y]);h+=A*8}return i},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Yn=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,i=r-a;return Math.sqrt(s*s+i*i)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),XT=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Vr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*XT.floatToIntBits(this.x)+XT.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,i,l;if(n>=r&&n>=a?(i=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(i=e[1],s=e[0],l=e[2]):(i=e[2],s=e[0],l=e[1]),this.crossProductZ(s,i,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=i,e[2]=l},t.distance=function(e,r){return Yn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),R6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),i4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o4e=function(t){i4e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=i,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(R6),YT=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Kt}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,i=!0,l=!1,c=!1,u=!1,d=!1,f=!1,h=this.width,A=this.height;i;){i=!1;for(var m=!0;(m||!c)&&r<h;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,i=!0,c=!0):c||r++;if(r>=h){s=!0;break}for(var p=!0;(p||!u)&&a<A;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,i=!0,u=!0):u||a++;if(a>=A){s=!0;break}for(var g=!0;(g||!d)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,i=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,i=!0,f=!0):f||n--;if(n<0){s=!0;break}i&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new Kt;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new Kt;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new Kt;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new Kt;return this.centerEdges(_,b,I,j)}else throw new Kt},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=Yn.round(Yn.distance(e,r,n,a)),i=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=Yn.round(e+u*i),f=Yn.round(r+u*l);if(c.get(d,f))return new Vr(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),i=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),h=a.getY(),A=t.CORR;return s<this.width/2?[new Vr(f-A,h+A),new Vr(l+A,c+A),new Vr(u-A,d-A),new Vr(s+A,i-A)]:[new Vr(f+A,h+A),new Vr(l+A,c-A),new Vr(u-A,d+A),new Vr(s-A,i-A)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var i=e;i<=r;i++)if(s.get(i,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),JQ=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,i=0;i<r.length&&s;i+=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Kt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}s=!0;for(var i=r.length-2;i>=0&&s;i-=2){var l=Math.floor(r[i]),c=Math.floor(r[i+1]);if(l<-1||l>n||c<-1||c>a)throw new Kt;s=!1,l===-1?(r[i]=0,s=!0):l===n&&(r[i]=n-1,s=!0),c===-1?(r[i+1]=0,s=!0):c===a&&(r[i+1]=a-1,s=!0)}},t}(),Ate=function(){function t(e,r,n,a,s,i,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=i,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,i,l,c,u,d,f,h,A,m,p,g){var x=t.quadrilateralToSquare(e,r,n,a,s,i,l,c),y=t.squareToQuadrilateral(u,d,f,h,A,m,p,g);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var A=e[h],m=e[h+1],p=s*A+c*m+f;e[h]=(n*A+i*m+u)/p,e[h+1]=(a*A+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,i=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,A=0;A<h;A++){var m=e[A],p=r[A],g=s*m+c*p+f;e[A]=(n*m+i*p+u)/g,r[A]=(a*m+l*p+d)/g}},t.squareToQuadrilateral=function(e,r,n,a,s,i,l,c){var u=e-n+s-l,d=r-a+i-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,i-a,r,0,0,1);var f=n-s,h=l-s,A=a-i,m=c-i,p=f*m-h*A,g=(u*m-h*d)/p,x=(f*d-u*A)/p;return new t(n-e+g*n,l-e+x*l,e,a-r+g*a,c-r+x*c,r,g,x,1)},t.quadrilateralToSquare=function(e,r,n,a,s,i,l,c){return t.squareToQuadrilateral(e,r,n,a,s,i,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),l4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c4e=function(t){l4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w){var j=Ate.quadrilateralToQuadrilateral(s,i,l,c,u,d,f,h,A,m,p,g,x,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new Kt;for(var i=new Sf(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),JQ.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&i.set(f/2,c)}catch{throw new Kt}}return i},e}(JQ),M6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new c4e,t}(),Jl=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Vr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),u4e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new o4e(s,i,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Kt;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var i=n[(this.shift+s)%4];this.compact?(a<<=7,a+=i>>1&127):(a<<=10,a+=(i>>2&992)+(i>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,i,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Pn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new Kt},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,i=new Int32Array(n),l=n-1;l>=0;--l)i[l]=e&15,e>>=4;try{var c=new w4(ic.AZTEC_PARAM);c.decode(i,s)}catch{throw new Kt}for(var u=0,l=0;l<a;l++)u=(u<<4)+i[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,i=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,i,1,-1),c=this.getFirstDifferent(n,i,1,1),u=this.getFirstDifferent(a,i,-1,1),d=this.getFirstDifferent(s,i,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,i=!i}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Kt;this.compact=this.nbCenterLayers===5;var h=new Vr(r.getX()+.5,r.getY()-.5),A=new Vr(n.getX()+.5,n.getY()+.5),m=new Vr(a.getX()-.5,a.getY()+.5),p=new Vr(s.getX()-.5,s.getY()-.5);return this.expandSquare([h,A,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new YT(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var i=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Jl(i+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Jl(i+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Jl(i-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Jl(i-7,l-7),!1,-1,-1).toResultPoint()}var c=Yn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Yn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new YT(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Jl(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Jl(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Jl(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Jl(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Yn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=Yn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Jl(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var i=M6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return i.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),i=s/n,l=e.getX(),c=e.getY(),u=i*(r.getX()-e.getX())/s,d=i*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(Yn.round(l+f*u),Yn.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Jl(e.getX()-s,e.getY()+s),r=new Jl(r.getX()-s,r.getY()-s),n=new Jl(n.getX()+s,n.getY()-s),a=new Jl(a.getX()+s,a.getY()+s);var i=this.getColor(a,e);if(i===0)return!1;var l=this.getColor(e,r);return l!==i||(l=this.getColor(r,n),l!==i)?!1:(l=this.getColor(n,a),l===i)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,i=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(Yn.round(l),Yn.round(c))!==u&&i++;var h=i/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,i=e.getY()+a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n,i+=a;for(s-=n,i-=a;this.isValid(s,i)&&this.image.get(s,i)===r;)s+=n;for(s-=n;this.isValid(s,i)&&this.image.get(s,i)===r;)i+=a;return i-=a,new Jl(s,i)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),i=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Vr(l+a*s,c+a*i),d=new Vr(l-a*s,c-a*i);s=e[1].getX()-e[3].getX(),i=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new Vr(l+a*s,c+a*i),h=new Vr(l-a*s,c-a*i),A=[u,f,d,h];return A},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Yn.round(e.getX()),n=Yn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Yn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Yn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Pn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),tS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new u4e(e.getBlackMatrix()),s=null,i=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new YQ().decode(l)}catch(f){n=f}if(i==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),i=new YQ().decode(l)}catch(f){throw n??f}var c=new bl(i.getText(),i.getRawBytes(),i.getNumBits(),s,Zr.AZTEC,Ha.currentTimeMillis()),u=i.getByteSegments();u!=null&&c.putMetadata($o.BYTE_SEGMENTS,u);var d=i.getECLevel();return d!=null&&c.putMetadata($o.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get($a.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,i){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),d4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){d4e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new tS,r)||this}return e})(Mv);var Vi=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get($a.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),i=s.getResultMetadata(),l=270;i!==null&&i.get($o.ORIENTATION)===!0&&(l=l+i.get($o.ORIENTATION)%360),s.putMetadata($o.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new Vr(u-c[d].getY()-1,c[d].getX());return s}else throw new Kt}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Ao(n),i=r&&r.get($a.TRY_HARDER)===!0,l=Math.max(1,a>>(i?8:5)),c;i?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,A=u+l*(h?f:-f);if(A<0||A>=a)break;try{s=e.getBlackRow(A,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get($a.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete($a.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(A,s,r);if(y===1){w.putMetadata($o.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new Vr(n-j[0].getX()-1,j[0].getY()),j[1]=new Vr(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,g=0;g<2;g++){var x=m(g);if(typeof x=="object")return x.value}}throw new Kt},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var i=e.getSize();if(r>=i)throw new Kt;for(var l=!e.get(r),c=0,u=r;u<i;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===i))throw new Kt},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new Kt;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return Number.POSITIVE_INFINITY;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return Number.POSITIVE_INFINITY;u+=A}return u/s},t}(),f4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZQ=function(t){f4e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,i=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)i[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,A=e.CODE_START_A;A<=e.CODE_START_C;A++){var m=Vi.patternMatchVariance(i,e.CODE_PATTERNS[A],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=A)}if(h>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,h]);l+=i[0]+i[1],i=i.slice(2,i.length),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new Kt},e.decodeCode=function(r,n,a){Vi.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,i=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,i=l)}if(i>=0)return i;throw new Kt},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get($a.ASSUME_GS1)===!0,i=e.findStartPattern(n),l=i[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Nr}for(var f=!1,h=!1,A="",m=i[0],p=i[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var E=h;switch(h=!1,x=y,y=e.decodeCode(n,g,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=g.reduce(function(de,Ae){return de+Ae},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Nr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?A+=String.fromCharCode(y-64):A+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?A+=String.fromCharCode(32+y):A+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(A+="0"),A+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(A.length===0?A+="]C1":A+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}E&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new Kt;if(b-=w*x,b%103!==x)throw new vi;var O=A.length;if(O===0)throw new Kt;O>0&&j&&(d===e.CODE_CODE_C?A=A.substring(0,O-2):A=A.substring(0,O-1));for(var P=(i[1]+i[0])/2,T=m+S/2,F=u.length,J=new Uint8Array(F),ge=0;ge<F;ge++)J[ge]=u[ge];var le=[new Vr(P,r),new Vr(T,r)];return new bl(A,J,0,le,Zr.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Vi),A4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eV=function(t){A4e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),A,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new Kt;A=e.patternToChar(p),this.decodeRowResult+=A,m=f;try{for(var g=(s=void 0,Oj(u)),x=g.next();!x.done;x=g.next()){var y=x.value;f+=y}}catch(F){s={error:F}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=Oj(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(F){l={error:F}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==h&&I*2<b)throw new Kt;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,E=0,S=0;S<_;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(E%43))throw new vi;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new Kt;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var P=(d[1]+d[0])/2,T=m+b/2;return new bl(O,null,0,[new Vr(P,r),new Vr(T,r)],Zr.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),i=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[i]++;else{if(i===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+i-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,c=!c}throw new Kt},e.toNarrowWidePattern=function(r){var n,a,s=r.length,i=0,l;do{var c=2147483647;try{for(var u=(n=void 0,Oj(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>i&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}i=c,l=0;for(var h=0,A=0,m=0;m<s;m++){var f=r[m];f>i&&(A|=1<<s-1-m,l++,h+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>i&&(l--,f*2>=h))return-1}return A}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new Kt},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i==="+"||i==="$"||i==="%"||i==="/"){var l=r.charAt(s+1),c="\0";switch(i){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Nr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Nr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Nr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Nr;break}a+=c,s++}else a+=i}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Vi),h4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tV=function(t){h4e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var A,m;do{e.recordPattern(n,d,h);var p=this.toPattern(h);if(p<0)throw new Kt;A=this.patternToChar(p),this.decodeRowResult+=A,m=d;try{for(var g=(s=void 0,Dj(h)),x=g.next();!x.done;x=g.next()){var y=x.value;d+=y}}catch(S){s={error:S}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=Dj(h),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(S){l={error:S}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new Kt;if(this.decodeRowResult.length<2)throw new Kt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,E=m+b/2;return new bl(I,null,0,[new Vr(_,r),new Vr(E,r)],Zr.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,i=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([i,d]);i+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Kt},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var i=Dj(r),l=i.next();!l.done;l=i.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/s);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var A=0;A<h;A++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new Kt},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var i=r.charAt(s);if(i>="a"&&i<="d"){if(s>=n-1)throw new Nr;var l=r.charAt(s+1),c="\0";switch(i){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Nr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Nr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Nr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Nr;break}a+=c,s++}else a+=i}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,i=0,l=n-1;l>=0;l--)i+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[i%47])throw new vi},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Vi),m4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rV=function(t){m4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,i,l=this.decodeStart(n),c=this.decodeEnd(n),u=new En;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get($a.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,A=!1,m=0;try{for(var p=p4e(f),g=p.next();!g.done;g=p.next()){var x=g.value;if(h===x){A=!0;break}x>m&&(m=x)}}catch(w){s={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}if(!A&&h>m&&(A=!0),!A)throw new Nr;var y=[new Vr(l[1],r),new Vr(c[0],r)],b=new bl(d,null,0,y,Zr.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var i=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(i.fill(0),l.fill(0),c.fill(0);n<a;){Vi.recordPattern(r,n,i);for(var u=0;u<5;u++){var d=2*u;l[u]=i[d],c[u]=i[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),i.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new Kt},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new Kt;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(i){i instanceof Kt&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,i=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;i.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)i[u]++;else{if(u===s-1){if(Vi.patternMatchVariance(i,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=i[0]+i[1],Ha.arraycopy(i,2,i,0,u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,c=!c}throw new Kt},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,i=0;i<s;i++){var l=e.PATTERNS[i],c=Vi.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=i):c===n&&(a=-1)}if(a>=0)return a%10;throw new Kt},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Vi),g4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lv=function(t){g4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,i=Int32Array.from([0,0,0]);!n;){i=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,i);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,i){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,h=n;h<l;h++)if(r.get(h)!==f)i[c]++;else{if(c===d-1){if(Vi.patternMatchVariance(i,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=i[0]+i[1];for(var A=i.slice(2,i.length),m=0;m<c-1;m++)i[m]=A[m];i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,f=!f}throw new Kt},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var i=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=Vi.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,l=u)}if(l>=0)return l;throw new Kt},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Vi),x4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v4e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Vr((n[0]+n[1])/2,e),new Vr(s,e)],u=new bl(i,null,0,c,Zr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=lv.decodeDigit(e,i,c,lv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,x4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new Kt;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new Kt;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new Kt},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[$o.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,i=s<10?"0"+s:s.toString();return r+a+"."+i},t}(),y4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b4e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),i=a.toString(),l=t.parseExtensionString(i),c=[new Vr((n[0]+n[1])/2,e),new Vr(s,e)],u=new bl(i,null,0,c,Zr.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=lv.decodeDigit(e,i,c,lv.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,y4e(i)),A=h.next();!A.done;A=h.next()){var m=A.value;c+=m}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new Kt;if(parseInt(n.toString())%4!==u)throw new Kt;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[$o.ISSUE_NUMBER,parseInt(e)]])},t}(),w4e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=lv.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new v4e;return s.decodeRow(e,r,a)}catch{var i=new b4e;return i.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),N4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(t){N4e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),i=0;i<a.length;i++)s[i]=a[a.length-i-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),i=a==null?null:a.get($a.NEED_RESULT_POINT_CALLBACK);if(i!=null){var l=new Vr((s[0]+s[1])/2,r);i.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(i!=null){var f=new Vr(u,r);i.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(i!=null){var A=new Vr((h[0]+h[1])/2,r);i.foundPossibleResultPoint(A)}var m=h[1],p=m+(m-h[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new Kt;var g=d.toString();if(g.length<8)throw new Nr;if(!e.checkChecksum(g))throw new vi;var x=(s[1]+s[0])/2,y=(h[1]+h[0])/2,b=this.getBarcodeFormat(),w=[new Vr(x,r),new Vr(y,r)],j=new bl(g,null,0,w,b,new Date().getTime()),I=0;try{var _=w4e.decodeRow(r,n,h[1]);j.putMetadata($o.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var E=a==null?null:a.get($a.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var O in E)if(I.toString()===O){S=!0;break}if(!S)throw new Kt}return b===Zr.EAN_13||Zr.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}a*=3;for(var s=n-2;s>=0;s-=2){var i=r.charAt(s).charCodeAt(0)-48;if(i<0||i>9)throw new Nr;a+=i}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(lv),C4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JT=function(t){C4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,A=0;A<6&&f<d;A++){var m=ki.decodeDigit(r,u,f,ki.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,nV(u)),g=p.next();!g.done;g=p.next()){var x=g.value;f+=x}}catch(j){s={error:j}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}m>=10&&(h|=1<<5-A)}a=e.determineFirstDigit(a,h);var y=ki.findGuardPattern(r,f,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var A=0;A<6&&f<d;A++){var m=ki.decodeDigit(r,u,f,ki.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,nV(u)),w=b.next();!w.done;w=b.next()){var x=w.value;f+=x}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zr.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new Kt},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(ki),_4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sV=function(t){_4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var A=ki.decodeDigit(r,u,f,ki.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var m=(s=void 0,aV(u)),p=m.next();!p.done;p=m.next()){var g=p.value;f+=g}}catch(w){s={error:w}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(s)throw s.error}}}var x=ki.findGuardPattern(r,f,!0,ki.MIDDLE_PATTERN,new Int32Array(ki.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var A=ki.decodeDigit(r,u,f,ki.L_PATTERNS);a+=String.fromCharCode(48+A);try{for(var y=(l=void 0,aV(u)),b=y.next();!b.done;b=y.next()){var g=b.value;f+=g}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zr.EAN_8},e}(ki),E4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iV=function(t){E4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new JT,r}return e.prototype.getBarcodeFormat=function(){return Zr.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new bl(n.substring(1),null,null,r.getResultPoints(),Zr.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new Kt},e.prototype.reset=function(){this.ean13Reader.reset()},e}(ki),S4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oV=function(t){S4e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,i,l=this.decodeMiddleCounters.map(function(g){return g});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var A=(s=void 0,I4e(l)),m=A.next();!m.done;m=A.next()){var p=m.value;u+=p}}catch(g){s={error:g}}finally{try{m&&!m.done&&(i=A.return)&&i.call(A)}finally{if(s)throw s.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new En(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return ki.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw Kt.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Zr.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(i){return i.charCodeAt(0)}),a=new En;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(ki),j4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rj=function(t){j4e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get($a.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(Zr.EAN_13)>-1&&s.push(new JT),a.indexOf(Zr.UPC_A)>-1&&s.push(new iV),a.indexOf(Zr.EAN_8)>-1&&s.push(new sV),a.indexOf(Zr.UPC_E)>-1&&s.push(new oV)),s.length===0&&(s.push(new JT),s.push(new iV),s.push(new sV),s.push(new oV)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,i;try{for(var l=lV(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===Zr.EAN_13&&d.getText().charAt(0)==="0",h=a==null?null:a.get($a.POSSIBLE_FORMATS),A=h==null||h.includes(Zr.UPC_A);if(f&&A){var m=d.getRawBytes(),p=new bl(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Zr.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(g){s={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(s)throw s.error}}throw new Kt},e.prototype.reset=function(){var r,n;try{for(var a=lV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;i.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Vi),B4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P4e=function(t){B4e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new Kt;var i=this.codaBarDecodeRow(s.row);if(!i)throw new Kt;return new bl(i,null,0,[new Vr(s.left,r),new Vr(s.right,r)],Zr.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var i=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],i.push(c),c=1);return i.push(c),i.length<23&&(i.length+1)%8!==0?null:{row:i,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),i=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[i]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[i])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Vi),T4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pm=function(t){T4e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Vi.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new Kt},e.count=function(r){return Yn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]>s&&(s=n[i],a=i);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],i=1;i<r.length;i++)n[i]<s&&(s=n[i],a=i);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],i=s+r[2]+r[3],l=s/i;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=k4e(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Vi),rS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),hte=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Vr(n,s)),this.resultPoints.push(new Vr(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),F4e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,i=0;try{for(var l=F4e(e),c=l.next();!c.done;c=l.next()){var u=c.value;i+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,h=e.length,A=0;A<h-1;A++){var m=void 0;for(m=1,f|=1<<A;m<e[A];m++,f&=~(1<<A)){var p=t.combins(i-m-1,h-A-2);if(n&&f===0&&i-m-(h-A-1)>=h-A-1&&(p-=t.combins(i-m-(h-A),h-A-2)),h-A-1>1){for(var g=0,x=i-m-(h-A-2);x>r;x--)g+=t.combins(i-m-x-1,h-A-3);p-=g*(h-1-A)}else i-m>r&&p--;d+=p}i-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,i=1,l=e;l>n;l--)s*=l,i<=a&&(s/=i,i++);for(;i<=a;)s/=i,i++;return s},t}(),O4e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Ao(n),s=0,i=e[0],l=i.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&a.set(s),s++}return a},t}(),vm=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),L6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),D4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cd=function(t){D4e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(L6),R4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ym=function(t){R4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(L6),M4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ug=function(t){M4e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Nr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(L6),gC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L4e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,i,l,c,u;if(!e)return null;if(e.length<2)throw new Kt;var d=e.substring(0,2);try{for(var f=gC(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var A=h.value;if(A[0]===d)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,A[2],e):t.processFixedAI(2,A[1],e)}}catch(I){r={error:I}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new Kt;var m=e.substring(0,3);try{for(var p=gC(t.THREE_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var A=g.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,A[2],e):t.processFixedAI(3,A[1],e)}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var x=gC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var A=y.value;if(A[0]===m)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){i={error:I}}finally{try{y&&!y.done&&(l=x.return)&&l.call(x)}finally{if(i)throw i.error}}if(e.length<4)throw new Kt;var b=e.substring(0,4);try{for(var w=gC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var A=j.value;if(A[0]===b)return A[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,A[2],e):t.processFixedAI(4,A[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new Kt},t.processFixedAI=function(e,r,n){if(n.length<e)throw new Kt;var a=n.substring(0,e);if(n.length<e+r)throw new Kt;var s=n.substring(e,e+r),i=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(i);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var i=n.substring(e,s),l=n.substring(s),c="("+a+")"+i,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),L_=function(){function t(e){this.buffer=new En,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),i=L4e.parseFieldsInGeneralPurpose(s.getNewString());if(i!=null&&e.append(i),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Ug(this.information.getSize(),Ug.FNC1,Ug.FNC1):new Ug(this.information.getSize(),r-1,Ug.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Ug(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new ym(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ym(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new ym(this.current.getPosition(),this.buffer.toString()):r=new ym(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new vm(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new ym(this.current.getPosition(),this.buffer.toString());return new vm(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vm(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new ym(this.current.getPosition(),this.buffer.toString());return new vm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vm(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new ym(this.current.getPosition(),this.buffer.toString());return new vm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vm(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new cd(e+5,cd.FNC1);if(r>=5&&r<15)return new cd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new cd(e+7,""+(n+1));if(n>=90&&n<116)return new cd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Nr}return new cd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new cd(e+5,cd.FNC1);if(r>=5&&r<15)return new cd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new cd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new sw("Decoding invalid alphanumeric value: "+n)}return new cd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),mte=function(){function t(e){this.information=e,this.generalDecoder=new L_(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),U4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vd=function(t){U4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var i=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?i:3*i}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(mte),Q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V4e=function(t){Q4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new En;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(vd),H4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$4e=function(t){H4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new En;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(mte),K4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U_=function(t){K4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var i=this.checkWeight(s),l=1e5,c=0;c<5;++c)i/l===0&&r.append("0"),l/=10;r.append(i)},e}(vd),G4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pte=function(t){G4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+U_.GTIN_SIZE+e.WEIGHT_SIZE)throw new Kt;var r=new En;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+U_.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(U_),q4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z4e=function(t){q4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(pte),W4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X4e=function(t){W4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(pte),Y4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J4e=function(t){Y4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vd.GTIN_SIZE)throw new Kt;var r=new En;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(vd),Z4e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e3e=function(t){Z4e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+vd.GTIN_SIZE)throw new Kt;var r=new En;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+vd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(vd),t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oh=function(t){t3e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Kt;var r=new En;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var i=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),i/10===0&&r.append("0"),r.append(i),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(U_);function r3e(t){try{if(t.get(1))return new V4e(t);if(!t.get(2))return new $4e(t);var e=L_.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new z4e(t);case 5:return new X4e(t)}var r=L_.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new J4e(t);case 13:return new e3e(t)}var n=L_.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Oh(t,"310","11");case 57:return new Oh(t,"320","11");case 58:return new Oh(t,"310","13");case 59:return new Oh(t,"320","13");case 60:return new Oh(t,"310","15");case 61:return new Oh(t,"320","15");case 62:return new Oh(t,"310","17");case 63:return new Oh(t,"320","17")}}catch(a){throw console.log(a),new sw("unknown decoder: "+t)}}var cV=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),n3e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(i){a.getLeftChar().getValue()===i.getLeftChar().getValue()&&a.getRightChar().getValue()===i.getRightChar().getValue()&&a.getFinderPatter().getValue()===i.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),a3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s3e=function(t){a3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof Kt){if(!this.pairs.length)throw new Kt;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Kt},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,i=n;i<this.rows.length;i++){var l=this.rows[i];this.pairs.length=0;try{for(var c=(a=void 0,Dh(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,i+1)}catch(h){console.log(h)}}}throw new Kt},e.isValidSequence=function(r){var n,a;try{for(var s=Dh(e.FINDER_PATTERN_SEQUENCES),i=s.next();!i.done;i=s.next()){var l=i.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,i=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){i=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}i||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new n3e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,i,l,c,u;try{for(var d=Dh(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var A=!0;try{for(var m=(i=void 0,Dh(h.getPairs())),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Dh(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(cV.equals(g,w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}x||(A=!1)}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,i,l,c,u;try{for(var d=Dh(n),f=d.next();!f.done;f=d.next()){var h=f.value,A=!0;try{for(var m=(i=void 0,Dh(r)),p=m.next();!p.done;p=m.next()){var g=p.value,x=!1;try{for(var y=(c=void 0,Dh(h.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(g.equals(w)){x=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!x){A=!1;break}}}catch(j){i={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(i)throw i.error}}if(A)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=O4e.buildBitArray(r),a=r3e(n),s=a.parseInformation(),i=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[i[0],i[1],l[0],l[1]];return new bl(s,null,null,c,Zr.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),i=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),i++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),i++)}s%=211;var d=211*(i-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var i,l=!0,c=-1;do this.findNextPair(r,n,c),i=this.parseFoundFinderPattern(r,a,s),i===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,i,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new Kt;var d;try{d=this.decodeDataCharacter(r,i,s,!1)}catch(f){d=null,console.log(f)}return new cV(u,d,i,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var i=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<i&&(d=!r.get(l),!!d);)l++;for(var f=0,h=l,A=l;A<i;A++)if(r.get(A)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=h,this.startEnd[1]=A;return}u&&e.reverseCounters(s),h+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new Kt},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,i,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,i=c,l=this.startEnd[1]}else i=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Ha.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new hte(d,[i,l],i,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var i=this.getDataCharacterCounters(),l=0;l<i.length;l++)i[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],i);else{e.recordPattern(r,n.getStartEnd()[1],i);for(var c=0,u=i.length-1;c<u;c++,u--){var d=i[c];i[c]=i[u],i[u]=d}}var f=17,h=Yn.sum(new Int32Array(i))/f,A=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-A)/A>.3)throw new Kt;for(var m=this.getOddCounts(),p=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<i.length;c++){var y=1*i[c]/h,b=y+.5;if(b<1){if(y<.3)throw new Kt;b=1}else if(b>8){if(y>8.7)throw new Kt;b=8}var w=c/2;c&1?(p[w]=b,x[w]=y-b):(m[w]=b,g[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[j][2*c];_+=m[c]*E}I+=m[c]}for(var S=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var E=e.WEIGHTS[j][2*c+1];S+=p[c]*E}var O=_+S;if(I&1||I>13||I<4)throw new Kt;var P=(13-I)/2,T=e.SYMBOL_WIDEST[P],F=9-T,J=yx.getRSSvalue(m,T,!0),ge=yx.getRSSvalue(p,F,!1),le=e.EVEN_TOTAL_SUBSET[P],de=e.GSUM[P],Ae=J*le+ge+de;return new rS(Ae,O)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=Yn.sum(new Int32Array(this.getOddCounts())),a=Yn.sum(new Int32Array(this.getEvenCounts())),s=!1,i=!1;n>13?i=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new Kt;i=!0}else{if(!f)throw new Kt;c=!0}else if(u===-1)if(d){if(f)throw new Kt;s=!0}else{if(!f)throw new Kt;l=!0}else if(u===0){if(d){if(!f)throw new Kt;n<a?(s=!0,c=!0):(i=!0,l=!0)}else if(f)throw new Kt}else throw new Kt;if(s){if(i)throw new Kt;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Kt;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Pm),i3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o3e=function(t){i3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(rS),l3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uV=function(t){l3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,i,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=Mj(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var A=h.value;if(A.getCount()>1)try{for(var m=(l=void 0,Mj(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var g=p.value;if(g.getCount()>1&&e.checkChecksum(A,g))return e.constructResult(A,g)}}catch(x){l={error:x}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(x){s={error:x}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(s)throw s.error}}throw new Kt},e.addOrTally=function(r,n){var a,s;if(n!=null){var i=!1;try{for(var l=Mj(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),i=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}i||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),i=new En,l=13-s.length;l>0;l--)i.append("0");i.append(s);for(var c=0,l=0;l<13;l++){var u=i.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),i.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new bl(i.toString(),null,0,[d[0],d[1],f[0],f[1]],Zr.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var i=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,i),c=s==null?null:s.get($a.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(i[0]+i[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new Vr(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new o3e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),i=0;i<s.length;i++)s[i]=0;if(a)Vi.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Vi.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=Yn.sum(new Int32Array(s))/d,h=this.getOddCounts(),A=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var g=s[l]/f,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(l/2);l&1?(A[y]=x,p[y]=g-x):(h[y]=x,m[y]=g-x)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=h.length-1;l>=0;l--)w*=9,w+=h[l],b+=h[l];for(var j=0,I=0,l=A.length-1;l>=0;l--)j*=9,j+=A[l],I+=A[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new Kt;var E=(12-b)/2,S=e.OUTSIDE_ODD_WIDEST[E],O=9-S,P=yx.getRSSvalue(h,S,!1),T=yx.getRSSvalue(A,O,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],J=e.OUTSIDE_GSUM[E];return new rS(P*F+T+J,_)}else{if(I&1||I>10||I<4)throw new Kt;var E=(10-I)/2,S=e.INSIDE_ODD_WIDEST[E],O=9-S,P=yx.getRSSvalue(h,S,!0),T=yx.getRSSvalue(A,O,!1),ge=e.INSIDE_ODD_TOTAL_SUBSET[E],J=e.INSIDE_GSUM[E];return new rS(T*ge+P+J,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),i=!1,l=0;l<s&&(i=!r.get(l),n!==i);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==i)a[c]++;else{if(c===3){if(Pm.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,i=!i}throw new Kt},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var i=r.get(s[0]),l=s[0]-1;l>=0&&i!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);Ha.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=l,A=s[1];return a&&(h=r.getSize()-1-h,A=r.getSize()-1-A),new hte(f,[l,s[1]],h,A,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=Yn.sum(new Int32Array(this.getOddCounts())),s=Yn.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(i=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(i=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),h=(s&1)===1;if(d===1)if(f){if(h)throw new Kt;l=!0}else{if(!h)throw new Kt;u=!0}else if(d===-1)if(f){if(h)throw new Kt;i=!0}else{if(!h)throw new Kt;c=!0}else if(d===0){if(f){if(!h)throw new Kt;a<s?(i=!0,u=!0):(l=!0,c=!0)}else if(h)throw new Kt}else throw new Kt;if(i){if(l)throw new Kt;Pm.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Pm.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new Kt;Pm.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Pm.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Pm),c3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bx=function(t){c3e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get($a.POSSIBLE_FORMATS):null,s=r&&r.get($a.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,i=r&&r.get($a.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Zr.EAN_13)||a.includes(Zr.UPC_A)||a.includes(Zr.EAN_8)||a.includes(Zr.UPC_E))&&n.readers.push(new Rj(r)),a.includes(Zr.CODE_39)&&n.readers.push(new eV(s,i)),a.includes(Zr.CODE_93)&&n.readers.push(new tV),a.includes(Zr.CODE_128)&&n.readers.push(new ZQ),a.includes(Zr.ITF)&&n.readers.push(new rV),a.includes(Zr.CODABAR)&&n.readers.push(new P4e),a.includes(Zr.RSS_14)&&n.readers.push(new uV),a.includes(Zr.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new s3e))),n.readers.length===0&&(n.readers.push(new Rj(r)),n.readers.push(new eV),n.readers.push(new tV),n.readers.push(new Rj(r)),n.readers.push(new ZQ),n.readers.push(new rV),n.readers.push(new uV)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new Kt},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Vi),u3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){u3e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new bx(n),r,n)||this}return e})(Mv);var dV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ca=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),aa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),d3e=function(){function t(e,r,n,a,s,i){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=i;var u=0,d=i.getECCodewords(),f=i.getECBlocks();try{for(var h=dV(f),A=h.next();!A.done;A=h.next()){var m=A.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Nr;try{for(var s=dV(t.VERSIONS),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Nr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ca(5,new aa(1,3))),new t(2,12,12,10,10,new ca(7,new aa(1,5))),new t(3,14,14,12,12,new ca(10,new aa(1,8))),new t(4,16,16,14,14,new ca(12,new aa(1,12))),new t(5,18,18,16,16,new ca(14,new aa(1,18))),new t(6,20,20,18,18,new ca(18,new aa(1,22))),new t(7,22,22,20,20,new ca(20,new aa(1,30))),new t(8,24,24,22,22,new ca(24,new aa(1,36))),new t(9,26,26,24,24,new ca(28,new aa(1,44))),new t(10,32,32,14,14,new ca(36,new aa(1,62))),new t(11,36,36,16,16,new ca(42,new aa(1,86))),new t(12,40,40,18,18,new ca(48,new aa(1,114))),new t(13,44,44,20,20,new ca(56,new aa(1,144))),new t(14,48,48,22,22,new ca(68,new aa(1,174))),new t(15,52,52,24,24,new ca(42,new aa(2,102))),new t(16,64,64,14,14,new ca(56,new aa(2,140))),new t(17,72,72,16,16,new ca(36,new aa(4,92))),new t(18,80,80,18,18,new ca(48,new aa(4,114))),new t(19,88,88,20,20,new ca(56,new aa(4,144))),new t(20,96,96,22,22,new ca(68,new aa(4,174))),new t(21,104,104,24,24,new ca(56,new aa(6,136))),new t(22,120,120,18,18,new ca(68,new aa(6,175))),new t(23,132,132,20,20,new ca(62,new aa(8,163))),new t(24,144,144,22,22,new ca(62,new aa(8,156),new aa(2,155))),new t(25,8,18,6,16,new ca(7,new aa(1,5))),new t(26,8,32,6,14,new ca(11,new aa(1,10))),new t(27,12,26,10,24,new ca(14,new aa(1,16))),new t(28,12,36,10,16,new ca(18,new aa(1,22))),new t(29,16,36,14,16,new ca(24,new aa(1,32))),new t(30,16,48,14,22,new ca(28,new aa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),f3e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Nr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Sf(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return d3e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),i=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,i)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&i&3&&!c)e[r++]=this.readCorner2(s,i)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(i&7)&&!u)e[r++]=this.readCorner3(s,i)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(i&7)===4&&!d)e[r++]=this.readCorner4(s,i)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n-=2,a+=2;while(n>=0&&a<i);n+=1,a+=3;do n>=0&&a<i&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,i)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<i);if(r!==this.version.getTotalCodewords())throw new Nr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new en("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),i=r/a|0,l=n/s|0,c=i*a,u=l*s,d=new Sf(u,c),f=0;f<i;++f)for(var h=f*a,A=0;A<l;++A)for(var m=A*s,p=0;p<a;++p)for(var g=f*(a+2)+1+p,x=h+p,y=0;y<s;++y){var b=A*(s+2)+1+y;if(e.get(b,g)){var w=m+y;d.set(w,x)}}return d},t}(),fV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,i,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=fV(u),f=d.next();!f.done;f=d.next()){var h=f.value;c+=h.getCount()}}catch(J){n={error:J}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var A=new Array(c),m=0;try{for(var p=fV(u),g=p.next();!g.done;g=p.next())for(var h=g.value,x=0;x<h.getCount();x++){var y=h.getDataCodewords(),b=l.getECCodewords()+y;A[m++]=new t(y,new Uint8Array(b))}}catch(J){s={error:J}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(s)throw s.error}}for(var w=A[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,x=0;x<I;x++)for(var E=0;E<m;E++)A[E].codewords[x]=e[_++];for(var S=r.getVersionNumber()===24,O=S?8:m,E=0;E<O;E++)A[E].codewords[j-1]=e[_++];for(var P=A[0].codewords.length,x=j;x<P;x++)for(var E=0;E<m;E++){var T=S?(E+8)%m:E,F=S&&T>7?x-1:x;A[T].codewords[F]=e[_++]}if(_!==e.length)throw new en;return A},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),gte=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new en(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var i=8-n,l=e<i?e:i,c=i-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ii;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ii||(Ii={}));var h3e=function(){function t(){}return t.decode=function(e){var r=new gte(e),n=new En,a=new En,s=new Array,i=Ii.ASCII_ENCODE;do if(i===Ii.ASCII_ENCODE)i=this.decodeAsciiSegment(r,n,a);else{switch(i){case Ii.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ii.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ii.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ii.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ii.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Nr}i=Ii.ASCII_ENCODE}while(i!==Ii.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new b4(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Nr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Ii.ASCII_ENCODE;if(s===129)return Ii.PAD_ENCODE;if(s<=229){var i=s-130;i<10&&r.append("0"),r.append(""+i)}else switch(s){case 230:return Ii.C40_ENCODE;case 231:return Ii.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ii.ANSIX12_ENCODE;case 239:return Ii.TEXT_ENCODE;case 240:return Ii.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Nr;break}}while(e.available()>0);return Ii.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Nr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Nr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Nr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Nr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Nr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Nr;break;default:throw new Nr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var i=n[s];switch(i){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(i<14)r.append(String.fromCharCode(i+44));else if(i<40)r.append(String.fromCharCode(i+51));else throw new Nr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),i;if(s===0?i=e.available()/8|0:s<250?i=s:i=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),i<0)throw new Nr;for(var l=new Uint8Array(i),c=0;c<i;c++){if(e.available()<8)throw new Nr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(Qu.decode(l,Hn.ISO88591))}catch(u){throw new sw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),m3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p3e=function(){function t(){this.rsDecoder=new w4(ic.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new f3e(e),s=a.getVersion(),i=a.readCodewords(),l=A3e.getDataBlocks(i,s),c=0;try{for(var u=m3e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(c),A=l.length,m=0;m<A;m++){var p=l[m],g=p.getCodewords(),x=p.getNumDataCodewords();this.correctErrors(g,x);for(var y=0;y<x;y++)h[y*A+m]=g[y]}return h3e.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new vi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),g3e=function(){function t(e){this.image=e,this.rectangleDetector=new YT(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new Kt;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],i=r[3],l=this.transitionsBetween(n,i)+1,c=this.transitionsBetween(s,i)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,i,l,c);return new R6(u,[n,a,s,i])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Vr(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Vr(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],i=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=i,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(i+1)*4),c=t.shiftPoint(a,n,(i+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(i+1)*4);i=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new Vr(s.getX()+(a.getX()-n.getX())/(i+1),s.getY()+(a.getY()-n.getY())/(i+1)),f=new Vr(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),A=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>A?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],i=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,i*4);i=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(i&1)===1&&(i+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var h,A;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,i*4),h=t.shiftPoint(n,r,l*4),h=t.shiftPoint(h,a,i*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,i*4),A=t.shiftPoint(s,a,l*4),A=t.shiftPoint(A,r,i*4),[c,h,u,A]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,i,l){var c=M6.getInstance();return c.sampleGrid(e,i,l,.5,.5,i-.5,.5,i-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),i=Math.trunc(r.getY()),l=Math.abs(i-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=i,i=c}for(var u=Math.abs(s-n),d=Math.abs(i-a),f=-u/2,h=a<i?1:-1,A=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),g=n,x=a;g!==s;g+=A){var y=this.image.get(l?x:g,l?g:x);if(y!==p&&(m++,p=y),f+=d,f>0){if(x===i)break;x+=h,f-=u}}return m},t}(),nS=function(){function t(){this.decoder=new p3e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has($a.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var i=new g3e(e.getBlackMatrix()).detect();n=this.decoder.decode(i.getBits()),a=i.getPoints()}var l=n.getRawBytes(),c=new bl(n.getText(),l,8*l.length,a,Zr.DATA_MATRIX,Ha.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata($o.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata($o.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new Kt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(i-s+1)/a;if(u<=0||d<=0)throw new Kt;var f=a/2;s+=f,l+=f;for(var h=new Sf(u,d),A=0;A<d;A++)for(var m=s+A*a,p=0;p<u;p++)e.get(l+p*a,m)&&h.set(p,A);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new Kt;var i=a-e[0];if(i===0)throw new Kt;return i},t.NO_POINTS=[],t}(),x3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){x3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new nS,r)||this}return e})(Mv);var wx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(wx||(wx={}));var v3e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ni(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new en;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(wx.L,"L",1),t.M=new t(wx.M,"M",0),t.Q=new t(wx.Q,"Q",3),t.H=new t(wx.H,"H",2),t}(),y3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xte=function(){function t(e){this.errorCorrectionLevel=v3e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Pn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,i=0;try{for(var l=y3e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(i=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(i=u[1],s=f))}}catch(h){n={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(i):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),b3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=b3e(a),i=s.next();!i.done;i=s.next()){var l=i.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Ye=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),w3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},op=function(){function t(e,r){for(var n,a,s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=w3e(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()*(h.getDataCodewords()+c)}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Nr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Nr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new en;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var i=xte.numBitsDiffering(e,s);i<r&&(n=a+7,r=i)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Sf(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,i=0;i<n;i++)a===0&&(i===0||i===n-1)||a===n-1&&i===0||r.setRegion(this.alignmentPatternCenters[i]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Tt(7,new Ye(1,19)),new Tt(10,new Ye(1,16)),new Tt(13,new Ye(1,13)),new Tt(17,new Ye(1,9))),new t(2,Int32Array.from([6,18]),new Tt(10,new Ye(1,34)),new Tt(16,new Ye(1,28)),new Tt(22,new Ye(1,22)),new Tt(28,new Ye(1,16))),new t(3,Int32Array.from([6,22]),new Tt(15,new Ye(1,55)),new Tt(26,new Ye(1,44)),new Tt(18,new Ye(2,17)),new Tt(22,new Ye(2,13))),new t(4,Int32Array.from([6,26]),new Tt(20,new Ye(1,80)),new Tt(18,new Ye(2,32)),new Tt(26,new Ye(2,24)),new Tt(16,new Ye(4,9))),new t(5,Int32Array.from([6,30]),new Tt(26,new Ye(1,108)),new Tt(24,new Ye(2,43)),new Tt(18,new Ye(2,15),new Ye(2,16)),new Tt(22,new Ye(2,11),new Ye(2,12))),new t(6,Int32Array.from([6,34]),new Tt(18,new Ye(2,68)),new Tt(16,new Ye(4,27)),new Tt(24,new Ye(4,19)),new Tt(28,new Ye(4,15))),new t(7,Int32Array.from([6,22,38]),new Tt(20,new Ye(2,78)),new Tt(18,new Ye(4,31)),new Tt(18,new Ye(2,14),new Ye(4,15)),new Tt(26,new Ye(4,13),new Ye(1,14))),new t(8,Int32Array.from([6,24,42]),new Tt(24,new Ye(2,97)),new Tt(22,new Ye(2,38),new Ye(2,39)),new Tt(22,new Ye(4,18),new Ye(2,19)),new Tt(26,new Ye(4,14),new Ye(2,15))),new t(9,Int32Array.from([6,26,46]),new Tt(30,new Ye(2,116)),new Tt(22,new Ye(3,36),new Ye(2,37)),new Tt(20,new Ye(4,16),new Ye(4,17)),new Tt(24,new Ye(4,12),new Ye(4,13))),new t(10,Int32Array.from([6,28,50]),new Tt(18,new Ye(2,68),new Ye(2,69)),new Tt(26,new Ye(4,43),new Ye(1,44)),new Tt(24,new Ye(6,19),new Ye(2,20)),new Tt(28,new Ye(6,15),new Ye(2,16))),new t(11,Int32Array.from([6,30,54]),new Tt(20,new Ye(4,81)),new Tt(30,new Ye(1,50),new Ye(4,51)),new Tt(28,new Ye(4,22),new Ye(4,23)),new Tt(24,new Ye(3,12),new Ye(8,13))),new t(12,Int32Array.from([6,32,58]),new Tt(24,new Ye(2,92),new Ye(2,93)),new Tt(22,new Ye(6,36),new Ye(2,37)),new Tt(26,new Ye(4,20),new Ye(6,21)),new Tt(28,new Ye(7,14),new Ye(4,15))),new t(13,Int32Array.from([6,34,62]),new Tt(26,new Ye(4,107)),new Tt(22,new Ye(8,37),new Ye(1,38)),new Tt(24,new Ye(8,20),new Ye(4,21)),new Tt(22,new Ye(12,11),new Ye(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Tt(30,new Ye(3,115),new Ye(1,116)),new Tt(24,new Ye(4,40),new Ye(5,41)),new Tt(20,new Ye(11,16),new Ye(5,17)),new Tt(24,new Ye(11,12),new Ye(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Tt(22,new Ye(5,87),new Ye(1,88)),new Tt(24,new Ye(5,41),new Ye(5,42)),new Tt(30,new Ye(5,24),new Ye(7,25)),new Tt(24,new Ye(11,12),new Ye(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Tt(24,new Ye(5,98),new Ye(1,99)),new Tt(28,new Ye(7,45),new Ye(3,46)),new Tt(24,new Ye(15,19),new Ye(2,20)),new Tt(30,new Ye(3,15),new Ye(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Tt(28,new Ye(1,107),new Ye(5,108)),new Tt(28,new Ye(10,46),new Ye(1,47)),new Tt(28,new Ye(1,22),new Ye(15,23)),new Tt(28,new Ye(2,14),new Ye(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Tt(30,new Ye(5,120),new Ye(1,121)),new Tt(26,new Ye(9,43),new Ye(4,44)),new Tt(28,new Ye(17,22),new Ye(1,23)),new Tt(28,new Ye(2,14),new Ye(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Tt(28,new Ye(3,113),new Ye(4,114)),new Tt(26,new Ye(3,44),new Ye(11,45)),new Tt(26,new Ye(17,21),new Ye(4,22)),new Tt(26,new Ye(9,13),new Ye(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Tt(28,new Ye(3,107),new Ye(5,108)),new Tt(26,new Ye(3,41),new Ye(13,42)),new Tt(30,new Ye(15,24),new Ye(5,25)),new Tt(28,new Ye(15,15),new Ye(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Tt(28,new Ye(4,116),new Ye(4,117)),new Tt(26,new Ye(17,42)),new Tt(28,new Ye(17,22),new Ye(6,23)),new Tt(30,new Ye(19,16),new Ye(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Tt(28,new Ye(2,111),new Ye(7,112)),new Tt(28,new Ye(17,46)),new Tt(30,new Ye(7,24),new Ye(16,25)),new Tt(24,new Ye(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Tt(30,new Ye(4,121),new Ye(5,122)),new Tt(28,new Ye(4,47),new Ye(14,48)),new Tt(30,new Ye(11,24),new Ye(14,25)),new Tt(30,new Ye(16,15),new Ye(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Tt(30,new Ye(6,117),new Ye(4,118)),new Tt(28,new Ye(6,45),new Ye(14,46)),new Tt(30,new Ye(11,24),new Ye(16,25)),new Tt(30,new Ye(30,16),new Ye(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Tt(26,new Ye(8,106),new Ye(4,107)),new Tt(28,new Ye(8,47),new Ye(13,48)),new Tt(30,new Ye(7,24),new Ye(22,25)),new Tt(30,new Ye(22,15),new Ye(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Tt(28,new Ye(10,114),new Ye(2,115)),new Tt(28,new Ye(19,46),new Ye(4,47)),new Tt(28,new Ye(28,22),new Ye(6,23)),new Tt(30,new Ye(33,16),new Ye(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Tt(30,new Ye(8,122),new Ye(4,123)),new Tt(28,new Ye(22,45),new Ye(3,46)),new Tt(30,new Ye(8,23),new Ye(26,24)),new Tt(30,new Ye(12,15),new Ye(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Tt(30,new Ye(3,117),new Ye(10,118)),new Tt(28,new Ye(3,45),new Ye(23,46)),new Tt(30,new Ye(4,24),new Ye(31,25)),new Tt(30,new Ye(11,15),new Ye(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Tt(30,new Ye(7,116),new Ye(7,117)),new Tt(28,new Ye(21,45),new Ye(7,46)),new Tt(30,new Ye(1,23),new Ye(37,24)),new Tt(30,new Ye(19,15),new Ye(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Tt(30,new Ye(5,115),new Ye(10,116)),new Tt(28,new Ye(19,47),new Ye(10,48)),new Tt(30,new Ye(15,24),new Ye(25,25)),new Tt(30,new Ye(23,15),new Ye(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Tt(30,new Ye(13,115),new Ye(3,116)),new Tt(28,new Ye(2,46),new Ye(29,47)),new Tt(30,new Ye(42,24),new Ye(1,25)),new Tt(30,new Ye(23,15),new Ye(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Tt(30,new Ye(17,115)),new Tt(28,new Ye(10,46),new Ye(23,47)),new Tt(30,new Ye(10,24),new Ye(35,25)),new Tt(30,new Ye(19,15),new Ye(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Tt(30,new Ye(17,115),new Ye(1,116)),new Tt(28,new Ye(14,46),new Ye(21,47)),new Tt(30,new Ye(29,24),new Ye(19,25)),new Tt(30,new Ye(11,15),new Ye(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Tt(30,new Ye(13,115),new Ye(6,116)),new Tt(28,new Ye(14,46),new Ye(23,47)),new Tt(30,new Ye(44,24),new Ye(7,25)),new Tt(30,new Ye(59,16),new Ye(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Tt(30,new Ye(12,121),new Ye(7,122)),new Tt(28,new Ye(12,47),new Ye(26,48)),new Tt(30,new Ye(39,24),new Ye(14,25)),new Tt(30,new Ye(22,15),new Ye(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Tt(30,new Ye(6,121),new Ye(14,122)),new Tt(28,new Ye(6,47),new Ye(34,48)),new Tt(30,new Ye(46,24),new Ye(10,25)),new Tt(30,new Ye(2,15),new Ye(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Tt(30,new Ye(17,122),new Ye(4,123)),new Tt(28,new Ye(29,46),new Ye(14,47)),new Tt(30,new Ye(49,24),new Ye(10,25)),new Tt(30,new Ye(24,15),new Ye(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Tt(30,new Ye(4,122),new Ye(18,123)),new Tt(28,new Ye(13,46),new Ye(32,47)),new Tt(30,new Ye(48,24),new Ye(14,25)),new Tt(30,new Ye(42,15),new Ye(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Tt(30,new Ye(20,117),new Ye(4,118)),new Tt(28,new Ye(40,47),new Ye(7,48)),new Tt(30,new Ye(43,24),new Ye(22,25)),new Tt(30,new Ye(10,15),new Ye(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Tt(30,new Ye(19,118),new Ye(6,119)),new Tt(28,new Ye(18,47),new Ye(31,48)),new Tt(30,new Ye(34,24),new Ye(34,25)),new Tt(30,new Ye(20,15),new Ye(61,16)))],t}(),no;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(no||(no={}));var AV=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[no.DATA_MASK_000,new t(no.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[no.DATA_MASK_001,new t(no.DATA_MASK_001,function(e,r){return(e&1)===0})],[no.DATA_MASK_010,new t(no.DATA_MASK_010,function(e,r){return r%3===0})],[no.DATA_MASK_011,new t(no.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[no.DATA_MASK_100,new t(no.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[no.DATA_MASK_101,new t(no.DATA_MASK_101,function(e,r){return e*r%6===0})],[no.DATA_MASK_110,new t(no.DATA_MASK_110,function(e,r){return e*r%6<3})],[no.DATA_MASK_111,new t(no.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),N3e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Nr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,i=a-7,n=a-1;n>=i;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=xte.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Nr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return op.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var i=e-9;i>=a;i--)n=this.copyBit(i,s,n);var l=op.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var i=5;i>=0;i--)for(var s=e-9;s>=a;s--)n=this.copyBit(i,s,n);if(l=op.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Nr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=AV.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),i=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var A=i?a-1-h:h,m=0;m<2;m++)s.get(f-m,A)||(d++,u<<=1,this.bitMatrix.get(f-m,A)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));i=!i}if(c!==r.getTotalCodewords())throw new Nr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=AV.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),hV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C3e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,i,l;if(e.length!==r.getTotalCodewords())throw new en;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=hV(d),h=f.next();!h.done;h=f.next()){var A=h.value;u+=A.getCount()}}catch(F){a={error:F}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var g=hV(d),x=g.next();!x.done;x=g.next())for(var A=x.value,y=0;y<A.getCount();y++){var b=A.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(F){i={error:F}}finally{try{x&&!x.done&&(l=g.return)&&l.call(g)}finally{if(i)throw i.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var E=j-c.getECCodewordsPerBlock(),S=0,y=0;y<E;y++)for(var O=0;O<p;O++)m[O].codewords[y]=e[S++];for(var O=I;O<p;O++)m[O].codewords[E]=e[S++];for(var P=m[0].codewords.length,y=E;y<P;y++)for(var O=0;O<p;O++){var T=O<I?y:y+1;m[O].codewords[T]=e[S++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Cu;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Cu||(Cu={}));var Xa=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new en;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Cu.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Cu.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Cu.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Cu.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Cu.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Cu.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Cu.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Cu.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Cu.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Cu.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),_3e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new gte(e),i=new En,l=new Array,c=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(s.available()<4)h=Xa.TERMINATOR;else{var A=s.readBits(4);h=Xa.forBits(A)}switch(h){case Xa.TERMINATOR:break;case Xa.FNC1_FIRST_POSITION:case Xa.FNC1_SECOND_POSITION:f=!0;break;case Xa.STRUCTURED_APPEND:if(s.available()<16)throw new Nr;c=s.readBits(8),u=s.readBits(8);break;case Xa.ECI:var m=t.parseECIValue(s);if(d=Ri.getCharacterSetECIByValue(m),d===null)throw new Nr;break;case Xa.HANZI:var p=s.readBits(4),g=s.readBits(h.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,i,g);break;default:var x=s.readBits(h.getCharacterCountBits(r));switch(h){case Xa.NUMERIC:t.decodeNumericSegment(s,i,x);break;case Xa.ALPHANUMERIC:t.decodeAlphanumericSegment(s,i,x,f);break;case Xa.BYTE:t.decodeByteSegment(s,i,x,d,l,a);break;case Xa.KANJI:t.decodeKanjiSegment(s,i,x);break;default:throw new Nr}break}}while(h!==Xa.TERMINATOR)}catch{throw new Nr}return new b4(e,i.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Nr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/96<<8&4294967295|i%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(Qu.decode(a,Hn.GB2312))}catch(c){throw new Nr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Nr;for(var a=new Uint8Array(2*n),s=0;n>0;){var i=e.readBits(13),l=i/192<<8&4294967295|i%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(Qu.decode(a,Hn.SHIFT_JIS))}catch(c){throw new Nr(c)}},t.decodeByteSegment=function(e,r,n,a,s,i){if(8*n>e.available())throw new Nr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Hn.guessEncoding(l,i):u=a.getName();try{r.append(Qu.decode(l,u))}catch(d){throw new Nr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Nr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Nr;var i=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(i/45))),r.append(t.toAlphaNumericChar(i%45)),n-=2}if(n===1){if(e.available()<6)throw new Nr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Nr;var a=e.readBits(10);if(a>=1e3)throw new Nr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Nr;var s=e.readBits(7);if(s>=100)throw new Nr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Nr;var i=e.readBits(4);if(i>=10)throw new Nr;r.append(t.toAlphaNumericChar(i))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Nr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),vte=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),mV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E3e=function(){function t(){this.rsDecoder=new w4(ic.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Sf.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new N3e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(i){a=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new vte(!0)),s}catch(i){throw a!==null?a:i}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,i,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=C3e.getDataBlocks(u,l,c),f=0;try{for(var h=mV(d),A=h.next();!A.done;A=h.next()){var m=A.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{A&&!A.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Uint8Array(f),g=0;try{for(var x=mV(d),y=x.next();!y.done;y=x.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[g++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(i=x.return)&&i.call(x)}finally{if(s)throw s.error}}return _3e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new vi}for(var a=0;a<r;a++)e[a]=n[a]},t}(),S3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I3e=function(t){S3e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,i=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,i,l)},e}(Vr),j3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B3e=function(){function t(e,r,n,a,s,i,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=i,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,i=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)i[1]++;else if(f===2){if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,d);if(h!==null)return h}i[0]=i[2],i[1]=1,i[2]=0,f=1}else i[++f]++;else f===1&&f++,i[f]++;d++}if(this.foundPatternCross(i)){var h=this.handlePossibleCenter(i,u,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Kt},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,i=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===i||l[1]>n)return NaN;for(;c<i&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,i=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],i);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=j3e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,c,l))return h.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var A=new I3e(l,c,u);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null},t}(),P3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T3e=function(t){P3e(e,t);function e(r,n,a,s){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i.count=s,s===void 0&&(i.count=1),i}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,i=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(i,l,c,s)},e}(Vr),k3e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Q1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F3e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get($a.TRY_HARDER)!==void 0,n=e!=null&&e.get($a.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),i=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<i;h++)if(a.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,h,n);if(A===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,h=i-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var A=this.handlePossibleCenter(u,d,i,n);A===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return Vr.orderBestPatterns(p),new k3e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,i=s/2;return Math.abs(s-e[0])<i&&Math.abs(s-e[1])<i&&Math.abs(3*s-e[2])<3*i&&Math.abs(s-e[3])<i&&Math.abs(s-e[4])<i},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),i=0,l=this.image;e>=i&&r>=i&&l.get(r-i,e-i);)s[2]++,i++;if(e<i||r<i)return!1;for(;e>=i&&r>=i&&!l.get(r-i,e-i)&&s[1]<=n;)s[1]++,i++;if(e<i||r<i||s[1]>n)return!1;for(;e>=i&&r>=i&&l.get(r-i,e-i)&&s[0]<=n;)s[0]++,i++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(i=1;e+i<c&&r+i<u&&l.get(r+i,e+i);)s[2]++,i++;if(e+i>=c||r+i>=u)return!1;for(;e+i<c&&r+i<u&&!l.get(r+i,e+i)&&s[3]<n;)s[3]++,i++;if(e+i>=c||r+i>=u||s[3]>=n)return!1;for(;e+i<c&&r+i<u&&l.get(r+i,e+i)&&s[4]<n;)s[4]++,i++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,i=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(r,c);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,i=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<i&&s.get(c,r);)l[2]++,c++;if(c===i)return NaN;for(;c<i&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===i||l[3]>=n)return NaN;for(;c<i&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],i=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(i),e[2],s);if(!isNaN(l)&&(i=this.crossCheckHorizontal(Math.floor(i),Math.floor(l),e[2],s),!isNaN(i)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(i),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var A=d[f];if(A.aboutEquals(c,l,i)){d[f]=A.combineEstimate(l,i,c),u=!0;break}}if(!u){var m=new T3e(i,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=Q1(this.possibleCenters),i=s.next();!i.done;i=s.next()){var l=i.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,i=0,l=this.possibleCenters.length;try{for(var c=Q1(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,i+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=i/l,h=0;try{for(var A=Q1(this.possibleCenters),m=A.next();!m.done;m=A.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}return h<=.05*i},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new Kt;var i=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=Q1(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,A=h.getEstimatedModuleSize();c+=A,u+=A*A}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);i.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),E=Math.abs(j.getEstimatedModuleSize()-l);return _<E?-1:_>E?1:0});for(var p=Math.max(.2*l,m),g=0;g<i.length&&i.length>3;g++){var x=i[g];Math.abs(x.getEstimatedModuleSize()-l)>p&&(i.splice(g,1),g--)}}if(i.length>3){var c=0;try{for(var y=Q1(i),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/i.length,i.sort(function(I,_){if(_.getCount()===I.getCount()){var E=Math.abs(_.getEstimatedModuleSize()-l),S=Math.abs(I.getEstimatedModuleSize()-l);return E<S?1:E>S?-1:0}else return _.getCount()-I.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),O3e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get($a.NEED_RESULT_POINT_CALLBACK);var r=new F3e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new Kt("No pattern found in proccess finder.");var i=t.computeDimension(r,n,a,s),l=op.getProvisionalVersionForDimension(i),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/c,A=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,A,m,p);break}catch(b){if(!(b instanceof Kt))throw b}var g=t.createTransform(r,n,a,u,i),x=t.sampleGrid(this.image,g,i),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new R6(x,y)},t.createTransform=function(e,r,n,a,s){var i=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=i-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=i,d=i),Ate.quadrilateralToQuadrilateral(3.5,3.5,i,3.5,u,d,3.5,i,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=M6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=Yn.round(Vr.distance(e,r)/a),i=Yn.round(Vr.distance(e,n)/a),l=Math.floor((s+i)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Kt("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),i=1,l=e-(n-e);l<0?(i=e/(e-l),l=0):l>=this.image.getWidth()&&(i=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*i);return i=1,c<0?(i=r/(r-c),c=0):c>=this.image.getHeight()&&(i=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*i),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var i=e;e=r,r=i,i=n,n=a,a=i}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,h=0,A=n+d,m=e,p=r;m!==A;m+=d){var g=s?p:m,x=s?m:p;if(h===1===this.image.get(g,x)){if(h===2)return Yn.distance(m,p,e,r);h++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return h===2?Yn.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),i=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-i<e*3)throw new Kt("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new Kt("Alignment bottom exceeds estimated module size.");var d=new B3e(this.image,i,c,l-i,u-c,e,this.resultPointCallback);return d.find()},t}(),aS=function(){function t(){this.decoder=new E3e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get($a.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var i=new O3e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(i.getBits(),r),a=i.getPoints()}n.getOther()instanceof vte&&n.getOther().applyMirroredCorrection(a);var l=new bl(n.getText(),n.getRawBytes(),void 0,a,Zr.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata($o.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata($o.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata($o.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata($o.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new Kt;var a=this.moduleSize(r,e),s=r[1],i=n[1],l=r[0],c=n[0];if(l>=c||s>=i)throw new Kt;if(i-s!==c-l&&(c=l+(i-s),c>=e.getWidth()))throw new Kt;var u=Math.round((c-l+1)/a),d=Math.round((i-s+1)/a);if(u<=0||d<=0)throw new Kt;if(d!==u)throw new Kt;var f=Math.floor(a/2);s+=f,l+=f;var h=l+Math.floor((u-1)*a)-c;if(h>0){if(h>f)throw new Kt;l-=h}var A=s+Math.floor((d-1)*a)-i;if(A>0){if(A>f)throw new Kt;s-=A}for(var m=new Sf(u,d),p=0;p<d;p++)for(var g=s+Math.floor(p*a),x=0;x<u;x++)e.get(l+Math.floor(x*a),g)&&m.set(x,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],i=e[1],l=!0,c=0;s<a&&i<n;){if(l!==r.get(s,i)){if(++c===5)break;l=!l}s++,i++}if(s===a||i===n)throw new Kt;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),D3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kn=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Yn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var i=D3e(e),l=i.next();!l.done;l=i.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Mi.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),R3e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),M3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L3e=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new R3e(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,i=0,l=0,c=!1;i<r.getHeight();){var u=t.findVertices(r,i,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,M3e(s)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())))}}catch(A){n={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}i+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),i=new Array(8);return t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),i[4]!=null&&(n=Math.trunc(i[4].getX()),r=Math.trunc(i[4].getY())),t.copyToResult(i,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),i},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,i){for(var l=new Array(4),c=!1,u=new Int32Array(i.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,i,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,i,u);if(f!=null)d=f;else{a++;break}}l[0]=new Vr(d[0],a),l[1]=new Vr(d[1],a),c=!0;break}}var h=a+1;if(c){for(var A=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,i,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,A=0;else{if(A>t.SKIPPED_ROW_COUNT_MAX)break;A++}}h-=A+1,l[2]=new Vr(f[0],h),l[3]=new Vr(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&Mi.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,i,l){Mi.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,h=i.length,A=s;d<a;d++){var m=e.get(d,n);if(m!==A)l[f]++;else{if(f===h-1){if(t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Ha.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,A=!A}}return f===h-1&&t.patternMatchVariance(l,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,i=0,l=0;l<a;l++)s+=e[l],i+=r[l];if(s<i)return 1/0;var c=s/i;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],h=r[d]*c,A=f>h?f-h:h-f;if(A>n)return 1/0;u+=A}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),U3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qm=function(){function t(e,r){if(r.length===0)throw new en;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Ha.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=U3e(this.coefficients),i=s.next();!i.done;i=s.next()){var l=i.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),i=n.length-r.length;Ha.arraycopy(n,0,s,0,i);for(var l=i;l<n.length;l++)s[l]=this.field.add(r[l-i],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new en("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,i=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)i[l+u]=this.field.add(i[l+u],this.field.multiply(c,a[u]));return new t(this.field,i)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new en;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new En,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),Q3e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new en;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new fte;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),V3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H3e=function(t){V3e(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,i=0;i<r;i++)a.expTable[i]=s,s=s*n%r;for(var i=0;i<r-1;i++)a.logTable[a.expTable[i]]=i;return a.zero=new qm(a,new Int32Array([0])),a.one=new qm(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new en;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new qm(this,a)},e.PDF417_GF=new e(Kn.NUMBER_OF_CODEWORDS,3),e}(Q3e),$3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K3e=function(){function t(){this.field=H3e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,i=new qm(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=i.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=$3e(n),A=h.next();!A.done;A=h.next()){var m=A.value,p=this.field.exp(e.length-1-m),g=new qm(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(g)}}catch(E){a={error:E}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}for(var x=new qm(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw vi.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,i=r,l=this.field.getZero(),c=this.field.getOne();i.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=i,l=c,s.isZero())throw vi.getChecksumInstance();i=u;for(var f=this.field.getZero(),h=s.getCoefficient(s.getDegree()),A=this.field.inverse(h);i.getDegree()>=s.getDegree()&&!i.isZero();){var m=i.getDegree()-s.getDegree(),p=this.field.multiply(i.getCoefficient(i.getDegree()),A);f=f.add(this.field.buildMonomial(m,p)),i=i.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var g=c.getCoefficient(0);if(g===0)throw vi.getChecksumInstance();var x=this.field.inverse(g),y=c.multiply(x),b=i.multiply(x);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw vi.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),i=1;i<=a;i++)s[a-i]=this.field.multiply(i,r.getCoefficient(i));for(var l=new qm(this.field,s),c=n.length,u=new Int32Array(c),i=0;i<c;i++){var d=this.field.inverse(n[i]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(l.evaluateAt(d));u[i]=this.field.multiply(f,h)}return u},t}(),ZT=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var i=r==null||n==null,l=a==null||s==null;if(i&&l)throw new Kt;i?(r=new Vr(0,a.getY()),n=new Vr(0,s.getY())):l&&(a=new Vr(e.getWidth()-1,r.getY()),s=new Vr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,i=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new Vr(c.getX(),u);n?a=d:i=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var A=new Vr(f.getX(),h);n?s=A:l=A}return new t(this.image,a,s,i,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),G3e=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),U6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(i,l,c,u,d,f){if(i==="%%")return"%";if(r[++n]!==void 0){i=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,A;switch(f){case"s":A=r[n];break;case"c":A=r[n][0];break;case"f":A=parseFloat(r[n]).toFixed(i);break;case"p":A=parseFloat(r[n]).toPrecision(i);break;case"e":A=parseFloat(r[n]).toExponential(i);break;case"x":A=parseInt(r[n]).toString(h||16);break;case"d":A=parseFloat(parseInt(r[n],h||10).toPrecision(i)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(h);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";A.length<m;)A=l!==void 0?A+p:p+A;return A}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),q3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yte=function(){function t(e){this.boundingBox=new ZT(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new U6,a=0;try{for(var s=q3e(this.codewords),i=s.next();!i.done;i=s.next()){var l=i.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],i;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s},xy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,h){var A={getKey:function(){return f},getValue:function(){return h}};A.getValue()>n?(n=A.getValue(),a=[],a.push(A.getKey())):A.getValue()===n&&a.push(A.getKey())};try{for(var i=z3e(this.values.entries()),l=i.next();!l.done;l=i.next()){var c=W3e(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return Kn.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),X3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pV=function(t){X3e(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=Lj(this.getCodewords()),s=a.next();!s.done;s=a.next()){var i=s.value;i!=null&&i.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),i=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,d=1,f=0,h=l;h<c;h++)if(n[h]!=null){var A=n[h],m=A.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=A.getRowNumber();else if(m<0||A.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var g=p>=h,x=1;x<=p&&!g;x++)g=n[h-x]!=null;g?n[h]=null:(u=A.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var i=Lj(this.getCodewords()),l=i.next();!l.done;l=i.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=i;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new xy,i=new xy,l=new xy,c=new xy;try{for(var u=Lj(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,A=f.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:i.setValue(h*3+1);break;case 1:c.setValue(h/3),l.setValue(h%3);break;case 2:s.setValue(h+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||i.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||i.getValue()[0]+l.getValue()[0]<Kn.MIN_ROWS_IN_BARCODE||i.getValue()[0]+l.getValue()[0]>Kn.MAX_ROWS_IN_BARCODE)return null;var m=new G3e(s.getValue()[0],i.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var i=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:i*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(i/3)!==n.getErrorCorrectionLevel()||i%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:i+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(yte),Y3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J3e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Kn.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=this.barcodeColumnCount+1;i>0&&s<this.ADJUST_ROW_NUMBER_SKIP;i--){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,i=1;i<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;i++){var l=this.detectionResultColumns[i].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var i=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=Y3e(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(i,h))return}}catch(A){a={error:A}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new U6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),Z3e=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),e5e=function(){function t(){}return t.initialize=function(){for(var e=0;e<Kn.SYMBOL_TABLE.length;e++)for(var r=Kn.SYMBOL_TABLE[e],n=r&1,a=0;a<Kn.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Kn.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Kn.BARS_IN_MODULE-a-1]=Math.fround(s/Kn.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Yn.sum(e),n=new Int32Array(Kn.BARS_IN_MODULE),a=0,s=0,i=0;i<Kn.MODULES_IN_CODEWORD;i++){var l=r/(2*Kn.MODULES_IN_CODEWORD)+i*r/Kn.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Kn.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Yn.sum(e),n=new Array(Kn.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=XT.MAX_VALUE,i=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<Kn.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,i=Kn.SYMBOL_TABLE[l])}return i},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Kn.SYMBOL_TABLE.length).map(function(e){return new Array(Kn.BARS_IN_MODULE)}),t}(),t5e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),gV=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n5e=function(t){r5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(xc),a5e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new n5e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new D6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),s5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i5e=function(t){s5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(xc),o5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l5e=function(t){o5e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new en("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new i5e;a=Pn.MAX_VALUE}this.buf=Mi.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new D6;this.ensureCapacity(this.count+a),Ha.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Mi.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(a5e),Sa;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Sa||(Sa={}));function bte(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var xC;function Gh(t){if(typeof xC>"u"&&(xC=bte()),xC===null)throw new Error("BigInt is not supported!");return xC(t)}function c5e(){var t=[];t[0]=Gh(1);var e=Gh(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var u5e=function(){function t(){}return t.decode=function(e,r){var n=new En(""),a=Ri.ISO8859_1;n.enableDecoding(a);for(var s=1,i=e[s++],l=new t5e;s<e[0];){switch(i){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(i,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Ri.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Nr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)i=e[s++];else throw Nr.getFormatInstance()}if(n.length()===0)throw Nr.getFormatInstance();var c=new b4(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Nr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Pn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var i=new En;r=t.textCompaction(e,r,i),n.setFileId(i.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new En;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new En;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new En;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new En;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Pn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new En;r=t.numericCompaction(e,r+1,h),n.setTimestamp(gV.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var A=new En;r=t.numericCompaction(e,r+1,A),n.setChecksum(Pn.parseInt(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new En;r=t.numericCompaction(e,r+1,m),n.setFileSize(gV.parseLong(m.toString()));break;default:throw Nr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Nr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(Mi.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),i=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[i]=c/30,a[i+1]=c%30,i+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[i++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[i]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[i]=c,i++;break}}return t.decodeTextCompaction(a,s,i,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Sa.ALPHA,i=Sa.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Sa.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Sa.LOWER;break;case t.ML:s=Sa.MIXED;break;case t.PS:i=s,s=Sa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break;case Sa.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:i=s,s=Sa.ALPHA_SHIFT;break;case t.ML:s=Sa.MIXED;break;case t.PS:i=s,s=Sa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break;case Sa.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Sa.PUNCT;break;case 26:u=" ";break;case t.LL:s=Sa.LOWER;break;case t.AL:s=Sa.ALPHA;break;case t.PS:i=s,s=Sa.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break;case Sa.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Sa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break;case Sa.ALPHA_SHIFT:if(s=i,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break;case Sa.PUNCT_SHIFT:if(s=i,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Sa.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Sa.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var i=new l5e,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(Gh(c)>>Gh(8*(5-h))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var A=0;A<l;A++)i.write(d[A]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var h=0;h<6;++h)i.write(Number(Gh(c)>>Gh(8*(5-h))));c=0,l=0}}break}return s.append(Qu.decode(i.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,i=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)i[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(i,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Gh(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*Gh(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Nr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=bte()?c5e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),V1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d5e=function(){function t(){}return t.decode=function(e,r,n,a,s,i,l){for(var c=new ZT(e,r,n,a,s),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,i,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,i,l)),f=t.merge(u,d),f==null)throw Kt.getNotFoundInstance();var A=f.getBoundingBox();if(h&&A!=null&&(A.getMinY()<c.getMinY()||A.getMaxY()>c.getMaxY()))c=A;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,g=1;g<=m;g++){var x=p?g:m-g;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===m?y=new pV(c,x===0):y=new yte(c),f.setDetectionResultColumn(x,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,x,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,i,l);I!=null&&(y.setCodeword(j,I),w=b,i=Math.min(i,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=ZT.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new J3e(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),i=0;try{for(var l=V1(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(i+=s-u,u>0)break}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;i>0&&d[f]==null;f++)i--;for(var h=0,f=a.length-1;f>=0&&(h+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(i,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=V1(e),i=s.next();!i.done;i=s.next()){var l=i.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,i){for(var l=new pV(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,i);h!=null&&(l.setCodeword(f,h),a?d=h.getStartX():d=h.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>Kn.MAX_CODEWORDS_IN_BARCODE)throw Kt.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],i=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(i.push(d),s.push(u))}for(var f=new Array(s.length),h=0;h<f.length;h++)f[h]=s[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Kn.toIntArray(n),Kn.toIntArray(i),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var i=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<i.length;c++)r[a[c]]=s[c][i[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof vi;if(!u)throw d}if(i.length===0)throw vi.getChecksumInstance();for(var c=0;c<i.length;c++)if(i[c]<s[c].length-1){i[c]++;break}else if(i[c]=0,c===i.length-1)throw vi.getChecksumInstance()}throw vi.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,i=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<i.length;l++)for(var c=0;c<i[l].length;c++)i[l][c]=new xy;var u=0;try{for(var d=V1(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var A=(a=void 0,V1(h.getCodewords())),m=A.next();!m.done;m=A.next()){var p=m.value;if(p!=null){var g=p.getRowNumber();if(g>=0){if(g>=i.length)continue;i[g][u].setValue(p.getValue())}}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}u++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return i},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,i,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,V1(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX())}}catch(A){s={error:A}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,i,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,i);var u=t.getModuleBitCount(e,r,n,a,s,i);if(u==null)return null;var d,f=Yn.sum(u);if(a)d=s+f;else{for(var h=0;h<u.length/2;h++){var A=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=A}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=e5e.getDecodedValue(u),p=Kn.getCodeword(m);return p===-1?null:new Z3e(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,i){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,i)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,i){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,i);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Nr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var i=u5e.decode(e,""+r);return i.setErrorsCorrected(s),i.setErasures(n.length),i},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw vi.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Nr.getFormatInstance();var n=e[0];if(n>e.length)throw Nr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Nr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new U6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new K3e,t}(),f5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw Kt.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Nr||n instanceof vi?Kt.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,i=new Array,l=L3e.detectMultiple(e,r,n);try{for(var c=f5e(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=d5e.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new bl(f.getText(),f.getRawBytes(),void 0,d,Zr.PDF_417);h.putMetadata($o.ERROR_CORRECTION_LEVEL,f.getECLevel());var A=f.getOther();A!=null&&h.putMetadata($o.PDF417_EXTRA_METADATA,A),i.push(h)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return i.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Pn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Kn.MODULES_IN_CODEWORD/Kn.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),A5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xV=function(t){A5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(xc),vV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wte=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get($a.TRY_HARDER)!==void 0,n=e==null?null:e.get($a.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(i){return i===Zr.UPC_A||i===Zr.UPC_E||i===Zr.EAN_13||i===Zr.EAN_8||i===Zr.CODABAR||i===Zr.CODE_39||i===Zr.CODE_93||i===Zr.CODE_128||i===Zr.ITF||i===Zr.RSS_14||i===Zr.RSS_EXPANDED});s&&!r&&a.push(new bx(e)),n.includes(Zr.QR_CODE)&&a.push(new aS),n.includes(Zr.DATA_MATRIX)&&a.push(new nS),n.includes(Zr.AZTEC)&&a.push(new tS),n.includes(Zr.PDF_417)&&a.push(new sS),s&&r&&a.push(new bx(e))}a.length===0&&(r||a.push(new bx(e)),a.push(new aS),a.push(new nS),a.push(new tS),a.push(new sS),r&&a.push(new bx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=vV(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new xV("No readers where selected, nothing can be read.");try{for(var a=vV(this.readers),s=a.next();!s.done;s=a.next()){var i=s.value;try{return i.decode(e,this.hints)}catch(l){if(l instanceof xV)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new Kt("No MultiFormat Readers were able to detect the code.")},t}(),h5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){h5e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new wte;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Mv);var m5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){m5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new sS,r)||this}return e})(Mv);var p5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){p5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new aS,r)||this}return e})(Mv);var ek;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(ek||(ek={}));const vC=ek;var Nte=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new B0(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var i=n.multiply(new B0(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(i),n=i}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new en("No error correction bytes");var n=e.length-r;if(n<=0)throw new en("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);Ha.arraycopy(e,0,s,0,n);var i=new B0(this.field,s);i=i.multiplyByMonomial(r,1);for(var l=i.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;Ha.arraycopy(c,0,e,n+u,c.length)},t}(),vy=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s-1;i++)for(var l=n[i],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[i+1][c]&&u===n[i+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=0;l<a;l++){var c=n[i];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,i+6<s&&n[i][l]===1&&n[i+1][l]===0&&n[i+2][l]===1&&n[i+3][l]===1&&n[i+4][l]===1&&n[i+5][l]===0&&n[i+6][l]===1&&(t.isWhiteVertical(n,l,i-4,i)||t.isWhiteVertical(n,l,i+7,i+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),i=0;i<s;i++)for(var l=n[i],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new en("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),i=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?i[l][d]:i[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),g5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x5e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=g5e(this.bytes),s=a.next();!s.done;s=a.next()){var i=s.value;Mi.fill(i,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],i=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==i[l])return!1;return!0},t.prototype.toString=function(){for(var e=new En,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,i=this.width;s<i;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),tk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new En;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),v5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),za=function(t){v5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(xc),yV=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Ao;t.makeTypeInfoBits(e,r,a);for(var s=0,i=a.getSize();s<i;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,h=8;n.setBoolean(f,h,l)}else{var f=8,h=n.getHeight()-7+(s-8);n.setBoolean(f,h,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Ao;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var i=0;i<3;++i){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+i,l),r.setBoolean(r.getHeight()-11+i,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,i=n.getWidth()-1,l=n.getHeight()-1;i>0;){for(i===6&&(i-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=i-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&vy.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,i-=2}if(a!==e.getSize())throw new za("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Pn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new en("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!tk.isValidMaskPattern(r))throw new za("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var i=new Ao;if(i.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(i),n.getSize()!==15)throw new za("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new za("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new za;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new za;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new za;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],i=0;i<5;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],i=0;i<7;++i)n.setNumber(e+i,r+a,s[i])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,i=a.length;s!==i;s++){var l=a[s];if(l>=0)for(var c=0;c!==i;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),y5e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),bV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return vy.applyMaskPenaltyRule1(e)+vy.applyMaskPenaltyRule2(e)+vy.applyMaskPenaltyRule3(e)+vy.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(vC.CHARACTER_SET)!==void 0;s&&(a=n.get(vC.CHARACTER_SET).toString());var i=this.chooseMode(e,a),l=new Ao;if(i===Xa.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=Ri.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(i,l);var u=new Ao;this.appendBytes(e,i,u,a);var d;if(n!==null&&n.get(vC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(vC.QR_VERSION).toString(),10);d=op.getVersionForNumber(f);var h=this.calculateBitsNeeded(i,l,u,d);if(!this.willFit(h,d,r))throw new za("Data too big for requested version")}else d=this.recommendVersion(r,i,l,u);var A=new Ao;A.appendBitArray(l);var m=i===Xa.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,i,A),A.appendBitArray(u);var p=d.getECBlocksForLevel(r),g=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(g,A);var x=this.interleaveWithECBytes(A,d.getTotalCodewords(),g,p.getNumBlocks()),y=new tk;y.setECLevel(r),y.setMode(i),y.setVersion(d);var b=d.getDimensionForVersion(),w=new x5e(b,b),j=this.chooseMaskPattern(x,r,d,w);return y.setMaskPattern(j),yV.buildMatrix(x,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,op.getVersionForNumber(1)),i=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,i);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Ri.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Xa.KANJI;for(var n=!1,a=!1,s=0,i=e.length;s<i;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Xa.BYTE}return a?Xa.ALPHANUMERIC:n?Xa.NUMERIC:Xa.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Qu.encode(e,Ri.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,i=-1,l=0;l<tk.NUM_MASK_PATTERNS;l++){yV.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,i=l)}return i},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=op.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new za("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),i=s.getTotalECCodewords(),l=a-i,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new za("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var i=e-r.getSizeInBytes(),a=0;a<i;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new za("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,i){if(a>=n)throw new za("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,A=u-f,m=d-h;if(A!==m)throw new za("EC bytes mismatch");if(n!==c+l)throw new za("RS blocks mismatch");if(e!==(f+A)*c+(h+m)*l)throw new za("Total bytes mismatch");a<c?(s[0]=f,i[0]=A):(s[0]=h,i[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,i,l,c;if(e.getSizeInBytes()!==n)throw new za("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,A=0;A<a;++A){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,A,m,p);var g=m[0],x=new Uint8Array(g);e.toBytes(8*u,x,0,g);var y=t.generateECBytes(x,p[0]);h.push(new y5e(x,y)),d=Math.max(d,g),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new za("Data bytes does not match offset");for(var b=new Ao,A=0;A<d;++A)try{for(var w=(s=void 0,bV(h)),j=w.next();!j.done;j=w.next()){var I=j.value,x=I.getDataBytes();A<x.length&&b.appendBits(x[A],8)}}catch(O){s={error:O}}finally{try{j&&!j.done&&(i=w.return)&&i.call(w)}finally{if(s)throw s.error}}for(var A=0;A<f;++A)try{for(var _=(l=void 0,bV(h)),E=_.next();!E.done;E=_.next()){var I=E.value,y=I.getErrorCorrectionBytes();A<y.length&&b.appendBits(y[A],8)}}catch(O){l={error:O}}finally{try{E&&!E.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new za("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new Nte(ic.QR_CODE_FIELD_256).encode(a,r);for(var i=new Uint8Array(r),s=0;s<r;s++)i[s]=a[n+s];return i},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new za(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Xa.NUMERIC:t.appendNumericBytes(e,n);break;case Xa.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Xa.BYTE:t.append8BitBytes(e,n,a);break;case Xa.KANJI:t.appendKanjiBytes(e,n);break;default:throw new za("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var i=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+i*10+l,10),a+=3}else if(a+1<n){var i=t.getDigit(e.charAt(a+1));r.appendBits(s*10+i,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new za;if(a+1<n){var i=t.getAlphanumericCode(e.charCodeAt(a+1));if(i===-1)throw new za;r.appendBits(s*45+i,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=Qu.encode(e,n)}catch(c){throw new za(c)}for(var s=0,i=a.length;s!==i;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Qu.encode(e,Ri.SJIS)}catch(f){throw new za(f)}for(var a=n.length,s=0;s<a;s+=2){var i=n[s]&255,l=n[s+1]&255,c=i<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new za("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Xa.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ri.UTF8.getName(),t})();var b5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){b5e(e,t);function e(r,n,a,s,i,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=i,s+l>n||i+c>a)throw new en("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ha.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ha.arraycopy(this.yuvData,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ha.arraycopy(this.yuvData,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,i=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[i+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}i+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,i=this.top*this.dataWidth+this.left;s<n;s++,i+=this.dataWidth)for(var l=i+r/2,c=i,u=i+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new y4(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(aw);var w5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){w5e(e,t);function e(r,n,a,s,i,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=i,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),h=0;h<d;h++){var A=r[h],m=A>>16&255,p=A>>7&510,g=A&255;f[h]=(m+p+g)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),i===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new en("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return Ha.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),i=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Ha.arraycopy(this.luminances,i,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;Ha.arraycopy(this.luminances,i,s,c,r),i+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new y4(this)},e})(aw);var N5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C5e=function(t){N5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Ri),_5e=function(){function t(){}return t.ISO_8859_1=Ri.ISO8859_1,t}(),rk,E5e=301,S5e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=E5e);return{LOG:t,ALOG:e}};rk=S5e([],[]),rk.LOG;rk.ALOG;var wV;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(wV||(wV={}));var NV=129,Cte=230,I5e=231,j5e=235,B5e=236,P5e=237,T5e=238,k5e=239,F5e=240,Uj=254,O5e=254,CV="[)>05",_V="[)>06",EV="",pa=0,Po=1,Pl=2,ji=3,io=4,ol=5,D5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return pa},t.prototype.encode=function(e){var r=yd.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=yd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case ol:e.writeCodeword(I5e),e.signalEncoderChange(ol);return;case Po:e.writeCodeword(Cte),e.signalEncoderChange(Po);return;case ji:e.writeCodeword(T5e),e.signalEncoderChange(ji);break;case Pl:e.writeCodeword(k5e),e.signalEncoderChange(Pl);break;case io:e.writeCodeword(F5e),e.signalEncoderChange(io);break;default:throw new Error("Illegal mode: "+a)}else yd.isExtendedASCII(n)?(e.writeCodeword(j5e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(yd.isDigit(e)&&yd.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),R5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return ol},t.prototype.encode=function(e){var r=new En;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=yd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(pa);break}}var s=r.length()-1,i=1,l=e.getCodewordCount()+s+i;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,Hn.getCharAt(s));else if(s<=1555)r.setCharAt(0,Hn.getCharAt(Math.floor(s/250)+249)),r.insert(1,Hn.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),Q6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Po},t.prototype.encodeMaximal=function(e){for(var r=new En,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,n=this.encodeChar(i,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(Cte),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new En;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,i=e.getCodewordCount()+s;e.updateSymbolInfo(i);var l=e.getSymbolInfo().getDataCapacity()-i;if(!e.hasMoreCharacters()){var c=new En;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=yd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(pa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),i=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(i),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var i=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Uj)}else if(i===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(Uj),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(i>0||e.hasMoreCharacters())&&e.writeCodeword(Uj)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(pa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new En;return s.append(n),s.append(a),s.toString()},t}(),M5e=function(){function t(){}return t.prototype.getEncodingMode=function(){return io},t.prototype.encode=function(e){for(var r=new En;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var i=yd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(pa);break}}}r.append(Hn.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var i=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&i<=2;if(i<=2){e.updateSymbolInfo(e.getCodewordCount()+i);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=i):e.writeCodewords(l)}finally{e.signalEncoderChange(pa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Hn.getCharAt(e-64)):yd.illegalCharacter(Hn.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,i=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+i,c=l>>16&255,u=l>>8&255,d=l&255,f=new En;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),L5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(){function t(e,r,n,a,s,i,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=i,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var i,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=U5e(V5e),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){i={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(i)throw i.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),Q5e=function(t){L5e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(ia),V5e=[new ia(!1,3,5,8,8,1),new ia(!1,5,7,10,10,1),new ia(!0,5,7,16,6,1),new ia(!1,8,10,12,12,1),new ia(!0,10,11,14,6,2),new ia(!1,12,12,14,14,1),new ia(!0,16,14,24,10,1),new ia(!1,18,14,16,16,1),new ia(!1,22,18,18,18,1),new ia(!0,22,18,16,10,2),new ia(!1,30,20,20,20,1),new ia(!0,32,24,16,14,2),new ia(!1,36,24,22,22,1),new ia(!1,44,28,24,24,1),new ia(!0,49,28,22,14,2),new ia(!1,62,36,14,14,4),new ia(!1,86,42,16,16,4),new ia(!1,114,48,18,18,4),new ia(!1,144,56,20,20,4),new ia(!1,174,68,22,22,4),new ia(!1,204,84,24,24,4,102,42),new ia(!1,280,112,14,14,16,140,56),new ia(!1,368,144,16,16,16,92,36),new ia(!1,456,192,18,18,16,114,48),new ia(!1,576,224,20,20,16,144,56),new ia(!1,696,272,22,22,16,174,68),new ia(!1,816,336,24,24,16,136,56),new ia(!1,1050,408,18,18,36,175,68),new ia(!1,1304,496,20,20,36,163,62),new Q5e],H5e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new En,a=0,s=r.length;a<s;a++){var i=String.fromCharCode(r[a]&255);if(i==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(i)}this.msg=n.toString(),this.shape=0,this.codewords=new En,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ia.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),$5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K5e=function(t){$5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ji},e.prototype.encode=function(r){for(var n=new En;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var i=yd.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){r.signalEncoderChange(pa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):yd.illegalCharacter(Hn.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(O5e),r.getNewEncoding()<0&&r.signalEncoderChange(pa)},e}(Q6),G5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q5e=function(t){G5e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pl},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(Q6),yd=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=NV+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var i=new Q6,l=[new D5e,i,new q5e,new K5e,new M5e,new R5e],c=new H5e(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(CV)&&e.endsWith(EV)?(c.writeCodeword(B5e),c.setSkipAtEnd(2),c.pos+=CV.length):e.startsWith(_V)&&e.endsWith(EV)&&(c.writeCodeword(P5e),c.setSkipAtEnd(2),c.pos+=_V.length);var u=pa;for(s&&(i.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==pa&&u!==ol&&u!==io&&c.writeCodeword("");var h=c.getCodewords();for(h.length()<f&&h.append(NV);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===ji&&a===ji){for(var s=Math.min(r+3,e.length),i=r;i<s;i++)if(!this.isNativeX12(e.charCodeAt(i)))return pa}else if(n===io&&a===io){for(var s=Math.min(r+4,e.length),i=r;i<s;i++)if(!this.isNativeEDIFACT(e.charCodeAt(i)))return pa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===pa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,i=new Uint8Array(6),l=[];;){if(r+s===e.length){Mi.fill(i,0),Mi.fill(l,0);var c=this.findMinimums(a,l,Pn.MAX_VALUE,i),u=this.getMinimumCount(i);if(l[pa]===c)return pa;if(u===1){if(i[ol]>0)return ol;if(i[io]>0)return io;if(i[Pl]>0)return Pl;if(i[ji]>0)return ji}return Po}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[pa]+=.5:this.isExtendedASCII(d)?(a[pa]=Math.ceil(a[pa]),a[pa]+=2):(a[pa]=Math.ceil(a[pa]),a[pa]++),this.isNativeC40(d)?a[Po]+=2/3:this.isExtendedASCII(d)?a[Po]+=8/3:a[Po]+=4/3,this.isNativeText(d)?a[Pl]+=2/3:this.isExtendedASCII(d)?a[Pl]+=8/3:a[Pl]+=4/3,this.isNativeX12(d)?a[ji]+=2/3:this.isExtendedASCII(d)?a[ji]+=13/3:a[ji]+=10/3,this.isNativeEDIFACT(d)?a[io]+=3/4:this.isExtendedASCII(d)?a[io]+=17/4:a[io]+=13/4,this.isSpecialB256(d)?a[ol]+=4:a[ol]++,s>=4){if(Mi.fill(i,0),Mi.fill(l,0),this.findMinimums(a,l,Pn.MAX_VALUE,i),l[pa]<this.min(l[ol],l[Po],l[Pl],l[ji],l[io]))return pa;if(l[ol]<l[pa]||l[ol]+1<this.min(l[Po],l[Pl],l[ji],l[io]))return ol;if(l[io]+1<this.min(l[ol],l[Po],l[Pl],l[ji],l[pa]))return io;if(l[Pl]+1<this.min(l[ol],l[Po],l[io],l[ji],l[pa]))return Pl;if(l[ji]+1<this.min(l[ol],l[Po],l[io],l[Pl],l[pa]))return ji;if(l[Po]+1<this.min(l[pa],l[ol],l[io],l[Pl])){if(l[Po]<l[ji])return Po;if(l[Po]===l[ji]){for(var f=r+s+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return ji;if(!this.isNativeX12(h))break;f++}return Po}}}}},t.min=function(e,r,n,a,s){var i=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?i:Math.min(i,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var i=r[s]=Math.ceil(e[s]);n>i&&(n=i,Mi.fill(a,0)),n===i&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Pn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),Qj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SV=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Qu.encode(e,this.charset)!=null}catch{return!1}},t}(),z5e=function(){function t(e,r,n){var a,s,i,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new SV(C5e.forName(S))}),this.encoders=[];var d=[];d.push(new SV(_5e.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var A=!1;try{for(var m=(a=void 0,Qj(d)),p=m.next();!p.done;p=m.next()){var g=p.value,x=e.charAt(h),y=x.charCodeAt(0);if(y===n||g.canEncode(x)){A=!0;break}}}catch(S){a={error:S}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!A)try{for(var b=(i=void 0,Qj(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var g=w.value;if(g.canEncode(e.charAt(h))){d.push(g),A=!0;break}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(i)throw i.error}}A||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=Qj(d),_=I.next();!_.done;_=I.next()){var g=_.value;this.encoders[j++]=g}}catch(S){c={error:S}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var E=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Qu.encode(Hn.getCharAt(e),this.encoders[r].name)},t}(),W5e=3,X5e=function(){function t(e,r,n){this.fnc1=n;var a=new z5e(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var i=e.charAt(s).charCodeAt(0);this.bytes[s]=i===n?1e3:i}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new En,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,i){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===i||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===i||r.canEncode(l,d))&&this.addEdge(n,a+1,new IV(l,r,d,s,i))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new IV[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var i=1;i<=a;i++){for(var l=0;l<r.length();l++)s[i][l]!=null&&i<a&&this.addEdges(e,r,s,i,s[i][l],n);for(var l=0;l<r.length();l++)s[i-1][l]=null}for(var c=-1,u=Pn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=s[a][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var A=r.encode(h.c,h.encoderIndex),i=A.length-1;i>=0;i--)f.unshift(A[i]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var p=[],i=0;i<p.length;i++)p[i]=f[i];return p},t}(),IV=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var i=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(i+=W5e),a!=null&&(i+=a.cachedTotalSize),this.cachedTotalSize=i}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),Y5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var jV;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(jV||(jV={}));(function(t){Y5e(e,t);function e(r,n,a,s,i){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=i,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(X5e);var J5e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),BV=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),Z5e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),eje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V6=function(t){eje(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Pn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(Z5e),tje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rje=function(t){tje(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(V6);function nje(t,e,r){return new rje(t,e,r)}function H1(t,e,r){return new V6(t,e,r)}var aje=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],P0=0,iS=1,Du=2,_te=3,xf=4,sje=new V6(null,0,0),Vj=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ije=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function oje(t){var e,r;try{for(var n=ije(t),a=n.next();!a.done;a=n.next()){var s=a.value;Mi.fill(s,-1)}}catch(i){e={error:i}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[P0][xf]=0,t[iS][xf]=0,t[iS][P0]=28,t[_te][xf]=0,t[Du][xf]=0,t[Du][P0]=15,t}var Ete=oje(Mi.createInt32Array(6,6)),lje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cje=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=Vj[this.mode][e];a=H1(a,s&65535,s>>16),n+=s>>16}var i=e===Du?4:5;return a=H1(a,r,i),new t(a,e,0,n+i)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Du?4:5;return n=H1(n,Ete[this.mode][e],a),n=H1(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===xf||this.mode===Du){var s=Vj[n][P0];r=H1(r,s&65535,s>>16),a+=s>>16,n=P0}var i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+i);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=nje(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Vj[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var i=new Ao;try{for(var l=lje(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(i,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t.prototype.toString=function(){return Hn.format("%s bits=%d bytes=%d",aje[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(sje,P0,0,0),t}();function uje(t){var e=Hn.getCharCode(" "),r=Hn.getCharCode("."),n=Hn.getCharCode(",");t[P0][e]=1;for(var a=Hn.getCharCode("Z"),s=Hn.getCharCode("A"),i=s;i<=a;i++)t[P0][i]=i-s+2;t[iS][e]=1;for(var l=Hn.getCharCode("z"),c=Hn.getCharCode("a"),i=c;i<=l;i++)t[iS][i]=i-c+2;t[Du][e]=1;for(var u=Hn.getCharCode("9"),d=Hn.getCharCode("0"),i=d;i<=u;i++)t[Du][i]=i-d+2;t[Du][n]=12,t[Du][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[_te][Hn.getCharCode(f[h])]=h;for(var A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<A.length;h++)Hn.getCharCode(A[h])>0&&(t[xf][Hn.getCharCode(A[h])]=h);return t}var Hj=uje(Mi.createInt32Array(5,256)),yC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dje=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Hn.getCharCode(" "),r=Hn.getCharCode(`
`),n=BV.singletonList(cje.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,i=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Hn.getCharCode("\r"):s=i===r?2:0;break;case Hn.getCharCode("."):s=i===e?3:0;break;case Hn.getCharCode(","):s=i===e?4:0;break;case Hn.getCharCode(":"):s=i===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=BV.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var i=yC(e),l=i.next();!l.done;l=i.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=Hj[e.getMode()][a]>0,i=null,l=0;l<=xf;l++){var c=Hj[l][a];if(c>0){if(i==null&&(i=e.endBinaryShift(r)),!s||l===e.getMode()||l===Du){var u=i.latchAndAppend(l,c);n.push(u)}if(!s&&Ete[e.getMode()][l]>=0){var d=i.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||Hj[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,i=[];try{for(var l=yC(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,i)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(i)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(xf,n)),e.getMode()!==xf&&a.push(s.shiftAndAppend(xf,n)),n===3||n===4){var i=s.latchAndAppend(Du,16-n).latchAndAppend(Du,1);a.push(i)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,i=[];try{for(var l=yC(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(g){if(g.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(g)&&(i=i.filter(function(x){return x!==g}))};try{for(var h=(a=void 0,yC(i)),A=h.next();!A.done;A=h.next()){var m=A.value,p=f(m);if(p==="break")break}}catch(g){a={error:g}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}d&&i.push(u)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i},t}(),fje=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new dje(e).encode(),s=Pn.truncDivision(a.getSize()*r,100)+11,i=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new en(Hn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var h=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>h)throw new en("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new en("Data to large for user specified layer")}else{d=0,f=null;for(var A=0;;A++){if(A>t.MAX_NB_BITS)throw new en("Data too large for an Aztec code");if(l=A<=3,c=l?A+1:A,u=t.totalBitsInLayer(c,l),!(i>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var h=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=h)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,g=t.generateModeMessage(l,c,p),x=(l?11:14)+c*4,y=new Int32Array(x),b;if(l){b=x;for(var A=0;A<y.length;A++)y[A]=A}else{b=x+1+2*Pn.truncDivision(Pn.truncDivision(x,2)-1,15);for(var w=Pn.truncDivision(x,2),j=Pn.truncDivision(b,2),A=0;A<w;A++){var I=A+Pn.truncDivision(A,15);y[w-A-1]=j-I-1,y[w+A]=j+I+1}}for(var _=new Sf(b),A=0,E=0;A<c;A++){for(var S=(c-A)*4+(l?9:12),O=0;O<S;O++)for(var P=O*2,T=0;T<2;T++)m.get(E+P+T)&&_.set(y[A*2+T],y[A*2+O]),m.get(E+S*2+P+T)&&_.set(y[A*2+O],y[x-1-A*2-T]),m.get(E+S*4+P+T)&&_.set(y[x-1-A*2-T],y[x-1-A*2-O]),m.get(E+S*6+P+T)&&_.set(y[x-1-A*2-O],y[A*2+T]);E+=S*8}if(t.drawModeMessage(_,l,b,g),l)t.drawBullsEye(_,Pn.truncDivision(b,2),5);else{t.drawBullsEye(_,Pn.truncDivision(b,2),7);for(var A=0,O=0;A<Pn.truncDivision(x,2)-1;A+=15,O+=16)for(var T=Pn.truncDivision(b,2)&1;T<b;T+=2)_.set(Pn.truncDivision(b,2)-O,T),_.set(Pn.truncDivision(b,2)+O,T),_.set(T,Pn.truncDivision(b,2)-O),_.set(T,Pn.truncDivision(b,2)+O)}var F=new J5e;return F.setCompact(l),F.setSize(b),F.setLayers(c),F.setCodeWords(p),F.setMatrix(_),F},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Ao;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Pn.truncDivision(n,2);if(r)for(var i=0;i<7;i++){var l=s-3+i;a.get(i)&&e.set(l,s-5),a.get(i+7)&&e.set(s+5,l),a.get(20-i)&&e.set(l,s+5),a.get(27-i)&&e.set(s-5,l)}else for(var i=0;i<10;i++){var l=s-5+i+Pn.truncDivision(i,5);a.get(i)&&e.set(l,s-7),a.get(i+10)&&e.set(s+7,l),a.get(29-i)&&e.set(l,s+7),a.get(39-i)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,i=e.getSize()/n,l=new Nte(t.getGF(n)),c=Pn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-i);var d=r%n,f=new Ao;f.appendBits(0,d);try{for(var h=fje(Array.from(u)),A=h.next();!A.done;A=h.next()){var m=A.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,i;for(s=0,i=e.getSize()/r;s<i;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return ic.AZTEC_PARAM;case 6:return ic.AZTEC_DATA_6;case 8:return ic.AZTEC_DATA_8;case 10:return ic.AZTEC_DATA_10;case 12:return ic.AZTEC_DATA_12;default:throw new en("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Ao,a=e.getSize(),s=(1<<r)-2,i=0;i<a;i+=r){for(var l=0,c=0;c<r;c++)(i+c>=a||e.get(i+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),i--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),i--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var Aje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hje=function(t){Aje(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),i=0,l=0,c=r.length;i<c;i+=4,l++){var u=void 0,d=r[i+3];if(d===0)u=255;else{var f=r[i],h=r[i+1],A=r[i+2];u=306*f+601*h+117*A+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new en("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new y4(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,i=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*i),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*i);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,i/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(aw);function Ste(){return typeof navigator<"u"}function mje(){return Ste()&&!!navigator.mediaDevices}function pje(){return!!(mje()&&navigator.mediaDevices.enumerateDevices)}var Nx=function(){return Nx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Nx.apply(this,arguments)},Ns=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Cs=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$j=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gje={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Lv=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Nx(Nx({},gje),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set($a.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Ns(this,void 0,void 0,function(){return Cs(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=$j(a),i=s.next();!i.done;i=s.next()){var l=i.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ni("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ni("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new hje(e),n=new dte(r);return new ute(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new ni("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Ns(this,void 0,void 0,function(){var e,r,n,a,s,i,l,c,u,d,f,h;return Cs(this,function(A){switch(A.label){case 0:if(!Ste())throw new Error("Can't enumerate devices, navigator is not present.");if(!pje())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=A.sent(),r=[];try{for(n=$j(e),a=n.next();!a.done;a=n.next())s=a.value,i=s.kind==="video"?"videoinput":s.kind,i==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:i,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Ns(this,void 0,void 0,function(){var n;return Cs(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,i){var l=setTimeout(function(){t.isVideoPlaying(e)||(i(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Ns(this,void 0,void 0,function(){var a;return Cs(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",i),n())},a),i=function(){clearTimeout(s),e.removeEventListener("load",i),r()};e.addEventListener("load",i)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new ni("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:if(!e)throw new ni("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:if(!e)throw new ni("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Ns(this,void 0,void 0,function(){var a,s;return Cs(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,i.sent()];case 4:throw s=i.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Ns(this,void 0,void 0,function(){var a,s,i,l,c,u,d,f,h,A=this;return Cs(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),i=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,i),c=e.getVideoTracks(),u=Nx(Nx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,g){return Ns(this,void 0,void 0,function(){var x,y,b,w,j,I,_;return Cs(this,function(E){switch(E.label){case 0:x=g?c.filter(g):c,E.label=1;case 1:E.trys.push([1,6,7,8]),y=$j(x),b=y.next(),E.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:E.sent(),E.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=E.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),h=function(p){return Ns(A,void 0,void 0,function(){return Cs(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return g.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return Ns(A,void 0,void 0,function(){return Cs(this,function(p){switch(p.label){case 0:return l.stop(),[4,h(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Ns(this,void 0,void 0,function(){var a,s;return Cs(this,function(i){switch(i.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Ns(this,void 0,void 0,function(){var n,a;return Cs(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ni("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Ns(this,void 0,void 0,function(){var n,a,s,i;return Cs(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ni("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),i=this.scan(n,r,a),[2,i]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Ns(this,void 0,void 0,function(){var n;return Cs(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Ns(this,void 0,void 0,function(){var n,a,s;return Cs(this,function(i){switch(i.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=i.sent(),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=i.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Ns(this,void 0,void 0,function(){var n,a;return Cs(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Ns(this,void 0,void 0,function(){var r,n;return Cs(this,function(a){switch(a.label){case 0:if(!e)throw new ni("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Ns(this,void 0,void 0,function(){var r,n;return Cs(this,function(a){switch(a.label){case 0:if(!e)throw new ni("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(i,l){s.scan(e,function(c,u,d){if(c){i(c),d.stop();return}if(u){if(u instanceof Kt&&r||u instanceof vi&&n||u instanceof Nr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),i;try{i=s.getContext("2d",{willReadFrequently:!0})}catch{i=s.getContext("2d")}if(!i)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){i=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},h=function(){if(!c)try{t.drawImageOnCanvas(i,e);var A=a.decodeFromCanvas(s);r(A,void 0,f),u=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var m=x instanceof vi,p=x instanceof Nr,g=x instanceof Kt;if(m||p||g){u=setTimeout(h,a.options.delayBetweenScanAttempts);return}l(),n&&n(x)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Ns(this,void 0,void 0,function(){var r;return Cs(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),xje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){xje(e,t);function e(r,n){return t.call(this,new tS,r,n)||this}return e})(Lv);var vje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){vje(e,t);function e(r,n){return t.call(this,new bx(r),r,n)||this}return e})(Lv);var yje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){yje(e,t);function e(r,n){return t.call(this,new nS,r,n)||this}return e})(Lv);var bje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jb=function(t){bje(e,t);function e(r,n){var a=this,s=new wte;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set($a.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Lv),wje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){wje(e,t);function e(r,n){return t.call(this,new sS,r,n)||this}return e})(Lv);var Nje=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){Nje(e,t);function e(r,n){return t.call(this,new aS,r,n)||this}return e})(Lv);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var oS={};oS.version="0.18.5";var Ite=1252,Cje=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],H6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},$6=function(t){Cje.indexOf(t)!=-1&&(Ite=H6[0]=t)};function _je(){$6(1252)}var Cd=function(t){$6(t)};function K6(){Cd(1200),_je()}function PV(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function Eje(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function jte(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var yy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Eje(t.slice(2)):e==254&&r==255?jte(t.slice(2)):e==65279?t.slice(1):t},bC=function(e){return String.fromCharCode(e)},TV=function(e){return String.fromCharCode(e)},Zb,f0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function e2(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=f0.charAt(s)+f0.charAt(i)+f0.charAt(l)+f0.charAt(c);return e}function Xc(t){var e="",r=0,n=0,a=0,s=0,i=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=f0.indexOf(t.charAt(u++)),i=f0.indexOf(t.charAt(u++)),r=s<<2|i>>4,e+=String.fromCharCode(r),l=f0.indexOf(t.charAt(u++)),n=(i&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=f0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var Sn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),eh=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function $0(t){return Sn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function kV(t){return Sn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Mc=function(e){return Sn?eh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function N4(t){if(typeof ArrayBuffer>"u")return Mc(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function nm(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Sje(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function G6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return G6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var fo=Sn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:eh(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Ije(t){for(var e=[],r=0,n=t.length+250,a=$0(t.length+255),s=0;s<t.length;++s){var i=t.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|l>>6&15|(i&3)<<4,a[r++]=128|l&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(e.push(a.slice(0,r)),r=0,a=$0(65535),n=65530)}return e.push(a.slice(0,r)),fo(e)}var Vl=/\u0000/g,by=/[\u0001-\u0006]/g;function Mx(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function _d(t,e){var r=""+t;return r.length>=e?r:Hs("0",e-r.length)+r}function q6(t,e){var r=""+t;return r.length>=e?r:Hs(" ",e-r.length)+r}function lS(t,e){var r=""+t;return r.length>=e?r:r+Hs(" ",e-r.length)}function jje(t,e){var r=""+Math.round(t);return r.length>=e?r:Hs("0",e-r.length)+r}function Bje(t,e){var r=""+t;return r.length>=e?r:Hs("0",e-r.length)+r}var FV=Math.pow(2,32);function Qg(t,e){if(t>FV||t<-FV)return jje(t,e);var r=Math.round(t);return Bje(r,e)}function cS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var OV=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Kj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Pje(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var an={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},DV={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Tje={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function uS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,i=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=i)),!r)return[0,n*l,d];var h=Math.floor(n*l/d);return[h,n*l-h*d,d]}function zm(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,i=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=Mje(c,i))}return l.y=i[0],l.m=i[1],l.d=i[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var Bte=new Date(1899,11,31,0,0,0),kje=Bte.getTime(),Fje=new Date(1900,2,1,0,0,0);function Pte(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=Fje&&(r+=24*60*60*1e3),(r-(kje+(t.getTimezoneOffset()-Bte.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function z6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Oje(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Dje(t){var e=t<0?12:11,r=z6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function Rje(t){var e=z6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function t2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=Dje(t):e===10?r=t.toFixed(10).substr(0,12):r=Rje(t),z6(Oje(r.toUpperCase()))}function Tp(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):t2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Gu(14,Pte(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function Mje(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function Lje(t,e,r,n){var a="",s=0,i=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return Kj[r.m-1][1];case 5:return Kj[r.m-1][0];default:return Kj[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return OV[r.q][0];default:return OV[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?_d(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),e==="s"?s===0?"0":""+s/i:(a=_d(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?_d(c,u):"";return d}function A0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Tte=/%/g;function Uje(t,e,r){var n=e.replace(Tte,""),a=e.length-n.length;return EA(t,n,r*Math.pow(10,2*a))+Hs("%",a)}function Qje(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return EA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function kte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+kte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Fte=/# (\?+)( ?)\/( ?)(\d+)/;function Vje(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),i=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(i===0?Hs(" ",t[1].length+1+t[4].length):q6(i,t[1].length)+t[2]+"/"+t[3]+_d(l,t[4].length))}function Hje(t,e,r){return r+(e===0?"":""+e)+Hs(" ",t[1].length+2+t[4].length)}var Ote=/^#*0*\.([0#]+)/,Dte=/\).*[0#]/,Rte=/\(###\) ###\\?-####/;function Ol(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function RV(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function MV(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $je(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Kje(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function yu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Dte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yu("n",n,r):"("+yu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Qje(t,e,r);if(e.indexOf("%")!==-1)return Uje(t,e,r);if(e.indexOf("E")!==-1)return kte(e,r);if(e.charCodeAt(0)===36)return"$"+yu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Qg(c,e.length);if(e.match(/^[#?]+$/))return a=Qg(r,0),a==="0"&&(a=""),a.length>e.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(Fte))return Vje(s,c,u);if(e.match(/^#+0+$/))return u+Qg(c,e.length-e.indexOf("0"));if(s=e.match(Ote))return a=RV(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Ol(s[1])).replace(/\.$/,"."+Ol(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+Hs("0",Ol(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+RV(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+A0(Qg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yu(t,e,-r):A0(""+(Math.floor(r)+$je(r,s[1].length)))+"."+_d(MV(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return yu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Mx(yu(t,e.replace(/[\\-]/g,""),r)),i=0,Mx(Mx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Rte))return a=yu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=uS(c,Math.pow(10,i)-1,!1),a=""+u,d=EA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=lS(l[2],i),d.length<s[4].length&&(d=Ol(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=uS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?q6(l[1],i)+s[2]+"/"+s[3]+lS(l[2],i):Hs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Qg(r,0),e.length<=a.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return Ol(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return i=MV(r,s[1].length),r<0?"-"+yu(t,e,-r):A0(Kje(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?_d(0,3-m.length):"")+m})+"."+_d(i,s[1].length);switch(e){case"###,##0.00":return yu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var A=A0(Qg(c,0));return A!=="0"?u+A:"";case"###,###.00":return yu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return yu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Gje(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return EA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function qje(t,e,r){var n=e.replace(Tte,""),a=e.length-n.length;return EA(t,n,r*Math.pow(10,2*a))+Hs("%",a)}function Mte(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Mte(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function uf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Dte)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?uf("n",n,r):"("+uf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return Gje(t,e,r);if(e.indexOf("%")!==-1)return qje(t,e,r);if(e.indexOf("E")!==-1)return Mte(e,r);if(e.charCodeAt(0)===36)return"$"+uf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,i,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+_d(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(Fte))return Hje(s,c,u);if(e.match(/^#+0+$/))return u+_d(c,e.length-e.indexOf("0"));if(s=e.match(Ote))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Ol(s[1])).replace(/\.$/,"."+Ol(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+Hs("0",Ol(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+A0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+uf(t,e,-r):A0(""+r)+"."+Hs("0",s[1].length);if(s=e.match(/^#,#*,#0/))return uf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=Mx(uf(t,e.replace(/[\\-]/g,""),r)),i=0,Mx(Mx(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return i<a.length?a.charAt(i++):m==="0"?"0":""}));if(e.match(Rte))return a=uf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),l=uS(c,Math.pow(10,i)-1,!1),a=""+u,d=EA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=lS(l[2],i),d.length<s[4].length&&(d=Ol(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),l=uS(c,Math.pow(10,i)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?q6(l[1],i)+s[2]+"/"+s[3]+lS(l[2],i):Hs(" ",2*i+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:Ol(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=e.indexOf(".")-i,h=e.length-a.length-f;return Ol(e.substr(0,f)+a+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+uf(t,e,-r):A0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?_d(0,3-m.length):"")+m})+"."+_d(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var A=A0(""+c);return A!=="0"?u+A:"";default:if(e.match(/\.[0#?]*$/))return uf(t,e.slice(0,e.lastIndexOf(".")),r)+Ol(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function EA(t,e,r){return(r|0)===r?uf(t,e,r):yu(t,e,r)}function zje(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Lte=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Uv(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":cS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Lte))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Wje(t,e,r,n){for(var a=[],s="",i=0,l="",c="t",u,d,f,h="H";i<t.length;)switch(l=t.charAt(i)){case"G":if(!cS(t,i))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=t.charCodeAt(++i))!==34&&i<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var A=t.charAt(++i),m=A==="("||A===")"?A:"t";a[a.length]={t:m,v:A},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=zm(e,r,t.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(i,2)},c=l,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=zm(e,r),u==null))return"";for(s=l;++i<t.length&&t.charAt(i).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=h),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=zm(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",h="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",i+=5,h="h"):t.substr(i,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",i+=5,h="h"):(p.t="t",++i),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(i++)!=="]"&&i<t.length;)s+=t.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Lte)){if(u==null&&(u=zm(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Uv(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++i<t.length&&(l=t.charAt(i))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++i<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(i))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++i)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)s+=t.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++i;break}var g=0,x=0,y;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",g<1&&(g=1);break;case"s":(y=a[i].v.match(/\.0+$/))&&(x=Math.max(x,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&a[i].v.match(/[Hh]/)&&(g=1),g<2&&a[i].v.match(/[Mm]/)&&(g=2),g<3&&a[i].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=Lje(a[i].t.charCodeAt(0),a[i].v,u,x),a[i].t="t";break;case"n":case"?":for(w=i+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[i].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[i].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[i].v,i=w-1;break;case"G":a[i].t="t",a[i].v=Tp(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=EA("n",b,I)):(I=e<0&&n>1?-e:e,_=EA("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var E=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){E=i;break}var S=a.length;if(E===a.length&&_.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(w>=a[i].v.length-1?(w-=a[i].v.length,a[i].v=_.substr(w+1,a[i].v.length)):w<0?a[i].v="":(a[i].v=_.substr(0,w+1),w=-1),a[i].t="t",S=i);w>=0&&S<a.length&&(a[S].v=_.substr(0,w+1)+a[S].v)}else if(E!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,i=E;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")-1:a[i].v.length-1,j=a[i].v.substr(d+1);d>=0;--d)w>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[i].v=j,a[i].t="t",S=i}for(w>=0&&S<a.length&&(a[S].v=_.substr(0,w+1)+a[S].v),w=_.indexOf(".")+1,i=E;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==E)){for(d=a[i].v.indexOf(".")>-1&&i===E?a[i].v.indexOf(".")+1:0,j=a[i].v.substr(0,d);d<a[i].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[i].v=j,a[i].t="t",S=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&e<0&&i>0&&a[i-1].v==="-"?-e:e,a[i].v=EA(a[i].t,a[i].v,I),a[i].t="t");var O="";for(i=0;i!==a.length;++i)a[i]!=null&&(O+=a[i].v);return O}var LV=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function UV(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Xje(t,e){var r=zje(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(LV),l=r[1].match(LV);return UV(e,i)?[n,r[0]]:UV(e,l)?[n,r[1]]:[n,r[i!=null&&l!=null?2:1]]}return[n,s]}function Gu(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:an)[t],n==null&&(n=r.table&&r.table[DV[t]]||an[DV[t]]),n==null&&(n=Tje[t]||"General");break}if(cS(n,0))return Tp(e,r);e instanceof Date&&(e=Pte(e,r.date1904));var a=Xje(n,e);if(cS(a[1]))return Tp(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Wje(a[1],e,r,a[0])}function SA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(an[r]==null){e<0&&(e=r);continue}if(an[r]==t){e=r;break}}e<0&&(e=391)}return an[e]=t,e}function C4(t){for(var e=0;e!=392;++e)t[e]!==void 0&&SA(t[e],e)}function Qv(){an=Pje()}var Yje={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Ute=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Jje(t){var e=typeof t=="number"?an[t]:t;return e=e.replace(Ute,"(\\d+)"),new RegExp("^"+e+"$")}function Zje(t,e,r){var n=-1,a=-1,s=-1,i=-1,l=-1,c=-1;(e.match(Ute)||[]).forEach(function(f,h){var A=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=A;break;case"d":s=A;break;case"h":i=A;break;case"s":c=A;break;case"m":i>=0?l=A:a=A;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var eBe=function(){var t={};t.version="1.2.0";function e(){for(var _=0,E=new Array(256),S=0;S!=256;++S)_=S,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,E[S]=_;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(_){var E=0,S=0,O=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)P[O]=_[O];for(O=0;O!=256;++O)for(S=_[O],E=256+O;E<4096;E+=256)S=P[E]=S>>>8^_[S&255];var T=[];for(O=1;O!=16;++O)T[O-1]=typeof Int32Array<"u"?P.subarray(O*256,O*256+256):P.slice(O*256,O*256+256);return T}var a=n(r),s=a[0],i=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],A=a[8],m=a[9],p=a[10],g=a[11],x=a[12],y=a[13],b=a[14];function w(_,E){for(var S=E^-1,O=0,P=_.length;O<P;)S=S>>>8^r[(S^_.charCodeAt(O++))&255];return~S}function j(_,E){for(var S=E^-1,O=_.length-15,P=0;P<O;)S=b[_[P++]^S&255]^y[_[P++]^S>>8&255]^x[_[P++]^S>>16&255]^g[_[P++]^S>>>24]^p[_[P++]]^m[_[P++]]^A[_[P++]]^h[_[P++]]^f[_[P++]]^d[_[P++]]^u[_[P++]]^c[_[P++]]^l[_[P++]]^i[_[P++]]^s[_[P++]]^r[_[P++]];for(O+=15;P<O;)S=S>>>8^r[(S^_[P++])&255];return~S}function I(_,E){for(var S=E^-1,O=0,P=_.length,T=0,F=0;O<P;)T=_.charCodeAt(O++),T<128?S=S>>>8^r[(S^T)&255]:T<2048?(S=S>>>8^r[(S^(192|T>>6&31))&255],S=S>>>8^r[(S^(128|T&63))&255]):T>=55296&&T<57344?(T=(T&1023)+64,F=_.charCodeAt(O++)&1023,S=S>>>8^r[(S^(240|T>>8&7))&255],S=S>>>8^r[(S^(128|T>>2&63))&255],S=S>>>8^r[(S^(128|F>>6&15|(T&3)<<4))&255],S=S>>>8^r[(S^(128|F&63))&255]):(S=S>>>8^r[(S^(224|T>>12&15))&255],S=S>>>8^r[(S^(128|T>>6&63))&255],S=S>>>8^r[(S^(128|T&63))&255]);return~S}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),Yr=function(){var e={};e.version="1.2.1";function r(ee,W){for(var re=ee.split("/"),fe=W.split("/"),Ne=0,be=0,Xe=Math.min(re.length,fe.length);Ne<Xe;++Ne){if(be=re[Ne].length-fe[Ne].length)return be;if(re[Ne]!=fe[Ne])return re[Ne]<fe[Ne]?-1:1}return re.length-fe.length}function n(ee){if(ee.charAt(ee.length-1)=="/")return ee.slice(0,-1).indexOf("/")===-1?ee:n(ee.slice(0,-1));var W=ee.lastIndexOf("/");return W===-1?ee:ee.slice(0,W+1)}function a(ee){if(ee.charAt(ee.length-1)=="/")return a(ee.slice(0,-1));var W=ee.lastIndexOf("/");return W===-1?ee:ee.slice(W+1)}function s(ee,W){typeof W=="string"&&(W=new Date(W));var re=W.getHours();re=re<<6|W.getMinutes(),re=re<<5|W.getSeconds()>>>1,ee.write_shift(2,re);var fe=W.getFullYear()-1980;fe=fe<<4|W.getMonth()+1,fe=fe<<5|W.getDate(),ee.write_shift(2,fe)}function i(ee){var W=ee.read_shift(2)&65535,re=ee.read_shift(2)&65535,fe=new Date,Ne=re&31;re>>>=5;var be=re&15;re>>>=4,fe.setMilliseconds(0),fe.setFullYear(re+1980),fe.setMonth(be-1),fe.setDate(Ne);var Xe=W&31;W>>>=5;var it=W&63;return W>>>=6,fe.setHours(W),fe.setMinutes(it),fe.setSeconds(Xe<<1),fe}function l(ee){Uo(ee,0);for(var W={},re=0;ee.l<=ee.length-4;){var fe=ee.read_shift(2),Ne=ee.read_shift(2),be=ee.l+Ne,Xe={};switch(fe){case 21589:re=ee.read_shift(1),re&1&&(Xe.mtime=ee.read_shift(4)),Ne>5&&(re&2&&(Xe.atime=ee.read_shift(4)),re&4&&(Xe.ctime=ee.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3));break}ee.l=be,W[fe]=Xe}return W}var c;function u(){return c||(c={})}function d(ee,W){if(ee[0]==80&&ee[1]==75)return Z(ee,W);if((ee[0]|32)==109&&(ee[1]|32)==105)return ae(ee,W);if(ee.length<512)throw new Error("CFB file size "+ee.length+" < 512");var re=3,fe=512,Ne=0,be=0,Xe=0,it=0,xt=0,_t=[],Et=ee.slice(0,512);Uo(Et,0);var Gt=f(Et);switch(re=Gt[0],re){case 3:fe=512;break;case 4:fe=4096;break;case 0:if(Gt[1]==0)return Z(ee,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+re)}fe!==512&&(Et=ee.slice(0,fe),Uo(Et,28));var nr=ee.slice(0,fe);h(Et,re);var ur=Et.read_shift(4,"i");if(re===3&&ur!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ur);Et.l+=4,Xe=Et.read_shift(4,"i"),Et.l+=4,Et.chk("00100000","Mini Stream Cutoff Size: "),it=Et.read_shift(4,"i"),Ne=Et.read_shift(4,"i"),xt=Et.read_shift(4,"i"),be=Et.read_shift(4,"i");for(var rr=-1,cr=0;cr<109&&(rr=Et.read_shift(4,"i"),!(rr<0));++cr)_t[cr]=rr;var Ir=A(ee,fe);g(xt,be,Ir,fe,_t);var dn=y(Ir,Xe,_t,fe);dn[Xe].name="!Directory",Ne>0&&it!==F&&(dn[it].name="!MiniFAT"),dn[_t[0]].name="!FAT",dn.fat_addrs=_t,dn.ssz=fe;var qr={},ln=[],qs=[],rt=[];b(Xe,dn,Ir,ln,Ne,qr,qs,it),m(qs,rt,ln),ln.shift();var Mt={FileIndex:qs,FullPaths:rt};return W&&W.raw&&(Mt.raw={header:nr,sectors:Ir}),Mt}function f(ee){if(ee[ee.l]==80&&ee[ee.l+1]==75)return[0,0];ee.chk(J,"Header Signature: "),ee.l+=16;var W=ee.read_shift(2,"u");return[ee.read_shift(2,"u"),W]}function h(ee,W){var re=9;switch(ee.l+=2,re=ee.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+re);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+re)}ee.chk("0600","Mini Sector Shift: "),ee.chk("000000000000","Reserved: ")}function A(ee,W){for(var re=Math.ceil(ee.length/W)-1,fe=[],Ne=1;Ne<re;++Ne)fe[Ne-1]=ee.slice(Ne*W,(Ne+1)*W);return fe[re-1]=ee.slice(re*W),fe}function m(ee,W,re){for(var fe=0,Ne=0,be=0,Xe=0,it=0,xt=re.length,_t=[],Et=[];fe<xt;++fe)_t[fe]=Et[fe]=fe,W[fe]=re[fe];for(;it<Et.length;++it)fe=Et[it],Ne=ee[fe].L,be=ee[fe].R,Xe=ee[fe].C,_t[fe]===fe&&(Ne!==-1&&_t[Ne]!==Ne&&(_t[fe]=_t[Ne]),be!==-1&&_t[be]!==be&&(_t[fe]=_t[be])),Xe!==-1&&(_t[Xe]=fe),Ne!==-1&&fe!=_t[fe]&&(_t[Ne]=_t[fe],Et.lastIndexOf(Ne)<it&&Et.push(Ne)),be!==-1&&fe!=_t[fe]&&(_t[be]=_t[fe],Et.lastIndexOf(be)<it&&Et.push(be));for(fe=1;fe<xt;++fe)_t[fe]===fe&&(be!==-1&&_t[be]!==be?_t[fe]=_t[be]:Ne!==-1&&_t[Ne]!==Ne&&(_t[fe]=_t[Ne]));for(fe=1;fe<xt;++fe)if(ee[fe].type!==0){if(it=fe,it!=_t[it])do it=_t[it],W[fe]=W[it]+"/"+W[fe];while(it!==0&&_t[it]!==-1&&it!=_t[it]);_t[fe]=-1}for(W[0]+="/",fe=1;fe<xt;++fe)ee[fe].type!==2&&(W[fe]+="/")}function p(ee,W,re){for(var fe=ee.start,Ne=ee.size,be=[],Xe=fe;re&&Ne>0&&Xe>=0;)be.push(W.slice(Xe*T,Xe*T+T)),Ne-=T,Xe=Um(re,Xe*4);return be.length===0?zt(0):fo(be).slice(0,ee.size)}function g(ee,W,re,fe,Ne){var be=F;if(ee===F){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(ee!==-1){var Xe=re[ee],it=(fe>>>2)-1;if(!Xe)return;for(var xt=0;xt<it&&(be=Um(Xe,xt*4))!==F;++xt)Ne.push(be);g(Um(Xe,fe-4),W-1,re,fe,Ne)}}function x(ee,W,re,fe,Ne){var be=[],Xe=[];Ne||(Ne=[]);var it=fe-1,xt=0,_t=0;for(xt=W;xt>=0;){Ne[xt]=!0,be[be.length]=xt,Xe.push(ee[xt]);var Et=re[Math.floor(xt*4/fe)];if(_t=xt*4&it,fe<4+_t)throw new Error("FAT boundary crossed: "+xt+" 4 "+fe);if(!ee[Et])break;xt=Um(ee[Et],_t)}return{nodes:be,data:JV([Xe])}}function y(ee,W,re,fe){var Ne=ee.length,be=[],Xe=[],it=[],xt=[],_t=fe-1,Et=0,Gt=0,nr=0,ur=0;for(Et=0;Et<Ne;++Et)if(it=[],nr=Et+W,nr>=Ne&&(nr-=Ne),!Xe[nr]){xt=[];var rr=[];for(Gt=nr;Gt>=0;){rr[Gt]=!0,Xe[Gt]=!0,it[it.length]=Gt,xt.push(ee[Gt]);var cr=re[Math.floor(Gt*4/fe)];if(ur=Gt*4&_t,fe<4+ur)throw new Error("FAT boundary crossed: "+Gt+" 4 "+fe);if(!ee[cr]||(Gt=Um(ee[cr],ur),rr[Gt]))break}be[nr]={nodes:it,data:JV([xt])}}return be}function b(ee,W,re,fe,Ne,be,Xe,it){for(var xt=0,_t=fe.length?2:0,Et=W[ee].data,Gt=0,nr=0,ur;Gt<Et.length;Gt+=128){var rr=Et.slice(Gt,Gt+128);Uo(rr,64),nr=rr.read_shift(2),ur=tD(rr,0,nr-_t),fe.push(ur);var cr={name:ur,type:rr.read_shift(1),color:rr.read_shift(1),L:rr.read_shift(4,"i"),R:rr.read_shift(4,"i"),C:rr.read_shift(4,"i"),clsid:rr.read_shift(16),state:rr.read_shift(4,"i"),start:0,size:0},Ir=rr.read_shift(2)+rr.read_shift(2)+rr.read_shift(2)+rr.read_shift(2);Ir!==0&&(cr.ct=w(rr,rr.l-8));var dn=rr.read_shift(2)+rr.read_shift(2)+rr.read_shift(2)+rr.read_shift(2);dn!==0&&(cr.mt=w(rr,rr.l-8)),cr.start=rr.read_shift(4,"i"),cr.size=rr.read_shift(4,"i"),cr.size<0&&cr.start<0&&(cr.size=cr.type=0,cr.start=F,cr.name=""),cr.type===5?(xt=cr.start,Ne>0&&xt!==F&&(W[xt].name="!StreamData")):cr.size>=4096?(cr.storage="fat",W[cr.start]===void 0&&(W[cr.start]=x(re,cr.start,W.fat_addrs,W.ssz)),W[cr.start].name=cr.name,cr.content=W[cr.start].data.slice(0,cr.size)):(cr.storage="minifat",cr.size<0?cr.size=0:xt!==F&&cr.start!==F&&W[xt]&&(cr.content=p(cr,W[xt].data,(W[it]||{}).data))),cr.content&&Uo(cr.content,0),be[ur]=cr,Xe.push(cr)}}function w(ee,W){return new Date((Rc(ee,W+4)/1e7*Math.pow(2,32)+Rc(ee,W)/1e7-11644473600)*1e3)}function j(ee,W){return u(),d(c.readFileSync(ee),W)}function I(ee,W){var re=W&&W.type;switch(re||Sn&&Buffer.isBuffer(ee)&&(re="buffer"),re||"base64"){case"file":return j(ee,W);case"base64":return d(Mc(Xc(ee)),W);case"binary":return d(Mc(ee),W)}return d(ee,W)}function _(ee,W){var re=W||{},fe=re.root||"Root Entry";if(ee.FullPaths||(ee.FullPaths=[]),ee.FileIndex||(ee.FileIndex=[]),ee.FullPaths.length!==ee.FileIndex.length)throw new Error("inconsistent CFB structure");ee.FullPaths.length===0&&(ee.FullPaths[0]=fe+"/",ee.FileIndex[0]={name:fe,type:5}),re.CLSID&&(ee.FileIndex[0].clsid=re.CLSID),E(ee)}function E(ee){var W="Sh33tJ5";if(!Yr.find(ee,"/"+W)){var re=zt(4);re[0]=55,re[1]=re[3]=50,re[2]=54,ee.FileIndex.push({name:W,type:2,content:re,size:4,L:69,R:69,C:69}),ee.FullPaths.push(ee.FullPaths[0]+W),S(ee)}}function S(ee,W){_(ee);for(var re=!1,fe=!1,Ne=ee.FullPaths.length-1;Ne>=0;--Ne){var be=ee.FileIndex[Ne];switch(be.type){case 0:fe?re=!0:(ee.FileIndex.pop(),ee.FullPaths.pop());break;case 1:case 2:case 5:fe=!0,isNaN(be.R*be.L*be.C)&&(re=!0),be.R>-1&&be.L>-1&&be.R==be.L&&(re=!0);break;default:re=!0;break}}if(!(!re&&!W)){var Xe=new Date(1987,1,19),it=0,xt=Object.create?Object.create(null):{},_t=[];for(Ne=0;Ne<ee.FullPaths.length;++Ne)xt[ee.FullPaths[Ne]]=!0,ee.FileIndex[Ne].type!==0&&_t.push([ee.FullPaths[Ne],ee.FileIndex[Ne]]);for(Ne=0;Ne<_t.length;++Ne){var Et=n(_t[Ne][0]);fe=xt[Et],fe||(_t.push([Et,{name:a(Et).replace("/",""),type:1,clsid:le,ct:Xe,mt:Xe,content:null}]),xt[Et]=!0)}for(_t.sort(function(ur,rr){return r(ur[0],rr[0])}),ee.FullPaths=[],ee.FileIndex=[],Ne=0;Ne<_t.length;++Ne)ee.FullPaths[Ne]=_t[Ne][0],ee.FileIndex[Ne]=_t[Ne][1];for(Ne=0;Ne<_t.length;++Ne){var Gt=ee.FileIndex[Ne],nr=ee.FullPaths[Ne];if(Gt.name=a(nr).replace("/",""),Gt.L=Gt.R=Gt.C=-(Gt.color=1),Gt.size=Gt.content?Gt.content.length:0,Gt.start=0,Gt.clsid=Gt.clsid||le,Ne===0)Gt.C=_t.length>1?1:-1,Gt.size=0,Gt.type=5;else if(nr.slice(-1)=="/"){for(it=Ne+1;it<_t.length&&n(ee.FullPaths[it])!=nr;++it);for(Gt.C=it>=_t.length?-1:it,it=Ne+1;it<_t.length&&n(ee.FullPaths[it])!=n(nr);++it);Gt.R=it>=_t.length?-1:it,Gt.type=1}else n(ee.FullPaths[Ne+1]||"")==n(nr)&&(Gt.R=Ne+1),Gt.type=2}}}function O(ee,W){var re=W||{};if(re.fileType=="mad")return Se(ee,re);switch(S(ee),re.fileType){case"zip":return Le(ee,re)}var fe=function(ur){for(var rr=0,cr=0,Ir=0;Ir<ur.FileIndex.length;++Ir){var dn=ur.FileIndex[Ir];if(dn.content){var qr=dn.content.length;qr>0&&(qr<4096?rr+=qr+63>>6:cr+=qr+511>>9)}}for(var ln=ur.FullPaths.length+3>>2,qs=rr+7>>3,rt=rr+127>>7,Mt=qs+cr+ln+rt,Yt=Mt+127>>7,ar=Yt<=109?0:Math.ceil((Yt-109)/127);Mt+Yt+ar+127>>7>Yt;)ar=++Yt<=109?0:Math.ceil((Yt-109)/127);var It=[1,ar,Yt,rt,ln,cr,rr,0];return ur.FileIndex[0].size=rr<<6,It[7]=(ur.FileIndex[0].start=It[0]+It[1]+It[2]+It[3]+It[4]+It[5])+(It[6]+7>>3),It}(ee),Ne=zt(fe[7]<<9),be=0,Xe=0;{for(be=0;be<8;++be)Ne.write_shift(1,ge[be]);for(be=0;be<8;++be)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),be=0;be<3;++be)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,fe[2]),Ne.write_shift(4,fe[0]+fe[1]+fe[2]+fe[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,fe[3]?fe[0]+fe[1]+fe[2]-1:F),Ne.write_shift(4,fe[3]),Ne.write_shift(-4,fe[1]?fe[0]-1:F),Ne.write_shift(4,fe[1]),be=0;be<109;++be)Ne.write_shift(-4,be<fe[2]?fe[1]+be:-1)}if(fe[1])for(Xe=0;Xe<fe[1];++Xe){for(;be<236+Xe*127;++be)Ne.write_shift(-4,be<fe[2]?fe[1]+be:-1);Ne.write_shift(-4,Xe===fe[1]-1?F:Xe+1)}var it=function(ur){for(Xe+=ur;be<Xe-1;++be)Ne.write_shift(-4,be+1);ur&&(++be,Ne.write_shift(-4,F))};for(Xe=be=0,Xe+=fe[1];be<Xe;++be)Ne.write_shift(-4,de.DIFSECT);for(Xe+=fe[2];be<Xe;++be)Ne.write_shift(-4,de.FATSECT);it(fe[3]),it(fe[4]);for(var xt=0,_t=0,Et=ee.FileIndex[0];xt<ee.FileIndex.length;++xt)Et=ee.FileIndex[xt],Et.content&&(_t=Et.content.length,!(_t<4096)&&(Et.start=Xe,it(_t+511>>9)));for(it(fe[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,de.ENDOFCHAIN);for(Xe=be=0,xt=0;xt<ee.FileIndex.length;++xt)Et=ee.FileIndex[xt],Et.content&&(_t=Et.content.length,!(!_t||_t>=4096)&&(Et.start=Xe,it(_t+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,de.ENDOFCHAIN);for(be=0;be<fe[4]<<2;++be){var Gt=ee.FullPaths[be];if(!Gt||Gt.length===0){for(xt=0;xt<17;++xt)Ne.write_shift(4,0);for(xt=0;xt<3;++xt)Ne.write_shift(4,-1);for(xt=0;xt<12;++xt)Ne.write_shift(4,0);continue}Et=ee.FileIndex[be],be===0&&(Et.start=Et.size?Et.start-1:F);var nr=be===0&&re.root||Et.name;if(_t=2*(nr.length+1),Ne.write_shift(64,nr,"utf16le"),Ne.write_shift(2,_t),Ne.write_shift(1,Et.type),Ne.write_shift(1,Et.color),Ne.write_shift(-4,Et.L),Ne.write_shift(-4,Et.R),Ne.write_shift(-4,Et.C),Et.clsid)Ne.write_shift(16,Et.clsid,"hex");else for(xt=0;xt<4;++xt)Ne.write_shift(4,0);Ne.write_shift(4,Et.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,Et.start),Ne.write_shift(4,Et.size),Ne.write_shift(4,0)}for(be=1;be<ee.FileIndex.length;++be)if(Et=ee.FileIndex[be],Et.size>=4096)if(Ne.l=Et.start+1<<9,Sn&&Buffer.isBuffer(Et.content))Et.content.copy(Ne,Ne.l,0,Et.size),Ne.l+=Et.size+511&-512;else{for(xt=0;xt<Et.size;++xt)Ne.write_shift(1,Et.content[xt]);for(;xt&511;++xt)Ne.write_shift(1,0)}for(be=1;be<ee.FileIndex.length;++be)if(Et=ee.FileIndex[be],Et.size>0&&Et.size<4096)if(Sn&&Buffer.isBuffer(Et.content))Et.content.copy(Ne,Ne.l,0,Et.size),Ne.l+=Et.size+63&-64;else{for(xt=0;xt<Et.size;++xt)Ne.write_shift(1,Et.content[xt]);for(;xt&63;++xt)Ne.write_shift(1,0)}if(Sn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function P(ee,W){var re=ee.FullPaths.map(function(xt){return xt.toUpperCase()}),fe=re.map(function(xt){var _t=xt.split("/");return _t[_t.length-(xt.slice(-1)=="/"?2:1)]}),Ne=!1;W.charCodeAt(0)===47?(Ne=!0,W=re[0].slice(0,-1)+W):Ne=W.indexOf("/")!==-1;var be=W.toUpperCase(),Xe=Ne===!0?re.indexOf(be):fe.indexOf(be);if(Xe!==-1)return ee.FileIndex[Xe];var it=!be.match(by);for(be=be.replace(Vl,""),it&&(be=be.replace(by,"!")),Xe=0;Xe<re.length;++Xe)if((it?re[Xe].replace(by,"!"):re[Xe]).replace(Vl,"")==be||(it?fe[Xe].replace(by,"!"):fe[Xe]).replace(Vl,"")==be)return ee.FileIndex[Xe];return null}var T=64,F=-2,J="d0cf11e0a1b11ae1",ge=[208,207,17,224,161,177,26,225],le="00000000000000000000000000000000",de={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:J,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:le,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ae(ee,W,re){u();var fe=O(ee,re);c.writeFileSync(W,fe)}function se(ee){for(var W=new Array(ee.length),re=0;re<ee.length;++re)W[re]=String.fromCharCode(ee[re]);return W.join("")}function Ie(ee,W){var re=O(ee,W);switch(W&&W.type||"buffer"){case"file":return u(),c.writeFileSync(W.filename,re),re;case"binary":return typeof re=="string"?re:se(re);case"base64":return e2(typeof re=="string"?re:se(re));case"buffer":if(Sn)return Buffer.isBuffer(re)?re:eh(re);case"array":return typeof re=="string"?Mc(re):re}return re}var Pe;function k(ee){try{var W=ee.InflateRaw,re=new W;if(re._processChunk(new Uint8Array([3,0]),re._finishFlushFlag),re.bytesRead)Pe=ee;else throw new Error("zlib does not expose bytesRead")}catch(fe){console.error("cannot use native zlib: "+(fe.message||fe))}}function H(ee,W){if(!Pe)return ve(ee,W);var re=Pe.InflateRaw,fe=new re,Ne=fe._processChunk(ee.slice(ee.l),fe._finishFlushFlag);return ee.l+=fe.bytesRead,Ne}function R(ee){return Pe?Pe.deflateRawSync(ee):je(ee)}var M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],X=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function D(ee){var W=(ee<<1|ee<<11)&139536|(ee<<5|ee<<15)&558144;return(W>>16|W>>8|W)&255}for(var Q=typeof Uint8Array<"u",te=Q?new Uint8Array(256):[],me=0;me<256;++me)te[me]=D(me);function L(ee,W){var re=te[ee&255];return W<=8?re>>>8-W:(re=re<<8|te[ee>>8&255],W<=16?re>>>16-W:(re=re<<8|te[ee>>16&255],re>>>24-W))}function he(ee,W){var re=W&7,fe=W>>>3;return(ee[fe]|(re<=6?0:ee[fe+1]<<8))>>>re&3}function ne(ee,W){var re=W&7,fe=W>>>3;return(ee[fe]|(re<=5?0:ee[fe+1]<<8))>>>re&7}function z(ee,W){var re=W&7,fe=W>>>3;return(ee[fe]|(re<=4?0:ee[fe+1]<<8))>>>re&15}function ce(ee,W){var re=W&7,fe=W>>>3;return(ee[fe]|(re<=3?0:ee[fe+1]<<8))>>>re&31}function K(ee,W){var re=W&7,fe=W>>>3;return(ee[fe]|(re<=1?0:ee[fe+1]<<8))>>>re&127}function oe(ee,W,re){var fe=W&7,Ne=W>>>3,be=(1<<re)-1,Xe=ee[Ne]>>>fe;return re<8-fe||(Xe|=ee[Ne+1]<<8-fe,re<16-fe)||(Xe|=ee[Ne+2]<<16-fe,re<24-fe)||(Xe|=ee[Ne+3]<<24-fe),Xe&be}function xe(ee,W,re){var fe=W&7,Ne=W>>>3;return fe<=5?ee[Ne]|=(re&7)<<fe:(ee[Ne]|=re<<fe&255,ee[Ne+1]=(re&7)>>8-fe),W+3}function De(ee,W,re){var fe=W&7,Ne=W>>>3;return re=(re&1)<<fe,ee[Ne]|=re,W+1}function nt(ee,W,re){var fe=W&7,Ne=W>>>3;return re<<=fe,ee[Ne]|=re&255,re>>>=8,ee[Ne+1]=re,W+8}function Me(ee,W,re){var fe=W&7,Ne=W>>>3;return re<<=fe,ee[Ne]|=re&255,re>>>=8,ee[Ne+1]=re&255,ee[Ne+2]=re>>>8,W+16}function Je(ee,W){var re=ee.length,fe=2*re>W?2*re:W+5,Ne=0;if(re>=W)return ee;if(Sn){var be=kV(fe);if(ee.copy)ee.copy(be);else for(;Ne<ee.length;++Ne)be[Ne]=ee[Ne];return be}else if(Q){var Xe=new Uint8Array(fe);if(Xe.set)Xe.set(ee);else for(;Ne<re;++Ne)Xe[Ne]=ee[Ne];return Xe}return ee.length=fe,ee}function lt(ee){for(var W=new Array(ee),re=0;re<ee;++re)W[re]=0;return W}function ft(ee,W,re){var fe=1,Ne=0,be=0,Xe=0,it=0,xt=ee.length,_t=Q?new Uint16Array(32):lt(32);for(be=0;be<32;++be)_t[be]=0;for(be=xt;be<re;++be)ee[be]=0;xt=ee.length;var Et=Q?new Uint16Array(xt):lt(xt);for(be=0;be<xt;++be)_t[Ne=ee[be]]++,fe<Ne&&(fe=Ne),Et[be]=0;for(_t[0]=0,be=1;be<=fe;++be)_t[be+16]=it=it+_t[be-1]<<1;for(be=0;be<xt;++be)it=ee[be],it!=0&&(Et[be]=_t[it+16]++);var Gt=0;for(be=0;be<xt;++be)if(Gt=ee[be],Gt!=0)for(it=L(Et[be],fe)>>fe-Gt,Xe=(1<<fe+4-Gt)-1;Xe>=0;--Xe)W[it|Xe<<Gt]=Gt&15|be<<4;return fe}var Ge=Q?new Uint16Array(512):lt(512),ye=Q?new Uint16Array(32):lt(32);if(!Q){for(var We=0;We<512;++We)Ge[We]=0;for(We=0;We<32;++We)ye[We]=0}(function(){for(var ee=[],W=0;W<32;W++)ee.push(5);ft(ee,ye,32);var re=[];for(W=0;W<=143;W++)re.push(8);for(;W<=255;W++)re.push(9);for(;W<=279;W++)re.push(7);for(;W<=287;W++)re.push(8);ft(re,Ge,288)})();var qe=function(){for(var W=Q?new Uint8Array(32768):[],re=0,fe=0;re<X.length-1;++re)for(;fe<X[re+1];++fe)W[fe]=re;for(;fe<32768;++fe)W[fe]=29;var Ne=Q?new Uint8Array(259):[];for(re=0,fe=0;re<G.length-1;++re)for(;fe<G[re+1];++fe)Ne[fe]=re;function be(it,xt){for(var _t=0;_t<it.length;){var Et=Math.min(65535,it.length-_t),Gt=_t+Et==it.length;for(xt.write_shift(1,+Gt),xt.write_shift(2,Et),xt.write_shift(2,~Et&65535);Et-- >0;)xt[xt.l++]=it[_t++]}return xt.l}function Xe(it,xt){for(var _t=0,Et=0,Gt=Q?new Uint16Array(32768):[];Et<it.length;){var nr=Math.min(65535,it.length-Et);if(nr<10){for(_t=xe(xt,_t,+(Et+nr==it.length)),_t&7&&(_t+=8-(_t&7)),xt.l=_t/8|0,xt.write_shift(2,nr),xt.write_shift(2,~nr&65535);nr-- >0;)xt[xt.l++]=it[Et++];_t=xt.l*8;continue}_t=xe(xt,_t,+(Et+nr==it.length)+2);for(var ur=0;nr-- >0;){var rr=it[Et];ur=(ur<<5^rr)&32767;var cr=-1,Ir=0;if((cr=Gt[ur])&&(cr|=Et&-32768,cr>Et&&(cr-=32768),cr<Et))for(;it[cr+Ir]==it[Et+Ir]&&Ir<250;)++Ir;if(Ir>2){rr=Ne[Ir],rr<=22?_t=nt(xt,_t,te[rr+1]>>1)-1:(nt(xt,_t,3),_t+=5,nt(xt,_t,te[rr-23]>>5),_t+=3);var dn=rr<8?0:rr-4>>2;dn>0&&(Me(xt,_t,Ir-G[rr]),_t+=dn),rr=W[Et-cr],_t=nt(xt,_t,te[rr]>>3),_t-=3;var qr=rr<4?0:rr-2>>1;qr>0&&(Me(xt,_t,Et-cr-X[rr]),_t+=qr);for(var ln=0;ln<Ir;++ln)Gt[ur]=Et&32767,ur=(ur<<5^it[Et])&32767,++Et;nr-=Ir-1}else rr<=143?rr=rr+48:_t=De(xt,_t,1),_t=nt(xt,_t,te[rr]),Gt[ur]=Et&32767,++Et}_t=nt(xt,_t,0)-1}return xt.l=(_t+7)/8|0,xt.l}return function(xt,_t){return xt.length<8?be(xt,_t):Xe(xt,_t)}}();function je(ee){var W=zt(50+Math.floor(ee.length*1.1)),re=qe(ee,W);return W.slice(0,re)}var pe=Q?new Uint16Array(32768):lt(32768),He=Q?new Uint16Array(32768):lt(32768),at=Q?new Uint16Array(128):lt(128),yt=1,bt=1;function kt(ee,W){var re=ce(ee,W)+257;W+=5;var fe=ce(ee,W)+1;W+=5;var Ne=z(ee,W)+4;W+=4;for(var be=0,Xe=Q?new Uint8Array(19):lt(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],xt=1,_t=Q?new Uint8Array(8):lt(8),Et=Q?new Uint8Array(8):lt(8),Gt=Xe.length,nr=0;nr<Ne;++nr)Xe[M[nr]]=be=ne(ee,W),xt<be&&(xt=be),_t[be]++,W+=3;var ur=0;for(_t[0]=0,nr=1;nr<=xt;++nr)Et[nr]=ur=ur+_t[nr-1]<<1;for(nr=0;nr<Gt;++nr)(ur=Xe[nr])!=0&&(it[nr]=Et[ur]++);var rr=0;for(nr=0;nr<Gt;++nr)if(rr=Xe[nr],rr!=0){ur=te[it[nr]]>>8-rr;for(var cr=(1<<7-rr)-1;cr>=0;--cr)at[ur|cr<<rr]=rr&7|nr<<3}var Ir=[];for(xt=1;Ir.length<re+fe;)switch(ur=at[K(ee,W)],W+=ur&7,ur>>>=3){case 16:for(be=3+he(ee,W),W+=2,ur=Ir[Ir.length-1];be-- >0;)Ir.push(ur);break;case 17:for(be=3+ne(ee,W),W+=3;be-- >0;)Ir.push(0);break;case 18:for(be=11+K(ee,W),W+=7;be-- >0;)Ir.push(0);break;default:Ir.push(ur),xt<ur&&(xt=ur);break}var dn=Ir.slice(0,re),qr=Ir.slice(re);for(nr=re;nr<286;++nr)dn[nr]=0;for(nr=fe;nr<30;++nr)qr[nr]=0;return yt=ft(dn,pe,286),bt=ft(qr,He,30),W}function Vt(ee,W){if(ee[0]==3&&!(ee[1]&3))return[$0(W),2];for(var re=0,fe=0,Ne=kV(W||1<<18),be=0,Xe=Ne.length>>>0,it=0,xt=0;!(fe&1);){if(fe=ne(ee,re),re+=3,fe>>>1)fe>>1==1?(it=9,xt=5):(re=kt(ee,re),it=yt,xt=bt);else{re&7&&(re+=8-(re&7));var _t=ee[re>>>3]|ee[(re>>>3)+1]<<8;if(re+=32,_t>0)for(!W&&Xe<be+_t&&(Ne=Je(Ne,be+_t),Xe=Ne.length);_t-- >0;)Ne[be++]=ee[re>>>3],re+=8;continue}for(;;){!W&&Xe<be+32767&&(Ne=Je(Ne,be+32767),Xe=Ne.length);var Et=oe(ee,re,it),Gt=fe>>>1==1?Ge[Et]:pe[Et];if(re+=Gt&15,Gt>>>=4,!(Gt>>>8&255))Ne[be++]=Gt;else{if(Gt==256)break;Gt-=257;var nr=Gt<8?0:Gt-4>>2;nr>5&&(nr=0);var ur=be+G[Gt];nr>0&&(ur+=oe(ee,re,nr),re+=nr),Et=oe(ee,re,xt),Gt=fe>>>1==1?ye[Et]:He[Et],re+=Gt&15,Gt>>>=4;var rr=Gt<4?0:Gt-2>>1,cr=X[Gt];for(rr>0&&(cr+=oe(ee,re,rr),re+=rr),!W&&Xe<ur&&(Ne=Je(Ne,ur+100),Xe=Ne.length);be<ur;)Ne[be]=Ne[be-cr],++be}}}return W?[Ne,re+7>>>3]:[Ne.slice(0,be),re+7>>>3]}function ve(ee,W){var re=ee.slice(ee.l||0),fe=Vt(re,W);return ee.l+=fe[1],fe[0]}function Qe(ee,W){if(ee)typeof console<"u"&&console.error(W);else throw new Error(W)}function Z(ee,W){var re=ee;Uo(re,0);var fe=[],Ne=[],be={FileIndex:fe,FullPaths:Ne};_(be,{root:W.root});for(var Xe=re.length-4;(re[Xe]!=80||re[Xe+1]!=75||re[Xe+2]!=5||re[Xe+3]!=6)&&Xe>=0;)--Xe;re.l=Xe+4,re.l+=4;var it=re.read_shift(2);re.l+=6;var xt=re.read_shift(4);for(re.l=xt,Xe=0;Xe<it;++Xe){re.l+=20;var _t=re.read_shift(4),Et=re.read_shift(4),Gt=re.read_shift(2),nr=re.read_shift(2),ur=re.read_shift(2);re.l+=8;var rr=re.read_shift(4),cr=l(re.slice(re.l+Gt,re.l+Gt+nr));re.l+=Gt+nr+ur;var Ir=re.l;re.l=rr+4,$e(re,_t,Et,be,cr),re.l=Ir}return be}function $e(ee,W,re,fe,Ne){ee.l+=2;var be=ee.read_shift(2),Xe=ee.read_shift(2),it=i(ee);if(be&8257)throw new Error("Unsupported ZIP encryption");for(var xt=ee.read_shift(4),_t=ee.read_shift(4),Et=ee.read_shift(4),Gt=ee.read_shift(2),nr=ee.read_shift(2),ur="",rr=0;rr<Gt;++rr)ur+=String.fromCharCode(ee[ee.l++]);if(nr){var cr=l(ee.slice(ee.l,ee.l+nr));(cr[21589]||{}).mt&&(it=cr[21589].mt),((Ne||{})[21589]||{}).mt&&(it=Ne[21589].mt)}ee.l+=nr;var Ir=ee.slice(ee.l,ee.l+_t);switch(Xe){case 8:Ir=H(ee,Et);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var dn=!1;be&8&&(xt=ee.read_shift(4),xt==134695760&&(xt=ee.read_shift(4),dn=!0),_t=ee.read_shift(4),Et=ee.read_shift(4)),_t!=W&&Qe(dn,"Bad compressed size: "+W+" != "+_t),Et!=re&&Qe(dn,"Bad uncompressed size: "+re+" != "+Et),Ee(fe,ur,Ir,{unsafe:!0,mt:it})}function Le(ee,W){var re=W||{},fe=[],Ne=[],be=zt(1),Xe=re.compression?8:0,it=0,xt=0,_t=0,Et=0,Gt=0,nr=ee.FullPaths[0],ur=nr,rr=ee.FileIndex[0],cr=[],Ir=0;for(xt=1;xt<ee.FullPaths.length;++xt)if(ur=ee.FullPaths[xt].slice(nr.length),rr=ee.FileIndex[xt],!(!rr.size||!rr.content||ur=="Sh33tJ5")){var dn=Et,qr=zt(ur.length);for(_t=0;_t<ur.length;++_t)qr.write_shift(1,ur.charCodeAt(_t)&127);qr=qr.slice(0,qr.l),cr[Gt]=eBe.buf(rr.content,0);var ln=rr.content;Xe==8&&(ln=R(ln)),be=zt(30),be.write_shift(4,67324752),be.write_shift(2,20),be.write_shift(2,it),be.write_shift(2,Xe),rr.mt?s(be,rr.mt):be.write_shift(4,0),be.write_shift(-4,cr[Gt]),be.write_shift(4,ln.length),be.write_shift(4,rr.content.length),be.write_shift(2,qr.length),be.write_shift(2,0),Et+=be.length,fe.push(be),Et+=qr.length,fe.push(qr),Et+=ln.length,fe.push(ln),be=zt(46),be.write_shift(4,33639248),be.write_shift(2,0),be.write_shift(2,20),be.write_shift(2,it),be.write_shift(2,Xe),be.write_shift(4,0),be.write_shift(-4,cr[Gt]),be.write_shift(4,ln.length),be.write_shift(4,rr.content.length),be.write_shift(2,qr.length),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(4,0),be.write_shift(4,dn),Ir+=be.l,Ne.push(be),Ir+=qr.length,Ne.push(qr),++Gt}return be=zt(22),be.write_shift(4,101010256),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(2,Gt),be.write_shift(2,Gt),be.write_shift(4,Ir),be.write_shift(4,Et),be.write_shift(2,0),fo([fo(fe),fo(Ne),be])}var Ve={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function At(ee,W){if(ee.ctype)return ee.ctype;var re=ee.name||"",fe=re.match(/\.([^\.]+)$/);return fe&&Ve[fe[1]]||W&&(fe=(re=W).match(/[\.\\]([^\.\\])+$/),fe&&Ve[fe[1]])?Ve[fe[1]]:"application/octet-stream"}function pt(ee){for(var W=e2(ee),re=[],fe=0;fe<W.length;fe+=76)re.push(W.slice(fe,fe+76));return re.join(`\r
`)+`\r
`}function Be(ee){var W=ee.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(_t){var Et=_t.charCodeAt(0).toString(16).toUpperCase();return"="+(Et.length==1?"0"+Et:Et)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var re=[],fe=W.split(`\r
`),Ne=0;Ne<fe.length;++Ne){var be=fe[Ne];if(be.length==0){re.push("");continue}for(var Xe=0;Xe<be.length;){var it=76,xt=be.slice(Xe,Xe+it);xt.charAt(it-1)=="="?it--:xt.charAt(it-2)=="="?it-=2:xt.charAt(it-3)=="="&&(it-=3),xt=be.slice(Xe,Xe+it),Xe+=it,Xe<be.length&&(xt+="="),re.push(xt)}}return re.join(`\r
`)}function gt(ee){for(var W=[],re=0;re<ee.length;++re){for(var fe=ee[re];re<=ee.length&&fe.charAt(fe.length-1)=="=";)fe=fe.slice(0,fe.length-1)+ee[++re];W.push(fe)}for(var Ne=0;Ne<W.length;++Ne)W[Ne]=W[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(be){return String.fromCharCode(parseInt(be.slice(1),16))});return Mc(W.join(`\r
`))}function V(ee,W,re){for(var fe="",Ne="",be="",Xe,it=0;it<10;++it){var xt=W[it];if(!xt||xt.match(/^\s*$/))break;var _t=xt.match(/^(.*?):\s*([^\s].*)$/);if(_t)switch(_t[1].toLowerCase()){case"content-location":fe=_t[2].trim();break;case"content-type":be=_t[2].trim();break;case"content-transfer-encoding":Ne=_t[2].trim();break}}switch(++it,Ne.toLowerCase()){case"base64":Xe=Mc(Xc(W.slice(it).join("")));break;case"quoted-printable":Xe=gt(W.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var Et=Ee(ee,fe.slice(re.length),Xe,{unsafe:!0});be&&(Et.ctype=be)}function ae(ee,W){if(se(ee.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var re=W&&W.root||"",fe=(Sn&&Buffer.isBuffer(ee)?ee.toString("binary"):se(ee)).split(`\r
`),Ne=0,be="";for(Ne=0;Ne<fe.length;++Ne)if(be=fe[Ne],!!/^Content-Location:/i.test(be)&&(be=be.slice(be.indexOf("file")),re||(re=be.slice(0,be.lastIndexOf("/")+1)),be.slice(0,re.length)!=re))for(;re.length>0&&(re=re.slice(0,re.length-1),re=re.slice(0,re.lastIndexOf("/")+1),be.slice(0,re.length)!=re););var Xe=(fe[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var it="--"+(Xe[1]||""),xt=[],_t=[],Et={FileIndex:xt,FullPaths:_t};_(Et);var Gt,nr=0;for(Ne=0;Ne<fe.length;++Ne){var ur=fe[Ne];ur!==it&&ur!==it+"--"||(nr++&&V(Et,fe.slice(Gt,Ne),re),Gt=Ne)}return Et}function Se(ee,W){var re=W||{},fe=re.boundary||"SheetJS";fe="------="+fe;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+fe.slice(2)+'"',"","",""],be=ee.FullPaths[0],Xe=be,it=ee.FileIndex[0],xt=1;xt<ee.FullPaths.length;++xt)if(Xe=ee.FullPaths[xt].slice(be.length),it=ee.FileIndex[xt],!(!it.size||!it.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ir){return"_x"+Ir.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ir){return"_u"+Ir.charCodeAt(0).toString(16)+"_"});for(var _t=it.content,Et=Sn&&Buffer.isBuffer(_t)?_t.toString("binary"):se(_t),Gt=0,nr=Math.min(1024,Et.length),ur=0,rr=0;rr<=nr;++rr)(ur=Et.charCodeAt(rr))>=32&&ur<128&&++Gt;var cr=Gt>=nr*4/5;Ne.push(fe),Ne.push("Content-Location: "+(re.root||"file:///C:/SheetJS/")+Xe),Ne.push("Content-Transfer-Encoding: "+(cr?"quoted-printable":"base64")),Ne.push("Content-Type: "+At(it,Xe)),Ne.push(""),Ne.push(cr?Be(Et):pt(Et))}return Ne.push(fe+`--\r
`),Ne.join(`\r
`)}function _e(ee){var W={};return _(W,ee),W}function Ee(ee,W,re,fe){var Ne=fe&&fe.unsafe;Ne||_(ee);var be=!Ne&&Yr.find(ee,W);if(!be){var Xe=ee.FullPaths[0];W.slice(0,Xe.length)==Xe?Xe=W:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+W).replace("//","/")),be={name:a(W),type:2},ee.FileIndex.push(be),ee.FullPaths.push(Xe),Ne||Yr.utils.cfb_gc(ee)}return be.content=re,be.size=re?re.length:0,fe&&(fe.CLSID&&(be.clsid=fe.CLSID),fe.mt&&(be.mt=fe.mt),fe.ct&&(be.ct=fe.ct)),be}function ze(ee,W){_(ee);var re=Yr.find(ee,W);if(re){for(var fe=0;fe<ee.FileIndex.length;++fe)if(ee.FileIndex[fe]==re)return ee.FileIndex.splice(fe,1),ee.FullPaths.splice(fe,1),!0}return!1}function ut(ee,W,re){_(ee);var fe=Yr.find(ee,W);if(fe){for(var Ne=0;Ne<ee.FileIndex.length;++Ne)if(ee.FileIndex[Ne]==fe)return ee.FileIndex[Ne].name=a(re),ee.FullPaths[Ne]=re,!0}return!1}function st(ee){S(ee,!0)}return e.find=P,e.read=I,e.parse=d,e.write=Ie,e.writeFile=Ae,e.utils={cfb_new:_e,cfb_add:Ee,cfb_del:ze,cfb_mov:ut,cfb_gc:st,ReadShift:Zy,CheckField:lre,prep_blob:Uo,bconcat:fo,use_zlib:k,_deflateRaw:je,_inflateRaw:ve,consts:de},e}();function tBe(t){return typeof t=="string"?N4(t):Array.isArray(t)?Sje(t):t}function iw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=N4(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?vf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([tBe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=nm(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function rBe(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function Gs(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function QV(t,e){for(var r=[],n=Gs(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function _4(t){for(var e=[],r=Gs(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function E4(t){for(var e=[],r=Gs(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function nBe(t){for(var e=[],r=Gs(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var dS=new Date(1899,11,30,0,0,0);function $i(t,e){var r=t.getTime(),n=dS.getTime()+(t.getTimezoneOffset()-dS.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Qte=new Date,aBe=dS.getTime()+(Qte.getTimezoneOffset()-dS.getTimezoneOffset())*6e4,VV=Qte.getTimezoneOffset();function S4(t){var e=new Date;return e.setTime(t*24*60*60*1e3+aBe),e.getTimezoneOffset()!==VV&&e.setTime(e.getTime()+(e.getTimezoneOffset()-VV)*6e4),e}function sBe(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var HV=new Date("2017-02-19T19:06:09.000Z"),Vte=isNaN(HV.getFullYear())?new Date("2/19/17"):HV,iBe=Vte.getFullYear()==2017;function rs(t,e){var r=new Date(t);if(iBe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Vte.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function kp(t,e){if(Sn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return vf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return vf(jte(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return vf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return vf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function ns(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ns(t[r]));return e}function Hs(t,e){for(var r="";r.length<e;)r+=t;return r}function jd(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var oBe=["january","february","march","april","may","june","july","august","september","october","november","december"];function cv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&oBe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var lBe=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],l=1;l<s.length;++l)i.push(a),i.push(s[l]);return i}}();function Hte(t){return t?t.content&&t.type?kp(t.content,!0):t.data?yy(t.data):t.asNodeBuffer&&Sn?yy(t.asNodeBuffer().toString("binary")):t.asBinary?yy(t.asBinary()):t._data&&t._data.getContent?yy(kp(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function $te(t){if(!t)return null;if(t.data)return PV(t.data);if(t.asNodeBuffer&&Sn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?PV(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function cBe(t){return t&&t.name.slice(-4)===".bin"?$te(t):Hte(t)}function Su(t,e){for(var r=t.FullPaths||Gs(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function W6(t,e){var r=Su(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function hi(t,e,r){if(!r)return cBe(W6(t,e));if(!e)return null;try{return hi(t,e)}catch{return null}}function Lc(t,e,r){if(!r)return Hte(W6(t,e));if(!e)return null;try{return Lc(t,e)}catch{return null}}function uBe(t,e,r){return $te(W6(t,e))}function $V(t){for(var e=t.FullPaths||Gs(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Nn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Sn?n=eh(r):n=Ije(r),Yr.utils.cfb_add(t,e,n)}Yr.utils.cfb_add(t,e,r)}else t.file(e,r)}function X6(){return Yr.utils.cfb_new()}function Kte(t,e){switch(e.type){case"base64":return Yr.read(t,{type:"base64"});case"binary":return Yr.read(t,{type:"binary"});case"buffer":case"array":return Yr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function wy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var di=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,dBe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,KV=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,fBe=/<[^>]*>/g,wl=di.match(KV)?KV:fBe,ABe=/<\w*:/,hBe=/<(\/?)\w+:/;function cn(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var i=t.match(dBe),l=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var A=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[A]&&d.slice(l-3,l)=="ext")continue;n[A]=c,n[A.toLowerCase()]=c}}return n}function Df(t){return t.replace(hBe,"<$1")}var Gte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Y6=_4(Gte),qn=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Gte[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),J6=/[&<>'"]/g,mBe=/[\u0000-\u0008\u000b-\u001f]/g;function Na(t){var e=t+"";return e.replace(J6,function(r){return Y6[r]}).replace(mBe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function GV(t){return Na(t).replace(/ /g,"_x0020_")}var qte=/[\u0000-\u001f]/g;function Z6(t){var e=t+"";return e.replace(J6,function(r){return Y6[r]}).replace(/\n/g,"<br/>").replace(qte,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function pBe(t){var e=t+"";return e.replace(J6,function(r){return Y6[r]}).replace(qte,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var qV=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function gBe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ja(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Gj(t){for(var e="",r=0,n=0,a=0,s=0,i=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,e+=String.fromCharCode(i);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function zV(t){var e=$0(2*t.length),r,n,a=1,s=0,i=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[s++]=i&255,e[s++]=i>>>8,i=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function WV(t){return eh(t,"binary").toString("utf8")}var wC="foo bar baz",ja=Sn&&(WV(wC)==Gj(wC)&&WV||zV(wC)==Gj(wC)&&zV)||Gj,vf=Sn?function(t){return eh(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},r2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),zte=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),xBe=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),vBe=/<\/?(?:vt:)?variant>/g,yBe=/<(?:vt:)([^>]*)>([\s\S]*)</;function XV(t,e){var r=cn(t),n=t.match(xBe(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(vBe,"").match(yBe);i&&a.push({v:ja(i[2]),t:i[1]})}),a}var Wte=/(^\s|\s$|\n)/;function Vo(t,e){return"<"+t+(e.match(Wte)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function n2(t){return Gs(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function br(t,e,r){return"<"+t+(r!=null?n2(r):"")+(e!=null?(e.match(Wte)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function nk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function bBe(t,e){switch(typeof t){case"string":var r=br("vt:lpwstr",Na(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return br((t|0)==t?"vt:i4":"vt:r8",Na(String(t)));case"boolean":return br("vt:bool",t?"true":"false")}if(t instanceof Date)return br("vt:filetime",nk(t));throw new Error("Unable to serialize "+t)}function eD(t){if(Sn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ja(nm(G6(t)));throw new Error("Bad input format: expected Buffer or string")}var a2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Li={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ag=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Dc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function wBe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function NBe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,i=n?-e:e;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var YV=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},JV=Sn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:eh(e)})):YV(t)}:YV,ZV=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(pA(t,a)));return n.join("").replace(Vl,"")},tD=Sn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(Vl,""):ZV(t,e,r)}:ZV,eH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Xte=Sn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):eH(t,e,r)}:eH,tH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(ax(t,a)));return n.join("")},ow=Sn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):tH(e,r,n)}:tH,Yte=function(t,e){var r=Rc(t,e);return r>0?ow(t,e+4,e+4+r-1):""},Jte=Yte,Zte=function(t,e){var r=Rc(t,e);return r>0?ow(t,e+4,e+4+r-1):""},ere=Zte,tre=function(t,e){var r=2*Rc(t,e);return r>0?ow(t,e+4,e+4+r-1):""},rre=tre,nre=function(e,r){var n=Rc(e,r);return n>0?tD(e,r+4,r+4+n):""},are=nre,sre=function(t,e){var r=Rc(t,e);return r>0?ow(t,e+4,e+4+r):""},ire=sre,ore=function(t,e){return wBe(t,e)},fS=ore,rD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Sn&&(Jte=function(e,r){if(!Buffer.isBuffer(e))return Yte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},ere=function(e,r){if(!Buffer.isBuffer(e))return Zte(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},rre=function(e,r){if(!Buffer.isBuffer(e))return tre(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},are=function(e,r){if(!Buffer.isBuffer(e))return nre(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},ire=function(e,r){if(!Buffer.isBuffer(e))return sre(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},fS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):ore(e,r)},rD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var ax=function(t,e){return t[e]},pA=function(t,e){return t[e+1]*256+t[e]},CBe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Rc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Um=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},_Be=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Zy(t,e){var r="",n,a,s=[],i,l,c,u;switch(e){case"dbcs":if(u=this.l,Sn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(pA(this,u)),u+=2;t*=2;break;case"utf8":r=ow(this,this.l,this.l+t);break;case"utf16le":t*=2,r=tD(this,this.l,this.l+t);break;case"wstr":return Zy.call(this,t,"dbcs");case"lpstr-ansi":r=Jte(this,this.l),t=4+Rc(this,this.l);break;case"lpstr-cp":r=ere(this,this.l),t=4+Rc(this,this.l);break;case"lpwstr":r=rre(this,this.l),t=4+2*Rc(this,this.l);break;case"lpp4":t=4+Rc(this,this.l),r=are(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Rc(this,this.l),r=ire(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=ax(this,this.l+t++))!==0;)s.push(bC(i));r=s.join("");break;case"_wstr":for(t=0,r="";(i=pA(this,this.l+t))!==0;)s.push(bC(i)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=ax(this,u),this.l=u+1,l=Zy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(bC(pA(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=ax(this,u),this.l=u+1,l=Zy.call(this,t-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(bC(ax(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=ax(this,this.l),this.l++,n;case 2:return n=(e==="i"?CBe:pA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Um:_Be)(this,this.l),this.l+=4,n):(a=Rc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=fS(this,this.l):a=fS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Xte(this,this.l,t);break}}return this.l+=t,r}var EBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},SBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},IBe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function jBe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)IBe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var i=e.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,EBe(this,e,this.l);break;case 8:if(n=8,r==="f"){NBe(this,e,this.l);break}case 16:break;case-4:n=4,SBe(this,e,this.l);break}return this.l+=n,this}function lre(t,e){var r=Xte(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Uo(t,e){t.l=e,t.read_shift=Zy,t.chk=lre,t.write_shift=jBe}function yl(t,e){t.l+=e}function zt(t){var e=$0(t);return Uo(e,0),e}function th(t,e,r){if(t){var n,a,s;Uo(t,t.l||0);for(var i=t.length,l=0,c=0;t.l<i;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=u2[l]||u2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function Ac(){var t=[],e=Sn?256:2048,r=function(u){var d=zt(u);return Uo(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},i=function(){return a(),fo(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:i,_bufs:t}}function or(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=u2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=t.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&rD(r)&&t.push(r)}}function eb(t,e,r){var n=ns(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function rH(t,e,r){var n=ns(t);return n.s=eb(n.s,e.s,r),n.e=eb(n.e,e.s,r),n}function tb(t,e){if(t.cRel&&t.c<0)for(t=ns(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ns(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=sn(t);return!t.cRel&&t.cRel!=null&&(r=TBe(r)),!t.rRel&&t.rRel!=null&&(r=BBe(r)),r}function qj(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Is(t.s.c)+":"+(t.e.cRel?"":"$")+Is(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ci(t.s.r)+":"+(t.e.rRel?"":"$")+ci(t.e.r):tb(t.s,e.biff)+":"+tb(t.e,e.biff)}function nD(t){return parseInt(PBe(t),10)-1}function ci(t){return""+(t+1)}function BBe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function PBe(t){return t.replace(/\$(\d+)$/,"$1")}function aD(t){for(var e=kBe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Is(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function TBe(t){return t.replace(/^([A-Z])/,"$$$1")}function kBe(t){return t.replace(/^\$([A-Z])/,"$1")}function FBe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function js(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function sn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function hc(t){var e=t.indexOf(":");return e==-1?{s:js(t),e:js(t)}:{s:js(t.slice(0,e)),e:js(t.slice(e+1))}}function vn(t,e){return typeof e>"u"||typeof e=="number"?vn(t.s,t.e):(typeof t!="string"&&(t=sn(t)),typeof e!="string"&&(e=sn(e)),t==e?t:t+":"+e)}function zn(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function nH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Gu(t.z,r?$i(e):e)}catch{}try{return t.w=Gu((t.XF||{}).numFmtId||(r?14:0),r?$i(e):e)}catch{return""+e}}function LA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?rh[t.v]||t.v:e==null?nH(t,t.v):nH(t,e))}function am(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function cre(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),i=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?js(n.origin):n.origin;i=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=zn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[f].length;++h)if(!(typeof e[f][h]>"u")){var A={v:e[f][h]},m=i+f,p=l+h;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][h]&&typeof e[f][h]=="object"&&!Array.isArray(e[f][h])&&!(e[f][h]instanceof Date))A=e[f][h];else if(Array.isArray(A.v)&&(A.f=e[f][h][1],A.v=A.v[0]),A.v===null)if(A.f)A.t="n";else if(n.nullError)A.t="e",A.v=0;else if(n.sheetStubs)A.t="z";else continue;else typeof A.v=="number"?A.t="n":typeof A.v=="boolean"?A.t="b":A.v instanceof Date?(A.z=n.dateNF||an[14],n.cellDates?(A.t="d",A.w=Gu(A.z,$i(A.v))):(A.t="n",A.v=$i(A.v),A.w=Gu(A.z,A.v))):A.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(A.z=s[m][p].z),s[m][p]=A;else{var g=sn({c:p,r:m});s[g]&&s[g].z&&(A.z=s[g].z),s[g]=A}}}return u.s.c<1e7&&(s["!ref"]=vn(u)),s}function Vv(t,e){return cre(null,t,e)}function OBe(t){return t.read_shift(4,"i")}function Bd(t,e){return e||(e=zt(4)),e.write_shift(4,t),e}function gl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function ho(t,e){var r=!1;return e==null&&(r=!0,e=zt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function DBe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function RBe(t,e){return e||(e=zt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function sD(t,e){var r=t.l,n=t.read_shift(1),a=gl(t),s=[],i={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(DBe(t));i.r=s}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function MBe(t,e){var r=!1;return e==null&&(r=!0,e=zt(15+4*t.t.length)),e.write_shift(1,0),ho(t.t,e),r?e.slice(0,e.l):e}var LBe=sD;function UBe(t,e){var r=!1;return e==null&&(r=!0,e=zt(23+4*t.t.length)),e.write_shift(1,1),ho(t.t,e),e.write_shift(4,1),RBe({},e),r?e.slice(0,e.l):e}function Xu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function sg(t,e){return e==null&&(e=zt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function ig(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function og(t,e){return e==null&&(e=zt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var QBe=gl,ure=ho;function iD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function AS(t,e){var r=!1;return e==null&&(r=!0,e=zt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var VBe=gl,ak=iD,oD=AS;function lD(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?fS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Um(e,0)>>2;return r?a/100:a}function dre(t,e){e==null&&(e=zt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function fre(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function HBe(t,e){return e||(e=zt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var lg=fre,Hv=HBe;function ml(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Fp(t,e){return(e||zt(8)).write_shift(8,t,"f")}function $Be(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),i=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=lp[a];u&&(e.rgb=i2(u));break;case 2:e.rgb=i2([i,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function hS(t,e){if(e||(e=zt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function KBe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function GBe(t,e){e||(e=zt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Are(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function qBe(t){return Are(t,1)}function zBe(t){return Are(t,2)}var cD=2,rc=3,NC=11,aH=12,mS=19,CC=64,WBe=65,XBe=71,YBe=4108,JBe=4126,lo=80,hre=81,ZBe=[lo,hre],sk={1:{n:"CodePage",t:cD},2:{n:"Category",t:lo},3:{n:"PresentationFormat",t:lo},4:{n:"ByteCount",t:rc},5:{n:"LineCount",t:rc},6:{n:"ParagraphCount",t:rc},7:{n:"SlideCount",t:rc},8:{n:"NoteCount",t:rc},9:{n:"HiddenCount",t:rc},10:{n:"MultimediaClipCount",t:rc},11:{n:"ScaleCrop",t:NC},12:{n:"HeadingPairs",t:YBe},13:{n:"TitlesOfParts",t:JBe},14:{n:"Manager",t:lo},15:{n:"Company",t:lo},16:{n:"LinksUpToDate",t:NC},17:{n:"CharacterCount",t:rc},19:{n:"SharedDoc",t:NC},22:{n:"HyperlinksChanged",t:NC},23:{n:"AppVersion",t:rc,p:"version"},24:{n:"DigSig",t:WBe},26:{n:"ContentType",t:lo},27:{n:"ContentStatus",t:lo},28:{n:"Language",t:lo},29:{n:"Version",t:lo},255:{},2147483648:{n:"Locale",t:mS},2147483651:{n:"Behavior",t:mS},1919054434:{}},ik={1:{n:"CodePage",t:cD},2:{n:"Title",t:lo},3:{n:"Subject",t:lo},4:{n:"Author",t:lo},5:{n:"Keywords",t:lo},6:{n:"Comments",t:lo},7:{n:"Template",t:lo},8:{n:"LastAuthor",t:lo},9:{n:"RevNumber",t:lo},10:{n:"EditTime",t:CC},11:{n:"LastPrinted",t:CC},12:{n:"CreatedDate",t:CC},13:{n:"ModifiedDate",t:CC},14:{n:"PageCount",t:rc},15:{n:"WordCount",t:rc},16:{n:"CharCount",t:rc},17:{n:"Thumbnail",t:XBe},18:{n:"Application",t:lo},19:{n:"DocSecurity",t:rc},255:{},2147483648:{n:"Locale",t:mS},2147483651:{n:"Behavior",t:mS},1919054434:{}},sH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},ePe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function tPe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var rPe=tPe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lp=ns(rPe),rh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},mre={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ok={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},_C={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uD(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function nPe(t){var e=uD();if(!t||!t.match)return e;var r={};if((t.match(wl)||[]).forEach(function(n){var a=cn(n);switch(a[0].replace(ABe,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[ok[a.ContentType]]!==void 0&&e[ok[a.ContentType]].push(a.PartName);break}}),e.xmlns!==Li.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function pre(t,e){var r=nBe(ok),n=[],a;n[n.length]=di,n[n.length]=br("Types",null,{xmlns:Li.CT,"xmlns:xsd":Li.xsd,"xmlns:xsi":Li.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return br("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=br("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:_C[c][e.bookType]||_C[c].xlsx}))},i=function(c){(t[c]||[]).forEach(function(u){n[n.length]=br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:_C[c][e.bookType]||_C[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=br("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),i("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Tn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function s2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function rb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(wl)||[]).forEach(function(a){var s=cn(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:wy(s.Target,e);r[l]=i,n[s.Id]=i}}),r["!id"]=n,r}function Lx(t){var e=[di,br("Relationships",null,{xmlns:Li.RELS})];return Gs(t["!id"]).forEach(function(r){e[e.length]=br("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function va(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Tn.HLINK,Tn.XPATH,Tn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var aPe="application/vnd.oasis.opendocument.spreadsheet";function sPe(t,e){for(var r=eD(t),n,a;n=a2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=cn(n[0],!1),a.path=="/"&&a.type!==aPe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function iPe(t){var e=[di];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function iH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function oPe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function lPe(t){var e=[di];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(iH(t[r][0],t[r][1])),e.push(oPe("",t[r][0]));return e.push(iH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function gre(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+oS.version+"</meta:generator></office:meta></office:document-meta>"}var Vu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],cPe=function(){for(var t=new Array(Vu.length),e=0;e<Vu.length;++e){var r=Vu[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function xre(t){var e={};t=ja(t);for(var r=0;r<Vu.length;++r){var n=Vu[r],a=t.match(cPe[r]);a!=null&&a.length>0&&(e[n[1]]=qn(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=rs(e[n[1]]))}return e}function zj(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Na(e),n[n.length]=r?br(t,e,r):Vo(t,e))}function vre(t,e){var r=e||{},n=[di,br("cp:coreProperties",null,{"xmlns:cp":Li.CORE_PROPS,"xmlns:dc":Li.dc,"xmlns:dcterms":Li.dcterms,"xmlns:dcmitype":Li.dcmitype,"xmlns:xsi":Li.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&zj("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:nk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&zj("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:nk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Vu.length;++s){var i=Vu[s],l=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&zj(i[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yre=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function bre(t,e,r,n){var a=[];if(typeof t=="string")a=XV(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var i=typeof e=="string"?XV(e,n).map(function(d){return d.v}):e,l=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(l,l+c);break}l+=c}}function uPe(t,e,r){var n={};return e||(e={}),t=ja(t),cp.forEach(function(a){var s=(t.match(r2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=qn(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var i=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&bre(n.HeadingPairs,n.TitlesOfParts,e,r),e}function wre(t){var e=[],r=br;return t||(t={}),t.Application="SheetJS",e[e.length]=di,e[e.length]=br("Properties",null,{xmlns:Li.EXT_PROPS,"xmlns:vt":Li.vt}),cp.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Na(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Na(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var dPe=/<[^>]+>[^<]*/g;function fPe(t,e){var r={},n="",a=t.match(dPe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],l=cn(i);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=qn(l.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=qn(d);break;case"bool":r[n]=Ja(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=rs(d);break;case"cy":case"error":r[n]=qn(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function Nre(t){var e=[di,br("Properties",null,{xmlns:Li.CUST_PROPS,"xmlns:vt":Li.vt})];if(!t)return e.join("");var r=1;return Gs(t).forEach(function(a){++r,e[e.length]=br("property",bBe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Na(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var lk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Wj;function APe(t,e,r){Wj||(Wj=_4(lk)),e=Wj[e]||e,t[e]=r}function hPe(t,e){var r=[];return Gs(lk).map(function(n){for(var a=0;a<Vu.length;++a)if(Vu[a][1]==n)return Vu[a];for(a=0;a<cp.length;++a)if(cp[a][1]==n)return cp[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Vo(lk[n[1]]||n[1],a))}}),br("DocumentProperties",r.join(""),{xmlns:Dc.o})}function mPe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Gs(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var i=0;i<Vu.length;++i)if(s==Vu[i][1])return;for(i=0;i<cp.length;++i)if(s==cp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(br(GV(s),l,{"dt:dt":c}))}}),e&&Gs(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var i=e[s],l="string";typeof i=="number"?(l="float",i=String(i)):i===!0||i===!1?(l="boolean",i=i?"1":"0"):i instanceof Date?(l="dateTime.tz",i=i.toISOString()):i=String(i),a.push(br(GV(s),i,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Dc.o+'">'+a.join("")+"</"+n+">"}function dD(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function pPe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=zt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Cre(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function _re(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function Ere(t,e,r){return e===31?_re(t):Cre(t,e,r)}function ck(t,e,r){return Ere(t,e,r===!1?0:4)}function gPe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return Ere(t,e,0)}function xPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(Vl,""),t.l-a&2&&(t.l+=2)}return r}function vPe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(Vl,"");return r}function yPe(t){var e=t.l,r=pS(t,hre);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=pS(t,rc);return[r,n]}function bPe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(yPe(t));return r}function oH(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),i=t.read_shift(4);n[s]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(Vl,"").replace(by,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Sre(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function wPe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function pS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==aH&&n!==e&&ZBe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===aH?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return Cre(t,n,4).replace(Vl,"");case 31:return _re(t);case 64:return dD(t);case 65:return Sre(t);case 71:return wPe(t);case 80:return ck(t,n,!s.raw).replace(Vl,"");case 81:return gPe(t,n).replace(Vl,"");case 4108:return bPe(t);case 4126:case 4127:return n==4127?xPe(t):vPe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function lH(t,e){var r=zt(4),n=zt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=zt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=pPe(e);break;case 31:case 80:for(n=zt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return fo([r,n])}function cH(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0,l=0,c=-1,u={};for(i=0;i!=a;++i){var d=t.read_shift(4),f=t.read_shift(4);s[i]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var h={};for(i=0;i!=a;++i){if(t.l!==s[i][1]){var A=!0;if(i>0&&e)switch(e[s[i-1][0]].t){case 2:t.l+2===s[i][1]&&(t.l+=2,A=!1);break;case 80:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break;case 4108:t.l<=s[i][1]&&(t.l=s[i][1],A=!1);break}if((!e||i==0)&&t.l<=s[i][1]&&(A=!1,t.l=s[i][1]),A)throw new Error("Read Error: Expected address "+s[i][1]+" at "+t.l+" :"+i)}if(e){var m=e[s[i][0]];if(h[m.n]=pS(t,m.t,{raw:!0}),m.p==="version"&&(h[m.n]=String(h[m.n]>>16)+"."+("0000"+String(h[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(h[m.n]){case 0:h[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Cd(l=h[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[m.n])}}else if(s[i][0]===1){if(l=h.CodePage=pS(t,cD),Cd(l),c!==-1){var p=t.l;t.l=s[c][1],u=oH(t,l),t.l=p}}else if(s[i][0]===0){if(l===0){c=i,t.l=s[i+1][1];continue}u=oH(t,l)}else{var g=u[s[i][0]],x;switch(t[t.l]){case 65:t.l+=4,x=Sre(t);break;case 30:t.l+=4,x=ck(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,x=ck(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,x=t.read_shift(4,"i");break;case 19:t.l+=4,x=t.read_shift(4);break;case 5:t.l+=4,x=t.read_shift(8,"f");break;case 11:t.l+=4,x=ei(t,4);break;case 64:t.l+=4,x=rs(dD(t));break;default:throw new Error("unparsed value: "+t[t.l])}h[g]=x}}return t.l=r+n,h}var Ire=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function NPe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function uH(t,e,r){var n=zt(8),a=[],s=[],i=8,l=0,c=zt(8),u=zt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!e){u=zt(8),u.write_shift(4,0),a.unshift(u);var d=[zt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=zt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=fo(d),s.unshift(c),i+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(Ire.indexOf(t[l][0])>-1||yre.indexOf(t[l][0])>-1)&&t[l][1]!=null){var h=t[l][1],A=0;if(e){A=+e[t[l][0]];var m=r[A];if(m.p=="version"&&typeof h=="string"){var p=h.split(".");h=(+p[0]<<16)+(+p[1]||0)}c=lH(m.t,h)}else{var g=NPe(h);g==-1&&(g=31,h=String(h)),c=lH(g,h)}s.push(c),u=zt(8),u.write_shift(4,e?A:2+l),a.push(u),i+=8+c.length}var x=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,x),x+=s[l].length;return n.write_shift(4,i),n.write_shift(4,s.length),fo([n].concat(a).concat(s))}function dH(t,e,r){var n=t.content;if(!n)return{};Uo(n,0);var a,s,i,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Yr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=cH(n,e),h={SystemIdentifier:u};for(var A in f)h[A]=f[A];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=cH(n,null)}catch{}for(A in m)h[A]=m[A];return h.FMTID=[s,i],h}function fH(t,e,r,n,a,s){var i=zt(a?68:48),l=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Yr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,a?68:48);var c=uH(t,r,n);if(l.push(c),a){var u=uH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),l.push(u)}return fo(l)}function Rh(t,e){return t.read_shift(e),null}function CPe(t,e){e||(e=zt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function _Pe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function ei(t,e){return t.read_shift(e)===1}function Dl(t,e){return e||(e=zt(2)),e.write_shift(2,+!!t),e}function mi(t){return t.read_shift(2,"u")}function Iu(t,e){return e||(e=zt(2)),e.write_shift(2,t),e}function jre(t,e){return _Pe(t,e,mi)}function EPe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Bre(t,e,r){return r||(r=zt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function lw(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?t.read_shift(n,a):"";return i}function SPe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,l,c={};a&&(i=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*i),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function IPe(t){var e=t.t||"",r=zt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=zt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return fo(a)}function Op(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function cw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Op(t,n,r)}function cg(t,e,r){if(r.biff>5)return cw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Pre(t,e,r){return r||(r=zt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function jPe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function BPe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(Vl,"");return n&&(t.l+=24),a}function PPe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(s>>1,"utf16le").replace(Vl,"");return r+i}function TPe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return BPe(t);case"0303000000000000c000000000000046":return PPe(t);default:throw new Error("Unsupported Moniker "+r)}}function EC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(Vl,""):"";return r}function AH(t,e){e||(e=zt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function kPe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,i,l,c,u="",d,f;a&16&&(s=EC(t,r-t.l)),a&128&&(i=EC(t,r-t.l)),(a&257)===257&&(l=EC(t,r-t.l)),(a&257)===1&&(c=TPe(t,r-t.l)),a&8&&(u=EC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=dD(t)),t.l=r;var h=i||l||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var A={Target:h};return d&&(A.guid=d),f&&(A.time=f),s&&(A.Tooltip=s),A}function FPe(t){var e=zt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(s==28)n=n.slice(1),AH(n,e);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&AH(a>-1?n.slice(a+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Tre(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function kre(t,e){var r=Tre(t);return r[3]=0,r}function Rf(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Dp(t,e,r,n){return n||(n=zt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function OPe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function DPe(t,e,r){return e===0?"":cg(t,e,r)}function RPe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[a,s,i]}function Fre(t){var e=t.read_shift(2),r=lD(t);return[e,r]}function MPe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=lw(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function I4(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function Ore(t,e){return e||(e=zt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function Dre(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var LPe=Dre;function Rre(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function UPe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function QPe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function al(t){t.l+=2,t.l+=t.read_shift(2)}var VPe={0:al,4:al,5:al,6:al,7:QPe,8:al,9:al,10:al,11:al,12:al,13:UPe,14:al,15:al,16:al,17:al,18:al,19:al,20:al,21:Rre};function HPe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(VPe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function SC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function fD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=zt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function $Pe(t,e){return e===0||t.read_shift(2),1200}function KPe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=cg(t,0,r);return t.read_shift(e+n-t.l),a}function GPe(t,e){var r=!e||e.biff==8,n=zt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function qPe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function zPe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=lw(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function WPe(t,e){var r=!e||e.biff>=8?2:1,n=zt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function XPe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],i=0;i!=a&&t.l<r;++i)s.push(SPe(t));return s.Count=n,s.Unique=a,s}function YPe(t,e){var r=zt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=IPe(t[a]);var s=fo([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function JPe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function ZPe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function eTe(t){var e=OPe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function tTe(t){return t.read_shift(2),t.read_shift(4)}function hH(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function rTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:l,Selected:c,TabRatio:u}}function nTe(){var t=zt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function aTe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function sTe(t){var e=zt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function iTe(){}function oTe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=lw(t,0,r),n}function lTe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=zt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function cTe(t){var e=Rf(t);return e.isst=t.read_shift(4),e}function uTe(t,e,r,n){var a=zt(10);return Dp(t,e,n,a),a.write_shift(4,r),a}function dTe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=Rf(t);r.biff==2&&t.l++;var s=cw(t,n-t.l,r);return a.val=s,a}function fTe(t,e,r,n,a){var s=!a||a.biff==8,i=zt(8+ +s+(1+s)*r.length);return Dp(t,e,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function ATe(t,e,r){var n=t.read_shift(2),a=cg(t,0,r);return[n,a]}function hTe(t,e,r,n){var a=r&&r.biff==5;n||(n=zt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var mTe=cg;function mH(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),i=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:i,c}}}function pTe(t,e){var r=e.biff==8||!e.biff?4:2,n=zt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function gTe(t){var e=t.read_shift(2),r=t.read_shift(2),n=Fre(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function xTe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(Fre(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function vTe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function yTe(t,e,r,n){var a={},s=t.read_shift(4),i=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=ePe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function bTe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=yTe(t,e,n.fStyle,r),n}function pH(t,e,r,n){var a=r&&r.biff==5;n||(n=zt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function wTe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function NTe(t){var e=zt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function gH(t,e,r){var n=Rf(t);(r.biff==2||e==9)&&++t.l;var a=EPe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function CTe(t,e,r,n,a,s){var i=zt(8);return Dp(t,e,n,i),Bre(r,s,i),i}function _Te(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Rf(t),a=ml(t);return n.val=a,n}function ETe(t,e,r,n){var a=zt(14);return Dp(t,e,n,a),Fp(r,a),a}var xH=DPe;function STe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=Op(t,s),l=[];n>t.l;)l.push(cw(t));return[s,a,i,l]}function vH(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=MPe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var ITe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function yH(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Op(t,i,r);a&32&&(u=ITe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:H6e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function Mre(t,e,r){if(r.biff<8)return jTe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(RPe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function jTe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=lw(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function BTe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=Op(t,n,r),i=Op(t,a,r);return[s,i]}function PTe(t,e,r){var n=Dre(t);t.l++;var a=t.read_shift(1);return e-=8,[$6e(t,e,r),a,n]}function bH(t,e,r){var n=LPe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,Q6e(t,e,r)]}function TTe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function kTe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),i=t.read_shift(2),l=cg(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,i,s]}}function FTe(t,e,r){return kTe(t,e,r)}function OTe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(I4(t));return r}function DTe(t){var e=zt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)Ore(t[r],e);return e}function RTe(t,e,r){if(r&&r.biff<8)return LTe(t,e,r);var n=Rre(t),a=HPe(t,e-22,n[1]);return{cmo:n,ft:a}}var MTe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function LTe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((MTe[n]||yl)(t,e,r)),{cmo:[a,n,s],ft:i}}function UTe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:i=jPe(t,6,r);var l=t.read_shift(2);t.read_shift(2),mi(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=Op(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function QTe(t,e){var r=I4(t);t.l+=16;var n=kPe(t,e-24);return[r,n]}function VTe(t){var e=zt(24),r=js(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return fo([e,FPe(t[1])])}function HTe(t,e){t.read_shift(2);var r=I4(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(Vl,""),[r,n]}function $Te(t){var e=t[1].Tooltip,r=zt(10+2*(e.length+1));r.write_shift(2,2048);var n=js(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function KTe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=sH[r]||r,r=t.read_shift(2),e[1]=sH[r]||r,e}function GTe(t){return t||(t=zt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function qTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(kre(t));return r}function zTe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(kre(t));return r}function WTe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function Lre(t,e,r){if(!r.cellStyles)return yl(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),i=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:i,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function XTe(t,e){var r=zt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function YTe(t,e){var r={};return e<32||(t.l+=16,r.header=ml(t),r.footer=ml(t),t.l+=2),r}function JTe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function ZTe(t){for(var e=zt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var eke=Rf,tke=jre,rke=cw;function nke(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function ake(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Rf(t);++t.l;var a=cg(t,e-7,r);return n.t="str",n.val=a,n}function ske(t){var e=Rf(t);++t.l;var r=ml(t);return e.t="n",e.val=r,e}function ike(t,e,r){var n=zt(15);return Aw(n,t,e),n.write_shift(8,r,"f"),n}function oke(t){var e=Rf(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function lke(t,e,r){var n=zt(9);return Aw(n,t,e),n.write_shift(2,r),n}function cke(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function uke(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function dke(t,e,r){var n=t.l+e,a=Rf(t),s=t.read_shift(2),i=Op(t,s,r);return t.l=n,a.t="str",a.val=i,a}var fke=[2,3,48,49,131,139,140,245],uk=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=_4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=$0(1);switch(c.type){case"base64":d=Mc(Xc(l));break;case"binary":d=Mc(l);break;case"buffer":case"array":d=l;break}Uo(d,0);var f=d.read_shift(1),h=!!(f&136),A=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:A=!0,h=!0;break;case 49:A=!0,h=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,g=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(g=d.read_shift(2));var x=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:g-10-(A?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=Zb.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!A||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=g-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=g;var _=0,E=0;for(u[0]=[],E=0;E!=b.length;++E)u[0][E]=b[E].name;for(;p-- >0;){if(d[d.l]===42){d.l+=x;continue}for(++d.l,u[++_]=[],E=0,E=0;E!=b.length;++E){var S=d.slice(d.l,d.l+b[E].len);d.l+=b[E].len,Uo(S,0);var O=Zb.utils.decode(y,S);switch(b[E].type){case"C":O.trim().length&&(u[_][E]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[_][E]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[_][E]=O;break;case"F":u[_][E]=parseFloat(O.trim());break;case"+":case"I":u[_][E]=m?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[_][E]=!0;break;case"N":case"F":u[_][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][E]="##MEMO##"+(m?parseInt(O.trim(),10):S.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[_][E]=+O||0);break;case"@":u[_][E]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":u[_][E]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":u[_][E]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][E]=-S.read_shift(-8,"f");break;case"B":if(A&&b[E].len==8){u[_][E]=S.read_shift(8,"f");break}case"G":case"P":S.l+=b[E].len;break;case"0":if(b[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[E].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=Vv(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return am(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(l,c){var u=c||{};if(+u.codepage>=0&&Cd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ac(),f=vS(l,{header:1,raw:!0,cellDates:!0}),h=f[0],A=f.slice(1),m=l["!cols"]||[],p=0,g=0,x=0,y=1;for(p=0;p<h.length;++p){if(((m[p]||{}).DBF||{}).name){h[p]=m[p].DBF.name,++x;continue}if(h[p]!=null){if(++x,typeof h[p]=="number"&&(h[p]=h[p].toString(10)),typeof h[p]!="string")throw new Error("DBF Invalid column name "+h[p]+" |"+typeof h[p]+"|");if(h.indexOf(h[p])!==p){for(g=0;g<1024;++g)if(h.indexOf(h[p]+"_"+g)==-1){h[p]+="_"+g;break}}}}var b=zn(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",E="",S=0,O=[];for(g=0;g<A.length;++g)A[g][p]!=null&&O.push(A[g][p]);if(O.length==0||h[p]==null){w[p]="?";continue}for(g=0;g<O.length;++g){switch(typeof O[g]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=O[g]instanceof Date?"D":"C";break;default:E="C"}S=Math.max(S,String(O[g]).length),_=_&&_!=E?"C":E}S>250&&(S=250),E=((m[p]||{}).DBF||{}).type,E=="C"&&m[p].DBF.len>S&&(S=m[p].DBF.len),_=="B"&&E=="N"&&(_="N",I[p]=m[p].DBF.dec,S=m[p].DBF.len),j[p]=_=="C"||E=="N"?S:s[_]||0,y+=j[p],w[p]=_}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,A.length),P.write_shift(2,296+32*x),P.write_shift(2,y),p=0;p<4;++p)P.write_shift(4,0);for(P.write_shift(4,0|(+e[Ite]||3)<<8),p=0,g=0;p<h.length;++p)if(h[p]!=null){var T=d.next(32),F=(h[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);T.write_shift(1,F,"sbcs"),T.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),T.write_shift(4,g),T.write_shift(1,j[p]||s[w[p]]||0),T.write_shift(1,I[p]||0),T.write_shift(1,2),T.write_shift(4,0),T.write_shift(1,0),T.write_shift(4,0),T.write_shift(4,0),g+=j[p]||s[w[p]]||0}var J=d.next(264);for(J.write_shift(4,13),p=0;p<65;++p)J.write_shift(4,0);for(p=0;p<A.length;++p){var ge=d.next(y);for(ge.write_shift(1,0),g=0;g<h.length;++g)if(h[g]!=null)switch(w[g]){case"L":ge.write_shift(1,A[p][g]==null?63:A[p][g]?84:70);break;case"B":ge.write_shift(8,A[p][g]||0,"f");break;case"N":var le="0";for(typeof A[p][g]=="number"&&(le=A[p][g].toFixed(I[g]||0)),x=0;x<j[g]-le.length;++x)ge.write_shift(1,32);ge.write_shift(1,le,"sbcs");break;case"D":A[p][g]?(ge.write_shift(4,("0000"+A[p][g].getFullYear()).slice(-4),"sbcs"),ge.write_shift(2,("00"+(A[p][g].getMonth()+1)).slice(-2),"sbcs"),ge.write_shift(2,("00"+A[p][g].getDate()).slice(-2),"sbcs")):ge.write_shift(8,"00000000","sbcs");break;case"C":var de=String(A[p][g]!=null?A[p][g]:"").slice(0,j[g]);for(ge.write_shift(1,de,"sbcs"),x=0;x<j[g]-de.length;++x)ge.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),Ure=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Gs(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,A){var m=t[A];return typeof m=="number"?TV(m):m},n=function(h,A,m){var p=A.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?h:TV(p)};t["|"]=254;function a(h,A){switch(A.type){case"base64":return s(Xc(h),A);case"binary":return s(h,A);case"buffer":return s(Sn&&Buffer.isBuffer(h)?h.toString("binary"):nm(h),A);case"array":return s(kp(h),A)}throw new Error("Unrecognized type "+A.type)}function s(h,A){var m=h.split(/[\n\r]+/),p=-1,g=-1,x=0,y=0,b=[],w=[],j=null,I={},_=[],E=[],S=[],O=0,P;for(+A.codepage>=0&&Cd(+A.codepage);x!==m.length;++x){O=0;var T=m[x].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),F=T.replace(/;;/g,"\0").split(";").map(function(M){return M.replace(/\u0000/g,";")}),J=F[0],ge;if(T.length>0)switch(J){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&w.push(T.slice(3).replace(/;;/g,";"));break;case"C":var le=!1,de=!1,Ae=!1,se=!1,Ie=-1,Pe=-1;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"A":break;case"X":g=parseInt(F[y].slice(1))-1,de=!0;break;case"Y":for(p=parseInt(F[y].slice(1))-1,de||(g=0),P=b.length;P<=p;++P)b[P]=[];break;case"K":ge=F[y].slice(1),ge.charAt(0)==='"'?ge=ge.slice(1,ge.length-1):ge==="TRUE"?ge=!0:ge==="FALSE"?ge=!1:isNaN(jd(ge))?isNaN(cv(ge).getDate())||(ge=rs(ge)):(ge=jd(ge),j!==null&&Uv(j)&&(ge=S4(ge))),le=!0;break;case"E":se=!0;var k=Ux(F[y].slice(1),{r:p,c:g});b[p][g]=[b[p][g],k];break;case"S":Ae=!0,b[p][g]=[b[p][g],"S5S"];break;case"G":break;case"R":Ie=parseInt(F[y].slice(1))-1;break;case"C":Pe=parseInt(F[y].slice(1))-1;break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}if(le&&(b[p][g]&&b[p][g].length==2?b[p][g][0]=ge:b[p][g]=ge,j=null),Ae){if(se)throw new Error("SYLK shared formula cannot have own formula");var H=Ie>-1&&b[Ie][Pe];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");b[p][g][1]=ane(H[1],{r:p-Ie,c:g-Pe})}break;case"F":var R=0;for(y=1;y<F.length;++y)switch(F[y].charAt(0)){case"X":g=parseInt(F[y].slice(1))-1,++R;break;case"Y":for(p=parseInt(F[y].slice(1))-1,P=b.length;P<=p;++P)b[P]=[];break;case"M":O=parseInt(F[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(F[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=F[y].slice(1).split(" "),P=parseInt(S[0],10);P<=parseInt(S[1],10);++P)O=parseInt(S[2],10),E[P-1]=O===0?{hidden:!0}:{wch:O},K0(E[P-1]);break;case"C":g=parseInt(F[y].slice(1))-1,E[g]||(E[g]={});break;case"R":p=parseInt(F[y].slice(1))-1,_[p]||(_[p]={}),O>0?(_[p].hpt=O,_[p].hpx=dv(O)):O===0&&(_[p].hidden=!0);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}R<1&&(j=null);break;default:if(A&&A.WTF)throw new Error("SYLK bad record "+T)}}return _.length>0&&(I["!rows"]=_),E.length>0&&(I["!cols"]=E),A&&A.sheetRows&&(b=b.slice(0,A.sheetRows)),[b,I]}function i(h,A){var m=a(h,A),p=m[0],g=m[1],x=Vv(p,A);return Gs(g).forEach(function(y){x[y]=g[y]}),x}function l(h,A){return am(i(h,A),A)}function c(h,A,m,p){var g="C;Y"+(m+1)+";X"+(p+1)+";K";switch(h.t){case"n":g+=h.v||0,h.f&&!h.F&&(g+=";E"+xD(h.f,{r:m,c:p}));break;case"b":g+=h.v?"TRUE":"FALSE";break;case"e":g+=h.w||h.v;break;case"d":g+='"'+(h.w||h.v)+'"';break;case"s":g+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(h,A){A.forEach(function(m,p){var g="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?g+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=o2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=l2(m.wpx)),typeof m.wch=="number"&&(g+=Math.round(m.wch))),g.charAt(g.length-1)!=" "&&h.push(g)})}function d(h,A){A.forEach(function(m,p){var g="F;";m.hidden?g+="M0;":m.hpt?g+="M"+20*m.hpt+";":m.hpx&&(g+="M"+20*c2(m.hpx)+";"),g.length>2&&h.push(g+"R"+(p+1))})}function f(h,A){var m=["ID;PWXL;N;E"],p=[],g=zn(h["!ref"]),x,y=Array.isArray(h),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),h["!cols"]&&u(m,h["!cols"]),h["!rows"]&&d(m,h["!rows"]),m.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var j=g.s.c;j<=g.e.c;++j){var I=sn({r:w,c:j});x=y?(h[w]||[])[j]:h[I],!(!x||x.v==null&&(!x.f||x.F))&&p.push(c(x,h,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),Qre=function(){function t(s,i){switch(i.type){case"base64":return e(Xc(s),i);case"binary":return e(s,i);case"buffer":return e(Sn&&Buffer.isBuffer(s)?s.toString("binary"):nm(s),i);case"array":return e(kp(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=l[d].trim().split(","),A=h[0],m=h[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+A){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(jd(m))?isNaN(cv(m).getDate())?f[c][u]=m:f[c][u]=rs(m):f[c][u]=jd(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return Vv(t(s,i),i)}function n(s,i){return am(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=zn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var A=d.s.r;A<=d.e.r;++A){i(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=sn({r:A,c:m});if(f=h?(c[A]||[])[m]:c[p],!f){i(u,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,g,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Gu(f.z||an[14],$i(rs(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var x=`\r
`,y=u.join(x);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),Vre=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var A=f.split(`
`),m=-1,p=-1,g=0,x=[];g!==A.length;++g){var y=A[g].trim().split(":");if(y[0]==="cell"){var b=js(y[1]);if(x.length<=b.r)for(m=x.length;m<=b.r;++m)x[m]||(x[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":x[m][p]=t(y[3]);break;case"v":x[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":x[m][p]=!!+y[4];break;default:x[m][p]=+y[4];break}y[2]=="vtf"&&(x[m][p]=[x[m][p],w])}}}return h&&h.sheetRows&&(x=x.slice(0,h.sheetRows)),x}function n(f,h){return Vv(r(f,h),h)}function a(f,h){return am(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],A=[],m,p="",g=hc(f["!ref"]),x=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var b=g.s.c;b<=g.e.c;++b)if(p=sn({r:y,c:b}),m=x?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(A=["cell",p,"t"],m.t){case"s":case"str":A.push(e(m.v));break;case"n":m.f?(A[2]="vtf",A[3]="n",A[4]=m.v,A[5]=e(m.f)):(A[2]="v",A[3]=m.v);break;case"b":A[2]="vt"+(m.f?"f":"c"),A[3]="nl",A[4]=m.v?"1":"0",A[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=$i(rs(m.v));A[2]="vtc",A[3]="nd",A[4]=""+w,A[5]=m.w||Gu(m.z||an[14],w);break;case"e":continue}h.push(A.join(":"))}return h.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,l,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),uv=function(){function t(d,f,h,A,m){m.raw?f[h][A]=d:d===""||(d==="TRUE"?f[h][A]=!0:d==="FALSE"?f[h][A]=!1:isNaN(jd(d))?isNaN(cv(d).getDate())?f[h][A]=d:f[h][A]=rs(d):f[h][A]=jd(d))}function e(d,f){var h=f||{},A=[];if(!d||d.length===0)return A;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var g=10,x=0,y=0;y<=p;++y)x=m[y].indexOf(" "),x==-1?x=m[y].length:x++,g=Math.max(g,x);for(y=0;y<=p;++y){A[y]=[];var b=0;for(t(m[y].slice(0,g).trim(),A,y,b,h),b=1;b<=(m[y].length-g)/10+1;++b)t(m[y].slice(g+(b-1)*10,g+b*10).trim(),A,y,b,h)}return h.sheetRows&&(A=A.slice(0,h.sheetRows)),A}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,A=0,m=0;A<d.length;++A)(m=d.charCodeAt(A))==34?h=!h:!h&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A]);if(!m.length){f=n;for(A in f)Object.prototype.hasOwnProperty.call(f,A)&&m.push([f[A],A])}return m.sort(function(p,g){return p[0]-g[0]||n[p[1]]-n[g[1]]}),r[m.pop()[1]]||44}function s(d,f){var h=f||{},A="",m=h.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(A=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(A=d.charAt(4),d=d.slice(6)):A=a(d.slice(0,1024)):h&&h.FS?A=h.FS:A=a(d.slice(0,1024));var g=0,x=0,y=0,b=0,w=0,j=A.charCodeAt(0),I=!1,_=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var S=h.dateNF!=null?Jje(h.dateNF):null;function O(){var P=d.slice(b,w),T={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)T.t="z";else if(h.raw)T.t="s",T.v=P;else if(P.trim().length===0)T.t="s",T.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(T.t="s",T.v=P.slice(2,-1).replace(/""/g,'"')):SOe(P)?(T.t="n",T.f=P.slice(1)):(T.t="s",T.v=P);else if(P=="TRUE")T.t="b",T.v=!0;else if(P=="FALSE")T.t="b",T.v=!1;else if(!isNaN(y=jd(P)))T.t="n",h.cellText!==!1&&(T.w=P),T.v=y;else if(!isNaN(cv(P).getDate())||S&&P.match(S)){T.z=h.dateNF||an[14];var F=0;S&&P.match(S)&&(P=Zje(P,h.dateNF,P.match(S)||[]),F=1),h.cellDates?(T.t="d",T.v=rs(P,F)):(T.t="n",T.v=$i(rs(P,F))),h.cellText!==!1&&(T.w=Gu(T.z,T.v instanceof Date?$i(T.v):T.v)),h.cellNF||delete T.z}else T.t="s",T.v=P;if(T.t=="z"||(h.dense?(m[g]||(m[g]=[]),m[g][x]=T):m[sn({c:x,r:g})]=T),b=w+1,E=d.charCodeAt(b),p.e.c<x&&(p.e.c=x),p.e.r<g&&(p.e.r=g),_==j)++x;else if(x=0,++g,h.sheetRows&&h.sheetRows<=g)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:E===34&&(I=!I);break;case j:case 10:case 13:if(!I&&O())break e;break}return w-b>0&&O(),m["!ref"]=vn(p),m}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):Vv(e(d,f),f)}function l(d,f){var h="",A=f.type=="string"?[0,0,0,0]:ED(d,f);switch(f.type){case"base64":h=Xc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Zb<"u"||(h=Sn&&Buffer.isBuffer(d)?d.toString("binary"):nm(d));break;case"array":h=kp(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return A[0]==239&&A[1]==187&&A[2]==191?h=ja(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ja(h):f.type=="binary"&&typeof Zb<"u",h.slice(0,19)=="socialcalc:version:"?Vre.to_sheet(f.type=="string"?h:ja(h),f):i(h,f)}function c(d,f){return am(l(d,f),f)}function u(d){for(var f=[],h=zn(d["!ref"]),A,m=Array.isArray(d),p=h.s.r;p<=h.e.r;++p){for(var g=[],x=h.s.c;x<=h.e.c;++x){var y=sn({r:p,c:x});if(A=m?(d[p]||[])[x]:d[y],!A||A.v==null){g.push("          ");continue}for(var b=(A.w||(LA(A),A.w)||"").slice(0,10);b.length<10;)b+=" ";g.push(b+(x===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function Ake(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=Ure.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return uv.to_workbook(t,e)}}var up=function(){function t(k,H,R){if(k){Uo(k,k.l||0);for(var M=R.Enum||Ie;k.l<k.length;){var G=k.read_shift(2),X=M[G]||M[65535],D=k.read_shift(2),Q=k.l+D,te=X.f&&X.f(k,D,R);if(k.l=Q,H(te,X,G))return}}}function e(k,H){switch(H.type){case"base64":return r(Mc(Xc(k)),H);case"binary":return r(Mc(k),H);case"buffer":case"array":return r(k,H)}throw"Unsupported type "+H.type}function r(k,H){if(!k)return k;var R=H||{},M=R.dense?[]:{},G="Sheet1",X="",D=0,Q={},te=[],me=[],L={s:{r:0,c:0},e:{r:0,c:0}},he=R.sheetRows||0;if(k[2]==0&&(k[3]==8||k[3]==9)&&k.length>=16&&k[14]==5&&k[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(k[2]==2)R.Enum=Ie,t(k,function(K,oe,xe){switch(xe){case 0:R.vers=K,K>=4096&&(R.qpro=!0);break;case 6:L=K;break;case 204:K&&(X=K);break;case 222:X=K;break;case 15:case 51:R.qpro||(K[1].v=K[1].v.slice(1));case 13:case 14:case 16:xe==14&&(K[2]&112)==112&&(K[2]&15)>1&&(K[2]&15)<15&&(K[1].z=R.dateNF||an[14],R.cellDates&&(K[1].t="d",K[1].v=S4(K[1].v))),R.qpro&&K[3]>D&&(M["!ref"]=vn(L),Q[G]=M,te.push(G),M=R.dense?[]:{},L={s:{r:0,c:0},e:{r:0,c:0}},D=K[3],G=X||"Sheet"+(D+1),X="");var De=R.dense?(M[K[0].r]||[])[K[0].c]:M[sn(K[0])];if(De){De.t=K[1].t,De.v=K[1].v,K[1].z!=null&&(De.z=K[1].z),K[1].f!=null&&(De.f=K[1].f);break}R.dense?(M[K[0].r]||(M[K[0].r]=[]),M[K[0].r][K[0].c]=K[1]):M[sn(K[0])]=K[1];break}},R);else if(k[2]==26||k[2]==14)R.Enum=Pe,k[2]==14&&(R.qpro=!0,k.l=0),t(k,function(K,oe,xe){switch(xe){case 204:G=K;break;case 22:K[1].v=K[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(K[3]>D&&(M["!ref"]=vn(L),Q[G]=M,te.push(G),M=R.dense?[]:{},L={s:{r:0,c:0},e:{r:0,c:0}},D=K[3],G="Sheet"+(D+1)),he>0&&K[0].r>=he)break;R.dense?(M[K[0].r]||(M[K[0].r]=[]),M[K[0].r][K[0].c]=K[1]):M[sn(K[0])]=K[1],L.e.c<K[0].c&&(L.e.c=K[0].c),L.e.r<K[0].r&&(L.e.r=K[0].r);break;case 27:K[14e3]&&(me[K[14e3][0]]=K[14e3][1]);break;case 1537:me[K[0]]=K[1],K[0]==D&&(G=K[1]);break}},R);else throw new Error("Unrecognized LOTUS BOF "+k[2]);if(M["!ref"]=vn(L),Q[X||G]=M,te.push(X||G),!me.length)return{SheetNames:te,Sheets:Q};for(var ne={},z=[],ce=0;ce<me.length;++ce)Q[te[ce]]?(z.push(me[ce]||te[ce]),ne[me[ce]]=Q[me[ce]]||Q[te[ce]]):(z.push(me[ce]),ne[me[ce]]={"!ref":"A1"});return{SheetNames:z,Sheets:ne}}function n(k,H){var R=H||{};if(+R.codepage>=0&&Cd(+R.codepage),R.type=="string")throw new Error("Cannot write WK1 to JS string");var M=Ac(),G=zn(k["!ref"]),X=Array.isArray(k),D=[];wr(M,0,s(1030)),wr(M,6,c(G));for(var Q=Math.min(G.e.r,8191),te=G.s.r;te<=Q;++te)for(var me=ci(te),L=G.s.c;L<=G.e.c;++L){te===G.s.r&&(D[L]=Is(L));var he=D[L]+me,ne=X?(k[te]||[])[L]:k[he];if(!(!ne||ne.t=="z"))if(ne.t=="n")(ne.v|0)==ne.v&&ne.v>=-32768&&ne.v<=32767?wr(M,13,A(te,L,ne.v)):wr(M,14,p(te,L,ne.v));else{var z=LA(ne);wr(M,15,f(te,L,z.slice(0,239)))}}return wr(M,1),M.end()}function a(k,H){var R=H||{};if(+R.codepage>=0&&Cd(+R.codepage),R.type=="string")throw new Error("Cannot write WK3 to JS string");var M=Ac();wr(M,0,i(k));for(var G=0,X=0;G<k.SheetNames.length;++G)(k.Sheets[k.SheetNames[G]]||{})["!ref"]&&wr(M,27,se(k.SheetNames[G],X++));var D=0;for(G=0;G<k.SheetNames.length;++G){var Q=k.Sheets[k.SheetNames[G]];if(!(!Q||!Q["!ref"])){for(var te=zn(Q["!ref"]),me=Array.isArray(Q),L=[],he=Math.min(te.e.r,8191),ne=te.s.r;ne<=he;++ne)for(var z=ci(ne),ce=te.s.c;ce<=te.e.c;++ce){ne===te.s.r&&(L[ce]=Is(ce));var K=L[ce]+z,oe=me?(Q[ne]||[])[ce]:Q[K];if(!(!oe||oe.t=="z"))if(oe.t=="n")wr(M,23,O(ne,ce,D,oe.v));else{var xe=LA(oe);wr(M,22,_(ne,ce,D,xe.slice(0,239)))}}++D}}return wr(M,1),M.end()}function s(k){var H=zt(2);return H.write_shift(2,k),H}function i(k){var H=zt(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var R=0,M=0,G=0,X=0;X<k.SheetNames.length;++X){var D=k.SheetNames[X],Q=k.Sheets[D];if(!(!Q||!Q["!ref"])){++G;var te=hc(Q["!ref"]);R<te.e.r&&(R=te.e.r),M<te.e.c&&(M=te.e.c)}}return R>8191&&(R=8191),H.write_shift(2,R),H.write_shift(1,G),H.write_shift(1,M),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function l(k,H,R){var M={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&R.qpro?(M.s.c=k.read_shift(1),k.l++,M.s.r=k.read_shift(2),M.e.c=k.read_shift(1),k.l++,M.e.r=k.read_shift(2),M):(M.s.c=k.read_shift(2),M.s.r=k.read_shift(2),H==12&&R.qpro&&(k.l+=2),M.e.c=k.read_shift(2),M.e.r=k.read_shift(2),H==12&&R.qpro&&(k.l+=2),M.s.c==65535&&(M.s.c=M.e.c=M.s.r=M.e.r=0),M)}function c(k){var H=zt(8);return H.write_shift(2,k.s.c),H.write_shift(2,k.s.r),H.write_shift(2,k.e.c),H.write_shift(2,k.e.r),H}function u(k,H,R){var M=[{c:0,r:0},{t:"n",v:0},0,0];return R.qpro&&R.vers!=20768?(M[0].c=k.read_shift(1),M[3]=k.read_shift(1),M[0].r=k.read_shift(2),k.l+=2):(M[2]=k.read_shift(1),M[0].c=k.read_shift(2),M[0].r=k.read_shift(2)),M}function d(k,H,R){var M=k.l+H,G=u(k,H,R);if(G[1].t="s",R.vers==20768){k.l++;var X=k.read_shift(1);return G[1].v=k.read_shift(X,"utf8"),G}return R.qpro&&k.l++,G[1].v=k.read_shift(M-k.l,"cstr"),G}function f(k,H,R){var M=zt(7+R.length);M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,k),M.write_shift(1,39);for(var G=0;G<M.length;++G){var X=R.charCodeAt(G);M.write_shift(1,X>=128?95:X)}return M.write_shift(1,0),M}function h(k,H,R){var M=u(k,H,R);return M[1].v=k.read_shift(2,"i"),M}function A(k,H,R){var M=zt(7);return M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,k),M.write_shift(2,R,"i"),M}function m(k,H,R){var M=u(k,H,R);return M[1].v=k.read_shift(8,"f"),M}function p(k,H,R){var M=zt(13);return M.write_shift(1,255),M.write_shift(2,H),M.write_shift(2,k),M.write_shift(8,R,"f"),M}function g(k,H,R){var M=k.l+H,G=u(k,H,R);if(G[1].v=k.read_shift(8,"f"),R.qpro)k.l=M;else{var X=k.read_shift(2);w(k.slice(k.l,k.l+X),G),k.l+=X}return G}function x(k,H,R){var M=H&32768;return H&=-32769,H=(M?k:0)+(H>=8192?H-16384:H),(M?"":"$")+(R?Is(H):ci(H))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(k,H){Uo(k,0);for(var R=[],M=0,G="",X="",D="",Q="";k.l<k.length;){var te=k[k.l++];switch(te){case 0:R.push(k.read_shift(8,"f"));break;case 1:X=x(H[0].c,k.read_shift(2),!0),G=x(H[0].r,k.read_shift(2),!1),R.push(X+G);break;case 2:{var me=x(H[0].c,k.read_shift(2),!0),L=x(H[0].r,k.read_shift(2),!1);X=x(H[0].c,k.read_shift(2),!0),G=x(H[0].r,k.read_shift(2),!1),R.push(me+L+":"+X+G)}break;case 3:if(k.l<k.length){console.error("WK1 premature formula end");return}break;case 4:R.push("("+R.pop()+")");break;case 5:R.push(k.read_shift(2));break;case 6:{for(var he="";te=k[k.l++];)he+=String.fromCharCode(te);R.push('"'+he.replace(/"/g,'""')+'"')}break;case 8:R.push("-"+R.pop());break;case 23:R.push("+"+R.pop());break;case 22:R.push("NOT("+R.pop()+")");break;case 20:case 21:Q=R.pop(),D=R.pop(),R.push(["AND","OR"][te-20]+"("+D+","+Q+")");break;default:if(te<32&&b[te])Q=R.pop(),D=R.pop(),R.push(D+b[te]+Q);else if(y[te]){if(M=y[te][1],M==69&&(M=k[k.l++]),M>R.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+R.join("|")+"|");return}var ne=R.slice(-M);R.length-=M,R.push(y[te][0]+"("+ne.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}R.length==1?H[1].f=""+R[0]:console.error("WK1 bad formula parse |"+R.join("|")+"|")}function j(k){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=k.read_shift(2),H[3]=k[k.l++],H[0].c=k[k.l++],H}function I(k,H){var R=j(k);return R[1].t="s",R[1].v=k.read_shift(H-4,"cstr"),R}function _(k,H,R,M){var G=zt(6+M.length);G.write_shift(2,k),G.write_shift(1,R),G.write_shift(1,H),G.write_shift(1,39);for(var X=0;X<M.length;++X){var D=M.charCodeAt(X);G.write_shift(1,D>=128?95:D)}return G.write_shift(1,0),G}function E(k,H){var R=j(k);R[1].v=k.read_shift(2);var M=R[1].v>>1;if(R[1].v&1)switch(M&7){case 0:M=(M>>3)*5e3;break;case 1:M=(M>>3)*500;break;case 2:M=(M>>3)/20;break;case 3:M=(M>>3)/200;break;case 4:M=(M>>3)/2e3;break;case 5:M=(M>>3)/2e4;break;case 6:M=(M>>3)/16;break;case 7:M=(M>>3)/64;break}return R[1].v=M,R}function S(k,H){var R=j(k),M=k.read_shift(4),G=k.read_shift(4),X=k.read_shift(2);if(X==65535)return M===0&&G===3221225472?(R[1].t="e",R[1].v=15):M===0&&G===3489660928?(R[1].t="e",R[1].v=42):R[1].v=0,R;var D=X&32768;return X=(X&32767)-16446,R[1].v=(1-D*2)*(G*Math.pow(2,X+32)+M*Math.pow(2,X)),R}function O(k,H,R,M){var G=zt(14);if(G.write_shift(2,k),G.write_shift(1,R),G.write_shift(1,H),M==0)return G.write_shift(4,0),G.write_shift(4,0),G.write_shift(2,65535),G;var X=0,D=0,Q=0,te=0;return M<0&&(X=1,M=-M),D=Math.log2(M)|0,M/=Math.pow(2,D-31),te=M>>>0,te&2147483648||(M/=2,++D,te=M>>>0),M-=te,te|=2147483648,te>>>=0,M*=Math.pow(2,32),Q=M>>>0,G.write_shift(4,Q),G.write_shift(4,te),D+=16383+(X?32768:0),G.write_shift(2,D),G}function P(k,H){var R=S(k);return k.l+=H-14,R}function T(k,H){var R=j(k),M=k.read_shift(4);return R[1].v=M>>6,R}function F(k,H){var R=j(k),M=k.read_shift(8,"f");return R[1].v=M,R}function J(k,H){var R=F(k);return k.l+=H-10,R}function ge(k,H){return k[k.l+H-1]==0?k.read_shift(H,"cstr"):""}function le(k,H){var R=k[k.l++];R>H-1&&(R=H-1);for(var M="";M.length<R;)M+=String.fromCharCode(k[k.l++]);return M}function de(k,H,R){if(!(!R.qpro||H<21)){var M=k.read_shift(1);k.l+=17,k.l+=1,k.l+=2;var G=k.read_shift(H-21,"cstr");return[M,G]}}function Ae(k,H){for(var R={},M=k.l+H;k.l<M;){var G=k.read_shift(2);if(G==14e3){for(R[G]=[0,""],R[G][0]=k.read_shift(2);k[k.l];)R[G][1]+=String.fromCharCode(k[k.l]),k.l++;k.l++}}return R}function se(k,H){var R=zt(5+k.length);R.write_shift(2,14e3),R.write_shift(2,H);for(var M=0;M<k.length;++M){var G=k.charCodeAt(M);R[R.l++]=G>127?95:G}return R[R.l++]=0,R}var Ie={0:{n:"BOF",f:mi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ge},222:{n:"SHEETNAMELP",f:le},65535:{n:""}},Pe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:T},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:J},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ge},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:de},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function hke(t){var e={},r=t.match(wl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=cn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=H6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var mke=function(){var t=r2("t"),e=r2("rPr");function r(s){var i=s.match(t);if(!i)return{t:"s",v:""};var l={t:"s",v:qn(i[1])},c=s.match(e);return c&&(l.s=hke(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),pke=function(){var e=/(\r\n|\n)/g;function r(a,s,i){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),gke=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,xke=/<(?:\w+:)?r>/,vke=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function AD(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=qn(ja(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ja(t),r&&(n.h=Z6(n.t))):t.match(xke)&&(n.r=ja(t),n.t=qn(ja((t.replace(vke,"").match(gke)||[]).join("").replace(wl,""))),r&&(n.h=pke(mke(n.r)))),n):{t:""}}var yke=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,bke=/<(?:\w+:)?(?:si|sstItem)>/g,wke=/<\/(?:\w+:)?(?:si|sstItem)>/;function Nke(t,e){var r=[],n="";if(!t)return r;var a=t.match(yke);if(a){n=a[2].replace(bke,"").split(wke);for(var s=0;s!=n.length;++s){var i=AD(n[s].trim(),e);i!=null&&(r[r.length]=i)}a=cn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var Cke=/^\s|\s$|[\t\n\r]/;function Hre(t,e){if(!e.bookSST)return"";var r=[di];r[r.length]=br("sst",null,{xmlns:ag[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Cke)&&(s+=' xml:space="preserve"'),s+=">"+Na(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function _ke(t){return[t.read_shift(4),t.read_shift(4)]}function Eke(t,e){var r=[],n=!1;return th(t,function(s,i,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Ske(t,e){return e||(e=zt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Ike=MBe;function jke(t){var e=Ac();or(e,159,Ske(t));for(var r=0;r<t.length;++r)or(e,19,Ike(t[r]));return or(e,160),e.end()}function $re(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function IA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function Bke(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=IA(t,4),e.U=IA(t,4),e.W=IA(t,4),e}function Pke(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function Tke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(Pke(t));return e}function kke(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function Fke(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=IA(t,4),e.U=IA(t,4),e.W=IA(t,4),e}function Oke(t){var e=Fke(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function Kre(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Gre(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function Dke(t){var e=IA(t);switch(e.Minor){case 2:return[e.Minor,Rke(t)];case 3:return[e.Minor,Mke()];case 4:return[e.Minor,Lke(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function Rke(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=Kre(t,r),a=Gre(t,t.length-t.l);return{t:"Std",h:n,v:a}}function Mke(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Lke(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(wl,function(s){var i=cn(s);switch(Df(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=i[l]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Uke(t,e){var r={},n=r.EncryptionVersionInfo=IA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=Kre(t,a),e-=a,r.EncryptionVerifier=Gre(t,e),r}function Qke(t){var e={},r=e.EncryptionVersionInfo=IA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function hD(t){var e=0,r,n=$re(t),a=n.length+1,s,i,l,c,u;for(r=$0(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^i;return e^52811}var qre=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,l){return n(i^l)},s=function(i){for(var l=e[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(i){for(var l=$re(i),c=s(l),u=l.length,d=$0(16),f=0;f!=16;++f)d[f]=0;var h,A,m;for((u&1)===1&&(h=c>>8,d[u]=a(t[0],h),--u,h=c&255,A=l[l.length-1],d[u]=a(A,h));u>0;)--u,h=c>>8,d[u]=a(l[u],h),--u,h=c&255,d[u]=a(l[u],h);for(u=15,m=15-l.length;m>0;)h=c>>8,d[u]=a(t[m],h),--u,--m,h=c&255,d[u]=a(l[u],h),--u,--m;return d}}(),Vke=function(t,e,r,n,a){a||(a=e),n||(n=qre(t));var s,i;for(s=0;s!=e.length;++s)i=e[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},Hke=function(t){var e=0,r=qre(t);return function(n){var a=Vke("",n,e,r);return e=a[1],a[0]}};function $ke(t,e,r,n){var a={key:mi(t),verificationBytes:mi(t)};return r.password&&(a.verifier=hD(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Hke(r.password)),a}function Kke(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=Qke(t):n.Data=Uke(t,e),n}function Gke(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?Kke(t,e-2,n):$ke(t,r.biff>=8?e:e-2,r,n),n}var zre=function(){function t(a,s){switch(s.type){case"base64":return e(Xc(a),s);case"binary":return e(a,s);case"buffer":return e(Sn&&Buffer.isBuffer(a)?a.toString("binary"):nm(a),s);case"array":return e(kp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var i=s||{},l=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var h=/\\\w+\b/g,A=0,m,p=-1;m=h.exec(d);){switch(m[0]){case"\\cell":var g=d.slice(A,h.lastIndex-m[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var x={v:g,t:"s"};Array.isArray(l)?l[f][p]=x:l[sn({r:f,c:p})]=x}break}A=h.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=vn(u),l}function r(a,s){return am(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=zn(a["!ref"]),l,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=sn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(LA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function qke(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function i2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function zke(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),i=a-s;if(i===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case e:l=((r-n)/i+6)%6;break;case r:l=(n-e)/i+2;break;case n:l=(e-r)/i+4;break}return[l/6,c,u/2]}function Wke(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-l),i[0]+=c,i[1]+=a;break;case 2:c=a*(l-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-l),i[1]+=c,i[2]+=a;break;case 4:c=a*(l-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-l),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function gS(t,e){if(e===0)return t;var r=zke(qke(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),i2(Wke(r))}var Wre=6,Xke=15,Yke=1,hl=Wre;function o2(t){return Math.floor((t+Math.round(128/hl)/256)*hl)}function l2(t){return Math.floor((t-5)/hl*100+.5)/100}function xS(t){return Math.round((t*hl+5)/hl*256)/256}function Xj(t){return xS(l2(o2(t)))}function mD(t){var e=Math.abs(t-Xj(t)),r=hl;if(e>.005)for(hl=Yke;hl<Xke;++hl)Math.abs(t-Xj(t))<=e&&(e=Math.abs(t-Xj(t)),r=hl);hl=r}function K0(t){t.width?(t.wpx=o2(t.width),t.wch=l2(t.wpx),t.MDW=hl):t.wpx?(t.wch=l2(t.wpx),t.width=xS(t.wch),t.MDW=hl):typeof t.wch=="number"&&(t.width=xS(t.wch),t.wpx=o2(t.width),t.MDW=hl),t.customWidth&&delete t.customWidth}var Jke=96,Xre=Jke;function c2(t){return t*96/Xre}function dv(t){return t*Xre/96}var Zke={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function eFe(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=cn(i);switch(Df(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Ja(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Ja(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function tFe(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=cn(i);switch(Df(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function rFe(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(wl)||[]).forEach(function(i){var l=cn(i);switch(Df(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ja(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Ja(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Ja(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Ja(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Ja(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Ja(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Ja(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Ja(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=H6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Ja(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=lp[a.color.index];a.color.index==81&&(c=lp[1]),c||(c=lp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=gS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function nFe(t,e,r){e.NumberFmt=[];for(var n=Gs(an),a=0;a<n.length;++a)e.NumberFmt[n[a]]=an[n[a]];var s=t[0].match(wl);if(s)for(a=0;a<s.length;++a){var i=cn(s[a]);switch(Df(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=qn(ja(i.formatCode)),c=parseInt(i.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}SA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function aFe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=br("numFmt",null,{numFmtId:n,formatCode:Na(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=br("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var IC=["numFmtId","fillId","fontId","borderId","xfId"],jC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function sFe(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(wl)||[]).forEach(function(s){var i=cn(s),l=0;switch(Df(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],l=0;l<IC.length;++l)n[IC[l]]&&(n[IC[l]]=parseInt(n[IC[l]],10));for(l=0;l<jC.length;++l)n[jC[l]]&&(n[jC[l]]=Ja(n[jC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ja(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function iFe(t){var e=[];return e[e.length]=br("cellXfs",null),t.forEach(function(r){e[e.length]=br("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=br("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var oFe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&nFe(f,d,u),(f=l.match(a))&&rFe(f,d,c,u),(f=l.match(n))&&tFe(f,d,c,u),(f=l.match(s))&&eFe(f,d,c,u),(f=l.match(r))&&sFe(f,d,u),d}}();function Yre(t,e){var r=[di,br("styleSheet",null,{xmlns:ag[0],"xmlns:vt":Li.vt})],n;return t.SSF&&(n=aFe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=iFe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function lFe(t,e){var r=t.read_shift(2),n=gl(t);return[r,n]}function cFe(t,e,r){r||(r=zt(6+4*e.length)),r.write_shift(2,t),ho(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function uFe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=KBe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=$Be(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=gl(t),n}function dFe(t,e){e||(e=zt(25+4*32)),e.write_shift(2,t.sz*20),GBe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),hS(t.color,e);var n=0;return n=2,e.write_shift(1,n),ho(t.name,e),e.length>e.l?e.slice(0,e.l):e}var fFe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Yj,AFe=yl;function wH(t,e){e||(e=zt(4*3+8*7+16*1)),Yj||(Yj=_4(fFe));var r=Yj[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(hS({auto:1},e),hS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function hFe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Jre(t,e,r){r||(r=zt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function $1(t,e){return e||(e=zt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var mFe=yl;function pFe(t,e){return e||(e=zt(51)),e.write_shift(1,0),$1(null,e),$1(null,e),$1(null,e),$1(null,e),$1(null,e),e.length>e.l?e.slice(0,e.l):e}function gFe(t,e){return e||(e=zt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),AS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function xFe(t,e,r){var n=zt(2052);return n.write_shift(4,t),AS(e,n),AS(r,n),n.length>n.l?n.slice(0,n.l):n}function vFe(t,e,r){var n={};n.NumberFmt=[];for(var a in an)n.NumberFmt[a]=an[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return th(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],SA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=gS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function yFe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(or(t,615,Bd(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&or(t,44,cFe(a,e[a]))}),or(t,616))}}function bFe(t){var e=1;or(t,611,Bd(e)),or(t,43,dFe({sz:12,color:{theme:1},name:"Calibri",family:2})),or(t,612)}function wFe(t){var e=2;or(t,603,Bd(e)),or(t,45,wH({patternType:"none"})),or(t,45,wH({patternType:"gray125"})),or(t,604)}function NFe(t){var e=1;or(t,613,Bd(e)),or(t,46,pFe()),or(t,614)}function CFe(t){var e=1;or(t,626,Bd(e)),or(t,47,Jre({numFmtId:0},65535)),or(t,627)}function _Fe(t,e){or(t,617,Bd(e.length)),e.forEach(function(r){or(t,47,Jre(r,0))}),or(t,618)}function EFe(t){var e=1;or(t,619,Bd(e)),or(t,48,gFe({xfId:0,name:"Normal"})),or(t,620)}function SFe(t){var e=0;or(t,505,Bd(e)),or(t,506)}function IFe(t){var e=0;or(t,508,xFe(e,"TableStyleMedium9","PivotStyleMedium4")),or(t,509)}function jFe(t,e){var r=Ac();return or(r,278),yFe(r,t.SSF),bFe(r),wFe(r),NFe(r),CFe(r),_Fe(r,e.cellXfs),EFe(r),SFe(r),IFe(r),or(r,279),r.end()}var BFe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function PFe(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(wl)||[]).forEach(function(a){var s=cn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[BFe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function TFe(){}function kFe(){}var FFe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,OFe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,DFe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function RFe(t,e,r){e.themeElements={};var n;[["clrScheme",FFe,PFe],["fontScheme",OFe,TFe],["fmtScheme",DFe,kFe]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var MFe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Zre(t,e){(!t||t.length===0)&&(t=pD());var r,n={};if(!(r=t.match(MFe)))throw new Error("themeElements not found in theme");return RFe(r[0],n,e),n.raw=t,n}function pD(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[di];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function LFe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var i;try{i=Kte(s,{type:"array"})}catch{return}var l=Lc(i,"theme/theme/theme1.xml",!0);if(l)return Zre(l,r)}}function UFe(t){return t.read_shift(4)}function QFe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=VFe(t,4);break;case 2:e.xclrValue=Tre(t);break;case 3:e.xclrValue=UFe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function VFe(t,e){return yl(t,e)}function HFe(t,e){return yl(t,e)}function $Fe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=QFe(t);break;case 6:n[1]=HFe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function KFe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push($Fe(t,r-t.l));return{ixfe:n,ext:s}}function GFe(t,e){e.forEach(function(r){switch(r[0]){}})}function qFe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:gl(t)}}function zFe(t){var e=zt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),ho(t.name,e),e.slice(0,e.l)}function WFe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function XFe(t){var e=zt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function YFe(t,e){var r=zt(8+2*e.length);return r.write_shift(4,t),ho(e,r),r.slice(0,r.l)}function JFe(t){return t.l+=4,t.read_shift(4)!=0}function ZFe(t,e){var r=zt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function eOe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,l=2;return th(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function tOe(){var t=Ac();return or(t,332),or(t,334,Bd(1)),or(t,335,zFe({name:"XLDAPR",version:12e4,flags:3496657072})),or(t,336),or(t,339,YFe(1,"XLDAPR")),or(t,52),or(t,35,Bd(514)),or(t,4096,Bd(0)),or(t,4097,Iu(1)),or(t,36),or(t,53),or(t,340),or(t,337,ZFe(1)),or(t,51,XFe([[1,0]])),or(t,338),or(t,333),t.end()}function rOe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,i;return t.replace(wl,function(l){var c=cn(l);switch(Df(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function ene(){var t=[di];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function nOe(t){var e=[];if(!t)return e;var r=1;return(t.match(wl)||[]).forEach(function(n){var a=cn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function aOe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=sn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function sOe(t,e,r){var n=[];return th(t,function(s,i,l){switch(l){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function iOe(t,e,r,n){if(!t)return t;var a=n||{},s=!1;th(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function oOe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Cx=1024;function tne(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[br("xml",null,{"xmlns:v":Dc.v,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:mv":Dc.mv}).replace(/\/>/,">"),br("o:shapelayout",br("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),br("v:shapetype",[br("v:stroke",null,{joinstyle:"miter"}),br("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Cx<t*1e3;)Cx+=1e3;return e.forEach(function(s){var i=js(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?br("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=br("v:fill",c,l),d={on:"t",obscured:"t"};++Cx,a=a.concat(["<v:shape"+n2({id:"_x0000_s"+Cx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,br("v:shadow",null,d),br("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Vo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Vo("x:AutoFill","False"),Vo("x:Row",String(i.r)),Vo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function NH(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(i){var l=js(i.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[i.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[i.ref]=s;var c=zn(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=vn(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function lOe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var l=i.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=cn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=js(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&AD(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function rne(t){var e=[di,br("comments",null,{xmlns:ag[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Na(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Na(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Vo("t",Na(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)i+=`Reply:
    `+s[l]+`
`;e.push(Vo("t",Na(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function cOe(t,e){var r=[],n=!1,a={},s=0;return t.replace(wl,function(l,c){var u=cn(l);switch(Df(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function uOe(t,e,r){var n=[di,br("ThreadedComments",null,{xmlns:Li.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,l){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(br("threadedComment",Vo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function dOe(t,e){var r=[],n=!1;return t.replace(wl,function(s){var i=cn(s);switch(Df(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function fOe(t){var e=[di,br("personList",null,{xmlns:Li.TCMNT,"xmlns:x":ag[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(br("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function AOe(t){var e={};e.iauthor=t.read_shift(4);var r=lg(t);return e.rfx=r.s,e.ref=sn(r.s),t.l+=16,e}function hOe(t,e){return e==null&&(e=zt(36)),e.write_shift(4,t[1].iauthor),Hv(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var mOe=gl;function pOe(t){return ho(t.slice(0,54))}function gOe(t,e){var r=[],n=[],a={},s=!1;return th(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function xOe(t){var e=Ac(),r=[];return or(e,628),or(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),or(e,632,pOe(a.a)))})}),or(e,631),or(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:js(n[0]),e:js(n[0])};or(e,635,hOe([s,a])),a.t&&a.t.length>0&&or(e,637,UBe(a)),or(e,636),delete a.iauthor})}),or(e,634),or(e,629),e.end()}var vOe="application/vnd.ms-office.vbaProject";function yOe(t){var e=Yr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yr.utils.cfb_add(e,a,t.FileIndex[n].content)}}),Yr.write(e)}function bOe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Yr.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var nne=["xlsb","xlsm","xlam","biff8","xla"];function wOe(){return{"!type":"dialog"}}function NOe(){return{"!type":"dialog"}}function COe(){return{"!type":"macro"}}function _Oe(){return{"!type":"macro"}}var Ux=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,i){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Is(d)+(c?"":"$")+ci(u)}return function(a,s){return e=s,a.replace(t,r)}}(),gD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xD=function(){return function(e,r){return e.replace(gD,function(n,a,s,i,l,c){var u=aD(i)-(s?0:r.c),d=nD(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function ane(t,e){return t.replace(gD,function(r,n,a,s,i,l){return n+(a=="$"?a+s:Is(aD(s)+e.c))+(i=="$"?i+l:ci(nD(l)+e.r))})}function EOe(t,e,r){var n=hc(e),a=n.s,s=js(r),i={r:s.r-a.r,c:s.c-a.c};return ane(t,i)}function SOe(t){return t.length!=1}function CH(t){return t.replace(/_xlfn\./g,"")}function fi(t){t.l+=1}function G0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function sne(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return ine(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),i=G0(t),l=G0(t);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function ine(t){var e=G0(t),r=G0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function IOe(t,e,r){if(r.biff<8)return ine(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=G0(t),i=G0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function one(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return jOe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=G0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function jOe(t){var e=G0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function BOe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function POe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return TOe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),i=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:l}}function TOe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function kOe(t,e,r){var n=(t[t.l++]&96)>>5,a=sne(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function FOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var i=sne(t,s,r);return[n,a,i]}function OOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function DOe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function ROe(t,e,r){var n=(t[t.l++]&96)>>5,a=IOe(t,e-1,r);return[n,a]}function MOe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function _H(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function LOe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function UOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function QOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function VOe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function HOe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function lne(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function $Oe(t){return t.read_shift(2),lne(t)}function KOe(t){return t.read_shift(2),lne(t)}function GOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=one(t,0,r);return[n,a]}function qOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=POe(t,0,r);return[n,a]}function zOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=one(t,0,r);return[n,a,s]}function WOe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[J6e[a],dne[a],n]}function XOe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:YOe(t);return[a,(s[0]===0?dne:Y6e)[s[1]]]}function YOe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function JOe(t,e,r){t.l+=r&&r.biff==2?3:4}function ZOe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function e6e(t){return t.l++,rh[t.read_shift(1)]}function t6e(t){return t.l++,t.read_shift(2)}function r6e(t){return t.l++,t.read_shift(1)!==0}function n6e(t){return t.l++,ml(t)}function a6e(t,e,r){return t.l++,lw(t,e-1,r)}function s6e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ei(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=rh[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ml(t);break;case 2:r[1]=cg(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function i6e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?lg:I4)(t));return a}function o6e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var l=0;l!=a;++l)i[s][l]=s6e(t,r.biff);return i}function l6e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function c6e(t,e,r){if(r.biff==5)return u6e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function u6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function d6e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function f6e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function A6e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function h6e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var m6e=yl,p6e=yl,g6e=yl;function uw(t,e,r){return t.l+=2,[BOe(t)]}function vD(t){return t.l+=6,[]}var x6e=uw,v6e=vD,y6e=vD,b6e=uw;function cne(t){return t.l+=2,[mi(t),t.read_shift(2)&1]}var w6e=uw,N6e=cne,C6e=vD,_6e=uw,E6e=uw,S6e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function I6e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),i=S6e[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:a,C:s}}function j6e(t){return t.l+=2,[t.read_shift(4)]}function B6e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function P6e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function T6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function k6e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function F6e(t){return t.l+=4,[0,0]}var EH={1:{n:"PtgExp",f:ZOe},2:{n:"PtgTbl",f:g6e},3:{n:"PtgAdd",f:fi},4:{n:"PtgSub",f:fi},5:{n:"PtgMul",f:fi},6:{n:"PtgDiv",f:fi},7:{n:"PtgPower",f:fi},8:{n:"PtgConcat",f:fi},9:{n:"PtgLt",f:fi},10:{n:"PtgLe",f:fi},11:{n:"PtgEq",f:fi},12:{n:"PtgGe",f:fi},13:{n:"PtgGt",f:fi},14:{n:"PtgNe",f:fi},15:{n:"PtgIsect",f:fi},16:{n:"PtgUnion",f:fi},17:{n:"PtgRange",f:fi},18:{n:"PtgUplus",f:fi},19:{n:"PtgUminus",f:fi},20:{n:"PtgPercent",f:fi},21:{n:"PtgParen",f:fi},22:{n:"PtgMissArg",f:fi},23:{n:"PtgStr",f:a6e},26:{n:"PtgSheet",f:B6e},27:{n:"PtgEndSheet",f:P6e},28:{n:"PtgErr",f:e6e},29:{n:"PtgBool",f:r6e},30:{n:"PtgInt",f:t6e},31:{n:"PtgNum",f:n6e},32:{n:"PtgArray",f:MOe},33:{n:"PtgFunc",f:WOe},34:{n:"PtgFuncVar",f:XOe},35:{n:"PtgName",f:l6e},36:{n:"PtgRef",f:GOe},37:{n:"PtgArea",f:kOe},38:{n:"PtgMemArea",f:d6e},39:{n:"PtgMemErr",f:m6e},40:{n:"PtgMemNoMem",f:p6e},41:{n:"PtgMemFunc",f:f6e},42:{n:"PtgRefErr",f:A6e},43:{n:"PtgAreaErr",f:OOe},44:{n:"PtgRefN",f:qOe},45:{n:"PtgAreaN",f:ROe},46:{n:"PtgMemAreaN",f:T6e},47:{n:"PtgMemNoMemN",f:k6e},57:{n:"PtgNameX",f:c6e},58:{n:"PtgRef3d",f:zOe},59:{n:"PtgArea3d",f:FOe},60:{n:"PtgRefErr3d",f:h6e},61:{n:"PtgAreaErr3d",f:DOe},255:{}},O6e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},D6e={1:{n:"PtgElfLel",f:cne},2:{n:"PtgElfRw",f:_6e},3:{n:"PtgElfCol",f:x6e},6:{n:"PtgElfRwV",f:E6e},7:{n:"PtgElfColV",f:b6e},10:{n:"PtgElfRadical",f:w6e},11:{n:"PtgElfRadicalS",f:C6e},13:{n:"PtgElfColS",f:v6e},15:{n:"PtgElfColSV",f:y6e},16:{n:"PtgElfRadicalLel",f:N6e},25:{n:"PtgList",f:I6e},29:{n:"PtgSxName",f:j6e},255:{}},R6e={0:{n:"PtgAttrNoop",f:F6e},1:{n:"PtgAttrSemi",f:HOe},2:{n:"PtgAttrIf",f:QOe},4:{n:"PtgAttrChoose",f:LOe},8:{n:"PtgAttrGoto",f:UOe},16:{n:"PtgAttrSum",f:JOe},32:{n:"PtgAttrBaxcel",f:_H},33:{n:"PtgAttrBaxcel",f:_H},64:{n:"PtgAttrSpace",f:$Oe},65:{n:"PtgAttrSpaceSemi",f:KOe},128:{n:"PtgAttrIfError",f:VOe},255:{}};function dw(t,e,r,n){if(n.biff<8)return yl(t,e);for(var a=t.l+e,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=o6e(t,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=i6e(t,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=a-t.l,e!==0&&s.push(yl(t,e)),s}function fw(t,e,r){for(var n=t.l+e,a,s,i=[];n!=t.l;)e=n-t.l,s=t[t.l],a=EH[s]||EH[O6e[s]],(s===24||s===25)&&(a=(s===24?D6e:R6e)[t[t.l+1]]),!a||!a.f?yl(t,e):i.push([a.n,a.f(t,e,r)]);return i}function M6e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var L6e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function U6e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function une(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function SH(t,e,r){var n=une(t,e,r);return n=="#REF"?n:U6e(n,r)}function fl(t,e,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},l=[],c,u,d,f=0,h=0,A,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",x=0,y=t[0].length;x<y;++x){var b=t[0][x];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=Hs(" ",t[0][p][1][1]);break;case 1:g=Hs("\r",t[0][p][1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+g,p=-1}l.push(u+L6e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=eb(b[1][1],i,a),l.push(tb(d,s));break;case"PtgRefN":d=r?eb(b[1][1],r,a):b[1][1],l.push(tb(d,s));break;case"PtgRef3d":f=b[1][1],d=eb(b[1][2],i,a),m=SH(n,f,a),l.push(m+"!"+tb(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":A=rH(b[1][1],r?{s:r}:i,a),l.push(qj(A,a));break;case"PtgArea":A=rH(b[1][1],i,a),l.push(qj(A,a));break;case"PtgArea3d":f=b[1][1],A=b[1][2],m=SH(n,f,a),l.push(m+"!"+qj(A,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var _=(n.names||[])[h-1]||(n[0]||[])[h],E=_?_.Name:"SH33TJSNAME"+String(h);E&&E.slice(0,6)=="_xlfn."&&!a.xlfn&&(E=E.slice(6)),l.push(E);break;case"PtgNameX":var S=b[1][1];h=b[1][2];var O;if(a.biff<=5)S<0&&(S=-S),n[S]&&(O=n[S][h]);else{var P="";if(((n[S]||[])[0]||[])[0]==14849||(((n[S]||[])[0]||[])[0]==1025?n[S][h]&&n[S][h].itab>0&&(P=n.SheetNames[n[S][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[S]&&n[S][h])P+=n[S][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var T=(une(n,S,a)||"").split(";;");T[h-1]?P=T[h-1]:P+="SH33TJSERRX"}l.push(P);break}O||(O={Name:"SH33TJSERRY"}),l.push(O.Name);break;case"PtgParen":var F="(",J=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:F=Hs(" ",t[0][p][1][1])+F;break;case 3:F=Hs("\r",t[0][p][1][1])+F;break;case 4:J=Hs(" ",t[0][p][1][1])+J;break;case 5:J=Hs("\r",t[0][p][1][1])+J;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(F+l.pop()+J);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var ge={c:r.c,r:r.r};if(n.sharedf[sn(d)]){var le=n.sharedf[sn(d)];l.push(fl(le,i,ge,n,a))}else{var de=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(fl(u[1],i,ge,n,a)),de=!0;break}de||l.push(b[1])}break;case"PtgArray":l.push("{"+M6e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=x;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var Ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&Ae.indexOf(t[0][x][0])==-1){b=t[0][p];var se=!0;switch(b[1][0]){case 4:se=!1;case 0:g=Hs(" ",b[1][1]);break;case 5:se=!1;case 1:g=Hs("\r",b[1][1]);break;default:if(g="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((se?g:"")+l.pop()+(se?"":g)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function Q6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],yl(t,e-2)];var l=fw(t,i,r);return e!==i+a&&(s=dw(t,e-i-a,l,r)),t.l=n,[l,s]}function V6e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,i=t.read_shift(a);if(i==65535)return[[],yl(t,e-2)];var l=fw(t,i,r);return e!==i+a&&(s=dw(t,e-i-a,l,r)),t.l=n,[l,s]}function H6e(t,e,r,n){var a=t.l+e,s=fw(t,n,r),i;return a!==t.l&&(i=dw(t,a-t.l,s,r)),[s,i]}function $6e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),i=fw(t,s,r);return s==65535?[[],yl(t,e-2)]:(e!==s+2&&(a=dw(t,n-s-2,i,r)),[i,a])}function K6e(t){var e;if(pA(t,t.l+6)!==65535)return[ml(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function G6e(t){if(t==null){var e=zt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Fp(t);return Fp(0)}function Jj(t,e,r){var n=t.l+e,a=Rf(t);r.biff==2&&++t.l;var s=K6e(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=V6e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:i>>3&1,tt:s[1]}}function q6e(t,e,r,n,a){var s=Dp(e,r,a),i=G6e(t.v),l=zt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=zt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=fo([s,i,l,u]);return f}function j4(t,e,r){var n=t.read_shift(4),a=fw(t,n,r),s=t.read_shift(4),i=s>0?dw(t,s,a,r):null;return[a,i]}var z6e=j4,B4=j4,W6e=j4,X6e=j4,Y6e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dne={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},J6e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function IH(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Z6e(t){var e="of:="+t.replace(gD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Zj(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function eDe(t){return t.replace(/\./,"!")}var nb={},Qx={},ab=typeof Map<"u";function yD(t,e,r){var n=0,a=t.length;if(r){if(ab?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=ab?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(ab?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function P4(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(hl=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=l2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=xS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function dp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function sm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){SA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function fne(t,e,r,n,a,s){try{n.cellNF&&(t.z=an[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=rs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(an[e]==null&&SA(Yje[e]||"General",e),t.t==="e")t.w=t.w||rh[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=t2(t.v);else if(t.t==="d"){var i=$i(t.v);(i|0)===i?t.w=i.toString(10):t.w=t2(i)}else{if(t.v===void 0)return"";t.w=Tp(t.v,Qx)}else t.t==="d"?t.w=Gu(e,$i(t.v),Qx):t.w=Gu(e,t.v,Qx)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=gS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=gS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function tDe(t,e,r){if(t&&t["!ref"]){var n=zn(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function rDe(t,e){var r=zn(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vn(r))}var nDe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,aDe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,sDe=/<(?:\w:)?hyperlink [^>]*>/mg,iDe=/"(\w*:\w*)"/,oDe=/<(?:\w:)?col\b[^>]*[\/]?>/g,lDe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,cDe=/<(?:\w:)?pageMargins[^>]*\/>/g,Ane=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,uDe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,dDe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function fDe(t,e,r,n,a,s,i){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(aDe);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var h=u.match(Ane);h?bD(h[0],l,a,r):(h=u.match(uDe))&&hDe(h[0],h[1]||"",l,a,r);var A=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(A>0){var m=u.slice(A,A+50).match(iDe);m&&rDe(l,m[1])}var p=u.match(dDe);p&&p[1]&&SDe(p[1],a);var g=[];if(e.cellStyles){var x=u.match(oDe);x&&wDe(g,x)}f&&BDe(f[1],l,e,c,s,i);var y=d.match(lDe);y&&(l["!autofilter"]=CDe(y[0]));var b=[],w=d.match(nDe);if(w)for(A=0;A!=w.length;++A)b[A]=zn(w[A].slice(w[A].indexOf('"')+1));var j=d.match(sDe);j&&vDe(l,j,n);var I=d.match(cDe);if(I&&(l["!margins"]=yDe(cn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=vn(c)),e.sheetRows>0&&l["!ref"]){var _=zn(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=vn(_))}return g.length>0&&(l["!cols"]=g),b.length>0&&(l["!merges"]=b),l}function ADe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+vn(t[r])+'"/>';return e+"</mergeCells>"}function bD(t,e,r,n){var a=cn(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=qn(ja(a.codeName)))}function hDe(t,e,r,n,a){bD(t.slice(0,t.indexOf(">")),r,n,a)}function mDe(t,e,r,n,a){var s=!1,i={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=vf(Na(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+br("outlinePr",null,u)}!s&&!l||(a[a.length]=br("sheetPr",l,i))}var pDe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],gDe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xDe(t){var e={sheet:1};return pDe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),gDe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=hD(t.password).toString(16).toUpperCase()),br("sheetProtection",null,e)}function vDe(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=cn(ja(e[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+qn(s.location))):(s.Target="#"+qn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=zn(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=sn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function yDe(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function bDe(t){return dp(t),br("pageMargins",null,t)}function wDe(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=cn(e[n],!0);a.hidden&&(a.hidden=Ja(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,mD(a.width)),K0(a);s<=i;)t[s++]=ns(a)}}function NDe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=br("col",null,P4(a,n)));return r[r.length]="</cols>",r.join("")}function CDe(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function _De(t,e,r,n){var a=typeof t.ref=="string"?t.ref:vn(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=hc(a);i.s.r==i.e.r&&(i.e.r=hc(e["!ref"]).e.r,a=vn(i));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),br("autoFilter",null,{ref:a})}var EDe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function SDe(t,e){e.Views||(e.Views=[{}]),(t.match(EDe)||[]).forEach(function(r,n){var a=cn(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Ja(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function IDe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),br("sheetViews",br("sheetView",null,a),{})}function jDe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=rh[t.v];break;case"d":n&&n.cellDates?a=rs(t.v,-1).toISOString():(t=ns(t),t.t="n",a=""+(t.v=$i(rs(t.v)))),typeof t.z>"u"&&(t.z=an[14]);break;default:a=t.v;break}var l=Vo("v",Na(a)),c={r:e},u=sm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Vo("v",""+yD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=br("f",Na(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),br("c",l,c)}var BDe=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=r2("v"),i=r2("f");return function(c,u,d,f,h,A){for(var m=0,p="",g=[],x=[],y=0,b=0,w=0,j="",I,_,E=0,S=0,O,P,T=0,F=0,J=Array.isArray(A.CellXf),ge,le=[],de=[],Ae=Array.isArray(u),se=[],Ie={},Pe=!1,k=!!d.sheetStubs,H=c.split(e),R=0,M=H.length;R!=M;++R){p=H[R].trim();var G=p.length;if(G!==0){var X=0;e:for(m=0;m<G;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=cn(p.slice(X,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,S=-1,d.sheetRows&&d.sheetRows<E)continue;Ie={},Pe=!1,_.ht&&(Pe=!0,Ie.hpt=parseFloat(_.ht),Ie.hpx=dv(Ie.hpt)),_.hidden=="1"&&(Pe=!0,Ie.hidden=!0),_.outlineLevel!=null&&(Pe=!0,Ie.level=+_.outlineLevel),Pe&&(se[E-1]=Ie)}break;case"<":X=m;break}if(X>=m)break;if(_=cn(p.slice(X,m),!0),E=_.r!=null?parseInt(_.r,10):E+1,S=-1,!(d.sheetRows&&d.sheetRows<E)){f.s.r>E-1&&(f.s.r=E-1),f.e.r<E-1&&(f.e.r=E-1),d&&d.cellStyles&&(Ie={},Pe=!1,_.ht&&(Pe=!0,Ie.hpt=parseFloat(_.ht),Ie.hpx=dv(Ie.hpt)),_.hidden=="1"&&(Pe=!0,Ie.hidden=!0),_.outlineLevel!=null&&(Pe=!0,Ie.level=+_.outlineLevel),Pe&&(se[E-1]=Ie)),g=p.slice(m).split(t);for(var D=0;D!=g.length&&g[D].trim().charAt(0)=="<";++D);for(g=g.slice(D),m=0;m!=g.length;++m)if(p=g[m].trim(),p.length!==0){if(x=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,x!=null&&x.length===2){for(y=0,j=x[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,S=y}else++S;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=cn(p.slice(0,b),!0),_.r||(_.r=sn({r:E-1,c:S})),j=p.slice(b),I={t:""},(x=j.match(s))!=null&&x[1]!==""&&(I.v=qn(x[1])),d.cellFormula){if((x=j.match(i))!=null&&x[1]!==""){if(I.f=qn(ja(x[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=CH(I.f)),x[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&le.push([zn(I.F),I.F]);else if(x[0].indexOf('t="shared"')>-1){P=cn(x[0]);var Q=qn(ja(x[1]));d.xlfn||(Q=CH(Q)),de[parseInt(P.si,10)]=[P,Q,_.r]}}else(x=j.match(/<f[^>]*\/>/))&&(P=cn(x[0]),de[P.si]&&(I.f=EOe(de[P.si][1],de[P.si][2],_.r)));var te=js(_.r);for(b=0;b<le.length;++b)te.r>=le[b][0].s.r&&te.r<=le[b][0].e.r&&te.c>=le[b][0].s.c&&te.c<=le[b][0].e.c&&(I.F=le[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(k)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>S&&(f.s.c=S),f.e.c<S&&(f.e.c=S),I.t){case"n":if(I.v==""||I.v==null){if(!k)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!k)continue;I.t="z"}else O=nb[parseInt(I.v,10)],I.v=O.t,I.r=O.r,d.cellHTML&&(I.h=O.h);break;case"str":I.t="s",I.v=I.v!=null?ja(I.v):"",d.cellHTML&&(I.h=Z6(I.v));break;case"inlineStr":x=j.match(n),I.t="s",x!=null&&(O=AD(x[1]))?(I.v=O.t,d.cellHTML&&(I.h=O.h)):I.v="";break;case"b":I.v=Ja(I.v);break;case"d":d.cellDates?I.v=rs(I.v,1):(I.v=$i(rs(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=mre[I.v];break}if(T=F=0,ge=null,J&&_.s!==void 0&&(ge=A.CellXf[_.s],ge!=null&&(ge.numFmtId!=null&&(T=ge.numFmtId),d.cellStyles&&ge.fillId!=null&&(F=ge.fillId))),fne(I,T,F,d,h,A),d.cellDates&&J&&I.t=="n"&&Uv(an[T])&&(I.t="d",I.v=S4(I.v)),_.cm&&d.xlmeta){var me=(d.xlmeta.Cell||[])[+_.cm-1];me&&me.type=="XLDAPR"&&(I.D=!0)}if(Ae){var L=js(_.r);u[L.r]||(u[L.r]=[]),u[L.r][L.c]=I}else u[_.r]=I}}}}se.length>0&&(u["!rows"]=se)}}();function PDe(t,e,r,n){var a=[],s=[],i=zn(t["!ref"]),l="",c,u="",d=[],f=0,h=0,A=t["!rows"],m=Array.isArray(t),p={r:u},g,x=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=ci(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var y=m?(t[f]||[])[h]:t[c];y!==void 0&&(l=jDe(y,c,t,e))!=null&&s.push(l)}(s.length>0||A&&A[f])&&(p={r:u},A&&A[f]&&(g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=c2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level)),a[a.length]=br("row",s.join(""),p))}if(A)for(;f<A.length;++f)A&&A[f]&&(p={r:f+1},g=A[f],g.hidden&&(p.hidden=1),x=-1,g.hpx?x=c2(g.hpx):g.hpt&&(x=g.hpt),x>-1&&(p.ht=x,p.customHeight=1),g.level&&(p.outlineLevel=g.level),a[a.length]=br("row","",p));return a.join("")}function hne(t,e,r,n){var a=[di,br("worksheet",null,{xmlns:ag[0],"xmlns:r":Li.r})],s=r.SheetNames[t],i=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=zn(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=vn(d)}n||(n={}),c["!comments"]=[];var f=[];mDe(c,r,t,e,a),a[a.length]=br("dimension",null,{ref:u}),a[a.length]=IDe(c,e,t,r),e.sheetFormat&&(a[a.length]=br("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=NDe(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=PDe(c,e),l.length>0&&(a[a.length]=l)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=xDe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=_De(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=ADe(c["!merges"]));var h=-1,A,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(A={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=va(n,-1,Na(p[1].Target).replace(/#.*$/,""),Tn.HLINK),A["r:id"]="rId"+m),(h=p[1].Target.indexOf("#"))>-1&&(A.location=Na(p[1].Target.slice(h+1))),p[1].Tooltip&&(A.tooltip=Na(p[1].Tooltip)),a[a.length]=br("hyperlink",null,A))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=bDe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Vo("ignoredErrors",br("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=va(n,-1,"../drawings/drawing"+(t+1)+".xml",Tn.DRAW),a[a.length]=br("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=va(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Tn.VML),a[a.length]=br("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function TDe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function kDe(t,e,r){var n=zt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=c2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,h=-1,A=d<<10;A<d+1<<10;++A){u.c=A;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[sn(u)];m&&(f<0&&(f=A),h=A)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,h))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function FDe(t,e,r,n){var a=kDe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&or(t,0,a)}var ODe=lg,DDe=Hv;function RDe(){}function MDe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=QBe(t),r}function LDe(t,e,r){r==null&&(r=zt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return hS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),ure(t,r),r.slice(0,r.l)}function UDe(t){var e=Xu(t);return[e]}function QDe(t,e,r){return r==null&&(r=zt(8)),sg(e,r)}function VDe(t){var e=ig(t);return[e]}function HDe(t,e,r){return r==null&&(r=zt(4)),og(e,r)}function $De(t){var e=Xu(t),r=t.read_shift(1);return[e,r,"b"]}function KDe(t,e,r){return r==null&&(r=zt(9)),sg(e,r),r.write_shift(1,t.v?1:0),r}function GDe(t){var e=ig(t),r=t.read_shift(1);return[e,r,"b"]}function qDe(t,e,r){return r==null&&(r=zt(5)),og(e,r),r.write_shift(1,t.v?1:0),r}function zDe(t){var e=Xu(t),r=t.read_shift(1);return[e,r,"e"]}function WDe(t,e,r){return r==null&&(r=zt(9)),sg(e,r),r.write_shift(1,t.v),r}function XDe(t){var e=ig(t),r=t.read_shift(1);return[e,r,"e"]}function YDe(t,e,r){return r==null&&(r=zt(8)),og(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function JDe(t){var e=Xu(t),r=t.read_shift(4);return[e,r,"s"]}function ZDe(t,e,r){return r==null&&(r=zt(12)),sg(e,r),r.write_shift(4,e.v),r}function eRe(t){var e=ig(t),r=t.read_shift(4);return[e,r,"s"]}function tRe(t,e,r){return r==null&&(r=zt(8)),og(e,r),r.write_shift(4,e.v),r}function rRe(t){var e=Xu(t),r=ml(t);return[e,r,"n"]}function nRe(t,e,r){return r==null&&(r=zt(16)),sg(e,r),Fp(t.v,r),r}function mne(t){var e=ig(t),r=ml(t);return[e,r,"n"]}function aRe(t,e,r){return r==null&&(r=zt(12)),og(e,r),Fp(t.v,r),r}function sRe(t){var e=Xu(t),r=lD(t);return[e,r,"n"]}function iRe(t,e,r){return r==null&&(r=zt(12)),sg(e,r),dre(t.v,r),r}function oRe(t){var e=ig(t),r=lD(t);return[e,r,"n"]}function lRe(t,e,r){return r==null&&(r=zt(8)),og(e,r),dre(t.v,r),r}function cRe(t){var e=Xu(t),r=sD(t);return[e,r,"is"]}function uRe(t){var e=Xu(t),r=gl(t);return[e,r,"str"]}function dRe(t,e,r){return r==null&&(r=zt(12+4*t.v.length)),sg(e,r),ho(t.v,r),r.length>r.l?r.slice(0,r.l):r}function fRe(t){var e=ig(t),r=gl(t);return[e,r,"str"]}function ARe(t,e,r){return r==null&&(r=zt(8+4*t.v.length)),og(e,r),ho(t.v,r),r.length>r.l?r.slice(0,r.l):r}function hRe(t,e,r){var n=t.l+e,a=Xu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=B4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function mRe(t,e,r){var n=t.l+e,a=Xu(t);a.r=r["!row"];var s=t.read_shift(1),i=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=B4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function pRe(t,e,r){var n=t.l+e,a=Xu(t);a.r=r["!row"];var s=ml(t),i=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=B4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}function gRe(t,e,r){var n=t.l+e,a=Xu(t);a.r=r["!row"];var s=gl(t),i=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=B4(t,n-t.l,r);i[3]=fl(l,null,a,r.supbooks,r)}else t.l=n;return i}var xRe=lg,vRe=Hv;function yRe(t,e){return e==null&&(e=zt(4)),e.write_shift(4,t),e}function bRe(t,e){var r=t.l+e,n=lg(t),a=iD(t),s=gl(t),i=gl(t),l=gl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return i&&(c.Tooltip=i),c}function wRe(t,e){var r=zt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Hv({s:js(t[0]),e:js(t[0])},r),oD("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return ho(a||"",r),ho(t[1].Tooltip||"",r),ho("",r),r.slice(0,r.l)}function NRe(){}function CRe(t,e,r){var n=t.l+e,a=fre(t),s=t.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var l=z6e(t,n-t.l,r);i[1]=l}else t.l=n;return i}function _Re(t,e,r){var n=t.l+e,a=lg(t),s=[a];if(r.cellFormula){var i=X6e(t,n-t.l,r);s[1]=i,t.l=n}else t.l=n;return s}function ERe(t,e,r){r==null&&(r=zt(18));var n=P4(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var pne=["left","right","top","bottom","header","footer"];function SRe(t){var e={};return pne.forEach(function(r){e[r]=ml(t)}),e}function IRe(t,e){return e==null&&(e=zt(6*8)),dp(t),pne.forEach(function(r){Fp(t[r],e)}),e}function jRe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function BRe(t,e,r){r==null&&(r=zt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function PRe(t){var e=zt(24);return e.write_shift(4,4),e.write_shift(4,1),Hv(t,e),e}function TRe(t,e){return e==null&&(e=zt(16*4+2)),e.write_shift(2,t.password?hD(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function kRe(){}function FRe(){}function ORe(t,e,r,n,a,s,i){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,A,m,p,g,x,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,E=!1,S=[],O={},P=l.supbooks||a.supbooks||[[]];if(P.sharedf=O,P.arrayf=S,P.SheetNames=a.SheetNames||a.Sheets.map(function(Ae){return Ae.name}),!l.supbooks&&(l.supbooks=P,a.Names))for(var T=0;T<a.Names.length;++T)P[0][T+1]=a.Names[T];var F=[],J=[],ge=!1;u2[16]={n:"BrtShortReal",f:mne};var le;if(th(t,function(se,Ie,Pe){if(!h)switch(Pe){case 148:u=se;break;case 0:A=se,l.sheetRows&&l.sheetRows<=A.r&&(h=!0),w=ci(g=A.r),l["!row"]=A.r,(se.hidden||se.hpt||se.level!=null)&&(se.hpt&&(se.hpx=dv(se.hpt)),J[se.r]=se);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:se[2]},se[2]){case"n":m.v=se[1];break;case"s":b=nb[se[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!se[1];break;case"e":m.v=se[1],l.cellText!==!1&&(m.w=rh[m.v]);break;case"str":m.t="s",m.v=se[1];break;case"is":m.t="s",m.v=se[1].t;break}if((p=i.CellXf[se[0].iStyleRef])&&fne(m,p.numFmtId,null,l,s,i),x=se[0].c==-1?x+1:se[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Is(x)+w]=m,l.cellFormula){for(E=!1,_=0;_<S.length;++_){var k=S[_];A.r>=k[0].s.r&&A.r<=k[0].e.r&&x>=k[0].s.c&&x<=k[0].e.c&&(m.F=vn(k[0]),E=!0)}!E&&se.length>3&&(m.f=se[3])}if(d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),l.cellDates&&p&&m.t=="n"&&Uv(an[p.numFmtId])){var H=zm(m.v);H&&(m.t="d",m.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}le&&(le.type=="XLDAPR"&&(m.D=!0),le=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},x=se[0].c==-1?x+1:se[0].c,l.dense?(c[g]||(c[g]=[]),c[g][x]=m):c[Is(x)+w]=m,d.s.r>A.r&&(d.s.r=A.r),d.s.c>x&&(d.s.c=x),d.e.r<A.r&&(d.e.r=A.r),d.e.c<x&&(d.e.c=x),le&&(le.type=="XLDAPR"&&(m.D=!0),le=void 0);break;case 176:I.push(se);break;case 49:le=((l.xlmeta||{}).Cell||[])[se-1];break;case 494:var R=n["!id"][se.relId];for(R?(se.Target=R.Target,se.loc&&(se.Target+="#"+se.loc),se.Rel=R):se.relId==""&&(se.Target="#"+se.loc),g=se.rfx.s.r;g<=se.rfx.e.r;++g)for(x=se.rfx.s.c;x<=se.rfx.e.c;++x)l.dense?(c[g]||(c[g]=[]),c[g][x]||(c[g][x]={t:"z",v:void 0}),c[g][x].l=se):(y=sn({c:x,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=se);break;case 426:if(!l.cellFormula)break;S.push(se),j=l.dense?c[g][x]:c[Is(x)+w],j.f=fl(se[1],d,{r:A.r,c:x},P,l),j.F=vn(se[0]);break;case 427:if(!l.cellFormula)break;O[sn(se[0].s)]=se[1],j=l.dense?c[g][x]:c[Is(x)+w],j.f=fl(se[1],d,{r:A.r,c:x},P,l);break;case 60:if(!l.cellStyles)break;for(;se.e>=se.s;)F[se.e--]={width:se.w/256,hidden:!!(se.flags&1),level:se.level},ge||(ge=!0,mD(se.w/256)),K0(F[se.e+1]);break;case 161:c["!autofilter"]={ref:vn(se)};break;case 476:c["!margins"]=se;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),se.name&&(a.Sheets[r].CodeName=se.name),(se.above||se.left)&&(c["!outline"]={above:se.above,left:se.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),se.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Ie.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Pe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=vn(u||d)),l.sheetRows&&c["!ref"]){var de=zn(c["!ref"]);l.sheetRows<=+de.e.r&&(de.e.r=l.sheetRows-1,de.e.r>d.e.r&&(de.e.r=d.e.r),de.e.r<de.s.r&&(de.s.r=de.e.r),de.e.c>d.e.c&&(de.e.c=d.e.c),de.e.c<de.s.c&&(de.s.c=de.e.c),c["!fullref"]=c["!ref"],c["!ref"]=vn(de))}return I.length>0&&(c["!merges"]=I),F.length>0&&(c["!cols"]=F),J.length>0&&(c["!rows"]=J),c}function DRe(t,e,r,n,a,s,i){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=ns(e),e.z=e.z||an[14],e.v=$i(rs(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=sm(a.cellXfs,e,a),e.l&&s["!links"].push([sn(c),e.l]),e.c&&s["!comments"].push([sn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=yD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,i?or(t,18,tRe(e,c)):or(t,7,ZDe(e,c))):(c.t="str",i?or(t,17,ARe(e,c)):or(t,6,dRe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?or(t,13,lRe(e,c)):or(t,2,iRe(e,c)):i?or(t,16,aRe(e,c)):or(t,5,nRe(e,c)),!0;case"b":return c.t="b",i?or(t,15,qDe(e,c)):or(t,4,KDe(e,c)),!0;case"e":return c.t="e",i?or(t,14,YDe(e,c)):or(t,3,WDe(e,c)),!0}return i?or(t,12,HDe(e,c)):or(t,1,QDe(e,c)),!0}function RRe(t,e,r,n){var a=zn(e["!ref"]||"A1"),s,i="",l=[];or(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=ci(d),FDe(t,e,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(l[h]=Is(h)),s=l[h]+i;var A=c?(e[d]||[])[h]:e[s];if(!A){f=!1;continue}f=DRe(t,A,d,h,n,e,f)}}or(t,146)}function MRe(t,e){!e||!e["!merges"]||(or(t,177,yRe(e["!merges"].length)),e["!merges"].forEach(function(r){or(t,176,vRe(r))}),or(t,178))}function LRe(t,e){!e||!e["!cols"]||(or(t,390),e["!cols"].forEach(function(r,n){r&&or(t,60,ERe(n,r))}),or(t,391))}function URe(t,e){!e||!e["!ref"]||(or(t,648),or(t,649,PRe(zn(e["!ref"]))),or(t,650))}function QRe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=va(r,-1,n[1].Target.replace(/#.*$/,""),Tn.HLINK);or(t,494,wRe(n,a))}}),delete e["!links"]}function VRe(t,e,r,n){if(e["!comments"].length>0){var a=va(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Tn.VML);or(t,551,oD("rId"+a)),e["!legacy"]=a}}function HRe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:vn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=hc(s);l.s.r==l.e.r&&(l.e.r=hc(e["!ref"]).e.r,s=vn(l));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),or(t,161,Hv(zn(s))),or(t,162)}}function $Re(t,e,r){or(t,133),or(t,137,BRe(e,r)),or(t,138),or(t,134)}function KRe(t,e){e["!protect"]&&or(t,535,TRe(e["!protect"]))}function GRe(t,e,r,n){var a=Ac(),s=r.SheetNames[t],i=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=zn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],or(a,129),(r.vbaraw||i["!outline"])&&or(a,147,LDe(l,i["!outline"])),or(a,148,DDe(c)),$Re(a,i,r.Workbook),LRe(a,i),RRe(a,i,t,e),KRe(a,i),HRe(a,i,r,t),MRe(a,i),QRe(a,i,n),i["!margins"]&&or(a,476,IRe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&URe(a,i),VRe(a,i,t,n),or(a,130),a.end()}function qRe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var a=qn((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function zRe(t,e,r,n,a,s){var i=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=qRe(f);d.s.r=d.s.c=0,d.e.c=l,u=Is(l),h[0].forEach(function(A,m){i[u+ci(m)]={t:"n",v:A,z:h[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(i["!ref"]=vn(d)),i}function WRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,l=t.match(Ane);return l&&bD(l[0],s,a,r),(i=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function XRe(t,e){t.l+=10;var r=gl(t);return{name:r}}function YRe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return th(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var wD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],JRe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ZRe=[],e8e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function jH(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ja(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function BH(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Ja(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function gne(t){BH(t.WBProps,wD),BH(t.CalcPr,e8e),jH(t.WBView,JRe),jH(t.Sheets,ZRe),Qx.date1904=Ja(t.WBProps.date1904)}function t8e(t){return!t.Workbook||!t.Workbook.WBProps?"false":Ja(t.Workbook.WBProps.date1904)?"true":"false"}var r8e="][*?/\\".split("");function xne(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return r8e.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function n8e(t,e,r){t.forEach(function(n,a){xne(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[a]&&e[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function a8e(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];n8e(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)tDe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var s8e=/<\w+:workbook/;function i8e(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(t.replace(wl,function(c,u){var d=cn(c);switch(Df(d[0])){case"<?xml":break;case"<workbook":c.match(s8e)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wD.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ja(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ja(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=qn(ja(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ja(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ja(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=qn(ja(t.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),ag.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return gne(r),r}function vne(t){var e=[di];e[e.length]=br("workbook",null,{xmlns:ag[0],"xmlns:r":Li.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(wD.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=br("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var i={name:Na(t.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=br("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=br("definedName",Na(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function o8e(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=ak(t),r.name=gl(t),r}function l8e(t,e){return e||(e=zt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),oD(t.strRelID,e),ho(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function c8e(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?gl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function u8e(t,e){e||(e=zt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),ure(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function d8e(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function f8e(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=VBe(t),i=W6e(t,0,r),l=iD(t);t.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function A8e(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],u2[16]={n:"BrtFRTArchID$",f:d8e},th(t,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=fl(c.Ptg,null,null,i,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),gne(r),r.Names=s,r.supbooks=i,r}function h8e(t,e){or(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};or(t,156,l8e(a))}or(t,144)}function m8e(t,e){e||(e=zt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return ho("SheetJS",e),ho(oS.version,e),ho(oS.version,e),ho("7262",e),e.length>e.l?e.slice(0,e.l):e}function p8e(t,e){e||(e=zt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function g8e(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(or(t,135),or(t,158,p8e(a)),or(t,136))}}function x8e(t,e){var r=Ac();return or(r,131),or(r,128,m8e()),or(r,153,u8e(t.Workbook&&t.Workbook.WBProps||null)),g8e(r,t),h8e(r,t),or(r,132),r.end()}function v8e(t,e,r){return e.slice(-4)===".bin"?A8e(t,r):i8e(t,r)}function y8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?ORe(t,n,r,a,s,i,l):fDe(t,n,r,a,s,i,l)}function b8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?YRe(t,n,r,a,s):WRe(t,n,r,a,s)}function w8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?COe():_Oe()}function N8e(t,e,r,n,a,s,i,l){return e.slice(-4)===".bin"?wOe():NOe()}function C8e(t,e,r,n){return e.slice(-4)===".bin"?vFe(t,r,n):oFe(t,r,n)}function _8e(t,e,r){return Zre(t,r)}function E8e(t,e,r){return e.slice(-4)===".bin"?Eke(t,r):Nke(t,r)}function S8e(t,e,r){return e.slice(-4)===".bin"?gOe(t,r):lOe(t,r)}function I8e(t,e,r){return e.slice(-4)===".bin"?sOe(t):nOe(t)}function j8e(t,e,r,n){return r.slice(-4)===".bin"?iOe(t,e,r,n):void 0}function B8e(t,e,r){return e.slice(-4)===".bin"?eOe(t,e,r):rOe(t,e,r)}function P8e(t,e,r){return(e.slice(-4)===".bin"?x8e:vne)(t)}function T8e(t,e,r,n,a){return(e.slice(-4)===".bin"?GRe:hne)(t,r,n,a)}function k8e(t,e,r){return(e.slice(-4)===".bin"?jFe:Yre)(t,r)}function F8e(t,e,r){return(e.slice(-4)===".bin"?jke:Hre)(t,r)}function O8e(t,e,r){return(e.slice(-4)===".bin"?xOe:rne)(t)}function D8e(t){return(t.slice(-4)===".bin"?tOe:ene)()}var yne=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,bne=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ud(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(yne),s,i,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(bne),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(i+1),n[l]=s[2].slice(1,s[2].length-1));return n}function R8e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(yne),a,s,i,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(bne),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var sb;function M8e(t,e){var r=sb[t]||qn(t);return r==="General"?Tp(e):Gu(r,e)}function L8e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ja(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=rs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[qn(e)]=a}function U8e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||rh[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=t2(t.v):t.w=Tp(t.v):t.w=M8e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=sb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Uv(n)){var a=zm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function Q8e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Zke[n.Pattern]||n.Pattern)}t[e.ID]=e}function V8e(t,e,r,n,a,s,i,l,c,u){var d="General",f=n.StyleID,h={};u=u||{};var A=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&A.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ja(t);break;case"String":n.t="s",n.r=qV(qn(t)),n.v=t.indexOf("<")>-1?qn(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(rs(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=qn(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=mre[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=qV(e||t));break}if(U8e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=qn(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=Ux(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Ux("RC:RC",a):n.ArrayRange&&(n.F=Ux(n.ArrayRange,a),c.push([zn(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(A.forEach(function(g){!h.patternType&&g.patternType&&(h.patternType=g.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function H8e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function eB(t,e){var r=e||{};Qv();var n=yy(eD(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ja(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=ns(r);return i.type="string",uv.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(oe){a.indexOf("<"+oe)>=0&&(s=!0)}),s)return IMe(n,r);sb={"General Number":"General","General Date":an[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":an[15],"Short Date":an[14],"Long Time":an[19],"Medium Time":an[18],"Short Time":an[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:an[2],Standard:an[4],Percent:an[10],Scientific:an[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],h=r.dense?[]:{},A="",m={},p={},g=ud('<Data ss:Type="String">'),x=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",E=0,S=[],O={},P={},T=0,F=[],J=[],ge={},le=[],de,Ae=!1,se=[],Ie=[],Pe={},k=0,H=0,R={Sheets:[],WBProps:{date1904:!1}},M={};a2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var G="";l=a2.exec(n);)switch(l[3]=(G=l[3]).toLowerCase()){case"data":if(G=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?V8e(n.slice(x,l.index),_,g,c[c.length-1][0]=="comment"?ge:m,{c:y,r:b},j,le[y],p,se,r):(_="",g=ud(l[0]),x=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(J.length>0&&(m.c=J),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][y]=m):h[Is(y)+ci(b)]=m),m.HRef&&(m.l={Target:qn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(k=y+(parseInt(m.MergeAcross,10)|0),H=b+(parseInt(m.MergeDown,10)|0),S.push({s:{c:y,r:b},e:{c:k,r:H}})),!r.sheetStubs)m.MergeAcross?y=k+1:++y;else if(m.MergeAcross||m.MergeDown){for(var X=y;X<=k;++X)for(var D=b;D<=H;++D)(X>y||D>b)&&(r.dense?(h[D]||(h[D]=[]),h[D][X]={t:"z"}):h[Is(X)+ci(D)]={t:"z"});y=k+1}else++y;else m=R8e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,J=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=ud(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=ud(l[0]),p.Index&&(b=+p.Index-1),Pe={},(p.AutoFitHeight=="0"||p.Height)&&(Pe.hpx=parseInt(p.Height,10),Pe.hpt=c2(Pe.hpx),Ie[b]=Pe),p.Hidden=="1"&&(Pe.hidden=!0,Ie[b]=Pe));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(A),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(h["!ref"]=vn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(h["!fullref"]=h["!ref"],w.e.r=r.sheetRows-1,h["!ref"]=vn(w))),S.length&&(h["!merges"]=S),le.length>0&&(h["!cols"]=le),Ie.length>0&&(h["!rows"]=Ie),d[A]=h}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=ud(l[0]),A=qn(u.Name),h=r.dense?[]:{},S=[],se=[],Ie=[],M={name:A,Hidden:0},R.Sheets.push(M);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),le=[],Ae=!1}break;case"style":l[1]==="/"?Q8e(j,I,r):I=ud(l[0]);break;case"numberformat":I.nf=qn(ud(l[0]).Format||"General"),sb[I.nf]&&(I.nf=sb[I.nf]);for(var Q=0;Q!=392&&an[Q]!=I.nf;++Q);if(Q==392){for(Q=57;Q!=392;++Q)if(an[Q]==null){SA(I.nf,Q);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(de=ud(l[0]),de.Hidden&&(de.hidden=!0,delete de.Hidden),de.Width&&(de.wpx=parseInt(de.Width,10)),!Ae&&de.wpx>10){Ae=!0,hl=Wre;for(var te=0;te<le.length;++te)le[te]&&K0(le[te])}Ae&&K0(de),le[de.Index-1||le.length]=de;for(var me=0;me<+de.Span;++me)le[le.length]=ns(de);break;case"namedrange":if(l[1]==="/")break;R.Names||(R.Names=[]);var L=cn(l[0]),he={Name:L.Name,Ref:Ux(L.RefersTo.slice(1),{r:0,c:0})};R.Sheets.length>0&&(he.Sheet=R.Sheets.length-1),R.Names.push(he);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(E,l.index):E=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=ud(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?APe(O,G,n.slice(T,l.index)):T=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));H8e(ge),J.push(ge)}else c.push([l[3],!1]),u=ud(l[0]),ge={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ne=ud(l[0]);h["!autofilter"]={ref:Ux(ne.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return OH(n,r);var z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:z=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:z=!1}break;case"excelworkbook":switch(l[3]){case"date1904":R.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:z=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:z=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(T,l.index)){case"SheetHidden":M.Hidden=1;break;case"SheetVeryHidden":M.Hidden=2;break}else T=l.index+l[0].length;break;case"header":h["!margins"]||dp(h["!margins"]={},"xlml"),isNaN(+cn(l[0]).Margin)||(h["!margins"].header=+cn(l[0]).Margin);break;case"footer":h["!margins"]||dp(h["!margins"]={},"xlml"),isNaN(+cn(l[0]).Margin)||(h["!margins"].footer=+cn(l[0]).Margin);break;case"pagemargins":var ce=cn(l[0]);h["!margins"]||dp(h["!margins"]={},"xlml"),isNaN(+ce.Top)||(h["!margins"].top=+ce.Top),isNaN(+ce.Left)||(h["!margins"].left=+ce.Left),isNaN(+ce.Right)||(h["!margins"].right=+ce.Right),isNaN(+ce.Bottom)||(h["!margins"].bottom=+ce.Bottom);break;case"displayrighttoleft":R.Views||(R.Views=[]),R.Views[0]||(R.Views[0]={}),R.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:z=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:z=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:z=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:z=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:z=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:z=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:z=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:z=!1}break;case"smarttags":break;default:z=!1;break}if(z||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?L8e(P,G,F,n.slice(T,l.index)):(F=l,T=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var K={};return!r.bookSheets&&!r.bookProps&&(K.Sheets=d),K.SheetNames=f,K.Workbook=R,K.SSF=ns(an),K.Props=O,K.Custprops=P,K}function dk(t,e){switch(CD(e=e||{}),e.type||"base64"){case"base64":return eB(Xc(t),e);case"binary":case"buffer":case"file":return eB(t,e);case"array":return eB(nm(t),e)}}function $8e(t,e){var r=[];return t.Props&&r.push(hPe(t.Props,e)),t.Custprops&&r.push(mPe(t.Props,t.Custprops)),r.join("")}function K8e(){return""}function G8e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(br("NumberFormat",null,{"ss:Format":Na(an[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(br("Style",s.join(""),i))}),br("Styles",r.join(""))}function wne(t){return br("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+xD(t.Ref,{r:0,c:0})})}function q8e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(wne(a)))}return br("Names",r.join(""))}function z8e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var l=a[i];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(wne(l)))}return s.join("")}function W8e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(br("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(br("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(br("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(br("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Vo("ProtectContents","True")),t["!protect"].objects&&a.push(Vo("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Vo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Vo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Vo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":br("WorksheetOptions",a.join(""),{xmlns:Dc.x})}function X8e(t){return t.map(function(e){var r=gBe(e.t||""),n=br("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return br("Comment",n,{"ss:Author":e.a})}).join("")}function Y8e(t,e,r,n,a,s,i){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+Na(xD(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var c=js(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=Na(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=Na(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(t.v);break;case"b":f="Boolean",h=t.v?"1":"0";break;case"e":f="Error",h=rh[t.v];break;case"d":f="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||an[14]);break;case"s":f="String",h=pBe(t.v||"");break}var A=sm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+A),l["ss:Index"]=i.c+1;var m=t.v!=null?h:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=X8e(t.c)),br("Cell",p,l)}function J8e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=dv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Z8e(t,e,r,n){if(!t["!ref"])return"";var a=zn(t["!ref"]),s=t["!merges"]||[],i=0,l=[];t["!cols"]&&t["!cols"].forEach(function(g,x){K0(g);var y=!!g.width,b=P4(x,g),w={"ss:Index":x+1};y&&(w["ss:Width"]=o2(b.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(br("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[J8e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var A={r:u,c:f},m=sn(A),p=c?(t[u]||[])[f]:t[m];d.push(Y8e(p,m,t,e,r,n,A))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function eMe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],i=s?z8e(s,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?Z8e(s,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(W8e(s,e,t,r)),n.join("")}function tMe(t,e){e||(e={}),t.SSF||(t.SSF=ns(an)),t.SSF&&(Qv(),C4(t.SSF),e.revssf=E4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],sm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($8e(t,e)),r.push(K8e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(br("Worksheet",eMe(n,e,t),{"ss:Name":Na(t.SheetNames[n])}));return r[2]=G8e(t,e),r[3]=q8e(t),di+br("Workbook",r.join(""),{xmlns:Dc.ss,"xmlns:o":Dc.o,"xmlns:x":Dc.x,"xmlns:ss":Dc.ss,"xmlns:dt":Dc.dt,"xmlns:html":Dc.html})}function rMe(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=qBe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=zBe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var nMe=[60,1084,2066,2165,2175];function aMe(t,e,r,n,a){var s=n,i=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}i.push(l),r.l+=s;for(var c=pA(r,r.l),u=fk[c],d=0;u!=null&&nMe.indexOf(c)>-1;)s=pA(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),i.push(l),r.l+=4+s,u=fk[c=pA(r,r.l)];var f=fo(i);Uo(f,0);var h=0;f.lens=[];for(var A=0;A<i.length;++A)f.lens.push(h),h+=i[A].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function of(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=an[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||rh[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=t2(t.v):t.w=Tp(t.v):t.w=Gu(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&Uv(an[n]||String(n))){var a=zm(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function BC(t,e,r){return{v:t,ixfe:e,t:r}}function sMe(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},i={},l=null,c=[],u="",d={},f,h="",A,m,p,g,x={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},S=function(je){return je<8?lp[je]:je<64&&I[je-8]||lp[je]},O=function(je,pe,He){var at=pe.XF.data;if(!(!at||!at.patternType||!He||!He.cellStyles)){pe.s={},pe.s.patternType=at.patternType;var yt;(yt=i2(S(at.icvFore)))&&(pe.s.fgColor={rgb:yt}),(yt=i2(S(at.icvBack)))&&(pe.s.bgColor={rgb:yt})}},P=function(je,pe,He){if(!(Pe>1)&&!(He.sheetRows&&je.r>=He.sheetRows)){if(He.cellStyles&&pe.XF&&pe.XF.data&&O(je,pe,He),delete pe.ixfe,delete pe.XF,f=je,h=sn(je),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),je.r<i.s.r&&(i.s.r=je.r),je.c<i.s.c&&(i.s.c=je.c),je.r+1>i.e.r&&(i.e.r=je.r+1),je.c+1>i.e.c&&(i.e.c=je.c+1),He.cellFormula&&pe.f){for(var at=0;at<y.length;++at)if(!(y[at][0].s.c>je.c||y[at][0].s.r>je.r)&&!(y[at][0].e.c<je.c||y[at][0].e.r<je.r)){pe.F=vn(y[at][0]),(y[at][0].s.c!=je.c||y[at][0].s.r!=je.r)&&delete pe.f,pe.f&&(pe.f=""+fl(y[at][1],i,je,se,T));break}}He.dense?(a[je.r]||(a[je.r]=[]),a[je.r][je.c]=pe):a[h]=pe}},T={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(T.password=e.password);var F,J=[],ge=[],le=[],de=[],Ae=!1,se=[];se.SheetNames=T.snames,se.sharedf=T.sharedf,se.arrayf=T.arrayf,se.names=[],se.XTI=[];var Ie=0,Pe=0,k=0,H=[],R=[],M;T.codepage=1200,Cd(1200);for(var G=!1;t.l<t.length-1;){var X=t.l,D=t.read_shift(2);if(D===0&&Ie===10)break;var Q=t.l===t.length?0:t.read_shift(2),te=fk[D];if(te&&te.f){if(e.bookSheets&&Ie===133&&D!==133)break;if(Ie=D,te.r===2||te.r==12){var me=t.read_shift(2);if(Q-=2,!T.enc&&me!==D&&((me&255)<<8|me>>8)!==D)throw new Error("rt mismatch: "+me+"!="+D);te.r==12&&(t.l+=10,Q-=10)}var L={};if(D===10?L=te.f(t,Q,T):L=aMe(D,te,t,Q,T),Pe==0&&[9,521,1033,2057].indexOf(Ie)===-1)continue;switch(D){case 34:r.opts.Date1904=_.WBProps.date1904=L;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(T.enc||(t.l=0),T.enc=L,!e.password)throw new Error("File is password-protected");if(L.valid==null)throw new Error("Encryption scheme unsupported");if(!L.valid)throw new Error("Password is incorrect");break;case 92:T.lastuser=L;break;case 66:var he=Number(L);switch(he){case 21010:he=1200;break;case 32768:he=1e4;break;case 32769:he=1252;break}Cd(T.codepage=he),G=!0;break;case 317:T.rrtabid=L;break;case 25:T.winlocked=L;break;case 439:r.opts.RefreshAll=L;break;case 12:r.opts.CalcCount=L;break;case 16:r.opts.CalcDelta=L;break;case 17:r.opts.CalcIter=L;break;case 13:r.opts.CalcMode=L;break;case 14:r.opts.CalcPrecision=L;break;case 95:r.opts.CalcSaveRecalc=L;break;case 15:T.CalcRefMode=L;break;case 2211:r.opts.FullCalc=L;break;case 129:L.fDialog&&(a["!type"]="dialog"),L.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),L.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(L);break;case 430:se.push([L]),se[se.length-1].XTI=[];break;case 35:case 547:se[se.length-1].push(L);break;case 24:case 536:M={Name:L.Name,Ref:fl(L.rgce,i,null,se,T)},L.itab>0&&(M.Sheet=L.itab-1),se.names.push(M),se[0]||(se[0]=[],se[0].XTI=[]),se[se.length-1].push(L),L.Name=="_xlnm._FilterDatabase"&&L.itab>0&&L.rgce&&L.rgce[0]&&L.rgce[0][0]&&L.rgce[0][0][0]=="PtgArea3d"&&(R[L.itab-1]={ref:vn(L.rgce[0][0][1][2])});break;case 22:T.ExternCount=L;break;case 23:se.length==0&&(se[0]=[],se[0].XTI=[]),se[se.length-1].XTI=se[se.length-1].XTI.concat(L),se.XTI=se.XTI.concat(L);break;case 2196:if(T.biff<8)break;M!=null&&(M.Comment=L[1]);break;case 18:a["!protect"]=L;break;case 19:L!==0&&T.WTF&&console.error("Password verifier: "+L);break;case 133:s[L.pos]=L,T.snames.push(L.name);break;case 10:{if(--Pe)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=vn(i),e.sheetRows&&e.sheetRows<=i.e.r){var ne=i.e.r;i.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=vn(i),i.e.r=ne}i.e.r++,i.e.c++}J.length>0&&(a["!merges"]=J),ge.length>0&&(a["!objects"]=ge),le.length>0&&(a["!cols"]=le),de.length>0&&(a["!rows"]=de),_.Sheets.push(E)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(T.biff===8&&(T.biff={9:2,521:3,1033:4}[D]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[L.BIFFVer]||8),T.biffguess=L.BIFFVer==0,L.BIFFVer==0&&L.dt==4096&&(T.biff=5,G=!0,Cd(T.codepage=28591)),T.biff==8&&L.BIFFVer==0&&L.dt==16&&(T.biff=2),Pe++)break;if(a=e.dense?[]:{},T.biff<8&&!G&&(G=!0,Cd(T.codepage=e.codepage||1252)),T.biff<5||L.BIFFVer==0&&L.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var z={pos:t.l-Q,name:u};s[z.pos]=z,T.snames.push(u)}else u=(s[X]||{name:""}).name;L.dt==32&&(a["!type"]="chart"),L.dt==64&&(a["!type"]="macro"),J=[],ge=[],T.arrayf=y=[],le=[],de=[],Ae=!1,E={Hidden:(s[X]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[L.r]||[])[L.c]:a[sn({c:L.c,r:L.r})])&&++L.c,b={ixfe:L.ixfe,XF:j[L.ixfe]||{},v:L.val,t:"n"},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 5:case 517:b={ixfe:L.ixfe,XF:j[L.ixfe],v:L.val,t:L.t},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 638:b={ixfe:L.ixfe,XF:j[L.ixfe],v:L.rknum,t:"n"},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 189:for(var ce=L.c;ce<=L.C;++ce){var K=L.rkrec[ce-L.c][0];b={ixfe:K,XF:j[K],v:L.rkrec[ce-L.c][1],t:"n"},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:ce,r:L.r},b,e)}break;case 6:case 518:case 1030:{if(L.val=="String"){l=L;break}if(b=BC(L.val,L.cell.ixfe,L.tt),b.XF=j[b.ixfe],e.cellFormula){var oe=L.formula;if(oe&&oe[0]&&oe[0][0]&&oe[0][0][0]=="PtgExp"){var xe=oe[0][0][1][0],De=oe[0][0][1][1],nt=sn({r:xe,c:De});x[nt]?b.f=""+fl(L.formula,i,L.cell,se,T):b.F=((e.dense?(a[xe]||[])[De]:a[nt])||{}).F}else b.f=""+fl(L.formula,i,L.cell,se,T)}k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P(L.cell,b,e),l=L}break;case 7:case 519:if(l)l.val=L,b=BC(L,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+fl(l.formula,i,l.cell,se,T)),k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(L);var Me=sn(L[0].s);if(A=e.dense?(a[L[0].s.r]||[])[L[0].s.c]:a[Me],e.cellFormula&&A){if(!l||!Me||!A)break;A.f=""+fl(L[1],i,L[0],se,T),A.F=vn(L[0])}}break;case 1212:{if(!e.cellFormula)break;if(h){if(!l)break;x[sn(l.cell)]=L[0],A=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[sn(l.cell)],(A||{}).f=""+fl(L[0],i,f,se,T)}}break;case 253:b=BC(c[L.isst].t,L.ixfe,"s"),c[L.isst].h&&(b.h=c[L.isst].h),b.XF=j[b.ixfe],k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:L.ixfe,XF:j[L.ixfe],t:"z"},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e));break;case 190:if(e.sheetStubs)for(var Je=L.c;Je<=L.C;++Je){var lt=L.ixfe[Je-L.c];b={ixfe:lt,XF:j[lt],t:"z"},k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:Je,r:L.r},b,e)}break;case 214:case 516:case 4:b=BC(L.val,L.ixfe,"s"),b.XF=j[b.ixfe],k>0&&(b.z=H[b.ixfe>>8&63]),of(b,e,r.opts.Date1904),P({c:L.c,r:L.r},b,e);break;case 0:case 512:Pe===1&&(i=L);break;case 252:c=L;break;case 1054:if(T.biff==4){H[k++]=L[1];for(var ft=0;ft<k+163&&an[ft]!=L[1];++ft);ft>=163&&SA(L[1],k+163)}else SA(L[1],L[0]);break;case 30:{H[k++]=L;for(var Ge=0;Ge<k+163&&an[Ge]!=L;++Ge);Ge>=163&&SA(L,k+163)}break;case 229:J=J.concat(L);break;case 93:ge[L.cmo[0]]=T.lastobj=L;break;case 438:T.lastobj.TxO=L;break;case 127:T.lastobj.ImData=L;break;case 440:for(g=L[0].s.r;g<=L[0].e.r;++g)for(p=L[0].s.c;p<=L[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[sn({c:p,r:g})],A&&(A.l=L[1]);break;case 2048:for(g=L[0].s.r;g<=L[0].e.r;++g)for(p=L[0].s.c;p<=L[0].e.c;++p)A=e.dense?(a[g]||[])[p]:a[sn({c:p,r:g})],A&&A.l&&(A.l.Tooltip=L[1]);break;case 28:{if(T.biff<=5&&T.biff>=2)break;A=e.dense?(a[L[0].r]||[])[L[0].c]:a[sn(L[0])];var ye=ge[L[2]];A||(e.dense?(a[L[0].r]||(a[L[0].r]=[]),A=a[L[0].r][L[0].c]={t:"z"}):A=a[sn(L[0])]={t:"z"},i.e.r=Math.max(i.e.r,L[0].r),i.s.r=Math.min(i.s.r,L[0].r),i.e.c=Math.max(i.e.c,L[0].c),i.s.c=Math.min(i.s.c,L[0].c)),A.c||(A.c=[]),m={a:L[1],t:ye.TxO.t},A.c.push(m)}break;case 2173:GFe(j[L.ixfe],L.ext);break;case 125:{if(!T.cellStyles)break;for(;L.e>=L.s;)le[L.e--]={width:L.w/256,level:L.level||0,hidden:!!(L.flags&1)},Ae||(Ae=!0,mD(L.w/256)),K0(le[L.e+1])}break;case 520:{var We={};L.level!=null&&(de[L.r]=We,We.level=L.level),L.hidden&&(de[L.r]=We,We.hidden=!0),L.hpt&&(de[L.r]=We,We.hpt=L.hpt,We.hpx=dv(L.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||dp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[D]]=L;break;case 161:a["!margins"]||dp(a["!margins"]={}),a["!margins"].header=L.header,a["!margins"].footer=L.footer;break;case 574:L.RTL&&(_.Views[0].RTL=!0);break;case 146:I=L;break;case 2198:F=L;break;case 140:w=L;break;case 442:u?E.CodeName=L||E.name:_.WBProps.CodeName=L||"ThisWorkbook";break}}else te||console.error("Missing Info for XLS Record 0x"+D.toString(16)),t.l+=Q}return r.SheetNames=Gs(s).sort(function(qe,je){return Number(qe)-Number(je)}).map(function(qe){return s[qe].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&R.forEach(function(qe,je){r.Sheets[r.SheetNames[je]]["!autofilter"]=qe}),r.Strings=c,r.SSF=ns(an),T.enc&&(r.Encryption=T.enc),F&&(r.Themes=F),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),se.names.length>0&&(_.Names=se.names),r.Workbook=_,r}var ib={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function iMe(t,e,r){var n=Yr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=dH(n,sk,ib.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Yr.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var l=dH(i,ik,ib.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(bre(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function oMe(t,e){var r=[],n=[],a=[],s=0,i,l=QV(sk,"n"),c=QV(ik,"n");if(t.Props)for(i=Gs(t.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Props[i[s]]]);if(t.Custprops)for(i=Gs(t.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(l,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],t.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Ire.indexOf(a[s][0])>-1||yre.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Yr.utils.cfb_add(e,"/SummaryInformation",fH(n,ib.SI,c,ik)),(r.length||u.length)&&Yr.utils.cfb_add(e,"/DocumentSummaryInformation",fH(r,ib.DSI,l,sk,u.length?u:null,ib.UDI))}function Nne(t,e){e||(e={}),CD(e),K6(),e.codepage&&$6(e.codepage);var r,n;if(t.FullPaths){if(Yr.find(t,"/encryption"))throw new Error("File is password-protected");r=Yr.find(t,"!CompObj"),n=Yr.find(t,"/Workbook")||Yr.find(t,"/Book")}else{switch(e.type){case"base64":t=Mc(Xc(t));break;case"binary":t=Mc(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Uo(t,0),n={content:t}}var a,s;if(r&&rMe(r),e.bookProps&&!e.bookSheets)a={};else{var i=Sn?"buffer":"array";if(n&&n.content)a=sMe(n.content,e);else if((s=Yr.find(t,"PerfectOffice_MAIN"))&&s.content)a=up.to_workbook(s.content,(e.type=i,e));else if((s=Yr.find(t,"NativeContent_MAIN"))&&s.content)a=up.to_workbook(s.content,(e.type=i,e));else throw(s=Yr.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Yr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=yOe(t))}var l={};return t.FullPaths&&iMe(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function lMe(t,e){var r=e||{},n=Yr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Yr.utils.cfb_add(n,a,Cne(t,r)),r.biff==8&&(t.Props||t.Custprops)&&oMe(t,n),r.biff==8&&t.vbaraw&&bOe(n,Yr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var u2={0:{f:TDe},1:{f:UDe},2:{f:sRe},3:{f:zDe},4:{f:$De},5:{f:rRe},6:{f:uRe},7:{f:JDe},8:{f:gRe},9:{f:pRe},10:{f:hRe},11:{f:mRe},12:{f:VDe},13:{f:oRe},14:{f:XDe},15:{f:GDe},16:{f:mne},17:{f:fRe},18:{f:eRe},19:{f:sD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:f8e},40:{},42:{},43:{f:uFe},44:{f:lFe},45:{f:AFe},46:{f:mFe},47:{f:hFe},48:{},49:{f:OBe},50:{},51:{f:WFe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Lre},62:{f:cRe},63:{f:aOe},64:{f:kRe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:yl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:jRe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:MDe},148:{f:ODe,p:16},151:{f:NRe},152:{},153:{f:c8e},154:{},155:{},156:{f:o8e},157:{},158:{},159:{T:1,f:_ke},160:{T:-1},161:{T:1,f:lg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xRe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:qFe},336:{T:-1},337:{f:JFe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ak},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Mre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:CRe},427:{f:_Re},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:SRe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:RDe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:bRe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ak},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:mOe},633:{T:1},634:{T:-1},635:{T:1,f:AOe},636:{T:-1},637:{f:LBe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:XRe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:FRe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},fk={6:{f:Jj},10:{f:Rh},12:{f:mi},13:{f:mi},14:{f:ei},15:{f:ei},16:{f:ml},17:{f:ei},18:{f:ei},19:{f:mi},20:{f:xH},21:{f:xH},23:{f:Mre},24:{f:yH},25:{f:ei},26:{},27:{},28:{f:FTe},29:{},34:{f:ei},35:{f:vH},38:{f:ml},39:{f:ml},40:{f:ml},41:{f:ml},42:{f:ei},43:{f:ei},47:{f:Gke},49:{f:oTe},51:{f:mi},60:{},61:{f:rTe},64:{f:ei},65:{f:iTe},66:{f:mi},77:{},80:{},81:{},82:{},85:{f:mi},89:{},90:{},91:{},92:{f:KPe},93:{f:RTe},94:{},95:{f:ei},96:{},97:{},99:{f:ei},125:{f:Lre},128:{f:wTe},129:{f:qPe},130:{f:mi},131:{f:ei},132:{f:ei},133:{f:zPe},134:{},140:{f:KTe},141:{f:mi},144:{},146:{f:zTe},151:{},152:{},153:{},154:{},155:{},156:{f:mi},157:{},158:{},160:{f:tke},161:{f:YTe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:xTe},190:{f:vTe},193:{f:Rh},197:{},198:{},199:{},200:{},201:{},202:{f:ei},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:mi},220:{},221:{f:ei},222:{},224:{f:bTe},225:{f:$Pe},226:{f:Rh},227:{},229:{f:OTe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:XPe},253:{f:cTe},255:{f:JPe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:jre},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ei},353:{f:Rh},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:STe},431:{f:ei},432:{},433:{},434:{},437:{},438:{f:UTe},439:{f:ei},440:{f:QTe},441:{},442:{f:cw},443:{},444:{f:mi},445:{},446:{},448:{f:Rh},449:{f:tTe,r:2},450:{f:Rh},512:{f:mH},513:{f:eke},515:{f:_Te},516:{f:dTe},517:{f:gH},519:{f:rke},520:{f:ZPe},523:{},545:{f:bH},549:{f:hH},566:{},574:{f:aTe},638:{f:gTe},659:{},1048:{},1054:{f:ATe},1084:{},1212:{f:PTe},2048:{f:HTe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:SC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Rh},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:WTe,r:12},2173:{f:KFe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ei,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:BTe,r:12},2197:{},2198:{f:LFe,r:12},2199:{},2200:{},2201:{},2202:{f:TTe,r:12},2203:{f:Rh},2204:{},2205:{},2206:{},2207:{},2211:{f:eTe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:mi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:JTe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:qTe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:mH},1:{},2:{f:oke},3:{f:ske},4:{f:ake},5:{f:gH},7:{f:cke},8:{},9:{f:SC},11:{},22:{f:mi},30:{f:mTe},31:{},32:{},33:{f:bH},36:{},37:{f:hH},50:{f:uke},62:{},52:{},67:{},68:{f:mi},69:{},86:{},126:{},127:{f:nke},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:dke},223:{},234:{},354:{},421:{},518:{f:Jj},521:{f:SC},536:{f:yH},547:{f:vH},561:{},579:{},1030:{f:Jj},1033:{f:SC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function wr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&rD(r)&&t.push(r)}}function cMe(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return wr(t,e,r,a);var s=e;if(!isNaN(s)){for(var i=r.parts||[],l=0,c=0,u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[l]||8224)<=8224;)u+=i[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Aw(t,e,r){return t||(t=zt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function uMe(t,e,r,n){var a=zt(9);return Aw(a,t,e),Bre(r,n||"b",a),a}function dMe(t,e,r){var n=zt(8+2*r.length);return Aw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function fMe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?$i(rs(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?wr(t,2,lke(r,n,a)):wr(t,3,ike(r,n,a));return;case"b":case"e":wr(t,5,uMe(r,n,e.v,e.t));return;case"s":case"str":wr(t,4,dMe(r,n,(e.v||"").slice(0,255)));return}wr(t,1,Aw(null,r,n))}function AMe(t,e,r,n){var a=Array.isArray(e),s=zn(e["!ref"]||"A1"),i,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=vn(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ci(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Is(d)),i=c[d]+l;var f=a?(e[u]||[])[d]:e[i];f&&fMe(t,f,u,d)}}}function hMe(t,e){for(var r=e||{},n=Ac(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return wr(n,r.biff==4?1033:r.biff==3?521:9,fD(t,16,r)),AMe(n,t.Sheets[t.SheetNames[a]],a,r),wr(n,10),n.end()}function mMe(t,e,r){wr(t,49,lTe({sz:12,name:"Arial"},r))}function pMe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&wr(t,1054,hTe(a,e[a],r))})}function gMe(t,e){var r=zt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),wr(t,2151,r),r=zt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Ore(zn(e["!ref"]||"A1"),r),r.write_shift(4,4),wr(t,2152,r)}function xMe(t,e){for(var r=0;r<16;++r)wr(t,224,pH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){wr(t,224,pH(n,0,e))})}function vMe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];wr(t,440,VTe(n)),n[1].Tooltip&&wr(t,2048,$Te(n))}delete e["!links"]}function yMe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&wr(t,125,XTe(P4(a,n),a))})}}function bMe(t,e,r,n,a){var s=16+sm(a.cellXfs,e,a);if(e.v==null&&!e.bf){wr(t,513,Dp(r,n,s));return}if(e.bf)wr(t,6,q6e(e,r,n,a,s));else switch(e.t){case"d":case"n":var i=e.t=="d"?$i(rs(e.v)):e.v;wr(t,515,ETe(r,n,i,s));break;case"b":case"e":wr(t,517,CTe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=yD(a.Strings,e.v,a.revStrings);wr(t,253,uTe(r,n,l,s))}else wr(t,516,fTe(r,n,(e.v||"").slice(0,255),s,a));break;default:wr(t,513,Dp(r,n,s))}}function wMe(t,e,r){var n=Ac(),a=r.SheetNames[t],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},l=(i.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",h=[],A=zn(s["!ref"]||"A1"),m=u?65536:16384;if(A.e.c>255||A.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");A.e.c=Math.min(A.e.c,255),A.e.r=Math.min(A.e.c,m-1)}wr(n,2057,fD(r,16,e)),wr(n,13,Iu(1)),wr(n,12,Iu(100)),wr(n,15,Dl(!0)),wr(n,17,Dl(!1)),wr(n,16,Fp(.001)),wr(n,95,Dl(!0)),wr(n,42,Dl(!1)),wr(n,43,Dl(!1)),wr(n,130,Iu(1)),wr(n,128,NTe()),wr(n,131,Dl(!1)),wr(n,132,Dl(!1)),u&&yMe(n,s["!cols"]),wr(n,512,pTe(A,e)),u&&(s["!links"]=[]);for(var p=A.s.r;p<=A.e.r;++p){f=ci(p);for(var g=A.s.c;g<=A.e.c;++g){p===A.s.r&&(h[g]=Is(g)),d=h[g]+f;var x=c?(s[p]||[])[g]:s[d];x&&(bMe(n,x,p,g,e),u&&x.l&&s["!links"].push([d,x.l]))}}var y=l.CodeName||l.name||a;return u&&wr(n,574,sTe((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&wr(n,229,DTe(s["!merges"])),u&&vMe(n,s),wr(n,442,Pre(y)),u&&gMe(n,s),wr(n,10),n.end()}function NMe(t,e,r){var n=Ac(),a=(t||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(wr(n,2057,fD(t,5,r)),r.bookType=="xla"&&wr(n,135),wr(n,225,l?Iu(1200):null),wr(n,193,CPe(2)),c&&wr(n,191),c&&wr(n,192),wr(n,226),wr(n,92,GPe("SheetJS",r)),wr(n,66,Iu(l?1200:1252)),l&&wr(n,353,Iu(0)),l&&wr(n,448),wr(n,317,ZTe(t.SheetNames.length)),l&&t.vbaraw&&wr(n,211),l&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";wr(n,442,Pre(u))}wr(n,156,Iu(17)),wr(n,25,Dl(!1)),wr(n,18,Dl(!1)),wr(n,19,Iu(0)),l&&wr(n,431,Dl(!1)),l&&wr(n,444,Iu(0)),wr(n,61,nTe()),wr(n,64,Dl(!1)),wr(n,141,Iu(0)),wr(n,34,Dl(t8e(t)=="true")),wr(n,14,Dl(!0)),l&&wr(n,439,Dl(!1)),wr(n,218,Iu(0)),mMe(n,t,r),pMe(n,t.SSF,r),xMe(n,r),l&&wr(n,352,Dl(!1));var d=n.end(),f=Ac();l&&wr(f,140,GTe()),l&&r.Strings&&cMe(f,252,YPe(r.Strings)),wr(f,10);var h=f.end(),A=Ac(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var g=d.length+m+h.length;for(p=0;p<t.SheetNames.length;++p){var x=s[p]||{};wr(A,133,WPe({pos:g,hs:x.Hidden||0,dt:0,name:t.SheetNames[p]},r)),g+=e[p].length}var y=A.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),h.length&&b.push(h),fo(b)}function CMe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ns(an)),t&&t.SSF&&(Qv(),C4(t.SSF),r.revssf=E4(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,_D(r),r.cellXfs=[],sm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=wMe(a,r,t);return n.unshift(NMe(t,n,r)),fo(n)}function Cne(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=hc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return CMe(t,e);case 4:case 3:case 2:return hMe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function PH(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),i=a.index,l=s&&s.index||t.length,c=lBe(t.slice(i,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(i=0;i<c.length;++i){var p=c[i].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(g!="<td"&&g!="<th")){var x=p.split(/<\/t[dh]>/i);for(l=0;l<x.length;++l){var y=x[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=cn(y.slice(0,y.indexOf(">")));h=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||h>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var E=_.t||_["data-t"]||"";if(!b.length){d+=h;continue}if(b=zte(b),A.s.r>u&&(A.s.r=u),A.e.r<u&&(A.e.r=u),A.s.c>d&&(A.s.c=d),A.e.c<d&&(A.e.c=d),!b.length){d+=h;continue}var S={t:"s",v:b};r.raw||!b.trim().length||E=="s"||(b==="TRUE"?S={t:"b",v:!0}:b==="FALSE"?S={t:"b",v:!1}:isNaN(jd(b))?isNaN(cv(b).getDate())||(S={t:"d",v:rs(b)},r.cellDates||(S={t:"n",v:$i(S.v)}),S.z=r.dateNF||an[14]):S={t:"n",v:jd(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=S):n[sn({r:u,c:d})]=S,d+=h}}}}return n["!ref"]=vn(A),m.length&&(n["!merges"]=m),n}function _Me(t,e,r,n){for(var a=t["!merges"]||[],s=[],i=e.s.c;i<=e.e.c;++i){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=sn({r,c:i}),f=n.dense?(t[r]||[])[i]:t[d],h=f&&f.v!=null&&(f.h||Z6(f.w||(LA(f),f.w)||""))||"",A={};l>1&&(A.rowspan=l),c>1&&(A.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(A["data-t"]=f&&f.t||"z",f.v!=null&&(A["data-v"]=f.v),f.z!=null&&(A["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),A.id=(n.id||"sjs")+"-"+d,s.push(br("td",h,A))}}var m="<tr>";return m+s.join("")+"</tr>"}var EMe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',SMe="</body></html>";function IMe(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return am(PH(r[0],e),e);var n=ID();return r.forEach(function(a,s){jD(n,PH(a,e),"Sheet"+(s+1))}),n}function jMe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function _ne(t,e){var r=e||{},n=r.header!=null?r.header:EMe,a=r.footer!=null?r.footer:SMe,s=[n],i=hc(t["!ref"]);r.dense=Array.isArray(t),s.push(jMe(t,i,r));for(var l=i.s.r;l<=i.e.r;++l)s.push(_Me(t,i,l,r));return s.push("</table>"+a),s.join("")}function Ene(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?js(n.origin):n.origin;a=i.r,s=i.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=hc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,A=t["!rows"]||(t["!rows"]=[]),m=0,p=0,g=0,x=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(TH(w)){if(n.display)continue;A[p]={hidden:!0}}var j=w.children;for(g=x=0;g<j.length;++g){var I=j[g];if(!(n.display&&TH(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):zte(I.innerHTML),E=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var S=f[h];S.s.c==x+s&&S.s.r<p+a&&p+a<=S.e.r&&(x=S.e.c+1-s,h=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:x+s},e:{r:p+a+(y||1)-1,c:x+s+(b||1)-1}});var O={t:"s",v:_},P=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?O.t=P||"z":n.raw||_.trim().length==0||P=="s"||(_==="TRUE"?O={t:"b",v:!0}:_==="FALSE"?O={t:"b",v:!1}:isNaN(jd(_))?isNaN(cv(_).getDate())||(O={t:"d",v:rs(_)},n.cellDates||(O={t:"n",v:$i(O.v)}),O.z=n.dateNF||an[14]):O={t:"n",v:jd(_)})),O.z===void 0&&E!=null&&(O.z=E);var T="",F=I.getElementsByTagName("A");if(F&&F.length)for(var J=0;J<F.length&&!(F[J].hasAttribute("href")&&(T=F[J].getAttribute("href"),T.charAt(0)!="#"));++J);T&&T.charAt(0)!="#"&&(O.l={Target:T}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][x+s]=O):t[sn({c:x+s,r:p+a})]=O,u.e.c<x+s&&(u.e.c=x+s),x+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=vn(u),p>=c&&(t["!fullref"]=vn((u.e.r=l.length-m+p-1+a,u))),t}function Sne(t,e){var r=e||{},n=r.dense?[]:{};return Ene(n,t,e)}function BMe(t,e){return am(Sne(t,e),e)}function TH(t){var e="",r=PMe(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function PMe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function TMe(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=qn(e.replace(/<[^>]*>/g,""));return[r]}var kH={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Ine(t,e){var r=e||{},n=eD(t),a=[],s,i,l={name:""},c="",u=0,d,f,h={},A=[],m=r.dense?[]:{},p,g,x={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,S={},O=[],P={},T=0,F=0,J=[],ge=1,le=1,de=[],Ae={Names:[]},se={},Ie=["",""],Pe=[],k={},H="",R=0,M=!1,G=!1,X=0;for(a2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=a2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=vn(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=vn(_)),O.length&&(m["!merges"]=O),J.length&&(m["!rows"]=J),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),A.push(d.name),h[d.name]=m,G=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=cn(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},O=[],J=[],G=!0);break;case"table-row-group":p[1]==="/"?--E:++E;break;case"table-row":case"":if(p[1]==="/"){j+=ge,ge=1;break}if(f=cn(p[0],!1),f.?j=f.-1:j==-1&&(j=0),ge=+f["number-rows-repeated"]||1,ge<10)for(X=0;X<ge;++X)E>0&&(J[j+X]={level:E});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[sn({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,x=cn(p[0],!1),le=parseInt(x["number-columns-repeated"]||"1",10),g={t:"z",v:null},x.formula&&r.cellFormula!=!1&&(g.f=IH(qn(x.formula))),(x.||x["value-type"])=="string"&&(g.t="s",g.v=qn(x["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=g):m[sn({r:j,c:I})]=g),I+=le-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],le=1;var D=ge?j+ge-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),D>_.e.r&&(_.e.r=D),x=cn(p[0],!1),Pe=[],k={},g={t:x.||x["value-type"],v:null},r.cellFormula)if(x.formula&&(x.formula=qn(x.formula)),x["number-matrix-columns-spanned"]&&x["number-matrix-rows-spanned"]&&(T=parseInt(x["number-matrix-rows-spanned"],10)||0,F=parseInt(x["number-matrix-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+F-1}},g.F=vn(P),de.push([P,g.F])),x.formula)g.f=IH(x.formula);else for(X=0;X<de.length;++X)j>=de[X][0].s.r&&j<=de[X][0].e.r&&I>=de[X][0].s.c&&I<=de[X][0].e.c&&(g.F=de[X][1]);switch((x["number-columns-spanned"]||x["number-rows-spanned"])&&(T=parseInt(x["number-rows-spanned"],10)||0,F=parseInt(x["number-columns-spanned"],10)||0,P={s:{r:j,c:I},e:{r:j+T-1,c:I+F-1}},O.push(P)),x["number-columns-repeated"]&&(le=parseInt(x["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=Ja(x["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(x.value);break;case"percentage":g.t="n",g.v=parseFloat(x.value);break;case"currency":g.t="n",g.v=parseFloat(x.value);break;case"date":g.t="d",g.v=rs(x["date-value"]),r.cellDates||(g.t="n",g.v=$i(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=sBe(x["time-value"])/86400,r.cellDates&&(g.t="d",g.v=S4(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(x.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",x["string-value"]!=null&&(y=qn(x["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(M=!1,g.t==="s"&&(g.v=y||"",w.length&&(g.R=w),M=b==0),se.Target&&(g.l=se),Pe.length>0&&(g.c=Pe,Pe=[]),y&&r.cellText!==!1&&(g.w=y),M&&(g.t="z",delete g.v),(!M||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var Q=0;Q<ge;++Q){if(le=parseInt(x["number-columns-repeated"]||"1",10),r.dense)for(m[j+Q]||(m[j+Q]=[]),m[j+Q][I]=Q==0?g:ns(g);--le>0;)m[j+Q][I+le]=ns(g);else for(m[sn({r:j+Q,c:I})]=g;--le>0;)m[sn({r:j+Q,c:I+le})]=ns(g);_.e.c<=I&&(_.e.c=I)}le=parseInt(x["number-columns-repeated"]||"1",10),I+=le-1,le=0,g={},y="",w=[]}se={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;k.t=y,w.length&&(k.R=w),k.a=H,Pe.push(k)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);H="",R=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?H=n.slice(R,p.index):R=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(S[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=cn(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=cn(p[0],!1),c+=kH[p[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=cn(p[0],!1),c+=kH[p[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":i=cn(p[0],!1),Ie=Zj(i["cell-range-address"]);var te={Name:i.name,Ref:Ie[0]+"!"+Ie[1]};G&&(te.Sheet=A.length),Ae.Names.push(te);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!x||!x["string-value"])){var me=TMe(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+me[0]}else cn(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Ie=Zj(cn(p[0])["target-range-address"]),h[Ie[0]]["!autofilter"]={ref:Ie[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(se=cn(p[0],!1),!se.href)break;se.Target=qn(se.href),delete se.href,se.Target.charAt(0)=="#"&&se.Target.indexOf(".")>-1?(Ie=Zj(se.Target.slice(1)),se.Target="#"+Ie[0]+"!"+Ie[1]):se.Target.match(/^\.\.[\\\/]/)&&(se.Target=se.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var L={Sheets:h,SheetNames:A,Workbook:Ae};return r.bookSheets&&delete L.Sheets,L}function FH(t,e){e=e||{},Su(t,"META-INF/manifest.xml")&&sPe(hi(t,"META-INF/manifest.xml"),e);var r=Lc(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Ine(ja(r),e);return Su(t,"meta.xml")&&(n.Props=xre(hi(t,"meta.xml"))),n}function OH(t,e){return Ine(t,e)}var kMe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+n2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return di+e}}(),DH=function(){var t=function(s){return Na(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,l){var c=[];c.push('      <table:table table:name="'+Na(i.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=hc(s["!ref"]||"A1"),h=s["!merges"]||[],A=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",g=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var x=!1,y={},b="";for(A=0;A!=h.length;++A)if(!(h[A].s.c>d)&&!(h[A].s.r>u)&&!(h[A].e.c<d)&&!(h[A].e.r<u)){(h[A].s.c!=d||h[A].s.r!=u)&&(x=!0),y["table:number-columns-spanned"]=h[A].e.c-h[A].s.c+1,y["table:number-rows-spanned"]=h[A].e.r-h[A].s.r+1;break}if(x){c.push(r);continue}var w=sn({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=Na(Z6e(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=hc(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||rs(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=rs(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var E=j.l.Target;E=E.charAt(0)=="#"?"#"+eDe(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),_=br("text:a",_,{"xlink:href":E.replace(/&/g,"&amp;")})}c.push("          "+br("table:table-cell",br("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;K0(f),f.ods=l;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,l){var c=[di],u=n2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=n2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(gre().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function jne(t,e){if(e.bookType=="fods")return DH(t,e);var r=X6(),n="",a=[],s=[];return n="mimetype",Nn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Nn(r,n,DH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Nn(r,n,kMe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Nn(r,n,di+gre()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Nn(r,n,lPe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Nn(r,n,iPe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Rp(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ak(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ja(nm(t))}function FMe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Mc(vf(t))}function OMe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function q0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function RH(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function DMe(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function RMe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function d2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ga(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ks(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Xn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=d2(t,r),s=a&7;a=Math.floor(a/8);var i=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:i=4,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=d2(t,r),l=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function Bo(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(ga(n*8+a.type)),a.type==2&&e.push(ga(a.data.length)),e.push(a.data))})}),q0(e)}function ND(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function bu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=d2(t,n),s=Xn(t.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ks(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Xn(l.data),u=Ks(c[3][0].data);i.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(i.merge=Ks(s[3][0].data)>>>0>0),r.push(i)}return r}function Vg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:ga(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ga(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ga(i.data.length)}],n[2].push({data:Bo(i.meta),type:2})});var s=Bo(n);e.push(ga(s.length)),e.push(s),a.forEach(function(i){return e.push(i)})}),q0(e)}function MMe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=d2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var l=i-59;i=e[r[0]],l>1&&(i|=e[r[0]+1]<<8),l>2&&(i|=e[r[0]+2]<<16),l>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=l}a.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[q0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=q0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function wu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(MMe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return q0(e)}function Hg(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=ga(n),i=s.length;e.push(s),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return q0(e)}function LMe(t,e,r,n){var a=Rp(t),s=a.getUint32(4,!0),i=(n>1?12:8)+RH(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(i,!0),i+=4),i+=RH(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function UMe(t,e,r){var n=Rp(t),a=n.getUint32(8,!0),s=12,i=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=DMe(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function tB(t,e){var r=new Uint8Array(32),n=Rp(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,RMe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function rB(t,e){var r=new Uint8Array(32),n=Rp(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function QMe(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return LMe(t,e,r,t[0]);case 5:return UMe(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function ul(t){var e=Xn(t);return d2(e[1][0].data)}function MH(t,e){var r=Xn(e.data),n=Ks(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var l=Xn(i.data),c=Ks(l[1][0].data)>>>0;switch(n){case 1:s[c]=Ak(l[3][0].data);break;case 8:{var u=t[ul(l[9][0].data)][0],d=Xn(u.data),f=t[ul(d[1][0].data)][0],h=Ks(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var A=Xn(f.data);s[c]=A[3].map(function(m){return Ak(m.data)}).join("")}break}}),s}function VMe(t,e){var r,n,a,s,i,l,c,u,d,f,h,A,m,p,g=Xn(t),x=Ks(g[1][0].data)>>>0,y=Ks(g[2][0].data)>>>0,b=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Ks(g[8][0].data)>0||!1,w,j;if((s=(a=g[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(i=g[7])==null?void 0:i[0])==null?void 0:l.data,j=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=g[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(A=(h=g[4])==null?void 0:h[0])==null?void 0:A.data,j=(p=(m=g[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=Rp(w),E=[],S=0;S<w.length/2;++S){var O=_.getUint16(S*2,!0);O<65535&&E.push([S,O])}if(E.length!=y)throw"Expected ".concat(y," cells, found ").concat(E.length);var P=[];for(S=0;S<E.length-1;++S)P[E[S][0]]=j.subarray(E[S][1]*I,E[S+1][1]*I);return E.length>=1&&(P[E[E.length-1][0]]=j.subarray(E[E.length-1][1]*I)),{R:x,cells:P}}function HMe(t,e){var r,n=Xn(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ks(n[7][0].data)>>>0>0?1:0:-1,s=ND(n[5],function(i){return VMe(i,a)});return{nrows:Ks(n[4][0].data)>>>0,data:s.reduce(function(i,l){return i[l.R]||(i[l.R]=[]),l.cells.forEach(function(c,u){if(i[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));i[l.R][u]=c}),i},[])}}function $Me(t,e,r){var n,a=Xn(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ks(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ks(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=vn(s);var i=Xn(a[4][0].data),l=MH(t,t[ul(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?MH(t,t[ul(i[17][0].data)][0]):[],u=Xn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Xn(f.data),A=t[ul(h[2][0].data)][0],m=Ks(A.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=HMe(t,A);p.data.forEach(function(g,x){g.forEach(function(y,b){var w=sn({r:d+x,c:b}),j=QMe(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function KMe(t,e){var r=Xn(e.data),n={"!ref":"A1"},a=t[ul(r[2][0].data)],s=Ks(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return $Me(t,a[0],n),n}function GMe(t,e){var r,n=Xn(e.data),a={name:(r=n[1])!=null&&r[0]?Ak(n[1][0].data):"",sheets:[]},s=ND(n[2],ul);return s.forEach(function(i){t[i].forEach(function(l){var c=Ks(l.meta[1][0].data);c==6e3&&a.sheets.push(KMe(t,l))})}),a}function qMe(t,e){var r=ID(),n=Xn(e.data),a=ND(n[1],ul);if(a.forEach(function(s){t[s].forEach(function(i){var l=Ks(i.meta[1][0].data);if(l==2){var c=GMe(t,i);c.sheets.forEach(function(u,d){jD(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function nB(t){var e,r,n,a,s={},i=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=wu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=bu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ks(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||i.forEach(function(c){s[c].forEach(function(u){var d=Ks(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return qMe(s,l)}function zMe(t,e,r){var n,a,s,i;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((i=(s=t[8])==null?void 0:s[0])==null?void 0:i.data)&&Ks(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=Rp(t[7][0].data),d=0,f=[],h=Rp(t[4][0].data),A=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),h.setUint16(p*2,A,!0);var g,x;switch(typeof e[p]){case"string":g=tB({t:"s",v:e[p]},r),x=rB({t:"s",v:e[p]},r);break;case"number":g=tB({t:"n",v:e[p]},r),x=rB({t:"n",v:e[p]},r);break;case"boolean":g=tB({t:"b",v:e[p]},r),x=rB({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(g),d+=g.length,m.push(x),A+=x.length,++c}for(t[2][0].data=ga(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),h.setUint16(p*2,65535,!0);return t[6][0].data=q0(f),t[3][0].data=q0(m),c}function WMe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=hc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(vn(n)));var s=vS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(H){return H.forEach(function(R){typeof R=="string"&&i.push(R)})});var l={},c=[],u=Yr.read(e.numbers,{type:"base64"});u.FileIndex.map(function(H,R){return[H,u.FullPaths[R]]}).forEach(function(H){var R=H[0],M=H[1];if(R.type==2&&R.name.match(/\.iwa/)){var G=R.content,X=wu(G),D=bu(X);D.forEach(function(Q){c.push(Q.id),l[Q.id]={deps:[],location:M,type:Ks(Q.messages[0].meta[1][0].data)}})}}),c.sort(function(H,R){return H-R});var d=c.filter(function(H){return H>1}).map(function(H){return[H,ga(H)]});u.FileIndex.map(function(H,R){return[H,u.FullPaths[R]]}).forEach(function(H){var R=H[0];if(H[1],!!R.name.match(/\.iwa/)){var M=bu(wu(R.content));M.forEach(function(G){G.messages.forEach(function(X){d.forEach(function(D){G.messages.some(function(Q){return Ks(Q.meta[1][0].data)!=11006&&OMe(Q.data,D[1])})&&l[D[0]].deps.push(G.id)})})})}});for(var f=Yr.find(u,l[1].location),h=bu(wu(f.content)),A,m=0;m<h.length;++m){var p=h[m];p.id==1&&(A=p)}var g=ul(Xn(A.messages[0].data)[1][0].data);for(f=Yr.find(u,l[g].location),h=bu(wu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=ul(Xn(A.messages[0].data)[2][0].data),f=Yr.find(u,l[g].location),h=bu(wu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);for(g=ul(Xn(A.messages[0].data)[2][0].data),f=Yr.find(u,l[g].location),h=bu(wu(f.content)),m=0;m<h.length;++m)p=h[m],p.id==g&&(A=p);var x=Xn(A.messages[0].data);{x[6][0].data=ga(n.e.r+1),x[7][0].data=ga(n.e.c+1);var y=ul(x[46][0].data),b=Yr.find(u,l[y].location),w=bu(wu(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=Xn(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var E=[];E[1]=E[2]=[{type:0,data:ga(_+420690)}],I[1].push({type:2,data:Bo(E)}),I[2].push({type:0,data:ga(_)}),I[3].push({type:0,data:ga(_)})}I[4]=[],I[5]=[],I[6]=[];for(var S=0;S<=n.e.r;++S)E=[],E[1]=E[2]=[{type:0,data:ga(S+726270)}],I[4].push({type:2,data:Bo(E)}),I[5].push({type:0,data:ga(S)}),I[6].push({type:0,data:ga(S)});w[j].messages[0].data=Bo(I)}b.content=Hg(Vg(w)),b.size=b.content.length,delete x[46];var O=Xn(x[4][0].data);{O[7][0].data=ga(n.e.r+1);var P=Xn(O[1][0].data),T=ul(P[2][0].data);b=Yr.find(u,l[T].location),w=bu(wu(b.content));{if(w[0].id!=T)throw"Bad HeaderStorageBucket";var F=Xn(w[0].messages[0].data);for(S=0;S<s.length;++S){var J=Xn(F[2][0].data);J[1][0].data=ga(S),J[4][0].data=ga(s[S].length),F[2][S]={type:F[2][0].type,data:Bo(J)}}w[0].messages[0].data=Bo(F)}b.content=Hg(Vg(w)),b.size=b.content.length;var ge=ul(O[2][0].data);b=Yr.find(u,l[ge].location),w=bu(wu(b.content));{if(w[0].id!=ge)throw"Bad HeaderStorageBucket";for(F=Xn(w[0].messages[0].data),_=0;_<=n.e.c;++_)J=Xn(F[2][0].data),J[1][0].data=ga(_),J[4][0].data=ga(n.e.r+1),F[2][_]={type:F[2][0].type,data:Bo(J)};w[0].messages[0].data=Bo(F)}b.content=Hg(Vg(w)),b.size=b.content.length;var le=ul(O[4][0].data);(function(){for(var H=Yr.find(u,l[le].location),R=bu(wu(H.content)),M,G=0;G<R.length;++G){var X=R[G];X.id==le&&(M=X)}var D=Xn(M.messages[0].data);{D[3]=[];var Q=[];i.forEach(function(L,he){Q[1]=[{type:0,data:ga(he)}],Q[2]=[{type:0,data:ga(1)}],Q[3]=[{type:2,data:FMe(L)}],D[3].push({type:2,data:Bo(Q)})})}M.messages[0].data=Bo(D);var te=Vg(R),me=Hg(te);H.content=me,H.size=H.content.length})();var de=Xn(O[3][0].data);{var Ae=de[1][0];delete de[2];var se=Xn(Ae.data);{var Ie=ul(se[2][0].data);(function(){for(var H=Yr.find(u,l[Ie].location),R=bu(wu(H.content)),M,G=0;G<R.length;++G){var X=R[G];X.id==Ie&&(M=X)}var D=Xn(M.messages[0].data);{delete D[6],delete de[7];var Q=new Uint8Array(D[5][0].data);D[5]=[];for(var te=0,me=0;me<=n.e.r;++me){var L=Xn(Q);te+=zMe(L,s[me],i),L[1][0].data=ga(me),D[5].push({data:Bo(L),type:2})}D[1]=[{type:0,data:ga(n.e.c+1)}],D[2]=[{type:0,data:ga(n.e.r+1)}],D[3]=[{type:0,data:ga(te)}],D[4]=[{type:0,data:ga(n.e.r+1)}]}M.messages[0].data=Bo(D);var he=Vg(R),ne=Hg(he);H.content=ne,H.size=H.content.length})()}Ae.data=Bo(se)}O[3][0].data=Bo(de)}x[4][0].data=Bo(O)}A.messages[0].data=Bo(x);var Pe=Vg(h),k=Hg(Pe);return f.content=k,f.size=f.content.length,u}function Bne(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function CD(t){Bne([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function _D(t){Bne([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function XMe(t){return Tn.WS.indexOf(t)>-1?"sheet":t==Tn.CS?"chart":t==Tn.DS?"dialog":t==Tn.MS?"macro":t&&t.length?t:"sheet"}function YMe(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,XMe(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function JMe(t,e,r,n,a,s,i,l,c,u,d,f){try{s[n]=rb(Lc(t,r,!0),e);var h=hi(t,e),A;switch(l){case"sheet":A=y8e(h,e,a,c,s[n],u,d,f);break;case"chart":if(A=b8e(h,e,a,c,s[n],u,d,f),!A||!A["!drawel"])break;var m=wy(A["!drawel"].Target,e),p=s2(m),g=oOe(Lc(t,m,!0),rb(Lc(t,p,!0),m)),x=wy(g,m),y=s2(x);A=zRe(Lc(t,x,!0),x,c,rb(Lc(t,y,!0),x),u,A);break;case"macro":A=w8e(h,e,a,c,s[n],u,d,f);break;case"dialog":A=N8e(h,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}i[n]=A;var b=[];s&&s[n]&&Gs(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Tn.CMNT){j=wy(s[n][w].Target,e);var I=S8e(hi(t,j,!0),j,c);if(!I||!I.length)return;NH(A,I,!1)}s[n][w].Type==Tn.TCMNT&&(j=wy(s[n][w].Target,e),b=b.concat(cOe(hi(t,j,!0),c)))}),b&&b.length&&NH(A,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function hu(t){return t.charAt(0)=="/"?t.slice(1):t}function ZMe(t,e){if(Qv(),e=e||{},CD(e),Su(t,"META-INF/manifest.xml")||Su(t,"objectdata.xml"))return FH(t,e);if(Su(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof nB<"u"){if(t.FileIndex)return nB(t);var r=Yr.utils.cfb_new();return $V(t).forEach(function(J){Nn(r,J,uBe(t,J))}),nB(r)}throw new Error("Unsupported NUMBERS file")}if(!Su(t,"[Content_Types].xml"))throw Su(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Su(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=$V(t),a=nPe(Lc(t,"[Content_Types].xml")),s=!1,i,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",hi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!hi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(nb=[],a.sst)try{nb=E8e(hi(t,hu(a.sst)),a.sst,e)}catch(J){if(e.WTF)throw J}e.cellStyles&&a.themes.length&&(c=_8e(Lc(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=C8e(hi(t,hu(a.style)),a.style,c,e))}a.links.map(function(J){try{var ge=rb(Lc(t,s2(hu(J))),J);return j8e(hi(t,hu(J)),ge,J,e)}catch{}});var d=v8e(hi(t,hu(a.workbooks[0])),a.workbooks[0],e),f={},h="";a.coreprops.length&&(h=hi(t,hu(a.coreprops[0]),!0),h&&(f=xre(h)),a.extprops.length!==0&&(h=hi(t,hu(a.extprops[0]),!0),h&&uPe(h,f,e)));var A={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(h=Lc(t,hu(a.custprops[0]),!0),h&&(A=fPe(h,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ge){return ge.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=A),e.bookSheets&&typeof i<"u"&&(m.SheetNames=i),e.bookSheets?m.SheetNames:e.bookProps))return m;i={};var p={};e.bookDeps&&a.calcchain&&(p=I8e(hi(t,hu(a.calcchain)),a.calcchain));var g=0,x={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),E=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");Su(t,E)||(E="xl/_rels/workbook."+I+".rels");var S=rb(Lc(t,E,!0),E.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=B8e(hi(t,hu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=dOe(hi(t,hu(a.people[0])),e)),S&&(S=YMe(S,d.Sheets));var O=hi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var P="sheet";if(S&&S[g]?(y="xl/"+S[g][1].replace(/[\/]?xl\//,""),Su(t,y)||(y=S[g][1]),Su(t,y)||(y=E.replace(/_rels\/.*$/,"")+S[g][1]),P=S[g][2]):(y="xl/worksheets/sheet"+(g+1-O)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var T=!1,F=0;F!=e.sheets.length;++F)typeof e.sheets[F]=="number"&&e.sheets[F]==g&&(T=1),typeof e.sheets[F]=="string"&&e.sheets[F].toLowerCase()==f.SheetNames[g].toLowerCase()&&(T=1);if(!T)continue e}}JMe(t,y,b,f.SheetNames[g],g,x,i,P,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:A,Deps:p,Sheets:i,SheetNames:f.SheetNames,Strings:nb,Styles:u,Themes:c,SSF:ns(an)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(J,ge){J=J.replace(/^Root Entry[\/]/,""),m.keys.push(J),m.files[J]=t.FileIndex[ge]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=hi(t,hu(a.vba[0]),!0):a.defaults&&a.defaults.bin===vOe&&(m.vbaraw=hi(t,"xl/vbaProject.bin",!0))),m}function eLe(t,e){var r=e||{},n="Workbook",a=Yr.find(t,n);try{if(n="/!DataSpaces/Version",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Bke(a.content),n="/!DataSpaces/DataSpaceMap",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=Tke(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=kke(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);Oke(a.content)}catch{}if(n="/EncryptionInfo",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Dke(a.content);if(n="/EncryptedPackage",a=Yr.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function tLe(t,e){return e.bookType=="ods"?jne(t,e):e.bookType=="numbers"?WMe(t,e):e.bookType=="xlsb"?rLe(t,e):nLe(t,e)}function rLe(t,e){Cx=1024,t&&!t.SSF&&(t.SSF=ns(an)),t&&t.SSF&&(Qv(),C4(t.SSF),e.revssf=E4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ab?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=nne.indexOf(e.bookType)>-1,a=uD();_D(e=e||{});var s=X6(),i="",l=0;if(e.cellXfs=[],sm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Nn(s,i,vre(t.Props,e)),a.coreprops.push(i),va(e.rels,2,i,Tn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Nn(s,i,wre(t.Props)),a.extprops.push(i),va(e.rels,3,i,Tn.EXT_PROPS),t.Custprops!==t.Props&&Gs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(s,i,Nre(t.Custprops)),a.custprops.push(i),va(e.rels,4,i,Tn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,Nn(s,i,T8e(l-1,i,e,t,d)),a.sheets.push(i),va(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(f){var A=f["!comments"],m=!1,p="";A&&A.length>0&&(p="xl/comments"+l+"."+r,Nn(s,p,O8e(A,p)),a.comments.push(p),va(d,-1,"../comments"+l+"."+r,Tn.CMNT),m=!0),f["!legacy"]&&m&&Nn(s,"xl/drawings/vmlDrawing"+l+".vml",tne(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Nn(s,s2(i),Lx(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(s,i,F8e(e.Strings,i,e)),a.strs.push(i),va(e.wbrels,-1,"sharedStrings."+r,Tn.SST)),i="xl/workbook."+r,Nn(s,i,P8e(t,i)),a.workbooks.push(i),va(e.rels,1,i,Tn.WB),i="xl/theme/theme1.xml",Nn(s,i,pD(t.Themes,e)),a.themes.push(i),va(e.wbrels,-1,"theme/theme1.xml",Tn.THEME),i="xl/styles."+r,Nn(s,i,k8e(t,i,e)),a.styles.push(i),va(e.wbrels,-1,"styles."+r,Tn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(s,i,t.vbaraw),a.vba.push(i),va(e.wbrels,-1,"vbaProject.bin",Tn.VBA)),i="xl/metadata."+r,Nn(s,i,D8e(i)),a.metadata.push(i),va(e.wbrels,-1,"metadata."+r,Tn.XLMETA),Nn(s,"[Content_Types].xml",pre(a,e)),Nn(s,"_rels/.rels",Lx(e.rels)),Nn(s,"xl/_rels/workbook."+r+".rels",Lx(e.wbrels)),delete e.revssf,delete e.ssf,s}function nLe(t,e){Cx=1024,t&&!t.SSF&&(t.SSF=ns(an)),t&&t.SSF&&(Qv(),C4(t.SSF),e.revssf=E4(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ab?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=nne.indexOf(e.bookType)>-1,a=uD();_D(e=e||{});var s=X6(),i="",l=0;if(e.cellXfs=[],sm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",Nn(s,i,vre(t.Props,e)),a.coreprops.push(i),va(e.rels,2,i,Tn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Nn(s,i,wre(t.Props)),a.extprops.push(i),va(e.rels,3,i,Tn.EXT_PROPS),t.Custprops!==t.Props&&Gs(t.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(s,i,Nre(t.Custprops)),a.custprops.push(i),va(e.rels,4,i,Tn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],A=(h||{})["!type"]||"sheet";switch(A){case"chart":default:i="xl/worksheets/sheet"+l+"."+r,Nn(s,i,hne(l-1,e,t,f)),a.sheets.push(i),va(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Tn.WS[0])}if(h){var m=h["!comments"],p=!1,g="";if(m&&m.length>0){var x=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(x=!0)})}),x&&(g="xl/threadedComments/threadedComment"+l+"."+r,Nn(s,g,uOe(m,d,e)),a.threadedcomments.push(g),va(f,-1,"../threadedComments/threadedComment"+l+"."+r,Tn.TCMNT)),g="xl/comments"+l+"."+r,Nn(s,g,rne(m)),a.comments.push(g),va(f,-1,"../comments"+l+"."+r,Tn.CMNT),p=!0}h["!legacy"]&&p&&Nn(s,"xl/drawings/vmlDrawing"+l+".vml",tne(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Nn(s,s2(i),Lx(f))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(s,i,Hre(e.Strings,e)),a.strs.push(i),va(e.wbrels,-1,"sharedStrings."+r,Tn.SST)),i="xl/workbook."+r,Nn(s,i,vne(t)),a.workbooks.push(i),va(e.rels,1,i,Tn.WB),i="xl/theme/theme1.xml",Nn(s,i,pD(t.Themes,e)),a.themes.push(i),va(e.wbrels,-1,"theme/theme1.xml",Tn.THEME),i="xl/styles."+r,Nn(s,i,Yre(t,e)),a.styles.push(i),va(e.wbrels,-1,"styles."+r,Tn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(s,i,t.vbaraw),a.vba.push(i),va(e.wbrels,-1,"vbaProject.bin",Tn.VBA)),i="xl/metadata."+r,Nn(s,i,ene()),a.metadata.push(i),va(e.wbrels,-1,"metadata."+r,Tn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Nn(s,i,fOe(d)),a.people.push(i),va(e.wbrels,-1,"persons/person.xml",Tn.PEOPLE)),Nn(s,"[Content_Types].xml",pre(a,e)),Nn(s,"_rels/.rels",Lx(e.rels)),Nn(s,"xl/_rels/workbook."+r+".rels",Lx(e.wbrels)),delete e.revssf,delete e.ssf,s}function ED(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Xc(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function aLe(t,e){return Yr.find(t,"EncryptedPackage")?eLe(t,e):Nne(t,e)}function sLe(t,e){var r,n=t,a=e||{};return a.type||(a.type=Sn&&Buffer.isBuffer(t)?"buffer":"base64"),r=Kte(n,a),ZMe(r,a)}function Pne(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return dk(t.slice(r),e);default:break e}return uv.to_workbook(t,e)}function iLe(t,e){var r="",n=ED(t,e);switch(e.type){case"base64":r=Xc(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=kp(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ja(r)),e.type="binary",Pne(r,e)}function oLe(t,e){var r=t;return e.type=="base64"&&(r=Xc(r)),r=Zb.utils.decode(1200,r.slice(2),"str"),e.type="binary",Pne(r,e)}function lLe(t){return t.match(/[^\x00-\x7F]/)?vf(t):t}function aB(t,e,r,n){return n?(r.type="string",uv.to_workbook(t,r)):uv.to_workbook(e,r)}function f2(t,e){K6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return f2(new Uint8Array(t),(r=ns(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Qx={},r.dateNF&&(Qx.dateNF=r.dateNF),r.type||(r.type=Sn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Sn?"buffer":"binary",n=rBe(t),typeof Uint8Array<"u"&&!Sn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=lLe(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),l=new Uint8Array(i);if(l.foo="bar",!l.foo)return r=ns(r),r.type="array",f2(G6(n),r)}switch((a=ED(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return aLe(Yr.read(n,r),r);break;case 9:if(a[1]<=8)return Nne(n,r);break;case 60:return dk(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return Ake(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return Qre.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?sLe(n,r):aB(t,n,r,s);case 239:return a[3]===60?dk(n,r):aB(t,n,r,s);case 255:if(a[1]===254)return oLe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return up.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return up.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return uk.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return zre.to_workbook(n,r);break;case 10:case 13:case 32:return iLe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return fke.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?uk.to_workbook(n,r):aB(t,n,r,s)}function Tne(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return iw(e.file,Yr.write(t,{type:Sn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Yr.write(t,e)}function cLe(t,e){var r=ns(e||{}),n=tLe(t,r);return uLe(n,r)}function uLe(t,e){var r={},n=Sn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Yr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(N4(a))}return e.password&&typeof encrypt_agile<"u"?Tne(encrypt_agile(a,e.password),e):e.type==="file"?iw(e.file,a):e.type=="string"?ja(a):a}function dLe(t,e){var r=e||{},n=lMe(t,r);return Tne(n,r)}function df(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return e2(vf(n));case"binary":return vf(n);case"string":return t;case"file":return iw(e.file,n,"utf8");case"buffer":return Sn?eh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):df(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fLe(t,e){switch(e.type){case"base64":return e2(t);case"binary":return t;case"string":return t;case"file":return iw(e.file,t,"binary");case"buffer":return Sn?eh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function PC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?e2(r):e.type=="string"?ja(r):r;case"file":return iw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function T4(t,e){K6(),a8e(t);var r=ns(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=T4(t,r);return r.type="array",N4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return df(tMe(t,r),r);case"slk":case"sylk":return df(Ure.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return df(_ne(t.Sheets[t.SheetNames[a]],r),r);case"txt":return fLe(kne(t.Sheets[t.SheetNames[a]],r),r);case"csv":return df(SD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return df(Qre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return PC(uk.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return df(uv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return df(zre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return df(Vre.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return df(jne(t,r),r);case"wk1":return PC(up.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return PC(up.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),PC(Cne(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),dLe(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return cLe(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ALe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function hk(t,e,r){var n={};return n.type="file",n.file=e,ALe(n),T4(t,n)}function hLe(t,e,r,n,a,s,i,l){var c=ci(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||t[r])for(var A=e.s.c;A<=e.e.c;++A){var m=i?t[r][A]:t[n[A]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[A]!=null&&(h[s[A]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[A]!=null){if(p==null)if(m.t=="e"&&p===null)h[s[A]]=null;else if(u!==void 0)h[s[A]]=u;else if(d&&p===null)h[s[A]]=null;else continue;else h[s[A]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:LA(m,p,l);p!=null&&(f=!1)}}return{row:h,isempty:f}}function vS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=zn(d);break;case"number":c=zn(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=ci(c.s.r),h=[],A=[],m=0,p=0,g=Array.isArray(t),x=c.s.r,y=0,b={};g&&!t[x]&&(t[x]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(h[y]=Is(y),r=g?t[x][y]:t[h[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=h[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=i=LA(r,null,u),p=b[i]||0,!p)b[i]=1;else{do l=i+"_"+p++;while(b[l]);b[i]=p,b[l]=1}s[y]=l}for(x=c.s.r+a;x<=c.e.r;++x)if(!(j[x]||{}).hidden){var I=hLe(t,c,x,h,n,s,g,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(A[m++]=I.row)}return A.length=m,A}var LH=/"/g;function mLe(t,e,r,n,a,s,i,l){for(var c=!0,u=[],d="",f=ci(r),h=e.s.c;h<=e.e.c;++h)if(n[h]){var A=l.dense?(t[r]||[])[h]:t[n[h]+f];if(A==null)d="";else if(A.v!=null){c=!1,d=""+(l.rawNumbers&&A.t=="n"?A.v:LA(A,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(LH,'""')+'"';break}d=="ID"&&(d='"ID"')}else A.f!=null&&!A.F?(c=!1,d="="+A.f,d.indexOf(",")>=0&&(d='"'+d.replace(LH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(i)}function SD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=zn(t["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var h=n.skipHidden&&t["!cols"]||[],A=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(h[m]||{}).hidden||(f[m]=Is(m));for(var p=0,g=a.s.r;g<=a.e.r;++g)(A[g]||{}).hidden||(d=mLe(t,a,g,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function kne(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=SD(t,e);return r}function pLe(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=zn(t["!ref"]),s="",i=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)i[l]=Is(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ci(d),l=a.s.c;l<=a.e.c;++l)if(e=i[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function Fne(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},i=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?js(n.origin):n.origin;i=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:i+e.length-1+a}};if(s["!ref"]){var f=zn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+e.length-1+a)}else i==-1&&(i=0,d.e.r=e.length-1+a);var h=n.header||[],A=0;e.forEach(function(p,g){Gs(p).forEach(function(x){(A=h.indexOf(x))==-1&&(h[A=h.length]=x);var y=p[x],b="z",w="",j=sn({c:l+A,r:i+g+a});u=A2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=$i(y)),w=n.dateNF||an[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+h.length-1);var m=ci(i);if(a)for(A=0;A<h.length;++A)s[Is(A+l)+m]={t:"s",v:h[A]};return s["!ref"]=vn(d),s}function gLe(t,e){return Fne(null,t,e)}function A2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=js(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?A2(t,sn(e)):A2(t,sn({r:e,c:r||0}))}function xLe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function ID(){return{SheetNames:[],Sheets:{}}}function jD(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=i+a)!=-1;++a);}if(xne(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function vLe(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=xLe(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function yLe(t,e){return t.z=e,t}function One(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function bLe(t,e,r){return One(t,"#"+e,r)}function wLe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function NLe(t,e,r,n){for(var a=typeof e!="string"?e:zn(e),s=typeof e=="string"?e:vn(e),i=a.s.r;i<=a.e.r;++i)for(var l=a.s.c;l<=a.e.c;++l){var c=A2(t,i,l);c.t="n",c.F=s,delete c.v,i==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var Es={encode_col:Is,encode_row:ci,encode_cell:sn,encode_range:vn,decode_col:aD,decode_row:nD,split_cell:FBe,decode_cell:js,decode_range:hc,format_cell:LA,sheet_add_aoa:cre,sheet_add_json:Fne,sheet_add_dom:Ene,aoa_to_sheet:Vv,json_to_sheet:gLe,table_to_sheet:Sne,table_to_book:BMe,sheet_to_csv:SD,sheet_to_txt:kne,sheet_to_json:vS,sheet_to_html:_ne,sheet_to_formulae:pLe,sheet_to_row_object_array:vS,sheet_get_cell:A2,book_new:ID,book_append_sheet:jD,book_set_sheet_visibility:vLe,cell_set_number_format:yLe,cell_set_hyperlink:One,cell_set_internal_link:bLe,cell_add_comment:wLe,sheet_set_array_formula:NLe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const sB=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function La(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function nA(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Mh(t,e=1){const r=Math.floor(nA(t,e));return r>0?r:e}function CLe(t){return Object.values(t||{}).every(r=>La(r)==="")}function bm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(La(a),a));for(const a of e){const s=n.get(La(a));if(s!=null)return t[s]}}function _Le({open:t,code:e,onClose:r}){return t?o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),o.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),o.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function ELe({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new Jb,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function SLe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(0),[m,p]=v.useState(1),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(null),[I,_]=v.useState(""),[E,S]=v.useState(""),[O,P]=v.useState(0),[T,F]=v.useState(1),[J,ge]=v.useState(""),[le,de]=v.useState(""),[Ae,se]=v.useState(""),[Ie,Pe]=v.useState(""),[k,H]=v.useState(""),[R,M]=v.useState(!1),[G,X]=v.useState(""),[D,Q]=v.useState(!1),[te,me]=v.useState("create"),[L,he]=v.useState(!1),[ne,z]=v.useState(""),[ce,K]=v.useState([]),[oe,xe]=v.useState([]),[De,nt]=v.useState(!1),[Me,Je]=v.useState(!1);v.useEffect(()=>{var V;const Be=window.matchMedia("(max-width: 900px)"),gt=()=>Je(Be.matches);return gt(),(V=Be.addEventListener)==null||V.call(Be,"change",gt),()=>{var ae;return(ae=Be.removeEventListener)==null?void 0:ae.call(Be,"change",gt)}},[]);const[lt,ft]=v.useState(!0),[Ge,ye]=v.useState(!0);v.useEffect(()=>{Me?(ft(!1),ye(!1)):(ft(!0),ye(!0))},[Me]);const[We,qe]=v.useState(null);v.useEffect(()=>{n(!0),s("");const Be=ht(ke,"products_candies"),gt=er(Be,on("name","asc")),V=Od(gt,ae=>{const Se=[],_e={};ae.forEach(ut=>{const st=ut.data(),ee=String(st.barcode||"").trim()||void 0;ee&&(_e[ut.id]=ee),Se.push({id:ut.id,name:st.name||"",category:st.category||"",providerPrice:Number(st.providerPrice||0),unitsPerPackage:Number(st.unitsPerPackage||1),barcode:ee,packaging:String(st.packaging||st.empaque||"").trim()||void 0,createdAt:st.createdAt})});const Ee=je.current||{};let ze=!1;for(const ut of Object.keys(_e))if((_e[ut]||"")!==(Ee[ut]||"")){ze=!0;break}l(Se),je.current=_e,n(!1),!pe.current&&ze&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),pe.current=!1},ae=>{console.error(ae),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>V()},[t]);const je=v.useRef({}),pe=v.useRef(!0),He=v.useMemo(()=>{const Be=La(Ae),gt=String(Ie||"").trim(),V=String(k||"").trim().toLowerCase();return V?i.filter(ae=>String(ae.packaging||"").trim().toLowerCase()===V):!Be&&!gt?i:i.filter(ae=>{const Se=`${ae.category} ${ae.name}`.toLowerCase(),_e=Be?Se.includes(Be):!0,Ee=String(ae.barcode||""),ze=gt?Ee.includes(gt):!0;return _e&&ze})},[i,Ae,Ie,k]),at=v.useMemo(()=>{const Be=new Set;return i.forEach(gt=>{const V=String(gt.category||"").trim();V&&Be.add(V)}),Array.from(Be).sort((gt,V)=>gt.localeCompare(V,"es"))},[i]),yt=()=>{u(""),f(""),A(0),p(1),x(""),b("")},bt=async Be=>{Be.preventDefault(),s("");const gt=String(c||"").trim(),V=String(d||"").trim(),ae=Math.max(0,nA(h,0)),Se=Mh(m,1),_e=String(g||"").trim();if(!gt)return s(" La categora es requerida.");if(!V)return s(" El nombre del producto es requerido.");if(ae<=0)return s(" El precio proveedor debe ser > 0.");if(Se<=0)return s(" Und x paquete debe ser > 0.");if(i.some(ze=>La(ze.category)===La(gt)&&La(ze.name)===La(V)))return s(" Ya existe un producto con esa categora y nombre.");if(_e&&i.some(ut=>String(ut.barcode||"")===_e))return s(" Ya existe un producto con ese cdigo de barras.");try{n(!0);const ze={category:gt,name:V,providerPrice:ae,unitsPerPackage:Se,createdAt:dr.now()};_e&&(ze.barcode=_e);const ut=String(y||"").trim();ut&&(ze.packaging=ut);const st=await _n(ht(ke,"products_candies"),ze);l(ee=>[...ee,{id:st.id,...ze}].sort((W,re)=>W.name.localeCompare(re.name,"es"))),s(" Producto creado."),yt()}catch(ze){console.error(ze),s(" Error creando producto.")}finally{n(!1)}},kt=Be=>{j(Be.id),_(Be.category),S(Be.name),P(Be.providerPrice),F(Be.unitsPerPackage||1),ge(String(Be.barcode||"")),de(String(Be.packaging||"")),s("")},Vt=()=>{j(null),_(""),S(""),P(0),F(1),ge(""),de("")},ve=async()=>{if(!w)return;s("");const Be=String(I||"").trim(),gt=String(E||"").trim(),V=Math.max(0,nA(O,0)),ae=Mh(T,1),Se=String(J||"").trim(),_e=String(le||"").trim();if(!Be)return s(" La categora es requerida.");if(!gt)return s(" El nombre del producto es requerido.");if(V<=0)return s(" El precio proveedor debe ser > 0.");if(ae<=0)return s(" Und x paquete debe ser > 0.");if(i.some(ze=>ze.id!==w&&La(ze.category)===La(Be)&&La(ze.name)===La(gt)))return s(" Ya existe otro producto con esa categora y nombre.");if(Se&&i.some(ut=>ut.id!==w&&String(ut.barcode||"")===Se))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const ze={category:Be,name:gt,providerPrice:V,unitsPerPackage:ae,updatedAt:dr.now()};ze.barcode=Se||"",ze.packaging=_e||"",await nn($t(ke,"products_candies",w),ze),l(ut=>ut.map(st=>st.id===w?{...st,category:Be,name:gt,providerPrice:V,unitsPerPackage:ae,barcode:Se||void 0,packaging:_e||void 0}:st).sort((st,ee)=>st.name.localeCompare(ee.name,"es"))),Me&&s(" Producto guardado."),Vt()}catch(ze){console.error(ze),s(" Error actualizando producto.")}finally{n(!1)}},Qe=async Be=>{if(confirm(`Eliminar "${Be.name}" (${Be.category}) del catlogo?`))try{n(!0),await Cn($t(ke,"products_candies",Be.id)),l(V=>V.filter(ae=>ae.id!==Be.id)),s(" Producto eliminado.")}catch(V){console.error(V),s(" Error eliminando producto.")}finally{n(!1)}},Z=()=>{const Be=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],gt=Es.json_to_sheet(Be),V=Es.book_new();Es.book_append_sheet(V,gt,"Productos");const ae=T4(V,{type:"array",bookType:"xlsx"}),Se=new Blob([ae],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),_e=URL.createObjectURL(Se),Ee=document.createElement("a");Ee.href=_e,Ee.download="template_productos_dulces.xlsx",document.body.appendChild(Ee),Ee.click(),Ee.remove(),URL.revokeObjectURL(_e)},$e=Be=>{const gt=[],V=[];Be.forEach((Se,_e)=>{if(!Se||typeof Se!="object"||CLe(Se))return;const Ee=String(bm(Se,["Id","ID","productId","docId"])??"").trim(),ze=String(bm(Se,["Categoria","Categora","Category","cat","category"])??"").trim(),ut=String(bm(Se,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),st=bm(Se,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),ee=bm(Se,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),W=bm(Se,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),re=String(W??"").trim(),fe=bm(Se,["Empaque","Packaging","PackagingType","Pack","Formato"]),Ne=String(fe??"").trim(),be=Math.max(0,nA(st,0)),Xe=Mh(ee,1),it=_e+2;ze||V.push(`Fila ${it}: falta Categoria.`),ut||V.push(`Fila ${it}: falta Producto/Nombre.`),be<=0&&V.push(`Fila ${it}: PrecioProveedor debe ser > 0.`),Xe<=0&&V.push(`Fila ${it}: UnidadesPorPaquete debe ser > 0.`),ze&&ut&&be>0&&Xe>0&&gt.push({id:Ee||void 0,category:ze,name:ut,providerPrice:be,unitsPerPackage:Xe,barcode:re||void 0,packaging:Ne||void 0,_raw:Se})});const ae=new Map;for(const Se of gt){const _e=Se.id?`id::${Se.id}`:`${La(Se.category)}::${La(Se.name)}`;ae.set(_e,Se)}return{rows:Array.from(ae.values()),errors:V}},Le=async Be=>{if(s(""),xe([]),K([]),z((Be==null?void 0:Be.name)||""),!Be)return;const gt=Be.name.toLowerCase(),V=gt.endsWith(".xlsx")||gt.endsWith(".xls"),ae=gt.endsWith(".csv");if(!V&&!ae){xe(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{nt(!0);const Se=new FileReader,_e=await new Promise((re,fe)=>{Se.onerror=()=>fe(new Error("No se pudo leer el archivo.")),Se.onload=()=>re(Se.result),Se.readAsArrayBuffer(Be)}),Ee=f2(new Uint8Array(_e),{type:"array"}),ze=Ee.SheetNames[0],ut=Ee.Sheets[ze],st=Es.sheet_to_json(ut,{defval:""}),{rows:ee,errors:W}=$e(st);K(ee),xe(W),ee.length===0&&W.length===0&&xe(["No se encontraron filas vlidas para importar."])}catch(Se){console.error(Se),xe(["Error leyendo el archivo. Revis que no est corrupto."])}finally{nt(!1)}},Ve=(Be,gt)=>{K(V=>{const ae=[...V],Se=ae[Be];return Se?(ae[Be]={...Se,...gt},ae):V})},At=async()=>{if(s(""),oe.length>0){s(" Correg los errores antes de importar.");return}if(ce.length===0){s(" No hay filas para importar.");return}try{nt(!0);const Be={},gt={},V={};i.forEach(Ee=>{Be[Ee.id]=Ee,gt[`${La(Ee.category)}::${La(Ee.name)}`]=Ee;const ze=String(Ee.barcode||"").trim();ze&&(V[ze]=Ee)});const ae=eg(ke);let Se=0,_e=0;for(const Ee of ce){const ze=String(Ee.category||"").trim(),ut=String(Ee.name||"").trim(),st=Math.max(0,nA(Ee.providerPrice,0)),ee=Mh(Ee.unitsPerPackage,1),W=String(Ee.barcode||"").trim();if(!ze||!ut||st<=0||ee<=0)continue;let re;if(Ee.id&&Be[Ee.id])re=Be[Ee.id];else{const fe=`${La(ze)}::${La(ut)}`;re=gt[fe]}if(!re&&W&&V[W]&&(re=V[W]),re){const fe={category:ze,name:ut,providerPrice:st,unitsPerPackage:ee,updatedAt:dr.now()};Ee.barcode!=null&&(fe.barcode=W||""),Ee.packaging!=null&&(fe.packaging=String(Ee.packaging||"")||""),ae.update($t(ke,"products_candies",re.id),fe),_e+=1}else{const fe=$t(ht(ke,"products_candies")),Ne={category:ze,name:ut,providerPrice:st,unitsPerPackage:ee,createdAt:dr.now()};W&&(Ne.barcode=W),Ee.packaging&&(Ne.packaging=Ee.packaging),ae.set(fe,Ne),Se+=1}}await ae.commit(),s(` Importacin lista. Creados: ${Se}, Actualizados: ${_e}`),he(!1),K([]),xe([]),z(""),e()}catch(Be){console.error(Be),s(" Error importando productos a Firestore.")}finally{nt(!1)}},pt=v.useMemo(()=>{const Be=new Set(i.map(_e=>_e.id)),gt=new Set(i.map(_e=>`${La(_e.category)}::${La(_e.name)}`)),V=new Set(i.map(_e=>String(_e.barcode||"").trim()).filter(Boolean));let ae=0,Se=0;for(const _e of ce){if(_e.id&&Be.has(_e.id)){ae+=1;continue}const Ee=`${La(_e.category)}::${La(_e.name)}`;if(gt.has(Ee)){ae+=1;continue}const ze=String(_e.barcode||"").trim();if(ze&&V.has(ze)){ae+=1;continue}Se+=1}return{willCreate:Se,willUpdate:ae,total:ce.length}},[ce,i]);return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pc,{onClick:e,loading:r||De}),!Me&&o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{he(!0),K([]),xe([]),z("")},children:"Importar"})]})})]}),Me&&o.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>ft(Be=>!Be),children:lt?"Ocultar creacin":"Crear producto"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{he(!0),K([]),xe([]),z("")},children:"Importar"}),o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>ye(Be=>!Be),children:Ge?"Ocultar filtros":"Mostrar filtros"}),Ge&&o.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:k,onChange:Be=>H(Be.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),lt&&o.jsxs("form",{onSubmit:bt,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:Be=>u(Be.target.value),placeholder:"Ej: Gomitas"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:Be=>f(Be.target.value),placeholder:"Ej: Gomita Fresa"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:Be=>b(Be.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:Be=>b(Be.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(h)?"":h,onChange:Be=>A(Math.max(0,nA(Be.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:Be=>p(Mh(Be.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"w-full border rounded px-2 py-1",value:g,onChange:Be=>x(Be.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{me("create"),Q(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:yt,children:"Limpiar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),Ge&&o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:Be=>se(Be.target.value),placeholder:"Buscar por categora o producto"}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block font-semibold",children:"Empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:k,onChange:Be=>H(Be.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),o.jsxs("div",{className:"w-full md:w-1/2",children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:Ie,onChange:Be=>Pe(Be.target.value),placeholder:"Ej: 7445074183182"}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{me("search"),Q(!0),ye(!0)},children:"Escanear producto"})}),o.jsx("div",{className:"mt-2 md:mt-0",children:o.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{se(""),Pe("")},children:"Limpiar filtros"})})]}),o.jsxs("div",{className:"w-full md:w-auto text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),o.jsx("div",{className:"text-lg font-semibold",children:He.length})]})]}),Me?o.jsx("div",{className:"space-y-2",children:r?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):He.length===0?o.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):He.map(Be=>{const gt=w===Be.id,V=We===Be.id,ae=!!String(Be.barcode||"").trim();return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>qe(Se=>Se===Be.id?null:Be.id),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold truncate",children:Be.name}),o.jsx("div",{className:"text-xs text-gray-600 truncate",children:Be.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("div",{className:"font-bold tabular-nums",children:sB(Be.providerPrice)})]})]}),V&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),gt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:Se=>_(Se.target.value)}):o.jsx("div",{className:"font-semibold",children:Be.category})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),gt?o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:T,onChange:Se=>F(Mh(Se.target.value,1))}):o.jsx("div",{className:"font-semibold text-right tabular-nums",children:Be.unitsPerPackage})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),gt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:le,onChange:Se=>de(Se.target.value),children:[o.jsx("option",{value:"",children:"Seleccionar"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"font-semibold",children:Be.packaging||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),gt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(O)?"":O,onChange:Se=>P(Math.max(0,nA(Se.target.value,0)))}):o.jsx("div",{className:"font-semibold tabular-nums",children:sB(Be.providerPrice)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),gt?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:J,onChange:Se=>ge(Se.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{me("edit"),Q(!0)},children:"Escanear"})]}):ae?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{X(String(Be.barcode||"").trim()),M(!0)},children:"Ver cdigo"}):o.jsx("div",{className:"text-gray-600",children:"No"})]})]}),o.jsx("div",{className:"pt-2 flex gap-2",children:gt?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:ve,type:"button",children:"Guardar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{me("edit"),Q(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:Vt,type:"button",children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>kt(Be),type:"button",children:"Editar"}),o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>Qe(Be),type:"button",children:"Borrar"})]})})]})})]},Be.id)})}):o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):He.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):He.map(Be=>{const gt=w===Be.id,V=!!String(Be.barcode||"").trim();return o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:gt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:ae=>_(ae.target.value)}):Be.category}),o.jsx("td",{className:"p-2 border",children:gt?o.jsx("input",{className:"w-full border rounded px-2 py-1",value:E,onChange:ae=>S(ae.target.value)}):Be.name}),o.jsx("td",{className:"p-2 border",children:gt?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:le,onChange:ae=>de(ae.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):Be.packaging||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:gt?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(O)?"":O,onChange:ae=>P(Math.max(0,nA(ae.target.value,0)))}):sB(Be.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:gt?o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:T,onChange:ae=>F(Mh(ae.target.value,1))}):Be.unitsPerPackage}),o.jsx("td",{className:"p-2 border text-center",children:gt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:J,onChange:ae=>ge(ae.target.value),placeholder:"EAN/UPC"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{me("edit"),Q(!0)},children:"Escanear"})]}):V?o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{X(String(Be.barcode||"").trim()),M(!0)},children:"S"}):o.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),o.jsx("td",{className:"p-2 border",children:gt?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:ve,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Vt,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>kt(Be),type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Qe(Be),type:"button",children:"Borrar"})]})})]},Be.id)})})]})}),a?Me&&a===" Producto guardado."?o.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 text-sm",children:a}),o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),Vt(),Q(!1)},children:"Aceptar"})]}):o.jsx("p",{className:"mt-2 text-sm",children:a}):null,o.jsx(_Le,{open:R,code:G,onClose:()=>M(!1)}),o.jsx(ELe,{open:D,onClose:()=>Q(!1),onDetected:async Be=>{const gt=String(Be||"").trim();if(gt){if(te==="edit"&&w){if(i.some(ae=>ae.id!==w&&String(ae.barcode||"")===gt)){s(" Ya existe otro producto con ese cdigo de barras."),ge(gt),Q(!1);return}try{await nn($t(ke,"products_candies",w),{barcode:gt}),l(ae=>ae.map(Se=>Se.id===w?{...Se,barcode:gt}:Se)),ge(gt),Me&&s(" Producto guardado.")}catch(ae){console.error(ae),s(" Error guardando cdigo de barras.")}finally{Q(!1)}return}if(te==="search"){Pe(gt),Q(!1);return}te==="create"?x(Be):ge(Be)}}}),L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>he(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Z,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:Be=>{var gt;return Le(((gt=Be.target.files)==null?void 0:gt[0])||null)}}),ne&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:ne})]}),De&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),oe.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:oe.slice(0,50).map((Be,gt)=>o.jsx("li",{children:Be},gt))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",pt.total," filas (Crear:"," ",pt.willCreate," / Actualizar:"," ",pt.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:At,disabled:De||ce.length===0||oe.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ce.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ce.slice(0,300).map((Be,gt)=>{const V=Be.id?i.some(Ee=>Ee.id===Be.id):!1,ae=i.some(Ee=>`${La(Ee.category)}::${La(Ee.name)}`==`${La(Be.category)}::${La(Be.name)}`),Se=Be.barcode?i.some(Ee=>String(Ee.barcode||"")===Be.barcode):!1,_e=V||ae||Se;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Be.id||"",onChange:Ee=>Ve(gt,{id:Ee.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Be.category,onChange:Ee=>Ve(gt,{category:Ee.target.value}),list:"categories-list"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:Be.name,onChange:Ee=>Ve(gt,{name:Ee.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(Be.providerPrice)?"":Be.providerPrice,onChange:Ee=>Ve(gt,{providerPrice:Math.max(0,nA(Ee.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:Be.unitsPerPackage,onChange:Ee=>Ve(gt,{unitsPerPackage:Mh(Ee.target.value,1)})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Be.packaging||"",onChange:Ee=>Ve(gt,{packaging:Ee.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:Be.barcode||"",onChange:Ee=>Ve(gt,{barcode:Ee.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${_e?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:_e?"ACTUALIZA":"CREA"})})]},`${Be.id||""}-${gt}`)})})]}),o.jsx("datalist",{id:"categories-list",children:at.map(Be=>o.jsx("option",{value:Be},Be))})]}),ce.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ce.length," filas (el import importa todas)."]})]})]})})]})}function BD(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function ob(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):BD(t)}function ILe(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=BD(t);return r>0&&e>0?Math.floor(r/e):Math.max(0,Math.floor(Number(t.packages||0)))}function jLe(t){if(typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages))return Math.max(0,Math.floor(Number(t.remainingPackages)));const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=ob(t);return Math.max(0,Math.floor(r/e))}async function BLe(t){const e=$t(ke,"candy_main_orders",t);if((await li(e)).exists())return e;const n=er(ht(ke,"candy_main_orders"),ir("orderId","==",t)),a=await Lt(n);return a.empty?null:$t(ke,"candy_main_orders",a.docs[0].id)}async function iB(t){if(!t)return;const e=await BLe(t);if(!e)return;const r=er(ht(ke,"inventory_candies"),ir("orderId","==",t)),n=await Lt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=ILe(c),f=jLe(c),h=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),A=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),g=Number(c.unitPriceIsla||0),x=A*d,y=m*d,b=p*d,w=g*d,j=y-x,I=b-x,_=w-x;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:h,providerPrice:A,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:g||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const E=a.get(u);E.packages+=d,E.remainingPackages+=f,E.subtotal+=x,E.totalRivas+=y,E.totalSanJorge+=b,E.totalIsla+=w,E.gainRivas+=j,E.gainSanJorge+=I,E.gainIsla+=_,E.providerPrice=A,E.unitPriceRivas=m||E.unitPriceRivas,E.unitPriceSanJorge=p||E.unitPriceSanJorge,E.unitPriceIsla=g||E.unitPriceIsla,E.unitsPerPackage=h||E.unitsPerPackage,E.name=String(c.productName||E.name),E.category=String(c.category||E.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),i=s.reduce((l,c)=>l+Number(c.packages||0),0);await nn(e,{totalPackages:i,items:s})}async function PLe(t){const{productId:e,saleDate:r,saleId:n}=t,a=t.quantityPacks,s=t.quantity;if(!e)throw new Error("Parmetros invlidos para allocateSaleFIFOCandy (sin producto)");const i=er(ht(ke,"inventory_candies"),ir("productId","==",e)),l=await Lt(i);if(l.empty)throw new Error("No hay inventario para este producto.");const c=l.docs.map(A=>({id:A.id,data:A.data()})).sort((A,m)=>{var b,w;const p=String(A.data.date||""),g=String(m.data.date||"");if(p!==g)return p<g?-1:1;const x=((b=A.data.createdAt)==null?void 0:b.seconds)??0,y=((w=m.data.createdAt)==null?void 0:w.seconds)??0;return x-y});let u=0;for(const A of c){const m=Number(A.data.unitsPerPackage??0);if(m>0){u=m;break}}if(!u)for(const A of c){const m=A.data,p=Number(m.totalUnits??0),g=Number(m.packages??0);if(p>0&&g>0){u=p/g;break}}u||(u=1);let d;if(a!=null&&!Number.isNaN(Number(a))){const A=Math.max(0,Math.floor(Number(a)));if(A<=0)throw new Error("La cantidad en paquetes debe ser mayor que cero.");d=A*u}else{const A=Math.max(0,Math.floor(Number(s||0)));if(A<=0)throw new Error("La cantidad debe ser mayor que cero.");d=A}const f=c.map(A=>$t(ke,"inventory_candies",A.id)),h=[];return await Qi(ke,async A=>{const m=await Promise.all(f.map(g=>A.get(g)));let p=d;for(let g=0;g<f.length&&p>0;g++){const x=f[g],y=m[g];if(!y.exists())continue;const b=y.data(),w=ob(b);if(w<=0)continue;const j=Math.min(w,p),I=Math.max(0,w-j),_=Math.max(1,Math.floor(Number(b.unitsPerPackage||1))),E=Math.floor(I/_);A.update(x,{remaining:I,remainingPackages:E,packages:E}),h.push({batchId:x.id,qty:j,batchDate:String(b.date||""),productName:String(b.productName||"")}),p-=j}if(p>0){const g=Math.ceil(p/u);throw new Error(`Inventario insuficiente. Faltan aproximadamente ${g} paquetes.`)}if(n)for(const g of h)await _n(ht(ke,"batch_candies_allocations"),{saleId:n,saleDate:r,productId:e,productName:g.productName??"",batchId:g.batchId,batchDate:g.batchDate??"",quantity:g.qty,createdAt:dr.now()})}),{allocations:h}}function TLe(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const i=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!i||l<=0||r.push({inventorySellerId:i,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const i of s){const l=String(i.inventorySellerId||""),c=Math.max(0,Math.floor(Number(i.units??i.qty??i.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function h2(t){const e=t.split("#")[0],r=$t(ke,"sales_candies",e),n=await li(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=TLe(a);if(s&&s.allocations.length>0){let u=0;return await Qi(ke,async d=>{const f={};for(const p of s.allocations){const g=p.inventorySellerId,x=Math.max(0,Math.floor(Number(p.units||0)));!g||x<=0||(f[g]=(f[g]||0)+x,u+=x)}const A=Object.keys(f).map(p=>$t(ke,"inventory_candies_sellers",p)),m=await Promise.all(A.map(p=>d.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=Number(x.remainingUnits??x.remaining??0),b=Math.max(0,Math.floor(Number(f[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);d.update(A[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const i=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],h=String((f==null?void 0:f.productId)||d||"");if(!h)continue;const A=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[h]=A.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=h.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const h=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),A=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];i.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:h,allocations:A.length?A:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),h=Array.isArray(a.allocations)?a.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):[];d&&f>0&&i.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:h.length?h:void 0})}if(i.length===0)return await Qi(ke,async u=>{u.delete(r)}),{restored:0};if(i.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Qi(ke,async d=>{const f=[];for(const A of i)for(const m of A.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:$t(ke,"inventory_candies",m.batchId),addBack:p})}const h=await Promise.all(f.map(A=>d.get(A.ref)));for(let A=0;A<f.length;A++){const m=h[A];if(!m.exists())continue;const p=m.data(),g=ob(p),x=Math.max(0,Math.floor(Number(f[A].addBack||0))),y=g+x,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[A].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Qi(ke,async u=>{const d={};for(const p of i){if(!p.productId||p.qty<=0)continue;const g=er(ht(ke,"inventory_candies"),ir("productId","==",p.productId)),y=(await Lt(g)).docs.map(b=>{const w=b.data(),j=BD(w),I=ob(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of i){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const g=d[p.productId]||[];let x=p.qty;for(const y of g){if(x<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,x);f.push({id:y.id,addBack:w}),c+=w,x-=w}for(const y of g){if(x<=0)break;const b=Math.min(x,p.qty);f.push({id:y.id,addBack:b}),c+=b,x-=b}}const h={};for(const p of f)h[p.id]=(h[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const A=Object.keys(h).map(p=>$t(ke,"inventory_candies",p)),m=await Promise.all(A.map(p=>u.get(p)));for(let p=0;p<A.length;p++){const g=m[p];if(!g.exists())continue;const x=g.data(),y=ob(x),b=Math.max(0,Math.floor(Number(h[A[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(x.unitsPerPackage||1))),I=Math.floor(w/j);u.update(A[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function kLe(t){return h2(t)}const Bl=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function oB(t){return isFinite(t)?Math.round(t):0}function dd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function lB(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function FLe(t,e){var i,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((i=t.createdAt)==null?void 0:i.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function OLe(){const[t,e]=v.useState([]),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState(0),[I,_]=v.useState(!1),[E,S]=v.useState(""),[O,P]=v.useState(""),[T,F]=v.useState([]);v.useEffect(()=>{(async()=>{try{s(!0);const G=await Lt(ht(ke,"products_candies")),X=[];G.forEach(me=>{const L=me.data();X.push({id:me.id,name:L.name??"(sin nombre)",category:L.category??"(sin categora)"})}),e(X);const D=er(ht(ke,"inventory_candies"),on("date","desc")),Q=await Lt(D),te=[];Q.forEach(me=>{const L=me.data(),he=Number(L.unitsPerPackage||0),ne=Number(L.totalUnits??L.quantity??(L.packages||0)*(L.unitsPerPackage||0)),z=Number(L.remaining??L.totalUnits??ne??0);te.push({id:me.id,productId:L.productId,productName:L.productName,category:L.category,measurement:L.measurement??"unidad",packages:Number(L.packages||0),unitsPerPackage:he,totalUnits:ne,remaining:z,remainingPackages:typeof L.remainingPackages=="number"?Number(L.remainingPackages):void 0,providerPrice:Number(L.providerPrice||0),subtotal:Number(L.subtotal||0),totalRivas:Number(L.totalRivas||0),totalSanJorge:Number(L.totalSanJorge||0),totalIsla:Number(L.totalIsla||0),gainRivas:Number(L.gainRivas||0),gainSanJorge:Number(L.gainSanJorge||0),gainIsla:Number(L.gainIsla||0),unitPriceRivas:Number(L.unitPriceRivas||0),unitPriceSanJorge:Number(L.unitPriceSanJorge||0),unitPriceIsla:Number(L.unitPriceIsla||0),date:L.date,createdAt:L.createdAt,status:L.status??"PENDIENTE",orderId:L.orderId??null})}),n(te)}catch(G){console.error(G),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const J=v.useMemo(()=>r.filter(G=>!(c&&G.date<c||d&&G.date>d||h&&G.productId!==h||m&&String(G.category||"")!==m)),[r,c,d,h,m]),ge=v.useMemo(()=>{const G=new Set;for(const X of t)X.category&&G.add(X.category);return Array.from(G).sort((X,D)=>X.localeCompare(D))},[t]),le=v.useMemo(()=>{const G=J.reduce((L,he)=>L+dd(he),0),X=J.reduce((L,he)=>L+lB(he),0),D=J.reduce((L,he)=>{const ne=dd(he);return L+Number(he.providerPrice||0)*ne},0),Q=J.reduce((L,he)=>{const ne=dd(he);return L+Number(he.unitPriceRivas||0)*ne},0),te=J.reduce((L,he)=>{const ne=dd(he);return L+Number(he.unitPriceSanJorge||0)*ne},0),me=J.reduce((L,he)=>{const ne=dd(he);return L+Number(he.unitPriceIsla||0)*ne},0);return{totalPaquetes:G,totalPaquetesRestantes:X,totalSubtotal:D,totalRivas:Q,totalSJ:te,totalIsla:me}},[J]),de=v.useMemo(()=>{let G=0,X=0;for(const D of J)D.status==="PENDIENTE"&&(G+=1),D.status==="PAGADO"&&(X+=1);return{totalLotes:J.length,pendientes:G,pagados:X}},[J]),Ae=v.useMemo(()=>{const G=new Map;for(const D of J){const Q=String(D.productId||"");Q&&(G.has(Q)||G.set(Q,{batches:[]}),G.get(Q).batches.push(D))}const X=[];for(const[D,Q]of G.entries()){const te=[...Q.batches].sort(FLe),me=te[0],L=te.reduce((lt,ft)=>lt+dd(ft),0),he=te.reduce((lt,ft)=>lt+lB(ft),0),ne=Number((me==null?void 0:me.providerPrice)||0),z=Number((me==null?void 0:me.unitPriceRivas)||0),ce=Number((me==null?void 0:me.unitPriceIsla)||0),K=te.reduce((lt,ft)=>{const Ge=dd(ft);return lt+Number(ft.providerPrice||0)*Ge},0),oe=te.reduce((lt,ft)=>{const Ge=dd(ft);return lt+Number(ft.unitPriceRivas||0)*Ge},0),xe=te.reduce((lt,ft)=>{const Ge=dd(ft);return lt+Number(ft.unitPriceIsla||0)*Ge},0),De=oe-K,nt=xe-K;let Me="",Je;for(const lt of te)(!Me||String(lt.date||"")>Me)&&(Me=String(lt.date||""),Je=lt.createdAt);X.push({productId:D,productName:(me==null?void 0:me.productName)||"",category:(me==null?void 0:me.category)||"",totalPackages:L,remainingPackages:he,providerPrice:ne,unitPriceRivas:z,unitPriceIsla:ce,subtotal:K,totalRivas:oe,totalIsla:xe,gainRivas:De,gainIsla:nt,lastDate:Me,lastCreatedAt:Je,batchCount:te.length})}return X.sort((D,Q)=>String(Q.lastDate).localeCompare(String(D.lastDate))),X},[J]),se=G=>{x(G.id),b(G.date),j(G.providerPrice),l("")},Ie=()=>{x(null),b(""),j(0)},Pe=async()=>{if(!g)return;const G=r.find(xe=>xe.id===g);if(!G)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const X=dd(G),D=w*X,Q=X>0?D/.8:0,te=X>0?D/.85:0,me=X>0?D/.7:0,L=Q-D,he=te-D,ne=me-D,z=X>0?oB(Q/X):0,ce=X>0?oB(te/X):0,K=X>0?oB(me/X):0,oe=$t(ke,"inventory_candies",g);await nn(oe,{date:y,providerPrice:w,subtotal:D,totalRivas:Q,totalSanJorge:te,totalIsla:me,gainRivas:L,gainSanJorge:he,gainIsla:ne,unitPriceRivas:z,unitPriceSanJorge:ce,unitPriceIsla:K}),n(xe=>xe.map(De=>De.id===g?{...De,date:y,providerPrice:w,subtotal:D,totalRivas:Q,totalSanJorge:te,totalIsla:me,gainRivas:L,gainSanJorge:he,gainIsla:ne,unitPriceRivas:z,unitPriceSanJorge:ce,unitPriceIsla:K}:De)),G.orderId&&await iB(String(G.orderId)),l(" Lote de dulces actualizado"),Ie()},k=async G=>{confirm(`Marcar PAGADO el lote del ${G.date} (${G.productName})?`)&&(await nn($t(ke,"inventory_candies",G.id),{status:"PAGADO"}),n(D=>D.map(Q=>Q.id===G.id?{...Q,status:"PAGADO"}:Q)),l(" Lote marcado como pagado"))},H=async G=>{confirm(`Eliminar el lote del ${G.date} (${G.productName})?`)&&(await Cn($t(ke,"inventory_candies",G.id)),n(D=>D.filter(Q=>Q.id!==G.id)),G.orderId&&await iB(String(G.orderId)),l(" Lote eliminado"))},R=async(G,X)=>{try{s(!0),l("");const D=er(ht(ke,"inventory_candies"),ir("productId","==",G),on("date","desc")),Q=await Lt(D),te=[];Q.forEach(me=>{const L=me.data(),he=Number(L.unitsPerPackage||0),ne=Number(L.totalUnits??L.quantity??(L.packages||0)*(L.unitsPerPackage||0)),z=Number(L.remaining??L.totalUnits??ne??0);te.push({id:me.id,productId:L.productId,productName:L.productName,category:L.category,measurement:L.measurement??"unidad",packages:Number(L.packages||0),unitsPerPackage:he,totalUnits:ne,remaining:z,remainingPackages:typeof L.remainingPackages=="number"?Number(L.remainingPackages):void 0,providerPrice:Number(L.providerPrice||0),subtotal:Number(L.subtotal||0),totalRivas:Number(L.totalRivas||0),totalSanJorge:Number(L.totalSanJorge||0),totalIsla:Number(L.totalIsla||0),gainRivas:Number(L.gainRivas||0),gainSanJorge:Number(L.gainSanJorge||0),gainIsla:Number(L.gainIsla||0),unitPriceRivas:Number(L.unitPriceRivas||0),unitPriceSanJorge:Number(L.unitPriceSanJorge||0),unitPriceIsla:Number(L.unitPriceIsla||0),date:L.date,createdAt:L.createdAt,status:L.status??"PENDIENTE",orderId:L.orderId??null})}),S(G),P(X),F(te),_(!0)}catch(D){console.error(D),l(" Error abriendo detalle del producto.")}finally{s(!1)}},M=async(G,X)=>{const D=r.filter(te=>te.productId===G);if(confirm(`Eliminar COMPLETAMENTE "${X}"?
Esto eliminar ${D.length} lote(s) de este producto.`))try{s(!0),l("");const te=Array.from(new Set(D.map(me=>me.orderId?String(me.orderId):"").filter(Boolean)));for(const me of D)await Cn($t(ke,"inventory_candies",me.id));n(me=>me.filter(L=>L.productId!==G)),l(" Producto eliminado (todos sus lotes).");for(const me of te)await iB(me);I&&E===G&&(_(!1),F([]),S(""),P(""))}catch(te){console.error(te),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:G=>u(G.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:G=>f(G.target.value)})]}),o.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[o.jsx("label",{className:"font-semibold",children:"Categora"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:G=>p(G.target.value),children:[o.jsx("option",{value:"",children:"Todas"}),ge.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),o.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[o.jsx("label",{className:"font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:G=>A(G.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),t.map(G=>o.jsxs("option",{value:G.id,children:[G.name,"  ",G.category]},G.id))]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),A(""),p("")},children:"Quitar filtro"})]}),o.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",de.totalLotes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",de.pendientes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",de.pagados]})]})}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",le.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",le.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",Bl(le.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",Bl(le.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",Bl(le.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",Bl(le.totalIsla)]})]})}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):Ae.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):Ae.map(G=>o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border",children:G.category||""}),o.jsxs("td",{className:"p-2 border max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:G.productName,children:G.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",G.batchCount]})]}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:G.totalPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:G.remainingPackages}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.unitPriceRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.unitPriceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.subtotal)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.totalRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.totalIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.gainRivas)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Bl(G.gainIsla)}),o.jsx("td",{className:"p-2 border",children:G.lastDate||""}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>R(G.productId,G.productName),children:"Detalle"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>M(G.productId,G.productName),children:"Borrar"})]})})]},G.productId))})]})})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("span",{className:"font-semibold",children:"Producto:"})," ",O||""," ",o.jsxs("span",{className:"ml-2",children:[o.jsx("span",{className:"font-semibold",children:"ID:"})," ",E]})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),F([]),S(""),P(""),Ie()},children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),o.jsx("th",{className:"p-2 border",children:"Nmero orden"}),o.jsx("th",{className:"p-2 border",children:"Status"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{className:"whitespace-nowrap",children:T.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):T.map(G=>{const X=g===G.id,D=dd(G),Q=lB(G);return o.jsxs("tr",{className:"text-left",children:[o.jsx("td",{className:"p-2 border align-top",children:X?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:te=>b(te.target.value)}):G.date}),o.jsx("td",{className:"p-2 border align-top",children:G.category||""}),o.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[o.jsx("span",{className:"block truncate",title:G.productName,children:G.productName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",G.id]})]}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:D}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Q}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:G.totalUnits}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:X?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:te=>j(Math.max(0,parseFloat(te.target.value||"0")))}):Bl(G.providerPrice)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Bl(G.unitPriceRivas)}),o.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:Bl(G.unitPriceIsla)}),o.jsx("td",{className:"p-2 border align-top",children:G.orderId?String(G.orderId):""}),o.jsx("td",{className:"p-2 border align-top",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${G.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:G.status})}),o.jsx("td",{className:"p-2 border align-top",children:X?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ie,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[G.status==="PENDIENTE"&&o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>k(G),children:"Pagar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>se(G),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>H(G),children:"Borrar"})]})})]},G.id)})})]})}),o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>M(E,O),children:"Borrar producto (todos los lotes)"})})]})})]})}const cB=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],eo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function K1(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function UH(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function DLe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),i=Jr(a,"vendedor_dulces"),l=Jr(a,"admin"),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(""),[w,j]=v.useState(!1),[I,_]=v.useState(!1),[E,S]=v.useState(null),[O,P]=v.useState([]),T=async Oe=>{var ot;j(!0),_(!0),S(Oe),P([]);try{const mt=await li($t(ke,"sales_candies",Oe));let wt=null;mt.exists()?wt=mt.data():wt=(ot=(await Lt(er(ht(ke,"sales_candies"),ir("name","==",Oe)))).docs[0])==null?void 0:ot.data();const Rt=(Array.isArray(wt==null?void 0:wt.items)?wt.items:wt!=null&&wt.item?[wt.item]:[]).map(Pt=>({productName:String(Pt.productName||""),qty:Number(Pt.qty||0),unitPrice:Number(Pt.unitPrice||0),discount:Number(Pt.discount||0),total:Number(Pt.total||0)}));P(Rt)}catch(mt){console.error(mt)}finally{_(!1)}},[F,J]=v.useState(""),[ge,le]=v.useState("+505 "),[de,Ae]=v.useState(""),[se,Ie]=v.useState(""),[Pe,k]=v.useState("ACTIVO"),[H,R]=v.useState(0),[M,G]=v.useState(""),[X,D]=v.useState(0),[Q,te]=v.useState([]),[me,L]=v.useState(!0),[he,ne]=v.useState(""),[z,ce]=v.useState(null),[K,oe]=v.useState(""),[xe,De]=v.useState("+505 "),[nt,Me]=v.useState(""),[Je,lt]=v.useState(""),[ft,Ge]=v.useState("ACTIVO"),[ye,We]=v.useState(0),[qe,je]=v.useState(""),[pe,He]=v.useState(!1),[at,yt]=v.useState(null),[bt,kt]=v.useState(!1),[Vt,ve]=v.useState([]),[Qe,Z]=v.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[$e,Le]=v.useState(!1),[Ve,At]=v.useState(0),[pt,Be]=v.useState(new Date().toISOString().slice(0,10)),[gt,V]=v.useState(""),[ae,Se]=v.useState(!1),[_e,Ee]=v.useState(null),[ze,ut]=v.useState(""),[st,ee]=v.useState(0),[W,re]=v.useState(""),[fe,Ne]=v.useState(!1),[be,Xe]=v.useState(null),[it,xt]=v.useState(!1),[_t,Et]=v.useState(!1),[Gt,nr]=v.useState(null);v.useEffect(()=>{(async()=>{try{if(L(!0),i&&!s){te([]),ne(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const Oe=await Lt(ht(ke,"sellers_candies")),ot=[];Oe.forEach(Rt=>{const Pt=Rt.data(),qt=String(Pt.status||"ACTIVO");qt==="ACTIVO"&&ot.push({id:Rt.id,name:String(Pt.name||""),status:qt})}),u(ot);const mt=i?er(ht(ke,"customers_candies"),ir("vendorId","==",s),on("createdAt","desc")):er(ht(ke,"customers_candies"),on("createdAt","desc")),wt=await Lt(mt),Ct=[];wt.forEach(Rt=>{const Pt=Rt.data();Ct.push({id:Rt.id,name:Pt.name??"",phone:Pt.phone??"+505 ",place:Pt.place??"",notes:Pt.notes??"",status:Pt.status??"ACTIVO",creditLimit:Number(Pt.creditLimit??0),createdAt:Pt.createdAt??dr.now(),balance:0,sellerId:Pt.sellerId||"",vendorId:Pt.vendorId||"",vendorName:Pt.vendorName||"",initialDebt:Number(Pt.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Rt of Ct)try{const Pt=er(ht(ke,"ar_movements"),ir("customerId","==",Rt.id)),qt=await Lt(Pt);let Ar=0,Cr=null;qt.forEach(oa=>{var Xi,Zu,qd;const ta=oa.data(),ss=Number(ta.amount||0);if(Ar+=ss,ss<0){const tu=ta.date??((Zu=(Xi=ta.createdAt)==null?void 0:Xi.toDate)!=null&&Zu.call(Xi)?ta.createdAt.toDate().toISOString().slice(0,10):""),Lf=(qd=ta.createdAt)!=null&&qd.seconds?Number(ta.createdAt.seconds):0;(!Cr||Lf>=Cr.ts)&&(Cr={date:tu,amount:Math.abs(ss),ts:Lf})}});const as=Number(Rt.initialDebt||0);Rt.balance=as+Ar,Cr?(Rt.lastAbonoDate=Cr==null?void 0:Cr.date,Rt.lastAbonoAmount=Cr==null?void 0:Cr.amount):(Rt.lastAbonoDate="",Rt.lastAbonoAmount=0)}catch{Rt.balance=Number(Rt.initialDebt||0),Rt.lastAbonoDate="",Rt.lastAbonoAmount=0}te(Ct)}catch(Oe){console.error(Oe),ne(" Error cargando clientes.")}finally{L(!1)}})()},[i,s]);const ur=()=>{J(""),le("+505 "),Ae(""),Ie(""),k("ACTIVO"),R(0),G(""),D(0)},rr=async Oe=>{var Ct;if(Oe.preventDefault(),ne(""),!F.trim()){ne("Ingresa el nombre.");return}const ot=K1(ge);if(ot.length<6){ne("Telfono incompleto.");return}const mt=i?s:String(M||"").trim(),wt=mt&&((Ct=c.find(Rt=>Rt.id===mt))==null?void 0:Ct.name)||"";try{const Rt=Number(X||0),Pt=await _n(ht(ke,"customers_candies"),{name:F.trim(),phone:ot,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0),vendorId:mt,vendorName:wt,initialDebt:Rt,createdAt:dr.now()});te(qt=>[{id:Pt.id,name:F.trim(),phone:ot,place:de||"",notes:se||"",status:Pe,creditLimit:Number(H||0),vendorId:mt,vendorName:wt,initialDebt:Rt,createdAt:dr.now(),balance:Rt,lastAbonoDate:"",lastAbonoAmount:0},...qt]),ur(),Ne(!1),ne(" Cliente creado")}catch(Rt){console.error(Rt),ne(" Error al crear cliente")}},cr=Oe=>{if(i){ne(" No permitido: vendedores no editan clientes desde el listado.");return}ce(Oe.id),oe(Oe.name),De(Oe.phone||"+505 "),Me(Oe.place||""),lt(Oe.notes||""),Ge(Oe.status||"ACTIVO"),We(Number(Oe.creditLimit||0)),je(String(Oe.vendorId||""))},Ir=()=>{ce(null),oe(""),De("+505 "),Me(""),lt(""),Ge("ACTIVO"),We(0),je("")},dn=async()=>{var Pt;if(i){ne(" No permitido.");return}if(!z)return;const Oe=K1(xe);if(!K.trim()){ne("Ingresa el nombre.");return}const ot=Q.find(qt=>qt.id===z),mt=String((ot==null?void 0:ot.vendorId)||""),wt=i?s:String(qe||"");if(i&&mt&&mt!==s){ne(" Este cliente pertenece a otro vendedor.");return}if(l&&mt&&wt&&mt!==wt){ne(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const Ct=i?s:String(qe||""),Rt=Ct&&((Pt=c.find(qt=>qt.id===Ct))==null?void 0:Pt.name)||"";try{await nn($t(ke,"customers_candies",z),{name:K.trim(),phone:Oe,place:nt||"",notes:Je||"",status:ft,creditLimit:Number(ye||0),vendorId:Ct,vendorName:Rt}),te(qt=>qt.map(Ar=>Ar.id===z?{...Ar,name:K.trim(),phone:Oe,place:nt||"",notes:Je||"",status:ft,creditLimit:Number(ye||0),vendorId:Ct,vendorName:Rt}:Ar)),Ir(),ne(" Cliente actualizado")}catch(qt){console.error(qt),ne(" Error al actualizar")}},qr=async Oe=>{if(confirm(`Eliminar al cliente "${Oe.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{L(!0);const mt=er(ht(ke,"sales_candies"),ir("customerId","==",Oe.id)),wt=await Lt(mt);for(const Pt of wt.docs){const qt=Pt.id;try{await h2(qt)}catch(Ar){console.warn("restoreSaleAndDeleteCandy error",Ar);try{await Cn($t(ke,"sales_candies",qt))}catch{}}await UH(qt)}const Ct=er(ht(ke,"ar_movements"),ir("customerId","==",Oe.id)),Rt=await Lt(Ct);await Promise.all(Rt.docs.map(Pt=>Cn($t(ke,"ar_movements",Pt.id)))),await Cn($t(ke,"customers_candies",Oe.id)),te(Pt=>Pt.filter(qt=>qt.id!==Oe.id)),ne(" Cliente eliminado y dulces devueltos al inventario")}catch(mt){console.error(mt),ne(" No se pudo eliminar el cliente.")}finally{L(!1)}},ln=(Oe,ot)=>{const mt=Oe.reduce((Pt,qt)=>Pt+(Number(qt.amount)||0),0),wt=Oe.filter(Pt=>Number(Pt.amount)<0).reduce((Pt,qt)=>Pt+Math.abs(Number(qt.amount)||0),0),Ct=Oe.filter(Pt=>Number(Pt.amount)>0).reduce((Pt,qt)=>Pt+(Number(qt.amount)||0),0),Rt=Number(ot||0)+mt;Z({saldoActual:Rt,totalAbonado:wt,totalCargos:Number(ot||0)+Ct,saldoRestante:Rt})},qs=async Oe=>{yt(Oe),ve([]),Z({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),He(!0),xt(!1),Et(!1),nr(null),Le(!1),At(0),Be(new Date().toISOString().slice(0,10)),V(""),Ee(null),kt(!0);try{const ot=er(ht(ke,"ar_movements"),ir("customerId","==",Oe.id)),mt=await Lt(ot),wt=[];mt.forEach(Ct=>{var Ar,Cr;const Rt=Ct.data(),Pt=Rt.date??((Cr=(Ar=Rt.createdAt)==null?void 0:Ar.toDate)!=null&&Cr.call(Ar)?Rt.createdAt.toDate().toISOString().slice(0,10):""),qt=Number(Rt.amount||0);wt.push({id:Ct.id,date:Pt,type:Rt.type??(qt<0?"ABONO":"CARGO"),amount:qt,ref:Rt.ref||{},comment:Rt.comment||"",createdAt:Rt.createdAt})}),wt.sort((Ct,Rt)=>{var Ar,Cr;if(Ct.date!==Rt.date)return Ct.date.localeCompare(Rt.date);const Pt=((Ar=Ct.createdAt)==null?void 0:Ar.seconds)||0,qt=((Cr=Rt.createdAt)==null?void 0:Cr.seconds)||0;return Pt-qt}),ve(wt),ln(wt,Number(Oe.initialDebt||0))}catch(ot){console.error(ot),ne(" No se pudo cargar el estado de cuenta")}finally{kt(!1)}},rt=Oe=>{const ot=Oe.filter(mt=>Number(mt.amount)<0).map(mt=>{var wt;return{date:mt.date,amount:Math.abs(Number(mt.amount||0)),ts:((wt=mt.createdAt)==null?void 0:wt.seconds)||0}}).sort((mt,wt)=>(mt.ts||0)-(wt.ts||0));return ot.length?ot[ot.length-1]:null},Mt=async()=>{if(!at)return;ne("");const Oe=Number(Ve||0);if(!(Oe>0)){ne("Ingresa un monto de abono mayor a 0.");return}const ot=parseFloat(Oe.toFixed(2));if(!pt){ne("Selecciona la fecha del abono.");return}try{Se(!0);const mt={customerId:at.id,type:"ABONO",amount:-ot,date:pt,comment:gt||"",createdAt:dr.now()},Ct={id:(await _n(ht(ke,"ar_movements"),mt)).id,date:pt,type:"ABONO",amount:-ot,comment:gt||"",createdAt:dr.now()},Rt=[...Vt,Ct].sort((Pt,qt)=>{var as,oa;if(Pt.date!==qt.date)return Pt.date.localeCompare(qt.date);const Ar=((as=Pt.createdAt)==null?void 0:as.seconds)||0,Cr=((oa=qt.createdAt)==null?void 0:oa.seconds)||0;return Ar-Cr});ve(Rt),ln(Rt,Number(at.initialDebt||0)),te(Pt=>Pt.map(qt=>{if(qt.id!==at.id)return qt;const Ar=(qt.balance||0)-ot;return{...qt,balance:Ar,lastAbonoDate:pt,lastAbonoAmount:ot}})),yt(Pt=>Pt&&{...Pt,balance:(Pt.balance||0)-ot,lastAbonoDate:pt,lastAbonoAmount:ot}),At(0),V(""),Be(new Date().toISOString().slice(0,10)),Le(!1),ne(" Abono registrado")}catch(mt){console.error(mt),ne(" Error al registrar el abono")}finally{Se(!1)}},Yt=Oe=>{Ee(Oe.id),ut(Oe.date||new Date().toISOString().slice(0,10)),ee(Math.abs(Number(Oe.amount||0))),re(Oe.comment||"")},ar=()=>{Ee(null),ut(""),ee(0),re("")},It=async()=>{if(!_e||!at)return;const Oe=Vt.findIndex(Ct=>Ct.id===_e);if(Oe===-1)return;const ot=Vt[Oe],mt=Number(st||0);if(!(mt>0)){ne("El monto debe ser mayor a 0.");return}const wt=ot.type==="ABONO"?-parseFloat(mt.toFixed(2)):+parseFloat(mt.toFixed(2));try{await nn($t(ke,"ar_movements",_e),{date:ze,amount:wt,comment:W||""});const Ct=[...Vt];Ct[Oe]={...ot,date:ze,amount:wt,comment:W||""},Ct.sort((Ar,Cr)=>{var ta,ss;if(Ar.date!==Cr.date)return Ar.date.localeCompare(Cr.date);const as=((ta=Ar.createdAt)==null?void 0:ta.seconds)||0,oa=((ss=Cr.createdAt)==null?void 0:ss.seconds)||0;return as-oa}),ve(Ct),ln(Ct,Number(at.initialDebt||0));const Rt=Ct.reduce((Ar,Cr)=>Ar+(Number(Cr.amount)||0),0),Pt=Number(at.initialDebt||0)+Rt,qt=rt(Ct);te(Ar=>Ar.map(Cr=>Cr.id===at.id?{...Cr,balance:Pt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Cr)),yt(Ar=>Ar&&{...Ar,balance:Pt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),ar(),ne(" Movimiento actualizado")}catch(Ct){console.error(Ct),ne(" Error al actualizar movimiento")}},mr=async Oe=>{var mt,wt;if(confirm(`Eliminar este movimiento (${Oe.type==="ABONO"?"Abono":"Compra"}) del ${Oe.date}?${Oe.type==="CARGO"&&((mt=Oe.ref)!=null&&mt.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&at)try{if(L(!0),Oe.type==="CARGO"&&((wt=Oe.ref)!=null&&wt.saleId)){try{await h2(Oe.ref.saleId)}catch(Ar){console.warn("restoreSaleAndDeleteCandy error",Ar),L(!1),ne(" No se pudo devolver inventario de la venta.");return}await UH(Oe.ref.saleId)}else await Cn($t(ke,"ar_movements",Oe.id));const Ct=Vt.filter(Ar=>{var Cr,as;return Oe.type==="CARGO"&&((Cr=Oe.ref)!=null&&Cr.saleId)?((as=Ar.ref)==null?void 0:as.saleId)!==Oe.ref.saleId:Ar.id!==Oe.id});ve(Ct),ln(Ct,Number(at.initialDebt||0));const Rt=Ct.reduce((Ar,Cr)=>Ar+(Number(Cr.amount)||0),0),Pt=Number(at.initialDebt||0)+Rt,qt=rt(Ct);te(Ar=>Ar.map(Cr=>Cr.id===at.id?{...Cr,balance:Pt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}:Cr)),yt(Ar=>Ar&&{...Ar,balance:Pt,lastAbonoDate:(qt==null?void 0:qt.date)||"",lastAbonoAmount:(qt==null?void 0:qt.amount)||0}),nr(null),ne(" Movimiento eliminado")}catch(Ct){console.error(Ct),ne(" Error al eliminar movimiento")}finally{L(!1)}},fr=v.useMemo(()=>[...Q].sort((Oe,ot)=>{var mt,wt;return Oe.status!==ot.status?Oe.status==="BLOQUEADO"?1:-1:(((mt=ot.createdAt)==null?void 0:mt.seconds)||0)-(((wt=Oe.createdAt)==null?void 0:wt.seconds)||0)}),[Q]),Ht=Oe=>Oe==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",ct=v.useMemo(()=>{const Oe=h.trim().toLowerCase(),ot=g.trim()===""?null:Number(g),mt=y.trim()===""?null:Number(y);return fr.filter(wt=>{const Ct=!Oe||String(wt.name||"").toLowerCase().includes(Oe),Rt=!m||wt.status===m,Pt=Number(wt.balance||0),qt=ot===null||!Number.isNaN(ot)&&Pt>=ot,Ar=mt===null||!Number.isNaN(mt)&&Pt<=mt;return Ct&&Rt&&qt&&Ar})},[fr,h,m,g,y]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{Ne(!0),i&&G(s)},type:"button",children:"Crear Cliente"})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(Oe=>!Oe),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),o.jsx("input",{className:"w-full border p-2 rounded",value:h,onChange:Oe=>A(Oe.target.value),placeholder:"Buscar por nombre"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:Oe=>p(Oe.target.value||""),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:g,onChange:Oe=>x(Oe.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),o.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:Oe=>b(Oe.target.value),placeholder:""})]})]}),o.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{A(""),p(""),x(""),b("")},children:"Limpiar"})})]})]}),o.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[o.jsx("div",{className:"hidden md:block",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Telfono"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Lugar"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Lmite"}),o.jsx("th",{className:"p-2 border",children:"Saldo"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:me?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):ct.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):ct.map(Oe=>{var mt;const ot=z===Oe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:(mt=Oe.createdAt)!=null&&mt.toDate?Oe.createdAt.toDate().toISOString().slice(0,10):""}),o.jsx("td",{className:"p-2 border text-left",children:ot?o.jsx("input",{className:"w-full border p-1 rounded",value:K,onChange:wt=>oe(wt.target.value)}):o.jsx("div",{className:"font-medium",children:Oe.name})}),o.jsx("td",{className:"p-2 border",children:ot?o.jsx("input",{className:"w-full border p-1 rounded",value:xe,onChange:wt=>De(K1(wt.target.value))}):Oe.phone}),o.jsx("td",{className:"p-2 border",children:ot?o.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:i?s:qe,onChange:wt=>je(wt.target.value),disabled:i,title:"Vendedor asociado",children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(wt=>o.jsx("option",{value:wt.id,children:wt.name},wt.id))]}):Oe.vendorName||""}),o.jsx("td",{className:"p-2 border",children:ot?o.jsxs("select",{className:"w-full border p-1 rounded",value:nt,onChange:wt=>Me(wt.target.value),children:[o.jsx("option",{value:"",children:""}),cB.map(wt=>o.jsx("option",{value:wt,children:wt},wt))]}):Oe.place||""}),o.jsx("td",{className:"p-2 border",children:ot?o.jsxs("select",{className:"w-full border p-1 rounded",value:ft,onChange:wt=>Ge(wt.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Ht(Oe.status)}`,children:Oe.status})}),o.jsx("td",{className:"p-2 border",children:ot?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ye)?"":ye,onChange:wt=>We(Math.max(0,Number(wt.target.value||0)))}):eo(Oe.creditLimit||0)}),o.jsx("td",{className:"p-2 border font-semibold",children:eo(Oe.balance||0)}),o.jsx("td",{className:"p-2 border",children:ot?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Je,onChange:wt=>lt(wt.target.value),maxLength:500}):o.jsx("span",{title:Oe.notes||"",children:(Oe.notes||"").length>40?(Oe.notes||"").slice(0,40)+"":Oe.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:ot?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:dn,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ir,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>cr(Oe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>qr(Oe),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>qs(Oe),children:"Estado de cuenta"})]})})})]},Oe.id)})})]})}),o.jsx("div",{className:"md:hidden",children:me?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):ct.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):o.jsx("div",{className:"space-y-2",children:ct.map(Oe=>{const ot=be===Oe.id,mt=z===Oe.id,wt=o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Ht(Oe.status)}`,children:Oe.status});return o.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ne(""),!mt&&Xe(Ct=>Ct===Oe.id?null:Oe.id)},children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx("div",{className:"truncate font-semibold",children:Oe.name})}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),o.jsx("div",{className:"font-semibold leading-4",children:eo(Oe.balance||0)})]}),wt]})]}),ot&&o.jsxs("div",{className:"px-3 pb-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),o.jsx("div",{className:"font-medium",children:Oe.lastAbonoDate?Oe.lastAbonoDate:""}),o.jsx("div",{className:"text-[12px] text-gray-700",children:Oe.lastAbonoAmount?eo(Oe.lastAbonoAmount):""})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),o.jsx("div",{className:"text-lg font-bold",children:eo(Oe.balance||0)})]})]}),mt?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:K,onChange:Ct=>oe(Ct.target.value)})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded-xl",value:xe,onChange:Ct=>De(K1(Ct.target.value))})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:ft,onChange:Ct=>Ge(Ct.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:nt,onChange:Ct=>Me(Ct.target.value),children:[o.jsx("option",{value:"",children:""}),cB.map(Ct=>o.jsx("option",{value:Ct,children:Ct},Ct))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded-xl",value:i?s:qe,onChange:Ct=>je(Ct.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Ct=>o.jsx("option",{value:Ct.id,children:Ct.name},Ct.id))]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(ye)?"":ye,onChange:Ct=>We(Math.max(0,Number(Ct.target.value||0)))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:Je,onChange:Ct=>lt(Ct.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:dn,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{Ir(),Xe(null)},type:"button",children:"Cancelar"})]})]}):o.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>cr(Oe),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>qr(Oe),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>qs(Oe),type:"button",children:"Estado"})]})]})]},Oe.id)})})})]}),he&&o.jsx("p",{className:"mt-2 text-sm",children:he}),fe&&Lu.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),type:"button",children:"Cerrar"})]}),o.jsxs("form",{onSubmit:rr,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:F,onChange:Oe=>J(Oe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:ge,onChange:Oe=>le(K1(Oe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:Oe=>Ae(Oe.target.value),children:[o.jsx("option",{value:"",children:""}),cB.map(Oe=>o.jsx("option",{value:Oe,children:Oe},Oe))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:Oe=>k(Oe.target.value),children:[o.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),o.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i?s:M,onChange:Oe=>G(Oe.target.value),disabled:i,children:[o.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Oe=>o.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:X===0?"":X,onChange:Oe=>D(Math.max(0,Number(Oe.target.value||0))),placeholder:"Ej: 1500"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:H===0?"":H,onChange:Oe=>R(Math.max(0,Number(Oe.target.value||0))),placeholder:"Ej: 2000"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:se,onChange:Oe=>Ie(Oe.target.value),maxLength:500,placeholder:"Notas del cliente"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[se.length,"/500"]})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cancelar"}),o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),pe&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(at==null?void 0:at.name)||""]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{At(0),Be(new Date().toISOString().slice(0,10)),V(""),Le(!0)},children:"Abonar"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>He(!1),children:"Cerrar"})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),o.jsx("div",{className:"text-xl font-semibold",children:eo(Number((at==null?void 0:at.initialDebt)||0))})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:eo(Qe.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),o.jsx("div",{className:"text-xl font-semibold",children:eo(Qe.totalAbonado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),o.jsx("div",{className:"text-xl font-semibold",children:eo(Qe.saldoRestante)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Referencia"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:bt?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):Vt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):Vt.map(Oe=>{var mt,wt;const ot=_e===Oe.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ot?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ze,onChange:Ct=>ut(Ct.target.value)}):Oe.date||""}),o.jsx("td",{className:"p-2 border",children:Oe.amount>=0?(mt=Oe.ref)!=null&&mt.saleId?o.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>T(Oe.ref.saleId),children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):o.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),o.jsx("td",{className:"p-2 border",children:(wt=Oe.ref)!=null&&wt.saleId?`Venta #${Oe.ref.saleId}`:""}),o.jsx("td",{className:"p-2 border",children:ot?o.jsx("input",{className:"w-full border p-1 rounded",value:W,onChange:Ct=>re(Ct.target.value),placeholder:"Comentario"}):o.jsx("span",{title:Oe.comment||"",children:(Oe.comment||"").length>40?(Oe.comment||"").slice(0,40)+"":Oe.comment||""})}),o.jsx("td",{className:"p-2 border font-semibold",children:ot?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(st)?"":st,onChange:Ct=>{const Rt=Number(Ct.target.value||0),Pt=Number.isFinite(Rt)?Math.max(0,parseFloat(Rt.toFixed(2))):0;ee(Pt)},placeholder:"0.00"}):eo(Oe.amount)}),o.jsx("td",{className:"p-2 border",children:ot?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:It,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ar,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Yt(Oe),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>mr(Oe),children:"Borrar"})]})})]},Oe.id)})})]})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>xt(Oe=>!Oe),children:[o.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),o.jsx("div",{className:"text-sm text-gray-500",children:it?"Ocultar":"Ver"})]}),it&&o.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),o.jsx("div",{className:"font-bold",children:eo(Number((at==null?void 0:at.initialDebt)||0))})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),o.jsx("div",{className:"font-bold",children:eo(Qe.saldoActual)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),o.jsx("div",{className:"font-bold",children:eo(Qe.totalAbonado)})]}),o.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),o.jsx("div",{className:"font-bold",children:eo(Qe.saldoRestante)})]})]})]}),o.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>Et(Oe=>!Oe),children:[o.jsx("div",{className:"font-semibold",children:"Movimientos"}),o.jsx("div",{className:"text-sm text-gray-500",children:_t?"Ocultar":"Ver"})]}),_t&&o.jsx("div",{className:"px-3 pb-3 space-y-2",children:bt?o.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):Vt.length===0?o.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):Vt.map(Oe=>{var Rt;const ot=Gt===Oe.id,mt=_e===Oe.id,wt=Oe.amount>=0?"CARGO":"ABONO",Ct=Oe.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return o.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{mt||nr(Pt=>Pt===Oe.id?null:Oe.id)},children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:Oe.date||""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${Ct}`,children:wt}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),o.jsx("div",{className:"font-semibold",children:eo(Oe.amount)})]})]})]}),ot&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),o.jsx("div",{className:"font-medium",children:(Rt=Oe.ref)!=null&&Rt.saleId?`Venta #${Oe.ref.saleId}`:""})]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),mt?o.jsx("input",{className:"w-full border p-2 rounded-xl",value:W,onChange:Pt=>re(Pt.target.value),placeholder:"Comentario"}):o.jsx("div",{className:"font-medium",children:(Oe.comment||"").trim()||""})]}),mt&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:ze,onChange:Pt=>ut(Pt.target.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(st)?"":st,onChange:Pt=>{const qt=Number(Pt.target.value||0),Ar=Number.isFinite(qt)?Math.max(0,parseFloat(qt.toFixed(2))):0;ee(Ar)}})]})]}),mt?o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:It,type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:ar,type:"button",children:"Cancelar"})]}):o.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Yt(Oe),type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>mr(Oe),type:"button",children:"Borrar"})]})]})]},Oe.id)})})]})]}),$e&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(at==null?void 0:at.name)||""]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:pt,onChange:Oe=>Be(Oe.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Ve===0?"":Ve,onChange:Oe=>{const ot=Number(Oe.target.value||0),mt=Number.isFinite(ot)?Math.max(0,parseFloat(ot.toFixed(2))):0;At(mt)},placeholder:"0.00"}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:gt,onChange:Oe=>V(Oe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[gt.length,"/250"]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Le(!1),disabled:ae,children:"Cancelar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Mt,disabled:ae,children:ae?"Guardando...":"Guardar abono"})]})]})})]})}),w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",E?` #${E}`:""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:I?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):O.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):O.map((Oe,ot)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:Oe.productName}),o.jsx("td",{className:"p-2 border text-right",children:Oe.qty}),o.jsx("td",{className:"p-2 border text-right",children:eo(Oe.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:eo(Oe.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:eo(Oe.total)})]},ot))})]})})]})})]})}const Zl=t=>`C$ ${(Number(t)||0).toFixed(2)}`,RLe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function MLe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function LLe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function ULe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:i,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new Fr;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${MLe(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const h=Number(u||0).toFixed(2),A=c.toFixed(2);d.text(`Comisin vendedor: ${A}%  C$ ${h}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(h=>{f>270&&(d.addPage(),f=12);const A=(h.productName||"").length>50?h.productName.slice(0,47)+"...":h.productName;d.text(A,10,f),d.text(String(h.qty),110,f,{align:"right"}),d.text(`C$ ${Number(h.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(h.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(i||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function QH(t,e){if(!t||!e)return 0;const r=er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",e),ir("productId","==",t)),n=await Lt(r);let a=0;return n.forEach(s=>{const i=s.data(),l=Number(i.remainingUnits??i.remaining??i.totalUnits??0);l>0&&(a+=l)}),a}const VH=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function QLe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let i=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||i<=0)return{allocations:[]};const c=er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",r),ir("productId","==",e),ir("remainingUnits",">",0),on("date","asc"),on("createdAt","asc")),u=await Lt(c);for(const d of u.docs){if(i<=0)break;const f=d.data(),h=Number(f.remainingUnits||0);if(h<=0)continue;const A=Math.min(h,i),m=h-A,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),g=Math.floor(m/p);await nn(d.ref,{remainingUnits:m,remainingPackages:g}),l.push({inventorySellerId:d.id,productId:e,units:A,saleDate:a,saleId:s}),i-=A}return i>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:i}),{allocations:l}}function HH(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function VLe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;Jr(a,"admin"),Jr(a,"vendedor_dulces");const[s,i]=v.useState([]),[l,c]=v.useState([]),[u,d]=v.useState([]),[f,h]=v.useState({}),[A,m]=v.useState("CONTADO"),[p,g]=v.useState("RIVAS"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(VH()),[_,E]=v.useState(""),[S,O]=v.useState(!1),[P,T]=v.useState(""),[F,J]=v.useState([]),[ge,le]=v.useState(!0),[de,Ae]=v.useState(!1),se=v.useMemo(()=>F.reduce((V,ae)=>V+(ae.qtyPackages||0),0),[F]),Ie=v.useMemo(()=>F.reduce((V,ae)=>V+(ae.qtyPackages||0)*(ae.unitsPerPackage||1),0),[F]),Pe=v.useMemo(()=>{const V=F.reduce((ae,Se)=>{const _e=(Number(Se.pricePerPackage)||0)*(Se.qtyPackages||0),Ee=Number(Se.discount)||0,ze=Math.max(0,_e-Ee);return ae+ze},0);return Math.floor(V*100)/100},[F]),[k,H]=v.useState(0),[R,M]=v.useState(""),[G,X]=v.useState(!1),[D,Q]=v.useState(!1),[te,me]=v.useState(""),[L,he]=v.useState("+505 "),[ne,z]=v.useState(""),[ce,K]=v.useState(""),[oe,xe]=v.useState("ACTIVO"),[De,nt]=v.useState(0),[Me,Je]=v.useState(""),lt=()=>{me(""),he("+505 "),z(""),K(""),xe("ACTIVO"),nt(0)},[ft,Ge]=v.useState(!1),ye=async V=>{const ae=String(V||"").trim();if(!ae)return;const Se=At.find(ut=>String(ut.barcode||"")===ae),_e=At.find(ut=>String(ut.sku||"")===ae),Ee=At.find(ut=>String(ut.id||"")===ae),ze=Se||_e||Ee||null;ze?(await ve(ze.id),M(" Producto agregado desde escner."),setTimeout(()=>M(""),2500)):(M(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>M(""),2500))};function We({open:V,onClose:ae,onDetected:Se}){const _e=v.useRef(null),Ee=v.useRef(null),[ze,ut]=v.useState(""),st=v.useRef("");return v.useEffect(()=>{if(!V)return;let ee=!1;const W=new Jb,re=()=>{var Ne,be,Xe;try{(Ne=Ee.current)==null||Ne.stop()}catch{}Ee.current=null;try{const it=(be=_e.current)==null?void 0:be.srcObject;try{(Xe=it==null?void 0:it.getTracks)==null||Xe.call(it).forEach(xt=>xt.stop())}catch{}}catch{}try{_e.current&&(_e.current.srcObject=null)}catch{}};return(async()=>{ut("");try{if(!_e.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Xe=>Xe.stop())}catch{}const Ne=await W.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},_e.current,be=>{if(!ee&&be){const Xe=String(be.getText()||"").trim().replace(/\s+/g,"");if(!Xe||Xe===st.current)return;st.current=Xe,re(),Se(Xe),ae()}});Ee.current=Ne}catch(Ne){const be=String((Ne==null?void 0:Ne.message)||""),Xe=String((Ne==null?void 0:Ne.name)||"");be.toLowerCase().includes("permission")||Xe==="NotAllowedError"?ut("Permiso de cmara denegado."):Xe==="NotFoundError"||be.toLowerCase().includes("notfound")?ut("No se encontr cmara en este dispositivo."):be.toLowerCase().includes("secure")||be.toLowerCase().includes("https")?ut("La cmara requiere HTTPS (sitio seguro)."):ut(be||"No se pudo iniciar el escner.")}})(),()=>{var Ne;ee=!0;try{(Ne=Ee.current)==null||Ne.stop()}catch{}Ee.current=null}},[V,ae,Se]),V?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ae,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:_e,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),ze&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:ze}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const qe=v.useMemo(()=>s.find(V=>V.id===x),[s,x]),je=v.useMemo(()=>S&&_?s.filter(V=>(V.vendorId??V.sellerId??"")===_):s,[s,S,_]),pe=(qe==null?void 0:qe.balance)||0,He=A==="CREDITO"?pe+Math.max(0,Number(Pe||0))-Math.max(0,Number(k||0)):0,at=v.useMemo(()=>u.find(V=>V.id===_)||null,[u,_]),yt=(at==null?void 0:at.commissionPercent)||0,bt=v.useMemo(()=>{const V=Number(Pe||0),ae=Number(yt||0),Se=V*ae/100;return Number(Se.toFixed(2))},[Pe,yt]);v.useEffect(()=>{(async()=>{const V=er(ht(ke,"customers_candies"),on("createdAt","desc")),ae=await Lt(V),Se=[];ae.forEach(ut=>{const st=ut.data();Se.push({id:ut.id,name:st.name??"",phone:st.phone??"+505 ",place:st.place??"",status:st.status??"ACTIVO",creditLimit:Number(st.creditLimit??0),balance:0,sellerId:st.sellerId??st.vendorId??"",vendorId:st.vendorId??st.sellerId??""})});for(const ut of Se)try{const st=er(ht(ke,"ar_movements"),ir("customerId","==",ut.id)),ee=await Lt(st);let W=0;ee.forEach(fe=>W+=Number(fe.data().amount||0));const re=Number(ut.initialDebt||0);ut.balance=W+re}catch{ut.balance=0}i(Se);const _e=er(ht(ke,"products_candies"),on("createdAt","desc")),Ee=await Lt(_e),ze=[];Ee.forEach(ut=>{const st=ut.data();ze.push({id:ut.id,name:st.name??"(sin nombre)",sku:st.sku??"",unitsPerPackage:Number(st.unitsPerPackage??1),barcode:String(st.barcode||""),priceRivas:Number(st.unitPriceRivas??0),priceSanJorge:Number(st.unitPriceSanJorge??0),priceIsla:Number(st.unitPriceIsla??0)})}),c(ze);try{const ut=await Lt(ht(ke,"sellers_candies")),st=[];ut.forEach(ee=>{const W=ee.data(),re=W.branch||"Rivas",fe=LLe(re);st.push({id:ee.id,name:W.name??"(sin nombre)",branch:fe,branchLabel:re,commissionPercent:Number(W.commissionPercent??0)})}),d(st)}catch(ut){console.error("Error cargando vendedores:",ut)}h({})})()},[]),v.useEffect(()=>{var ae,Se;const V=e&&e.length?e:t;if(V&&((ae=V.includes)!=null&&ae.call(V,"vendedor_dulces"))&&r){E(r),O(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(V&&((Se=V.includes)!=null&&Se.call(V,"admin"))){O(!1);return}try{const _e=localStorage.getItem("pos_vendorId")||"",Ee=localStorage.getItem("pos_role")||"";_e&&E(_e),Ee.toUpperCase()==="VENDEDOR"&&O(!0)}catch{}},[t,r]);const kt=async V=>{if(!V){h({});return}const ae=er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",V)),Se=await Lt(ae),_e={};Se.forEach(Ee=>{const ze=Ee.data(),ut=ze.productId||"";if(!ut)return;const st=Number(ze.remainingUnits??ze.remaining??ze.totalUnits??0);st<=0||(_e[ut]=(_e[ut]||0)+st)}),h(_e),J(Ee=>{const ze=[];for(const ut of Ee){const st=_e[ut.productId]??0;st>0&&ze.push({...ut,availableUnits:st})}return ze})};v.useEffect(()=>{if(!_){h({});return}const V=u.find(ae=>ae.id===_);V&&g(V.branch),kt(_)},[_,u]),v.useEffect(()=>{J(V=>V.map(ae=>{const Se=l.find(Ee=>Ee.id===ae.productId);if(!Se)return ae;const _e=p==="RIVAS"?Se.priceRivas:p==="SAN_JORGE"?Se.priceSanJorge:Se.priceIsla;return{...ae,pricePerPackage:Number(_e)||0}}))},[p,l]);async function Vt(V){const{productId:ae,vendorId:Se,branch:_e}=V;if(!ae||!Se)return 0;const Ee=er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",Se),ir("productId","==",ae)),ze=await Lt(Ee);if(ze.empty)return 0;const ut=ze.docs[0].data(),st=Number(ut.unitPriceVendor??0);if(st>0)return st;const ee=Number(_e==="RIVAS"?ut.unitPriceRivas??0:_e==="SAN_JORGE"?ut.unitPriceSanJorge??0:ut.unitPriceIsla??0);return Number(ee||0)}const ve=async V=>{var ee;if(!V)return;if(!_){M("Selecciona primero el vendedor para usar su inventario."),T("");return}if(F.some(W=>W.productId===V)){T("");return}const ae=l.find(W=>W.id===V);if(!ae){T("");return}const Se=await QH(V,_),_e=((ee=u.find(W=>W.id===_))==null?void 0:ee.branch)??p,Ee=await Vt({productId:V,vendorId:_,branch:_e}),ut=await(async W=>{const{productId:re,vendorId:fe}=W;if(!re||!fe)return 0;try{const Ne=er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",fe),ir("productId","==",re)),be=await Lt(Ne);if(be.empty)return 0;const Xe=be.docs[0].data();return Number(Xe.providerPrice??0)}catch{return 0}})({productId:V,vendorId:_}),st={productId:V,productName:ae.name||"",sku:ae.sku||"",unitsPerPackage:ae.unitsPerPackage||1,pricePerPackage:Number(Ee)||0,availableUnits:Number(Se)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(ut)||0,margenVendedor:0};J(W=>[...W,st]),T("")},Qe=(V,ae)=>{J(Se=>Se.map(_e=>{if(_e.productId!==V)return _e;if(ae==="")return{..._e,qtyPackages:0};const Ee=Math.max(0,Math.floor(Number(ae))),ze=f[V]??_e.availableUnits??0,ut=Math.max(1,Number(_e.unitsPerPackage||1)),st=Math.floor(ze/ut);let ee=Ee;Ee>st&&(ee=st,M(` Solo hay ${st} paquetes disponibles.`),setTimeout(()=>M(""),2500));const W=Number(_e.pricePerPackage||0)*ee,re=Math.max(0,W-Number(_e.discount||0)),fe=Number(_e.providerPricePerPackage||0)*ee,Ne=re-fe,be=Math.max(0,Number((Ne*.25).toFixed(2)));return{..._e,qtyPackages:ee,margenVendedor:be}}))},Z=(V,ae)=>{J(Se=>Se.map(_e=>{if(_e.productId!==V)return _e;if(ae==="")return{..._e,discount:0};const Ee=Math.max(0,Math.floor(Number(ae))),ze=_e.qtyPackages||0,ut=Number(_e.pricePerPackage||0)*ze,st=Number(_e.providerPricePerPackage||0)*ze,ee=ut-st-Number(Ee||0),W=Math.max(0,Number((ee*.25).toFixed(2)));return{..._e,discount:Ee,margenVendedor:W}}))},$e=V=>J(ae=>ae.filter(Se=>Se.productId!==V)),Le=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(F.length===0)return"Agrega al menos un producto.";const V=F.filter(ae=>(ae.qtyPackages||0)>0);if(V.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Pe>0))return"El total debe ser mayor a cero.";if(A==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!x)return"Selecciona un cliente (crdito).";if(k<0)return"El pago inicial no puede ser negativo.";if(k>Pe)return"El pago inicial no puede superar el total.";if((qe==null?void 0:qe.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const ae of V){const Se=ae.unitsPerPackage||1,_e=(ae.qtyPackages||0)*Se,Ee=await QH(ae.productId,_),ze=Math.floor(Ee/Se);if(_e>Ee)return`Inventario insuficiente en el pedido del vendedor para "${ae.productName}". Disponible: ${ze} paquetes.`;const ut=(Number(ae.pricePerPackage)||0)*(ae.qtyPackages||0),st=Number(ae.discount)||0;if(!Number.isInteger(st)||st<0)return`El descuento en "${ae.productName}" debe ser entero y  0.`;if(st>ut)return`El descuento en "${ae.productName}" no puede exceder C$ ${ut.toFixed(2)}.`}return null},Ve=async V=>{V.preventDefault(),M("");const ae=await Le();if(ae){M(" "+ae);return}try{X(!0);const Se=F.filter(st=>(st.qtyPackages||0)>0).map(st=>{const ee=st.unitsPerPackage||1,W=st.qtyPackages||0,re=W*ee,fe=(Number(st.pricePerPackage)||0)*(W||0),Ne=Math.max(0,Math.floor(Number(st.discount)||0)),be=Math.max(0,fe-Ne),Xe=Number(st.providerPricePerPackage||0),it=Xe*W,xt=be-it,_t=Math.max(0,Number((xt*.25).toFixed(2)));return{productId:st.productId,productName:st.productName,sku:st.sku||"",qty:re,packages:W,unitsPerPackage:ee,branch:p,unitPricePackage:Number(st.pricePerPackage)||0,discount:Ne,total:Math.floor(be*100)/100,providerPricePerPackage:Xe,margenVendedor:_t}}),_e={type:A,branch:p,date:j,createdAt:dr.now(),itemsTotal:Number(Pe)||0,total:Number(Pe)||0,quantity:Number(Ie)||0,packagesTotal:Number(se)||0,items:Se,vendorId:_},Ee=u.find(st=>st.id===_);Ee&&(_e.vendorName=Ee.name,_e.vendorBranch=Ee.branch,_e.vendorBranchLabel=Ee.branchLabel,_e.vendorCommissionPercent=Ee.commissionPercent||0,_e.vendorCommissionAmount=bt||0),A==="CONTADO"?_e.customerName=b.trim():(_e.customerId=x,_e.downPayment=Number(k)||0);const ze=await _n(ht(ke,"sales_candies"),_e);if(A==="CONTADO"){const st=(b||"").trim();if(st)try{await _n(ht(ke,"cash_customers"),{name:st,date:j,branch:p,vendorId:_,createdAt:dr.now()})}catch(ee){console.warn("No se pudo guardar cash_customer:",ee)}}if(A==="CREDITO"&&x){const st={customerId:x,date:j,createdAt:dr.now(),ref:{saleId:ze.id}},ee=Number((qe==null?void 0:qe.balance)||0);if(await _n(ht(ke,"ar_movements"),{...st,type:"CARGO",amount:Number(Pe)||0}),Number(k)>0&&await _n(ht(ke,"ar_movements"),{...st,type:"ABONO",amount:-Number(k)}),ee===0)try{await nn($t(ke,"customers_candies",x),{initialDebt:Number(Pe)||0,initialDebtDate:j})}catch(W){console.warn("No se pudo setear initialDebt:",W)}}const ut={};for(const st of Se)if(st.qty>0){const{allocations:ee}=await QLe({productId:st.productId,vendorId:_,quantityUnits:st.qty,saleDate:j,saleId:ze.id});ut[st.productId]={productId:st.productId,vendorId:_,allocations:ee}}await nn($t(ke,"sales_candies",ze.id),{allocationsByItem:ut});try{const st=A==="CONTADO"?b.trim()||"Cliente Mostrador":(qe==null?void 0:qe.name)||"Cliente crdito";ULe({saleId:ze.id,date:j,customerName:st,branch:p,items:Se.map(ee=>({productName:ee.productName,qty:ee.packages,unitPrice:ee.unitPricePackage,total:ee.total})),total:Number(Pe)||0,vendorName:Ee==null?void 0:Ee.name,vendorCommissionPercent:(Ee==null?void 0:Ee.commissionPercent)||0,vendorCommissionAmount:bt})}catch(st){console.error("Error generando voucher PDF:",st)}m("CONTADO"),y(""),w(""),I(VH()),J([]),H(0),A==="CREDITO"&&x&&i(st=>st.map(ee=>ee.id===x?{...ee,balance:(ee.balance||0)+(Number(Pe)||0)-(Number(k)||0)}:ee)),M(" Venta de dulces registrada"),_?await kt(_):h({})}catch(Se){console.error(Se),M(" Error al guardar la venta de dulces")}finally{X(!1)}},At=v.useMemo(()=>l.filter(V=>{const ae=f[V.id]||0,Se=Math.max(1,Number(V.unitsPerPackage||1));return Math.floor(ae/Se)>0}).sort((V,ae)=>(V.name||"").localeCompare(ae.name||"")),[l,f]),[pt,Be]=v.useState(""),gt=v.useMemo(()=>{const V=String(pt||"").trim().toLowerCase();return V?At.filter(ae=>`${ae.name||""} ${ae.sku||""}`.toLowerCase().includes(V)||String(ae.id||"").includes(V)):At},[pt,At]);return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),o.jsxs("form",{onSubmit:Ve,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:V=>m(V.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:V=>w(V.target.value)})]}):o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:x,onChange:V=>y(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),je.map(V=>o.jsxs("option",{value:V.status==="ACTIVO"?V.id:"",disabled:V.status==="BLOQUEADO",children:[V.name," | ",V.phone," | Saldo: ",Zl(V.balance||0)]},V.id))]}),o.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Q(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-lg font-semibold",children:Zl(pe)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:V=>H(Math.max(0,Number(V.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-lg font-semibold",children:Zl(He)})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:V=>I(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:V=>{E(V.target.value),J([])},disabled:S,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.branchLabel,"  ",V.commissionPercent.toFixed(2),"%"," comisin"]},V.id))]}),S&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Rivas"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),o.jsx("span",{children:"San Jorge"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1",children:[o.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),o.jsx("span",{children:"Isla de Ometepe"})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:pt,onChange:V=>Be(V.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>Ge(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async V=>{const ae=V.target.value;T(ae),await ve(ae)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),gt.map(V=>{const ae=F.some(ze=>ze.productId===V.id),Se=f[V.id]||0,_e=Math.max(1,Number(V.unitsPerPackage||1)),Ee=Math.floor(Se/_e);return Ee<=0?null:o.jsxs("option",{value:ae?"":V.id,disabled:ae,children:[V.name," ",V.sku?` ${V.sku}`:""," (disp: ",Ee," ","paq.)",ae?" ":""]},V.id)})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[o.jsx("div",{className:"col-span-4",children:"Producto"}),o.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),o.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),o.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),o.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),o.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),F.length===0?o.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):F.map(V=>{const ae=f[V.productId]??V.availableUnits??0,Se=V.unitsPerPackage?Math.floor(ae/V.unitsPerPackage):0,_e=Math.max(0,Se-(V.qtyPackages||0)),Ee=(Number(V.pricePerPackage)||0)*(V.qtyPackages||0),ze=Math.max(0,Ee-(Number(V.discount)||0));return o.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[o.jsx("div",{className:"col-span-4",children:o.jsxs("div",{className:"font-medium",children:[V.productName,V.sku?`  ${V.sku}`:""]})}),o.jsx("div",{className:"col-span-2 text-right",children:Zl(V.pricePerPackage)}),o.jsxs("div",{className:"col-span-2 text-right",children:[_e," paq."]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(V.qtyPackages)||V.qtyPackages===0?"":V.qtyPackages,onChange:ut=>Qe(V.productId,ut.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(V.discount)||V.discount===0?"":V.discount,onChange:ut=>Z(V.productId,ut.target.value),inputMode:"numeric",placeholder:"0"})}),o.jsx("div",{className:"col-span-1 text-right",children:Zl(ze)}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>$e(V.productId),title:"Quitar producto",children:""})})]},V.productId)})]})}),F.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),o.jsx("span",{className:"font-semibold",children:se})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Total: "}),o.jsx("span",{className:"font-semibold",children:Zl(Pe)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),o.jsxs("span",{className:"font-semibold",children:[Zl(bt)," ",yt?`(${yt.toFixed(2)}%)`:""]})]})]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:G,children:G?"Guardando...":"Registrar venta"})})]}),o.jsxs("div",{className:"md:hidden space-y-3",children:[o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>le(V=>!V),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",o.jsx("span",{className:"text-lg",children:ge?"":"+"})]}),ge&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:V=>I(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:V=>m(V.target.value),children:[o.jsx("option",{value:"CONTADO",children:"Contado"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),A==="CONTADO"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:V=>w(V.target.value)})]}):o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("select",{className:"w-full border p-2 rounded",value:x,onChange:V=>y(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un cliente"}),je.map(V=>o.jsxs("option",{value:V.status==="ACTIVO"?V.id:"",disabled:V.status==="BLOQUEADO",children:[V.name," | Saldo: ",Zl(V.balance||0)]},V.id))]}),o.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>Q(!0),children:"Crear Cliente"})]}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-base font-semibold",children:Zl(pe)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),o.jsx("div",{className:"text-base font-semibold",children:Zl(He)})]})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:k===0?"":k,onChange:V=>H(Math.max(0,Number(V.target.value||0))),placeholder:"0.00"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:V=>{E(V.target.value),J([])},disabled:S,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  "," ",V.commissionPercent.toFixed(2),"%"]},V.id))]}),S&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[o.jsxs("button",{type:"button",onClick:()=>Ae(V=>!V),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",o.jsx("span",{className:"text-lg",children:de?"":"+"})]}),de&&o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),o.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:pt,onChange:V=>Be(V.target.value),disabled:!_}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>Ge(!0),disabled:!_,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),o.jsxs("select",{className:"w-full border p-2 rounded",value:P,onChange:async V=>{const ae=V.target.value;T(ae),await ve(ae)},disabled:!_,children:[o.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),gt.map(V=>{const ae=F.some(ze=>ze.productId===V.id),Se=f[V.id]||0,_e=Math.max(1,Number(V.unitsPerPackage||1)),Ee=Math.floor(Se/_e);return Ee<=0?null:o.jsxs("option",{value:ae?"":V.id,disabled:ae,children:[V.name," ",V.sku?` ${V.sku}`:""," (disp:"," ",Ee," paq.)",ae?" ":""]},V.id)})]})]}),F.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):o.jsx("div",{className:"space-y-2",children:F.map(V=>{const ae=f[V.productId]??V.availableUnits??0,Se=V.unitsPerPackage?Math.floor(ae/V.unitsPerPackage):0,_e=Math.max(0,Se-(V.qtyPackages||0)),Ee=(Number(V.pricePerPackage)||0)*(V.qtyPackages||0),ze=Math.max(0,Ee-(Number(V.discount)||0));return o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[o.jsxs("div",{className:"font-semibold leading-tight",children:[V.productName,V.sku?`  ${V.sku}`:""]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),o.jsx("div",{className:"font-bold",children:Zl(V.pricePerPackage)})]}),o.jsxs("div",{className:"p-2 rounded border bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),o.jsxs("div",{className:"font-bold",children:[_e," paq."]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),o.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(V.qtyPackages)||V.qtyPackages===0?"":V.qtyPackages,onChange:ut=>Qe(V.productId,ut.target.value),inputMode:"numeric",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),o.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(V.discount)||V.discount===0?"":V.discount,onChange:ut=>Z(V.productId,ut.target.value),inputMode:"numeric",placeholder:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Zl(ze)]}),o.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Zl(V.margenVendedor||0)]}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>$e(V.productId),children:"Quitar"})]})]},V.productId)})}),F.length>0&&o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:se})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsx("div",{className:"font-semibold",children:Zl(Pe)})]})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:G,children:G?"Guardando...":"Registrar venta"})]})]}),R&&o.jsx("p",{className:"mt-2 text-sm",children:R}),D&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[o.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),o.jsx("input",{className:"w-full border p-2 rounded",value:te,onChange:V=>me(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),o.jsx("input",{className:"w-full border p-2 rounded",value:L,onChange:V=>he(HH(V.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:V=>z(V.target.value),children:[o.jsx("option",{value:"",children:""}),RLe.map(V=>o.jsx("option",{value:V,children:V},V))]})]}),!S&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Me,onChange:V=>Je(V.target.value),children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(V=>(V.status??"ACTIVO")==="ACTIVO").map(V=>o.jsxs("option",{value:V.id,children:[V.name,"  ",V.branchLabel]},V.id))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ce,onChange:V=>K(V.target.value),maxLength:500})]})]}),o.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{lt(),Q(!1)},children:"Cancelar"}),o.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var Se;const V=S?_||r:Me;if(!V){M("Selecciona el vendedor para asociar este cliente.");return}if(M(""),!te.trim()){M("Ingresa el nombre del nuevo cliente.");return}const ae=HH(L);try{const _e=await _n(ht(ke,"customers_candies"),{name:te.trim(),phone:ae,place:ne||"",notes:ce||"",status:oe,creditLimit:Number(De||0),createdAt:dr.now(),sellerId:V,vendorId:V,vendorName:((Se=u.find(ze=>ze.id===V))==null?void 0:Se.name)||""}),Ee={id:_e.id,name:te.trim(),phone:ae,place:ne||"",status:oe,creditLimit:Number(De||0),balance:0,sellerId:V};i(ze=>[Ee,...ze]),y(_e.id),lt(),Q(!1),M(" Cliente creado")}catch(_e){console.error(_e),M(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),o.jsx(We,{open:ft,onClose:()=>Ge(!1),onDetected:ye}),G&&o.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[o.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const $H=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],TC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function HLe(){const[t,e]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[r,n]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Er(new Date,"yyyy-MM-dd")),[i,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(0),[h,A]=v.useState("PENDIENTE"),[m,p]=v.useState(""),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState(""),[O,P]=v.useState(""),[T,F]=v.useState(""),[J,ge]=v.useState(0),[le,de]=v.useState("PENDIENTE"),[Ae,se]=v.useState("");v.useEffect(()=>{(async()=>{b(!0);try{const D=er(ht(ke,"expenses_candies"),on("date","desc")),Q=await Lt(D),te=[];Q.forEach(me=>{const L=me.data();te.push({id:me.id,date:L.date||Er(new Date,"yyyy-MM-dd"),category:L.category||"",description:L.description||"",amount:Number(L.amount||0),status:L.status||"PENDIENTE",notes:L.notes||"",createdAt:L.createdAt??dr.now()})}),x(te)}catch(D){console.error(D),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Ie=v.useMemo(()=>g.filter(D=>!(t&&D.date<t||r&&D.date>r)),[g,t,r]),Pe=v.useMemo(()=>{const D=Ie.reduce((me,L)=>me+(L.amount||0),0),Q=Ie.filter(me=>me.status==="PAGADO").reduce((me,L)=>me+(L.amount||0),0),te=D-Q;return{total:D,pagado:Q,pendiente:te}},[Ie]),k=()=>{s(Er(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),A("PENDIENTE"),p("")},H=async D=>{if(D.preventDefault(),j(""),!i){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const Q=await _n(ht(ke,"expenses_candies"),{date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:dr.now()});x(te=>[{id:Q.id,date:a,category:i,description:c.trim(),amount:Number(d.toFixed(2)),status:h,notes:m||"",createdAt:dr.now()},...te]),k(),j(" Gasto registrado")}catch(Q){console.error(Q),j(" Error al guardar gasto")}},R=D=>{_(D.id),S(D.date),P(D.category||""),F(D.description||""),ge(Number(D.amount||0)),de(D.status||"PENDIENTE"),se(D.notes||"")},M=()=>{_(null),S(""),P(""),F(""),ge(0),de("PENDIENTE"),se("")},G=async()=>{if(I){if(!O){j("Selecciona una categora.");return}if(!T.trim()){j("Ingresa una descripcin.");return}if(!J||J<=0){j("Ingresa un monto vlido.");return}try{await nn($t(ke,"expenses_candies",I),{date:E,category:O,description:T.trim(),amount:Number(J.toFixed(2)),status:le,notes:Ae||""}),x(D=>D.map(Q=>Q.id===I?{...Q,date:E,category:O,description:T.trim(),amount:Number(J.toFixed(2)),status:le,notes:Ae||""}:Q)),M(),j(" Gasto actualizado")}catch(D){console.error(D),j(" Error al actualizar gasto")}}},X=async D=>{confirm(`Eliminar el gasto "${D.description}"?`)&&(await Cn($t(ke,"expenses_candies",D.id)),x(te=>te.filter(me=>me.id!==D.id)),j(" Gasto borrado"))};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:D=>e(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:D=>n(D.target.value)})]}),o.jsxs("div",{className:"ml-auto text-sm",children:[o.jsx("div",{className:"font-semibold",children:"Totales del rango"}),o.jsxs("div",{children:["Total: ",TC(Pe.total)]}),o.jsxs("div",{children:["Pagado: ",TC(Pe.pagado)]}),o.jsxs("div",{children:["Pendiente: ",TC(Pe.pendiente)]})]})]}),o.jsxs("form",{onSubmit:H,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:D=>s(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:i,onChange:D=>l(D.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),$H.map(D=>o.jsx("option",{value:D,children:D},D))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:D=>f(Math.max(0,Number(D.target.value||0))),placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:D=>A(D.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:D=>p(D.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),o.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),o.jsx("div",{className:"md:col-span-2",children:o.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"}),o.jsx("th",{className:"p-2 border",children:"Comentario"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Ie.slice().sort((D,Q)=>D.date.localeCompare(Q.date)).map(D=>{const Q=I===D.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:E,onChange:te=>S(te.target.value)}):D.date}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:O,onChange:te=>P(te.target.value),children:[o.jsx("option",{value:"",children:"Selecciona"}),$H.map(te=>o.jsx("option",{value:te,children:te},te))]}):D.category||""}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{className:"w-full border p-1 rounded",value:T,onChange:te=>F(te.target.value)}):o.jsx("span",{title:D.description,children:D.description.length>40?D.description.slice(0,40)+"":D.description})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(J)?"":J,onChange:te=>ge(Math.max(0,Number(te.target.value||0)))}):TC(D.amount)}),o.jsx("td",{className:"p-2 border",children:Q?o.jsxs("select",{className:"w-full border p-1 rounded",value:le,onChange:te=>de(te.target.value),children:[o.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),o.jsx("option",{value:"PAGADO",children:"Pagado"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${D.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:D.status})}),o.jsx("td",{className:"p-2 border",children:Q?o.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Ae,onChange:te=>se(te.target.value),maxLength:500}):o.jsx("span",{title:D.notes||"",children:(D.notes||"").length>40?(D.notes||"").slice(0,40)+"":D.notes||""})}),o.jsx("td",{className:"p-2 border",children:o.jsx("div",{className:"flex gap-2 justify-center",children:Q?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:G,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:M,children:"Cancelar"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>R(D),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>X(D),children:"Borrar"})]})})})]},D.id)})})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w})]})}const ec=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function $Le(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Er(t.createdAt.toDate(),"yyyy-MM-dd"):""}function KLe(t,e){var s,i,l;const r=$Le(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((i=t.item)==null?void 0:i.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function GLe(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function qLe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=Jr(n,"vendedor_dulces"),s=Jr(n,"admin"),i=s?8:7,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async oe=>{c(!0),d(!0),h(oe),m([]);try{const xe=await li($t(ke,"sales_candies",oe)),De=xe.exists()?xe.data():null;if(!De){m([]);return}const Me=(Array.isArray(De==null?void 0:De.items)?De.items:De!=null&&De.item?[De.item]:[]).map(Je=>({productName:String(Je.productName||""),qty:Number(Je.packages??Je.qty??Je.quantity??0),unitPrice:Number(Je.unitPricePackage??Je.unitPrice??0),discount:Number(Je.discount||0),total:Number(Je.total??Je.lineFinal??0)}));m(Me)}catch(xe){console.error(xe)}finally{d(!1)}},[g,x]=v.useState(Er(new Date,"yyyy-MM-01")),[y,b]=v.useState(Er(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState([]),[O,P]=v.useState(!0),[T,F]=v.useState(""),[J,ge]=v.useState(""),[le,de]=v.useState(""),[Ae,se]=v.useState(null),Ie=15,[Pe,k]=v.useState(1),H=v.useMemo(()=>{const oe={};return w.forEach(xe=>oe[xe.id]=xe.name),oe},[w]),R=v.useMemo(()=>{const oe={};return E.forEach(xe=>{oe[xe.id]=xe}),oe},[E]),M=oe=>{const xe=Number(oe.vendorCommissionAmount||0);if(xe>0)return xe;if(!oe.vendorId)return 0;const De=R[oe.vendorId];if(!De||!De.commissionPercent)return 0;const nt=(Number(oe.total)||0)*(Number(De.commissionPercent)||0)/100;return Number(nt.toFixed(2))};v.useEffect(()=>{(async()=>{P(!0),F("");try{const oe=await Lt(ht(ke,"customers_candies")),xe=[];oe.forEach(lt=>xe.push({id:lt.id,name:lt.data().name||""})),j(xe);const De=await Lt(ht(ke,"sellers_candies")),nt=[];De.forEach(lt=>{const ft=lt.data();nt.push({id:lt.id,name:ft.name||"",commissionPercent:Number(ft.commissionPercent||0)})}),S(nt);const Me=await Lt(er(ht(ke,"sales_candies"),on("createdAt","desc"))),Je=[];Me.forEach(lt=>{const ft=KLe(lt.data(),lt.id);ft&&ft.date>=g&&ft.date<=y&&Je.push(ft)}),_(Je.sort((lt,ft)=>ft.date.localeCompare(lt.date))),k(1)}catch(oe){console.error(oe),F(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const G=v.useMemo(()=>I.filter(oe=>!(a&&(!e||!oe.vendorId||oe.vendorId!==e)||J&&oe.customerId!==J||le&&oe.type!==le)),[I,J,le,a,e]),X=v.useMemo(()=>{let oe=0,xe=0,De=0,nt=0;for(const Me of G)Me.type==="CONTADO"?(oe+=Me.quantity,De+=Me.total):(xe+=Me.quantity,nt+=Me.total);return{packsCash:oe,packsCredito:xe,montoCash:De,montoCredito:nt}},[G]),D=Math.max(1,Math.ceil(G.length/Ie)),Q=v.useMemo(()=>{const oe=(Pe-1)*Ie;return G.slice(oe,oe+Ie)},[G,Pe]),te=v.useMemo(()=>f&&I.find(oe=>oe.id===f)||null,[f,I]),me=async oe=>{if(s&&(se(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{P(!0),await h2(oe.id),await GLe(oe.id),_(xe=>xe.filter(De=>De.id!==oe.id)),F(" Venta eliminada")}catch(xe){console.error(xe),F(" No se pudo eliminar la venta.")}finally{P(!1)}},L=()=>{const oe=`Ventas del dia  ${g} a ${y}`,xe=Je=>(Je||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),De=G.map(Je=>{const lt=Je.customerName||(Je.customerId?H[Je.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Je.date}</td>
          <td>${xe(lt)}</td>
          <td>${Je.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Je.quantity}</td>
          <td style="text-align:right">${ec(Je.total)}</td>
        </tr>`}).join(""),nt=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${xe(oe)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${xe(oe)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${X.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${X.packsCredito}</div>
        <div><b>Monto Cash:</b> ${ec(X.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${ec(X.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${De||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Me=window.open("","_blank");Me&&(Me.document.open(),Me.document.write(nt),Me.document.close())},he=()=>k(1),ne=()=>k(oe=>Math.max(1,oe-1)),z=()=>k(oe=>Math.min(D,oe+1)),ce=()=>k(D),K=()=>{const oe=[];if(D<=7)for(let De=1;De<=D;De++)oe.push(De);else{const De=Math.max(1,Pe-2),nt=Math.min(D,Pe+2);oe.push(1),De>2&&oe.push(-1);for(let Me=De;Me<=nt;Me++)Me!==1&&Me!==D&&oe.push(Me);nt<D-1&&oe.push(-2),oe.push(D)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:he,disabled:Pe===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:Pe===1,children:" Anterior"}),oe.map((De,nt)=>typeof De=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${De===Pe?"bg-blue-600 text-white":""}`,onClick:()=>k(De),children:De},nt):o.jsx("span",{className:"px-2",children:""},nt)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:z,disabled:Pe===D,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ce,disabled:Pe===D,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Pe," de ",D,"  ",G.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:oe=>{x(oe.target.value),k(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:oe=>{b(oe.target.value),k(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:J,onChange:oe=>{ge(oe.target.value),k(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(oe=>o.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:le,onChange:oe=>{de(oe.target.value),k(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:L,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:X.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:X.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:ec(X.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:ec(X.montoCredito)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[O?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):Q.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):Q.map(oe=>{const xe=oe.customerName||(oe.customerId?H[oe.customerId]:"")||"Nombre cliente",De=M(oe);return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:xe}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:oe.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${oe.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:oe.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Paquetes:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:nt=>{nt.preventDefault(),p(oe.id)},title:"Ver detalle",children:oe.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",ec(oe.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:xe})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:oe.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:oe.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(oe.id),title:"Ver detalle",children:oe.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:ec(oe.total)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("span",{className:"font-medium",children:De>0?ec(De):""})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("span",{className:"font-medium",children:oe.vendorName||""})]}),s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>se(nt=>nt===oe.id?null:oe.id),children:" Acciones"}),Ae===oe.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>me(oe),children:"Eliminar"})]})]})})]})},oe.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:K()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:O?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):Q.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):Q.map(oe=>{const xe=oe.customerName||(oe.customerId?H[oe.customerId]:"")||"Nombre cliente",De=M(oe);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:oe.date}),o.jsx("td",{className:"p-2 border",children:xe}),o.jsx("td",{className:"p-2 border",children:oe.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(oe.id),children:oe.quantity})}),o.jsx("td",{className:"p-2 border",children:ec(oe.total)}),o.jsx("td",{className:"p-2 border",children:De>0?ec(De):""}),o.jsx("td",{className:"p-2 border",children:oe.vendorName||""}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>se(nt=>nt===oe.id?null:oe.id),title:"Acciones",children:""}),Ae===oe.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>me(oe),children:"Eliminar"})})]})]},oe.id)})})]}),K()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),te&&o.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",o.jsx("span",{className:"font-semibold",children:M(te)>0?ec(M(te)):""})]})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((oe,xe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:oe.productName}),o.jsx("td",{className:"p-2 border text-right",children:oe.qty}),o.jsx("td",{className:"p-2 border text-right",children:ec(oe.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:ec(oe.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:ec(oe.total)})]},xe))})]})})]})})]})}const On=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Ny(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Er(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function zLe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0)}]:[]}function WLe(t,e){const r=Ny(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=zLe(t);let i=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return i=Number(i||0),{id:e,date:r,type:t.type||"CONTADO",total:i,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a}}function XLe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let i=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const h=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(i+=h*f.cost),f.qtyLeft-=h,d-=h}}return i}async function YLe(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function JLe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[a,s]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[i,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState([]),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState([]),[y,b]=v.useState(!0),[w,j]=v.useState(""),[I,_]=v.useState([]),[E,S]=v.useState({}),[O,P]=v.useState({}),[T,F]=v.useState(!1),[J,ge]=v.useState(null),[le,de]=v.useState([]),[Ae,se]=v.useState(!1),[Ie,Pe]=v.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[k,H]=v.useState(!1),[R,M]=v.useState(""),[G,X]=v.useState([]),[D,Q]=v.useState(!1),[te,me]=v.useState(!1),[L,he]=v.useState(null);v.useEffect(()=>{(async()=>{try{const ye=await Lt(ht(ke,"sellers_candies")),We=[];ye.forEach(qe=>{const je=qe.data();We.push({id:qe.id,name:je.name||"",commissionPercent:Number(je.commissionPercent||0)})}),_(We)}catch(ye){console.error("Error cargando sellers_candies",ye)}})()},[]);const ne=v.useMemo(()=>{const ye={};return I.forEach(We=>{ye[We.id]=We}),ye},[I]);v.useEffect(()=>{(async()=>{b(!0),j("");try{const ye=await Lt(ht(ke,"sales_candies")),We=[],qe=[];ye.forEach(Le=>{const Ve=Le.data(),At=WLe(Ve,Le.id);At&&(At.date<=a&&We.push(At),At.date>=r&&At.date<=a&&qe.push(At))}),u(We),l(qe);const je=await Lt(ht(ke,"inventory_candies")),pe=[];je.forEach(Le=>{const Ve=Le.data(),At=Ny(Ve);if(!At||At>a)return;const pt=Math.max(1,Math.floor(Number(Ve.unitsPerPackage||1))),Be=Number(Ve.totalUnits??Ve.quantity??0),gt=Number(Ve.packages??0),V=Number(Ve.remaining??0),ae=Number(Ve.remainingPackages??0),Se=gt>0?gt:Be>0?Math.floor(Be/pt):0,_e=ae>0?ae:V>0?Math.floor(V/pt):0;pe.push({id:Le.id,productId:Ve.productId,productName:Ve.productName||"",date:At,quantity:Number(Se||0),remaining:Number(_e||0),purchasePrice:Number(Ve.providerPrice||Ve.purchasePrice||0),unitsPerPackage:pt})}),f(pe);const He=await Lt(ht(ke,"expenses_candies")),at=[];He.forEach(Le=>{const Ve=Le.data(),At=Ny(Ve);At&&At>=r&&At<=a&&at.push({id:Le.id,date:At,category:Ve.category||"",description:Ve.description||"",amount:Number(Ve.amount||0),status:Ve.status||""})}),A(at);const yt=await Lt(ht(ke,"ar_movements")),bt=[],kt={};yt.forEach(Le=>{const Ve=Le.data(),At=Ny(Ve);if(!At)return;const pt=Ve.customerId,Be=Number(Ve.amount||0);pt&&(kt[pt]=(kt[pt]||0)+Be),Ve.type==="ABONO"&&At>=r&&At<=a&&bt.push({id:Le.id,customerId:pt,type:"ABONO",amount:Be,date:At})}),p(bt);const Vt=await Lt(ht(ke,"customers_candies")),ve=[];Vt.forEach(Le=>{const Ve=Le.data();ve.push({id:Le.id,name:Ve.name||"",balance:kt[Le.id]||0})}),x(ve);const Qe=await Lt(ht(ke,"inventory_candies_sellers")),Z={},$e={};Qe.forEach(Le=>{const Ve=Le.data(),At=Ny(Ve);if(!At||At<r||At>a)return;const pt=Ve.sellerId||Ve.vendorId||"NO_VENDOR",Be=Ve.productName||"",gt=Ve.sku||"",V=Math.max(1,Math.floor(Number(Ve.unitsPerPackage||1))),ae=Number(Ve.totalUnits??0),Se=Number(Ve.packages??0),_e=Number(Ve.remainingUnits??Ve.remaining??0),Ee=Number(Ve.remainingPackages??0),ze=Se>0?Se:ae>0?Math.floor(ae/V):0,ut=Ee>0?Ee:_e>0?Math.floor(_e/V):0,st=Number(Ve.totalVendor??0),ee=Number(Ve.gainVendor??0),W=ze,re=W>0?st/W:0,fe=W>0?ee/W:0;if(Z[pt]||(Z[pt]={associated:[],remaining:[]}),ze>0){const Ne=ze,be=Ne*re,Xe=be,it=Ne*fe;Z[pt].associated.push({saleId:Le.id,date:At,productName:Be,sku:gt,qty:Ne,unitPrice:re,lineTotal:be,discount:0,lineFinal:Xe,vendorCommissionAmount:it,type:"ASSOCIATED"}),$e[pt]=($e[pt]||0)+Ne}if(ut>0){const Ne=ut,be=Ne*re,Xe=be,it=Ne*fe;Z[pt].remaining.push({saleId:Le.id,date:At,productName:Be,sku:gt,qty:Ne,unitPrice:re,lineTotal:be,discount:0,lineFinal:Xe,vendorCommissionAmount:it,type:"REMAINING"})}}),S(Z),P($e)}catch(ye){console.error(ye),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const z=v.useCallback(ye=>{if(ye.vendorId&&ne[ye.vendorId])return ne[ye.vendorId];const We=(ye.vendorName||"").trim().toLowerCase();if(We)return I.find(qe=>(qe.name||"").trim().toLowerCase()===We)},[ne,I]),ce=v.useCallback((ye,We)=>{const qe=Number(We.vendorCommissionAmount||0);if(qe)return qe;const je=z(ye);if(!je||!je.commissionPercent)return 0;const pe=Number(We.qty||0),He=Number(We.unitPrice||0),at=pe*He,yt=Math.max(0,Number(We.discount||0)),bt=Math.max(0,at-yt);if(!bt)return 0;const kt=Number(je.commissionPercent)||0;return bt*kt/100},[z]),K=v.useMemo(()=>{try{return XLe(d,c,r,a)}catch(ye){return console.error(ye),0}},[d,c,r,a]),oe=v.useMemo(()=>{const ye=i.reduce((ve,Qe)=>ve+(Qe.total||0),0),We=h.reduce((ve,Qe)=>ve+(Qe.amount||0),0),qe=ye-K,je=qe-We,pe=m.reduce((ve,Qe)=>ve+Math.abs(Qe.amount||0),0),He=g.filter(ve=>(ve.balance||0)>0),at=He.reduce((ve,Qe)=>ve+(Qe.balance||0),0);let yt=0,bt=0,kt=0,Vt=0;for(const ve of i){const Qe=(ve.items||[]).reduce(($e,Le)=>$e+(Number(Le.qty)||0),0),Z=(ve.items||[]).reduce(($e,Le)=>$e+ce(ve,Le),0);ve.type==="CONTADO"?(yt+=Qe,kt+=Z):(bt+=Qe,Vt+=Z)}return{ventasTotales:ye,costoMercaderia:K,gastosPeriodo:We,gananciaAntes:qe,gananciaDespues:je,abonosRecibidos:pe,saldosPendientes:at,clientesConSaldo:He.length,paquetesCash:yt,paquetesCredito:bt,comisionCash:kt,comisionCredito:Vt}},[i,h,m,g,K,ce]),xe=v.useMemo(()=>{const ye={},We={};for(const qe of i)if(!(qe.type!=="CREDITO"||!qe.customerId))for(const je of qe.items||[]){const pe=Number(je.qty||0),He=Number(je.unitPrice||0),at=pe*He,yt=Math.max(0,Number(je.discount||0)),bt=Math.max(0,at-yt);ye[qe.customerId]=(ye[qe.customerId]||0)+pe,We[qe.customerId]=(We[qe.customerId]||0)+bt}return g.filter(qe=>(qe.balance||0)>0).map(qe=>({customerId:qe.id,name:qe.name,paquetesAsociados:ye[qe.id]||0,saldoTotal:We[qe.id]||0,saldoPendiente:qe.balance||0})).sort((qe,je)=>je.saldoPendiente-qe.saldoPendiente)},[g,i]),De=v.useMemo(()=>{const ye={};return g.forEach(We=>ye[We.id]=We.name),ye},[g]),nt=v.useMemo(()=>[...i].sort((ye,We)=>We.date.localeCompare(ye.date)).map(ye=>{var pe;const We=(ye.items||[]).reduce((He,at)=>He+(Number(at.qty)||0),0);let qe="Cash";ye.type==="CREDITO"&&ye.customerId?qe=De[ye.customerId]||"":ye.type==="CONTADO"&&(qe=((pe=ye.customerName)==null?void 0:pe.trim())||"Cash");const je=We>0?ye.total/We:0;return{id:ye.id,date:ye.date,type:ye.type==="CREDITO"?"Crdito":"Cash",customer:qe,paquetes:We,total:Number(ye.total||0),avgPrice:je}}),[i,De]),Me=v.useMemo(()=>{var We,qe;const ye=new Map;for(const je of i){const pe=je.vendorId||"NO_VENDOR",He=je.vendorName||((We=ne[pe])==null?void 0:We.name)||"Sin vendedor";ye.has(pe)||ye.set(pe,{vendorId:pe,vendorName:He,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const at=ye.get(pe);for(const yt of je.items||[]){const bt=Number(yt.qty||0),kt=Number(yt.unitPrice||0),Vt=bt*kt,ve=Math.max(0,Number(yt.discount||0)),Qe=Math.max(0,Vt-ve),Z=ce(je,yt);je.type==="CONTADO"?(at.paquetesVendidos+=bt,at.totalVendido+=Qe,at.comisionCash+=Z):(at.paquetesFiados+=bt,at.totalFiado+=Qe,at.comisionCredito+=Z)}}for(const[je,pe]of Object.entries(O)){const He=ye.get(je),at=(He==null?void 0:He.vendorName)||((qe=ne[je])==null?void 0:qe.name)||"Sin vendedor",yt=He||{vendorId:je,vendorName:at,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};yt.paquetesAsociados=pe,yt.paquetesRestantes=Math.max(pe-yt.paquetesVendidos-yt.paquetesFiados,0),ye.set(je,yt)}return Array.from(ye.values()).sort((je,pe)=>pe.totalVendido+pe.totalFiado-(je.totalVendido+je.totalFiado))},[i,O,ne,ce]),Je=async ye=>{F(!0),ge({id:ye.customerId,name:ye.name}),de([]),se(!0),Pe({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const We=[];let qe=0,je=0,pe=0;for(const bt of i)if(!(bt.type!=="CREDITO"||bt.customerId!==ye.customerId))for(const kt of bt.items||[]){const Vt=Number(kt.qty||0),ve=Number(kt.unitPrice||0),Qe=Vt*ve,Z=Math.max(0,Number(kt.discount||0)),$e=Math.max(0,Qe-Z);We.push({saleId:bt.id,date:bt.date,productName:kt.productName,sku:kt.sku||"",qty:Vt,unitPrice:ve,lineTotal:Qe,discount:Z,lineFinal:$e}),qe+=Qe,je+=Z,pe+=$e}let He=0;for(const bt of m)bt.customerId===ye.customerId&&(He+=Math.abs(bt.amount||0));const at=g.find(bt=>bt.id===ye.customerId),yt=(at==null?void 0:at.balance)||0;de(We),Pe({totalBruto:qe,totalDescuento:je,totalFiado:pe,saldoActual:yt,abonadoPeriodo:He})}catch(We){console.error(We),j(" No se pudo cargar el detalle del cliente.")}finally{se(!1)}},lt=(ye,We,qe)=>{H(!0);let je="";qe==="ASSOCIATED"?je=`Paquetes asociados  ${We}`:qe==="REMAINING"?je=`Paquetes restantes  ${We}`:qe==="CASH"?je=`Paquetes vendidos (Cash)  ${We}`:je=`Paquetes fiados (Crdito)  ${We}`,M(je),X([]),Q(!0);try{if(qe==="ASSOCIATED"||qe==="REMAINING"){const He=E[ye],at=qe==="ASSOCIATED"?(He==null?void 0:He.associated)||[]:(He==null?void 0:He.remaining)||[];X([...at].sort((yt,bt)=>yt.date.localeCompare(bt.date))),Q(!1);return}const pe=[];for(const He of i)if(((He.vendorId||"NO_VENDOR")===ye||!He.vendorId&&ye==="NO_VENDOR")&&!(qe==="CASH"&&He.type!=="CONTADO")&&!(qe==="CREDIT"&&He.type!=="CREDITO"))for(const yt of He.items||[]){const bt=Number(yt.qty||0),kt=Number(yt.unitPrice||0),Vt=bt*kt,ve=Math.max(0,Number(yt.discount||0)),Qe=Math.max(0,Vt-ve),Z=ce(He,yt);pe.push({saleId:He.id,date:He.date,productName:yt.productName,sku:yt.sku||"",qty:bt,unitPrice:kt,lineTotal:Vt,discount:ve,lineFinal:Qe,vendorCommissionAmount:Z,type:qe})}X(pe.sort((He,at)=>He.date.localeCompare(at.date)))}catch(pe){console.error(pe),j(" No se pudo cargar el detalle del vendedor.")}finally{Q(!1)}},ft=ye=>{const We=i.find(qe=>qe.id===ye)||null;he(We),me(!0)},Ge=async ye=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await h2(ye),await YLe(ye),l(We=>We.filter(qe=>qe.id!==ye)),u(We=>We.filter(qe=>qe.id!==ye)),me(!1),he(null)}catch(We){console.error(We),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),o.jsx(pc,{onClick:e,loading:y})]}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ye=>n(ye.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ye=>s(ye.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.ventasTotales)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.costoMercaderia)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:On(oe.gananciaAntes)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.gastosPeriodo)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),o.jsx("div",{className:"text-xl font-semibold text-green-600",children:On(oe.gananciaDespues)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.abonosRecibidos)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.saldosPendientes)}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),o.jsx("div",{className:"text-xl font-semibold",children:oe.clientesConSaldo})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:oe.paquetesCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),o.jsx("div",{className:"text-xl font-semibold",children:oe.paquetesCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.comisionCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:On(oe.comisionCredito)})]})]}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),o.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):xe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):xe.map(ye=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye.name}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Je({customerId:ye.customerId,name:ye.name}),title:"Ver paquetes fiados del periodo",children:ye.paquetesAsociados})}),o.jsx("td",{className:"p-2 border",children:On(ye.saldoTotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:On(ye.saldoPendiente)})]},ye.customerId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado vendedores"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):Me.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):Me.map(ye=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(ye.vendorId,ye.vendorName,"ASSOCIATED"),children:ye.paquetesAsociados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(ye.vendorId,ye.vendorName,"REMAINING"),children:ye.paquetesRestantes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(ye.vendorId,ye.vendorName,"CASH"),children:ye.paquetesVendidos})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.totalVendido)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.comisionCash)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>lt(ye.vendorId,ye.vendorName,"CREDIT"),children:ye.paquetesFiados})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.totalFiado)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.comisionCredito)})]},ye.vendorId))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):nt.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):nt.map(ye=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.customer}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ye.type}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>ft(ye.id),children:ye.paquetes})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.avgPrice)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:On(ye.total)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Ge(ye.id),children:"Eliminar"})})]},ye.id))})]})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Estado"})]})}),o.jsx("tbody",{children:y?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):h.sort((ye,We)=>ye.date.localeCompare(We.date)).map(ye=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye.date}),o.jsx("td",{className:"p-2 border",children:ye.category||""}),o.jsx("td",{className:"p-2 border",children:ye.description?o.jsx("span",{title:ye.description,children:ye.description.length>40?ye.description.slice(0,40)+"":ye.description}):""}),o.jsx("td",{className:"p-2 border",children:On(ye.amount)}),o.jsx("td",{className:"p-2 border",children:ye.status||""})]},ye.id))})]})}),w&&o.jsx("p",{className:"mt-2 text-sm",children:w}),T&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(J==null?void 0:J.name)||""]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>F(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:On(Ie.totalBruto)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:On(Ie.totalDescuento)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:On(Ie.totalFiado)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),o.jsx("div",{className:"text-xl font-semibold",children:On(Ie.saldoActual)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),o.jsx("div",{className:"text-xl font-semibold",children:On(Ie.abonadoPeriodo)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha compra"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),o.jsx("tbody",{children:Ae?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):le.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):le.sort((ye,We)=>ye.date.localeCompare(We.date)).map((ye,We)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye.date}),o.jsx("td",{className:"p-2 border",children:ye.productName}),o.jsx("td",{className:"p-2 border",children:ye.sku||""}),o.jsx("td",{className:"p-2 border",children:ye.qty}),o.jsx("td",{className:"p-2 border",children:On(ye.unitPrice)}),o.jsx("td",{className:"p-2 border",children:On(ye.lineTotal)}),o.jsx("td",{className:"p-2 border",children:On(ye.discount)}),o.jsx("td",{className:"p-2 border",children:On(ye.lineFinal)})]},`${ye.saleId}-${We}`))})]})})]})}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-lg font-bold",children:R}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>H(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Descuento"}),o.jsx("th",{className:"p-2 border",children:"Monto final"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:D?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):G.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):G.map((ye,We)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye.date}),o.jsx("td",{className:"p-2 border",children:ye.productName}),o.jsx("td",{className:"p-2 border",children:ye.sku||""}),o.jsx("td",{className:"p-2 border",children:ye.qty}),o.jsx("td",{className:"p-2 border",children:On(ye.unitPrice)}),o.jsx("td",{className:"p-2 border",children:On(ye.lineTotal)}),o.jsx("td",{className:"p-2 border",children:On(ye.discount)}),o.jsx("td",{className:"p-2 border",children:On(ye.lineFinal)}),o.jsx("td",{className:"p-2 border",children:On(ye.vendorCommissionAmount)})]},`${ye.saleId}-${We}`))})]})})]})}),te&&L&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",L.date]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>me(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"SKU"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"P. Unit"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),o.jsx("tbody",{children:(L.items||[]).map((ye,We)=>{const qe=Number(ye.qty||0),je=Number(ye.unitPrice||0),pe=qe*je,He=ce(L,ye);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:ye.productName}),o.jsx("td",{className:"p-2 border",children:ye.sku||""}),o.jsx("td",{className:"p-2 border",children:qe}),o.jsx("td",{className:"p-2 border",children:On(je)}),o.jsx("td",{className:"p-2 border",children:On(pe)}),o.jsx("td",{className:"p-2 border",children:On(He)})]},We)})})]})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"font-semibold",children:"Total venta:"}),On(L.total)]}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>Ge(L.id),children:"Eliminar venta"})]})]})})]})}const KH=["Rivas","Isla Ometepe","San Jorge"];function ZLe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState([]),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState("0"),[m,p]=v.useState("Rivas"),[g,x]=v.useState(null),[y,b]=v.useState(""),[w,j]=v.useState("0"),[I,_]=v.useState("Rivas");v.useEffect(()=>{(async()=>{s(!0),l("");try{const J=er(ht(ke,"sellers_candies"),on("name","asc")),ge=await Lt(J),le=[];ge.forEach(de=>{const Ae=de.data();le.push({id:de.id,name:Ae.name||"",commissionPercent:Number(Ae.commissionPercent||0),branch:Ae.branch||"Rivas",createdAt:Ae.createdAt||dr.now()})}),n(le)}catch(J){console.error(J),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const E=()=>{f(""),A("0"),p("Rivas")},S=async J=>{J.preventDefault(),l("");const ge=d.trim();if(!ge){l("Ingresa el nombre y apellido del vendedor.");return}const le=Number(h||0);if(le<0){l("La comisin no puede ser negativa.");return}try{const de={name:ge,commissionPercent:le,branch:m,createdAt:dr.now()},Ae=await _n(ht(ke,"sellers_candies"),de);n(se=>[{id:Ae.id,...de},...se]),l(" Vendedor creado correctamente."),E(),u(!1)}catch(de){console.error(de),l(" Error al crear el vendedor.")}},O=J=>{x(J.id),b(J.name),j(J.commissionPercent.toString()),_(J.branch)},P=()=>{x(null),b(""),j("0"),_("Rivas")},T=async()=>{if(!g)return;l("");const J=y.trim();if(!J){l("El nombre y apellido no pueden estar vacos.");return}const ge=Number(w||0);if(ge<0){l("La comisin no puede ser negativa.");return}try{await nn($t(ke,"sellers_candies",g),{name:J,commissionPercent:ge,branch:I}),n(le=>le.map(de=>de.id===g?{...de,name:J,commissionPercent:ge,branch:I}:de)),l(" Vendedor actualizado."),P()}catch(le){console.error(le),l(" Error al actualizar el vendedor.")}},F=async J=>{if(window.confirm(`Eliminar al vendedor "${J.name}"? Esta accin no se puede deshacer.`))try{await Cn($t(ke,"sellers_candies",J.id)),n(le=>le.filter(de=>de.id!==J.id)),l(" Vendedor eliminado.")}catch(le){console.error(le),l(" Error al eliminar el vendedor.")}};return o.jsxs("div",{className:"max-w-5xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pc,{onClick:e,loading:a}),o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),o.jsxs("form",{onSubmit:S,className:"space-y-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),o.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:J=>f(J.target.value),placeholder:"Ej: Juan Prez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Comisin (% sobre venta total)"}),o.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:h,onChange:J=>A(J.target.value),placeholder:"Ej: 10"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje se usa para calcular la comisin del vendedor sobre el total de la venta (no es el margen del producto)."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),o.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:J=>p(J.target.value),children:KH.map(J=>o.jsx("option",{value:J,children:J},J))})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[o.jsx("button",{type:"button",onClick:()=>{E(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:o.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),o.jsx("th",{className:"p-2 border",children:"Comisin (%)"}),o.jsx("th",{className:"p-2 border",children:"Sucursal"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(J=>{const ge=g===J.id;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:ge?o.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:le=>b(le.target.value)}):J.name}),o.jsx("td",{className:"p-2 border",children:ge?o.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:le=>j(le.target.value)}):`${J.commissionPercent.toFixed(2)} %`}),o.jsx("td",{className:"p-2 border",children:ge?o.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:le=>_(le.target.value),children:KH.map(le=>o.jsx("option",{value:le,children:le},le))}):J.branch}),o.jsx("td",{className:"p-2 border",children:ge?o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:T,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:P,children:"Cancelar"})]}):o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>O(J),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>F(J),children:"Borrar"})]})})]},J.id)})})]})}),i&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const Mo=t=>Math.max(0,Math.floor(Number(t||0)));function eUe(t){return Math.max(1,Mo(t.unitsPerPackage||1))}async function tUe(t){const{orderId:e,productId:r}=t;let n=Mo(t.packagesToReturn);if(!e||!r||n<=0)return;const a=er(ht(ke,"inventory_candies"),ir("orderId","==",e),ir("productId","==",r),on("createdAt","asc")),s=await Lt(a);if(s.empty)return;const i=s.docs.map(l=>l.ref);await Qi(ke,async l=>{const c=await Promise.all(i.map(u=>l.get(u)));for(let u=0;u<i.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),h=eUe(f),A=n*h,p=Mo(f.remaining??0)+A,g=Math.floor(p/h);l.update(i[u],{remaining:p,remainingPackages:g,packages:g,updatedAt:dr.now()}),n=0}})}async function rUe(t){const{orderId:e,productId:r}=t,n=Mo(t.packagesToReturn);if(!e||!r||n<=0)return;const a=$t(ke,"candy_main_orders",e);await Qi(ke,async s=>{const i=await s.get(a);if(!i.exists())return;const l=i.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:Mo(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:dr.now()})})}function nUe(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=Mo((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),i=Math.max(1,Mo((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:i})}return e}function GH(t,e){const r=Mo(t),n=Math.max(1,Mo(e));return Math.floor(r/n)}async function qH(t){if(!t)throw new Error("vendorInventoryId requerido");const e=$t(ke,"inventory_candies_sellers",t),r=await li(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=Mo(n.packages||n.remainingPackages||0),i=nUe(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!i.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Qi(ke,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await tUe({orderId:c,productId:a,packagesToReturn:s}),await rUe({orderId:c,productId:a,packagesToReturn:s}),await Qi(ke,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Qi(ke,async c=>{const u={};for(const g of i){const x=Math.max(1,Mo(g.unitsPerPackage||1)),y=Mo(g.units),b=GH(y,x);b>0&&(u[g.masterOrderId]=(u[g.masterOrderId]||0)+b)}const d=i.map(g=>$t(ke,"inventory_candies",g.batchId)),h=Object.keys(u).map(g=>$t(ke,"candy_main_orders",g)),[A,m]=await Promise.all([Promise.all(d.map(g=>c.get(g))),Promise.all(h.map(g=>c.get(g)))]);let p=0;for(let g=0;g<i.length;g++){const x=i[g],y=A[g];if(!y.exists())continue;const b=y.data(),w=Math.max(1,Mo(x.unitsPerPackage||b.unitsPerPackage||1)),j=Mo(x.units),_=Mo(b.remaining??0)+j,E=Math.floor(_/w);c.update(d[g],{remaining:_,remainingPackages:E,packages:E,updatedAt:dr.now()});const S=GH(j,w);S>0&&(p+=S)}for(let g=0;g<h.length;g++){const x=m[g];if(!x.exists())continue;const y=h[g].id,b=Mo(u[y]||0);if(b<=0)continue;const w=x.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(E=>String((E==null?void 0:E.id)||"")!==String(a)?E:(I=!0,{...E,remainingPackages:Mo(E.remainingPackages)+b}));I&&c.update(h[g],{items:_,updatedAt:dr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const to=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function aUe(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const zH=t=>Math.max(0,Math.floor(Number(t||0)));function sUe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=gc(),i=n&&n.length?n:t,l=!i||Jr(i,"admin"),c=Jr(i,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,h]=v.useState({}),[A,m]=v.useState([]),[p,g]=v.useState([]),[x,y]=v.useState({}),[b,w]=v.useState(null),[j,I]=v.useState([]),[_,E]=v.useState(!0),[S,O]=v.useState(""),[P,T]=v.useState(!1),[F,J]=v.useState(null),[ge,le]=v.useState([]),[de,Ae]=v.useState(""),[se,Ie]=v.useState(""),[Pe,k]=v.useState(""),[H,R]=v.useState("0"),[M,G]=v.useState([]),[X,D]=v.useState(!1),Q=20,[te,me]=v.useState(1),L=v.useMemo(()=>A.find(rt=>rt.id===de)||null,[de,A]),[he,ne]=v.useState(""),z=L==null?void 0:L.branch,ce=v.useMemo(()=>p.find(rt=>rt.id===Pe)||null,[Pe,p]),K=v.useMemo(()=>new Set(M.map(rt=>rt.productId)),[M]),oe=v.useMemo(()=>p.filter(rt=>(x[rt.id]??0)>0||K.has(rt.id)).sort((rt,Mt)=>rt.name.localeCompare(Mt.name)),[p,x,K]),xe=v.useMemo(()=>{const rt=he.trim().toLowerCase();return rt?oe.filter(Mt=>`${Mt.category??""} ${Mt.name??""}`.toLowerCase().includes(rt)):oe},[oe,he]);v.useMemo(()=>{const rt={};return A.forEach(Mt=>rt[Mt.id]=Mt),rt},[A]);const De=v.useMemo(()=>!c||!u?null:A.find(rt=>(rt.email||"").trim().toLowerCase()===u)||null,[c,u,A]),nt=v.useMemo(()=>{const rt=A.find(Mt=>(Mt.email||"").trim().toLowerCase()===u)||null;return(rt==null?void 0:rt.name)||(r||"").trim()||""},[A,u,r]),Me=async()=>{try{const rt=ht(ke,"inventory_transfers_candies");if(!c){const Ht=await Lt(rt),ct={};Ht.forEach(Oe=>{const ot=Oe.data(),mt=Number(ot.packagesMoved||0),wt=String(ot.fromOrderKey||""),Ct=String(ot.toOrderKey||"");wt&&(ct[wt]=ct[wt]||{out:0,in:0},ct[wt].out+=mt),Ct&&(ct[Ct]=ct[Ct]||{out:0,in:0},ct[Ct].in+=mt)}),h(ct);return}const Mt=er(rt,ir("fromSellerId","==",e)),Yt=er(rt,ir("toSellerId","==",e)),[ar,It]=await Promise.all([Lt(Mt),Lt(Yt)]),mr={},fr=(Ht,ct)=>{Ht.forEach(Oe=>{const ot=Oe.data(),mt=Number(ot.packagesMoved||0),wt=String(ct==="out"?ot.fromOrderKey||"":ot.toOrderKey||"");wt&&(mr[wt]=mr[wt]||{out:0,in:0},mr[wt][ct]+=mt)})};fr(ar.docs,"out"),fr(It.docs,"in"),h(mr)}catch(rt){console.error(rt),h({})}};v.useEffect(()=>{M.length&&G(rt=>rt.map(Mt=>{const{subtotal:Yt,totalVendor:ar,gainVendor:It,pricePerPackage:mr,totalRivas:fr,totalSanJorge:Ht,totalIsla:ct}=je({providerPrice:Mt.providerPrice,unitPriceRivas:Mt.unitPriceRivas,unitPriceSanJorge:Mt.unitPriceSanJorge,unitPriceIsla:Mt.unitPriceIsla,packages:Mt.packages,sellerBranch:z});return{...Mt,subtotal:Yt,totalVendor:ar,gainVendor:It,pricePerPackage:mr,totalRivas:fr,totalSanJorge:Ht,totalIsla:ct}}))},[z]),v.useEffect(()=>{(async()=>{E(!0),O("");try{const rt=await Lt(er(ht(ke,"sellers_candies"),on("name","asc"))),Mt=[];rt.forEach(Oe=>{const ot=Oe.data(),mt=ot.branch||ot.branchLabel||ot.route||ot.sucursal||ot.location||"";Mt.push({id:Oe.id,name:ot.name||"",email:ot.email||"",commissionPercent:Number(ot.commissionPercent||0),branch:aUe(mt),branchLabel:mt})}),m(Mt);const Yt=await Lt(ht(ke,"inventory_candies")),ar={},It={};Yt.forEach(Oe=>{var oa;const ot=Oe.data(),mt=String(ot.productId||"");if(!mt)return;const wt=Number(ot.remainingPackages);if(Number.isFinite(wt))ar[mt]=(ar[mt]||0)+Math.max(0,Math.floor(wt));else{const ta=Number(ot.remaining??ot.quantity??0),ss=Number(ot.unitsPerPackage||0);let Xi=0;ss>0?Xi=ta/ss:Xi=Number(ot.packages||0),ar[mt]=(ar[mt]||0)+Math.max(0,Xi)}const Ct=String(ot.date||""),Rt=Number(((oa=ot.createdAt)==null?void 0:oa.seconds)??0),Pt={unitPriceRivas:Number(ot.unitPriceRivas||0),unitPriceSanJorge:Number(ot.unitPriceSanJorge||0),unitPriceIsla:Number(ot.unitPriceIsla||0),date:Ct,createdAtSec:Rt};if(!(Pt.unitPriceRivas>0||Pt.unitPriceSanJorge>0||Pt.unitPriceIsla>0))return;const Ar=It[mt];if(!Ar){It[mt]=Pt;return}const Cr=`${Ar.date}#${String(Ar.createdAtSec).padStart(10,"0")}`;`${Pt.date}#${String(Pt.createdAtSec).padStart(10,"0")}`>Cr&&(It[mt]=Pt)}),Object.keys(ar).forEach(Oe=>ar[Oe]=Math.floor(ar[Oe])),y(ar);const mr=await Lt(er(ht(ke,"products_candies"),on("name","asc"))),fr=[];mr.forEach(Oe=>{const ot=Oe.data(),mt=Oe.id,wt=It[mt];fr.push({id:mt,name:ot.name||"",category:ot.category||"",providerPrice:Number(ot.providerPrice||0),packages:Number(ot.packages||0),unitsPerPackage:Number(ot.unitsPerPackage||0),unitPriceRivas:Number((wt==null?void 0:wt.unitPriceRivas)||0),unitPriceSanJorge:Number((wt==null?void 0:wt.unitPriceSanJorge)||0),unitPriceIsla:Number((wt==null?void 0:wt.unitPriceIsla)||0)})}),g(fr);const Ht=await Lt(c?er(ht(ke,"inventory_candies_sellers"),ir("sellerId","==",e),on("createdAt","desc")):er(ht(ke,"inventory_candies_sellers"),on("createdAt","desc"))),ct=[];Ht.forEach(Oe=>{const ot=Oe.data();ct.push({id:Oe.id,sellerId:ot.sellerId,sellerName:ot.sellerName||"",productId:ot.productId,productName:ot.productName||"",category:ot.category||"",orderId:ot.orderId||null,packages:Number(ot.packages||0),unitsPerPackage:Number(ot.unitsPerPackage||0),totalUnits:Number(ot.totalUnits||0),remainingPackages:Number(ot.remainingPackages||0),remainingUnits:Number(ot.remainingUnits||0),providerPrice:Number(ot.providerPrice||0),totalRivas:Number(ot.totalRivas||0),totalSanJorge:Number(ot.totalSanJorge||0),totalIsla:Number(ot.totalIsla||0),unitPriceRivas:Number(ot.unitPriceRivas||0),unitPriceSanJorge:Number(ot.unitPriceSanJorge||0),unitPriceIsla:Number(ot.unitPriceIsla||0),markupPercent:Number(ot.markupPercent||0),subtotal:Number(ot.subtotal||0),totalVendor:Number(ot.totalVendor||0),gainVendor:Number(ot.gainVendor||0),unitPriceVendor:Number(ot.unitPriceVendor||0),date:ot.date||"",createdAt:ot.createdAt||dr.now()})}),I(ct),await Me()}catch(rt){console.error(rt),O(" Error cargando datos de vendedores / pedidos.")}finally{E(!1)}})()},[a,t,e]);const Je=v.useMemo(()=>c&&De?j.filter(rt=>rt.sellerId===De.id):j,[j,c,De]),lt=v.useMemo(()=>{var Mt;const rt={};for(const Yt of Je){const ar=Yt.orderId||Yt.id,It=rt[ar],mr=Yt.date||((Mt=Yt.createdAt)!=null&&Mt.toDate?Yt.createdAt.toDate().toISOString().slice(0,10):"");if(It)It.totalPackages+=Yt.packages,It.totalRemainingPackages+=Yt.remainingPackages,It.subtotal+=Yt.subtotal,It.totalVendor+=Yt.totalVendor,mr>It.date&&(It.date=mr);else{const fr=f[ar]||{out:0,in:0};rt[ar]={orderKey:ar,sellerId:Yt.sellerId,sellerName:Yt.sellerName,date:mr,totalPackages:Yt.packages,totalRemainingPackages:Yt.remainingPackages,subtotal:Yt.subtotal,totalVendor:Yt.totalVendor,transferredOut:fr.out,transferredIn:fr.in}}}return Object.values(rt).map(Yt=>{const ar=f[Yt.orderKey]||{out:0,in:0};return{...Yt,transferredOut:ar.out||0,transferredIn:ar.in||0}}).sort((Yt,ar)=>ar.date.localeCompare(Yt.date))},[Je,f]);v.useEffect(()=>{me(1)},[lt.length]);const ft=v.useMemo(()=>Math.max(1,Math.ceil(lt.length/Q)),[lt.length]),Ge=v.useMemo(()=>{const rt=(te-1)*Q;return lt.slice(rt,rt+Q)},[lt,te]),ye=v.useMemo(()=>{const rt={};return lt.forEach(Mt=>rt[Mt.orderKey]=Mt),rt},[lt]),We=v.useMemo(()=>{const rt=M.reduce((mr,fr)=>mr+Number(fr.packages||0),0),Mt=M.reduce((mr,fr)=>mr+Number(fr.totalVendor||0),0),Yt=M.reduce((mr,fr)=>mr+Number(fr.subtotal||0),0),ar=Mt-Yt,It=M.reduce((mr,fr)=>mr+Number(fr.gainVendor||0),0);return{totalPackages:rt,totalExpected:Mt,grossProfit:ar,vendorProfit:It}},[M]),qe=()=>{J(null),le([]),Ae(""),Ie(""),k(""),R("0"),G([])};function je(rt){const Mt=Number(rt.providerPrice||0),Yt=Number(rt.packages||0),ar=Number(rt.unitPriceRivas||0),It=Number(rt.unitPriceSanJorge||0),mr=Number(rt.unitPriceIsla||0),fr=Mt*Yt,Ht=ar*Yt,ct=It*Yt,Oe=mr*Yt;let ot=ar,mt=Ht;switch(rt.sellerBranch){case"SAN_JORGE":ot=It,mt=ct;break;case"ISLA":ot=mr,mt=Oe;break;case"RIVAS":default:ot=ar,mt=Ht;break}const wt=mt-fr;return{subtotal:fr,totalVendor:mt,gainVendor:wt,pricePerPackage:ot,totalRivas:Ht,totalSanJorge:ct,totalIsla:Oe,unitPriceRivas:ar,unitPriceSanJorge:It,unitPriceIsla:mr}}function pe(rt,Mt){const{subtotal:Yt,totalVendor:ar,gainVendor:It,pricePerPackage:mr,totalRivas:fr,totalSanJorge:Ht,totalIsla:ct,unitPriceRivas:Oe,unitPriceSanJorge:ot,unitPriceIsla:mt}=je({providerPrice:rt.providerPrice,unitPriceRivas:rt.unitPriceRivas,unitPriceSanJorge:rt.unitPriceSanJorge,unitPriceIsla:rt.unitPriceIsla,packages:Mt,sellerBranch:z});return{id:`${rt.id}-${Date.now()}-${Math.random()}`,productId:rt.id,productName:rt.name,category:rt.category,providerPrice:rt.providerPrice,unitsPerPackage:rt.unitsPerPackage,packages:Mt,subtotal:Yt,totalVendor:ar,gainVendor:It,pricePerPackage:mr,totalRivas:fr,totalSanJorge:Ht,totalIsla:ct,unitPriceRivas:Oe,unitPriceSanJorge:ot,unitPriceIsla:mt,remainingPackages:Mt}}const He=()=>{if(d)return;if(!ce){O("Selecciona un producto antes de agregarlo.");return}if(K.has(ce.id)){O("Ese producto ya est agregado en este pedido.");return}const rt=Number(H||0);if(rt<=0){O("La cantidad de paquetes debe ser mayor a 0.");return}const Mt=x[ce.id]??0;if(!F&&rt>Mt){O(`No hay suficientes paquetes en inventario general. Disponibles: ${Mt}`);return}const Yt=pe(ce,rt);G(ar=>[...ar,Yt]),k(""),R("0")},at=rt=>{d||G(Mt=>Mt.filter(Yt=>Yt.id!==rt))},yt=(rt,Mt)=>{if(d)return;const Yt=Number(Mt||0);G(ar=>ar.map(It=>{if(It.id!==rt)return It;const{subtotal:mr,totalVendor:fr,gainVendor:Ht,pricePerPackage:ct,totalRivas:Oe,totalSanJorge:ot,totalIsla:mt}=je({providerPrice:It.providerPrice,unitPriceRivas:It.unitPriceRivas,unitPriceSanJorge:It.unitPriceSanJorge,unitPriceIsla:It.unitPriceIsla,packages:Yt,sellerBranch:z});return{...It,packages:Yt,subtotal:mr,totalVendor:fr,gainVendor:Ht,pricePerPackage:ct,totalRivas:Oe,totalSanJorge:ot,totalIsla:mt}}))};async function bt(rt,Mt,Yt){const ar=await PLe({productId:rt,quantityPacks:Mt,saleDate:Yt}),It=Array.isArray(ar==null?void 0:ar.allocations)?ar.allocations:[];if(!It.length)return[];const mr=It.map(ct=>String(ct.batchId||"")).filter(Boolean),fr=await Promise.all(mr.map(ct=>li($t(ke,"inventory_candies",ct)))),Ht=[];for(let ct=0;ct<It.length;ct++){const Oe=It[ct],ot=String(Oe.batchId||""),mt=zH(Oe.qty||Oe.units||Oe.quantity||0),wt=fr[ct];if(!ot||mt<=0||!wt.exists())continue;const Ct=wt.data(),Rt=String(Ct.orderId||""),Pt=Math.max(1,zH(Ct.unitsPerPackage||1));Rt&&Ht.push({batchId:ot,masterOrderId:Rt,units:mt,unitsPerPackage:Pt})}return Ht}const kt=async rt=>{if(rt.preventDefault(),X)return;if(!l){O("No tienes permiso para guardar pedidos.");return}if(O(""),!L){O("Selecciona un vendedor.");return}if(!M.length){O("Agrega al menos un producto al pedido.");return}const Mt=new Date().toISOString().slice(0,10),Yt=se||Mt;try{if(E(!0),D(!0),F){const ar={};ge.forEach(fr=>{ar[fr.productId]=fr});const It={};M.forEach(fr=>{It[fr.productId]=fr});for(const fr of Object.keys(It)){const Ht=It[fr],ct=ar[fr],Oe=Number(Ht.packages||0),ot=ct?Number(ct.packages||0):0,mt=Oe-ot;if(mt>0){const wt=await bt(fr,mt,Yt);if(ct&&wt.length){const Ct=$t(ke,"inventory_candies_sellers",ct.id),Rt=await li(Ct),Pt=Rt.exists()?Rt.data():{},Ar=[...Array.isArray(Pt.masterAllocations)?Pt.masterAllocations:[],...wt];await nn(Ct,{masterAllocations:Ar,updatedAt:dr.now()})}}else mt<0}let mr=[...j];for(const fr of Object.keys(It)){const Ht=It[fr],ct=ar[fr],Oe=p.find(wt=>wt.id===fr),ot=(Oe==null?void 0:Oe.unitsPerPackage)||Ht.unitsPerPackage||0,mt=Ht.packages>0&&ot>0?Ht.packages*ot:0;if(ct)await nn($t(ke,"inventory_candies_sellers",ct.id),{sellerId:L.id,sellerName:L.name,productId:fr,productName:Ht.productName,category:Ht.category,packages:Ht.packages,unitsPerPackage:ot,totalUnits:mt,remainingPackages:Ht.packages,remainingUnits:mt,providerPrice:Ht.providerPrice,totalRivas:Ht.totalRivas,totalSanJorge:Ht.totalSanJorge,totalIsla:Ht.totalIsla,unitPriceRivas:Ht.unitPriceRivas,unitPriceSanJorge:Ht.unitPriceSanJorge,unitPriceIsla:Ht.unitPriceIsla,markupPercent:0,subtotal:Ht.subtotal,totalVendor:Ht.totalVendor,gainVendor:Ht.gainVendor,unitPriceVendor:Ht.pricePerPackage,date:Yt,orderId:ct.orderId||F,updatedAt:dr.now()}),mr=mr.map(wt=>wt.id===ct.id?{...wt,sellerId:L.id,sellerName:L.name,productId:fr,productName:Ht.productName,category:Ht.category,packages:Ht.packages,unitsPerPackage:ot,totalUnits:mt,remainingPackages:Ht.packages,remainingUnits:mt,providerPrice:Ht.providerPrice,totalRivas:Ht.totalRivas,totalSanJorge:Ht.totalSanJorge,totalIsla:Ht.totalIsla,unitPriceRivas:Ht.unitPriceRivas,unitPriceSanJorge:Ht.unitPriceSanJorge,unitPriceIsla:Ht.unitPriceIsla,markupPercent:0,subtotal:Ht.subtotal,totalVendor:Ht.totalVendor,gainVendor:Ht.gainVendor,unitPriceVendor:Ht.pricePerPackage,date:Yt,orderId:ct.orderId||F}:wt);else{const wt=await bt(fr,Ht.packages,Yt),Ct={sellerId:L.id,sellerName:L.name,productId:fr,productName:Ht.productName,category:Ht.category,orderId:F,packages:Ht.packages,unitsPerPackage:ot,totalUnits:mt,remainingPackages:Ht.packages,remainingUnits:mt,providerPrice:Ht.providerPrice,totalRivas:Ht.totalRivas,totalSanJorge:Ht.totalSanJorge,totalIsla:Ht.totalIsla,unitPriceRivas:Ht.unitPriceRivas,unitPriceSanJorge:Ht.unitPriceSanJorge,unitPriceIsla:Ht.unitPriceIsla,markupPercent:0,subtotal:Ht.subtotal,totalVendor:Ht.totalVendor,gainVendor:Ht.gainVendor,unitPriceVendor:Ht.pricePerPackage,date:Yt,createdAt:dr.now(),status:"ASIGNADO",masterAllocations:wt};mr=[{id:(await _n(ht(ke,"inventory_candies_sellers"),Ct)).id,...Ct},...mr]}}for(const fr of Object.keys(ar))if(!It[fr]){const Ht=ar[fr];await qH(Ht.id),mr=mr.filter(ct=>ct.id!==Ht.id)}I(mr),O(" Pedido actualizado para el vendedor y sincronizado con inventario principal.")}else{const ar=`ORD-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;for(const It of M){const mr=p.find(ot=>ot.id===It.productId);if(!mr)continue;const fr=It.packages>0&&mr.unitsPerPackage>0?It.packages*mr.unitsPerPackage:0,Ht=await bt(It.productId,It.packages,Yt),ct={sellerId:L.id,sellerName:L.name,productId:It.productId,productName:It.productName,category:It.category,orderId:ar,packages:It.packages,unitsPerPackage:mr.unitsPerPackage,totalUnits:fr,remainingPackages:It.packages,remainingUnits:fr,providerPrice:It.providerPrice,totalRivas:It.totalRivas,totalSanJorge:It.totalSanJorge,totalIsla:It.totalIsla,unitPriceRivas:It.unitPriceRivas,unitPriceSanJorge:It.unitPriceSanJorge,unitPriceIsla:It.unitPriceIsla,markupPercent:0,subtotal:It.subtotal,totalVendor:It.totalVendor,gainVendor:It.gainVendor,unitPriceVendor:It.pricePerPackage,date:Yt,createdAt:dr.now(),status:"ASIGNADO",masterAllocations:Ht},Oe=await _n(ht(ke,"inventory_candies_sellers"),ct);I(ot=>[{id:Oe.id,...ct},...ot])}O(" Pedido asignado al vendedor y descontado del inventario.")}qe(),T(!1)}catch(ar){console.error(ar),O((ar==null?void 0:ar.message)||" Error al guardar el pedido del vendedor / ajustar inventario.")}finally{D(!1),E(!1)}},Vt=()=>{if(!L){O("Selecciona un vendedor para imprimir el pedido.");return}if(!M.length){O("No hay productos en el pedido para imprimir.");return}const rt=se||new Date().toISOString().slice(0,10),Mt=fr=>(fr||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Yt="Pedido de dulces para vendedor";Number((L==null?void 0:L.commissionPercent)||0);const ar=M.map(fr=>{const Ht=Number(fr.totalVendor||0)-Number(fr.subtotal||0),ct=Number(fr.gainVendor||0);return`
      <tr>
        <td>${Mt(fr.productName)}</td>
        <td class="right">${Mt(fr.category||"")}</td>
        <td class="right">${fr.packages}</td>
        <td class="right">${to(fr.totalVendor)}</td>
        <td class="right">${to(Ht)}</td>
        <td class="right">${to(ct)}</td>
      </tr>`}).join(""),It=`<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>${Mt(Yt)}</title>
  <style>
    *{font-family: Arial, sans-serif; box-sizing:border-box;}
    body{margin:16px;font-size:13px;}
    h1{font-size:18px;margin:0 0 4px;}
    h2{font-size:14px;margin:12px 0 6px;}
    .muted{color:#555;font-size:11px;margin-bottom:10px;}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:6px 18px;margin:10px 0 14px;}
    .card{border:1px solid #ddd;border-radius:6px;padding:6px 8px;background:#fafafa;}
    .label{font-size:11px;color:#555;margin-bottom:2px;}
    .value{font-size:14px;font-weight:bold;}
    table{width:100%;border-collapse:collapse;margin-top:8px;font-size:12px;}
    th,td{border:1px solid #ddd;padding:4px 6px;}
    th{background:#f5f5f5;text-align:left;}
    .right{text-align:right;}
    @media print{
      @page{size:A5;margin:10mm;}
      body{margin:0;font-size:12px;}
    }
  </style>
</head>
<body>
  <h1>${Mt(Yt)}</h1>
  <div class="muted">
    Fecha pedido: <b>${Mt(rt)}</b><br/>
    Vendedor: <b>${Mt(L.name)}</b>${L.commissionPercent?` &mdash; Comisin: <b>${L.commissionPercent.toFixed(2)}%</b>`:""}${L.branchLabel?`<br/>Ruta / sucursal: <b>${Mt(L.branchLabel)}</b>`:""}
  </div>

 <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
  <div className="border rounded p-2 bg-white">
    <div className="text-xs text-gray-600">Paquetes totales asociados</div>
    <div className="text-lg font-bold">{orderSummary.totalPackages}</div>
  </div>

  <div className="border rounded p-2 bg-white">
    <div className="text-xs text-gray-600">Total esperado</div>
    <div className="text-lg font-bold">{money(orderSummary.totalExpected)}</div>
  </div>

  <div className="border rounded p-2 bg-white">
    <div className="text-xs text-gray-600">Utilidad bruta</div>
    <div className="text-lg font-bold">{money(orderSummary.grossProfit)}</div>
  </div>

  <div className="border rounded p-2 bg-white">
    <div className="text-xs text-gray-600">Utilidad vendedor</div>
    <div className="text-lg font-bold">{money(orderSummary.vendorProfit)}</div>
  </div>
</div>


  <h2>Detalle del pedido</h2>
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th class="right">Categora</th>
        <th class="right">Paquetes</th>
        <th class="right">Total esperado</th>
        <th class="right">U. Bruta</th>
        <th class="right">U. Vendedor</th>
      </tr>
    </thead>
    <tbody>
      ${ar}
    </tbody>
  </table>

  <script>window.print()<\/script>
</body>
</html>`,mr=window.open("","_blank");if(!mr){alert("No se pudo abrir la ventana de impresin (revisa bloqueadores de pop-ups).");return}mr.document.open(),mr.document.write(It),mr.document.close()},ve=rt=>{const Mt=Je.filter(It=>(It.orderId||It.id)===rt);if(!Mt.length){O("No se encontraron filas para este pedido.");return}const Yt=Mt[0];if(c&&De&&Yt.sellerId!==De.id){O("No tienes permiso para ver este pedido.");return}J(rt),le(Mt),Ae(Yt.sellerId),Ie(Yt.date);const ar=Mt.map(It=>{const mr=It.unitPriceRivas||0,fr=It.unitPriceSanJorge||0,Ht=It.unitPriceIsla||0,ct=It.totalRivas||mr*Number(It.packages||0),Oe=It.totalSanJorge||fr*Number(It.packages||0),ot=It.totalIsla||Ht*Number(It.packages||0);return{id:It.id,productId:It.productId,productName:It.productName,category:It.category,providerPrice:It.providerPrice,unitsPerPackage:It.unitsPerPackage,packages:It.packages,subtotal:It.subtotal,totalVendor:It.totalVendor,gainVendor:It.gainVendor,pricePerPackage:It.unitPriceVendor,totalRivas:ct,totalSanJorge:Oe,totalIsla:ot,unitPriceRivas:mr,unitPriceSanJorge:fr,unitPriceIsla:Ht,remainingPackages:It.remainingPackages}});G(ar),k(""),R("0"),T(!0),ne("")},Qe=async rt=>{if(!l){O("No tienes permiso para borrar pedidos.");return}const Mt=j.filter(It=>(It.orderId||It.id)===rt);if(!Mt.length)return;const Yt=Mt[0].sellerName||"";if(confirm(`Eliminar COMPLETAMENTE este pedido del vendedor "${Yt}"? Se regresarn los paquetes al inventario principal.`))try{E(!0);for(const It of Mt)await qH(It.id);I(It=>It.filter(mr=>(mr.orderId||mr.id)!==rt)),O(" Pedido eliminado y paquetes regresados correctamente.")}catch(It){console.error(It),O(" Error al eliminar el pedido / regresar paquetes.")}finally{E(!1)}},[Z,$e]=v.useState(!1),[Le,Ve]=v.useState(!1),[At,pt]=v.useState([]),[Be,gt]=v.useState(""),[V,ae]=v.useState(""),[Se,_e]=v.useState(""),[Ee,ze]=v.useState(""),[ut,st]=v.useState("0"),[ee,W]=v.useState(""),[re,fe]=v.useState(!1),Ne=v.useMemo(()=>lt.map(rt=>rt.orderKey),[lt]),be=v.useMemo(()=>Be?Je.filter(rt=>(rt.orderId||rt.id)===Be):[],[Je,Be]),Xe=v.useMemo(()=>be.filter(rt=>Number(rt.remainingPackages||0)>0),[be]),it=v.useMemo(()=>V&&Je.find(rt=>rt.id===V)||null,[Je,V]),xt=v.useMemo(()=>Se?Je.filter(rt=>(rt.orderId||rt.id)===Se):[],[Je,Se]),_t=v.useMemo(()=>it?xt.filter(rt=>rt.productId===it.productId):[],[xt,it]),Et=async()=>{try{Ve(!0);let rt=[];if(c&&e){const Mt=er(ht(ke,"inventory_transfers_candies"),ir("fromSellerId","==",e),on("createdAt","desc")),Yt=er(ht(ke,"inventory_transfers_candies"),ir("toSellerId","==",e),on("createdAt","desc")),[ar,It]=await Promise.all([Lt(Mt),Lt(Yt)]),mr=new Set,fr=Ht=>{Ht.forEach(ct=>{if(mr.has(ct.id))return;mr.add(ct.id);const Oe=ct.data();rt.push({id:ct.id,createdAt:Oe.createdAt,date:Oe.date,createdByEmail:Oe.createdByEmail||"",createdByName:Oe.createdByName||"",productId:Oe.productId||"",productName:Oe.productName||"",packagesMoved:Number(Oe.packagesMoved||0),providerPrice:Number(Oe.providerPrice||0),unitPriceRivas:Number(Oe.unitPriceRivas||0),unitPriceIsla:Number(Oe.unitPriceIsla||0),toSellerId:Oe.toSellerId||"",toSellerName:Oe.toSellerName||"",toOrderKey:Oe.toOrderKey||"",toOrderLabel:Oe.toOrderLabel||"",comment:Oe.comment||"",fromSellerId:Oe.fromSellerId||"",fromSellerName:Oe.fromSellerName||"",fromOrderKey:Oe.fromOrderKey||"",fromOrderLabel:Oe.fromOrderLabel||"",fromVendorRowId:Oe.fromVendorRowId||"",toVendorRowId:Oe.toVendorRowId||""})})};fr(ar),fr(It),rt.sort((Ht,ct)=>{var mt,wt;const Oe=((mt=Ht.createdAt)==null?void 0:mt.seconds)||0;return(((wt=ct.createdAt)==null?void 0:wt.seconds)||0)-Oe})}else{const Mt=er(ht(ke,"inventory_transfers_candies"),on("createdAt","desc"));(await Lt(Mt)).forEach(ar=>{const It=ar.data();rt.push({id:ar.id,createdAt:It.createdAt,date:It.date,createdByEmail:It.createdByEmail||"",createdByName:It.createdByName||"",productId:It.productId||"",productName:It.productName||"",packagesMoved:Number(It.packagesMoved||0),providerPrice:Number(It.providerPrice||0),unitPriceRivas:Number(It.unitPriceRivas||0),unitPriceIsla:Number(It.unitPriceIsla||0),toSellerId:It.toSellerId||"",toSellerName:It.toSellerName||"",toOrderKey:It.toOrderKey||"",toOrderLabel:It.toOrderLabel||"",comment:It.comment||"",fromSellerId:It.fromSellerId||"",fromSellerName:It.fromSellerName||"",fromOrderKey:It.fromOrderKey||"",fromOrderLabel:It.fromOrderLabel||"",fromVendorRowId:It.fromVendorRowId||"",toVendorRowId:It.toVendorRowId||""})})}pt(rt)}catch(rt){console.error(rt),O(" Error cargando traslados.")}finally{Ve(!1)}},Gt=async()=>{$e(!0),await Et()},nr=()=>{gt(""),ae(""),_e(""),ze(""),st("0"),W("")},ur=async()=>{if(!l){O("No tienes permiso para hacer traslados.");return}O("");const rt=Number(ut||0);if(!(rt>0)){O("La cantidad de paquetes debe ser mayor a 0.");return}if(!ee.trim()){O("Debes escribir el motivo de la movida.");return}if(!Be||!V){O("Selecciona el pedido origen y el producto.");return}if(!Se||!Ee){O("Selecciona el pedido destino y el producto destino.");return}if(V===Ee){O("Origen y destino no pueden ser el mismo.");return}const Mt=j.find(ar=>ar.id===V)||null,Yt=j.find(ar=>ar.id===Ee)||null;if(!Mt||!Yt){O("No se encontr la fila origen/destino.");return}if(Mt.productId!==Yt.productId){O("El producto destino no coincide con el producto origen.");return}if(Number(Mt.remainingPackages||0)<rt){O("El origen no tiene suficientes paquetes disponibles.");return}try{fe(!0),E(!0);const ar=$t(ke,"inventory_candies_sellers",Mt.id),It=$t(ke,"inventory_candies_sellers",Yt.id),mr=dr.now(),fr=new Date().toISOString().slice(0,10);await Qi(ke,async Ht=>{const ct=await Ht.get(ar),Oe=await Ht.get(It);if(!ct.exists())throw new Error("Orden origen no existe.");if(!Oe.exists())throw new Error("Orden destino no existe.");const ot=ct.data(),mt=Oe.data(),wt=Number(ot.remainingPackages||0);if(wt<rt)throw new Error("Origen no tiene suficientes paquetes.");const Ct=Number(ot.unitsPerPackage||mt.unitsPerPackage||0),Rt=Ct>0?rt*Ct:0;Ht.update(ar,{remainingPackages:wt-rt,...Ct>0?{remainingUnits:Number(ot.remainingUnits||0)-Rt}:{},updatedAt:mr}),Ht.update(It,{remainingPackages:Number(mt.remainingPackages||0)+rt,...Ct>0?{remainingUnits:Number(mt.remainingUnits||0)+Rt}:{},updatedAt:mr});const Pt=$t(ht(ke,"inventory_transfers_candies"));Ht.set(Pt,{createdAt:mr,date:fr,createdByEmail:(r||"").trim(),createdByName:String(nt||"").trim(),productId:String(ot.productId||""),productName:String(ot.productName||""),packagesMoved:rt,providerPrice:Number(ot.providerPrice||0),unitPriceRivas:Number(ot.unitPriceRivas||0),unitPriceIsla:Number(ot.unitPriceIsla||0),fromSellerId:String(ot.sellerId||""),fromSellerName:String(ot.sellerName||""),fromOrderKey:String(ot.orderId||Mt.id||""),fromOrderLabel:String(ot.orderId||Mt.id||""),toSellerId:String(mt.sellerId||""),toSellerName:String(mt.sellerName||""),toOrderKey:String(mt.orderId||Yt.id||""),toOrderLabel:String(mt.orderId||Yt.id||""),fromVendorRowId:Mt.id,toVendorRowId:Yt.id,comment:ee.trim()})}),I(Ht=>Ht.map(ct=>{if(ct.id===Mt.id){const Oe=Number(ct.unitsPerPackage||0),ot=Oe>0?rt*Oe:0;return{...ct,remainingPackages:Number(ct.remainingPackages||0)-rt,remainingUnits:Oe>0?Number(ct.remainingUnits||0)-ot:ct.remainingUnits}}if(ct.id===Yt.id){const Oe=Number(ct.unitsPerPackage||0),ot=Oe>0?rt*Oe:0;return{...ct,remainingPackages:Number(ct.remainingPackages||0)+rt,remainingUnits:Oe>0?Number(ct.remainingUnits||0)+ot:ct.remainingUnits}}return ct})),await Et(),h(Ht=>{const ct={...Ht},Oe=Be,ot=Se,mt=Number(ut||0);return Oe&&(ct[Oe]=ct[Oe]||{out:0,in:0},ct[Oe].out+=mt),ot&&(ct[ot]=ct[ot]||{out:0,in:0},ct[ot].in+=mt),ct}),nr(),O(" Traslado realizado.")}catch(ar){console.error(ar),O((ar==null?void 0:ar.message)||" Error realizando el traslado.")}finally{fe(!1),E(!1)}},[rr,cr]=v.useState(!1),Ir=rt=>{const Mt=String(rt??"");return/[,"\n]/.test(Mt)?`"${Mt.replace(/"/g,'""')}"`:Mt},dn=()=>{const Mt=[["productId","categoria","producto","existentes","paquetes"].join(",")],Yt=[...p].sort((Ht,ct)=>`${Ht.category} ${Ht.name}`.localeCompare(`${ct.category} ${ct.name}`));for(const Ht of Yt){const ct=Number(x[Ht.id]??0);ct<=0||Mt.push([Ir(Ht.id),Ir(Ht.category||""),Ir(Ht.name||""),Ir(ct),Ir("")].join(","))}const ar=Mt.join(`
`),It=new Blob([ar],{type:"text/csv;charset=utf-8"}),mr=URL.createObjectURL(It),fr=document.createElement("a");fr.href=mr,fr.download="plantilla_orden_vendedor_dulces.csv",document.body.appendChild(fr),fr.click(),fr.remove(),URL.revokeObjectURL(mr)},qr=rt=>{const Mt=[];let Yt=[],ar="",It=!1;for(let mr=0;mr<rt.length;mr++){const fr=rt[mr];if(It){fr==='"'?rt[mr+1]==='"'?(ar+='"',mr++):It=!1:ar+=fr;continue}if(fr==='"'){It=!0;continue}if(fr===","){Yt.push(ar),ar="";continue}if(fr===`
`){Yt.push(ar),ar="",Yt.some(Ht=>String(Ht??"").trim()!=="")&&Mt.push(Yt),Yt=[];continue}fr!=="\r"&&(ar+=fr)}return Yt.push(ar),Yt.some(mr=>String(mr??"").trim()!=="")&&Mt.push(Yt),Mt},ln=async rt=>{if(rt&&!d){if(F){O("La importacin se usa en el modal de NUEVA orden (no en edicin).");return}try{cr(!0),O("");const Mt=await rt.text(),Yt=qr(Mt);if(!Yt.length){O("Archivo vaco.");return}const ar=Yt[0].map(Oe=>String(Oe||"").trim().toLowerCase()),It=ar.indexOf("productid"),mr=ar.indexOf("paquetes");if(It===-1||mr===-1){O('El archivo debe tener columnas "productId" y "paquetes". Descarg la plantilla.');return}const fr=[],Ht=new Set,ct=!!L;for(let Oe=1;Oe<Yt.length;Oe++){const ot=Yt[Oe],mt=String(ot[It]??"").trim(),wt=Number(String(ot[mr]??"").trim()||0);if(!mt||!(wt>0)||Ht.has(mt))continue;const Ct=p.find(qt=>qt.id===mt);if(!Ct)continue;const Rt=Number(x[Ct.id]??0);if(wt>Rt)continue;const Pt=pe(Ct,wt);fr.push(Pt),Ht.add(mt)}if(fr.length===0){O("No se import nada. Asegurate de que los paquetes sean > 0 y no excedan existencias.");return}G(Oe=>{const ot=new Set(Oe.map(wt=>wt.productId)),mt=[...Oe];for(const wt of fr)ot.has(wt.productId)||mt.push(wt);return mt}),k(""),R("0"),O(ct?` Importados ${fr.length} productos (CSV).`:` Importados ${fr.length} productos (CSV). Seleccion el vendedor para que el total esperado quede en su sucursal.`)}catch(Mt){console.error(Mt),O(" Error importando archivo.")}finally{cr(!1)}}},qs=()=>{if(lt.length<=Q)return null;const rt=te>1,Mt=te<ft;return o.jsxs("div",{className:"flex items-center justify-between mt-3",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Mostrando"," ",o.jsxs("b",{children:[(te-1)*Q+1,"-",Math.min(te*Q,lt.length)]})," ","de ",o.jsx("b",{children:lt.length})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",onClick:()=>me(1),disabled:!rt,type:"button",children:""}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",onClick:()=>me(Yt=>Math.max(1,Yt-1)),disabled:!rt,type:"button",children:"Anterior"}),o.jsxs("div",{className:"text-xs",children:["Pgina ",o.jsx("b",{children:te})," / ",o.jsx("b",{children:ft})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",onClick:()=>me(Yt=>Math.min(ft,Yt+1)),disabled:!Mt,type:"button",children:"Siguiente"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-50",onClick:()=>me(ft),disabled:!Mt,type:"button",children:""})]})]})};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes de Rutas"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pc,{onClick:s,loading:_}),o.jsx("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded hover:bg-indigo-700 disabled:opacity-30 disabled:bg-gray-300",onClick:Gt,type:"button",disabled:!l,children:"Traslados"}),l&&o.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{qe(),T(!0)},children:[o.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo pedido a vendedor"]})]})]}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[re&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{$e(!1),nr()},type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[o.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Be,onChange:rt=>{gt(rt.target.value),ae(""),_e(""),ze(""),st("0")},disabled:!l,children:[o.jsx("option",{value:"",children:"Selecciona"}),Ne.map(rt=>{const Mt=ye[rt];return o.jsxs("option",{value:rt,children:["Vendedor: ",(Mt==null?void 0:Mt.sellerName)||"","  Existencias:"," ",(Mt==null?void 0:Mt.totalRemainingPackages)||"0"," Paquetes - Fecha Orden: ",(Mt==null?void 0:Mt.date)||""]},rt)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:V,onChange:rt=>{ae(rt.target.value),_e(""),ze(""),st("0")},disabled:!l||!Be,children:[o.jsx("option",{value:"",children:"Selecciona"}),Xe.map(rt=>o.jsxs("option",{value:rt.id,children:["Tipo: ",rt.category," - ",rt.productName,"  Existencias:"," ",Number(rt.remainingPackages||0)," Paquetes - Precio Costo: $",rt.providerPrice]},rt.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Se,onChange:rt=>{_e(rt.target.value),ze("")},disabled:!l||!V,children:[o.jsx("option",{value:"",children:"Selecciona"}),Ne.filter(rt=>rt!==Be).map(rt=>{const Mt=ye[rt];return o.jsxs("option",{value:rt,children:["Vendedor: ",(Mt==null?void 0:Mt.sellerName)||"","  Existencias:"," ",(Mt==null?void 0:Mt.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(Mt==null?void 0:Mt.date)||""]},rt)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Ee,onChange:rt=>ze(rt.target.value),disabled:!l||!Se||!it,children:[o.jsx("option",{value:"",children:"Selecciona"}),_t.map(rt=>o.jsxs("option",{value:rt.id,children:["Tipo: ",rt.category," - ",rt.productName,"  Existencias:"," ",Number(rt.remainingPackages||0)," Paquetes - Precio Costo: $",rt.providerPrice]},rt.id))]}),Se&&it&&_t.length===0&&o.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. (Debe existir en el pedido destino)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:ut,onChange:rt=>st(rt.target.value),disabled:!l||!V||!Ee})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),o.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:ee,onChange:rt=>W(rt.target.value),disabled:!l,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:nr,disabled:!l||re,children:"Limpiar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:ur,disabled:!l||re||!V||!Ee||Number(ut||0)<=0||!ee.trim(),children:"Hacer traslado"})]})]}),o.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-2",children:[o.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Et,disabled:Le,type:"button",children:Le?"Cargando...":"Recargar"})]}),o.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),o.jsx("th",{className:"p-2 border",children:"Usuario"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),o.jsx("th",{className:"p-2 border",children:"Movido a orden"}),o.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),o.jsx("tbody",{children:Le?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):At.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):At.map(rt=>{var It,mr;const Mt=((mr=(It=rt.createdAt)==null?void 0:It.toDate)==null?void 0:mr.call(It))||(rt.createdAt?new Date(rt.createdAt.seconds*1e3):null),Yt=Mt?`${Mt.toISOString().slice(0,10)} ${Mt.toISOString().slice(11,19)}`:rt.date||"",ar=(rt.createdByName||"").trim()||(rt.createdByEmail||"").trim()||"";return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Yt}),o.jsx("td",{className:"p-2 border",children:ar}),o.jsx("td",{className:"p-2 border text-left",children:rt.productName||""}),o.jsx("td",{className:"p-2 border",children:Number(rt.packagesMoved||0)}),o.jsx("td",{className:"p-2 border",children:to(rt.providerPrice||0)}),o.jsx("td",{className:"p-2 border",children:to(rt.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 border",children:to(rt.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 border",children:rt.toSellerName||""}),o.jsx("td",{className:"p-2 border",children:rt.toOrderLabel||rt.toOrderKey||""}),o.jsx("td",{className:"p-2 border text-left",children:rt.comment||""})]},rt.id)})})]})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}),P&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm relative",children:[X&&o.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando pedido..."})}),o.jsx("h3",{className:"text-xl font-bold mb-4",children:F?"Editar pedido de vendedor":"Nuevo pedido para vendedor"}),A.length===0&&o.jsx("p",{className:"text-sm text-red-600 mb-2",children:" No hay vendedores. Primero crea vendedores en la pantalla correspondiente."}),o.jsxs("form",{onSubmit:kt,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:de,onChange:rt=>Ae(rt.target.value),disabled:d,children:[o.jsx("option",{value:"",children:"Selecciona un vendedor"}),A.map(rt=>o.jsxs("option",{value:rt.id,children:[rt.name,rt.branchLabel?` - ${rt.branchLabel}`:"",rt.commissionPercent?` (${rt.commissionPercent.toFixed(1)}% comisin)`:""]},rt.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:se,onChange:rt=>Ie(rt.target.value),disabled:d})]})]}),!F&&o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[o.jsx("div",{className:"font-semibold text-sm",children:"Importacin por Excel (plantilla CSV)"}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:dn,disabled:rr||d,children:"Descargar plantilla"}),o.jsxs("label",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 cursor-pointer disabled:opacity-60",children:[rr?"Importando...":"Importar CSV",o.jsx("input",{type:"file",accept:".csv,text/csv",className:"hidden",onChange:rt=>{var Mt;return ln(((Mt=rt.target.files)==null?void 0:Mt[0])||null)},disabled:rr||d})]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["* Abr la plantilla en Excel/Sheets, llen la columna",o.jsx("b",{children:" paquetes"}),", y export a ",o.jsx("b",{children:"CSV"})," para importarla."]})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end",children:[o.jsxs("div",{className:"md:col-span-5",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Buscar producto"}),o.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Escribe para filtrar",value:he,onChange:rt=>ne(rt.target.value),disabled:d})]}),o.jsxs("div",{className:"md:col-span-5",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:rt=>k(rt.target.value),disabled:d,children:[o.jsx("option",{value:"",children:"Selecciona"}),xe.map(rt=>{const Mt=Number(x[rt.id]??0),Yt=K.has(rt.id);return o.jsxs("option",{value:rt.id,children:[rt.category," - ",rt.name," ",Yt?"(ya agregado)":"",Mt>0?`  disp: ${Mt}`:"  disp: 0"]},rt.id)})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"* Solo aparecen productos con existencia (> 0). En edicin tambin aparecen los del pedido aunque hoy estn en 0."})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:H,onChange:rt=>R(rt.target.value),disabled:d})]})]}),o.jsx("div",{className:"flex justify-end mt-3",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:He,disabled:d||!Pe||Number(H||0)<=0,children:"Agregar al pedido"})})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"border rounded p-2 bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales asociados"}),o.jsx("div",{className:"text-lg font-bold",children:We.totalPackages})]}),o.jsxs("div",{className:"border rounded p-2 bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),o.jsx("div",{className:"text-lg font-bold",children:to(We.totalExpected)})]}),o.jsxs("div",{className:"border rounded p-2 bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),o.jsx("div",{className:"text-lg font-bold",children:to(We.grossProfit)})]}),o.jsxs("div",{className:"border rounded p-2 bg-white",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad vendedor"}),o.jsx("div",{className:"text-lg font-bold",children:to(We.vendorProfit)})]})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1050px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Costo"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"U. Bruta"}),o.jsx("th",{className:"p-2 border",children:"U. Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Precio/paquete"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:M.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"No hay productos en el pedido."})}):M.map(rt=>{Number((L==null?void 0:L.commissionPercent)||0);const Mt=Number(rt.totalVendor||0)-Number(rt.subtotal||0),Yt=Number(rt.gainVendor||0);return o.jsxs("tr",{className:"text-center",children:[o.jsxs("td",{className:"p-2 border text-left",children:[o.jsx("div",{className:"font-semibold",children:rt.productName}),o.jsxs("div",{className:"text-xs text-gray-600",children:["ID: ",rt.productId]})]}),o.jsx("td",{className:"p-2 border",children:rt.category}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",min:0,className:"w-24 border p-1 rounded text-center",value:rt.packages,onChange:ar=>yt(rt.id,ar.target.value),disabled:d})}),o.jsx("td",{className:"p-2 border",children:to(rt.subtotal)}),o.jsx("td",{className:"p-2 border",children:to(rt.totalVendor)}),o.jsx("td",{className:"p-2 border",children:to(Mt)}),o.jsx("td",{className:"p-2 border",children:to(Yt)}),o.jsx("td",{className:"p-2 border",children:to(rt.pricePerPackage)}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",onClick:()=>at(rt.id),disabled:d,children:"Quitar"})})]},rt.id)})})]})}),o.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{T(!1),qe()},children:"Cancelar"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",onClick:Vt,disabled:!M.length,children:"Imprimir"})]}),o.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",disabled:d||X||!L||!M.length,children:F?"Guardar cambios":"Guardar pedido"})]}),S&&o.jsx("div",{className:"text-sm mt-2",children:o.jsx("span",{className:"px-2 py-1 rounded bg-yellow-100 border border-yellow-200 inline-block",children:S})})]})]})}),S&&!P&&o.jsx("div",{className:"mb-3 text-sm",children:o.jsx("span",{className:"px-2 py-1 rounded bg-yellow-100 border border-yellow-200 inline-block",children:S})}),o.jsxs("div",{className:"bg-white rounded border overflow-hidden",children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),o.jsx("th",{className:"p-2 border text-left",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Existencias"}),o.jsx("th",{className:"p-2 border",children:"Costo"}),o.jsx("th",{className:"p-2 border",children:"Total esperado"}),o.jsx("th",{className:"p-2 border",children:"Traslados salida"}),o.jsx("th",{className:"p-2 border",children:"Traslados entrada"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:_?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):Ge.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-4 text-center",children:"No hay pedidos."})}):Ge.map(rt=>{const Mt=l,Yt=Number(rt.totalRemainingPackages||0);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:rt.date}),o.jsx("td",{className:"p-2 border text-left",children:rt.sellerName}),o.jsx("td",{className:"p-2 border",children:rt.totalPackages}),o.jsx("td",{className:"p-2 border font-semibold",children:Yt}),o.jsx("td",{className:"p-2 border",children:to(rt.subtotal)}),o.jsx("td",{className:"p-2 border font-semibold",children:to(rt.totalVendor)}),o.jsx("td",{className:"p-2 border",children:Number(rt.transferredOut||0)}),o.jsx("td",{className:"p-2 border",children:Number(rt.transferredIn||0)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",onClick:()=>ve(rt.orderKey),disabled:!Mt&&c,type:"button",title:Mt?"Editar":"Ver",children:Mt?"Editar":"Ver"}),l&&o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",onClick:()=>Qe(rt.orderKey),type:"button",disabled:_,children:"Eliminar"})]})})]},rt.orderKey)})})]})}),o.jsx("div",{className:"md:hidden",children:_?o.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):Ge.length===0?o.jsx("div",{className:"p-4 text-center text-sm",children:"No hay pedidos."}):o.jsx("div",{className:"divide-y",children:Ge.map(rt=>{const Mt=b===rt.orderKey,Yt=Number(rt.totalRemainingPackages||0);return o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Tipo:"," ",o.jsx("span",{className:"font-semibold",children:rt.sellerName})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Cdigo:"," ",o.jsx("span",{className:"font-mono font-semibold",children:rt.orderKey})]}),o.jsxs("div",{className:"text-sm font-bold",children:["Precio venta: ",to(rt.totalVendor)]})]}),o.jsx("button",{type:"button",className:"shrink-0 w-9 h-9 rounded bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-lg font-bold",onClick:()=>w(Mt?null:rt.orderKey),"aria-label":Mt?"Colapsar":"Expandir",children:Mt?"":"+"})]}),Mt&&o.jsxs("div",{className:"mt-3 border-t pt-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha"}),o.jsx("div",{className:"font-semibold",children:rt.date})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Existencias"}),o.jsx("div",{className:"font-semibold",children:Yt})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:rt.totalPackages})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Costo"}),o.jsx("div",{className:"font-semibold",children:to(rt.subtotal)})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Traslados salida"}),o.jsx("div",{className:"font-semibold",children:Number(rt.transferredOut||0)})]}),o.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Traslados entrada"}),o.jsx("div",{className:"font-semibold",children:Number(rt.transferredIn||0)})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",onClick:()=>ve(rt.orderKey),disabled:!l&&c,type:"button",children:l?"Editar":"Ver"}),l&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-60",onClick:()=>Qe(rt.orderKey),type:"button",disabled:_,children:"Eliminar"})]})]})]},rt.orderKey)})})}),o.jsx("div",{className:"p-3",children:o.jsx(qs,{})})]})]})}function lb(t){return isFinite(t)?Math.round(t):0}function Bn(t){const e=Number(t);return Number.isFinite(e)?Math.floor(e):0}function Dne(t){const e=Math.max(1,Bn(t.unitsPerPackage||1)),r=Bn(t.totalUnits||0),n=Bn(t.quantity||0),a=Bn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function iUe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):Dne(t)}function WH(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Bn(t.unitsPerPackage||1)),n=iUe(t);return Math.max(0,Math.floor(n/r))}function oUe(t){const e=Math.max(1,Bn(t.unitsPerPackage||1)),r=Dne(t);return Math.max(0,Math.floor(r/e))}function cb(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function md(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function mu(t){const e=md(t);return!Number.isFinite(e)||e<=0?0:e>1?e/100:e}function fd(t,e){const r={};Object.keys(t||{}).forEach(n=>r[cb(n)]=t[n]);for(const n of e){const a=r[cb(n)];if(a!=null&&String(a).trim()!=="")return a}}function wm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,i=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&i<1?n/(1-i):n,d=l-n,f=c-n,h=u-n,A=e>0?lb(l/e):0,m=e>0?lb(c/e):0,p=e>0?lb(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:h,unitPriceRivas:A,unitPriceSanJorge:m,unitPriceIsla:p}}function lUe(t){return Number(t.gainRivas||0)}function XH(t,e,r,n,a){const s=lUe(t),i=Math.min(Math.max(Number(e||0),0),1),l=Math.min(Math.max(Number(r||0),0),1),c=s*i,u=s*l,d=Number(t.subtotal||0),f=n>0&&a>0?n*d/a:0,h=u-f;return{...t,marginVendor:i,marginInvestor:l,grossProfit:s,vendorProfit:c,investorProfit:u,logisticAllocated:f,netProfit:h}}function cUe(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(""),[a,s]=v.useState(!0),[i,l]=v.useState(!1),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,A]=v.useState([]),[m,p]=v.useState({}),[g,x]=v.useState(!1),[y,b]=v.useState(null),[w,j]=v.useState(""),[I,_]=v.useState(""),[E,S]=v.useState("20"),[O,P]=v.useState("15"),[T,F]=v.useState("30"),[J,ge]=v.useState("0"),[le,de]=v.useState("30"),[Ae,se]=v.useState("70"),Ie=Z=>{const $e=Number(Z);return Number.isFinite($e)?Math.min(100,Math.max(0,$e)):0},Pe=Z=>{const $e=Ie(Z);de(String($e)),se(String(100-$e))},[k,H]=v.useState([]),[R,M]=v.useState(""),[G,X]=v.useState(""),[D,Q]=v.useState(""),[te,me]=v.useState("1"),[L,he]=v.useState("0"),[ne,z]=v.useState("DATOS"),[ce,K]=v.useState(""),oe=v.useMemo(()=>{const Z=new Set;for(const $e of c){const Le=String($e.category||"").trim();Le&&Z.add(Le)}return Array.from(Z).sort(($e,Le)=>$e.localeCompare(Le,"es"))},[c]);v.useEffect(()=>{!R&&oe.length>0&&M(oe[0])},[oe]);const xe=async()=>{f(!0);try{const Z=await Lt(er(ht(ke,"products_candies"),on("createdAt","desc"))),$e=[];Z.forEach(Le=>{const Ve=Le.data();$e.push({id:Le.id,name:String(Ve.name??"").trim(),category:String(Ve.category??"").trim()||"Caramelo",providerPrice:Number(Ve.providerPrice??0),unitsPerPackage:Number(Ve.unitsPerPackage??1)})}),u($e)}catch(Z){console.error(Z),n(" Error cargando catlogo de dulces.")}finally{f(!1)}};v.useEffect(()=>{xe()},[t]);const De=v.useMemo(()=>(R.trim().length>0?c.filter($e=>$e.category===R):c).sort(($e,Le)=>$e.name.localeCompare(Le.name,"es")),[c,R]);v.useEffect(()=>{if(!G){Q(""),me("1");return}const Z=c.find($e=>$e.id===G);Z&&(Q(String(Z.providerPrice??0)),me(String(Z.unitsPerPackage??1)))},[G,c]);const nt=()=>{b(null),j(""),_(""),H([]),M(oe[0]||""),X(""),Q(""),he("0"),me("1"),S("20"),P("15"),F("30"),ge("0"),de("30"),se("70"),z("DATOS"),K("")},Me=()=>{if(n(""),!G){n("Selecciona un producto del catlogo.");return}const Z=c.find(ae=>ae.id===G);if(!Z){n("Producto de catlogo no encontrado (refresca).");return}const $e=Number(Z.providerPrice||0),Le=Bn(L||0),Ve=Bn(Z.unitsPerPackage||0);if($e<0){n("El precio proveedor no puede ser negativo.");return}if(Le<=0){n("Los paquetes deben ser mayor que 0.");return}if(Ve<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const At=Number(E||0),pt=Number(O||0),Be=Number(T||0),gt=wm($e,Le,{marginR:At,marginSJ:pt,marginIsla:Be});if(k.find(ae=>ae.id===Z.id))H(ae=>ae.map(Se=>{if(Se.id!==Z.id)return Se;const _e=Bn(Se.packages||0)+Le,Ee=wm($e,_e,{marginR:Number(Se.marginRivas??At),marginSJ:Number(Se.marginSanJorge??pt),marginIsla:Number(Se.marginIsla??Be)}),ut=Bn(Se.remainingPackages??Se.packages)+Le;return{...Se,providerPrice:$e,unitsPerPackage:Ve,packages:_e,remainingPackages:ut,...Ee}}));else{const ae={id:Z.id,name:Z.name,category:Z.category,providerPrice:$e,packages:Le,unitsPerPackage:Ve,marginRivas:At,marginSanJorge:pt,marginIsla:Be,subtotal:gt.subtotal,totalRivas:gt.totalRivas,totalSanJorge:gt.totalSanJorge,totalIsla:gt.totalIsla,gainRivas:gt.gainRivas,gainSanJorge:gt.gainSanJorge,gainIsla:gt.gainIsla,unitPriceRivas:gt.unitPriceRivas,unitPriceSanJorge:gt.unitPriceSanJorge,unitPriceIsla:gt.unitPriceIsla,remainingPackages:Le};H(Se=>[...Se,ae])}X(""),he("0"),z("ITEMS")},Je=Z=>{H($e=>$e.filter(Le=>Le.id!==Z))},lt=(Z,$e,Le)=>{H(Ve=>Ve.map(At=>{if(At.id!==Z)return At;let pt={...At};if($e==="packages"&&(pt.packages=Bn(Le||0)),$e==="unitsPerPackage"&&(pt.unitsPerPackage=Bn(Le||0)),$e==="marginRivas"&&(pt.marginRivas=Number(Le||0)),$e==="marginIsla"&&(pt.marginIsla=Number(Le||0)),$e==="marginSanJorge"&&(pt.marginSanJorge=Number(Le||0)),$e==="packages"||$e==="marginRivas"||$e==="marginIsla"||$e==="marginSanJorge"){const Be=wm(pt.providerPrice,pt.packages,{marginR:Number(pt.marginRivas||0),marginSJ:Number(pt.marginSanJorge||0),marginIsla:Number(pt.marginIsla||0)});pt={...pt,...Be}}return(pt.remainingPackages===void 0||pt.remainingPackages===null)&&(pt.remainingPackages=pt.packages),pt}))},ft=v.useMemo(()=>{const Z=k.reduce((pt,Be)=>pt+Bn(Be.packages),0),$e=k.reduce((pt,Be)=>pt+Number(Be.subtotal||0),0),Le=k.reduce((pt,Be)=>pt+Number(Be.totalRivas||0),0),Ve=k.reduce((pt,Be)=>pt+Number(Be.totalSanJorge||0),0),At=k.reduce((pt,Be)=>pt+Number(Be.totalIsla||0),0);return{totalPackages:Z,subtotal:$e,totalRivas:Le,totalSanJorge:Ve,totalIsla:At}},[k]),Ge=v.useMemo(()=>{const Z=Math.max(0,md(J||0)),$e=Math.min(Math.max(mu(le||0),0),1),Le=Math.min(Math.max(mu(Ae||0),0),1),Ve=Number(ft.subtotal||0),At=k.map(Se=>XH(Se,$e,Le,Z,Ve)),pt=At.reduce((Se,_e)=>Se+Number(_e.grossProfit||0),0),Be=At.reduce((Se,_e)=>Se+Number(_e.vendorProfit||0),0),gt=At.reduce((Se,_e)=>Se+Number(_e.investorProfit||0),0),V=At.reduce((Se,_e)=>Se+Number(_e.logisticAllocated||0),0),ae=At.reduce((Se,_e)=>Se+Number(_e.netProfit||0),0);return{items:At,logisticsTotal:Z,vPct01:$e,iPct01:Le,grossTotal:pt,vendorTotal:Be,investorTotal:gt,logisticAllocatedTotal:V,netTotal:ae}},[k,J,le,Ae,ft.subtotal]),ye=v.useMemo(()=>{const Z=String(ce||"").trim().toLowerCase();return Z?Ge.items.filter($e=>{const Le=String($e.name||"").toLowerCase(),Ve=String($e.category||"").toLowerCase();return Le.includes(Z)||Ve.includes(Z)}):Ge.items},[Ge.items,ce]),We=v.useMemo(()=>({totalPackages:ft.totalPackages,subtotalCosto:ft.subtotal,esperadoRivas:ft.totalRivas,esperadoIsla:ft.totalIsla,gastosLogisticos:Ge.logisticsTotal,utilidadBrutaTotal:Ge.grossTotal,utilidadVendedorTotal:Ge.vendorTotal,utilidadNetaTotal:Ge.netTotal}),[ft,Ge]),qe=()=>{if(n(""),!c.length){n(" No hay catlogo cargado para generar plantilla.");return}const Z=Number(E||0),$e=Number(T||0),Le=Math.round(mu(le||0)*100),Ve=Math.round(mu(Ae||0)*100),At=c.slice().sort((Se,_e)=>Se.name.localeCompare(_e.name,"es")).map(Se=>({Producto:Se.name,Paquetes:"","Margen vendedor":Le,"Margen inversionista":Ve,"Margen rivas":Z,"Margen Isla":$e,"P. unidad Rivas":"","P. unidad Isla":""})),pt=[{Campo:"Gastos logisticos",Valor:md(J||0)},{Campo:"% utilidad vendedor",Valor:Le},{Campo:"% utilidad inversor",Valor:Ve}],Be=Es.book_new(),gt=Es.json_to_sheet(At),V=Es.json_to_sheet(pt);Es.book_append_sheet(Be,gt,"Productos"),Es.book_append_sheet(Be,V,"Config");const ae=I&&String(I).trim()||new Date().toISOString().slice(0,10);hk(Be,`plantilla_orden_maestra_${ae}.xlsx`)},je=()=>{if(n(""),!Ge.items.length){n(" No hay items para exportar.");return}const Z=Ge.items.slice().sort((pt,Be)=>pt.name.localeCompare(Be.name,"es")).map(pt=>({Categora:pt.category,Producto:pt.name,Paquetes:Bn(pt.packages),"Paquetes restantes":Bn(pt.remainingPackages??pt.packages),"Und x Paquete":Bn(pt.unitsPerPackage),"Precio proveedor":Number(pt.providerPrice||0),Facturado:Number(pt.subtotal||0),"Esperado Rivas":Number(pt.totalRivas||0),"Esperado Isla":Number(pt.totalIsla||0),"MV Rivas":Number(pt.marginRivas||0),"MV Isla":Number(pt.marginIsla||0),"Utilidad Bruta":Number(pt.grossProfit||0),"Utilidad Vendedor":Number(pt.vendorProfit||0),"Utilidad Inversor":Number(pt.investorProfit||0),"Utilidad Neta":Number(pt.netProfit||0),"Precio Rivas":Number(pt.unitPriceRivas||0),"Precio Isla":Number(pt.unitPriceIsla||0),"Prorrateo logistico":Number(pt.logisticAllocated||0)})),$e=[{KPI:"Paquetes totales",Valor:We.totalPackages},{KPI:"Subtotal costo",Valor:We.subtotalCosto},{KPI:"Esperado Rivas",Valor:We.esperadoRivas},{KPI:"Esperado Isla",Valor:We.esperadoIsla},{KPI:"Gastos logsticos",Valor:We.gastosLogisticos},{KPI:"Utilidad Bruta total",Valor:We.utilidadBrutaTotal},{KPI:"Utilidad Vendedor total",Valor:We.utilidadVendedorTotal},{KPI:"Utilidad Neta total",Valor:We.utilidadNetaTotal},{KPI:"% utilidad vendedor",Valor:Math.round(Ge.vPct01*100)},{KPI:"% utilidad inversor",Valor:Math.round(Ge.iPct01*100)}],Le=Es.book_new();Es.book_append_sheet(Le,Es.json_to_sheet(Z),"Productos"),Es.book_append_sheet(Le,Es.json_to_sheet($e),"Resumen");const Ve=I&&String(I).trim()||new Date().toISOString().slice(0,10),At=w&&String(w).trim()||`Orden_${Ve}`;hk(Le,`orden_maestra_${At.replace(/[^\w\-]+/g,"_")}_${Ve}.xlsx`)},pe=v.useRef(null),[He,at]=v.useState(!1),yt=()=>{var Z;if(!c.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(Z=pe.current)==null||Z.click()},bt=async Z=>{var Le;const $e=(Le=Z.target.files)==null?void 0:Le[0];if($e){Z.target.value="",at(!0),n("");try{const Ve=await $e.arrayBuffer(),At=f2(Ve,{type:"array"}),pt=At.SheetNames||[],Be=At.Sheets.Productos||At.Sheets.Plantilla||At.Sheets[pt[0]];if(!Be){n(" No se encontr hoja de Productos/Plantilla.");return}const gt=Es.sheet_to_json(Be,{defval:""});if(!gt.length){n(" El Excel viene vaco.");return}let V=0,ae=mu(le||0),Se=mu(Ae||0);const _e=At.Sheets.Config;if(_e){const ee=Es.sheet_to_json(_e,{defval:""}),W=new Map;for(const re of ee){const fe=cb(fd(re,["Campo","Key","Nombre"])??""),Ne=fd(re,["Valor","Value"]);fe&&W.set(fe,Ne)}W.has("gastos logisticos")&&(V=Math.max(0,md(W.get("gastos logisticos")))),W.has("% utilidad vendedor")&&(ae=mu(W.get("% utilidad vendedor"))),W.has("% utilidad inversor")&&(Se=mu(W.get("% utilidad inversor")))}else for(const ee of gt){const W=fd(ee,["Gastos","Gasto","Gastos logisticos","Logistica"]),re=md(W);if(re>0){V=re;break}}ge(String(V||0)),de(String(Math.round(ae*100))),se(String(Math.round(Se*100)));const Ee=new Map;for(const ee of c)Ee.set(cb(ee.name),ee);const ze=[],ut=new Map;for(let ee=0;ee<gt.length;ee++){const W=gt[ee],re=fd(W,["Producto","Product","Nombre","Name"]),fe=fd(W,["Paquetes","Packages"]),Ne=fd(W,["Margen vendedor","Utilidad vendedor","% vendedor"]),be=fd(W,["Margen inversionista","Utilidad inversor","% inversor"]),Xe=fd(W,["Margen rivas","Margen Rivas","MV Rivas"]),it=fd(W,["Margen Isla","Margen isla","MV Isla"]),xt=fd(W,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),_t=fd(W,["P. unidad Isla","P unidad Isla","Precio Isla"]),Et=cb(re);if(!Et)continue;const Gt=Ee.get(Et);if(!Gt){ze.push(`Fila ${ee+2}: Producto no existe en catlogo: "${String(re).trim()}".`);continue}const nr=Math.floor(md(fe));if(nr<=0){ze.push(`Fila ${ee+2}: "Paquetes" invlido para "${Gt.name}".`);continue}const ur=String(Ne??"").trim()!==""?mu(Ne):ae,rr=String(be??"").trim()!==""?mu(be):Se,cr=String(Xe??"").trim()!==""?md(Xe):Number(E||0),Ir=String(it??"").trim()!==""?md(it):Number(T||0),dn=Math.floor(md(xt)),qr=Math.floor(md(_t)),ln=ut.get(Gt.id);ln?ut.set(Gt.id,{packages:ln.packages+nr,mvVendor01:ur,mvInvestor01:rr,mR:cr,mI:Ir,puR:dn>0?dn:ln.puR,puI:qr>0?qr:ln.puI}):ut.set(Gt.id,{packages:nr,mvVendor01:ur,mvInvestor01:rr,mR:cr,mI:Ir,puR:dn>0?dn:void 0,puI:qr>0?qr:void 0})}const st=[];ut.forEach((ee,W)=>{const re=c.find(rr=>rr.id===W);if(!re)return;const fe=Number(re.providerPrice||0),Ne=Math.max(1,Bn(re.unitsPerPackage||1)),be=Math.max(1,Bn(ee.packages)),Xe=fe*be,it=Number(ee.puR||0),xt=Number(ee.puI||0),_t=it>0||xt>0;let Et=ee.mR,Gt=ee.mI;const nr=Number(O||0);let ur;if(_t){const rr=wm(fe,be,{marginR:Et,marginSJ:nr,marginIsla:Gt}),cr=it>0?it*be:rr.totalRivas,Ir=xt>0?xt*be:rr.totalIsla,dn=qr=>{if(!Number.isFinite(qr)||qr<=0)return 0;const ln=(1-Xe/qr)*100;return Math.min(Math.max(ln,0),99.9)};it>0&&(Et=dn(cr)),xt>0&&(Gt=dn(Ir)),ur={subtotal:Xe,totalRivas:cr,totalSanJorge:rr.totalSanJorge,totalIsla:Ir,gainRivas:cr-Xe,gainSanJorge:rr.gainSanJorge,gainIsla:Ir-Xe,unitPriceRivas:be>0?lb(cr/be):0,unitPriceSanJorge:rr.unitPriceSanJorge,unitPriceIsla:be>0?lb(Ir/be):0}}else ur=wm(fe,be,{marginR:Et,marginSJ:nr,marginIsla:Gt});st.push({id:re.id,name:re.name,category:re.category,providerPrice:fe,packages:be,unitsPerPackage:Ne,marginRivas:Et,marginSanJorge:nr,marginIsla:Gt,subtotal:ur.subtotal,totalRivas:ur.totalRivas,totalSanJorge:ur.totalSanJorge,totalIsla:ur.totalIsla,gainRivas:ur.gainRivas,gainSanJorge:ur.gainSanJorge,gainIsla:ur.gainIsla,unitPriceRivas:ur.unitPriceRivas,unitPriceSanJorge:ur.unitPriceSanJorge,unitPriceIsla:ur.unitPriceIsla,remainingPackages:be,marginVendor:ee.mvVendor01,marginInvestor:ee.mvInvestor01})}),H(ee=>{const W=new Map;ee.forEach(re=>W.set(re.id,re));for(const re of st){const fe=W.get(re.id);if(!fe)W.set(re.id,re);else{const Ne=Bn(fe.packages)+Bn(re.packages),be=wm(fe.providerPrice,Ne,{marginR:re.marginRivas,marginSJ:Number(fe.marginSanJorge||0),marginIsla:re.marginIsla});W.set(re.id,{...fe,packages:Ne,marginRivas:re.marginRivas,marginIsla:re.marginIsla,marginVendor:re.marginVendor??fe.marginVendor,marginInvestor:re.marginInvestor??fe.marginInvestor,remainingPackages:Bn(fe.remainingPackages??fe.packages)+Bn(re.packages),...be})}}return Array.from(W.values()).sort((re,fe)=>re.name.localeCompare(fe.name,"es"))}),z("ITEMS"),ze.length?(n(` Importado con detalles. Errores: ${ze.length}.`),console.warn("Errores import:",ze)):n(` Importacin lista: ${st.length} productos agregados.`)}catch(Ve){console.error(Ve),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{at(!1)}}};v.useEffect(()=>{(async()=>{s(!0);try{const Z=er(ht(ke,"candy_main_orders"),on("createdAt","desc")),$e=await Lt(Z),Le=[];$e.forEach(pt=>{const Be=pt.data();Le.push({id:pt.id,name:Be.name??"",date:Be.date??"",totalPackages:Number(Be.totalPackages??0),subtotal:Number(Be.subtotal??0),totalRivas:Number(Be.totalRivas??0),totalSanJorge:Number(Be.totalSanJorge??0),totalIsla:Number(Be.totalIsla??0),marginRivas:Number(Be.marginRivas??20),marginSanJorge:Number(Be.marginSanJorge??15),marginIsla:Number(Be.marginIsla??30),logisticsCost:Number(Be.logisticsCost??0),pctVendor:Number(Be.pctVendor??0),pctInvestor:Number(Be.pctInvestor??0),createdAt:Be.createdAt??dr.now()})}),A(Le);const Ve=await Lt(ht(ke,"inventory_candies")),At={};Ve.forEach(pt=>{const Be=pt.data(),gt=Be.orderId;if(!gt)return;const V=oUe(Be),ae=WH(Be);At[gt]||(At[gt]={orderId:gt,totalPackages:0,remainingPackages:0}),At[gt].totalPackages+=V,At[gt].remainingPackages+=ae}),p(At)}catch(Z){console.error(Z),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const kt=Z=>{var $e;return Z.date?Z.date:($e=Z.createdAt)!=null&&$e.toDate?Z.createdAt.toDate().toISOString().slice(0,10):""},Vt=async Z=>{if(Z.preventDefault(),n(""),l(!0),!k.length){n("Agrega al menos un producto a la orden.");return}try{const $e=new Date().toISOString().slice(0,10),Le=I||$e,Ve=Number(E||0),At=Number(O||0),pt=Number(T||0),Be=Math.max(0,md(J||0)),gt=Math.min(Math.max(mu(le||0),0),1),V=Math.min(Math.max(mu(Ae||0),0),1);for(const ee of k){if(!String(ee.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(ee.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${ee.name}).`);return}if(Bn(ee.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${ee.name}).`);return}if(Bn(ee.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${ee.name}).`);return}}const ae=Number(ft.subtotal||0),Se=k.map(ee=>XH(ee,gt,V,Be,ae)),_e={totalPackages:ft.totalPackages,subtotal:ft.subtotal,totalRivas:ft.totalRivas,totalSanJorge:ft.totalSanJorge,totalIsla:ft.totalIsla},Ee={name:w||`Pedido ${Le}`,date:Le,totalPackages:_e.totalPackages,subtotal:_e.subtotal,totalRivas:_e.totalRivas,totalSanJorge:_e.totalSanJorge,totalIsla:_e.totalIsla,marginRivas:Ve,marginSanJorge:At,marginIsla:pt,logisticsCost:Be,pctVendor:gt,pctInvestor:V,items:Se};if(y){await nn($t(ke,"candy_main_orders",y),{...Ee});for(const re of Se){const fe=await Lt(er(ht(ke,"inventory_candies"),ir("orderId","==",y),ir("productId","==",re.id))),Ne=Math.max(1,Bn(re.unitsPerPackage||1)),be=Bn(re.packages)*Ne;if(fe.empty)await _n(ht(ke,"inventory_candies"),{productId:re.id,productName:re.name,category:re.category,measurement:"unidad",quantity:be,remaining:be,packages:Bn(re.packages),remainingPackages:Bn(re.packages),unitsPerPackage:Ne,totalUnits:be,providerPrice:re.providerPrice,subtotal:re.subtotal,totalRivas:re.totalRivas,totalSanJorge:re.totalSanJorge,totalIsla:re.totalIsla,gainRivas:re.gainRivas,gainSanJorge:re.gainSanJorge,gainIsla:re.gainIsla,unitPriceRivas:re.unitPriceRivas,unitPriceSanJorge:re.unitPriceSanJorge,unitPriceIsla:re.unitPriceIsla,date:Le,createdAt:dr.now(),status:"PENDIENTE",orderId:y});else for(const Xe of fe.docs){const it=Xe.data(),xt=Bn(it.totalUnits??0),_t=Bn(it.remaining??xt),Et=be-xt,Gt=Math.max(0,_t+Et),nr=Math.max(0,Math.floor(Gt/Ne));await nn($t(ke,"inventory_candies",Xe.id),{productName:re.name,category:re.category,unitsPerPackage:Ne,totalUnits:be,quantity:be,remaining:Gt,packages:Bn(re.packages),remainingPackages:nr,providerPrice:re.providerPrice,subtotal:re.subtotal,totalRivas:re.totalRivas,totalSanJorge:re.totalSanJorge,totalIsla:re.totalIsla,gainRivas:re.gainRivas,gainSanJorge:re.gainSanJorge,gainIsla:re.gainIsla,unitPriceRivas:re.unitPriceRivas,unitPriceSanJorge:re.unitPriceSanJorge,unitPriceIsla:re.unitPriceIsla,date:Le})}}const ee=await Lt(er(ht(ke,"inventory_candies"),ir("orderId","==",y))),W=new Set(Se.map(re=>re.id));for(const re of ee.docs){const fe=re.data(),Ne=String(fe.productId||"");Ne&&!W.has(Ne)&&await Cn($t(ke,"inventory_candies",re.id))}A(re=>re.map(fe=>fe.id===y?{...fe,name:Ee.name,date:Ee.date,totalPackages:Ee.totalPackages,subtotal:Ee.subtotal,totalRivas:Ee.totalRivas,totalSanJorge:Ee.totalSanJorge,totalIsla:Ee.totalIsla,marginRivas:Ee.marginRivas,marginSanJorge:Ee.marginSanJorge,marginIsla:Ee.marginIsla,logisticsCost:Ee.logisticsCost,pctVendor:Ee.pctVendor,pctInvestor:Ee.pctInvestor}:fe)),n(" Orden maestra actualizada (pedido + inventario)."),nt(),x(!1),e();return}const ut=(await _n(ht(ke,"candy_main_orders"),{...Ee,createdAt:dr.now()})).id,st=eg(ke);for(const ee of Se){const W=Math.max(1,Bn(ee.unitsPerPackage||1)),re=Bn(ee.packages)*W,fe=$t(ht(ke,"inventory_candies"));st.set(fe,{productId:ee.id,productName:ee.name,category:ee.category,measurement:"unidad",quantity:re,remaining:re,packages:Bn(ee.packages),remainingPackages:Bn(ee.packages),unitsPerPackage:W,totalUnits:re,providerPrice:ee.providerPrice,subtotal:ee.subtotal,totalRivas:ee.totalRivas,totalSanJorge:ee.totalSanJorge,totalIsla:ee.totalIsla,gainRivas:ee.gainRivas,gainSanJorge:ee.gainSanJorge,gainIsla:ee.gainIsla,unitPriceRivas:ee.unitPriceRivas,unitPriceSanJorge:ee.unitPriceSanJorge,unitPriceIsla:ee.unitPriceIsla,date:Le,createdAt:dr.now(),status:"PENDIENTE",orderId:ut})}await st.commit(),n(" Orden maestra creada y registrada en inventario."),nt(),x(!1),e()}catch($e){console.error($e),n(" Error al guardar orden maestra.")}finally{l(!1)}},ve=async Z=>{try{s(!0),n(""),b(Z.id),j(Z.name),_(Z.date),S(String(Z.marginRivas??20)),P(String(Z.marginSanJorge??15)),F(String(Z.marginIsla??30));const $e=Number(Z.logisticsCost??0),Le=Number(Z.pctVendor??0),Ve=Number(Z.pctInvestor??0);ge(String($e||0)),de(String(Math.round((Le||0)*100))),se(String(Math.round((Ve||0)*100))),z("DATOS");const At=$t(ke,"candy_main_orders",Z.id),pt=await li(At);if(!pt.exists()){n(" No se encontr la orden.");return}const Be=pt.data(),gt=Array.isArray(Be.items)?Be.items:[],V=await Lt(er(ht(ke,"inventory_candies"),ir("orderId","==",Z.id))),ae={};V.forEach(_e=>{const Ee=_e.data(),ze=String(Ee.productId||"");if(!ze)return;const ut=WH(Ee);ae[ze]=(ae[ze]||0)+ut});const Se=gt.map(_e=>{const Ee=c.find(fe=>fe.id===_e.id),ze=Number((Ee==null?void 0:Ee.providerPrice)??_e.providerPrice??0),ut=Math.max(1,Bn((Ee==null?void 0:Ee.unitsPerPackage)??_e.unitsPerPackage??1)),st=Number(_e.marginRivas??0),ee=Number(_e.marginSanJorge??Number(O||0)),W=Number(_e.marginIsla??0),re=wm(ze,Bn(_e.packages||0),{marginR:st,marginSJ:ee,marginIsla:W});return{..._e,name:String((Ee==null?void 0:Ee.name)??_e.name??"").trim(),category:String((Ee==null?void 0:Ee.category)??_e.category??"Caramelo").trim(),providerPrice:ze,unitsPerPackage:ut,remainingPackages:ae[_e.id]??_e.remainingPackages??_e.packages??0,...re}});H(Se),x(!0)}catch($e){console.error($e),n(" Error al abrir orden maestra.")}finally{s(!1)}},Qe=async Z=>{if(confirm(`Eliminar la orden "${Z.name}" y todo su inventario asociado?`)){n("");try{const Le=await Lt(er(ht(ke,"inventory_candies"),ir("orderId","==",Z.id)));for(const Ve of Le.docs)await Cn($t(ke,"inventory_candies",Ve.id));await Cn($t(ke,"candy_main_orders",Z.id)),A(Ve=>Ve.filter(At=>At.id!==Z.id)),n(" Orden maestra eliminada."),e()}catch(Le){console.error(Le),n(" Error al eliminar orden maestra.")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[o.jsx("div",{className:"w-full",children:o.jsx(pc,{onClick:e,loading:a||d})}),o.jsxs("button",{className:"items-center gap-2 bg-indigo-600 text-white px-3 py-2 rounded-2xl hover:bg-indigo-700",onClick:()=>{nt(),x(!0)},children:[o.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]}),r&&o.jsx("p",{className:"mt-2 text-sm",children:r})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i&&o.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),o.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h3",{className:"text-lg md:text-xl font-bold",children:y?"Editar Orden Maestra":"Nueva Orden Maestra"}),o.jsx("div",{className:"ml-auto flex gap-2",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:i,onClick:()=>{nt(),x(!1)},children:"Cerrar"})})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:J,onChange:Z=>ge(Z.target.value),placeholder:"0",min:0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold",children:"% utilidad vendedor"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:le,onChange:Z=>Pe(Z.target.value),placeholder:"30",min:0,max:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold",children:"% utilidad inversor"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:Ae,readOnly:!0})]})]}),o.jsx("div",{className:"md:hidden mt-3",children:o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("button",{type:"button",onClick:()=>z("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),o.jsx("button",{type:"button",onClick:()=>z("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),o.jsxs("button",{type:"button",onClick:()=>z("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",k.length,")"]}),o.jsx("button",{type:"button",onClick:()=>z("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${ne==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),o.jsxs("form",{onSubmit:Vt,className:"space-y-4 pt-4",children:[o.jsx("input",{ref:pe,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:bt}),o.jsx("div",{className:`${ne==="DATOS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),o.jsx("input",{className:"w-full border p-2 rounded",value:w,onChange:Z=>j(Z.target.value),placeholder:"Ej: Pedido enero 19"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),o.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:I,onChange:Z=>_(Z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:E,onChange:Z=>S(Z.target.value)})]}),o.jsx("input",{type:"hidden",value:O,readOnly:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:T,onChange:Z=>F(Z.target.value)})]})]})}),o.jsx("div",{className:`${ne==="AGREGAR"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),o.jsx("select",{className:"w-full border p-2 rounded",value:R,onChange:Z=>{M(Z.target.value),X("")},disabled:d,children:oe.length===0?o.jsx("option",{value:"",children:d?"Cargando...":"No hay categoras en catlogo"}):oe.map(Z=>o.jsx("option",{value:Z,children:Z},Z))})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),o.jsxs("select",{className:"w-full border p-2 rounded",value:G,onChange:Z=>X(Z.target.value),children:[o.jsx("option",{value:"",children:d?"Cargando catlogo...":"Selecciona producto"}),De.map(Z=>o.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:D,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),o.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:L,onChange:Z=>he(Z.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:te,readOnly:!0})]})]}),o.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:o.jsx("button",{type:"button",onClick:Me,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),o.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:qe,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),o.jsx("button",{type:"button",onClick:yt,disabled:He,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:He?"Importando...":"Importar Excel"}),o.jsx("button",{type:"button",onClick:je,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),o.jsx("div",{className:`${ne==="ITEMS"?"block":"hidden"} md:block`,children:o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",o.jsx("span",{className:"font-semibold",children:k.length}),ce.trim()?o.jsxs(o.Fragment,{children:[" "," Mostrando"," ",o.jsx("span",{className:"font-semibold",children:ye.length})]}):null]}),o.jsx("input",{value:ce,onChange:Z=>K(Z.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),o.jsx("div",{className:"hidden md:block",children:o.jsx("div",{className:"overflow-x-auto border rounded",children:o.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-2",children:"Categora"}),o.jsx("th",{className:"text-left p-2",children:"Producto"}),o.jsx("th",{className:"text-right p-2",children:"Paquetes"}),o.jsx("th",{className:"text-right p-2",children:"Restantes"}),o.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),o.jsx("th",{className:"text-right p-2",children:"Precio prov"}),o.jsx("th",{className:"text-right p-2",children:"Facturado"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),o.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),o.jsx("th",{className:"text-right p-2",children:"MV Isla"}),o.jsx("th",{className:"text-right p-2",children:"U. Bruta"}),o.jsx("th",{className:"text-right p-2",children:"U. Vendedor"}),o.jsx("th",{className:"text-right p-2",children:"U. Inversor"}),o.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),o.jsx("th",{className:"text-right p-2",children:"U. Neta"}),o.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),o.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),o.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[ye.map(Z=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:Z.category}),o.jsx("td",{className:"p-2 font-semibold",children:Z.name}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Z.packages,onChange:$e=>lt(Z.id,"packages",$e.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("span",{className:"inline-block min-w-[60px] text-right",children:Bn(Z.remainingPackages??Z.packages)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Z.unitsPerPackage,onChange:$e=>lt(Z.id,"unitsPerPackage",$e.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.providerPrice||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(Z.marginRivas??0),onChange:$e=>lt(Z.id,"marginRivas",$e.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",className:"w-16 border rounded p-1 text-right",value:Number(Z.marginIsla??0),onChange:$e=>lt(Z.id,"marginIsla",$e.target.value)})}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.grossProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.vendorProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.investorProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.logisticAllocated||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right font-semibold",children:Number(Z.netProfit||0).toFixed(2)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.unitPriceRivas||0)}),o.jsx("td",{className:"p-2 text-right",children:Number(Z.unitPriceIsla||0)}),o.jsx("td",{className:"p-2 text-center",children:o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>Je(Z.id),children:"Quitar"})})]},Z.id)),ye.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:19,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})})}),o.jsx("div",{className:"md:hidden space-y-3",children:ye.length===0?o.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):ye.map(Z=>o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:Z.name}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:Z.category})]}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Je(Z.id),children:"Quitar"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Z.packages,onChange:$e=>lt(Z.id,"packages",$e.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Z.remainingPackages??Z.packages,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Z.unitsPerPackage,onChange:$e=>lt(Z.id,"unitsPerPackage",$e.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),o.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(Z.providerPrice||0).toFixed(2),readOnly:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Z.marginRivas??0,onChange:$e=>lt(Z.id,"marginRivas",$e.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),o.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Z.marginIsla??0,onChange:$e=>lt(Z.id,"marginIsla",$e.target.value)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),o.jsx("div",{className:"font-semibold",children:Number(Z.subtotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(Z.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(Z.totalIsla||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),o.jsx("div",{className:"font-semibold",children:Number(Z.logisticAllocated||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),o.jsx("div",{className:"font-semibold",children:Number(Z.grossProfit||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),o.jsx("div",{className:"font-semibold",children:Number(Z.vendorProfit||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Neta"}),o.jsx("div",{className:"font-semibold",children:Number(Z.netProfit||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),o.jsx("div",{className:"font-semibold",children:Z.unitPriceRivas})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),o.jsx("div",{className:"font-semibold",children:Z.unitPriceIsla})]})]})]},Z.id))})]})}),o.jsxs("div",{className:`${ne==="TOTALES"?"block":"hidden"} md:block`,children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"text-lg font-semibold",children:We.totalPackages})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(We.subtotalCosto||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),o.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(We.esperadoRivas||0).toFixed(2),o.jsx("br",{}),"Isla: ",Number(We.esperadoIsla||0).toFixed(2)]})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(We.gastosLogisticos||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3",children:[o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta total"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(We.utilidadBrutaTotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Vendedor total"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(We.utilidadVendedorTotal||0).toFixed(2)})]}),o.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta total"}),o.jsx("div",{className:"text-lg font-semibold",children:Number(We.utilidadNetaTotal||0).toFixed(2)})]})]}),o.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["% utilidad vendedor:"," ",o.jsxs("span",{className:"font-semibold",children:[Math.round(Ge.vPct01*100),"%"]})," "," % utilidad inversor:"," ",o.jsxs("span",{className:"font-semibold",children:[Math.round(Ge.iPct01*100),"%"]})]}),o.jsx("div",{className:"flex gap-2 justify-end",children:o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:je,disabled:!Ge.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})]})})]}),o.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{type:"button",onClick:nt,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),o.jsx("button",{type:"button",onClick:()=>{nt(),x(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),o.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:i||k.length===0,children:i?"Guardando...":"Guardar orden"})]}),o.jsx("div",{className:"md:hidden mt-2",children:o.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{z(ne==="DATOS"&&!y?"AGREGAR":ne==="DATOS"||ne==="AGREGAR"?"ITEMS":ne==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"md:hidden space-y-3",children:a?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):h.length===0?o.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):h.map(Z=>{const $e=m[Z.id],Le=kt(Z),Ve=Z.totalPackages>0?(Z.subtotal/Z.totalPackages).toFixed(2):"0.00",At=Number(Z.logisticsCost||0),pt=Number(Z.pctVendor||0),Be=Number(Z.pctInvestor||0),gt=Number(Z.totalRivas||0)-Number(Z.subtotal||0),V=gt*pt,ae=gt*Be,Se=ae-At;return o.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-500",children:Le}),o.jsx("div",{className:"font-semibold text-base leading-tight",children:Z.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>ve(Z),children:"Ver"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>Qe(Z),children:"Borrar"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-semibold",children:Z.totalPackages})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-semibold",children:$e?$e.remainingPackages:0})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),o.jsx("div",{className:"font-semibold",children:Ve})]}),o.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),o.jsx("div",{className:"font-semibold",children:Number(Z.subtotal||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),o.jsx("div",{className:"font-semibold",children:Number(Z.totalRivas||0).toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),o.jsx("div",{className:"font-semibold",children:Number(Z.totalIsla||0).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2 text-xs",children:[o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"Gastos log."}),o.jsx("div",{className:"font-semibold",children:At.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),o.jsx("div",{className:"font-semibold",children:gt.toFixed(2)})]}),o.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[o.jsx("div",{className:"text-gray-600",children:"U. Neta (est)"}),o.jsx("div",{className:"font-semibold",children:Se.toFixed(2)})]})]}),o.jsxs("div",{className:"mt-2 text-[11px] text-gray-500",children:["Split: V ",Math.round(pt*100),"% / I"," ",Math.round(Be*100),"%  V (est): ",V.toFixed(2)," "," I (est): ",ae.toFixed(2)]})]},Z.id)})}),o.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),o.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),o.jsx("th",{className:"p-2 border",children:"Gastos log."}),o.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),o.jsx("th",{className:"p-2 border",children:"U. Neta (est)"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin ordenes maestras."})}):h.map(Z=>{const $e=m[Z.id],Le=kt(Z),Ve=Z.totalPackages>0?(Z.subtotal/Z.totalPackages).toFixed(2):"0.00",At=Number(Z.logisticsCost||0),pt=Number(Z.pctInvestor||0),Be=Number(Z.totalRivas||0)-Number(Z.subtotal||0),V=Be*pt-At;return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:Le}),o.jsx("td",{className:"p-2 border text-left",children:Z.name}),o.jsx("td",{className:"p-2 border",children:Z.totalPackages}),o.jsx("td",{className:"p-2 border",children:$e?$e.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:Ve}),o.jsx("td",{className:"p-2 border",children:Number(Z.subtotal||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(Z.totalRivas||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Number(Z.totalIsla||0).toFixed(2)}),o.jsx("td",{className:"p-2 border",children:At.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Be.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:V.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>ve(Z),children:"Ver / Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Qe(Z),children:"Borrar"})]})})]},Z.id)})})]})})]})]})}const Lh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function uB(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,i=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+i/100),d=a*(1+l/100),f=a*(1+c/100),h=u-a,A=d-a,m=f-a,p=u/s,g=d/s,x=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(h.toFixed(2)),gainSanJorge:Number(A.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(g.toFixed(2)),unitPriceIsla:Number(x.toFixed(2))}}function YH(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function tc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function dB(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),i=Number(r);return Number.isFinite(i)&&s>0?i/s*100:Number(a||0)}function uUe(){var M,G,X;const[t,e]=v.useState([]),[r,n]=v.useState({}),[a,s]=v.useState(!0),[i,l]=v.useState(""),[c,u]=v.useState(Er(Vd(new Date),"yyyy-MM-dd")),[d,f]=v.useState(Er(Qd(new Date),"yyyy-MM-dd")),[h,A]=v.useState(!1),[m,p]=v.useState(!1),[g,x]=v.useState(null),[y,b]=v.useState([]),[w,j]=v.useState(0),[I,_]=v.useState(0),[E,S]=v.useState(0),[O,P]=v.useState(""),[T,F]=v.useState(""),[J,ge]=v.useState(0),[le,de]=v.useState(0),[Ae,se]=v.useState(1);v.useEffect(()=>{(async()=>{try{s(!0),l("");const D=er(ht(ke,"candy_main_orders"),on("createdAt","desc")),Q=await Lt(D),te=[];Q.forEach(he=>{const ne=he.data();te.push({id:he.id,name:ne.name??"",date:ne.date??"",totalPackages:Number(ne.totalPackages??0),subtotal:Number(ne.subtotal??0),totalRivas:Number(ne.totalRivas??0),totalSanJorge:Number(ne.totalSanJorge??0),totalIsla:Number(ne.totalIsla??0),marginRivas:Number(ne.marginRivas??0),marginSanJorge:Number(ne.marginSanJorge??0),marginIsla:Number(ne.marginIsla??0),createdAt:ne.createdAt??dr.now()})}),e(te);const me=await Lt(er(ht(ke,"inventory_candies"))),L={};me.forEach(he=>{const ne=he.data(),z=ne.orderId;if(!z)return;const ce=Number(ne.unitsPerPackage||1)||1,K=Number(ne.totalUnits??(ne.packages||0)*ce),oe=Math.round(K/ce),xe=Number(ne.remaining??ne.totalUnits??K),De=Number(ne.remainingPackages??NaN),nt=Number.isFinite(De)?Math.round(De):Math.round(xe/ce);L[z]||(L[z]={orderId:z,totalPackages:0,remainingPackages:0}),L[z].totalPackages+=oe,L[z].remainingPackages+=nt}),n(L)}catch(D){console.error(D),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Ie=v.useMemo(()=>t.filter(D=>{var te;const Q=D.date||((te=D.createdAt)!=null&&te.toDate?D.createdAt.toDate().toISOString().slice(0,10):"");return!(!Q||c&&Q<c||d&&Q>d)}),[t,c,d]),Pe=v.useMemo(()=>{let D=0,Q=0,te=0,me=0,L=0,he=0;for(const ne of Ie){D+=ne.totalPackages,Q+=ne.subtotal,te+=ne.totalRivas,me+=ne.totalSanJorge,L+=ne.totalIsla;const z=r[ne.id];z&&(he+=z.remainingPackages)}return{totalPaquetes:D,totalSubtotal:Q,totalRivas:te,totalSJ:me,totalIsla:L,totalPaquetesRestantes:he,totalPedidos:Ie.length}},[Ie,r]),k=async(D,Q,te)=>{if(!g)return;const me=Number(te||0),L=y.map(z=>z.id!==D?z:uB({...z,[Q]:me}));b(L);const he=L.find(z=>z.id===D);if(!he)return;const ne=YH(L);try{await nn($t(ke,"products_candies",D),{marginRivas:he.marginRivas,marginSanJorge:he.marginSanJorge,marginIsla:he.marginIsla,subtotal:he.subtotal,totalRivas:he.totalRivas,totalSanJorge:he.totalSanJorge,totalIsla:he.totalIsla,unitPriceRivas:he.unitPriceRivas,unitPriceSanJorge:he.unitPriceSanJorge,unitPriceIsla:he.unitPriceIsla,gainRivas:he.gainRivas,gainSanJorge:he.gainSanJorge,gainIsla:he.gainIsla}),await nn($t(ke,"candy_main_orders",g.id),{totalPackages:ne.totalPackages,subtotal:Number(ne.subtotal.toFixed(2)),totalRivas:Number(ne.totalRivas.toFixed(2)),totalSanJorge:Number(ne.totalSanJorge.toFixed(2)),totalIsla:Number(ne.totalIsla.toFixed(2))}),x(z=>z&&{...z,totalPackages:ne.totalPackages,subtotal:Number(ne.subtotal.toFixed(2)),totalRivas:Number(ne.totalRivas.toFixed(2)),totalSanJorge:Number(ne.totalSanJorge.toFixed(2)),totalIsla:Number(ne.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(z){console.error(z),l(" Error actualizando mrgenes del producto.")}},H=async()=>{if(g)try{l("");const D=Number.isFinite(w)&&w!==0?w:g.marginRivas||0,Q=Number.isFinite(I)&&I!==0?I:g.marginSanJorge||0,te=Number.isFinite(E)&&E!==0?E:g.marginIsla||0,me=uB({id:"tmp",name:O.trim(),category:T.trim(),providerPrice:Number(J||0),packages:Number(le||0),unitsPerPackage:Number(Ae||1),marginRivas:Number(D||0),marginSanJorge:Number(Q||0),marginIsla:Number(te||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(le||0)}),L=await _n(ht(ke,"products_candies"),{orderId:g.id,inventoryDate:g.date||"",name:me.name,category:me.category,providerPrice:me.providerPrice,packages:me.packages,unitsPerPackage:me.unitsPerPackage,marginRivas:me.marginRivas,marginSanJorge:me.marginSanJorge,marginIsla:me.marginIsla,gainRivas:me.gainRivas,gainSanJorge:me.gainSanJorge,gainIsla:me.gainIsla,subtotal:me.subtotal,totalRivas:me.totalRivas,totalSanJorge:me.totalSanJorge,totalIsla:me.totalIsla,unitPriceRivas:me.unitPriceRivas,unitPriceSanJorge:me.unitPriceSanJorge,unitPriceIsla:me.unitPriceIsla,createdAt:dr.now()}),ne=[{...me,id:L.id},...y];b(ne);const z=YH(ne);await nn($t(ke,"candy_main_orders",g.id),{totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),x(ce=>ce&&{...ce,totalPackages:z.totalPackages,subtotal:Number(z.subtotal.toFixed(2)),totalRivas:Number(z.totalRivas.toFixed(2)),totalSanJorge:Number(z.totalSanJorge.toFixed(2)),totalIsla:Number(z.totalIsla.toFixed(2))}),j(0),_(0),S(0),P(""),F(""),ge(0),de(0),se(1),l(" Producto agregado con mrgenes por sucursal.")}catch(D){console.error(D),l(" Error agregando producto al pedido.")}},R=async D=>{try{x(D),b([]),A(!0),p(!0),l("");const Q=await Lt(er(ht(ke,"inventory_candies"),ir("orderId","==",D.id))),te={};Q.forEach(he=>{const ne=he.data(),z=ne.productId;if(!z)return;const ce=Number(ne.unitsPerPackage||1)||1,K=Number(ne.remaining??ne.totalUnits??0),oe=Number(ne.remainingPackages??NaN),xe=Number.isFinite(oe)?Math.round(oe):Math.round(K/ce);te[z]=(te[z]||0)+xe});const me=await Lt(er(ht(ke,"products_candies"),ir("orderId","==",D.id))),L=[];me.forEach(he=>{const ne=he.data(),z=tc(ne.providerPrice,0),ce=tc(ne.packages,0),K=ne.subtotal??z*ce,oe=dB({margin:ne.marginRivas,gain:ne.gainRivas,subtotal:K,orderMargin:D.marginRivas||0}),xe=dB({margin:ne.marginSanJorge,gain:ne.gainSanJorge,subtotal:K,orderMargin:D.marginSanJorge||0}),De=dB({margin:ne.marginIsla,gain:ne.gainIsla,subtotal:K,orderMargin:D.marginIsla||0}),nt=uB({id:he.id,name:ne.name??"",category:ne.category??"",providerPrice:z,packages:ce,unitsPerPackage:tc(ne.unitsPerPackage,1),marginRivas:Number(oe||0),marginSanJorge:Number(xe||0),marginIsla:Number(De||0),subtotal:tc(ne.subtotal,0),totalRivas:tc(ne.totalRivas,0),totalSanJorge:tc(ne.totalSanJorge,0),totalIsla:tc(ne.totalIsla,0),gainRivas:tc(ne.gainRivas,0),gainSanJorge:tc(ne.gainSanJorge,0),gainIsla:tc(ne.gainIsla,0),unitPriceRivas:tc(ne.unitPriceRivas,0),unitPriceSanJorge:tc(ne.unitPriceSanJorge,0),unitPriceIsla:tc(ne.unitPriceIsla,0),remainingPackages:te[he.id]??tc(ne.packages,0)});L.push(nt)}),b(L)}catch(Q){console.error(Q),l(" Error cargando productos del pedido.")}finally{p(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),o.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",o.jsx("span",{className:"font-semibold",children:Pe.totalPedidos})]})]}),o.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Pe.totalPaquetes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Pe.totalPaquetesRestantes]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",Lh(Pe.totalSubtotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",Lh(Pe.totalRivas)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",Lh(Pe.totalSJ)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",Lh(Pe.totalIsla)]})]})}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:o.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Nombre"}),o.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:a?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Ie.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Ie.map(D=>{var ne;const Q=D.totalPackages>0?Math.round(D.totalRivas/D.totalPackages):0,te=D.totalPackages>0?Math.round(D.totalSanJorge/D.totalPackages):0,me=D.totalPackages>0?Math.round(D.totalIsla/D.totalPackages):0,L=D.date||((ne=D.createdAt)!=null&&ne.toDate?D.createdAt.toDate().toISOString().slice(0,10):""),he=r[D.id];return o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:L}),o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.totalPackages}),o.jsx("td",{className:"p-2 border",children:he?he.remainingPackages:0}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:Q}),o.jsx("td",{className:"p-2 border",children:te}),o.jsx("td",{className:"p-2 border",children:me}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>R(D),children:"Ver pedido"})})]},D.id)})})]})}),h&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",g.name]}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{A(!1),x(null),b([]),l("")},children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),o.jsx("div",{className:"font-semibold",children:g.date||((M=g.createdAt)!=null&&M.toDate?g.createdAt.toDate().toISOString().slice(0,10):"")})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),o.jsx("div",{className:"font-semibold",children:((G=r[g.id])==null?void 0:G.totalPackages)??g.totalPackages})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),o.jsx("div",{className:"font-semibold",children:((X=r[g.id])==null?void 0:X.remainingPackages)??0})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),o.jsx("div",{className:"font-semibold",children:Lh(g.subtotal)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),o.jsx("div",{className:"font-semibold",children:Lh(g.totalRivas)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),o.jsx("div",{className:"font-semibold",children:Lh(g.totalSanJorge)})]}),o.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-gray-600",children:"Total Isla"}),o.jsx("div",{className:"font-semibold",children:Lh(g.totalIsla)})]})]}),o.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[o.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),o.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:D=>j(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:D=>_(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:E,onChange:D=>S(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Producto"}),o.jsx("input",{className:"border rounded px-2 py-1 w-56",value:O,onChange:D=>P(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Categora"}),o.jsx("input",{className:"border rounded px-2 py-1 w-40",value:T,onChange:D=>F(D.target.value)})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:J,onChange:D=>ge(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Paquetes"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:le,onChange:D=>de(Number(D.target.value||0))})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:Ae,onChange:D=>se(Number(D.target.value||1))})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:H,children:"Agregar producto"})]})]}),o.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Categora"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),o.jsx("th",{className:"p-2 border",children:"Und x Paq"}),o.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),o.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),o.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),o.jsx("th",{className:"p-2 border",children:"Subtotal"}),o.jsx("th",{className:"p-2 border",children:"Total Rivas"}),o.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),o.jsx("th",{className:"p-2 border",children:"Total Isla"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),o.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),o.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),o.jsx("tbody",{children:m?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(D=>o.jsxs("tr",{className:"text-center whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:D.name}),o.jsx("td",{className:"p-2 border",children:D.category}),o.jsx("td",{className:"p-2 border",children:D.packages}),o.jsx("td",{className:"p-2 border",children:D.remainingPackages??D.packages}),o.jsx("td",{className:"p-2 border",children:D.unitsPerPackage}),o.jsx("td",{className:"p-2 border",children:D.providerPrice.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginRivas??0,onChange:Q=>k(D.id,"marginRivas",Q.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginSanJorge??0,onChange:Q=>k(D.id,"marginSanJorge",Q.target.value)})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:D.marginIsla??0,onChange:Q=>k(D.id,"marginIsla",Q.target.value)})}),o.jsx("td",{className:"p-2 border",children:D.subtotal.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalRivas.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalSanJorge.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.totalIsla.toFixed(2)}),o.jsx("td",{className:"p-2 border",children:D.unitPriceRivas}),o.jsx("td",{className:"p-2 border",children:D.unitPriceSanJorge}),o.jsx("td",{className:"p-2 border",children:D.unitPriceIsla})]},D.id))})]})}),i&&o.jsx("p",{className:"mt-3 text-sm",children:i})]})}),i&&!h&&o.jsx("p",{className:"mt-2 text-sm",children:i})]})}const ka=t=>Math.round((Number(t)||0)*100)/100,$g=t=>Math.round((Number(t)||0)*1e3)/1e3,Eo=t=>Number(t??0).toFixed(2),Nm=t=>Number(t??0).toFixed(3),dUe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Er(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const g=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),x=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*g-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(x||0)>0&&(y=ka(c*Number(x||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:g,amount:ka(x),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:i,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let h=0;return h=ka(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:i,vendorCommissionAmount:h,processedDate:u||""}]};function fUe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=v.useState([]),[i,l]=v.useState(null),[c,u]=v.useState(!0),[d,f]=v.useState(""),[h,A]=v.useState("ALL"),m=Er(new Date,"yyyy-MM-dd"),[p,g]=v.useState(m),[x,y]=v.useState(m),[b,w]=v.useState("ALL"),[j,I]=v.useState(null),[_,E]=v.useState(0),[S,O]=v.useState(0),[P,T]=v.useState(""),[F,J]=v.useState(0),[ge,le]=v.useState("0"),de=v.useRef(null),Ae=n&&n.length?n:t,se=!Ae||Jr(Ae,"admin"),Ie=Jr(Ae,"vendedor_dulces"),Pe=(e||"").trim().toLowerCase(),[k,H]=v.useState([]);v.useEffect(()=>{if(!p||!x)return;u(!0);const pe=er(ht(ke,"sales_candies"),ir("date",">=",p),ir("date","<=",x),on("date","asc")),He=Od(pe,at=>{const yt=[];at.forEach(bt=>{const kt=dUe(bt.data(),bt.id);yt.push(...kt)}),s(yt),u(!1)},at=>{console.error("Error cargando ventas por periodo:",at),s([]),u(!1)});return()=>He()},[p,x]),v.useEffect(()=>{(async()=>{const He=er(ht(ke,"daily_closures_candies"),ir("date","==",m)),at=await Lt(He);if(at.empty)l(null);else{const yt=at.docs[0];l({id:yt.id,...yt.data()})}})()},[m]),v.useEffect(()=>{(async()=>{try{const He=await Lt(ht(ke,"sellers_candies")),at=[];He.forEach(yt=>{const bt=yt.data();at.push({id:yt.id,name:bt.name||"",commissionPercent:Number(bt.commissionPercent||0)})}),H(at)}catch(He){console.error("Error cargando sellers_candies",He)}})()},[]);const R=pe=>ka(Number(pe.vendorCommissionAmount??0)||0),M=Lo.useMemo(()=>{let pe=[...a];return h==="FLOTANTE"&&(pe=pe.filter(He=>He.status==="FLOTANTE")),h==="PROCESADA"&&(pe=pe.filter(He=>He.status==="PROCESADA")),se&&b!=="ALL"&&(pe=pe.filter(He=>(He.vendorId||"")===b)),Ie&&(r?pe=pe.filter(He=>(He.vendorId||"")===r):Pe?pe=pe.filter(He=>(He.sellerEmail||"").toLowerCase()===Pe):pe=[]),pe},[h,a,se,b,Ie,r,Pe]),G=Lo.useMemo(()=>M.filter(pe=>pe.status==="FLOTANTE").length,[M]),X=Lo.useMemo(()=>M.filter(pe=>pe.status==="PROCESADA").length,[M]),D=Lo.useMemo(()=>M.filter(pe=>pe.type==="CREDITO").length,[M]),Q=Lo.useMemo(()=>M.filter(pe=>pe.type!=="CREDITO").length,[M]),te=$g(M.reduce((pe,He)=>pe+(He.quantity||0),0)),me=ka(M.reduce((pe,He)=>pe+Number(He.cogsAmount??0),0)),L=ka(M.reduce((pe,He)=>pe+(He.amount||0),0)),he=ka(L-me);let ne=0,z=0,ce=0,K=0,oe=0,xe=0,De=0;M.forEach(pe=>{const He=Number(pe.amount||0),at=Number(pe.amountReceived||0),yt=R(pe);oe+=yt,pe.type==="CREDITO"?(ne+=pe.quantity||0,ce+=He-at,De+=yt):(z+=pe.quantity||0,K+=He,xe+=yt)}),ce=ka(ce),K=ka(K),oe=ka(oe),xe=ka(xe),De=ka(De);const nt=Lo.useMemo(()=>{const pe={};for(const He of M){const at=(He.vendorId||"").trim();if(!at||He.type==="CREDITO")continue;const yt=R(He);if(!pe[at]){const bt=k.find(kt=>kt.id===at);pe[at]={vendorId:at,name:(bt==null?void 0:bt.name)||He.userEmail||"(sin vendedor)",total:0}}pe[at].total=ka(pe[at].total+yt)}return Object.values(pe).filter(He=>He.total>0).sort((He,at)=>at.total-He.total)},[M,k]),Me=Lo.useMemo(()=>{const pe={};for(const He of M){const at=(He.vendorId||"").trim();if(!at||He.type!=="CREDITO")continue;const yt=R(He);if(!pe[at]){const bt=k.find(kt=>kt.id===at);pe[at]={vendorId:at,name:(bt==null?void 0:bt.name)||He.userEmail||"(sin vendedor)",total:0}}pe[at].total=ka(pe[at].total+yt)}return Object.values(pe).filter(He=>He.total>0).sort((He,at)=>at.total-He.total)},[M,k]),Je={};M.forEach(pe=>{const He=pe.productName||"(sin nombre)";Je[He]||(Je[He]={totalQuantity:0,totalAmount:0,totalCommission:0}),Je[He].totalQuantity=$g(Je[He].totalQuantity+(pe.quantity||0)),Je[He].totalAmount=ka(Je[He].totalAmount+(pe.amount||0)),Je[He].totalCommission=ka(Je[He].totalCommission+R(pe))});const lt=Object.entries(Je).map(([pe,He])=>({productName:pe,totalQuantity:He.totalQuantity,totalAmount:He.totalAmount,totalCommission:He.totalCommission})),ft=async()=>{if(se)try{const pe=M.filter(Qe=>Qe.status==="FLOTANTE");if(pe.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const He={totalCharged:ka(pe.reduce((Qe,Z)=>Qe+(Z.amount||0),0)),totalSuggested:ka(pe.reduce((Qe,Z)=>Qe+(Z.amountSuggested||0),0)),totalUnits:$g(pe.reduce((Qe,Z)=>Qe+(Z.quantity||0),0)),totalCOGS:ka(pe.reduce((Qe,Z)=>Qe+Number(Z.cogsAmount??0),0))},at=ka(He.totalCharged-He.totalSuggested),yt=ka(He.totalCharged-He.totalCOGS),bt=pe.reduce((Qe,Z)=>{const $e=Number(Z.quantity||0),Le=Number(Z.amount||0),Ve=Number(Z.vendorCommissionAmount||0);return Z.type==="CREDITO"?(Qe.packsCredit+=$e,Qe.amountCredit+=Le,Qe.comCredit+=Ve):(Qe.packsCash+=$e,Qe.amountCash+=Le,Qe.comCash+=Ve),Qe},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),kt={totalPacksCash:$g(bt.packsCash),totalPacksCredit:$g(bt.packsCredit),totalAmountCash:ka(bt.amountCash),totalAmountCredit:ka(bt.amountCredit),totalCommissionCash:ka(bt.comCash),totalCommissionCredit:ka(bt.comCredit)},Vt=await _n(ht(ke,"daily_closures_candies"),{date:m,createdAt:dr.now(),periodStart:p,periodEnd:x,totalCharged:He.totalCharged,totalSuggested:He.totalSuggested,totalDifference:at,totalUnits:He.totalUnits,totalCOGS:He.totalCOGS,grossProfit:yt,...kt,products:pe.map(Qe=>({productName:Qe.productName,quantity:Qe.quantity,amount:Qe.amount})),sales:pe.map(Qe=>({id:Qe.id,productName:Qe.productName,quantity:Qe.quantity,amount:Qe.amount,amountSuggested:Qe.amountSuggested,userEmail:Qe.userEmail,clientName:Qe.clientName,amountReceived:Qe.amountReceived,change:Qe.change,status:Qe.status,cogsAmount:Qe.cogsAmount??0,avgUnitCost:Qe.avgUnitCost??null,allocations:Qe.allocations??[],date:Qe.date,type:Qe.type??"CONTADO",vendorId:Qe.vendorId??"",vendorCommissionAmount:Number(Qe.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(pe.reduce((Qe,Z)=>{const $e=Z.productName||"(sin nombre)";return Qe[$e]||(Qe[$e]={totalQuantity:0,totalAmount:0}),Qe[$e].totalQuantity=$g(Qe[$e].totalQuantity+(Z.quantity||0)),Qe[$e].totalAmount=ka(Qe[$e].totalAmount+(Z.amount||0)),Qe},{})).map(([Qe,Z])=>({productName:Qe,totalQuantity:Z.totalQuantity,totalAmount:Z.totalAmount}))}),ve=eg(ke);pe.forEach(Qe=>{ve.update($t(ke,"sales_candies",Qe.id.split("#")[0]),{status:"PROCESADA",closureId:Vt.id,closureDate:m,processedDate:m,processedAt:dr.now()})}),await ve.commit(),f(` Cierre guardado. Ventas procesadas: ${pe.length}. (Proceso: ${m})`)}catch(pe){console.error(pe),f(" Error al guardar el cierre de dulces.")}},Ge=async pe=>{if(se&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await nn($t(ke,"sales_candies",pe.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(He){console.error(He),f(" No se pudo revertir la venta.")}},ye=pe=>{se&&(I(pe),E(pe.quantity),O(pe.amount),T(pe.clientName),J(pe.amountReceived),le(pe.change))},We=async()=>{if(!(!j||!se))try{await nn($t(ke,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:S,amountCharged:S,clientName:P,amountReceived:F,change:ge}),I(null),f(" Venta de dulces actualizada.")}catch(pe){console.error(pe),f(" No se pudo actualizar la venta de dulces.")}},qe=async pe=>{if(se&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const{restored:He}=await kLe(pe.split("#")[0]);f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(He).toFixed(2)}.`)}catch(He){console.error(He),f(" No se pudo eliminar la venta de dulces.")}},je=async()=>{if(de.current){de.current.classList.add("force-pdf-colors"),de.current.classList.add("pdf-print-mode");try{const He=(await tg(de.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),at=new Fr;at.addImage(He,"PNG",10,10,190,0),at.save(`cierre_dulces_${p}_a_${x}_proc_${m}.pdf`)}finally{de.current.classList.remove("pdf-print-mode"),de.current.classList.remove("force-pdf-colors")}}};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),o.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Desde:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:pe=>g(pe.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Hasta:"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:x,onChange:pe=>y(pe.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Filtrar:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:h,onChange:pe=>A(pe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),se&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-sm",children:"Vendedor:"}),o.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:pe=>w(pe.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),k.map(pe=>o.jsx("option",{value:pe.id,children:pe.name||pe.id},pe.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),o.jsx("div",{className:"text-2xl font-bold",children:G}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),o.jsx("div",{className:"text-2xl font-bold",children:X}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:D}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsx("div",{className:"text-2xl font-bold",children:Q}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Eo(xe)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Eo(De)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",x]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),nt.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:nt.map(pe=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:pe.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Eo(pe.total)]})]},pe.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),Me.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Me.map(pe=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:pe.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Eo(pe.total)]})]},pe.vendorId))})]})]}),c?o.jsx("p",{children:"Cargando ventas..."}):o.jsxs("div",{ref:de,children:[o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Estado"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"}),o.jsx("th",{className:"border p-2",children:"Fecha proceso"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Acciones"})]})}),o.jsxs("tbody",{children:[M.map(pe=>{const He=R(pe),at=(pe.processedDate||"").trim();return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${pe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:pe.status})}),o.jsx("td",{className:"border p-1",children:pe.productName}),o.jsx("td",{className:"border p-1",children:pe.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:Nm(pe.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eo(pe.amount)]}),o.jsx("td",{className:"border p-1",children:He>0?`C$${Eo(He)}`:""}),o.jsx("td",{className:"border p-1",children:pe.date}),o.jsx("td",{className:"border p-1",children:at||""}),o.jsx("td",{className:"border p-1",children:pe.userEmail}),o.jsx("td",{className:"border p-1",children:pe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2 justify-center",children:se?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(pe),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>qe(pe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):pe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2 justify-center",children:se?o.jsx("button",{onClick:()=>Ge(pe.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("span",{className:"text-gray-400 text-xs",children:""})}):o.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},pe.id)}),M.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[M.map(pe=>{const He=R(pe),at=(pe.processedDate||"").trim();return o.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[o.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:pe.productName}),o.jsxs("div",{className:"text-xs text-gray-500",children:[pe.type==="CREDITO"?"Crdito":"Cash","  ",pe.date]})]}),o.jsxs("div",{className:"text-right shrink-0 ml-3",children:[o.jsxs("div",{className:"font-bold",children:["C$",Eo(pe.amount)]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${pe.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:pe.status})]})]}),o.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Paquetes"}),o.jsx("strong",{children:Nm(pe.quantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:He>0?`C$${Eo(He)}`:""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),o.jsx("strong",{children:at||""})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Vendedor"}),o.jsx("strong",{className:"text-right break-all",children:pe.userEmail})]}),o.jsx("div",{className:"pt-2",children:pe.status==="FLOTANTE"?o.jsx("div",{className:"flex gap-2",children:se?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye(pe),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),o.jsx("button",{onClick:()=>qe(pe.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):pe.status==="PROCESADA"?o.jsx("div",{className:"flex gap-2",children:se?o.jsx("button",{onClick:()=>Ge(pe.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):o.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},pe.id)}),M.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{children:["Total paquetes crdito: ",o.jsx("strong",{children:Nm(ne)})]}),o.jsxs("div",{children:["Total paquetes cash: ",o.jsx("strong",{children:Nm(z)})]}),o.jsxs("div",{children:["Total pendiente crdito:"," ",o.jsxs("strong",{children:["C$",Eo(ce)]})]}),o.jsxs("div",{children:["Total cobrado cash: ",o.jsxs("strong",{children:["C$",Eo(K)]})]}),o.jsxs("div",{children:["Total comisin: ",o.jsxs("strong",{children:["C$",Eo(oe)]})]})]}),(me>0||he!==L)&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[o.jsxs("div",{children:["Costo total (COGS): ",o.jsxs("strong",{children:["C$",Eo(me)]})]}),o.jsxs("div",{children:["Ganancia antes de gasto:"," ",o.jsxs("strong",{children:["C$",Eo(he)]})]}),o.jsxs("div",{children:["Total paquetes (visibles):"," ",o.jsx("strong",{children:Nm(te)})]})]}),o.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),o.jsx("div",{className:"pdf-desktop hidden md:block",children:o.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero"}),o.jsx("th",{className:"border p-2",children:"Comisin"})]})}),o.jsxs("tbody",{children:[lt.map(pe=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:pe.productName}),o.jsx("td",{className:"border p-1",children:Nm(pe.totalQuantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Eo(pe.totalAmount)]}),o.jsx("td",{className:"border p-1",children:pe.totalCommission>0?`C$${Eo(pe.totalCommission)}`:""})]},pe.productName)),lt.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),o.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[lt.map(pe=>o.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[o.jsx("div",{className:"font-semibold",children:pe.productName}),o.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),o.jsx("strong",{children:Nm(pe.totalQuantity)})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Total dinero"}),o.jsxs("strong",{children:["C$",Eo(pe.totalAmount)]})]}),o.jsxs("div",{className:"flex justify-between gap-3",children:[o.jsx("span",{className:"text-gray-600",children:"Comisin"}),o.jsx("strong",{children:pe.totalCommission>0?`C$${Eo(pe.totalCommission)}`:""})]})]})]},pe.productName)),lt.length===0&&o.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[se&&o.jsx("button",{onClick:ft,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),o.jsx("button",{onClick:je,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&o.jsx("p",{className:"mt-2 text-sm",children:d}),j&&se&&o.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[o.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),o.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),o.jsx("label",{className:"text-sm",children:"Paquetes"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:pe=>E(parseFloat(pe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Monto cobrado"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:pe=>O(parseFloat(pe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Cliente"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:P,onChange:pe=>T(pe.target.value)}),o.jsx("label",{className:"text-sm",children:"Paga con"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:pe=>J(parseFloat(pe.target.value||"0"))}),o.jsx("label",{className:"text-sm",children:"Vuelto"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:ge,onChange:pe=>le(pe.target.value)}),o.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[o.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),o.jsx("button",{onClick:We,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const eA=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Tc=t=>Math.round((Number(t)||0)*100)/100;function AUe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function hUe(t){return t.toISOString().slice(0,10)}function mUe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function pUe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return hUe(r)}function gUe(){const[t,e]=v.useState(mUe()),[r,n]=v.useState(pUe()),[a,s]=v.useState(!1),[i,l]=v.useState(""),[c,u]=v.useState({}),[d,f]=v.useState({}),[h,A]=v.useState([]),[m,p]=v.useState([]),[g,x]=v.useState({}),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(null),E=v.useMemo(()=>w&&h.find(le=>le.vendorId===w)||null,[w,h]),S=v.useMemo(()=>{var le;return!w||!I?[]:((le=g[w])==null?void 0:le[I])||[]},[w,I,g]),O=v.useMemo(()=>Tc(h.reduce((le,de)=>le+(de.totalSoldMoney||0),0)),[h]),P=v.useMemo(()=>Tc(h.reduce((le,de)=>le+(de.totalCreditMoney||0),0)),[h]);v.useEffect(()=>{(async()=>{try{const le=await Lt(ht(ke,"sellers_candies")),de={};le.forEach(Ie=>{const Pe=Ie.data(),k=Pe.branch||"Rivas";let H="RIVAS";k==="San Jorge"?H="SAN_JORGE":k==="Isla Ometepe"&&(H="ISLA"),de[Ie.id]={id:Ie.id,name:Pe.name??"(sin nombre)",branch:H,branchLabel:k,commissionPercent:Number(Pe.commissionPercent??0)}});const Ae=await Lt(ht(ke,"products_candies")),se={};Ae.forEach(Ie=>{const Pe=Ie.data();se[Ie.id]={id:Ie.id,name:Pe.name??"(sin nombre)"}}),u(de),f(se)}catch(le){console.error(le),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const T=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const le={},de={},Ae=er(ht(ke,"inventory_candies_sellers"),ir("date",">=",t),ir("date","<=",r)),se=await Lt(Ae),Ie={},Pe={},k={},H={};se.forEach(K=>{var $e,Le;const oe=K.data(),xe=oe.sellerId||"";if(!xe)return;const De=oe.productId||"",nt=oe.productName||(($e=d[De])==null?void 0:$e.name)||"(sin nombre)",Me=Math.max(1,Math.floor(Number(oe.unitsPerPackage||1))),Je=Number(oe.totalUnits??0),lt=Number(oe.packages??0),ft=Number(oe.remainingUnits??oe.remaining??0),Ge=Number(oe.remainingPackages??0),ye=lt>0?lt:Je>0?Math.floor(Je/Me):0,We=Ge>0?Ge:ft>0?Math.floor(ft/Me):0;Ie[xe]=(Ie[xe]||0)+ye,Pe[xe]=(Pe[xe]||0)+We;const qe=oe.orderId||oe.vendorOrderId||oe.orderNumber||oe.order||K.id;k[xe]||(k[xe]=new Set),k[xe].add(qe);const je=((Le=c[xe])==null?void 0:Le.name)||oe.sellerName||"(sin vendedor)",pe=String(oe.date||""),He=Number(oe.totalVendor??0),at=Number(oe.gainVendor??0),yt=lt>0?lt:Je>0?Math.floor(Je/Me):0,bt=yt>0?He/yt:0,kt=yt>0?at/yt:0,Vt=Tc(ye*bt),ve=Tc(ye*kt),Qe=Tc(We*bt),Z=Tc(We*kt);H[xe]||(H[xe]={ordered:[],remaining:[]}),ye>0&&H[xe].ordered.push({date:pe,vendorName:je,productName:nt,packages:ye,totalMoney:Vt,vendorCommission:ve}),We>0&&H[xe].remaining.push({date:pe,vendorName:je,productName:nt,packages:We,totalMoney:Qe,vendorCommission:Z})});const R={};Object.keys(k).forEach(K=>{R[K]=k[K].size});const M=er(ht(ke,"sales_candies"),ir("date",">=",t),ir("date","<=",r)),G=await Lt(M),X={},D={},Q={},te={},me={},L={};G.forEach(K=>{const oe=K.data(),xe=oe.date||"",De=oe.vendorId||oe.sellerId||"";if(!De)return;const nt=c[De],Me=oe.vendorName||(nt==null?void 0:nt.name)||"(sin vendedor)",Je=Number(oe.vendorCommissionPercent??(nt==null?void 0:nt.commissionPercent)??0)||0,lt=Array.isArray(oe.items)?oe.items:[];if(!lt.length)return;const ft=String(oe.type||"").toUpperCase()==="CREDITO";me[De]||(me[De]={sold:[],credit:[]}),lt.forEach(Ge=>{var Vt;const ye=Ge.productName||((Vt=d[Ge.productId||""])==null?void 0:Vt.name)||"(sin nombre)",We=Ge.packages??Ge.qty??Ge.quantity??0,qe=Number(We||0);if(qe<=0)return;const je=Number(Ge.unitPricePackage??Ge.unitPrice??0)||0,pe=Math.max(0,Number(Ge.discount||0)),He=qe*je,at=Tc(Math.max(0,He-pe));if(at<=0)return;console.log("DBG",{isCredit:ft,vendorId:De,commissionPercent:Je,lineFinal:at,storedItemCommission:Number(Ge.vendorCommissionAmount??0)});let yt=0;const bt=Number(Ge.vendorCommissionAmount??0);bt?yt=Tc(bt):Je>0&&(yt=Tc(at*Je/100)),ft?(D[De]=(D[De]||0)+qe,te[De]=(te[De]||0)+at):(X[De]=(X[De]||0)+qe,Q[De]=(Q[De]||0)+at),ft?de[De]=(de[De]||0)+yt:le[De]=(le[De]||0)+yt,ft?me[De].credit.push({date:xe,vendorName:Me,productName:ye,packages:qe,totalMoney:at,vendorCommission:0}):me[De].sold.push({date:xe,vendorName:Me,productName:ye,packages:qe,totalMoney:at,vendorCommission:yt});const kt=ye;L[kt]||(L[kt]={productName:ye,packages:0,totalMoney:0}),L[kt].packages+=qe,L[kt].totalMoney+=at})});const he=new Set([...Object.keys(Ie),...Object.keys(Pe),...Object.keys(X),...Object.keys(D)]),ne=[],z={};he.forEach(K=>{var We,qe,je,pe;const oe=c[K],xe=(oe==null?void 0:oe.name)||"(sin vendedor)",De=oe?oe.branchLabel||AUe(oe.branch):"",nt=Ie[K]||0,Me=Pe[K]||0,Je=X[K]||0,lt=D[K]||0,ft=Tc(Q[K]||0),Ge=Tc(te[K]||0),ye=R[K]||0;ne.push({vendorId:K,vendorName:xe,branchLabel:De,orderedPackages:nt,remainingPackages:Me,soldPackages:Je,creditPackages:lt,totalSoldMoney:ft,totalCreditMoney:Ge,ordersCreated:ye,commissionCash:Tc(le[K]||0),commissionCredit:0}),z[K]={ordered:(((We=H[K])==null?void 0:We.ordered)||[]).sort((He,at)=>He.date.localeCompare(at.date)),remaining:(((qe=H[K])==null?void 0:qe.remaining)||[]).sort((He,at)=>He.date.localeCompare(at.date)),sold:(((je=me[K])==null?void 0:je.sold)||[]).sort((He,at)=>He.date.localeCompare(at.date)),credit:(((pe=me[K])==null?void 0:pe.credit)||[]).sort((He,at)=>He.date.localeCompare(at.date))}}),ne.sort((K,oe)=>K.vendorName.localeCompare(oe.vendorName,"es")),A(ne),x(z);const ce=Object.values(L).map(K=>({productName:K.productName,packages:K.packages,totalMoney:Tc(K.totalMoney)})).sort((K,oe)=>oe.packages-K.packages).slice(0,10);p(ce),ne.length||l("Sin datos para el rango seleccionado.")}catch(le){console.error(le),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};v.useEffect(()=>{Object.keys(c).length&&T()},[c]);const F=(le,de)=>{j(le),_(de),b(!0)},J=()=>{b(!1),j(null),_(null)},ge=()=>{if(!h.length){l("No hay datos para exportar.");return}const le=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],de=h.map(k=>[k.vendorName,k.branchLabel,k.orderedPackages.toString(),k.remainingPackages.toString(),k.soldPackages.toString(),k.creditPackages.toString(),k.totalSoldMoney.toFixed(2),k.commissionCash.toFixed(2),k.totalCreditMoney.toFixed(2),k.commissionCredit.toFixed(2),k.ordersCreated.toString()]),Ae=[le,...de].map(k=>k.map(H=>`"${String(H).replace(/"/g,'""')}"`).join(",")).join(`
`),se=new Blob([Ae],{type:"text/csv;charset=utf-8;"}),Ie=URL.createObjectURL(se),Pe=document.createElement("a");Pe.href=Ie,Pe.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Pe.click(),URL.revokeObjectURL(Ie)};return o.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:le=>e(le.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:le=>n(le.target.value)})]}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:T,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),o.jsx("div",{className:"flex items-end",children:o.jsx("button",{type:"button",onClick:ge,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:eA(O)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),o.jsx("div",{className:"text-xl font-semibold",children:eA(P)})]}),o.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),o.jsx("div",{className:"text-xl font-semibold",children:h.length})]})]}),o.jsx("div",{className:"overflow-x-auto mb-6",children:o.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),o.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),o.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),o.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),o.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),o.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),o.jsxs("tbody",{children:[h.map(le=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:le.vendorName}),o.jsx("td",{className:"border p-1",children:le.branchLabel}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(le.vendorId,"ordered"),children:le.orderedPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(le.vendorId,"remaining"),children:le.remainingPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(le.vendorId,"sold"),children:le.soldPackages})}),o.jsx("td",{className:"border p-1",children:o.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>F(le.vendorId,"credit"),children:le.creditPackages})}),o.jsx("td",{className:"border p-1",children:eA(le.totalSoldMoney)}),o.jsx("td",{className:"border p-1",children:eA(le.commissionCash)}),o.jsx("td",{className:"border p-1",children:eA(le.totalCreditMoney)}),o.jsx("td",{className:"border p-1",children:eA(le.commissionCredit)}),o.jsx("td",{className:"border p-1",children:le.ordersCreated})]},le.vendorId)),h.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"#"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),o.jsxs("tbody",{children:[m.map((le,de)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:de+1}),o.jsx("td",{className:"border p-1",children:le.productName}),o.jsx("td",{className:"border p-1",children:le.packages}),o.jsx("td",{className:"border p-1",children:eA(le.totalMoney)})]},le.productName)),m.length===0&&!a&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),i&&o.jsx("p",{className:"mt-2 text-sm text-gray-700",children:i}),y&&I&&w&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[E==null?void 0:E.vendorName,"  ",E==null?void 0:E.branchLabel]})]}),o.jsx("button",{onClick:J,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("table",{className:"min-w-full border text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),o.jsxs("tbody",{children:[S.map((le,de)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:le.date}),o.jsx("td",{className:"border p-1",children:le.productName}),o.jsx("td",{className:"border p-1",children:le.packages}),o.jsx("td",{className:"border p-1",children:eA(le.totalMoney)}),o.jsx("td",{className:"border p-1",children:le.vendorName}),o.jsx("td",{className:"border p-1",children:eA(le.vendorCommission)})]},de)),S.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const sl=t=>`C$${Number(t||0).toFixed(2)}`,kC=t=>Number(t||0).toFixed(3),fB=()=>{const t=new Date;return Er(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},FC=()=>Er(new Date,"yyyy-MM-dd");function xUe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=v.useState([]),i=v.useMemo(()=>{const ve={};return a.forEach(Qe=>{Qe.email&&(ve[Qe.email.trim().toLowerCase()]=Qe)}),ve},[a]);v.useEffect(()=>{(async()=>{try{const ve=er(ht(ke,"sellers_candies"),on("name","asc")),Qe=await Lt(ve),Z=[];Qe.forEach($e=>{const Le=$e.data();Z.push({id:$e.id,name:Le.name||"",email:Le.email||"",commissionPercent:Number(Le.commissionPercent||0)})}),s(Z)}catch(ve){console.error(ve)}})()},[]);const[l,c]=v.useState(fB()),[u,d]=v.useState(FC()),[f,h]=v.useState(""),[A,m]=v.useState(""),p=v.useMemo(()=>{const ve=new Map;return n.forEach(Qe=>{const Z=Qe.productId||Qe.productName;ve.set(Z,{key:Z,name:Qe.productName})}),Array.from(ve.values()).sort((Qe,Z)=>Qe.name.localeCompare(Z.name))},[n]),g=v.useMemo(()=>{const ve=new Map;return n.forEach(Qe=>{const Z=(Qe.sellerEmail||"").trim().toLowerCase();if(!Z)return;const $e=i[Z],Le=($e==null?void 0:$e.name)||Qe.vendorName||Z;ve.set(Z,{email:Z,label:Le})}),Array.from(ve.values()).sort((Qe,Z)=>Qe.label.localeCompare(Z.label))},[n,i]),x=v.useMemo(()=>n.filter(ve=>!(l&&ve.date<l||u&&ve.date>u||f&&(ve.productId||ve.productName)!==f||A&&(ve.sellerEmail||"").trim().toLowerCase()!==A)),[n,l,u,f,A]),[y,b]=v.useState(FC()),[w,j]=v.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=v.useState(""),[E,S]=v.useState("0"),[O,P]=v.useState(()=>x.map(ve=>ve.id));v.useEffect(()=>{P(ve=>ve.filter(Qe=>x.some(Z=>Z.id===Qe)))},[x]);const[T,F]=v.useState([]),[J,ge]=v.useState([]),[le,de]=v.useState(!1),[Ae,se]=v.useState(fB()),[Ie,Pe]=v.useState(FC());v.useEffect(()=>{(async()=>{try{de(!0);const ve=er(ht(ke,"expensesCandies"),on("date","desc")),Qe=await Lt(ve),Z=[];Qe.forEach($e=>{const Le=$e.data();Z.push({id:$e.id,date:Le.date,description:Le.description,amount:Number(Le.amount||0)})}),F(Z)}catch(ve){console.error(ve)}finally{de(!1)}})()},[]);const k=v.useMemo(()=>T.filter(ve=>!(!ve.date||Ae&&ve.date<Ae||Ie&&ve.date>Ie)),[T,Ae,Ie]),[H,R]=v.useState([]),[M,G]=v.useState(!1),[X,D]=v.useState(""),[Q,te]=v.useState("DEBITO"),[me,L]=v.useState(""),he=()=>{const ve=Number(me);!X.trim()||!isFinite(ve)||ve<=0||(R(Qe=>[...Qe,{id:`${Date.now()}_${Qe.length+1}`,description:X.trim(),type:Q,amount:Number(ve.toFixed(2))}]),D(""),L(""))},[ne,z]=v.useState(null),[ce,K]=v.useState(""),[oe,xe]=v.useState("DEBITO"),[De,nt]=v.useState(""),Me=ve=>{z(ve.id),K(ve.description),xe(ve.type),nt(ve.amount.toFixed(2))},Je=()=>{z(null),K(""),xe("DEBITO"),nt("")},lt=()=>{if(!ne)return;const ve=Number(De);!isFinite(ve)||ve<=0||(R(Qe=>Qe.map(Z=>Z.id===ne?{...Z,description:ce.trim(),type:oe,amount:Number(ve.toFixed(2))}:Z)),Je())},ft=ve=>{R(Qe=>Qe.filter(Z=>Z.id!==ve)),ne===ve&&Je()},Ge=(ve,Qe)=>{P(Z=>Qe?[...new Set([...Z,ve])]:Z.filter($e=>$e!==ve))},ye=ve=>{P(ve?x.map(Qe=>Qe.id):[])},We=(ve,Qe)=>{ge(Z=>Qe?[...new Set([...Z,ve])]:Z.filter($e=>$e!==ve))},qe=v.useMemo(()=>x.filter(ve=>O.includes(ve.id)),[x,O]),je=v.useMemo(()=>H.filter(ve=>ve.type==="DEBITO").reduce((ve,Qe)=>ve+Qe.amount,0),[H]),pe=v.useMemo(()=>H.filter(ve=>ve.type==="CREDITO").reduce((ve,Qe)=>ve+Qe.amount,0),[H]),He=v.useMemo(()=>{let ve=0,Qe=0,Z=0,$e=0;for(const gt of qe){const V=Number(gt.packages||0),ae=Number(gt.cogsAmount||0),Se=Number(gt.amount||0);ve+=V,Qe+=ae,Z+=Se;const _e=(gt.sellerEmail||"").trim().toLowerCase(),Ee=i[_e],ze=Number((Ee==null?void 0:Ee.commissionPercent)||0),ut=Se*ze/100;$e+=ut}const Le=k.filter(gt=>J.includes(gt.id)).reduce((gt,V)=>gt+Number(V.amount||0),0),Ve=Z-Qe,At=Z-Le-je+pe-$e,pt=Number(E||0),Be=Z*pt/100;return{totalPackages:Number(kC(ve)),totalProvider:Number(Qe.toFixed(2)),totalSale:Number(Z.toFixed(2)),totalGastos:Number(Le.toFixed(2)),debits:Number(je.toFixed(2)),credits:Number(pe.toFixed(2)),grossProfit:Number(Ve.toFixed(2)),finalAmount:Number(At.toFixed(2)),totalCommissionVendors:Number($e.toFixed(2)),branchProfit:Number(Be.toFixed(2)),branchFactor:pt}},[qe,k,J,je,pe,i,E]),[at,yt]=v.useState(!1),[bt,kt]=v.useState(""),Vt=async()=>{if(kt(""),qe.length===0){kt("Selecciona al menos 1 transaccin procesada.");return}try{yt(!0);const ve={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:dr.now(),totalPackages:He.totalPackages,totalProvider:He.totalProvider,totalSale:He.totalSale,totalExpenses:He.totalGastos,totalDebits:He.debits,totalCredits:He.credits,grossProfit:He.grossProfit,totalCommissionVendors:He.totalCommissionVendors,branchFactorPercent:He.branchFactor,branchProfit:He.branchProfit,finalAmount:He.finalAmount,transactions:qe.map(Qe=>{const Z=Number(Qe.packages||0)||1,$e=Number(Qe.cogsAmount||0),Le=Number(Qe.amount||0),Ve=$e/Z,At=Le/Z,pt=(Qe.sellerEmail||"").trim().toLowerCase(),Be=i[pt],gt=Number((Be==null?void 0:Be.commissionPercent)||0),V=Le*gt/100;return{id:Qe.id,date:Qe.date,productId:Qe.productId||null,productName:Qe.productName,vendorName:Qe.vendorName,sellerEmail:Qe.sellerEmail||null,packages:Number(kC(Qe.packages)),providerPricePack:Number(Ve.toFixed(4)),salePricePack:Number(At.toFixed(4)),totalProvider:Number($e.toFixed(2)),totalSale:Number(Le.toFixed(2)),commissionPercent:gt,commissionAmount:Number(V.toFixed(2))}}),expenses:k.filter(Qe=>J.includes(Qe.id)).map(Qe=>({id:Qe.id,date:Qe.date||null,description:Qe.description||"",amount:Number(Number(Qe.amount||0).toFixed(2))})),adjustments:H.map(Qe=>({id:Qe.id,description:Qe.description,type:Qe.type,amount:Number(Qe.amount.toFixed(2))}))};await _n(ht(ke,"invoicesCandies"),ve),kt(" Factura de dulces creada."),r()}catch(ve){console.error(ve),kt(` Error al crear factura: ${(ve==null?void 0:ve.message)||"desconocido"}`)}finally{yt(!1)}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[o.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),o.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),o.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:ve=>b(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:ve=>j(ve.target.value),placeholder:"FAC-CANDY-001"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:ve=>S(ve.target.value),placeholder:"Ej: 30"}),o.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),o.jsxs("div",{className:"md:col-span-1",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:ve=>_(ve.target.value),placeholder:"Comentarios de la factura"})]})]}),o.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:o.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:ve=>c(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ve=>d(ve.target.value)})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:ve=>h(ve.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),p.map(ve=>o.jsx("option",{value:ve.key,children:ve.name},ve.key))]})]}),o.jsxs("div",{className:"min-w-[180px]",children:[o.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:A,onChange:ve=>m(ve.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),g.map(ve=>o.jsx("option",{value:ve.email,children:ve.label},ve.email))]})]}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(fB()),d(FC()),h(""),m("")},children:"Quitar filtro"})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),o.jsxs("label",{className:"text-sm flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:x.length>0&&O.length===x.length,onChange:ve=>ye(ve.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),x.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):o.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Vendedor"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Paquetes"}),o.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border",children:"Precio venta"}),o.jsx("th",{className:"p-2 border",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border",children:"Total venta"}),o.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),o.jsx("tbody",{children:x.map(ve=>{const Qe=O.includes(ve.id),Z=Number(ve.packages||0)||1,$e=Number(ve.cogsAmount||0),Le=Number(ve.amount||0),Ve=$e/Z,At=Le/Z,pt=(ve.sellerEmail||"").trim().toLowerCase(),Be=i[pt],gt=Number((Be==null?void 0:Be.commissionPercent)||0),V=Le*gt/100;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:Qe,onChange:ae=>Ge(ve.id,ae.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ve.date}),o.jsx("td",{className:"p-2 border",children:(Be==null?void 0:Be.name)||ve.vendorName}),o.jsx("td",{className:"p-2 border",children:ve.productName}),o.jsx("td",{className:"p-2 border",children:kC(ve.packages)}),o.jsx("td",{className:"p-2 border",children:sl(Ve)}),o.jsx("td",{className:"p-2 border",children:sl(At)}),o.jsx("td",{className:"p-2 border",children:sl($e)}),o.jsx("td",{className:"p-2 border",children:sl(Le)}),o.jsx("td",{className:"p-2 border",children:gt>0?`${sl(V)} (${gt.toFixed(2)}%)`:""})]},ve.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),le&&o.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),o.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Ae,onChange:ve=>se(ve.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Ie,onChange:ve=>Pe(ve.target.value)})]})]})]}),k.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):o.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Sel"}),o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Monto"})]})}),o.jsx("tbody",{children:k.map(ve=>{const Qe=J.includes(ve.id);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{type:"checkbox",checked:Qe,onChange:Z=>We(ve.id,Z.target.checked)})}),o.jsx("td",{className:"p-2 border",children:ve.date||""}),o.jsx("td",{className:"p-2 border",children:ve.description||""}),o.jsx("td",{className:"p-2 border",children:sl(Number(ve.amount||0))})]},ve.id)})})]})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),o.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>G(!0),children:"Crear Cargo"})]}),H.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):o.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Descripcin"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Monto"}),o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:H.map(ve=>{const Qe=ne===ve.id;return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:Qe?o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:ce,onChange:Z=>K(Z.target.value)}):o.jsx("span",{title:ve.description,children:ve.description.length>60?`${ve.description.slice(0,60)}`:ve.description})}),o.jsx("td",{className:"p-2 border",children:Qe?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:oe,onChange:Z=>xe(Z.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]}):o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ve.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:ve.type})}),o.jsx("td",{className:"p-2 border",children:Qe?o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:De,onChange:Z=>nt(Z.target.value)}):sl(ve.amount)}),o.jsx("td",{className:"p-2 border",children:Qe?o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:lt,children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:Je,children:"Cancelar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ft(ve.id),children:"Eliminar"})]}):o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>Me(ve),children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ft(ve.id),children:"Eliminar"})]})})]},ve.id)})})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[o.jsx("div",{className:"space-y-1",children:o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:kC(He.totalPackages)})]})}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Total proveedor (costo):"," ",o.jsx("strong",{children:sl(He.totalProvider)})]}),o.jsxs("div",{children:["Total venta: ",o.jsx("strong",{children:sl(He.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",o.jsx("strong",{children:sl(He.grossProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:sl(He.totalGastos)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:sl(He.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:sl(He.credits)})]}),o.jsxs("div",{children:["Comisin total vendedores:"," ",o.jsx("strong",{children:sl(He.totalCommissionVendors)})]}),o.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",o.jsx("strong",{children:sl(He.branchProfit)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",o.jsx("span",{className:"text-blue-700",children:sl(He.finalAmount)})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{disabled:at,onClick:Vt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:at?"Creando":"Crear factura"}),o.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),bt&&o.jsx("span",{className:"text-sm ml-2",children:bt})]}),at&&o.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[o.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),o.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),M&&o.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),o.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>G(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:X,onChange:ve=>D(ve.target.value),placeholder:"Detalle del cargo"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Q,onChange:ve=>te(ve.target.value),children:[o.jsx("option",{value:"DEBITO",children:"Dbito"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),o.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:me,onChange:ve=>L(ve.target.value),placeholder:"0.00"})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:he,children:"Agregar"})})]})]})})]})}const ha=t=>`C$ ${Number(t??0).toFixed(2)}`,OC=t=>Number(t??0).toFixed(3);function AB(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const x of e){const y=Number(x.packages??0);r+=y,n+=Number(x.totalProvider??y*(x.providerPricePack??0)),a+=Number(x.totalSale??y*(x.salePricePack??0));const b=x.commissionAmount??Number(x.totalSale??0)*Number(x.commissionPercent??0)/100;s+=Number(b||0)}}const i=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):i.reduce((x,y)=>x+Number(y.amount||0),0),u=l.filter(x=>x.type==="DEBITO").reduce((x,y)=>x+Number(y.amount||0),0),d=l.filter(x=>x.type==="CREDITO").reduce((x,y)=>x+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,h=t.totalCredits!==void 0?Number(t.totalCredits):d,A=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((A*m/100).toFixed(2)),g=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+h;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:h,grossProfit:A,branchProfit:p,finalAmount:g}}function JH(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function vUe(){const[t,e]=v.useState([]),[r,n]=v.useState(!0),[a,s]=v.useState(null),i=v.useRef(null),[l,c]=v.useState(!1),u=async()=>{n(!0);const A=er(ht(ke,"invoicesCandies"),on("date","desc")),m=await Lt(A),p=[];m.forEach(g=>{const x=g.data();p.push({id:g.id,date:x.date,number:x.number,description:x.description,status:x.status||"PENDIENTE",totalPackages:x.totalPackages||0,totalProvider:x.totalProvider||0,totalSale:x.totalSale||0,totalExpenses:x.totalExpenses||0,totalDebits:x.totalDebits||0,totalCredits:x.totalCredits||0,totalCommissionVendors:x.totalCommissionVendors||0,finalAmount:x.finalAmount||0,branchFactorPercent:x.branchFactorPercent||0,branchProfit:x.branchProfit||0,transactions:(x.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(x.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(x.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};v.useEffect(()=>{u()},[]);const d=async A=>{const m=A.status==="PAGADA"?"PENDIENTE":"PAGADA";await nn($t(ke,"invoicesCandies",A.id),{status:m}),e(p=>p.map(g=>g.id===A.id?{...g,status:m}:g)),(a==null?void 0:a.id)===A.id&&s({...A,status:m})},f=async A=>{if(window.confirm(`Eliminar factura del ${A.date}?`))try{await Cn($t(ke,"invoicesCandies",A.id)),e(m=>m.filter(p=>p.id!==A.id)),(a==null?void 0:a.id)===A.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},h=async()=>{if(!i.current||!a)return;const A=i.current,m=await tg(A,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),g=new Fr("p","mm","a4"),x=g.internal.pageSize.getWidth(),y=m.height*x/m.width;g.addImage(p,"PNG",0,0,x,y),g.save(`factura_candy_${a.number||a.date}.pdf`)};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[o.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),o.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&o.jsx(xUe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),o.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(A=>{const m=AB(A),p=JH(A);return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.number||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.commissionTotal)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:OC(m.totalPackages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.totalSale)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.expenses)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.debits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.credits)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(m.finalAmount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:A.status})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(A),children:"Ver"}),o.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(A),children:A.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),o.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(A),children:"Eliminar"})]})})]},A.id)})})]})}),a&&o.jsxs("div",{ref:i,className:"bg-white p-4 rounded shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),o.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),o.jsx("button",{onClick:h,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const A=AB(a),m=JH(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",OC(A.totalPackages)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",ha(A.totalProvider)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",ha(A.totalSale)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",ha(A.grossProfit)]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",ha(A.commissionTotal)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",ha(A.expenses)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",ha(A.debits)]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",ha(A.credits)]})]})]})})(),o.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),o.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.vendorName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.productName}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:OC(A.packages)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.providerPricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.salePricePack)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.totalProvider)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.totalSale)}),o.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[ha(A.commissionAmount||0),A.commissionPercent?` (${A.commissionPercent.toFixed(2)}%)`:""]})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),o.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.date||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description||""}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.amount)})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),o.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),o.jsx("div",{className:"overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),o.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),o.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((A,m)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border whitespace-nowrap",children:A.description}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${A.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:A.type})}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:ha(A.amount)}),o.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const A=AB(a);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{children:["Total paquetes: ",o.jsx("strong",{children:OC(A.totalPackages)})]}),o.jsxs("div",{children:["Total proveedor: ",o.jsx("strong",{children:ha(A.totalProvider)})]})]}),o.jsxs("div",{className:"space-y-1 text-center",children:[o.jsxs("div",{children:["Sub total ventas: ",o.jsx("strong",{children:ha(A.totalSale)})]}),o.jsxs("div",{children:["Ganancia bruta: ",o.jsx("strong",{children:ha(A.grossProfit)})]}),o.jsxs("div",{children:["Ganancia sucursal: ",o.jsx("strong",{children:ha(A.branchProfit)})]})]}),o.jsxs("div",{className:"space-y-1 text-right",children:[o.jsxs("div",{children:["Comisin vendedores:"," ",o.jsx("strong",{children:ha(A.commissionTotal)})]}),o.jsxs("div",{children:["Gastos: ",o.jsx("strong",{children:ha(A.expenses)})]}),o.jsxs("div",{children:["Dbitos: ",o.jsx("strong",{children:ha(A.debits)})]}),o.jsxs("div",{children:["Crditos: ",o.jsx("strong",{children:ha(A.credits)})]})]}),o.jsx("div",{className:"md:col-span-3 mt-3",children:o.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[o.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),o.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:ha(A.finalAmount)})]})})]})})()]})]})}const ls=t=>Math.round((Number(t)||0)*100)/100,Uh=t=>Math.round((Number(t)||0)*1e3)/1e3,Si=t=>Number(t??0).toFixed(2),tA=t=>Number(t??0).toFixed(3),yUe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Er(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",i=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((A,m)=>{const p=Number((A==null?void 0:A.packages)??(A==null?void 0:A.qty)??(A==null?void 0:A.quantity)??0),g=Number((A==null?void 0:A.lineFinal)??0)||Math.max(0,Number((A==null?void 0:A.unitPricePackage)||(A==null?void 0:A.unitPrice)||0)*p-Number((A==null?void 0:A.discount)||0));let x=0;return c>0&&l>0&&Number(g||0)>0&&(x=ls(c*Number(g||0)/l)),{id:`${e}#${m}`,productName:String((A==null?void 0:A.productName)??"(sin nombre)"),quantity:p,amount:ls(g),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:x}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=ls(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:ls(d),date:r,type:s,vendorId:i,userEmail:a,vendorCommissionAmount:f}]};function bUe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||Jr(a,"admin"),i="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=v.useState(Er(lZ(new Date),"yyyy-MM-dd")),[f,h]=v.useState(Er(new Date,"yyyy-MM-dd")),[A,m]=v.useState(!0),[p,g]=v.useState([]),[x,y]=v.useState(null),[b,w]=v.useState(""),[j,I]=v.useState([]),[_,E]=v.useState("ALL"),[S,O]=v.useState({}),P=v.useRef(null);if(!s)return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),o.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const T=async()=>{try{const X=await Lt(ht(ke,c)),D=[];X.forEach(Q=>{const te=Q.data();D.push({id:Q.id,name:te.name||"",commissionPercent:Number(te.commissionPercent||0)})}),I(D)}catch(X){console.error("Error cargando sellers_candies",X)}},F=async()=>{const X=performance.now();try{m(!0);const D=er(ht(ke,i),ir("date",">=",u),ir("date","<=",f)),Q=await Lt(D),te=performance.now();console.log(" getDocs ms:",(te-X).toFixed(1),"docs:",Q.size);const me=[];Q.forEach(z=>me.push({id:z.id,...z.data()}));const L=performance.now();console.log(" parse+set ms:",(L-te).toFixed(1),"rows:",me.length),me.sort((z,ce)=>z.date<ce.date?1:z.date>ce.date?-1:0),g(me),y(null);const he=new Set;me.forEach(z=>{(z.sales||[]).forEach(ce=>{const K=String((ce==null?void 0:ce.id)??"").split("#")[0].trim();K&&he.add(K)})});const ne=Array.from(he).filter(z=>!S[z]);if(ne.length>0){const z={};for(const ce of ne)try{const K=await li($t(ke,l,ce));if(K.exists()){const oe=K.data();z[ce]=yUe(oe,ce)}else z[ce]=[]}catch(K){console.error("Error leyendo sale",ce,K),z[ce]=[]}O(ce=>({...ce,...z}))}}catch(D){console.error(D),w(" Error cargando liquidaciones.")}finally{m(!1)}};v.useEffect(()=>{T()},[]),v.useEffect(()=>{F()},[]);const J=async X=>{X.preventDefault(),await F()},ge=v.useMemo(()=>{const X={};return j.forEach(D=>X[D.id]=D.name||D.id),X},[j]),le=X=>{const D=[];return(X.sales||[]).forEach(Q=>{const te=String((Q==null?void 0:Q.id)??"").trim();if(!te)return;const me=te.split("#")[0],he=(S[me]||[]).find(ne=>ne.id===te);he?D.push(he):D.push({id:te,productName:String((Q==null?void 0:Q.productName)??"(sin nombre)"),quantity:Number((Q==null?void 0:Q.quantity)??0),amount:ls(Number((Q==null?void 0:Q.amount)??0)),date:String((Q==null?void 0:Q.date)??""),type:"CONTADO",vendorId:"",userEmail:String((Q==null?void 0:Q.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),D},de=X=>_==="ALL"?X:X.filter(D=>(D.vendorId||"")===_),Ae=v.useMemo(()=>p.map(X=>{const D=de(le(X));let Q=0,te=0,me=0,L=0,he=0,ne=0;for(const z of D){const ce=Number(z.quantity||0),K=Number(z.amount||0),oe=Number(z.vendorCommissionAmount||0);z.type==="CREDITO"?(te+=ce,L+=K,ne+=oe):(Q+=ce,me+=K,he+=oe)}return{...X,_sales:D,_packsCash:Uh(Q),_packsCredit:Uh(te),_amountCash:ls(me),_amountCredit:ls(L),_comCash:ls(he),_comCredit:ls(ne)}}),[p,S,_]),se=v.useMemo(()=>{let X=0,D=0,Q=0,te=0,me=0,L=0;for(const he of Ae)X+=Number(he._packsCash||0),D+=Number(he._packsCredit||0),Q+=Number(he._amountCash||0),te+=Number(he._amountCredit||0),me+=Number(he._comCash||0),L+=Number(he._comCredit||0);return{packsCash:Uh(X),packsCredit:Uh(D),totalSales:ls(Q+te),amountCash:ls(Q),amountCredit:ls(te),comCash:ls(me),comCredit:ls(L)}},[Ae]),Ie=v.useMemo(()=>{const X={},D={};for(const Q of Ae){const te=Q._sales||[];for(const me of te){const L=(me.vendorId||"").trim();if(!L)continue;const he=ge[L]||me.userEmail||L,ne=ls(Number(me.vendorCommissionAmount||0));me.type==="CREDITO"?(D[L]||(D[L]={vendorId:L,name:he,total:0}),D[L].total=ls(D[L].total+ne)):(X[L]||(X[L]={vendorId:L,name:he,total:0}),X[L].total=ls(X[L].total+ne))}}return{cashRows:Object.values(X).filter(Q=>Q.total>0).sort((Q,te)=>te.total-Q.total),creditRows:Object.values(D).filter(Q=>Q.total>0).sort((Q,te)=>te.total-Q.total)}},[Ae,ge]),Pe=v.useMemo(()=>j.map(X=>({id:X.id,label:X.name||X.id})).sort((X,D)=>X.label.localeCompare(D.label)),[j]),k=v.useMemo(()=>x&&Ae.find(X=>X.id===x.id)||null,[x,Ae]),H=v.useMemo(()=>k?k._sales||[]:[],[k]),R=v.useMemo(()=>{let X=0,D=0,Q=0,te=0;for(const me of H)me.type==="CREDITO"?(D+=Number(me.quantity||0),te+=Number(me.amount||0)):(X+=Number(me.quantity||0),Q+=Number(me.amount||0));return{packsCash:Uh(X),packsCredit:Uh(D),amountCash:ls(Q),amountCredit:ls(te)}},[H]),M=v.useMemo(()=>{const X={};for(const D of H){const Q=D.productName||"(sin nombre)";X[Q]||(X[Q]={productName:Q,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const te=Number(D.quantity||0),me=Number(D.amount||0),L=Number(D.vendorCommissionAmount||0);D.type==="CREDITO"?(X[Q].packsCredit=Uh(X[Q].packsCredit+te),X[Q].amountCredit=ls(X[Q].amountCredit+me),X[Q].comCredit=ls(X[Q].comCredit+L)):(X[Q].packsCash=Uh(X[Q].packsCash+te),X[Q].amountCash=ls(X[Q].amountCash+me),X[Q].comCash=ls(X[Q].comCash+L))}return Object.values(X)},[H]),G=async()=>{if(!P.current||!k)return;const X=P.current;X.classList.add("force-pdf-colors");try{const Q=(await tg(X,{backgroundColor:"#ffffff"})).toDataURL("image/png"),te=new Fr;te.addImage(Q,"PNG",10,10,190,0),te.save(`liquidacion_${k.date}.pdf`)}finally{X.classList.remove("force-pdf-colors")}};return o.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),o.jsxs("form",{onSubmit:J,className:"flex flex-wrap items-end gap-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:X=>d(X.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:X=>h(X.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm",children:"Vendedor"}),o.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:X=>E(X.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),Pe.map(X=>o.jsx("option",{value:X.id,children:X.label},X.id))]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-2xl font-bold",children:tA(se.packsCash)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-2xl font-bold",children:tA(se.packsCredit)})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Si(se.totalSales)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Si(se.amountCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Si(se.amountCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Si(se.comCash)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"text-2xl font-bold",children:["C$",Si(se.comCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Ie.cashRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Ie.cashRows.map(X=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:X.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Si(X.total)]})]},X.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Ie.creditRows.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Ie.creditRows.map(X=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:X.name}),o.jsxs("strong",{className:"ml-2",children:["C$",Si(X.total)]})]},X.vendorId))})]})]}),A?o.jsx("p",{children:"Cargando..."}):Ae.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):o.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsx("tbody",{children:Ae.map(X=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:X.date}),o.jsx("td",{className:"border p-1",children:tA(X._packsCash)}),o.jsx("td",{className:"border p-1",children:tA(X._packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X._amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X._amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X._comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X._comCredit)]}),o.jsx("td",{className:"border p-1",children:o.jsx("div",{className:"flex items-center gap-2 justify-center",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(X),children:"Ver detalle"})})})]},X.id))})]}),k&&o.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[o.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",k.date]}),o.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),o.jsx("button",{onClick:G,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),o.jsxs("div",{ref:P,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[o.jsxs("div",{children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",Si(R.amountCash)]})]}),o.jsxs("div",{children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",Si(R.amountCredit)]})]}),o.jsxs("div",{children:["Total paquetes cash:"," ",o.jsx("strong",{children:tA(R.packsCash)})]}),o.jsxs("div",{children:["Total paquetes crdito:"," ",o.jsx("strong",{children:tA(R.packsCredit)})]})]}),o.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),H.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsx("tbody",{children:H.map((X,D)=>{const Q=X.vendorId&&ge[X.vendorId]?ge[X.vendorId]:X.userEmail,te=ls(Number(X.vendorCommissionAmount||0));return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:Q}),o.jsx("td",{className:"border p-1",children:X.productName}),o.jsx("td",{className:"border p-1",children:X.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-1",children:tA(X.quantity)}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X.amount)]}),o.jsx("td",{className:"border p-1",children:te>0?`C$${Si(te)}`:""}),o.jsx("td",{className:"border p-1",children:X.date||""})]},D)})})]}),o.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),M.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsx("tbody",{children:M.map((X,D)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-1",children:X.productName}),o.jsx("td",{className:"border p-1",children:tA(X.packsCash)}),o.jsx("td",{className:"border p-1",children:tA(X.packsCredit)}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X.amountCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X.amountCredit)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X.comCash)]}),o.jsxs("td",{className:"border p-1",children:["C$",Si(X.comCredit)]})]},D))})]})]})]}),b&&o.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Pr=t=>Math.round((Number(t)||0)*100)/100,So=t=>Math.round((Number(t)||0)*1e3)/1e3,yr=t=>Number(t??0).toFixed(2),_s=t=>Number(t??0).toFixed(3),yS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},jr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},wUe=t=>Math.max(0,Math.min(1,t));function ZH({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,h=f-d||1,A=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?A/2:w/(e.length-1)*A),I=18+(1-(Number(b.value||0)-d)/h)*m;return{x:j,y:I,...b}}),g=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),x=p[p.length-1],y=x?x.value:0;return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),o.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",o.jsx("strong",{children:r+yr(y)})]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return o.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),o.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,yr(f)]}),o.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,yr(d)]}),o.jsx("path",{d:g,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>o.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),o.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function NUe({title:t,items:e}){const r=e.reduce((f,h)=>f+Number(h.value||0),0),n=240,a=86,s=120,i=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,h)=>{const A=Math.max(0,Number(f.value||0)),m=c/l,p=A/l;c+=A;const g=m+p,x=m*Math.PI*2-Math.PI/2,y=g*Math.PI*2-Math.PI/2,b=s+a*Math.cos(x),w=i+a*Math.sin(x),j=s+a*Math.cos(y),I=i+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${i}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[h%u.length],...f,frac:p}});return o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:o.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,h)=>o.jsx("path",{d:f.d,fill:f.fill},h)),o.jsx("circle",{cx:s,cy:i,r:"48",fill:"#ffffff"}),o.jsx("text",{x:s,y:i-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),o.jsxs("text",{x:s,y:i+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",yr(r)]})]})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,h)=>{const A=Number(f.value||0),m=wUe(A/(r||1))*100;return o.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(A)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),o.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:o.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[h%u.length]}})})]},f.label)})}),o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const CUe=(t,e)=>{var g;const r=t.date??((g=t.timestamp)!=null&&g.toDate?Er(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",i=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||i||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,h=yS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((x,y)=>{const b=Number((x==null?void 0:x.packages)??0)||0,w=Number((x==null?void 0:x.total)??0)||Math.max(0,Number((x==null?void 0:x.unitPricePackage)||0)*b-Number((x==null?void 0:x.discount)||0)),j=yS(x==null?void 0:x.branch)||h;let I=0;return f>0&&d>0&&w>0&&(I=Pr(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((x==null?void 0:x.productId)??""),productName:String((x==null?void 0:x.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Pr(w),commission:Pr(I)}});const A=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Pr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:i,vendorName:l,customerId:c,customerName:u,branch:h||"",packages:A,amount:Pr(m),commission:Pr(p)}]};function _Ue({role:t,roles:e}){var gt;const r=e&&e.length?e:t,n=!r||Jr(r,"admin"),a=Er(new Date,"yyyy-MM-dd"),[s,i]=v.useState(a),[l,c]=v.useState(a),[u,d]=v.useState("TODAS"),[f,h]=v.useState("AMBAS"),[A,m]=v.useState("ALL"),[p,g]=v.useState("ALL"),[x,y]=v.useState(""),[b,w]=v.useState(""),[j,I]=v.useState(""),[_,E]=v.useState(""),[S,O]=v.useState("DIA"),[P,T]=v.useState(!0),[F,J]=v.useState(""),[ge,le]=v.useState([]),[de,Ae]=v.useState([]),[se,Ie]=v.useState([]),[Pe,k]=v.useState([]),[H,R]=v.useState([]),[M,G]=v.useState([]),[X,D]=v.useState([]),[Q,te]=v.useState([]),[me,L]=v.useState([]),[he,ne]=v.useState(""),[z,ce]=v.useState(""),K=v.useRef(null),[oe,xe]=v.useState([]),[De,nt]=v.useState("DETALLE"),Me=v.useMemo(()=>{const V={};return H.forEach(ae=>V[ae.id]=String(ae.name||"").trim()),V},[H]),Je=v.useMemo(()=>{const V={};return de.forEach(ae=>V[ae.id]=ae),V},[de]),lt=V=>{const ae=V.customerId?Me[V.customerId]:"";return(V.customerName||ae||"").trim()||(V.customerId?Me[V.customerId]||V.customerId:"")||""};v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Lt(ht(ke,"inventory_candies")),Se=[];ae.forEach(_e=>Se.push({id:_e.id,..._e.data()})),xe(Se)}catch(ae){console.error("inventory_candies all error:",ae),xe([])}})()},[n]),v.useEffect(()=>{(async()=>{try{const ae=await Lt(ht(ke,"sellers_candies")),Se=[];ae.forEach(Ee=>{const ze=Ee.data();Se.push({id:Ee.id,name:String(ze.name||"").trim(),commissionPercent:Number(ze.commissionPercent||0),branch:ze.branch||""})});const _e=new Map;Se.forEach(Ee=>_e.set(Ee.id,Ee)),Ae(Array.from(_e.values()).sort((Ee,ze)=>Ee.name.localeCompare(ze.name)))}catch(ae){console.error(ae)}})()},[]),v.useEffect(()=>{if(!n||!s||!l)return;T(!0),J("");const V=er(ht(ke,"sales_candies"),ir("date",">=",s),ir("date","<=",l),on("date","asc")),ae=Od(V,Se=>{const _e=[];Se.forEach(Ee=>_e.push(...CUe(Ee.data(),Ee.id))),le(_e),T(!1)},Se=>{console.error("sales_candies periodo error:",Se),le([]),T(!1),J(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>ae()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=er(ht(ke,"candy_main_orders"),ir("date",">=",s),ir("date","<=",l)),Se=await Lt(ae),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),Ie(_e)}catch(ae){console.error("candy_main_orders error:",ae),Ie([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=er(ht(ke,"inventory_candies_sellers"),ir("date",">=",s),ir("date","<=",l)),Se=await Lt(ae),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),k(_e)}catch(ae){console.error("inventory_candies_sellers error:",ae),k([])}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=er(ht(ke,"expenses_candies"),ir("date",">=",s),ir("date","<=",l),on("date","asc")),Se=await Lt(ae),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),D(_e)}catch(ae){console.warn("expenses_candies sin ndice, usando fallback:",ae);try{const Se=await Lt(ht(ke,"expenses_candies")),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),D(_e.filter(Ee=>String(Ee.date||"")>=s&&String(Ee.date||"")<=l))}catch(Se){console.error(Se),D([])}}})()},[n,s,l]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Lt(ht(ke,"inventory_candies")),Se=[];ae.forEach(_e=>Se.push({id:_e.id,..._e.data()})),te(Se)}catch(ae){console.error("inventory_candies global error:",ae),te([])}})()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=await Lt(ht(ke,"inventory_candies_sellers")),Se=[];ae.forEach(_e=>Se.push({id:_e.id,..._e.data()})),L(Se)}catch(ae){console.error("inventory_candies_sellers global error:",ae),L([])}})()},[n]),v.useEffect(()=>{if(!n)return;const V=er(ht(ke,"customers_candies")),ae=Od(V,Se=>{const _e=[];Se.forEach(Ee=>{var ze;return _e.push({id:Ee.id,name:String(((ze=Ee.data())==null?void 0:ze.name)||"").trim()})}),R(_e)},Se=>{console.error("customers_candies snapshot error:",Se),R([])});return()=>ae()},[n]),v.useEffect(()=>{if(!n)return;(async()=>{try{const ae=er(ht(ke,"ar_movements"),ir("date","<=",l),on("date","asc")),Se=await Lt(ae),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),G(_e)}catch(ae){console.warn("ar_movements sin ndice, usando fallback:",ae);try{const Se=await Lt(ht(ke,"ar_movements")),_e=[];Se.forEach(Ee=>_e.push({id:Ee.id,...Ee.data()})),G(_e.filter(Ee=>String(Ee.date||"")<=l))}catch(Se){console.error(Se),G([])}}})()},[n,l]);const ft=v.useMemo(()=>{let V=[...ge];if(u!=="TODAS"&&(V=V.filter(_e=>_e.status===u)),f==="CASH"&&(V=V.filter(_e=>_e.type==="CONTADO")),f==="CREDITO"&&(V=V.filter(_e=>_e.type==="CREDITO")),A!=="ALL"&&(V=V.filter(_e=>(_e.vendorId||"")===A)),p!=="ALL"&&(V=V.filter(_e=>_e.branch===p)),x.trim()){const _e=x.trim().toLowerCase();V=V.filter(Ee=>(Ee.productName||"").toLowerCase().includes(_e))}if(b.trim()){const _e=b.trim().toLowerCase();V=V.filter(Ee=>(lt(Ee)||"").toLowerCase().includes(_e))}const ae=j.trim()?Number(j):null,Se=_.trim()?Number(_):null;return ae!==null&&!Number.isNaN(ae)&&(V=V.filter(_e=>(_e.amount||0)>=ae)),Se!==null&&!Number.isNaN(Se)&&(V=V.filter(_e=>(_e.amount||0)<=Se)),V},[ge,u,f,A,p,x,b,j,_,Me]),Ge=v.useMemo(()=>{let V=0,ae=0,Se=0,_e=0,Ee=0,ze=0;for(const st of ft){const ee=jr(st.packages),W=jr(st.amount),re=jr(st.commission);st.type==="CREDITO"?(ae+=ee,_e+=W,ze+=re):(V+=ee,Se+=W,Ee+=re)}const ut=Pr(Se+_e);return{packsCash:So(V),packsCredit:So(ae),salesCash:Pr(Se),salesCredit:Pr(_e),salesTotal:ut,commCash:Pr(Ee),commCredit:Pr(ze),commTotal:Pr(Ee+ze)}},[ft]),ye=v.useMemo(()=>{let V=0,ae=0,Se=0,_e=0,Ee=0,ze=0;for(const ut of se){const st=Array.isArray(ut.items)?ut.items:[];for(const ee of st)V+=jr(ee.totalRivas),ae+=jr(ee.totalSanJorge),Se+=jr(ee.totalIsla),_e+=jr(ee.gainRivas),Ee+=jr(ee.gainSanJorge),ze+=jr(ee.gainIsla)}return{expectedRivas:Pr(V),expectedSanJorge:Pr(ae),expectedIsla:Pr(Se),grossRivas:Pr(_e),grossSanJorge:Pr(Ee),grossIsla:Pr(ze),grossTotal:Pr(_e+Ee+ze),expectedTotal:Pr(V+ae+Se)}},[se]),We=v.useMemo(()=>{const V={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const ae of ft){const Se=ae.branch;Se&&(V[Se].sales+=jr(ae.amount),V[Se].packages+=jr(ae.packages))}return{RIVAS:{sales:Pr(V.RIVAS.sales),packages:So(V.RIVAS.packages)},SAN_JORGE:{sales:Pr(V.SAN_JORGE.sales),packages:So(V.SAN_JORGE.packages)},ISLA:{sales:Pr(V.ISLA.sales),packages:So(V.ISLA.packages)}}},[ft]),qe=v.useMemo(()=>({RIVAS:Pr(We.RIVAS.sales-ye.expectedRivas),SAN_JORGE:Pr(We.SAN_JORGE.sales-ye.expectedSanJorge),ISLA:Pr(We.ISLA.sales-ye.expectedIsla)}),[We,ye]),je=v.useMemo(()=>{const V={},ae={};for(const Ee of ft){const ze=(Ee.vendorId||"").trim();if(!ze)continue;const ut=de.find(W=>W.id===ze),st=(ut==null?void 0:ut.name)||Ee.vendorName||"(sin vendedor)",ee=jr(Ee.commission);Ee.type==="CREDITO"?(ae[ze]||(ae[ze]={vendorId:ze,name:st,total:0}),ae[ze].total=Pr(ae[ze].total+ee)):(V[ze]||(V[ze]={vendorId:ze,name:st,total:0}),V[ze].total=Pr(V[ze].total+ee))}const Se=Object.values(V).sort((Ee,ze)=>ze.total-Ee.total),_e=Object.values(ae).sort((Ee,ze)=>ze.total-Ee.total);return{cashArr:Se,creditArr:_e}},[ft,de]),pe=v.useMemo(()=>{const V=(be,Xe)=>be.reduce((it,xt)=>it+Number((xt==null?void 0:xt[Xe])??0),0),ae=be=>{const Xe=Number(be);return Number.isFinite(Xe)?Math.floor(Xe):0},Se=be=>{const Xe=Number((be==null?void 0:be.totalPackages)??0);if(Xe>0)return Xe;const it=Array.isArray(be==null?void 0:be.items)?be.items:[];return V(it,"packages")};let _e=0,Ee=0;for(const be of se){const Xe=Array.isArray(be.items)?be.items:[];if(Xe.length)for(const it of Xe)_e+=Number((it==null?void 0:it.subtotal)??0);else _e+=Number(be.subtotal??0);Ee+=Se(be)}let ze=0,ut=0,st=0;const ee=be=>{const Xe=Number(be==null?void 0:be.remainingPackages);if(Number.isFinite(Xe)&&Xe>0)return Math.floor(Xe);const it=Math.max(1,ae((be==null?void 0:be.unitsPerPackage)??1)),xt=ae((be==null?void 0:be.remainingUnits)??(be==null?void 0:be.remaining)??0);return xt>0?Math.max(0,Math.floor(xt/it)):0};for(const be of Pe)ze+=Number(be.subtotal??0),ut+=Number(be.packages??0),st+=ee(be);const W=new Set(se.filter(be=>String(be.date||"")>=s&&String(be.date||"")<=l).map(be=>be.id));let re=0;for(const be of oe){const Xe=String(be.orderId||"").trim();Xe&&W.has(Xe)&&(re+=Number(be.remainingPackages??0))}const fe=Q.reduce((be,Xe)=>be+jr(Xe.remainingPackages),0),Ne=me.reduce((be,Xe)=>be+jr(Xe.remainingPackages),0);return{providerTotalMaster:Pr(_e),providerTotalVendor:Pr(ze),orderedPacksMaster:So(Ee),remainingPacksMaster:So(re),orderedPacksVendor:So(ut),remainingPacksVendor:So(st),globalRemainingMaster:So(fe),globalRemainingVendor:So(Ne)}},[se,Pe,oe,s,l,Q,me]),He=v.useMemo(()=>{const V={};let ae=0;for(const Se of X){const _e=String(Se.date||"").trim();if(!_e)continue;const Ee=Math.max(0,jr(Se.amount));ae+=Ee,V[_e]=Pr((V[_e]||0)+Ee)}return{total:Pr(ae),byDay:V}},[X]),at=v.useMemo(()=>{let V=0;for(const ae of se){const Se=Array.isArray(ae.items)?ae.items:[];if(Se.length)for(const _e of Se)V+=jr(_e==null?void 0:_e.subtotal);else V+=jr(ae.subtotal)}return Pr(V)},[se]),yt=v.useMemo(()=>{let V=0,ae=0;for(const _e of Pe){const Ee=String(_e.sellerId||"").trim(),ze=Ee?Je[Ee]:void 0,ut=yS(ze==null?void 0:ze.branch)||"ISLA",st=jr(_e.totalVendor)||jr(ut==="ISLA"?_e.totalIsla:ut==="RIVAS"?_e.totalRivas:_e.totalSanJorge);V+=st,ut==="ISLA"&&(ae+=st)}const Se=Pr(jr(ye.expectedIsla)-ae);return{dispersedTotal:Pr(V),dispersedIsla:Pr(ae),totalExistenteIsla:Se}},[Pe,Je,ye.expectedIsla]),bt=v.useMemo(()=>{var st,ee;const V=W=>{const re=Math.max(1,Math.floor(jr(W.unitsPerPackage||1))),fe=jr(W.totalUnits)>0?jr(W.totalUnits):jr(W.packages)*re;let Ne=0;jr(W.remainingUnits)>0?Ne=jr(W.remainingUnits):jr(W.remainingPackages)>0?Ne=jr(W.remainingPackages)*re:Ne=0;const be=Math.max(0,fe-Ne);return{orderedUnits:fe,remainingUnits:Ne,soldUnits:be,upp:re}},ae=W=>{const re=Je[W];return yS(re==null?void 0:re.branch)},Se=(W,re)=>{const fe=jr(W.totalVendor)||(re==="ISLA"?jr(W.totalIsla):re==="RIVAS"?jr(W.totalRivas):re==="SAN_JORGE"?jr(W.totalSanJorge):0);if(fe>0)return fe;const Ne=jr(W.unitPriceVendor);if(Ne>0){const{orderedUnits:be}=V(W);return Ne*be}return 0},_e=(W,re)=>{const fe=jr(W.unitPriceVendor);if(fe>0)return fe;const Ne=Se(W,re),{orderedUnits:be}=V(W);return Ne>0&&be>0?Ne/be:0},Ee=new Map;for(const W of Pe){const re=String(W.orderId||"").trim(),fe=re||`DOC:${W.id}`,Ne=String(W.sellerId||"").trim(),be=String(W.sellerName||"").trim()||Ne&&((st=Je[Ne])==null?void 0:st.name)||""||"(sin vendedor)",Xe=String(W.date||"").trim(),it=Ne?ae(Ne):"",{orderedUnits:xt,remainingUnits:_t,soldUnits:Et}=V(W),Gt=Se(W,it),nr=_e(W,it),ur=nr>0?nr*Et:xt>0?Gt*Et/xt:0,rr=nr>0?nr*_t:xt>0?Gt*_t/xt:0;Ee.has(fe)||Ee.set(fe,{orderKey:fe,orderId:re||fe,date:Xe,sellerId:Ne,sellerName:be,branch:it,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const cr=Ee.get(fe);cr.lines.push({...W,orderedUnits:xt,soldUnits:Et,remainingUnits:_t,lineTotal:Pr(Gt),lineSoldValue:Pr(ur),lineRemainingValue:Pr(rr)}),cr.totalOrden+=Gt,cr.vendido+=ur,cr.restante+=rr}for(const W of Ee.values()){const re=W.sellerId?jr((ee=Je[W.sellerId])==null?void 0:ee.commissionPercent):0;W.comision=Pr(W.totalOrden*re/100),W.totalEsperado=Pr(W.totalOrden-W.comision),W.totalOrden=Pr(W.totalOrden),W.vendido=Pr(W.vendido),W.restante=Pr(W.restante)}const ze=Array.from(Ee.values()).sort((W,re)=>W.date&&re.date?W.date<re.date?1:-1:re.totalOrden-W.totalOrden),ut=ze.reduce((W,re)=>(W.totalOrden+=jr(re.totalOrden),W.vendido+=jr(re.vendido),W.restante+=jr(re.restante),W.comision+=jr(re.comision),W.totalEsperado+=jr(re.totalEsperado),W),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Pr(ut.totalOrden),vendido:Pr(ut.vendido),restante:Pr(ut.restante),comision:Pr(ut.comision),totalEsperado:Pr(ut.totalEsperado)},orders:ze}},[Pe,Je]),kt=v.useMemo(()=>{if(!z)return null;const V=bt.orders.find(_e=>_e.orderKey===z);if(!V)return null;const ae={};for(const _e of V.lines){const Ee=String(_e.productName||"(sin nombre)");ae[Ee]||(ae[Ee]={productName:Ee,asociados:0,vendidos:0,restantes:0}),ae[Ee].asociados+=jr(_e.orderedUnits),ae[Ee].vendidos+=jr(_e.soldUnits),ae[Ee].restantes+=jr(_e.remainingUnits)}const Se=Object.values(ae).map(_e=>({..._e,asociados:Math.floor(_e.asociados),vendidos:Math.floor(_e.vendidos),restantes:Math.floor(_e.restantes)})).sort((_e,Ee)=>Ee.asociados-_e.asociados);return{...V,products:Se}},[z,bt.orders]),Vt=v.useMemo(()=>{const V=Q.reduce((Se,_e)=>Se+jr(_e.remainingPackages),0),ae=me.reduce((Se,_e)=>Se+jr(_e.remainingPackages),0);return{masterRemainingPackages:So(V),vendorRemainingPackages:So(ae)}},[Q,me]),ve=v.useMemo(()=>{const V=new Map,ae=_e=>S==="DIA"?{key:_e.date,label:_e.date}:S==="VENDEDOR"?{key:_e.vendorId||"",label:_e.vendorName||""}:S==="PRODUCTO"?{key:_e.productName||"",label:_e.productName||""}:{key:_e.branch||"",label:_e.branch||""};for(const _e of ft){const{key:Ee,label:ze}=ae(_e);V.has(Ee)||V.set(Ee,{key:Ee,label:ze,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const ut=V.get(Ee);ut.rows.push(_e),_e.type==="CREDITO"?(ut.packsCredit+=jr(_e.packages),ut.salesCredit+=jr(_e.amount),ut.commCredit+=jr(_e.commission)):(ut.packsCash+=jr(_e.packages),ut.salesCash+=jr(_e.amount),ut.commCash+=jr(_e.commission))}const Se=Array.from(V.values()).map(_e=>({..._e,packsCash:So(_e.packsCash),packsCredit:So(_e.packsCredit),salesCash:Pr(_e.salesCash),salesCredit:Pr(_e.salesCredit),commCash:Pr(_e.commCash),commCredit:Pr(_e.commCredit)}));return S==="DIA"?Se.sort((_e,Ee)=>_e.key<Ee.key?1:-1):Se.sort((_e,Ee)=>Ee.salesCash+Ee.salesCredit-(_e.salesCash+_e.salesCredit)),Se},[ft,S]),Qe=v.useMemo(()=>{if(!he)return[];const V=ve.find(ae=>ae.key===he);return(V==null?void 0:V.rows)||[]},[he,ve]),Z=v.useMemo(()=>{const V={};for(const ae of Qe){const Se=ae.productName||"(sin nombre)";V[Se]||(V[Se]={productName:Se,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),ae.type==="CREDITO"?(V[Se].packsCredit+=jr(ae.packages),V[Se].salesCredit+=jr(ae.amount),V[Se].commCredit+=jr(ae.commission)):(V[Se].packsCash+=jr(ae.packages),V[Se].salesCash+=jr(ae.amount),V[Se].commCash+=jr(ae.commission))}return Object.values(V).map(ae=>({...ae,packsCash:So(ae.packsCash),packsCredit:So(ae.packsCredit),salesCash:Pr(ae.salesCash),salesCredit:Pr(ae.salesCredit),commCash:Pr(ae.commCash),commCredit:Pr(ae.commCredit)})).sort((ae,Se)=>Se.salesCash+Se.salesCredit-(ae.salesCash+ae.salesCredit))},[Qe]),$e=v.useMemo(()=>{const V={},ae=Ee=>(Me[Ee]||"").trim()||Ee;for(const Ee of M){const ze=String(Ee.customerId||"").trim();if(!ze)continue;const ut=String(Ee.date||"");if(ut&&ut>l)continue;V[ze]||(V[ze]={customerId:ze,name:ae(ze),balance:0,lastPayment:""});const st=jr(Ee.amount);Ee.type==="CARGO"&&(V[ze].balance+=st),Ee.type==="ABONO"&&(V[ze].balance-=st,(!V[ze].lastPayment||ut>V[ze].lastPayment)&&(V[ze].lastPayment=ut))}const Se=Object.values(V).map(Ee=>({...Ee,balance:Pr(Ee.balance)})).filter(Ee=>Ee.balance>0).sort((Ee,ze)=>ze.balance-Ee.balance),_e=Pr(Se.reduce((Ee,ze)=>Ee+ze.balance,0));return{count:Se.length,totalPending:_e,list:Se.slice(0,20)}},[M,Me,l]),Le=v.useMemo(()=>{const V=Pr(Ge.salesTotal),ae=Pr(Ge.commTotal),Se=Pr(He.total),_e=Pr(V-ae-Se),Ee=new Set;for(const re of ft)re.date&&Ee.add(re.date);const ze=Math.max(1,Ee.size),ut=Pr(V/ze),st=Pr(ae/ze),ee=Pr(Se/ze),W=Pr(_e/ze);return{ingreso:V,comision:ae,gastos:Se,gananciaNeta:_e,daysCount:ze,ingresoDia:ut,comisionDia:st,gastosDia:ee,netaDia:W}},[Ge,He.total,ft]),Ve=v.useMemo(()=>{const V={};for(const Ee of ft){const ze=Ee.date;ze&&(V[ze]||(V[ze]={date:ze,ingreso:0,comision:0}),V[ze].ingreso+=jr(Ee.amount),V[ze].comision+=jr(Ee.commission))}const ae=Object.keys(V).sort((Ee,ze)=>Ee<ze?-1:1),Se=ae.map(Ee=>({label:Ee.slice(5),value:Pr(V[Ee].ingreso)})),_e=ae.map(Ee=>{var W,re;const ze=jr((W=V[Ee])==null?void 0:W.ingreso),ut=jr((re=V[Ee])==null?void 0:re.comision),st=jr(He.byDay[Ee]||0),ee=ze-ut-st;return{label:Ee.slice(5),value:Pr(ee)}});return{seriesIngreso:Se,seriesNeta:_e,datesCount:ae.length}},[ft,He.byDay]),At=v.useMemo(()=>[{label:"Rivas",value:jr(We.RIVAS.sales)},{label:"San Jorge",value:jr(We.SAN_JORGE.sales)},{label:"Isla",value:jr(We.ISLA.sales)}].map(V=>({...V,value:Pr(V.value)})),[We]),pt=async()=>{if(K.current){K.current.classList.add("force-pdf-colors");try{const ae=(await tg(K.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Se=new Fr;Se.addImage(ae,"PNG",10,10,190,0),Se.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{K.current.classList.remove("force-pdf-colors")}}},Be=()=>{const ae=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...ft.map(ze=>[ze.date,ze.processedDate||"",ze.status,ze.type,ze.vendorId,`"${String(ze.vendorName||"").replace(/"/g,'""')}"`,ze.branch||"",`"${String(ze.productName||"").replace(/"/g,'""')}"`,_s(ze.packages),yr(ze.amount),yr(ze.commission),ze.customerId||"",`"${String(lt(ze)||"").replace(/"/g,'""')}"`].join(","))],Se=new Blob([ae.join(`
`)],{type:"text/csv;charset=utf-8;"}),_e=URL.createObjectURL(Se),Ee=document.createElement("a");Ee.href=_e,Ee.download=`data_center_dulces_${s}_a_${l}.csv`,Ee.click(),URL.revokeObjectURL(_e)};return n?o.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:o.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[o.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[o.jsx("button",{onClick:pt,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-green-600 text-white hover:bg-green-700 transition-colors\r
              `,children:"Exportar PDF"}),o.jsx("button",{onClick:Be,className:`\r
                inline-flex items-center justify-center gap-2\r
                w-full sm:w-auto\r
                px-3 py-2 text-sm font-semibold\r
                rounded-lg md:rounded-md\r
                bg-gray-800 text-white hover:bg-black transition-colors\r
              `,children:"Exportar CSV"})]})]}),o.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:V=>i(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:V=>c(V.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:V=>d(V.target.value),children:[o.jsx("option",{value:"TODAS",children:"Todas"}),o.jsx("option",{value:"FLOTANTE",children:"Flotante"}),o.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:V=>h(V.target.value),children:[o.jsx("option",{value:"AMBAS",children:"Ambas"}),o.jsx("option",{value:"CASH",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:A,onChange:V=>m(V.target.value),children:[o.jsx("option",{value:"ALL",children:"Todos"}),de.map(V=>o.jsx("option",{value:V.id,children:V.name||V.id},V.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:V=>g(V.target.value),children:[o.jsx("option",{value:"ALL",children:"Todas"}),o.jsx("option",{value:"RIVAS",children:"Rivas"}),o.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),o.jsx("option",{value:"ISLA",children:"Isla"})]})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:x,onChange:V=>y(V.target.value),placeholder:"Ej: Conitos"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:V=>w(V.target.value),placeholder:"Ej: Javier"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:V=>I(V.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),o.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:V=>E(V.target.value),placeholder:"999999"})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),o.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:S,onChange:V=>{ne(""),O(V.target.value)},children:[o.jsx("option",{value:"DIA",children:"Da"}),o.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),o.jsx("option",{value:"PRODUCTO",children:"Producto"}),o.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{ce(""),nt("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",De==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),o.jsx("button",{onClick:()=>{ce(""),nt("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",De==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",o.jsxs("strong",{children:["C$",yr(He.total)]})]})]}),o.jsxs("div",{ref:K,children:[De==="MACRO"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(Le.ingreso)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",yr(Le.comision)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(Ge.commCash),"  Crdito: C$",yr(Ge.commCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",yr(Le.gastos)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(Le.gananciaNeta)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(Le.netaDia)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",o.jsx("strong",{children:Le.daysCount})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[o.jsx(ZH,{title:"Ventas por da (Ingreso)",series:Ve.seriesIngreso,valuePrefix:"C$"}),o.jsx(ZH,{title:"Ganancia neta por da (real)",series:Ve.seriesNeta,valuePrefix:"C$"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(NUe,{title:"Distribucin de ventas por sucursal",items:At})})]}),De==="DETALLE"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(Ge.packsCash)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(Ge.packsCredit)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(Ge.salesTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(Ge.salesCash),"  Crdito: C$",yr(Ge.salesCredit)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(Ge.commTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",yr(Ge.commCash),"  Crdito: C$",yr(Ge.commCredit)]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Gross Profit total (rdenes maestras)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(ye.grossTotal)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["R: ",yr(ye.grossRivas),"  SJ:"," ",yr(ye.grossSanJorge),"  I:"," ",yr(ye.grossIsla)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (por sucursal)"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(ye.expectedRivas)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(ye.expectedSanJorge)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(ye.expectedIsla)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas por sucursal"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(We.RIVAS.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(We.SAN_JORGE.sales)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(We.ISLA.sales)]})]})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado"}),o.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Rivas"}),o.jsxs("strong",{children:["C$",yr(qe.RIVAS)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"San Jorge"}),o.jsxs("strong",{children:["C$",yr(qe.SAN_JORGE)]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Isla"}),o.jsxs("strong",{children:["C$",yr(qe.ISLA)]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(pe.providerTotalVendor)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(pe.orderedPacksMaster)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:_s(pe.remainingPacksMaster)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:_s(Vt.masterRemainingPackages)})]})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(pe.orderedPacksVendor)}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",o.jsx("strong",{children:_s(pe.remainingPacksVendor)})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",o.jsx("strong",{children:_s(Vt.vendorRemainingPackages)})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(at)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(yt.dispersedTotal)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(yt.dispersedIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total existente (Isla)"}),o.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",yr(yt.totalExistenteIsla)]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",o.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",yr(bt.global.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",yr(bt.global.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",yr(bt.global.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",yr(bt.global.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",yr(bt.global.totalEsperado)]})]})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[o.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),bt.orders.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:bt.orders.map(V=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-semibold truncate",children:V.orderId}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[V.sellerName," ",V.branch?` ${V.branch}`:""," ",V.date?` ${V.date}`:""]})]}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>ce(V.orderKey),children:"Ver"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.totalOrden)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.vendido)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.restante)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.comision)]})]})]})]},V.orderKey))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Orden"}),o.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Fecha"}),o.jsx("th",{className:"border p-2",children:"Total orden"}),o.jsx("th",{className:"border p-2",children:"Vendido"}),o.jsx("th",{className:"border p-2",children:"Restante"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Total esperado"}),o.jsx("th",{className:"border p-2",children:"Accin"})]})}),o.jsx("tbody",{children:bt.orders.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:V.orderId}),o.jsx("td",{className:"border p-2 text-left",children:V.sellerName}),o.jsx("td",{className:"border p-2",children:V.branch||""}),o.jsx("td",{className:"border p-2",children:V.date||""}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.totalOrden)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.vendido)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.restante)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.comision)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.totalEsperado)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>ce(V.orderKey),children:"Ver detalle"})})]},V.orderKey))})]})}),kt&&o.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",kt.orderId]}),o.jsx("button",{onClick:()=>ce(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",o.jsxs("strong",{children:["C$",yr(kt.totalOrden)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",o.jsxs("strong",{children:["C$",yr(kt.vendido)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",o.jsxs("strong",{children:["C$",yr(kt.restante)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",o.jsxs("strong",{children:["C$",yr(kt.comision)]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",o.jsxs("strong",{children:["C$",yr(kt.totalEsperado)]})]})]}),o.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),o.jsx("div",{className:"md:hidden space-y-2",children:kt.products.map(V=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:V.productName}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),o.jsx("div",{className:"font-bold",children:V.asociados})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),o.jsx("div",{className:"font-bold",children:V.vendidos})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),o.jsx("div",{className:"font-bold",children:V.restantes})]})]})]},V.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),o.jsx("th",{className:"border p-2",children:"Asociados"}),o.jsx("th",{className:"border p-2",children:"Vendidos"}),o.jsx("th",{className:"border p-2",children:"Restantes"})]})}),o.jsxs("tbody",{children:[kt.products.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:V.productName}),o.jsx("td",{className:"border p-2",children:V.asociados}),o.jsx("td",{className:"border p-2",children:V.vendidos}),o.jsx("td",{className:"border p-2",children:V.restantes})]},V.productName)),kt.products.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(Vt.masterRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),o.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:_s(Vt.vendorRemainingPackages)}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),je.cashArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:je.cashArr.map(V=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:V.name}),o.jsxs("strong",{className:"ml-2",children:["C$",yr(V.total)]})]},V.vendorId))})]}),o.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),je.creditArr.length===0?o.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):o.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:je.creditArr.map(V=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"truncate",children:V.name}),o.jsxs("strong",{className:"ml-2",children:["C$",yr(V.total)]})]},V.vendorId))})]})]}),o.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[o.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Cartera (saldo pendiente hasta ",l,")"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[o.jsxs("div",{children:["Clientes con saldo: ",o.jsx("strong",{children:$e.count})]}),o.jsxs("div",{children:["Saldo total pendiente:"," ",o.jsxs("strong",{children:["C$",yr($e.totalPending)]})]}),o.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),$e.list.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:""}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2",children:$e.list.map(V=>o.jsxs("div",{className:"border rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:V.name}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(V.balance)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono:"," ",o.jsx("span",{className:"font-medium",children:V.lastPayment||""})]})]},V.customerId))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),o.jsx("th",{className:"border p-2",children:"Saldo"}),o.jsx("th",{className:"border p-2",children:"ltimo abono"})]})}),o.jsx("tbody",{children:$e.list.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:V.name}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.balance)]}),o.jsx("td",{className:"border p-2",children:V.lastPayment||""})]},V.customerId))})]})})]})]}),o.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[o.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",S,")"]}),o.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),P?o.jsx("p",{className:"text-sm",children:"Cargando..."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"md:hidden space-y-2 mb-6",children:ve.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):ve.map(V=>o.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:V.label}),o.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>ne(V.key),children:"Ver detalle"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),o.jsx("div",{className:"font-bold",children:_s(V.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),o.jsx("div",{className:"font-bold",children:_s(V.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.commCredit)]})]})]})]},V.key))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2 text-left",children:S==="DIA"?"Da":S==="VENDEDOR"?"Vendedor":S==="PRODUCTO"?"Producto":"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"}),o.jsx("th",{className:"border p-2",children:"Opciones"})]})}),o.jsxs("tbody",{children:[ve.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:V.label}),o.jsx("td",{className:"border p-2",children:_s(V.packsCash)}),o.jsx("td",{className:"border p-2",children:_s(V.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.commCredit)]}),o.jsx("td",{className:"border p-2",children:o.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>ne(V.key),children:"Ver detalle"})})]},V.key)),ve.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),he&&o.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[o.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((gt=ve.find(V=>V.key===he))==null?void 0:gt.label)||he]}),o.jsx("button",{onClick:()=>ne(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",o.jsxs("strong",{children:["C$",yr(Qe.filter(V=>V.type==="CONTADO").reduce((V,ae)=>V+jr(ae.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",o.jsxs("strong",{children:["C$",yr(Qe.filter(V=>V.type==="CREDITO").reduce((V,ae)=>V+jr(ae.amount),0))]})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",o.jsx("strong",{children:_s(Qe.filter(V=>V.type==="CONTADO").reduce((V,ae)=>V+jr(ae.packages),0))})]}),o.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",o.jsx("strong",{children:_s(Qe.filter(V=>V.type==="CREDITO").reduce((V,ae)=>V+jr(ae.packages),0))})]})]}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),o.jsx("div",{className:"md:hidden space-y-2 mb-4",children:Qe.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):Qe.map(V=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:V.productName}),o.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",yr(V.amount)]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",o.jsx("span",{className:"font-medium",children:V.vendorName})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),o.jsx("div",{className:"font-bold",children:V.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),o.jsx("div",{className:"font-bold",children:V.branch||""})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),o.jsx("div",{className:"font-bold",children:_s(V.packages)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.commission)]})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",V.date]})]},V.id))}),o.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Vendedor"}),o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Tipo"}),o.jsx("th",{className:"border p-2",children:"Sucursal"}),o.jsx("th",{className:"border p-2",children:"Paquetes"}),o.jsx("th",{className:"border p-2",children:"Monto"}),o.jsx("th",{className:"border p-2",children:"Comisin"}),o.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),o.jsxs("tbody",{children:[Qe.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2",children:V.vendorName}),o.jsx("td",{className:"border p-2",children:V.productName}),o.jsx("td",{className:"border p-2",children:V.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"border p-2",children:V.branch||""}),o.jsx("td",{className:"border p-2",children:_s(V.packages)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.amount)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.commission)]}),o.jsx("td",{className:"border p-2",children:V.date})]},V.id)),Qe.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),o.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),o.jsx("div",{className:"md:hidden space-y-2",children:Z.length===0?o.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Z.map(V=>o.jsxs("div",{className:"border rounded-2xl p-3",children:[o.jsx("div",{className:"font-semibold",children:V.productName}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),o.jsx("div",{className:"font-bold",children:_s(V.packsCash)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),o.jsx("div",{className:"font-bold",children:_s(V.packsCredit)})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.salesCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.salesCredit)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.commCash)]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),o.jsxs("div",{className:"font-bold",children:["C$",yr(V.commCredit)]})]})]})]},V.productName))}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border p-2",children:"Producto"}),o.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),o.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),o.jsx("th",{className:"border p-2",children:"Ventas cash"}),o.jsx("th",{className:"border p-2",children:"Ventas crdito"}),o.jsx("th",{className:"border p-2",children:"Comisin cash"}),o.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),o.jsxs("tbody",{children:[Z.map(V=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"border p-2 text-left",children:V.productName}),o.jsx("td",{className:"border p-2",children:_s(V.packsCash)}),o.jsx("td",{className:"border p-2",children:_s(V.packsCredit)}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.salesCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.salesCredit)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.commCash)]}),o.jsxs("td",{className:"border p-2",children:["C$",yr(V.commCredit)]})]},V.productName)),Z.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),F&&o.jsx("p",{className:"mt-3 text-sm",children:F})]})}):o.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[o.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),o.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function Rne(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Rne(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function _a(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Rne(t))&&(n&&(n+=" "),n+=e);return n}var EUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function PD(t){if(typeof t!="string")return!1;var e=EUe;return e.includes(t)}var SUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],IUe=new Set(SUe);function Mne(t){return typeof t!="string"?!1:IUe.has(t)}function Lne(t){return typeof t=="string"&&t.startsWith("data-")}function If(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Mne(r)||Lne(r))&&(e[r]=t[r]);return e}function m2(t){if(t==null)return null;if(v.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return If(e)}return typeof t=="object"&&!Array.isArray(t)?If(t):null}function qu(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Mne(r)||Lne(r)||PD(r))&&(e[r]=t[r]);return e}var jUe=["children","width","height","viewBox","className","style","title","desc"];function mk(){return mk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mk.apply(null,arguments)}function BUe(t,e){if(t==null)return{};var r,n,a=PUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function PUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var TD=v.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:l,title:c,desc:u}=t,d=BUe(t,jUe),f=s||{width:n,height:a,x:0,y:0},h=_a("recharts-surface",i);return v.createElement("svg",mk({},qu(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),v.createElement("title",null,c),v.createElement("desc",null,u),r)}),TUe=["children","className"];function pk(){return pk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pk.apply(null,arguments)}function kUe(t,e){if(t==null)return{};var r,n,a=FUe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FUe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Hl=v.forwardRef((t,e)=>{var{children:r,className:n}=t,a=kUe(t,TUe),s=_a("recharts-layer",n);return v.createElement("g",pk({className:s},qu(a),{ref:e}),r)}),Une=v.createContext(null),OUe=()=>v.useContext(Une);function Ua(t){return function(){return t}}const Qne=Math.cos,bS=Math.sin,Gd=Math.sqrt,wS=Math.PI,k4=2*wS,gk=Math.PI,xk=2*gk,Tm=1e-6,DUe=xk-Tm;function Vne(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function RUe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Vne;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class MUe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Vne:RUe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,l=this._y1,c=n-e,u=a-r,d=i-e,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Tm)if(!(Math.abs(f*c-u*d)>Tm)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let A=n-i,m=a-l,p=c*c+u*u,g=A*A+m*m,x=Math.sqrt(p),y=Math.sqrt(h),b=s*Math.tan((gk-Math.acos((p+h-g)/(2*x*y)))/2),w=b/y,j=b/x;Math.abs(w-1)>Tm&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*A>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Tm||Math.abs(this._y1-d)>Tm)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%xk+xk),h>DUe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Tm&&this._append`A${n},${n},0,${+(h>=gk)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function kD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new MUe(e)}function FD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Hne(t){this._context=t}Hne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function F4(t){return new Hne(t)}function $ne(t){return t[0]}function Kne(t){return t[1]}function Gne(t,e){var r=Ua(!0),n=null,a=F4,s=null,i=kD(l);t=typeof t=="function"?t:t===void 0?$ne:Ua(t),e=typeof e=="function"?e:e===void 0?Kne:Ua(e);function l(c){var u,d=(c=FD(c)).length,f,h=!1,A;for(n==null&&(s=a(A=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(A)return s=null,A+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ua(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ua(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ua(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function DC(t,e,r){var n=null,a=Ua(!0),s=null,i=F4,l=null,c=kD(u);t=typeof t=="function"?t:t===void 0?$ne:Ua(+t),e=typeof e=="function"?e:Ua(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Kne:Ua(+r);function u(f){var h,A,m,p=(f=FD(f)).length,g,x=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=i(y=c())),h=0;h<=p;++h){if(!(h<p&&a(g=f[h],h,f))===x)if(x=!x)A=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=h-1;m>=A;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(g,h,f),w[h]=+e(g,h,f),l.point(n?+n(g,h,f):b[h],r?+r(g,h,f):w[h]))}if(y)return l=null,y+""||null}function d(){return Gne().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ua(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ua(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ua(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ua(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ua(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ua(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Ua(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(l=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=l=null:l=i(s=f),u):s},u}class qne{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function LUe(t){return new qne(t,!0)}function UUe(t){return new qne(t,!1)}const OD={draw(t,e){const r=Gd(e/wS);t.moveTo(r,0),t.arc(0,0,r,0,k4)}},QUe={draw(t,e){const r=Gd(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},zne=Gd(1/3),VUe=zne*2,HUe={draw(t,e){const r=Gd(e/VUe),n=r*zne;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},$Ue={draw(t,e){const r=Gd(e),n=-r/2;t.rect(n,n,r,r)}},KUe=.8908130915292852,Wne=bS(wS/10)/bS(7*wS/10),GUe=bS(k4/10)*Wne,qUe=-Qne(k4/10)*Wne,zUe={draw(t,e){const r=Gd(e*KUe),n=GUe*r,a=qUe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const i=k4*s/5,l=Qne(i),c=bS(i);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},hB=Gd(3),WUe={draw(t,e){const r=-Gd(e/(hB*3));t.moveTo(0,r*2),t.lineTo(-hB*r,-r),t.lineTo(hB*r,-r),t.closePath()}},pu=-.5,gu=Gd(3)/2,vk=1/Gd(12),XUe=(vk/2+1)*3,YUe={draw(t,e){const r=Gd(e/XUe),n=r/2,a=r*vk,s=n,i=r*vk+r,l=-s,c=i;t.moveTo(n,a),t.lineTo(s,i),t.lineTo(l,c),t.lineTo(pu*n-gu*a,gu*n+pu*a),t.lineTo(pu*s-gu*i,gu*s+pu*i),t.lineTo(pu*l-gu*c,gu*l+pu*c),t.lineTo(pu*n+gu*a,pu*a-gu*n),t.lineTo(pu*s+gu*i,pu*i-gu*s),t.lineTo(pu*l+gu*c,pu*c-gu*l),t.closePath()}};function JUe(t,e){let r=null,n=kD(a);t=typeof t=="function"?t:Ua(t||OD),e=typeof e=="function"?e:Ua(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ua(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ua(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function NS(){}function CS(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Xne(t){this._context=t}Xne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:CS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:CS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZUe(t){return new Xne(t)}function Yne(t){this._context=t}Yne.prototype={areaStart:NS,areaEnd:NS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:CS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e7e(t){return new Yne(t)}function Jne(t){this._context=t}Jne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:CS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function t7e(t){return new Jne(t)}function Zne(t){this._context=t}Zne.prototype={areaStart:NS,areaEnd:NS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function r7e(t){return new Zne(t)}function e$(t){return t<0?-1:1}function t$(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),i=(r-t._y1)/(a||n<0&&-0),l=(s*a+i*n)/(n+a);return(e$(s)+e$(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(l))||0}function r$(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function mB(t,e,r){var n=t._x0,a=t._y0,s=t._x1,i=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,i-l*r,s,i)}function _S(t){this._context=t}_S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mB(this,this._t0,r$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,mB(this,r$(this,r=t$(this,t,e)),r);break;default:mB(this,this._t0,r=t$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function eae(t){this._context=new tae(t)}(eae.prototype=Object.create(_S.prototype)).point=function(t,e){_S.prototype.point.call(this,e,t)};function tae(t){this._context=t}tae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function n7e(t){return new _S(t)}function a7e(t){return new eae(t)}function rae(t){this._context=t}rae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=n$(t),a=n$(e),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[i],e[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function n$(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,i[e]-=n*i[e-1];for(a[r-1]=i[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(i[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function s7e(t){return new rae(t)}function O4(t,e){this._context=t,this._t=e}O4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function i7e(t){return new O4(t,.5)}function o7e(t){return new O4(t,0)}function l7e(t){return new O4(t,1)}function Mp(t,e){if((i=t.length)>1)for(var r=1,n,a,s=t[e[0]],i,l=s.length;r<i;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function yk(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function c7e(t,e){return t[e]}function u7e(t){const e=[];return e.key=t,e}function d7e(){var t=Ua([]),e=yk,r=Mp,n=c7e;function a(s){var i=Array.from(t.apply(this,arguments),u7e),l,c=i.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(i[l][u]=[0,+n(f,i[l].key,u,s)]).data=f;for(l=0,d=FD(e(i));l<c;++l)i[d[l]].index=l;return r(i,d),i}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ua(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ua(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?yk:typeof s=="function"?s:Ua(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Mp,a):r},a}function f7e(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=t[r][a][1]||0;if(i)for(r=0;r<n;++r)t[r][a][1]/=i}Mp(t,e)}}function A7e(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var i=0,l=0;i<a;++i)l+=t[i][r][1]||0;n[r][1]+=n[r][0]=-l/2}Mp(t,e)}}function h7e(t,e){if(!(!((i=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var l=0,c=0,u=0;l<i;++l){for(var d=t[e[l]],f=d[n][1]||0,h=d[n-1][1]||0,A=(f-h)/2,m=0;m<l;++m){var p=t[e[m]],g=p[n][1]||0,x=p[n-1][1]||0;A+=g-x}c+=f,u+=A*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Mp(t,e)}}var D4={},nae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(nae);var DD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(DD);var R4={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(R4);var M4={},aae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aae,r=R4;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],i=a.length;if(i===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<i;){const f=a[l];u?f==="\\"&&l+1<i?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(M4);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nae,r=DD,n=R4,a=M4;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function i(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(D4);var m7e=D4.get;const Lp=qA(m7e);var p7e=4;function h0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p7e,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function Qs(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,i)=>{var l=r[i-1];return typeof l=="string"?a+l+s:l!==void 0?a+h0(l)+s:a+s},"")}var Ko=t=>t===0?0:t>0?1:-1,jf=t=>typeof t=="number"&&t!=+t,UA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Xr=t=>(typeof t=="number"||t instanceof Number)&&!jf(t),Bf=t=>Xr(t)||typeof t=="string",g7e=0,p2=t=>{var e=++g7e;return"".concat(t||"").concat(e)},xl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Xr(e)&&typeof e!="string")return n;var s;if(UA(e)){if(r==null)return n;var i=e.indexOf("%");s=r*parseFloat(e.slice(0,i))/100}else s=+e;return jf(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},sae=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function Fi(t,e,r){return Xr(t)&&Xr(e)?h0(t+r*(e-t)):e}function x7e(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Lp(n,e))===r)}var vo=t=>t===null||typeof t>"u",hw=t=>vo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function v7e(t){return t!=null}function mw(){}var y7e=["type","size","sizeType"];function bk(){return bk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bk.apply(null,arguments)}function a$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function s$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(r),!0).forEach(function(n){b7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function b7e(t,e,r){return(e=w7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w7e(t){var e=N7e(t,"string");return typeof e=="symbol"?e:e+""}function N7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C7e(t,e){if(t==null)return{};var r,n,a=_7e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _7e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var iae={symbolCircle:OD,symbolCross:QUe,symbolDiamond:HUe,symbolSquare:$Ue,symbolStar:zUe,symbolTriangle:WUe,symbolWye:YUe},E7e=Math.PI/180,S7e=t=>{var e="symbol".concat(hw(t));return iae[e]||OD},I7e=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*E7e;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},j7e=(t,e)=>{iae["symbol".concat(hw(t))]=e},RD=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=C7e(t,y7e),s=s$(s$({},a),{},{type:e,size:r,sizeType:n}),i="circle";typeof e=="string"&&(i=e);var l=()=>{var h=S7e(i),A=JUe().type(h).size(I7e(r,n,i)),m=A();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=qu(s);return Xr(u)&&Xr(d)&&Xr(r)?v.createElement("path",bk({},f,{className:_a("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};RD.registerSymbol=j7e;var oae=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,B7e=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(v.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{PD(a)&&(n[a]=s=>r[a](r,s))}),n},P7e=(t,e,r)=>n=>(t(e,r,n),null),pw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];PD(a)&&typeof s=="function"&&(n||(n={}),n[a]=P7e(s,e,r))}),n};function i$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i$(Object(r),!0).forEach(function(n){k7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k7e(t,e,r){return(e=F7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F7e(t){var e=O7e(t,"string");return typeof e=="symbol"?e:e+""}function O7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zo(t,e){var r=T7e({},t),n=e,a=Object.keys(e),s=a.reduce((i,l)=>(i[l]===void 0&&n[l]!==void 0&&(i[l]=n[l]),i),r);return s}function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ES.apply(null,arguments)}function o$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function D7e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o$(Object(r),!0).forEach(function(n){R7e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R7e(t,e,r){return(e=M7e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M7e(t){var e=L7e(t,"string");return typeof e=="symbol"?e:e+""}function L7e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _u=32,U7e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Q7e(t){var{data:e,iconType:r,inactiveColor:n}=t,a=_u/2,s=_u/6,i=_u/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return v.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:_u,y2:a,className:"recharts-legend-icon"})}if(c==="line")return v.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(_u,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return v.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_u/8,"h").concat(_u,"v").concat(_u*3/4,"h").concat(-_u,"z"),className:"recharts-legend-icon"});if(v.isValidElement(e.legendIcon)){var d=D7e({},e);return delete d.legendIcon,v.cloneElement(e.legendIcon,d)}return v.createElement(RD,{fill:l,cx:a,cy:a,size:_u,sizeType:"diameter",type:c})}function V7e(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=t,l={x:0,y:0,width:_u,height:_u},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var h=d.formatter||a,A=_a({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=h?h(d.value,d,f):d.value;return v.createElement("li",ES({className:A,style:c,key:"legend-item-".concat(f)},pw(t,d,f)),v.createElement(TD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},v.createElement(Q7e,{data:d,iconType:i,inactiveColor:s})),v.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var H7e=t=>{var e=zo(t,U7e),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return v.createElement("ul",{className:"recharts-default-legend",style:s},v.createElement(V7e,ES({},e,{payload:r})))},lae={},cae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],l=n(i);a.has(l)||a.set(l,i)}return Array.from(a.values())}t.uniqBy=e})(cae);var MD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(MD);var uae={},L4={},dae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(dae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dae;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(L4);var fae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(fae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L4,r=fae;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(uae);var Aae={},hae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D4;function r(n){return function(a){return e.get(a,n)}}t.property=r})(hae);var mae={},LD={},pae={},UD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(UD);var QD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(QD);var VD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(VD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD,r=QD,n=VD;function a(d,f,h){return typeof h!="function"?a(d,f,()=>{}):s(d,f,function A(m,p,g,x,y,b){const w=h(m,p,g,x,y,b);return w!==void 0?!!w:s(m,p,A,b)},new Map)}function s(d,f,h,A){if(f===d)return!0;switch(typeof f){case"object":return i(d,f,h,A);case"function":return Object.keys(f).length>0?s(d,{...f},h,A):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function i(d,f,h,A){if(f==null)return!0;if(Array.isArray(f))return c(d,f,h,A);if(f instanceof Map)return l(d,f,h,A);if(f instanceof Set)return u(d,f,h,A);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(A!=null&&A.has(f))return A.get(f)===d;A==null||A.set(f,d);try{for(let p=0;p<m.length;p++){const g=m[p];if(!r.isPrimitive(d)&&!(g in d)||f[g]===void 0&&d[g]!==void 0||f[g]===null&&d[g]!==null||!h(d[g],f[g],g,d,f,A))return!1}return!0}finally{A==null||A.delete(f)}}function l(d,f,h,A){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const g=d.get(m);if(h(g,p,m,d,f,A)===!1)return!1}return!0}function c(d,f,h,A){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const g=f[p];let x=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(h(b,g,p,d,f,A)&&(w=!0),w){m.add(y),x=!0;break}}if(!x)return!1}return!0}function u(d,f,h,A){return f.size===0?!0:d instanceof Set?c([...d],[...f],h,A):!1}t.isMatchWith=a,t.isSetMatch=u})(pae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pae;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(LD);var gae={},HD={},xae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(xae);var $D={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})($D);var KD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",A="[object Object]",m="[object Error]",p="[object DataView]",g="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",E="[object BigInt64Array]",S="[object Float32Array]",O="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=h,t.arrayTag=d,t.bigInt64ArrayTag=E,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=S,t.float64ArrayTag=O,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=A,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=i,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=g,t.uint8ClampedArrayTag=x})(KD);var vae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(vae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xae,r=$D,n=KD,a=QD,s=vae;function i(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,A=new Map,m=void 0){const p=m==null?void 0:m(d,f,h,A);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(A.has(d))return A.get(d);if(Array.isArray(d)){const g=new Array(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return Object.hasOwn(d,"index")&&(g.index=d.index),Object.hasOwn(d,"input")&&(g.input=d.input),g}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const g=new RegExp(d.source,d.flags);return g.lastIndex=d.lastIndex,g}if(d instanceof Map){const g=new Map;A.set(d,g);for(const[x,y]of d)g.set(x,l(y,x,h,A,m));return g}if(d instanceof Set){const g=new Set;A.set(d,g);for(const x of d)g.add(l(x,void 0,h,A,m));return g}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const g=new(Object.getPrototypeOf(d)).constructor(d.length);A.set(d,g);for(let x=0;x<d.length;x++)g[x]=l(d[x],x,h,A,m);return g}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const g=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return A.set(d,g),c(g,d,h,A,m),g}if(typeof File<"u"&&d instanceof File){const g=new File([d],d.name,{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(typeof Blob<"u"&&d instanceof Blob){const g=new Blob([d],{type:d.type});return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Error){const g=new d.constructor;return A.set(d,g),g.message=d.message,g.name=d.name,g.stack=d.stack,g.cause=d.cause,c(g,d,h,A,m),g}if(d instanceof Boolean){const g=new Boolean(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof Number){const g=new Number(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(d instanceof String){const g=new String(d.valueOf());return A.set(d,g),c(g,d,h,A,m),g}if(typeof d=="object"&&u(d)){const g=Object.create(Object.getPrototypeOf(d));return A.set(d,g),c(g,d,h,A,m),g}return d}function c(d,f,h=d,A,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let g=0;g<p.length;g++){const x=p[g],y=Object.getOwnPropertyDescriptor(d,x);(y==null||y.writable)&&(d[x]=l(f[x],x,h,A,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=i,t.cloneDeepWithImpl=l,t.copyProperties=c})(HD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(gae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD,r=gae;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(mae);var yae={},bae={},wae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HD,r=KD;function n(a,s){return e.cloneDeepWith(a,(i,l,c,u)=>{const d=s==null?void 0:s(i,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(wae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wae;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(bae);var Nae={},GD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(GD);var Cae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$D;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Cae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD,r=GD,n=Cae,a=M4;function s(i,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(i==null?void 0:i[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(Nae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD,r=R4,n=bae,a=D4,s=Nae;function i(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=i})(yae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=hae,n=mae,a=yae;function s(i){if(i==null)return e.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}t.iteratee=s})(Aae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cae,r=MD,n=uae,a=Aae;function s(i,l=r.identity){return n.isArrayLikeObject(i)?e.uniqBy(Array.from(i),a.iteratee(l)):[]}t.uniqBy=s})(lae);var $7e=lae.uniqBy;const l$=qA($7e);function _ae(t,e,r){return e===!0?l$(t,r):typeof e=="function"?l$(t,e):t}var Eae={exports:{}},Sae={},Iae={exports:{}},jae={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=v;function K7e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var G7e=typeof Object.is=="function"?Object.is:K7e,q7e=fv.useState,z7e=fv.useEffect,W7e=fv.useLayoutEffect,X7e=fv.useDebugValue;function Y7e(t,e){var r=e(),n=q7e({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return W7e(function(){a.value=r,a.getSnapshot=e,pB(a)&&s({inst:a})},[t,r,e]),z7e(function(){return pB(a)&&s({inst:a}),t(function(){pB(a)&&s({inst:a})})},[t]),X7e(r),r}function pB(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!G7e(t,r)}catch{return!0}}function J7e(t,e){return e()}var Z7e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J7e:Y7e;jae.useSyncExternalStore=fv.useSyncExternalStore!==void 0?fv.useSyncExternalStore:Z7e;Iae.exports=jae;var e9e=Iae.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U4=v,t9e=e9e;function r9e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var n9e=typeof Object.is=="function"?Object.is:r9e,a9e=t9e.useSyncExternalStore,s9e=U4.useRef,i9e=U4.useEffect,o9e=U4.useMemo,l9e=U4.useDebugValue;Sae.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=s9e(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=o9e(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,n9e(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=a9e(t,s[0],s[1]);return i9e(function(){i.hasValue=!0,i.value=l},[l]),l9e(l),l};Eae.exports=Sae;var c9e=Eae.exports,qD=v.createContext(null),u9e=t=>t,Ka=()=>{var t=v.useContext(qD);return t?t.store.dispatch:u9e},Q_=()=>{},d9e=()=>Q_,f9e=(t,e)=>t===e;function Gr(t){var e=v.useContext(qD);return c9e.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:d9e,e?e.store.getState:Q_,e?e.store.getState:Q_,e?t:Q_,f9e)}function A9e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function h9e(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function m9e(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var c$=t=>Array.isArray(t)?t:[t];function p9e(t){const e=Array.isArray(t[0])?t[0]:t;return m9e(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function g9e(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var x9e=class{constructor(t){this.value=t}deref(){return this.value}},v9e=typeof WeakRef<"u"?WeakRef:x9e,y9e=0,u$=1;function RC(){return{s:y9e,v:void 0,o:null,p:null}}function Bae(t,e={}){let r=RC();const{resultEqualityCheck:n}=e;let a,s=0;function i(){var f;let l=r;const{length:c}=arguments;for(let h=0,A=c;h<A;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const g=p.get(m);g===void 0?(l=RC(),p.set(m,l)):l=g}else{let p=l.p;p===null&&(l.p=p=new Map);const g=p.get(m);g===void 0?(l=RC(),p.set(m,l)):l=g}}const u=l;let d;if(l.s===u$)d=l.v;else if(d=t.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new v9e(d):d}return u.s=u$,u.v=d,d}return i.clearCache=()=>{r=RC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function b9e(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,i=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),A9e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:A=Bae,argsMemoizeOptions:m=[]}=d,p=c$(h),g=c$(m),x=p9e(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=A(function(){i++;const j=g9e(x,arguments);return l=y.apply(null,j),l},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:x,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:A})};return Object.assign(n,{withTypes:()=>n}),n}var Ut=b9e(Bae),w9e=Object.assign((t,e=Ut)=>{h9e(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((i,l,c)=>(i[r[c]]=l,i),{}))},{withTypes:()=>w9e}),Pae={},Tae={},kae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=e(n),l=e(a);if(i===l&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-i:i-l}return 0};t.compareValues=r})(kae);var Fae={},zD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(zD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}t.isKey=a})(Fae);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kae,r=Fae,n=M4;function a(s,i,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(A=>String(A));const u=(A,m)=>{let p=A;for(let g=0;g<m.length&&p!=null;++g)p=p[m[g]];return p},d=(A,m)=>m==null||A==null?m:typeof A=="object"&&"key"in A?Object.hasOwn(m,A.key)?m[A.key]:u(m,A.path):typeof A=="function"?A(m):Array.isArray(A)?u(m,A):typeof m=="object"?m[A]:m,f=i.map(A=>(Array.isArray(A)&&A.length===1&&(A=A[0]),A==null||typeof A=="function"||Array.isArray(A)||r.isKey(A)?A:{key:A,path:n.toPath(A)}));return s.map(A=>({original:A,criteria:f.map(m=>d(m,A))})).slice().sort((A,m)=>{for(let p=0;p<f.length;p++){const g=e.compareValues(A.criteria[p],m.criteria[p],l[p]);if(g!==0)return g}return 0}).map(A=>A.original)}t.orderBy=a})(Tae);var Oae={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),i=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}t.flatten=e})(Oae);var WD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD,r=L4,n=UD,a=VD;function s(i,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],i):!1}t.isIterateeCall=s})(WD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tae,r=Oae,n=WD;function a(s,...i){const l=i.length;return l>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:l>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),e.orderBy(s,r.flatten(i),["asc"])}t.sortBy=a})(Pae);var N9e=Pae.sortBy;const Q4=qA(N9e);var Dae=t=>t.legend.settings,C9e=t=>t.legend.size,_9e=t=>t.legend.payload,E9e=Ut([_9e,Dae],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?Q4(n,r):n});function S9e(){return Gr(E9e)}var MC=1;function Rae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-e.height)>MC||Math.abs(i.left-e.left)>MC||Math.abs(i.top-e.top)>MC||Math.abs(i.width-e.width)>MC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function To(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var I9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",d$=I9e,gB=()=>Math.random().toString(36).substring(7).split("").join("."),j9e={INIT:`@@redux/INIT${gB()}`,REPLACE:`@@redux/REPLACE${gB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gB()}`},SS=j9e;function XD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Mae(t,e,r){if(typeof t!="function")throw new Error(To(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(To(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(To(1));return r(Mae)(t,e)}let n=t,a=e,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((g,x)=>{i.set(x,g)}))}function d(){if(c)throw new Error(To(3));return a}function f(g){if(typeof g!="function")throw new Error(To(4));if(c)throw new Error(To(5));let x=!0;u();const y=l++;return i.set(y,g),function(){if(x){if(c)throw new Error(To(6));x=!1,u(),i.delete(y),s=null}}}function h(g){if(!XD(g))throw new Error(To(7));if(typeof g.type>"u")throw new Error(To(8));if(typeof g.type!="string")throw new Error(To(17));if(c)throw new Error(To(9));try{c=!0,a=n(a,g)}finally{c=!1}return(s=i).forEach(y=>{y()}),g}function A(g){if(typeof g!="function")throw new Error(To(10));n=g,h({type:SS.REPLACE})}function m(){const g=f;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(To(11));function y(){const w=x;w.next&&w.next(d())}return y(),{unsubscribe:g(y)}},[d$](){return this}}}return h({type:SS.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:A,[d$]:m}}function B9e(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:SS.INIT})>"u")throw new Error(To(12));if(typeof r(void 0,{type:SS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(To(13))})}function Lae(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const i=e[s];typeof t[i]=="function"&&(r[i]=t[i])}const n=Object.keys(r);let a;try{B9e(r)}catch(s){a=s}return function(i={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],A=i[f],m=h(A,l);if(typeof m>"u")throw l&&l.type,new Error(To(14));u[f]=m,c=c||m!==A}return c=c||n.length!==Object.keys(i).length,c?u:i}}function IS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function P9e(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(To(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(i));return s=IS(...l)(a.dispatch),{...a,dispatch:s}}}function Uae(t){return XD(t)&&"type"in t&&typeof t.type=="string"}var Qae=Symbol.for("immer-nothing"),f$=Symbol.for("immer-draftable"),$l=Symbol.for("immer-state");function bd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $c=Object,Av=$c.getPrototypeOf,jS="constructor",V4="prototype",wk="configurable",BS="enumerable",V_="writable",g2="value",QA=t=>!!t&&!!t[$l];function Md(t){var e;return t?Vae(t)||$4(t)||!!t[f$]||!!((e=t[jS])!=null&&e[f$])||K4(t)||G4(t):!1}var T9e=$c[V4][jS].toString(),A$=new WeakMap;function Vae(t){if(!t||!YD(t))return!1;const e=Av(t);if(e===null||e===$c[V4])return!0;const r=$c.hasOwnProperty.call(e,jS)&&e[jS];if(r===Object)return!0;if(!sx(r))return!1;let n=A$.get(r);return n===void 0&&(n=Function.toString.call(r),A$.set(r,n)),n===T9e}function H4(t,e,r=!0){gw(t)===0?(r?Reflect.ownKeys(t):$c.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function gw(t){const e=t[$l];return e?e.type_:$4(t)?1:K4(t)?2:G4(t)?3:0}var h$=(t,e,r=gw(t))=>r===2?t.has(e):$c[V4].hasOwnProperty.call(t,e),Nk=(t,e,r=gw(t))=>r===2?t.get(e):t[e],PS=(t,e,r,n=gw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function k9e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var $4=Array.isArray,K4=t=>t instanceof Map,G4=t=>t instanceof Set,YD=t=>typeof t=="object",sx=t=>typeof t=="function",xB=t=>typeof t=="boolean";function F9e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var oA=t=>t.copy_||t.base_,JD=t=>t.modified_?t.copy_:t.base_;function Ck(t,e){if(K4(t))return new Map(t);if(G4(t))return new Set(t);if($4(t))return Array[V4].slice.call(t);const r=Vae(t);if(e===!0||e==="class_only"&&!r){const n=$c.getOwnPropertyDescriptors(t);delete n[$l];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l[V_]===!1&&(l[V_]=!0,l[wk]=!0),(l.get||l.set)&&(n[i]={[wk]:!0,[V_]:!0,[BS]:l[BS],[g2]:t[i]})}return $c.create(Av(t),n)}else{const n=Av(t);if(n!==null&&r)return{...t};const a=$c.create(n);return $c.assign(a,t)}}function ZD(t,e=!1){return q4(t)||QA(t)||!Md(t)||(gw(t)>1&&$c.defineProperties(t,{set:LC,add:LC,clear:LC,delete:LC}),$c.freeze(t),e&&H4(t,(r,n)=>{ZD(n,!0)},!1)),t}function O9e(){bd(2)}var LC={[g2]:O9e};function q4(t){return t===null||!YD(t)?!0:$c.isFrozen(t)}var TS="MapSet",_k="Patches",m$="ArrayMethods",Hae={};function Up(t){const e=Hae[t];return e||bd(0,t),e}var p$=t=>!!Hae[t],x2,$ae=()=>x2,D9e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:p$(TS)?Up(TS):void 0,arrayMethodsPlugin_:p$(m$)?Up(m$):void 0});function g$(t,e){e&&(t.patchPlugin_=Up(_k),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ek(t){Sk(t),t.drafts_.forEach(R9e),t.drafts_=null}function Sk(t){t===x2&&(x2=t.parent_)}var x$=t=>x2=D9e(x2,t);function R9e(t){const e=t[$l];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function v$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[$l].modified_&&(Ek(e),bd(4)),Md(t)&&(t=y$(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[$l].base_,t,e)}else t=y$(e,r);return M9e(e,t,!0),Ek(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Qae?t:void 0}function y$(t,e){if(q4(e))return e;const r=e[$l];if(!r)return kS(e,t.handledSet_,t);if(!z4(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);qae(r,t)}return r.copy_}function M9e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ZD(e,r)}function Kae(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var z4=(t,e)=>t.scope_===e,L9e=[];function Gae(t,e,r,n){const a=oA(t),s=t.type_;if(n!==void 0&&Nk(a,n,s)===e){PS(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;H4(a,(c,u)=>{if(QA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const i=t.draftLocations_.get(e)??L9e;for(const l of i)PS(a,l,r,s)}function U9e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!z4(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const i=JD(s);Gae(t,s.draft_??s,i,r),qae(s,a)})}function qae(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Kae(t)}}function Q9e(t,e,r){const{scope_:n}=t;if(QA(r)){const a=r[$l];z4(a,n)&&a.callbacks_.push(function(){H_(t);const i=JD(a);Gae(t,r,i,e)})}else Md(r)&&t.callbacks_.push(function(){const s=oA(t);t.type_===3?s.has(r)&&kS(r,n.handledSet_,n):Nk(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&kS(Nk(t.copy_,e,t.type_),n.handledSet_,n)})}function kS(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||QA(t)||e.has(t)||!Md(t)||q4(t)||(e.add(t),H4(t,(n,a)=>{if(QA(a)){const s=a[$l];if(z4(s,r)){const i=JD(s);PS(t,n,i,t.type_),Kae(s)}}else Md(a)&&kS(a,e,r)})),t}function V9e(t,e){const r=$4(t),n={type_:r?1:0,scope_:e?e.scope_:$ae(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=FS;r&&(a=[n],s=v2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,[l,n]}var FS={get(t,e){if(e===$l)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=oA(t);if(!h$(a,e,t.type_))return H9e(t,a,e);const s=a[e];if(t.finalized_||!Md(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&F9e(e))return s;if(s===vB(t.base_,e)){H_(t);const i=t.type_===1?+e:e,l=jk(t.scope_,s,t,i);return t.copy_[i]=l}return s},has(t,e){return e in oA(t)},ownKeys(t){return Reflect.ownKeys(oA(t))},set(t,e,r){const n=zae(oA(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=vB(oA(t),e),s=a==null?void 0:a[$l];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(k9e(r,a)&&(r!==void 0||h$(t.base_,e,t.type_)))return!0;H_(t),Ik(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),Q9e(t,e,r)),!0},deleteProperty(t,e){return H_(t),vB(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Ik(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=oA(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[V_]:!0,[wk]:t.type_!==1||e!=="length",[BS]:n[BS],[g2]:r[e]}},defineProperty(){bd(11)},getPrototypeOf(t){return Av(t.base_)},setPrototypeOf(){bd(12)}},v2={};for(let t in FS){let e=FS[t];v2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}v2.deleteProperty=function(t,e){return v2.set.call(this,t,e,void 0)};v2.set=function(t,e,r){return FS.set.call(this,t[0],e,r,t[0])};function vB(t,e){const r=t[$l];return(r?oA(r):t)[e]}function H9e(t,e,r){var a;const n=zae(e,r);return n?g2 in n?n[g2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function zae(t,e){if(!(e in t))return;let r=Av(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Av(r)}}function Ik(t){t.modified_||(t.modified_=!0,t.parent_&&Ik(t.parent_))}function H_(t){t.copy_||(t.assigned_=new Map,t.copy_=Ck(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var $9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(sx(r)&&!sx(n)){const i=n;n=r;const l=this;return function(u=i,...d){return l.produce(u,f=>n.call(this,f,...d))}}sx(n)||bd(6),a!==void 0&&!sx(a)&&bd(7);let s;if(Md(r)){const i=x$(this),l=jk(i,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?Ek(i):Sk(i)}return g$(i,a),v$(s,i)}else if(!r||!YD(r)){if(s=n(r),s===void 0&&(s=r),s===Qae&&(s=void 0),this.autoFreeze_&&ZD(s,!0),a){const i=[],l=[];Up(_k).generateReplacementPatches_(r,s,{patches_:i,inversePatches_:l}),a(i,l)}return s}else bd(1,r)},this.produceWithPatches=(r,n)=>{if(sx(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},xB(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),xB(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),xB(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Md(e)||bd(8),QA(e)&&(e=Pd(e));const r=x$(this),n=jk(r,e,void 0);return n[$l].isManual_=!0,Sk(r),n}finishDraft(e,r){const n=e&&e[$l];(!n||!n.isManual_)&&bd(9);const{scope_:a}=n;return g$(a,r),v$(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Up(_k).applyPatches_;return QA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function jk(t,e,r,n){const[a,s]=K4(e)?Up(TS).proxyMap_(e,r):G4(e)?Up(TS).proxySet_(e,r):V9e(e,r);return((r==null?void 0:r.scope_)??$ae()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?U9e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function Pd(t){return QA(t)||bd(10,t),Wae(t)}function Wae(t){if(!Md(t)||q4(t))return t;const e=t[$l];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ck(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Ck(t,!0);return H4(r,(a,s)=>{PS(r,a,Wae(s))},n),e&&(e.finalized_=!1),r}var K9e=new $9e,Xae=K9e.produce;function Yae(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var G9e=Yae(),q9e=Yae,z9e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?IS:IS.apply(null,arguments)};function zu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Gc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Uae(n)&&n.type===t,r}var Jae=class Cy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cy.prototype)}static get[Symbol.species](){return Cy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Cy(...e[0].concat(this)):new Cy(...e.concat(this))}};function b$(t){return Md(t)?Xae(t,()=>{}):t}function UC(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function W9e(t){return typeof t=="boolean"}var X9e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let i=new Jae;return r&&(W9e(r)?i.push(G9e):i.push(q9e(r.extraArgument))),i},Zae="RTK_autoBatch",cs=()=>t=>({payload:t,meta:{[Zae]:!0}}),w$=t=>e=>{setTimeout(e,t)},ese=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,i=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:w$(10):t.type==="callback"?t.queueNotification:w$(t.timeout),u=()=>{i=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Zae]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},Y9e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Jae(t);return n&&a.push(ese(typeof n=="object"?n:void 0)),a};function J9e(t){const e=X9e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(XD(r))l=Lae(r);else throw new Error(Gc(1));let c;typeof n=="function"?c=n(e):c=e();let u=IS;a&&(u=z9e({trace:!1,...typeof a=="object"&&a}));const d=P9e(...c),f=Y9e(d);let h=typeof i=="function"?i(f):f();const A=u(...h);return Mae(l,s,A)}function tse(t){const e={},r=[];let n;const a={addCase(s,i){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Gc(28));if(l in e)throw new Error(Gc(29));return e[l]=i,a},addAsyncThunk(s,i){return i.pending&&(e[s.pending.type]=i.pending),i.rejected&&(e[s.rejected.type]=i.rejected),i.fulfilled&&(e[s.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:s.settled,reducer:i.settled}),a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function Z9e(t){return typeof t=="function"}function eQe(t,e){let[r,n,a]=tse(e),s;if(Z9e(t))s=()=>b$(t());else{const l=b$(t);s=()=>l}function i(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(QA(d)){const A=f(d,c);return A===void 0?d:A}else{if(Md(d))return Xae(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return i.getInitialState=s,i}var tQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rQe=(t=21)=>{let e="",r=t;for(;r--;)e+=tQe[Math.random()*64|0];return e},nQe=Symbol.for("rtk-slice-createasyncthunk");function aQe(t,e){return`${t}/${e}`}function sQe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[nQe];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Gc(11));const l=(typeof a.reducers=="function"?a.reducers(oQe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(Gc(12));if(I in u.sliceCaseReducersByType)throw new Error(Gc(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:aQe(s,w),createNotation:typeof a.reducers=="function"};cQe(j)?dQe(I,j,d,e):lQe(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?tse(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return eQe(a.initialState,E=>{for(let S in _)E.addCase(S,_[S]);for(let S of u.sliceMatchers)E.addMatcher(S.matcher,S.reducer);for(let S of j)E.addMatcher(S.matcher,S.reducer);I&&E.addDefaultCase(I)})}const h=w=>w,A=new Map,m=new WeakMap;let p;function g(w,j){return p||(p=f()),p(w,j)}function x(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(E){let S=E[w];return typeof S>"u"&&j&&(S=UC(m,I,x)),S}function _(E=h){const S=UC(A,j,()=>new WeakMap);return UC(S,E,()=>{const O={};for(const[P,T]of Object.entries(a.selectors??{}))O[P]=iQe(T,E,()=>UC(m,E,x),j);return O})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:x,...y(i),injectInto(w,{reducerPath:j,...I}={}){const _=j??i;return w.inject({reducerPath:_,reducer:g},I),{...b,...y(_,!0)}}};return b}}function iQe(t,e,r,n){function a(s,...i){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return a.unwrapped=t,a}var vc=sQe();function oQe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function lQe({type:t,reducerName:e,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!uQe(n))throw new Error(Gc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,i?zu(t,i):zu(t))}function cQe(t){return t._reducerDefinitionType==="asyncThunk"}function uQe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function dQe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Gc(18));const{payloadCreator:s,fulfilled:i,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),i&&n.addCase(f.fulfilled,i),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:i||QC,pending:l||QC,rejected:c||QC,settled:u||QC})}function QC(){}var fQe="task",rse="listener",nse="completed",eR="cancelled",AQe=`task-${eR}`,hQe=`task-${nse}`,Bk=`${rse}-${eR}`,mQe=`${rse}-${nse}`,W4=class{constructor(t){na(this,"name","TaskAbortError");na(this,"message");this.code=t,this.message=`${fQe} ${eR} (reason: ${t})`}},tR=(t,e)=>{if(typeof t!="function")throw new TypeError(Gc(32))},OS=()=>{},ase=(t,e=OS)=>(t.catch(e),t),sse=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),fp=t=>{if(t.aborted)throw new W4(t.reason)};function ise(t,e){let r=OS;return new Promise((n,a)=>{const s=()=>a(new W4(t.reason));if(t.aborted){s();return}r=sse(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=OS})}var pQe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof W4?"cancelled":"rejected",error:r}}finally{e==null||e()}},DS=t=>e=>ase(ise(t,e).then(r=>(fp(t),r))),ose=t=>{const e=DS(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Vx}=Object,N$={},X4="listenerMiddleware",gQe=(t,e)=>{const r=n=>sse(t,()=>n.abort(t.reason));return(n,a)=>{tR(n);const s=new AbortController;r(s);const i=pQe(async()=>{fp(t),fp(s.signal);const l=await n({pause:DS(s.signal),delay:ose(s.signal),signal:s.signal});return fp(s.signal),l},()=>s.abort(hQe));return a!=null&&a.autoJoin&&e.push(i.catch(OS)),{result:DS(t)(i),cancel(){s.abort(AQe)}}}},xQe=(t,e)=>{const r=async(n,a)=>{fp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await ise(e,Promise.race(l));return fp(e),c}finally{s()}};return(n,a)=>ase(r(n,a))},lse=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=zu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Gc(21));return tR(s),{predicate:a,type:e,effect:s}},cse=Vx(t=>{const{type:e,predicate:r,effect:n}=lse(t);return{id:rQe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Gc(22))}}},{withTypes:()=>cse}),C$=(t,e)=>{const{type:r,effect:n,predicate:a}=lse(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Pk=t=>{t.pending.forEach(e=>{e.abort(Bk)})},vQe=(t,e)=>()=>{for(const r of e.keys())Pk(r);t.clear()},_$=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},use=Vx(zu(`${X4}/add`),{withTypes:()=>use}),yQe=zu(`${X4}/removeAll`),dse=Vx(zu(`${X4}/remove`),{withTypes:()=>dse}),bQe=(...t)=>{console.error(`${X4}/error`,...t)},xw=(t={})=>{const e=new Map,r=new Map,n=A=>{const m=r.get(A)??0;r.set(A,m+1)},a=A=>{const m=r.get(A)??1;m===1?r.delete(A):r.set(A,m-1)},{extra:s,onError:i=bQe}=t;tR(i);const l=A=>(A.unsubscribe=()=>e.delete(A.id),e.set(A.id,A),m=>{A.unsubscribe(),m!=null&&m.cancelActive&&Pk(A)}),c=A=>{const m=C$(e,A)??cse(A);return l(m)};Vx(c,{withTypes:()=>c});const u=A=>{const m=C$(e,A);return m&&(m.unsubscribe(),A.cancelActive&&Pk(m)),!!m};Vx(u,{withTypes:()=>u});const d=async(A,m,p,g)=>{const x=new AbortController,y=xQe(c,x.signal),b=[];try{A.pending.add(x),n(A),await Promise.resolve(A.effect(m,Vx({},p,{getOriginalState:g,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:ose(x.signal),pause:DS(x.signal),extra:s,signal:x.signal,fork:gQe(x.signal,b),unsubscribe:A.unsubscribe,subscribe:()=>{e.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((w,j,I)=>{w!==x&&(w.abort(Bk),I.delete(w))})},cancel:()=>{x.abort(Bk),A.pending.delete(x)},throwIfCancelled:()=>{fp(x.signal)}})))}catch(w){w instanceof W4||_$(i,w,{raisedBy:"effect"})}finally{await Promise.all(b),x.abort(mQe),a(A),A.pending.delete(x)}},f=vQe(e,r);return{middleware:A=>m=>p=>{if(!Uae(p))return m(p);if(use.match(p))return c(p.payload);if(yQe.match(p)){f();return}if(dse.match(p))return u(p.payload);let g=A.getState();const x=()=>{if(g===N$)throw new Error(Gc(23));return g};let y;try{if(y=m(p),e.size>0){const b=A.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,g)}catch(_){I=!1,_$(i,_,{raisedBy:"predicate"})}I&&d(j,p,A,x)}}}finally{g=N$}return y},startListening:c,stopListening:u,clearListeners:f}};function Gc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var wQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},fse=vc({name:"chartLayout",initialState:wQe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:NQe,setLayout:CQe,setChartSize:_Qe,setScale:EQe}=fse.actions,SQe=fse.reducer;function Ase(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function ks(t){return Number.isFinite(t)}function z0(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function E$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _x(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E$(Object(r),!0).forEach(function(n){IQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IQe(t,e,r){return(e=jQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jQe(t){var e=BQe(t,"string");return typeof e=="symbol"?e:e+""}function BQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ts(t,e,r){return vo(t)||vo(e)?r:Bf(e)?Lp(t,e,r):typeof e=="function"?e(t):r}var PQe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:l}=e;if((l==="vertical"||l==="horizontal"&&i==="middle")&&s!=="center"&&Xr(t[s]))return _x(_x({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&i!=="middle"&&Xr(t[i]))return _x(_x({},t),{},{[i]:t[i]+(a||0)})}return t},ug=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",S$=1e-4,TQe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-S$,s=Math.max(n[0],n[1])+S$,i=t(e[0]),l=t(e[r-1]);(i<a||i>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},kQe=(t,e)=>{if(!e||e.length!==2||!Xr(e[0])||!Xr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Xr(t[0])||t[0]<r)&&(a[0]=r),(!Xr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},FQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],h=jf(d)?f:d;h>=0?(u[0]=s,u[1]=s+h,s=d):(u[0]=i,u[1]=i+h,i=d)}}}},OQe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,i=0;i<r;++i){var l=t[i],c=l==null?void 0:l[a];if(c!=null){var u=jf(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},DQe={sign:FQe,expand:f7e,none:Mp,silhouette:A7e,wiggle:h7e,positive:OQe},RQe=(t,e,r)=>{var n,a=(n=DQe[r])!==null&&n!==void 0?n:Mp,s=d7e().keys(e).value((l,c)=>Number(ts(l,c,0))).order(yk).offset(a),i=s(t);return i.forEach((l,c)=>{l.forEach((u,d)=>{var f=ts(t[d],e[c],0);Array.isArray(f)&&f.length===2&&Xr(f[0])&&Xr(f[1])&&(u[0]=f[0],u[1]=f[1])})}),i};function MQe(t){return t==null?void 0:String(t)}var I$=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:i}=t;if(e.type==="category")return r[i]?r[i].coordinate+n:null;var l=ts(s,e.dataKey,e.scale.domain()[i]);return vo(l)?null:e.scale(l)-a/2+n},LQe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},UQe=t=>{var e=t.flat(2).filter(Xr);return[Math.min(...e),Math.max(...e)]},QQe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],VQe=(t,e,r)=>{if(t!=null)return QQe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:i}=s,l=i.reduce((c,u)=>{var d=Ase(u,e,r),f=UQe(d);return!ks(f[0])||!ks(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},j$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,B$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RS=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=Q4(e,d=>d.coordinate),s=1/0,i=1,l=a.length;i<l;i++){var c=a[i],u=a[i-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function P$(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return _x(_x({},e),{},{dataKey:r,payload:n,value:a,name:s})}function Y4(t,e){if(t)return String(t);if(typeof e=="string")return e}var HQe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},$Qe=(t,e)=>e==="centric"?t.angle:t.radius,nh=t=>t.layout.width,ah=t=>t.layout.height,KQe=t=>t.layout.scale,hse=t=>t.layout.margin,J4=Ut(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Z4=Ut(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),mse="data-recharts-item-index",pse="data-recharts-item-id",vw=60;function T$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(r),!0).forEach(function(n){GQe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GQe(t,e,r){return(e=qQe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qQe(t){var e=zQe(t,"string");return typeof e=="symbol"?e:e+""}function zQe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WQe=t=>t.brush.height;function XQe(t){var e=Z4(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:vw;return r+a}return r},0)}function YQe(t){var e=Z4(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:vw;return r+a}return r},0)}function JQe(t){var e=J4(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function ZQe(t){var e=J4(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Gi=Ut([nh,ah,hse,WQe,XQe,YQe,JQe,ZQe,Dae,C9e],(t,e,r,n,a,s,i,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+i,bottom:(r.bottom||0)+l},h=VC(VC({},f),d),A=h.bottom;h.bottom+=n,h=PQe(h,c,u);var m=t-h.left-h.right,p=e-h.top-h.bottom;return VC(VC({brushBottom:A},h),{},{width:Math.max(m,0),height:Math.max(p,0)})}),eVe=Ut(Gi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),rR=Ut(nh,ah,(t,e)=>({x:0,y:0,width:t,height:e})),tVe=v.createContext(null),eu=()=>v.useContext(tVe)!=null,e3=t=>t.brush,t3=Ut([e3,Gi,hse],(t,e,r)=>({height:t.height,x:Xr(t.x)?t.x:e.left,y:Xr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Xr(t.width)?t.width:e.width})),gse={},xse={},vse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let i,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(i,l),i=void 0,l=null)},f=()=>{u&&d(),p()};let h=null;const A=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},m=()=>{h!==null&&(clearTimeout(h),h=null)},p=()=>{m(),i=void 0,l=null},g=()=>{d()},x=function(...y){if(a!=null&&a.aborted)return;i=this,l=y;const b=h==null;A(),c&&b&&d()};return x.schedule=A,x.cancel=p,x.flush=g,a==null||a.addEventListener("abort",p,{once:!0}),x}t.debounce=e})(vse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vse;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),A=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,p),d)},m=()=>(h.flush(),d);return A.cancel=h.cancel,A.flush=m,A}t.debounce=r})(xse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xse;function r(n,a=0,s={}){const{leading:i=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:i,maxWait:a,trailing:l})}t.throttle=r})(gse);var rVe=gse.throttle;const nVe=qA(rVe);var k$=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;console.warn(r.replace(/%s/g,()=>a[i++]))}},yse=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:i}=r,l=UA(n)?t:Number(n),c=UA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),i&&c!=null&&c>i&&(c=i)),{calculatedWidth:l,calculatedHeight:c}},aVe={width:0,height:0,overflow:"visible"},sVe={width:0,overflowX:"visible"},iVe={height:0,overflowY:"visible"},oVe={},lVe=t=>{var{width:e,height:r}=t,n=UA(e),a=UA(r);return n&&a?aVe:n?sVe:a?iVe:oVe};function cVe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Tk(){return Tk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tk.apply(null,arguments)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function O$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){uVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uVe(t,e,r){return(e=dVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dVe(t){var e=fVe(t,"string");return typeof e=="symbol"?e:e+""}function fVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bse=v.createContext({width:-1,height:-1});function AVe(t){return z0(t.width)&&z0(t.height)}function wse(t){var{children:e,width:r,height:n}=t,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return AVe(a)?v.createElement(bse.Provider,{value:a},e):null}var nR=()=>v.useContext(bse),hVe=v.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:i=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:A,style:m={}}=t,p=v.useRef(null),g=v.useRef();g.current=A,v.useImperativeHandle(e,()=>p.current);var[x,y]=v.useState({containerWidth:n.width,containerHeight:n.height}),b=v.useCallback((E,S)=>{y(O=>{var P=Math.round(E),T=Math.round(S);return O.containerWidth===P&&O.containerHeight===T?O:{containerWidth:P,containerHeight:T}})},[]);v.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return mw;var E=T=>{var F,{width:J,height:ge}=T[0].contentRect;b(J,ge),(F=g.current)===null||F===void 0||F.call(g,J,ge)};d>0&&(E=nVe(E,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(E),{width:O,height:P}=p.current.getBoundingClientRect();return b(O,P),S.observe(p.current),()=>{S.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=x;k$(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=yse(w,j,{width:a,height:s,aspect:r,maxHeight:c});return k$(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,i,l,r),v.createElement("div",{id:f?"".concat(f):void 0,className:_a("recharts-responsive-container",h),style:O$(O$({},m),{},{width:a,height:s,minWidth:i,minHeight:l,maxHeight:c}),ref:p},v.createElement("div",{style:lVe({width:a,height:s})},v.createElement(wse,{width:I,height:_},u)))}),D$=v.forwardRef((t,e)=>{var r=nR();if(z0(r.width)&&z0(r.height))return t.children;var{width:n,height:a}=cVe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:i}=yse(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Xr(s)&&Xr(i)?v.createElement(wse,{width:s,height:i},t.children):v.createElement(hVe,Tk({},t,{width:n,height:a,ref:e}))});function Nse(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var r3=()=>{var t,e=eu(),r=Gr(eVe),n=Gr(t3),a=(t=Gr(e3))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},mVe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},pVe=()=>{var t;return(t=Gr(Gi))!==null&&t!==void 0?t:mVe},Cse=()=>Gr(nh),_se=()=>Gr(ah),gVe=()=>Gr(t=>t.layout.margin),ea=t=>t.layout.layoutType,yw=()=>Gr(ea),xVe=()=>{var t=yw();return t!==void 0},n3=t=>{var e=Ka(),r=eu(),{width:n,height:a}=t,s=nR(),i=n,l=a;return s&&(i=s.width>0?s.width:n,l=s.height>0?s.height:a),v.useEffect(()=>{!r&&z0(i)&&z0(l)&&e(_Qe({width:i,height:l}))},[e,r,i,l]),null},Ese=Symbol.for("immer-nothing"),R$=Symbol.for("immer-draftable"),Yc=Symbol.for("immer-state");function wd(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var y2=Object.getPrototypeOf;function hv(t){return!!t&&!!t[Yc]}function Qp(t){var e;return t?Sse(t)||Array.isArray(t)||!!t[R$]||!!((e=t.constructor)!=null&&e[R$])||bw(t)||s3(t):!1}var vVe=Object.prototype.constructor.toString(),M$=new WeakMap;function Sse(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=M$.get(r);return n===void 0&&(n=Function.toString.call(r),M$.set(r,n)),n===vVe}function MS(t,e,r=!0){a3(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function a3(t){const e=t[Yc];return e?e.type_:Array.isArray(t)?1:bw(t)?2:s3(t)?3:0}function kk(t,e){return a3(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ise(t,e,r){const n=a3(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function yVe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bw(t){return t instanceof Map}function s3(t){return t instanceof Set}function km(t){return t.copy_||t.base_}function Fk(t,e){if(bw(t))return new Map(t);if(s3(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Sse(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Yc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(y2(t),n)}else{const n=y2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function aR(t,e=!1){return i3(t)||hv(t)||!Qp(t)||(a3(t)>1&&Object.defineProperties(t,{set:HC,add:HC,clear:HC,delete:HC}),Object.freeze(t),e&&Object.values(t).forEach(r=>aR(r,!0))),t}function bVe(){wd(2)}var HC={value:bVe};function i3(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var wVe={};function Vp(t){const e=wVe[t];return e||wd(0,t),e}var b2;function jse(){return b2}function NVe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function L$(t,e){e&&(Vp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ok(t){Dk(t),t.drafts_.forEach(CVe),t.drafts_=null}function Dk(t){t===b2&&(b2=t.parent_)}function U$(t){return b2=NVe(b2,t)}function CVe(t){const e=t[Yc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Q$(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Yc].modified_&&(Ok(e),wd(4)),Qp(t)&&(t=LS(e,t),e.parent_||US(e,t)),e.patches_&&Vp("Patches").generateReplacementPatches_(r[Yc].base_,t,e.patches_,e.inversePatches_)):t=LS(e,r,[]),Ok(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Ese?t:void 0}function LS(t,e,r){if(i3(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[Yc];if(!a)return MS(e,(s,i)=>V$(t,a,e,s,i,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return US(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,l=!1;a.type_===3&&(i=new Set(s),s.clear(),l=!0),MS(i,(c,u)=>V$(t,a,s,c,u,r,l),n),US(t,s,!1),r&&t.patches_&&Vp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function V$(t,e,r,n,a,s,i){if(a==null||typeof a!="object"&&!i)return;const l=i3(a);if(!(l&&!i)){if(hv(a)){const c=s&&e&&e.type_!==3&&!kk(e.assigned_,n)?s.concat(n):void 0,u=LS(t,a,c);if(Ise(r,n,u),hv(u))t.canAutoFreeze_=!1;else return}else i&&r.add(a);if(Qp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;LS(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(bw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&US(t,a)}}}function US(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&aR(e,r)}function _Ve(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:jse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=sR;r&&(a=[n],s=w2);const{revoke:i,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=i,l}var sR={get(t,e){if(e===Yc)return t;const r=km(t);if(!kk(r,e))return EVe(t,r,e);const n=r[e];return t.finalized_||!Qp(n)?n:n===yB(t.base_,e)?(bB(t),t.copy_[e]=Mk(n,t)):n},has(t,e){return e in km(t)},ownKeys(t){return Reflect.ownKeys(km(t))},set(t,e,r){const n=Bse(km(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=yB(km(t),e),s=a==null?void 0:a[Yc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(yVe(r,a)&&(r!==void 0||kk(t.base_,e)))return!0;bB(t),Rk(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return yB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,bB(t),Rk(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=km(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){wd(11)},getPrototypeOf(t){return y2(t.base_)},setPrototypeOf(){wd(12)}},w2={};MS(sR,(t,e)=>{w2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});w2.deleteProperty=function(t,e){return w2.set.call(this,t,e,void 0)};w2.set=function(t,e,r){return sR.set.call(this,t[0],e,r,t[0])};function yB(t,e){const r=t[Yc];return(r?km(r):t)[e]}function EVe(t,e,r){var a;const n=Bse(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Bse(t,e){if(!(e in t))return;let r=y2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=y2(r)}}function Rk(t){t.modified_||(t.modified_=!0,t.parent_&&Rk(t.parent_))}function bB(t){t.copy_||(t.copy_=Fk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var SVe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&wd(6),n!==void 0&&typeof n!="function"&&wd(7);let a;if(Qp(e)){const s=U$(this),i=Mk(e,void 0);let l=!0;try{a=r(i),l=!1}finally{l?Ok(s):Dk(s)}return L$(s,n),Q$(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===Ese&&(a=void 0),this.autoFreeze_&&aR(a,!0),n){const s=[],i=[];Vp("Patches").generateReplacementPatches_(e,a,s,i),n(s,i)}return a}else wd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,c=>e(c,...l));let n,a;return[this.produce(e,r,(i,l)=>{n=i,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Qp(t)||wd(8),hv(t)&&(t=IVe(t));const e=U$(this),r=Mk(t,void 0);return r[Yc].isManual_=!0,Dk(e),r}finishDraft(t,e){const r=t&&t[Yc];(!r||!r.isManual_)&&wd(9);const{scope_:n}=r;return L$(n,e),Q$(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Vp("Patches").applyPatches_;return hv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function Mk(t,e){const r=bw(t)?Vp("MapSet").proxyMap_(t,e):s3(t)?Vp("MapSet").proxySet_(t,e):_Ve(t,e);return(e?e.scope_:jse()).drafts_.push(r),r}function IVe(t){return hv(t)||wd(10,t),Pse(t)}function Pse(t){if(!Qp(t)||i3(t))return t;const e=t[Yc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Fk(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=Fk(t,!0);return MS(r,(a,s)=>{Ise(r,a,Pse(s))},n),e&&(e.finalized_=!1),r}var jVe=new SVe;jVe.produce;var BVe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Tse=vc({name:"legend",initialState:BVe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:cs()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Pd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:cs()},removeLegendPayload:{reducer(t,e){var r=Pd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:cs()}}}),{setLegendSize:H$,setLegendSettings:PVe,addLegendPayload:kse,replaceLegendPayload:Fse,removeLegendPayload:Ose}=Tse.actions,TVe=Tse.reducer,kVe=["contextPayload"];function Lk(){return Lk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lk.apply(null,arguments)}function $$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(r),!0).forEach(function(n){FVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FVe(t,e,r){return(e=OVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OVe(t){var e=DVe(t,"string");return typeof e=="symbol"?e:e+""}function DVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RVe(t,e){if(t==null)return{};var r,n,a=MVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function MVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function LVe(t){return t.value}function UVe(t){var{contextPayload:e}=t,r=RVe(t,kVe),n=_ae(e,t.payloadUniqBy,LVe),a=mv(mv({},r),{},{payload:n});return v.isValidElement(t.content)?v.cloneElement(t.content,a):typeof t.content=="function"?v.createElement(t.content,a):v.createElement(H7e,a)}function QVe(t,e,r,n,a,s){var{layout:i,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),mv(mv({},u),d)}function VVe(t){var e=Ka();return v.useEffect(()=>{e(PVe(t))},[e,t]),null}function HVe(t){var e=Ka();return v.useEffect(()=>(e(H$(t)),()=>{e(H$({width:0,height:0}))}),[e,t]),null}function $Ve(t,e,r,n){return t==="vertical"&&Xr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var KVe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Uk(t){var e=zo(t,KVe),r=S9e(),n=OUe(),a=gVe(),{width:s,height:i,wrapperStyle:l,portal:c}=e,[u,d]=Rae([r]),f=Cse(),h=_se();if(f==null||h==null)return null;var A=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=$Ve(e.layout,i,s,A),p=c?l:mv(mv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||i||"auto"},QVe(l,e,a,f,h,u)),l),g=c??n;if(g==null||r==null)return null;var x=v.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},v.createElement(VVe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&v.createElement(HVe,{width:u.width,height:u.height}),v.createElement(UVe,Lk({},e,m,{margin:a,chartWidth:f,chartHeight:h,contextPayload:r})));return Lu.createPortal(x,g)}Uk.displayName="Legend";function Qk(){return Qk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qk.apply(null,arguments)}function K$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K$(Object(r),!0).forEach(function(n){GVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GVe(t,e,r){return(e=qVe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qVe(t){var e=zVe(t,"string");return typeof e=="symbol"?e:e+""}function zVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WVe(t){return Array.isArray(t)&&Bf(t[0])&&Bf(t[1])?t.join(" ~ "):t}var XVe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=t,A=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?Q4(s,l):s).map((_,E)=>{if(_.type==="none")return null;var S=_.formatter||i||WVe,{value:O,name:P}=_,T=O,F=P;if(S){var J=S(O,P,_,E,s);if(Array.isArray(J))[T,F]=J;else if(J!=null)T=J;else return null}var ge=wB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:ge},Bf(F)?v.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Bf(F)?v.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,v.createElement("span",{className:"recharts-tooltip-item-value"},T),v.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=wB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=wB({margin:0},a),g=!vo(d),x=g?d:"",y=_a("recharts-default-tooltip",c),b=_a("recharts-tooltip-label",u);g&&f&&s!==void 0&&s!==null&&(x=f(d,s));var w=h?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",Qk({className:y,style:m},w),v.createElement("p",{className:b,style:p},v.isValidElement(x)?x:"".concat(x)),A())},G1="recharts-tooltip-wrapper",YVe={visibility:"hidden"};function JVe(t){var{coordinate:e,translateX:r,translateY:n}=t;return _a(G1,{["".concat(G1,"-right")]:Xr(r)&&e&&Xr(e.x)&&r>=e.x,["".concat(G1,"-left")]:Xr(r)&&e&&Xr(e.x)&&r<e.x,["".concat(G1,"-bottom")]:Xr(n)&&e&&Xr(e.y)&&n>=e.y,["".concat(G1,"-top")]:Xr(n)&&e&&Xr(e.y)&&n<e.y})}function G$(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Xr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var A=d,m=h;return A<m?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var p=f+l,g=h+u;return p>g?Math.max(d,h):Math.max(f,h)}function ZVe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function eHe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:l,viewBox:c}=t,u,d,f;return i.height>0&&i.width>0&&r?(d=G$({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=G$({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=ZVe({translateX:d,translateY:f,useTranslate3d:l})):u=YVe,{cssProperties:u,cssClasses:JVe({translateX:d,translateY:f,coordinate:r})}}function q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $C(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(r),!0).forEach(function(n){Vk(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vk(t,e,r){return(e=tHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tHe(t){var e=rHe(t,"string");return typeof e=="symbol"?e:e+""}function rHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class nHe extends v.PureComponent{constructor(){super(...arguments),Vk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:A,wrapperStyle:m,lastBoundingBox:p,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=eHe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:A}),w=x?{}:$C($C({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=$C($C({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},s)}}var Dse=()=>{var t;return(t=Gr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Hk(){return Hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hk.apply(null,arguments)}function z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function W$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(r),!0).forEach(function(n){aHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aHe(t,e,r){return(e=sHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sHe(t){var e=iHe(t,"string");return typeof e=="symbol"?e:e+""}function iHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X$={curveBasisClosed:e7e,curveBasisOpen:t7e,curveBasis:ZUe,curveBumpX:LUe,curveBumpY:UUe,curveLinearClosed:r7e,curveLinear:F4,curveMonotoneX:n7e,curveMonotoneY:a7e,curveNatural:s7e,curveStep:i7e,curveStepAfter:l7e,curveStepBefore:o7e},QS=t=>ks(t.x)&&ks(t.y),Y$=t=>t.base!=null&&QS(t.base)&&QS(t),q1=t=>t.x,z1=t=>t.y,oHe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(hw(t));return(r==="curveMonotone"||r==="curveBump")&&e?X$["".concat(r).concat(e==="vertical"?"Y":"X")]:X$[r]||F4},lHe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,i=oHe(e,a),l=s?r.filter(QS):r,c;if(Array.isArray(n)){var u=r.map((A,m)=>W$(W$({},A),{},{base:n[m]}));a==="vertical"?c=DC().y(z1).x1(q1).x0(A=>A.base.x):c=DC().x(q1).y1(z1).y0(A=>A.base.y);var d=c.defined(Y$).curve(i),f=s?u.filter(Y$):u;return d(f)}a==="vertical"&&Xr(n)?c=DC().y(z1).x1(q1).x0(n):Xr(n)?c=DC().x(q1).y1(z1).y0(n):c=Gne().x(q1).y(z1);var h=c.defined(QS).curve(i);return h(l)},iR=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=yw();if((!r||!r.length)&&!n)return null;var i={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?lHe(i):n;return v.createElement("path",Hk({},If(t),B7e(t),{className:_a("recharts-curve",e),d:l===null?void 0:l,ref:a}))},cHe=["x","y","top","left","width","height","className"];function $k(){return $k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$k.apply(null,arguments)}function J$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(r),!0).forEach(function(n){dHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dHe(t,e,r){return(e=fHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fHe(t){var e=AHe(t,"string");return typeof e=="symbol"?e:e+""}function AHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hHe(t,e){if(t==null)return{};var r,n,a=mHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function mHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var pHe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),gHe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:l}=t,c=hHe(t,cHe),u=uHe({x:e,y:r,top:n,left:a,width:s,height:i},c);return!Xr(e)||!Xr(r)||!Xr(s)||!Xr(i)||!Xr(n)||!Xr(a)?null:v.createElement("path",$k({},qu(u),{className:_a("recharts-cross",l),d:pHe(e,r,s,i,n,a)}))};function xHe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function Z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(r),!0).forEach(function(n){vHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vHe(t,e,r){return(e=yHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yHe(t){var e=bHe(t,"string");return typeof e=="symbol"?e:e+""}function bHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wHe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Rse=(t,e,r)=>t.map(n=>"".concat(wHe(n)," ").concat(e,"ms ").concat(r)).join(","),NHe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),N2=(t,e)=>Object.keys(e).reduce((r,n)=>eK(eK({},r),{},{[n]:t(n,e[n])}),{});function tK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(r),!0).forEach(function(n){CHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CHe(t,e,r){return(e=_He(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _He(t){var e=EHe(t,"string");return typeof e=="symbol"?e:e+""}function EHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VS=(t,e,r)=>t+(e-t)*r,Kk=t=>{var{from:e,to:r}=t;return e!==r},Mse=(t,e,r)=>{var n=N2((a,s)=>{if(Kk(s)){var[i,l]=t(s.from,s.to,s.velocity);return Oi(Oi({},s),{},{from:i,velocity:l})}return s},e);return r<1?N2((a,s)=>Kk(s)&&n[a]!=null?Oi(Oi({},s),{},{velocity:VS(s.velocity,n[a].velocity,r),from:VS(s.from,n[a].from,r)}):s,e):Mse(t,n,r-1)};function SHe(t,e,r,n,a,s){var i,l=n.reduce((h,A)=>Oi(Oi({},h),{},{[A]:{from:t[A],velocity:0,to:e[A]}}),{}),c=()=>N2((h,A)=>A.from,l),u=()=>!Object.values(l).filter(Kk).length,d=null,f=h=>{i||(i=h);var A=h-i,m=A/r.dt;l=Mse(r,l,m),a(Oi(Oi(Oi({},t),e),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function IHe(t,e,r,n,a,s,i){var l=null,c=a.reduce((f,h)=>{var A=t[h],m=e[h];return A==null||m==null?f:Oi(Oi({},f),{},{[h]:[A,m]})},{}),u,d=f=>{u||(u=f);var h=(f-u)/n,A=N2((p,g)=>VS(...g,r(h)),c);if(s(Oi(Oi(Oi({},t),e),A)),h<1)l=i.setTimeout(d);else{var m=N2((p,g)=>VS(...g,r(1)),c);s(Oi(Oi(Oi({},t),e),m))}};return()=>(l=i.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const jHe=(t,e,r,n,a,s)=>{var i=NHe(t,e);return r==null?()=>(a(Oi(Oi({},t),e)),()=>{}):r.isStepper===!0?SHe(t,e,r,i,a,s):IHe(t,e,r,n,i,a,s)};var HS=1e-4,Lse=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Use=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),rK=(t,e)=>r=>{var n=Lse(t,e);return Use(n,r)},BHe=(t,e)=>r=>{var n=Lse(t,e),a=[...n.map((s,i)=>s*i).slice(1),0];return Use(a,r)},PHe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},THe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=PHe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},kHe=(t,e,r,n)=>{var a=rK(t,r),s=rK(e,n),i=BHe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var A=a(f)-d,m=i(f);if(Math.abs(A-d)<HS||m<HS)return s(f);f=l(f-A/m)}return s(f)};return c.isStepper=!1,c},nK=function(){return kHe(...THe(...arguments))},FHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(i,l,c)=>{var u=-(i-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-l)<HS&&Math.abs(f)<HS?[l,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},OHe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return nK(t);case"spring":return FHe();default:if(t.split("(")[0]==="cubic-bezier")return nK(t)}return typeof t=="function"?t:null};function DHe(t){var e,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var l=i,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof i=="string"&&(e=i,r(e)),typeof i=="object"&&(e=i,r(e)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>t}}class RHe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?e(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function MHe(){return DHe(new RHe)}var LHe=v.createContext(MHe);function UHe(t,e){var r=v.useContext(LHe);return v.useMemo(()=>e??r(t),[t,e,r])}var QHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),o3={isSsr:QHe()},VHe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},aK={t:0},NB={t:1};function l3(t){var e=zo(t,VHe),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!o3.isSsr:r,f=UHe(e.animationId,e.animationManager),[h,A]=v.useState(d?aK:NB),m=v.useRef(null);return v.useEffect(()=>{d||A(NB)},[d]),v.useEffect(()=>{if(!d||!n)return mw;var p=jHe(aK,NB,OHe(s),a,A,f.getTimeoutController()),g=()=>{m.current=p()};return f.start([c,i,g,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,i,c,l,f]),u(h.t)}function c3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(p2(e)),n=v.useRef(t);return n.current!==t&&(r.current=p2(e),n.current=t),r.current}var HHe=["radius"],$He=["radius"],sK,iK,oK,lK,cK,uK,dK,fK,AK,hK;function mK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mK(Object(r),!0).forEach(function(n){KHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KHe(t,e,r){return(e=GHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GHe(t){var e=qHe(t,"string");return typeof e=="symbol"?e:e+""}function qHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$S.apply(null,arguments)}function gK(t,e){if(t==null)return{};var r,n,a=zHe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function zHe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function lf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var xK=(t,e,r,n,a)=>{var s=h0(r),i=h0(n),l=Math.min(Math.abs(s)/2,Math.abs(i)/2),c=i>=0?1:-1,u=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],A=0,m=4;A<m;A++)h[A]=a[A]>l?l:a[A];f=Qs(sK||(sK=lf(["M",",",""])),t,e+c*h[0]),h[0]>0&&(f+=Qs(iK||(iK=lf(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,t+u*h[0],e)),f+=Qs(oK||(oK=lf(["L ",",",""])),t+r-u*h[1],e),h[1]>0&&(f+=Qs(lK||(lK=lf(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,t+r,e+c*h[1])),f+=Qs(cK||(cK=lf(["L ",",",""])),t+r,e+n-c*h[2]),h[2]>0&&(f+=Qs(uK||(uK=lf(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,t+r-u*h[2],e+n)),f+=Qs(dK||(dK=lf(["L ",",",""])),t+u*h[3],e+n),h[3]>0&&(f+=Qs(fK||(fK=lf(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,t,e+n-c*h[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=Qs(AK||(AK=lf(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=Qs(hK||(hK=lf(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},vK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qse=t=>{var e=zo(t,vK),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var de=r.current.getTotalLength();de&&a(de)}catch{}},[]);var{x:s,y:i,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:h,animationBegin:A,isAnimationActive:m,isUpdateAnimationActive:p}=e,g=v.useRef(l),x=v.useRef(c),y=v.useRef(s),b=v.useRef(i),w=v.useMemo(()=>({x:s,y:i,width:l,height:c,radius:u}),[s,i,l,c,u]),j=c3(w,"rectangle-");if(s!==+s||i!==+i||l!==+l||c!==+c||l===0||c===0)return null;var I=_a("recharts-rectangle",d);if(!p){var _=qu(e),{radius:E}=_,S=gK(_,HHe);return v.createElement("path",$S({},S,{x:h0(s),y:h0(i),width:h0(l),height:h0(c),radius:typeof u=="number"?u:void 0,className:I,d:xK(s,i,l,c,u)}))}var O=g.current,P=x.current,T=y.current,F=b.current,J="0px ".concat(n===-1?1:n,"px"),ge="".concat(n,"px 0px"),le=Rse(["strokeDasharray"],h,typeof f=="string"?f:vK.animationEasing);return v.createElement(l3,{animationId:j,key:j,canBegin:n>0,duration:h,easing:f,isActive:p,begin:A},de=>{var Ae=Fi(O,l,de),se=Fi(P,c,de),Ie=Fi(T,s,de),Pe=Fi(F,i,de);r.current&&(g.current=Ae,x.current=se,y.current=Ie,b.current=Pe);var k;m?de>0?k={transition:le,strokeDasharray:ge}:k={strokeDasharray:J}:k={strokeDasharray:ge};var H=qu(e),{radius:R}=H,M=gK(H,$He);return v.createElement("path",$S({},M,{radius:typeof u=="number"?u:void 0,className:I,d:xK(Ie,Pe,Ae,se,u),ref:r,style:pK(pK({},k),e.style)}))})};function yK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(r),!0).forEach(function(n){WHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WHe(t,e,r){return(e=XHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XHe(t){var e=YHe(t,"string");return typeof e=="symbol"?e:e+""}function YHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KS=Math.PI/180,JHe=t=>t*180/Math.PI,yi=(t,e,r,n)=>({x:t+Math.cos(-KS*n)*r,y:e+Math.sin(-KS*n)*r}),Vse=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},ZHe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},e$e=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,i=ZHe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var l=(r-a)/i,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:i,angle:JHe(c),angleInRadian:c}},t$e=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},r$e=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return t+i*360},n$e=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=e$e({x:r,y:n},e),{innerRadius:i,outerRadius:l}=e;if(a<i||a>l||a===0)return null;var{startAngle:c,endAngle:u}=t$e(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?bK(bK({},e),{},{radius:a,angle:r$e(d,e)}):null};function Hse(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,i=yi(e,r,n,a),l=yi(e,r,n,s);return{points:[i,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var wK,NK,CK,_K,EK,SK,IK;function Gk(){return Gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gk.apply(null,arguments)}function Wm(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var a$e=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},KC=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:l,cornerIsExternal:c}=t,u=l*(i?1:-1)+n,d=Math.asin(l/u)/KS,f=c?a:a+s*d,h=yi(e,r,u,f),A=yi(e,r,n,f),m=c?a-s*d:a,p=yi(e,r,u*Math.cos(d*KS),m);return{center:h,circleTangency:A,lineTangency:p,theta:d}},$se=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=t,l=a$e(s,i),c=s+l,u=yi(e,r,a,s),d=yi(e,r,a,c),f=Qs(wK||(wK=Wm(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var h=yi(e,r,n,s),A=yi(e,r,n,c);f+=Qs(NK||(NK=Wm(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),A.x,A.y,n,n,+(Math.abs(l)>180),+(s<=c),h.x,h.y)}else f+=Qs(CK||(CK=Wm(["L ",","," Z"])),e,r);return f},s$e=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Ko(u-c),{circleTangency:f,lineTangency:h,theta:A}=KC({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:g}=KC({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-u):Math.abs(c-u)-A-g;if(x<0)return i?Qs(_K||(_K=Wm(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,s,s,s*2,s,s,-s*2):$se({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=Qs(EK||(EK=Wm(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,s,s,+(d<0),f.x,f.y,a,a,+(x>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=KC({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:E}=KC({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-j-E;if(S<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=Qs(SK||(SK=Wm(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(S>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=Qs(IK||(IK=Wm(["L",",","Z"])),e,r);return y},i$e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Kse=t=>{var e=zo(t,i$e),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var h=_a("recharts-sector",f),A=s-a,m=xl(i,A,0,!0),p;return m>0&&Math.abs(u-d)<360?p=s$e({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,A/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=$se({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),v.createElement("path",Gk({},qu(e),{className:h,d:p}))};function o$e(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(oae(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:i,angle:l}=e,c=yi(n,a,s,l),u=yi(n,a,i,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Hse(e)}}var Gse={},qse={},zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(zse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zse;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(qse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WD,r=qse;function n(a,s,i){i&&typeof i!="number"&&e.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const l=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=i;return c}t.range=n})(Gse);var l$e=Gse.range;const Wse=qA(l$e);function T0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c$e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oR(t){let e,r,n;t.length!==2?(e=T0,r=(l,c)=>T0(t(l),c),n=(l,c)=>t(l)-c):(e=t===T0||t===c$e?t:u$e,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:i,right:s}}function u$e(){return 0}function Xse(t){return t===null?NaN:+t}function*d$e(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const f$e=oR(T0),ww=f$e.right;oR(Xse).center;class jK extends Map{constructor(e,r=m$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(BK(this,e))}has(e){return super.has(BK(this,e))}set(e,r){return super.set(A$e(this,e),r)}delete(e){return super.delete(h$e(this,e))}}function BK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function A$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function h$e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function m$e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function p$e(t=T0){if(t===T0)return Yse;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Yse(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const g$e=Math.sqrt(50),x$e=Math.sqrt(10),v$e=Math.sqrt(2);function GS(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=g$e?10:s>=x$e?5:s>=v$e?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/i,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*i,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?GS(t,e,r*2):[l,c,u]}function qk(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,i]=n?GS(e,t,r):GS(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)c[u]=(s-u)/-i;else for(let u=0;u<l;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<l;++u)c[u]=(a+u)/-i;else for(let u=0;u<l;++u)c[u]=(a+u)*i;return c}function zk(t,e,r){return e=+e,t=+t,r=+r,GS(t,e,r)[2]}function Wk(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?zk(e,t,r):zk(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function PK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function TK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Jse(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Yse:p$e(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),A=Math.max(r,Math.floor(e-u*f/c+h)),m=Math.min(n,Math.floor(e+(c-u)*f/c+h));Jse(t,e,A,m,a)}const s=t[e];let i=r,l=n;for(W1(t,r,e),a(t[n],s)>0&&W1(t,r,n);i<l;){for(W1(t,i,l),++i,--l;a(t[i],s)<0;)++i;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?W1(t,r,l):(++l,W1(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function W1(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function y$e(t,e,r){if(t=Float64Array.from(d$e(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return TK(t);if(e>=1)return PK(t);var n,a=(n-1)*e,s=Math.floor(a),i=PK(Jse(t,s).subarray(0,s+1)),l=TK(t.subarray(s+1));return i+(l-i)*(a-s)}}function b$e(t,e,r=Xse){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),i=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return i+(l-i)*(a-s)}}function w$e(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Yu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function sh(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Xk=Symbol("implicit");function lR(){var t=new jK,e=[],r=[],n=Xk;function a(s){let i=t.get(s);if(i===void 0){if(n!==Xk)return n;t.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new jK;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return lR(e,r).unknown(n)},Yu.apply(a,arguments),a}function cR(){var t=lR().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,i,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,A=a<n,m=A?a:n,p=A?n:a;s=(p-m)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(h-c))*d,i=s*(1-c),l&&(m=Math.round(m),i=Math.round(i));var g=w$e(h).map(function(x){return m+s*x});return r(A?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return cR(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Yu.apply(f(),arguments)}function Zse(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Zse(e())},t}function N$e(){return Zse(cR.apply(null,arguments).paddingInner(1))}function uR(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function eie(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Nw(){}var C2=.7,qS=1/C2,Hx="\\s*([+-]?\\d+)\\s*",_2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",C$e=/^#([0-9a-f]{3,8})$/,_$e=new RegExp(`^rgb\\(${Hx},${Hx},${Hx}\\)$`),E$e=new RegExp(`^rgb\\(${_f},${_f},${_f}\\)$`),S$e=new RegExp(`^rgba\\(${Hx},${Hx},${Hx},${_2}\\)$`),I$e=new RegExp(`^rgba\\(${_f},${_f},${_f},${_2}\\)$`),j$e=new RegExp(`^hsl\\(${_2},${_f},${_f}\\)$`),B$e=new RegExp(`^hsla\\(${_2},${_f},${_f},${_2}\\)$`),kK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uR(Nw,E2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:FK,formatHex:FK,formatHex8:P$e,formatHsl:T$e,formatRgb:OK,toString:OK});function FK(){return this.rgb().formatHex()}function P$e(){return this.rgb().formatHex8()}function T$e(){return tie(this).formatHsl()}function OK(){return this.rgb().formatRgb()}function E2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=C$e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?DK(e):r===3?new cc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?GC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?GC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_$e.exec(t))?new cc(e[1],e[2],e[3],1):(e=E$e.exec(t))?new cc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=S$e.exec(t))?GC(e[1],e[2],e[3],e[4]):(e=I$e.exec(t))?GC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=j$e.exec(t))?LK(e[1],e[2]/100,e[3]/100,1):(e=B$e.exec(t))?LK(e[1],e[2]/100,e[3]/100,e[4]):kK.hasOwnProperty(t)?DK(kK[t]):t==="transparent"?new cc(NaN,NaN,NaN,0):null}function DK(t){return new cc(t>>16&255,t>>8&255,t&255,1)}function GC(t,e,r,n){return n<=0&&(t=e=r=NaN),new cc(t,e,r,n)}function k$e(t){return t instanceof Nw||(t=E2(t)),t?(t=t.rgb(),new cc(t.r,t.g,t.b,t.opacity)):new cc}function Yk(t,e,r,n){return arguments.length===1?k$e(t):new cc(t,e,r,n??1)}function cc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}uR(cc,Yk,eie(Nw,{brighter(t){return t=t==null?qS:Math.pow(qS,t),new cc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?C2:Math.pow(C2,t),new cc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new cc(Ap(this.r),Ap(this.g),Ap(this.b),zS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RK,formatHex:RK,formatHex8:F$e,formatRgb:MK,toString:MK}));function RK(){return`#${Xm(this.r)}${Xm(this.g)}${Xm(this.b)}`}function F$e(){return`#${Xm(this.r)}${Xm(this.g)}${Xm(this.b)}${Xm((isNaN(this.opacity)?1:this.opacity)*255)}`}function MK(){const t=zS(this.opacity);return`${t===1?"rgb(":"rgba("}${Ap(this.r)}, ${Ap(this.g)}, ${Ap(this.b)}${t===1?")":`, ${t})`}`}function zS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ap(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xm(t){return t=Ap(t),(t<16?"0":"")+t.toString(16)}function LK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Nd(t,e,r,n)}function tie(t){if(t instanceof Nd)return new Nd(t.h,t.s,t.l,t.opacity);if(t instanceof Nw||(t=E2(t)),!t)return new Nd;if(t instanceof Nd)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),i=NaN,l=s-a,c=(s+a)/2;return l?(e===s?i=(r-n)/l+(r<n)*6:r===s?i=(n-e)/l+2:i=(e-r)/l+4,l/=c<.5?s+a:2-s-a,i*=60):l=c>0&&c<1?0:i,new Nd(i,l,c,t.opacity)}function O$e(t,e,r,n){return arguments.length===1?tie(t):new Nd(t,e,r,n??1)}function Nd(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}uR(Nd,O$e,eie(Nw,{brighter(t){return t=t==null?qS:Math.pow(qS,t),new Nd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?C2:Math.pow(C2,t),new Nd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new cc(CB(t>=240?t-240:t+120,a,n),CB(t,a,n),CB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Nd(UK(this.h),qC(this.s),qC(this.l),zS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=zS(this.opacity);return`${t===1?"hsl(":"hsla("}${UK(this.h)}, ${qC(this.s)*100}%, ${qC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function UK(t){return t=(t||0)%360,t<0?t+360:t}function qC(t){return Math.max(0,Math.min(1,t||0))}function CB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const dR=t=>()=>t;function D$e(t,e){return function(r){return t+r*e}}function R$e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function M$e(t){return(t=+t)==1?rie:function(e,r){return r-e?R$e(e,r,t):dR(isNaN(e)?r:e)}}function rie(t,e){var r=e-t;return r?D$e(t,r):dR(isNaN(t)?e:t)}const QK=function t(e){var r=M$e(e);function n(a,s){var i=r((a=Yk(a)).r,(s=Yk(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=rie(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function L$e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function U$e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Q$e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=$v(t[i],e[i]);for(;i<r;++i)s[i]=e[i];return function(l){for(i=0;i<n;++i)s[i]=a[i](l);return s}}function V$e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function WS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function H$e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=$v(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var Jk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_B=new RegExp(Jk.source,"g");function $$e(t){return function(){return t}}function K$e(t){return function(e){return t(e)+""}}function G$e(t,e){var r=Jk.lastIndex=_B.lastIndex=0,n,a,s,i=-1,l=[],c=[];for(t=t+"",e=e+"";(n=Jk.exec(t))&&(a=_B.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[i]?l[i]+=s:l[++i]=s),(n=n[0])===(a=a[0])?l[i]?l[i]+=a:l[++i]=a:(l[++i]=null,c.push({i,x:WS(n,a)})),r=_B.lastIndex;return r<e.length&&(s=e.slice(r),l[i]?l[i]+=s:l[++i]=s),l.length<2?c[0]?K$e(c[0].x):$$e(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function $v(t,e){var r=typeof e,n;return e==null||r==="boolean"?dR(e):(r==="number"?WS:r==="string"?(n=E2(e))?(e=n,QK):G$e:e instanceof E2?QK:e instanceof Date?V$e:U$e(e)?L$e:Array.isArray(e)?Q$e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?H$e:WS)(t,e)}function fR(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function q$e(t,e){e===void 0&&(e=t,t=$v);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(i){var l=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[l](i-l)}}function z$e(t){return function(){return t}}function XS(t){return+t}var VK=[0,1];function Ll(t){return t}function Zk(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:z$e(isNaN(e)?NaN:.5)}function W$e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function X$e(t,e,r){var n=t[0],a=t[1],s=e[0],i=e[1];return a<n?(n=Zk(a,n),s=r(i,s)):(n=Zk(n,a),s=r(s,i)),function(l){return s(n(l))}}function Y$e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Zk(t[i],t[i+1]),s[i]=r(e[i],e[i+1]);return function(l){var c=ww(t,l,1,n)-1;return s[c](a[c](l))}}function Cw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function u3(){var t=VK,e=VK,r=$v,n,a,s,i=Ll,l,c,u;function d(){var h=Math.min(t.length,e.length);return i!==Ll&&(i=W$e(t[0],t[h-1])),l=h>2?Y$e:X$e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(n),e,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=l(e,t.map(n),WS)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,XS),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=fR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Ll,d()):i!==Ll},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,A){return n=h,a=A,d()}}function AR(){return u3()(Ll,Ll)}function J$e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function YS(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function pv(t){return t=YS(Math.abs(t)),t?t[1]:NaN}function Z$e(t,e){return function(r,n){for(var a=r.length,s=[],i=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[i=(i+1)%t.length];return s.reverse().join(e)}}function eKe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var tKe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function S2(t){if(!(e=tKe.exec(t)))throw new Error("invalid format: "+t);var e;return new hR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}S2.prototype=hR.prototype;function hR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rKe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var JS;function nKe(t,e){var r=YS(t,e);if(!r)return JS=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(JS=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+YS(t,Math.max(0,e+s-1))[0]}function HK(t,e){var r=YS(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const $K={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:J$e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>HK(t*100,e),r:HK,s:nKe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KK(t){return t}var GK=Array.prototype.map,qK=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aKe(t){var e=t.grouping===void 0||t.thousands===void 0?KK:Z$e(GK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?KK:eKe(GK.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=S2(f);var A=f.fill,m=f.align,p=f.sign,g=f.symbol,x=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):$K[I]||(w===void 0&&(w=12),j=!0,I="g"),(x||A==="0"&&m==="=")&&(x=!0,A="0",m="=");var _=(h&&h.prefix!==void 0?h.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),E=(g==="$"?n:/[%p]/.test(I)?i:"")+(h&&h.suffix!==void 0?h.suffix:""),S=$K[I],O=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(T){var F=_,J=E,ge,le,de;if(I==="c")J=S(T)+J,T="";else{T=+T;var Ae=T<0||1/T<0;if(T=isNaN(T)?c:S(Math.abs(T),w),j&&(T=rKe(T)),Ae&&+T==0&&p!=="+"&&(Ae=!1),F=(Ae?p==="("?p:l:p==="-"||p==="("?"":p)+F,J=(I==="s"&&!isNaN(T)&&JS!==void 0?qK[8+JS/3]:"")+J+(Ae&&p==="("?")":""),O){for(ge=-1,le=T.length;++ge<le;)if(de=T.charCodeAt(ge),48>de||de>57){J=(de===46?a+T.slice(ge+1):T.slice(ge))+J,T=T.slice(0,ge);break}}}b&&!x&&(T=e(T,1/0));var se=F.length+T.length+J.length,Ie=se<y?new Array(y-se+1).join(A):"";switch(b&&x&&(T=e(Ie+T,Ie.length?y-J.length:1/0),Ie=""),m){case"<":T=F+T+J+Ie;break;case"=":T=F+Ie+T+J;break;case"^":T=Ie.slice(0,se=Ie.length>>1)+F+T+J+Ie.slice(se);break;default:T=Ie+F+T+J;break}return s(T)}return P.toString=function(){return f+""},P}function d(f,h){var A=Math.max(-8,Math.min(8,Math.floor(pv(h)/3)))*3,m=Math.pow(10,-A),p=u((f=S2(f),f.type="f",f),{suffix:qK[8+A/3]});return function(g){return p(m*g)}}return{format:u,formatPrefix:d}}var zC,mR,nie;sKe({thousands:",",grouping:[3],currency:["$",""]});function sKe(t){return zC=aKe(t),mR=zC.format,nie=zC.formatPrefix,zC}function iKe(t){return Math.max(0,-pv(Math.abs(t)))}function oKe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pv(e)/3)))*3-pv(Math.abs(t)))}function lKe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pv(e)-pv(t))+1}function aie(t,e,r,n){var a=Wk(t,e,r),s;switch(n=S2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=oKe(a,i))&&(n.precision=s),nie(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=lKe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=iKe(a))&&(n.precision=s-(n.type==="%")*2);break}}return mR(n)}function im(t){var e=t.domain;return t.ticks=function(r){var n=e();return qk(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return aie(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,i=n[a],l=n[s],c,u,d=10;for(l<i&&(u=i,i=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=zk(i,l,r),u===c)return n[a]=i,n[s]=l,e(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function sie(){var t=AR();return t.copy=function(){return Cw(t,sie())},Yu.apply(t,arguments),im(t)}function iie(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,XS),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return iie(t).unknown(e)},t=arguments.length?Array.from(t,XS):[0,1],im(r)}function oie(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),t[r]=e.floor(a),t[n]=e.ceil(s),t}function zK(t){return Math.log(t)}function WK(t){return Math.exp(t)}function cKe(t){return-Math.log(-t)}function uKe(t){return-Math.exp(-t)}function dKe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fKe(t){return t===10?dKe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function AKe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function XK(t){return(e,r)=>-t(-e,r)}function pR(t){const e=t(zK,WK),r=e.domain;let n=10,a,s;function i(){return a=AKe(n),s=fKe(n),r()[0]<0?(a=XK(a),s=XK(s),t(cKe,uKe)):t(zK,WK),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(r(l),i()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),A=a(d),m,p;const g=l==null?10:+l;let x=[];if(!(n%1)&&A-h<g){if(h=Math.floor(h),A=Math.ceil(A),u>0){for(;h<=A;++h)for(m=1;m<n;++m)if(p=h<0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}}else for(;h<=A;++h)for(m=n-1;m>=1;--m)if(p=h>0?m/s(-h):m*s(h),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=qk(u,d,g))}else x=qk(h,A,Math.min(A-h,g)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=S2(c)).precision==null&&(c.trim=!0),c=mR(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(oie(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function lie(){const t=pR(u3()).domain([1,10]);return t.copy=()=>Cw(t,lie()).base(t.base()),Yu.apply(t,arguments),t}function YK(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JK(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function gR(t){var e=1,r=t(YK(e),JK(e));return r.constant=function(n){return arguments.length?t(YK(e=+n),JK(e)):e},im(r)}function cie(){var t=gR(u3());return t.copy=function(){return Cw(t,cie()).constant(t.constant())},Yu.apply(t,arguments)}function ZK(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function hKe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function mKe(t){return t<0?-t*t:t*t}function xR(t){var e=t(Ll,Ll),r=1;function n(){return r===1?t(Ll,Ll):r===.5?t(hKe,mKe):t(ZK(r),ZK(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},im(e)}function vR(){var t=xR(u3());return t.copy=function(){return Cw(t,vR()).exponent(t.exponent())},Yu.apply(t,arguments),t}function pKe(){return vR.apply(null,arguments).exponent(.5)}function eG(t){return Math.sign(t)*t*t}function gKe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function uie(){var t=AR(),e=[0,1],r=!1,n;function a(s){var i=gKe(t(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return t.invert(eG(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,XS)).map(eG)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return uie(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Yu.apply(a,arguments),im(a)}function die(){var t=[],e=[],r=[],n;function a(){var i=0,l=Math.max(1,e.length);for(r=new Array(l-1);++i<l;)r[i-1]=b$e(t,i/l);return s}function s(i){return i==null||isNaN(i=+i)?n:e[ww(r,i)]}return s.invertExtent=function(i){var l=e.indexOf(i);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let l of i)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(T0),a()},s.range=function(i){return arguments.length?(e=Array.from(i),a()):e.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return die().domain(t).range(e).unknown(n)},Yu.apply(s,arguments)}function fie(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[ww(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return i}return i.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return fie().domain([t,e]).range(a).unknown(s)},Yu.apply(im(i),arguments)}function Aie(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[ww(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Aie().domain(t).range(e).unknown(r)},Yu.apply(a,arguments)}const EB=new Date,SB=new Date;function qi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const i=a(s),l=a.ceil(s);return s-i<l-s?i:l},a.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<i)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<i);return c},a.filter=s=>qi(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;e(i,-1),!s(i););else for(;--l>=0;)for(;e(i,1),!s(i););}),r&&(a.count=(s,i)=>(EB.setTime(+s),SB.setTime(+i),t(EB),t(SB),Math.floor(r(EB,SB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const ZS=qi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ZS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):ZS);ZS.range;const gA=1e3,Ru=gA*60,xA=Ru*60,VA=xA*24,yR=VA*7,tG=VA*30,IB=VA*365,Ym=qi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*gA)},(t,e)=>(e-t)/gA,t=>t.getUTCSeconds());Ym.range;const bR=qi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gA)},(t,e)=>{t.setTime(+t+e*Ru)},(t,e)=>(e-t)/Ru,t=>t.getMinutes());bR.range;const wR=qi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ru)},(t,e)=>(e-t)/Ru,t=>t.getUTCMinutes());wR.range;const NR=qi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*gA-t.getMinutes()*Ru)},(t,e)=>{t.setTime(+t+e*xA)},(t,e)=>(e-t)/xA,t=>t.getHours());NR.range;const CR=qi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*xA)},(t,e)=>(e-t)/xA,t=>t.getUTCHours());CR.range;const _w=qi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ru)/VA,t=>t.getDate()-1);_w.range;const d3=qi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/VA,t=>t.getUTCDate()-1);d3.range;const hie=qi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/VA,t=>Math.floor(t/VA));hie.range;function dg(t){return qi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Ru)/yR)}const f3=dg(0),eI=dg(1),xKe=dg(2),vKe=dg(3),gv=dg(4),yKe=dg(5),bKe=dg(6);f3.range;eI.range;xKe.range;vKe.range;gv.range;yKe.range;bKe.range;function fg(t){return qi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/yR)}const A3=fg(0),tI=fg(1),wKe=fg(2),NKe=fg(3),xv=fg(4),CKe=fg(5),_Ke=fg(6);A3.range;tI.range;wKe.range;NKe.range;xv.range;CKe.range;_Ke.range;const _R=qi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_R.range;const ER=qi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ER.range;const HA=qi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());HA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});HA.range;const $A=qi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$A.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});$A.range;function mie(t,e,r,n,a,s){const i=[[Ym,1,gA],[Ym,5,5*gA],[Ym,15,15*gA],[Ym,30,30*gA],[s,1,Ru],[s,5,5*Ru],[s,15,15*Ru],[s,30,30*Ru],[a,1,xA],[a,3,3*xA],[a,6,6*xA],[a,12,12*xA],[n,1,VA],[n,2,2*VA],[r,1,yR],[e,1,tG],[e,3,3*tG],[t,1,IB]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const A=f&&typeof f.range=="function"?f:c(u,d,f),m=A?A.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,A=oR(([,,g])=>g).right(i,h);if(A===i.length)return t.every(Wk(u/IB,d/IB,f));if(A===0)return ZS.every(Math.max(Wk(u,d,f),1));const[m,p]=i[h/i[A-1][2]<i[A][2]/h?A-1:A];return m.every(p)}return[l,c]}const[EKe,SKe]=mie($A,ER,A3,hie,CR,wR),[IKe,jKe]=mie(HA,_R,f3,_w,NR,bR);function jB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function BB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function X1(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function BKe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,i=t.shortDays,l=t.months,c=t.shortMonths,u=Y1(a),d=J1(a),f=Y1(s),h=J1(s),A=Y1(i),m=J1(i),p=Y1(l),g=J1(l),x=Y1(c),y=J1(c),b={a:de,A:Ae,b:se,B:Ie,c:null,d:oG,e:oG,f:ZKe,g:cGe,G:dGe,H:XKe,I:YKe,j:JKe,L:pie,m:eGe,M:tGe,p:Pe,q:k,Q:uG,s:dG,S:rGe,u:nGe,U:aGe,V:sGe,w:iGe,W:oGe,x:null,X:null,y:lGe,Y:uGe,Z:fGe,"%":cG},w={a:H,A:R,b:M,B:G,c:null,d:lG,e:lG,f:pGe,g:EGe,G:IGe,H:AGe,I:hGe,j:mGe,L:xie,m:gGe,M:xGe,p:X,q:D,Q:uG,s:dG,S:vGe,u:yGe,U:bGe,V:wGe,w:NGe,W:CGe,x:null,X:null,y:_Ge,Y:SGe,Z:jGe,"%":cG},j={a:O,A:P,b:T,B:F,c:J,d:sG,e:sG,f:GKe,g:aG,G:nG,H:iG,I:iG,j:VKe,L:KKe,m:QKe,M:HKe,p:S,q:UKe,Q:zKe,s:WKe,S:$Ke,u:OKe,U:DKe,V:RKe,w:FKe,W:MKe,x:ge,X:le,y:aG,Y:nG,Z:LKe,"%":qKe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(Q,te){return function(me){var L=[],he=-1,ne=0,z=Q.length,ce,K,oe;for(me instanceof Date||(me=new Date(+me));++he<z;)Q.charCodeAt(he)===37&&(L.push(Q.slice(ne,he)),(K=rG[ce=Q.charAt(++he)])!=null?ce=Q.charAt(++he):K=ce==="e"?" ":"0",(oe=te[ce])&&(ce=oe(me,K)),L.push(ce),ne=he+1);return L.push(Q.slice(ne,he)),L.join("")}}function _(Q,te){return function(me){var L=X1(1900,void 0,1),he=E(L,Q,me+="",0),ne,z;if(he!=me.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(te&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(ne=BB(X1(L.y,0,1)),z=ne.getUTCDay(),ne=z>4||z===0?tI.ceil(ne):tI(ne),ne=d3.offset(ne,(L.V-1)*7),L.y=ne.getUTCFullYear(),L.m=ne.getUTCMonth(),L.d=ne.getUTCDate()+(L.w+6)%7):(ne=jB(X1(L.y,0,1)),z=ne.getDay(),ne=z>4||z===0?eI.ceil(ne):eI(ne),ne=_w.offset(ne,(L.V-1)*7),L.y=ne.getFullYear(),L.m=ne.getMonth(),L.d=ne.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),z="Z"in L?BB(X1(L.y,0,1)).getUTCDay():jB(X1(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(z+5)%7:L.w+L.U*7-(z+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,BB(L)):jB(L)}}function E(Q,te,me,L){for(var he=0,ne=te.length,z=me.length,ce,K;he<ne;){if(L>=z)return-1;if(ce=te.charCodeAt(he++),ce===37){if(ce=te.charAt(he++),K=j[ce in rG?te.charAt(he++):ce],!K||(L=K(Q,me,L))<0)return-1}else if(ce!=me.charCodeAt(L++))return-1}return L}function S(Q,te,me){var L=u.exec(te.slice(me));return L?(Q.p=d.get(L[0].toLowerCase()),me+L[0].length):-1}function O(Q,te,me){var L=A.exec(te.slice(me));return L?(Q.w=m.get(L[0].toLowerCase()),me+L[0].length):-1}function P(Q,te,me){var L=f.exec(te.slice(me));return L?(Q.w=h.get(L[0].toLowerCase()),me+L[0].length):-1}function T(Q,te,me){var L=x.exec(te.slice(me));return L?(Q.m=y.get(L[0].toLowerCase()),me+L[0].length):-1}function F(Q,te,me){var L=p.exec(te.slice(me));return L?(Q.m=g.get(L[0].toLowerCase()),me+L[0].length):-1}function J(Q,te,me){return E(Q,e,te,me)}function ge(Q,te,me){return E(Q,r,te,me)}function le(Q,te,me){return E(Q,n,te,me)}function de(Q){return i[Q.getDay()]}function Ae(Q){return s[Q.getDay()]}function se(Q){return c[Q.getMonth()]}function Ie(Q){return l[Q.getMonth()]}function Pe(Q){return a[+(Q.getHours()>=12)]}function k(Q){return 1+~~(Q.getMonth()/3)}function H(Q){return i[Q.getUTCDay()]}function R(Q){return s[Q.getUTCDay()]}function M(Q){return c[Q.getUTCMonth()]}function G(Q){return l[Q.getUTCMonth()]}function X(Q){return a[+(Q.getUTCHours()>=12)]}function D(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var te=I(Q+="",b);return te.toString=function(){return Q},te},parse:function(Q){var te=_(Q+="",!1);return te.toString=function(){return Q},te},utcFormat:function(Q){var te=I(Q+="",w);return te.toString=function(){return Q},te},utcParse:function(Q){var te=_(Q+="",!0);return te.toString=function(){return Q},te}}}var rG={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,PKe=/^%/,TKe=/[\\^$*+?|[\]().{}]/g;function Zn(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function kKe(t){return t.replace(TKe,"\\$&")}function Y1(t){return new RegExp("^(?:"+t.map(kKe).join("|")+")","i")}function J1(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function FKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function OKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function DKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function RKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function MKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function nG(t,e,r){var n=yo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function LKe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function UKe(t,e,r){var n=yo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function QKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function sG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function VKe(t,e,r){var n=yo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function iG(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function HKe(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function $Ke(t,e,r){var n=yo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function KKe(t,e,r){var n=yo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function GKe(t,e,r){var n=yo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function qKe(t,e,r){var n=PKe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function zKe(t,e,r){var n=yo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function WKe(t,e,r){var n=yo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oG(t,e){return Zn(t.getDate(),e,2)}function XKe(t,e){return Zn(t.getHours(),e,2)}function YKe(t,e){return Zn(t.getHours()%12||12,e,2)}function JKe(t,e){return Zn(1+_w.count(HA(t),t),e,3)}function pie(t,e){return Zn(t.getMilliseconds(),e,3)}function ZKe(t,e){return pie(t,e)+"000"}function eGe(t,e){return Zn(t.getMonth()+1,e,2)}function tGe(t,e){return Zn(t.getMinutes(),e,2)}function rGe(t,e){return Zn(t.getSeconds(),e,2)}function nGe(t){var e=t.getDay();return e===0?7:e}function aGe(t,e){return Zn(f3.count(HA(t)-1,t),e,2)}function gie(t){var e=t.getDay();return e>=4||e===0?gv(t):gv.ceil(t)}function sGe(t,e){return t=gie(t),Zn(gv.count(HA(t),t)+(HA(t).getDay()===4),e,2)}function iGe(t){return t.getDay()}function oGe(t,e){return Zn(eI.count(HA(t)-1,t),e,2)}function lGe(t,e){return Zn(t.getFullYear()%100,e,2)}function cGe(t,e){return t=gie(t),Zn(t.getFullYear()%100,e,2)}function uGe(t,e){return Zn(t.getFullYear()%1e4,e,4)}function dGe(t,e){var r=t.getDay();return t=r>=4||r===0?gv(t):gv.ceil(t),Zn(t.getFullYear()%1e4,e,4)}function fGe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Zn(e/60|0,"0",2)+Zn(e%60,"0",2)}function lG(t,e){return Zn(t.getUTCDate(),e,2)}function AGe(t,e){return Zn(t.getUTCHours(),e,2)}function hGe(t,e){return Zn(t.getUTCHours()%12||12,e,2)}function mGe(t,e){return Zn(1+d3.count($A(t),t),e,3)}function xie(t,e){return Zn(t.getUTCMilliseconds(),e,3)}function pGe(t,e){return xie(t,e)+"000"}function gGe(t,e){return Zn(t.getUTCMonth()+1,e,2)}function xGe(t,e){return Zn(t.getUTCMinutes(),e,2)}function vGe(t,e){return Zn(t.getUTCSeconds(),e,2)}function yGe(t){var e=t.getUTCDay();return e===0?7:e}function bGe(t,e){return Zn(A3.count($A(t)-1,t),e,2)}function vie(t){var e=t.getUTCDay();return e>=4||e===0?xv(t):xv.ceil(t)}function wGe(t,e){return t=vie(t),Zn(xv.count($A(t),t)+($A(t).getUTCDay()===4),e,2)}function NGe(t){return t.getUTCDay()}function CGe(t,e){return Zn(tI.count($A(t)-1,t),e,2)}function _Ge(t,e){return Zn(t.getUTCFullYear()%100,e,2)}function EGe(t,e){return t=vie(t),Zn(t.getUTCFullYear()%100,e,2)}function SGe(t,e){return Zn(t.getUTCFullYear()%1e4,e,4)}function IGe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?xv(t):xv.ceil(t),Zn(t.getUTCFullYear()%1e4,e,4)}function jGe(){return"+0000"}function cG(){return"%"}function uG(t){return+t}function dG(t){return Math.floor(+t/1e3)}var Kg,yie,bie;BGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function BGe(t){return Kg=BKe(t),yie=Kg.format,Kg.parse,bie=Kg.utcFormat,Kg.utcParse,Kg}function PGe(t){return new Date(t)}function TGe(t){return t instanceof Date?+t:+new Date(+t)}function SR(t,e,r,n,a,s,i,l,c,u){var d=AR(),f=d.invert,h=d.domain,A=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?A:l(I)<I?m:i(I)<I?p:s(I)<I?g:n(I)<I?a(I)<I?x:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,TGe)):h().map(PGe)},d.ticks=function(I){var _=h();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=h();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?h(oie(_,I)):d},d.copy=function(){return Cw(d,SR(t,e,r,n,a,s,i,l,c,u))},d}function kGe(){return Yu.apply(SR(IKe,jKe,HA,_R,f3,_w,NR,bR,Ym,yie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FGe(){return Yu.apply(SR(EKe,SKe,$A,ER,A3,d3,CR,wR,Ym,bie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function h3(){var t=0,e=1,r,n,a,s,i=Ll,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var A,m;return arguments.length?([A,m]=h,i=f(A,m),u):[i(0),i(1)]}}return u.range=d($v),u.rangeRound=d(fR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function om(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wie(){var t=im(h3()(Ll));return t.copy=function(){return om(t,wie())},sh.apply(t,arguments)}function Nie(){var t=pR(h3()).domain([1,10]);return t.copy=function(){return om(t,Nie()).base(t.base())},sh.apply(t,arguments)}function Cie(){var t=gR(h3());return t.copy=function(){return om(t,Cie()).constant(t.constant())},sh.apply(t,arguments)}function IR(){var t=xR(h3());return t.copy=function(){return om(t,IR()).exponent(t.exponent())},sh.apply(t,arguments)}function OGe(){return IR.apply(null,arguments).exponent(.5)}function _ie(){var t=[],e=Ll;function r(n){if(n!=null&&!isNaN(n=+n))return e((ww(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(T0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>y$e(t,s/n))},r.copy=function(){return _ie(e).domain(t)},sh.apply(r,arguments)}function m3(){var t=0,e=.5,r=1,n=1,a,s,i,l,c,u=Ll,d,f=!1,h;function A(p){return isNaN(p=+p)?h:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}A.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),i=d(r=+r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A):[t,e,r]},A.clamp=function(p){return arguments.length?(f=!!p,A):f},A.interpolator=function(p){return arguments.length?(u=p,A):u};function m(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=q$e(p,[x,y,b]),A):[u(0),u(.5),u(1)]}}return A.range=m($v),A.rangeRound=m(fR),A.unknown=function(p){return arguments.length?(h=p,A):h},function(p){return d=p,a=p(t),s=p(e),i=p(r),l=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,A}}function Eie(){var t=im(m3()(Ll));return t.copy=function(){return om(t,Eie())},sh.apply(t,arguments)}function Sie(){var t=pR(m3()).domain([.1,1,10]);return t.copy=function(){return om(t,Sie()).base(t.base())},sh.apply(t,arguments)}function Iie(){var t=gR(m3());return t.copy=function(){return om(t,Iie()).constant(t.constant())},sh.apply(t,arguments)}function jR(){var t=xR(m3());return t.copy=function(){return om(t,jR()).exponent(t.exponent())},sh.apply(t,arguments)}function DGe(){return jR.apply(null,arguments).exponent(.5)}const _y=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cR,scaleDiverging:Eie,scaleDivergingLog:Sie,scaleDivergingPow:jR,scaleDivergingSqrt:DGe,scaleDivergingSymlog:Iie,scaleIdentity:iie,scaleImplicit:Xk,scaleLinear:sie,scaleLog:lie,scaleOrdinal:lR,scalePoint:N$e,scalePow:vR,scaleQuantile:die,scaleQuantize:fie,scaleRadial:uie,scaleSequential:wie,scaleSequentialLog:Nie,scaleSequentialPow:IR,scaleSequentialQuantile:_ie,scaleSequentialSqrt:OGe,scaleSequentialSymlog:Cie,scaleSqrt:pKe,scaleSymlog:cie,scaleThreshold:Aie,scaleTime:kGe,scaleUtc:FGe,tickFormat:aie},Symbol.toStringTag,{value:"Module"}));var ih=t=>t.chartData,p3=Ut([ih],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),jie=(t,e,r,n)=>n?p3(t):ih(t),RGe=(t,e,r)=>r?p3(t):ih(t);function W0(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(ks(e)&&ks(r))return!0}return!1}function fG(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Bie(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(ks(r))a=r;else if(typeof r=="function")return;if(ks(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(W0(i))return i}}function MGe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(W0(n))return fG(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,i,l;if(a==="auto")e!=null&&(i=Math.min(...e));else if(Xr(a))i=a;else if(typeof a=="function")try{e!=null&&(i=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&j$.test(a)){var c=j$.exec(a);if(c==null||c[1]==null||e==null)i=void 0;else{var u=+c[1];i=e[0]-u}}else i=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Xr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&B$.test(s)){var d=B$.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var h=[i,l];if(W0(h))return e==null?h:fG(h,e,r)}}}var Kv=1e9,LGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PR,ms=!0,Wu="[DecimalError] ",hp=Wu+"Invalid argument: ",BR=Wu+"Exponent out of range: ",Gv=Math.floor,Fm=Math.pow,UGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Uc,co=1e7,Ya=7,Pie=9007199254740991,rI=Gv(Pie/Ya),Dr={};Dr.absoluteValue=Dr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Dr.comparedTo=Dr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Dr.decimalPlaces=Dr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ya;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Dr.dividedBy=Dr.div=function(t){return jA(this,new this.constructor(t))};Dr.dividedToIntegerBy=Dr.idiv=function(t){var e=this,r=e.constructor;return Oa(jA(e,new r(t),0,1),r.precision)};Dr.equals=Dr.eq=function(t){return!this.cmp(t)};Dr.exponent=function(){return bi(this)};Dr.greaterThan=Dr.gt=function(t){return this.cmp(t)>0};Dr.greaterThanOrEqualTo=Dr.gte=function(t){return this.cmp(t)>=0};Dr.isInteger=Dr.isint=function(){return this.e>this.d.length-2};Dr.isNegative=Dr.isneg=function(){return this.s<0};Dr.isPositive=Dr.ispos=function(){return this.s>0};Dr.isZero=function(){return this.s===0};Dr.lessThan=Dr.lt=function(t){return this.cmp(t)<0};Dr.lessThanOrEqualTo=Dr.lte=function(t){return this.cmp(t)<1};Dr.logarithm=Dr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Uc))throw Error(Wu+"NaN");if(r.s<1)throw Error(Wu+(r.s?"NaN":"-Infinity"));return r.eq(Uc)?new n(0):(ms=!1,e=jA(I2(r,s),I2(t,s),s),ms=!0,Oa(e,a))};Dr.minus=Dr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Fie(e,t):Tie(e,(t.s=-t.s,t))};Dr.modulo=Dr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Wu+"NaN");return r.s?(ms=!1,e=jA(r,t,0,1).times(t),ms=!0,r.minus(e)):Oa(new n(r),a)};Dr.naturalExponential=Dr.exp=function(){return kie(this)};Dr.naturalLogarithm=Dr.ln=function(){return I2(this)};Dr.negated=Dr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Dr.plus=Dr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Tie(e,t):Fie(e,(t.s=-t.s,t))};Dr.precision=Dr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(hp+t);if(e=bi(a)+1,n=a.d.length-1,r=n*Ya+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Dr.squareRoot=Dr.sqrt=function(){var t,e,r,n,a,s,i,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wu+"NaN")}for(t=bi(l),ms=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=yf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Gv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(jA(l,s,i+2)).times(.5),yf(s.d).slice(0,i)===(e=yf(n.d)).slice(0,i)){if(e=e.slice(i-3,i+1),a==i&&e=="4999"){if(Oa(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;i+=4}return ms=!0,Oa(n,r)};Dr.times=Dr.mul=function(t){var e,r,n,a,s,i,l,c,u,d=this,f=d.constructor,h=d.d,A=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=h.length,u=A.length,c<u&&(s=h,h=A,A=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+A[n]*h[a-n-1]+e,s[a--]=l%co|0,e=l/co|0;s[a]=(s[a]+e)%co|0}for(;!s[--i];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,ms?Oa(t,f.precision):t};Dr.toDecimalPlaces=Dr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Pf(t,0,Kv),e===void 0?e=n.rounding:Pf(e,0,8),Oa(r,t+bi(r)+1,e))};Dr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Hp(n,!0):(Pf(t,0,Kv),e===void 0?e=a.rounding:Pf(e,0,8),n=Oa(new a(n),t+1,e),r=Hp(n,!0,t+1)),r};Dr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Hp(a):(Pf(t,0,Kv),e===void 0?e=s.rounding:Pf(e,0,8),n=Oa(new s(a),t+bi(a)+1,e),r=Hp(n.abs(),!1,t+bi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Dr.toInteger=Dr.toint=function(){var t=this,e=t.constructor;return Oa(new e(t),bi(t)+1,e.rounding)};Dr.toNumber=function(){return+this};Dr.toPower=Dr.pow=function(t){var e,r,n,a,s,i,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Uc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Wu+"Infinity");return l}if(l.eq(Uc))return l;if(n=c.precision,t.eq(Uc))return Oa(l,n);if(e=t.e,r=t.d.length-1,i=e>=r,s=l.s,i){if((r=d<0?-d:d)<=Pie){for(a=new c(Uc),e=Math.ceil(n/Ya+4),ms=!1;r%2&&(a=a.times(l),hG(a.d,e)),r=Gv(r/2),r!==0;)l=l.times(l),hG(l.d,e);return ms=!0,t.s<0?new c(Uc).div(a):Oa(a,n)}}else if(s<0)throw Error(Wu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ms=!1,a=t.times(I2(l,n+u)),ms=!0,a=kie(a),a.s=s,a};Dr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=bi(a),n=Hp(a,r<=s.toExpNeg||r>=s.toExpPos)):(Pf(t,1,Kv),e===void 0?e=s.rounding:Pf(e,0,8),a=Oa(new s(a),t,e),r=bi(a),n=Hp(a,t<=r||r<=s.toExpNeg,t)),n};Dr.toSignificantDigits=Dr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Pf(t,1,Kv),e===void 0?e=n.rounding:Pf(e,0,8)),Oa(new n(r),t,e)};Dr.toString=Dr.valueOf=Dr.val=Dr.toJSON=Dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=bi(t),r=t.constructor;return Hp(t,e<=r.toExpNeg||e>=r.toExpPos)};function Tie(t,e){var r,n,a,s,i,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),ms?Oa(e,f):e;if(c=t.d,u=e.d,i=t.e,a=e.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=i,l=c.length),i=Math.ceil(f/Ya),l=i>l?i+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/co|0,c[s]%=co;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,ms?Oa(e,f):e}function Pf(t,e,r){if(t!==~~t||t<e||t>r)throw Error(hp+t)}function yf(t){var e,r,n,a=t.length-1,s="",i=t[0];if(a>0){for(s+=i,e=1;e<a;e++)n=t[e]+"",r=Ya-n.length,r&&(s+=qh(r)),s+=n;i=t[e],n=i+"",r=Ya-n.length,r&&(s+=qh(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var jA=function(){function t(n,a){var s,i=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+i,n[l]=s%co|0,i=s/co|0;return i&&n.unshift(i),n}function e(n,a,s,i){var l,c;if(s!=i)c=s>i?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*co+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var l,c,u,d,f,h,A,m,p,g,x,y,b,w,j,I,_,E,S=n.constructor,O=n.s==a.s?1:-1,P=n.d,T=a.d;if(!n.s)return new S(n);if(!a.s)throw Error(Wu+"Division by zero");for(c=n.e-a.e,_=T.length,j=P.length,A=new S(O),m=A.d=[],u=0;T[u]==(P[u]||0);)++u;if(T[u]>(P[u]||0)&&--c,s==null?y=s=S.precision:i?y=s+(bi(n)-bi(a))+1:y=s,y<0)return new S(0);if(y=y/Ya+2|0,u=0,_==1)for(d=0,T=T[0],y++;(u<j||d)&&y--;u++)b=d*co+(P[u]||0),m[u]=b/T|0,d=b%T|0;else{for(d=co/(T[0]+1)|0,d>1&&(T=t(T,d),P=t(P,d),_=T.length,j=P.length),w=_,p=P.slice(0,_),g=p.length;g<_;)p[g++]=0;E=T.slice(),E.unshift(0),I=T[0],T[1]>=co/2&&++I;do d=0,l=e(T,p,_,g),l<0?(x=p[0],_!=g&&(x=x*co+(p[1]||0)),d=x/I|0,d>1?(d>=co&&(d=co-1),f=t(T,d),h=f.length,g=p.length,l=e(f,p,h,g),l==1&&(d--,r(f,_<h?E:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<g&&f.unshift(0),r(p,f,g),l==-1&&(g=p.length,l=e(T,p,_,g),l<1&&(d++,r(p,_<g?E:T,g))),g=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[g++]=P[w]||0:(p=[P[w]],g=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),A.e=c,Oa(A,i?s+bi(A)+1:s)}}();function kie(t,e){var r,n,a,s,i,l,c=0,u=0,d=t.constructor,f=d.precision;if(bi(t)>16)throw Error(BR+bi(t));if(!t.s)return new d(Uc);for(ms=!1,l=f,i=new d(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(n=Math.log(Fm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Uc),d.precision=l;;){if(a=Oa(a.times(t),l),r=r.times(++c),i=s.plus(jA(a,r,l)),yf(i.d).slice(0,l)===yf(s.d).slice(0,l)){for(;u--;)s=Oa(s.times(s),l);return d.precision=f,e==null?(ms=!0,Oa(s,f)):s}s=i}}function bi(t){for(var e=t.e*Ya,r=t.d[0];r>=10;r/=10)e++;return e}function PB(t,e,r){if(e>t.LN10.sd())throw ms=!0,r&&(t.precision=r),Error(Wu+"LN10 precision limit exceeded");return Oa(new t(t.LN10),e)}function qh(t){for(var e="";t--;)e+="0";return e}function I2(t,e){var r,n,a,s,i,l,c,u,d,f=1,h=10,A=t,m=A.d,p=A.constructor,g=p.precision;if(A.s<1)throw Error(Wu+(A.s?"NaN":"-Infinity"));if(A.eq(Uc))return new p(0);if(e==null?(ms=!1,u=g):u=e,A.eq(10))return e==null&&(ms=!0),PB(p,u);if(u+=h,p.precision=u,r=yf(m),n=r.charAt(0),s=bi(A),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)A=A.times(t),r=yf(A.d),n=r.charAt(0),f++;s=bi(A),n>1?(A=new p("0."+r),s++):A=new p(n+"."+r.slice(1))}else return c=PB(p,u+2,g).times(s+""),A=I2(new p(n+"."+r.slice(1)),u-h).plus(c),p.precision=g,e==null?(ms=!0,Oa(A,g)):A;for(l=i=A=jA(A.minus(Uc),A.plus(Uc),u),d=Oa(A.times(A),u),a=3;;){if(i=Oa(i.times(d),u),c=l.plus(jA(i,new p(a),u)),yf(c.d).slice(0,u)===yf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(PB(p,u+2,g).times(s+""))),l=jA(l,new p(f),u),p.precision=g,e==null?(ms=!0,Oa(l,g)):l;l=c,a+=2}}function AG(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Gv(r/Ya),t.d=[],n=(r+1)%Ya,r<0&&(n+=Ya),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Ya;n<a;)t.d.push(+e.slice(n,n+=Ya));e=e.slice(n),n=Ya-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),ms&&(t.e>rI||t.e<-rI))throw Error(BR+r)}else t.s=0,t.e=0,t.d=[0];return t}function Oa(t,e,r){var n,a,s,i,l,c,u,d,f=t.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=e-i,n<0)n+=Ya,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Ya),s=f.length,d>=s)return t;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Ya,a=n-Ya+i}if(r!==void 0&&(s=Fm(10,i-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Fm(10,i-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=bi(t),f.length=1,e=e-s-1,f[0]=Fm(10,(Ya-e%Ya)%Ya),t.e=Gv(-e/Ya)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=Fm(10,Ya-n),f[d]=a>0?(u/Fm(10,i-a)%Fm(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==co&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=co)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ms&&(t.e>rI||t.e<-rI))throw Error(BR+bi(t));return t}function Fie(t,e){var r,n,a,s,i,l,c,u,d,f,h=t.constructor,A=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),ms?Oa(e,A):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(A/Ya),l)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=co-1;--c[s],c[a]+=co}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,ms?Oa(e,A):e):new h(0)}function Hp(t,e,r){var n,a=bi(t),s=yf(t.d),i=s.length;return e?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+qh(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+qh(-a-1)+s,r&&(n=r-i)>0&&(s+=qh(n))):a>=i?(s+=qh(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+qh(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=qh(n))),t.s<0?"-"+s:s}function hG(t,e){if(t.length>e)return t.length=e,!0}function Oie(t){var e,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(hp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return AG(i,s.toString())}else if(typeof s!="string")throw Error(hp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,UGe.test(s))AG(i,s);else throw Error(hp+s)}if(a.prototype=Dr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Oie,a.config=a.set=QGe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function QGe(t){if(!t||typeof t!="object")throw Error(Wu+"Object expected");var e,r,n,a=["precision",1,Kv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Gv(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(hp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(hp+r+": "+n);return this}var PR=Oie(LGe);Uc=new PR(1);const ya=PR;var VGe=t=>t,Die={},Rie=t=>t===Die,mG=t=>function e(){return arguments.length===0||arguments.length===1&&Rie(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Mie=(t,e)=>t===1?e:mG(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Die).length;return s>=t?e(...n):Mie(t-s,mG(function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=n.map(d=>Rie(d)?l.shift():d);return e(...u,...l)}))}),HGe=t=>Mie(t.length,t),eF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},$Ge=HGe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),KGe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return VGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((l,c)=>c(l),s(...arguments))}};function Lie(t){var e;return t===0?e=1:e=Math.floor(new ya(t).abs().log(10).toNumber())+1,e}function Uie(t,e,r){for(var n=new ya(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Qie=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Vie=(t,e,r)=>{if(t.lte(0))return new ya(0);var n=Lie(t.toNumber()),a=new ya(10).pow(n),s=t.div(a),i=n!==1?.05:.1,l=new ya(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=l.mul(a);return e?new ya(c.toNumber()):new ya(Math.ceil(c.toNumber()))},GGe=(t,e,r)=>{var n=new ya(1),a=new ya(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new ya(10).pow(Lie(t)-1),a=new ya(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ya(Math.floor(t)))}else t===0?a=new ya(Math.floor((e-1)/2)):r||(a=new ya(Math.floor(t)));var i=Math.floor((e-1)/2),l=KGe($Ge(c=>a.add(new ya(c-i).mul(n)).toNumber()),eF);return l(0,e)},Hie=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new ya(0),tickMin:new ya(0),tickMax:new ya(0)};var i=Vie(new ya(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new ya(0):(l=new ya(e).add(r).div(2),l=l.sub(new ya(l).mod(i)));var c=Math.ceil(l.sub(e).div(i).toNumber()),u=Math.ceil(new ya(r).sub(l).div(i).toNumber()),d=c+u+1;return d>n?Hie(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:l.sub(new ya(c).mul(i)),tickMax:l.add(new ya(u).mul(i))})},qGe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[l,c]=Qie([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...eF(0,a-1).map(()=>1/0)]:[...eF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return GGe(l,a,s);var{step:d,tickMin:f,tickMax:h}=Hie(l,c,i,s,0),A=Uie(f,h.add(new ya(.1).mul(d)),d);return r>n?A.reverse():A},zGe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=Qie([n,a]);if(i===-1/0||l===1/0)return[n,a];if(i===l)return[i];var c=Math.max(r,2),u=Vie(new ya(l).sub(i).div(c-1),s,0),d=[...Uie(new ya(i),new ya(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},$ie=t=>t.rootProps.maxBarSize,WGe=t=>t.rootProps.barGap,Kie=t=>t.rootProps.barCategoryGap,XGe=t=>t.rootProps.barSize,Ew=t=>t.rootProps.stackOffset,Gie=t=>t.rootProps.reverseStackOrder,TR=t=>t.options.chartName,kR=t=>t.rootProps.syncId,qie=t=>t.rootProps.syncMethod,FR=t=>t.options.eventEmitter,pl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},lA={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Oc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},g3=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},YGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:lA.angleAxisId,includeHidden:!1,name:void 0,reversed:lA.reversed,scale:lA.scale,tick:lA.tick,tickCount:void 0,ticks:void 0,type:lA.type,unit:void 0},JGe={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oc.scale,tick:Oc.tick,tickCount:Oc.tickCount,ticks:void 0,type:Oc.type,unit:void 0},ZGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:lA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:lA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:lA.scale,tick:lA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},eqe={allowDataOverflow:Oc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oc.scale,tick:Oc.tick,tickCount:Oc.tickCount,ticks:void 0,type:"category",unit:void 0},OR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?ZGe:YGe,DR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?eqe:JGe,x3=t=>t.polarOptions,RR=Ut([nh,ah,Gi],Vse),zie=Ut([x3,RR],(t,e)=>{if(t!=null)return xl(t.innerRadius,e,0)}),Wie=Ut([x3,RR],(t,e)=>{if(t!=null)return xl(t.outerRadius,e,e*.8)}),tqe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Xie=Ut([x3],tqe);Ut([OR,Xie],g3);var Yie=Ut([RR,zie,Wie],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Ut([DR,Yie],g3);var Jie=Ut([ea,x3,zie,Wie,nh,ah],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:i,cy:l,startAngle:c,endAngle:u}=e;return{cx:xl(i,a,a/2),cy:xl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),xs=(t,e)=>e,Sw=(t,e,r)=>r;function MR(t){return t==null?void 0:t.id}function Zie(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,i=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=MR(l);u.forEach((f,h)=>{var A=s==null||a?h:String(ts(f,s,null)),m=ts(f,l.dataKey,0),p;i.has(A)?p=i.get(A):p={},Object.assign(p,{[d]:m}),i.set(A,p)})}}),Array.from(i.values())}function v3(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var y3=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function b3(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function rqe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var zi=t=>{var e=ea(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},qv=t=>t.tooltip.settings.axisId;function pG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(r),!0).forEach(function(n){nqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nqe(t,e,r){return(e=aqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aqe(t){var e=sqe(t,"string");return typeof e=="symbol"?e:e+""}function sqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tF=[0,"auto"],ao={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},eoe=(t,e)=>t.cartesianAxis.xAxis[e],oh=(t,e)=>{var r=eoe(t,e);return r??ao},so={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:vw},toe=(t,e)=>t.cartesianAxis.yAxis[e],lh=(t,e)=>{var r=toe(t,e);return r??so},iqe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},LR=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??iqe},Fs=(t,e,r)=>{switch(e){case"xAxis":return oh(t,r);case"yAxis":return lh(t,r);case"zAxis":return LR(t,r);case"angleAxis":return OR(t,r);case"radiusAxis":return DR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},oqe=(t,e,r)=>{switch(e){case"xAxis":return oh(t,r);case"yAxis":return lh(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Iw=(t,e,r)=>{switch(e){case"xAxis":return oh(t,r);case"yAxis":return lh(t,r);case"angleAxis":return OR(t,r);case"radiusAxis":return DR(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},roe=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function UR(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var QR=t=>t.graphicalItems.cartesianItems,lqe=Ut([xs,Sw],UR),VR=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),jw=Ut([QR,Fs,lqe],VR,{memoizeOptions:{resultEqualityCheck:b3}}),noe=Ut([jw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(v3)),aoe=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),cqe=Ut([jw],aoe),HR=t=>t.map(e=>e.data).filter(Boolean).flat(1),uqe=Ut([jw],HR,{memoizeOptions:{resultEqualityCheck:b3}}),$R=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},KR=Ut([uqe,jie],$R),GR=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ts(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:ts(a,n)}))):t.map(n=>({value:n})),w3=Ut([KR,Fs,jw],GR);function soe(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function $_(t){if(Bf(t)||t instanceof Date){var e=Number(t);if(ks(e))return e}}function gG(t){if(Array.isArray(t)){var e=[$_(t[0]),$_(t[1])];return W0(e)?e:void 0}var r=$_(t);if(r!=null)return[r,r]}function KA(t){return t.map($_).filter(v7e)}function dqe(t,e,r){return!r||typeof e!="number"||jf(e)?[]:r.length?KA(r.flatMap(n=>{var a=ts(t,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!ks(s)||!ks(i)))return[e-s,e+i]})):[]}var Wi=t=>{var e=zi(t),r=qv(t);return Iw(t,e,r)},Bw=Ut([Wi],t=>t==null?void 0:t.dataKey),fqe=Ut([noe,jie,Wi],Zie),ioe=(t,e,r,n)=>{var a={},s=e.reduce((i,l)=>{if(l.stackId==null)return i;var c=i[l.stackId];return c==null&&(c=[]),c.push(l),i[l.stackId]=c,i},a);return Object.fromEntries(Object.entries(s).map(i=>{var[l,c]=i,u=n?[...c].reverse():c,d=u.map(MR);return[l,{stackedData:RQe(t,d,r),graphicalItems:u}]}))},rF=Ut([fqe,noe,Ew,Gie],ioe),ooe=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var i=VQe(t,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},Aqe=Ut([Fs],t=>t.allowDataOverflow),qR=t=>{var e;if(t==null||!("domain"in t))return tF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=KA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:tF},zR=Ut([Fs],qR),WR=Ut([zR,Aqe],Bie),hqe=Ut([rF,ih,xs,WR],ooe,{memoizeOptions:{resultEqualityCheck:y3}}),N3=t=>t.errorBars,mqe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>soe(r,n)),aI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),l=Math.max(...s);return[i,l]}},XR=(t,e,r,n,a)=>{var s,i;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(x=>soe(a,x)),h=ts(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),A=dqe(l,h,f);if(A.length>=2){var m=Math.min(...A),p=Math.max(...A);(s==null||m<s)&&(s=m),(i==null||p>i)&&(i=p)}var g=gG(h);g!=null&&(s=s==null?g[0]:Math.min(s,g[0]),i=i==null?g[1]:Math.max(i,g[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=gG(ts(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),i=i==null?c[1]:Math.max(i,c[1]))}),ks(s)&&ks(i))return[s,i]},pqe=Ut([KR,Fs,cqe,N3,xs],XR,{memoizeOptions:{resultEqualityCheck:y3}});function gqe(t){var{value:e}=t;if(Bf(e)||e instanceof Date)return e}var xqe=(t,e,r)=>{var n=t.map(gqe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&sae(n))?Wse(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},loe=t=>t.referenceElements.dots,zv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),vqe=Ut([loe,xs,Sw],zv),coe=t=>t.referenceElements.areas,yqe=Ut([coe,xs,Sw],zv),uoe=t=>t.referenceElements.lines,bqe=Ut([uoe,xs,Sw],zv),doe=(t,e)=>{if(t!=null){var r=KA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},wqe=Ut(vqe,xs,doe),foe=(t,e)=>{if(t!=null){var r=KA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Nqe=Ut([yqe,xs],foe);function Cqe(t){var e;if(t.x!=null)return KA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:KA(r)}function _qe(t){var e;if(t.y!=null)return KA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:KA(r)}var Aoe=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?Cqe(n):_qe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Eqe=Ut([bqe,xs],Aoe),Sqe=Ut(wqe,Eqe,Nqe,(t,e,r)=>aI(t,r,e)),YR=(t,e,r,n,a,s,i,l)=>{if(r!=null)return r;var c=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",u=c?aI(n,s,a):aI(s,a);return MGe(e,u,t.allowDataOverflow)},Iqe=Ut([Fs,zR,WR,hqe,pqe,Sqe,ea,xs],YR,{memoizeOptions:{resultEqualityCheck:y3}}),jqe=[0,1],JR=(t,e,r,n,a,s,i)=>{if(!((t==null||r==null||r.length===0)&&i===void 0)){var{dataKey:l,type:c}=t,u=ug(e,s);if(u&&l==null){var d;return Wse(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?xqe(n,t,u):a==="expand"?jqe:i}},ZR=Ut([Fs,ea,KR,w3,Ew,xs,Iqe],JR),hoe=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:i}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(hw(s));return l in _y?l:"point"}}},Wv=Ut([Fs,ea,roe,TR,xs],hoe);function Bqe(t){if(t!=null){if(t in _y)return _y[t]();var e="scale".concat(hw(t));if(e in _y)return _y[e]()}}function e8(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=Bqe(e);if(a!=null){var s=a.domain(r).range(n);return TQe(s),s}}}var t8=(t,e,r)=>{var n=qR(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&W0(t))return qGe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&W0(t))return zGe(t,e.tickCount,e.allowDecimals)}},r8=Ut([ZR,Iw,Wv],t8),n8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&W0(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],i=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(i,l)]}return e},Pqe=Ut([Fs,ZR,r8,xs],n8),Tqe=Ut(w3,Fs,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(KA(t.map(f=>f.value))).sort((f,h)=>f-h),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var i=s-a;if(i===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/i}}),moe=Ut(Tqe,ea,Kie,Gi,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!ks(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var i=xl(r,t*s),l=t*s/2;return l-i-(l-i)/s*i}return 0}),kqe=(t,e,r)=>{var n=oh(t,e);return n==null||typeof n.padding!="string"?0:moe(t,"xAxis",e,r,n.padding)},Fqe=(t,e,r)=>{var n=lh(t,e);return n==null||typeof n.padding!="string"?0:moe(t,"yAxis",e,r,n.padding)},Oqe=Ut(oh,kqe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),Dqe=Ut(lh,Fqe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),Rqe=Ut([Gi,Oqe,t3,e3,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Mqe=Ut([Gi,ea,Dqe,t3,e3,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),Pw=(t,e,r,n)=>{var a;switch(e){case"xAxis":return Rqe(t,r,n);case"yAxis":return Mqe(t,r,n);case"zAxis":return(a=LR(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Xie(t);case"radiusAxis":return Yie(t,r);default:return}},poe=Ut([Fs,Pw],g3),C3=Ut([Fs,Wv,Pqe,poe],e8);Ut([jw,N3,xs],mqe);function goe(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var _3=(t,e)=>e,E3=(t,e,r)=>r,Lqe=Ut(J4,_3,E3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(goe)),Uqe=Ut(Z4,_3,E3,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(goe)),xoe=(t,e)=>({width:t.width,height:e.height}),Qqe=(t,e)=>{var r=typeof e.width=="number"?e.width:vw;return{width:r,height:t.height}},voe=Ut(Gi,oh,xoe),Vqe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Hqe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},$qe=Ut(ah,Gi,Lqe,_3,E3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=xoe(e,l);i==null&&(i=Vqe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),Kqe=Ut(nh,Gi,Uqe,_3,E3,(t,e,r,n,a)=>{var s={},i;return r.forEach(l=>{var c=Qqe(e,l);i==null&&(i=Hqe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),Gqe=(t,e)=>{var r=oh(t,e);if(r!=null)return $qe(t,r.orientation,r.mirror)},qqe=Ut([Gi,oh,Gqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),zqe=(t,e)=>{var r=lh(t,e);if(r!=null)return Kqe(t,r.orientation,r.mirror)},Wqe=Ut([Gi,lh,zqe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),yoe=Ut(Gi,lh,(t,e)=>{var r=typeof e.width=="number"?e.width:vw;return{width:r,height:t.height}}),xG=(t,e,r)=>{switch(e){case"xAxis":return voe(t,r).width;case"yAxis":return yoe(t,r).height;default:return}},boe=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,l=ug(t,n),c=e.map(u=>u.value);if(i&&l&&s==="category"&&a&&sae(c))return c}},a8=Ut([ea,w3,Fs,xs],boe),woe=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=ug(t,n);if(i&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},s8=Ut([ea,w3,Iw,xs],woe);Ut([ea,oqe,Wv,C3,a8,s8,Pw,r8,xs],(t,e,r,n,a,s,i,l,c)=>{if(e!=null){var u=ug(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:i,realScaleType:r,scale:n}}});var Xqe=(t,e,r,n,a,s,i,l,c)=>{if(!(e==null||n==null)){var u=ug(t,c),{type:d,ticks:f,tickCount:h}=e,A=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/A:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Ko(s[0]-s[1])*2*m:m;var p=f||a;if(p){var g=p.map((x,y)=>{var b=i?i.indexOf(x):x;return{index:y,coordinate:n(b)+m,value:x,offset:m}});return g.filter(x=>ks(x.coordinate))}return u&&l?l.map((x,y)=>({coordinate:n(x)+m,value:x,index:y,offset:m})).filter(x=>ks(x.coordinate)):n.ticks?n.ticks(h).map(x=>({coordinate:n(x)+m,value:x,offset:m})):n.domain().map((x,y)=>({coordinate:n(x)+m,value:i?i[x]:x,index:y,offset:m}))}},Noe=Ut([ea,Iw,Wv,C3,r8,Pw,a8,s8,xs],Xqe),Yqe=(t,e,r,n,a,s,i)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=ug(t,i),{tickCount:c}=e,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Ko(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},vv=Ut([ea,Iw,C3,Pw,a8,s8,xs],Yqe),yv=Ut(Fs,C3,(t,e)=>{if(!(t==null||e==null))return nI(nI({},t),{},{scale:e})}),Jqe=Ut([Fs,Wv,ZR,poe],e8);Ut((t,e,r)=>LR(t,r),Jqe,(t,e)=>{if(!(t==null||e==null))return nI(nI({},t),{},{scale:e})});var Zqe=Ut([ea,J4,Z4],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Coe=t=>t.options.defaultTooltipEventType,_oe=t=>t.options.validateTooltipEventTypes;function Eoe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function i8(t,e){var r=Coe(t),n=_oe(t);return Eoe(e,r,n)}function eze(t){return Gr(e=>i8(e,t))}var Soe=(t,e)=>{var r,n=Number(e);if(!(jf(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},tze=t=>t.tooltip.settings,a0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},rze={itemInteraction:{click:a0,hover:a0},axisInteraction:{click:a0,hover:a0},keyboardInteraction:a0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Ioe=vc({name:"tooltip",initialState:rze,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:cs()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Pd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:cs()},removeTooltipEntrySettings:{reducer(t,e){var r=Pd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:cs()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:nze,replaceTooltipEntrySettings:aze,removeTooltipEntrySettings:sze,setTooltipSettingsState:ize,setActiveMouseOverItemIndex:joe,mouseLeaveItem:oze,mouseLeaveChart:Boe,setActiveClickItemIndex:lze,setMouseOverAxisIndex:Poe,setMouseClickAxisIndex:cze,setSyncInteraction:nF,setKeyboardInteraction:aF}=Ioe.actions,uze=Ioe.reducer;function vG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vG(Object(r),!0).forEach(function(n){dze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dze(t,e,r){return(e=fze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fze(t){var e=Aze(t,"string");return typeof e=="symbol"?e:e+""}function Aze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hze(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function mze(t){return t.index!=null}var Toe=(t,e,r,n)=>{if(e==null)return a0;var a=hze(t,e,r);if(a==null)return a0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(mze(a)){if(s)return WC(WC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return WC(WC({},a0),{},{coordinate:a.coordinate})};function pze(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function gze(t,e){var r=pze(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),i=Math.max(n,a);return r>=s&&r<=i}function xze(t,e,r){if(r==null||e==null)return!0;var n=ts(t,e);return n==null||!W0(r)?!0:gze(n,r)}var o8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!ks(s))return a;var i=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(i,Math.min(s,l)),u=e[c];return u==null||xze(u,r,n)?String(c):null},koe=(t,e,r,n,a,s,i,l)=>{if(!(s==null||l==null)){var c=i[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Foe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},Tw=t=>t.options.tooltipPayloadSearcher,Xv=t=>t.tooltip;function yG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(r),!0).forEach(function(n){vze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vze(t,e,r){return(e=yze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yze(t){var e=bze(t,"string");return typeof e=="symbol"?e:e+""}function bze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wze(t,e){return t??e}var Ooe=(t,e,r,n,a,s,i)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((h,A)=>{var m,{dataDefinedOnItem:p,settings:g}=A,x=wze(p,l),y=Array.isArray(x)?Ase(x,u,d):x,b=(m=g==null?void 0:g.dataKey)!==null&&m!==void 0?m:n,w=g==null?void 0:g.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&i==="axis"?j=x7e(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var E=bG(bG({},g),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(P$({tooltipEntrySettings:E,dataKey:_.dataKey,payload:_.payload,value:ts(_.payload,_.dataKey),name:_.name}))});else{var I;h.push(P$({tooltipEntrySettings:g,dataKey:b,payload:j,value:ts(j,b),name:(I=ts(j,w))!==null&&I!==void 0?I:g==null?void 0:g.name}))}return h},f)}},l8=Ut([Wi,ea,roe,TR,zi],hoe),Nze=Ut([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Cze=Ut([zi,qv],UR),Yv=Ut([Nze,Wi,Cze],VR,{memoizeOptions:{resultEqualityCheck:b3}}),_ze=Ut([Yv],t=>t.filter(v3)),Eze=Ut([Yv],HR,{memoizeOptions:{resultEqualityCheck:b3}}),Jv=Ut([Eze,ih],$R),Sze=Ut([_ze,ih,Wi],Zie),c8=Ut([Jv,Wi,Yv],GR),Doe=Ut([Wi],qR),Ize=Ut([Wi],t=>t.allowDataOverflow),Roe=Ut([Doe,Ize],Bie),jze=Ut([Yv],t=>t.filter(v3)),Bze=Ut([Sze,jze,Ew,Gie],ioe),Pze=Ut([Bze,ih,zi,Roe],ooe),Tze=Ut([Yv],aoe),kze=Ut([Jv,Wi,Tze,N3,zi],XR,{memoizeOptions:{resultEqualityCheck:y3}}),Fze=Ut([loe,zi,qv],zv),Oze=Ut([Fze,zi],doe),Dze=Ut([coe,zi,qv],zv),Rze=Ut([Dze,zi],foe),Mze=Ut([uoe,zi,qv],zv),Lze=Ut([Mze,zi],Aoe),Uze=Ut([Oze,Lze,Rze],aI),Qze=Ut([Wi,Doe,Roe,Pze,kze,Uze,ea,zi],YR),kw=Ut([Wi,ea,Jv,c8,Ew,zi,Qze],JR),Vze=Ut([kw,Wi,l8],t8),Hze=Ut([Wi,kw,Vze,zi],n8),Moe=t=>{var e=zi(t),r=qv(t),n=!1;return Pw(t,e,r,n)},Loe=Ut([Wi,Moe],g3),Uoe=Ut([Wi,l8,Hze,Loe],e8),$ze=Ut([ea,c8,Wi,zi],boe),Kze=Ut([ea,c8,Wi,zi],woe),Gze=(t,e,r,n,a,s,i,l)=>{if(e){var{type:c}=e,u=ug(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Ko(a[0]-a[1])*2*f:f,u&&i?i.map((h,A)=>({coordinate:n(h)+f,value:h,index:A,offset:f})):n.domain().map((h,A)=>({coordinate:n(h)+f,value:s?s[h]:h,index:A,offset:f}))}}},ch=Ut([ea,Wi,l8,Uoe,Moe,$ze,Kze,zi],Gze),u8=Ut([Coe,_oe,tze],(t,e,r)=>Eoe(r.shared,t,e)),Qoe=t=>t.tooltip.settings.trigger,d8=t=>t.tooltip.settings.defaultIndex,Fw=Ut([Xv,u8,Qoe,d8],Toe),$p=Ut([Fw,Jv,Bw,kw],o8),Voe=Ut([ch,$p],Soe),f8=Ut([Fw],t=>{if(t)return t.dataKey}),qze=Ut([Fw],t=>{if(t)return t.graphicalItemId}),Hoe=Ut([Xv,u8,Qoe,d8],Foe),zze=Ut([nh,ah,ea,Gi,ch,d8,Hoe,Tw],koe),Wze=Ut([Fw,zze],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Xze=Ut([Fw],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Yze=Ut([Hoe,$p,ih,Bw,Voe,Tw,u8],Ooe);Ut([Yze],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function wG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(r),!0).forEach(function(n){Jze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jze(t,e,r){return(e=Zze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zze(t){var e=eWe(t,"string");return typeof e=="symbol"?e:e+""}function eWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tWe=()=>Gr(Wi),rWe=()=>{var t=tWe(),e=Gr(ch),r=Gr(Uoe);return RS(!t||!r?void 0:NG(NG({},t),{},{scale:r}),e)};function CG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(r),!0).forEach(function(n){nWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nWe(t,e,r){return(e=aWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aWe(t){var e=sWe(t,"string");return typeof e=="symbol"?e:e+""}function sWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iWe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},oWe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:i}=n;return Gg(Gg(Gg({},n),yi(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var l=a.coordinate,{angle:c}=n;return Gg(Gg(Gg({},n),yi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function lWe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var $oe=(t,e,r,n,a)=>{var s,i=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(i<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<i;l++){var c,u,d,f,h,A=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[i-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=i-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,g=void 0;if(!(A==null||m==null||p==null))if(Ko(m-A)!==Ko(p-m)){var x=[];if(Ko(p-m)===Ko(a[1]-a[0])){g=p;var y=m+a[1]-a[0];x[0]=Math.min(y,(y+A)/2),x[1]=Math.max(y,(y+A)/2)}else{g=A;var b=p+a[1]-a[0];x[0]=Math.min(m,(b+m)/2),x[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(t>w[0]&&t<=w[1]||t>=x[0]&&t<=x[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(A,p),_=Math.max(A,p);if(t>(I+m)/2&&t<=(_+m)/2){var E;return(E=r[l])===null||E===void 0?void 0:E.index}}}else if(e)for(var S=0;S<i;S++){var O=e[S];if(O!=null){var P=e[S+1],T=e[S-1];if(S===0&&P!=null&&t<=(O.coordinate+P.coordinate)/2||S===i-1&&T!=null&&t>(O.coordinate+T.coordinate)/2||S>0&&S<i-1&&T!=null&&P!=null&&t>(O.coordinate+T.coordinate)/2&&t<=(O.coordinate+P.coordinate)/2)return O.index}}return-1},cWe=()=>Gr(TR),A8=(t,e)=>e,Koe=(t,e,r)=>r,h8=(t,e,r,n)=>n,uWe=Ut(ch,t=>Q4(t,e=>e.coordinate)),m8=Ut([Xv,A8,Koe,h8],Toe),p8=Ut([m8,Jv,Bw,kw],o8),dWe=(t,e,r)=>{if(e!=null){var n=Xv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Goe=Ut([Xv,A8,Koe,h8],Foe),sI=Ut([nh,ah,ea,Gi,ch,h8,Goe,Tw],koe),fWe=Ut([m8,sI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),qoe=Ut([ch,p8],Soe),AWe=Ut([Goe,p8,ih,Bw,qoe,Tw,A8],Ooe),hWe=Ut([m8,p8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),mWe=(t,e,r,n,a,s,i)=>{if(!(!t||!r||!n||!a)&&lWe(t,i)){var l=HQe(t,e),c=$oe(l,s,a,r,n),u=iWe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},pWe=(t,e,r,n,a,s,i)=>{if(!(!t||!n||!a||!s||!r)){var l=n$e(t,r);if(l){var c=$Qe(l,e),u=$oe(c,i,s,n,a),d=oWe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},gWe=(t,e,r,n,a,s,i,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?mWe(t,e,n,a,s,i,l):pWe(t,e,r,n,a,s,i)},xWe=Ut(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),vWe=Ut(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(pl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:rqe}});function _G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(r),!0).forEach(function(n){yWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yWe(t,e,r){return(e=bWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bWe(t){var e=wWe(t,"string");return typeof e=="symbol"?e:e+""}function wWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NWe={},CWe={zIndexMap:Object.values(pl).reduce((t,e)=>EG(EG({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),NWe)},_We=new Set(Object.values(pl));function EWe(t){return _We.has(t)}var zoe=vc({name:"zIndex",initialState:CWe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:cs()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!EWe(r)&&delete t.zIndexMap[r])},prepare:cs()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:cs()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:cs()}}}),{registerZIndexPortal:SWe,unregisterZIndexPortal:IWe,registerZIndexPortalElement:jWe,unregisterZIndexPortalElement:BWe}=zoe.actions,PWe=zoe.reducer;function Mf(t){var{zIndex:e,children:r}=t,n=xVe(),a=n&&e!==void 0&&e!==0,s=eu(),i=Ka();v.useLayoutEffect(()=>a?(i(SWe({zIndex:e})),()=>{i(IWe({zIndex:e}))}):mw,[i,e,a]);var l=Gr(c=>xWe(c,e,s));return a?l?Lu.createPortal(r,l):null:r}function sF(){return sF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sF.apply(null,arguments)}function SG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(r),!0).forEach(function(n){TWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TWe(t,e,r){return(e=kWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kWe(t){var e=FWe(t,"string");return typeof e=="symbol"?e:e+""}function FWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OWe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return v.isValidElement(e)?v.cloneElement(e,n):v.createElement(r,n)}function DWe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,h=n,A=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,g;if(d==="ScatterChart")m=f,p=gHe,g=pl.cursorLine;else if(d==="BarChart")m=xHe(l,f,s,i),p=Qse,g=pl.cursorRectangle;else if(l==="radial"&&oae(f)){var{cx:x,cy:y,radius:b,startAngle:w,endAngle:j}=Hse(f);m={cx:x,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=Kse,g=pl.cursorLine}else m={points:o$e(l,f,s)},p=iR,g=pl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=XC(XC(XC(XC({stroke:"#ccc",pointerEvents:"none"},s),m),m2(c)),{},{payload:h,payloadIndex:A,className:_a("recharts-tooltip-cursor",I)});return v.createElement(Mf,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:g},v.createElement(OWe,{cursor:c,cursorComp:p,cursorProps:_}))}function RWe(t){var e=rWe(),r=pVe(),n=yw(),a=cWe();return e==null||r==null||n==null||a==null?null:v.createElement(DWe,sF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Woe=v.createContext(null),MWe=()=>v.useContext(Woe),Xoe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var A=new a(d,f||c,h),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],A]:c._events[m].push(A):(c._events[m]=A,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,A=f.length,m=new Array(A);h<A;h++)m[h]=f[h].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,A,m){var p=r?r+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,f),!0;case 4:return g.fn.call(g.context,d,f,h),!0;case 5:return g.fn.call(g.context,d,f,h,A),!0;case 6:return g.fn.call(g.context,d,f,h,A,m),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var w=g.length,j;for(b=0;b<w;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,f);break;case 4:g[b].fn.call(g[b].context,d,f,h);break;default:if(!y)for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var A=r?r+u:u;if(!this._events[A])return this;if(!d)return i(this,A),this;var m=this._events[A];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&i(this,A);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==d||h&&!m[p].once||f&&m[p].context!==f)&&g.push(m[p]);g.length?this._events[A]=g.length===1?g[0]:g:i(this,A)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Xoe);var LWe=Xoe.exports;const UWe=qA(LWe);var j2=new UWe,iF="recharts.syncEvent.tooltip",IG="recharts.syncEvent.brush";function Yoe(t,e){if(e){var r=Number.parseInt(e,10);if(!jf(r))return t==null?void 0:t[r]}}var QWe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Joe=vc({name:"options",initialState:QWe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VWe=Joe.reducer,{createEventEmitter:HWe}=Joe.actions;function $We(t){return t.tooltip.syncInteraction}var KWe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Zoe=vc({name:"chartData",initialState:KWe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:jG,setDataStartEndIndexes:GWe,setComputedData:Yrt}=Zoe.actions,qWe=Zoe.reducer,zWe=["x","y"];function BG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BG(Object(r),!0).forEach(function(n){WWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WWe(t,e,r){return(e=XWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XWe(t){var e=YWe(t,"string");return typeof e=="symbol"?e:e+""}function YWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JWe(t,e){if(t==null)return{};var r,n,a=ZWe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ZWe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eXe(){var t=Gr(kR),e=Gr(FR),r=Ka(),n=Gr(qie),a=Gr(ch),s=yw(),i=r3(),l=Gr(c=>c.rootProps.className);v.useEffect(()=>{if(t==null)return mw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var A=d.payload.coordinate,{x:m,y:p}=A,g=JWe(A,zWe),{x,y,width:b,height:w}=d.payload.sourceViewBox,j=qg(qg({},g),{},{x:i.x+(b?(m-x)/b:0)*i.width,y:i.y+(w?(p-y)/w:0)*i.height});r(qg(qg({},d),{},{payload:qg(qg({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(a,_);I=a[E]}else n==="value"&&(I=a.find(le=>String(le.value)===d.payload.label));var{coordinate:S}=d.payload;if(I==null||d.payload.active===!1||S==null||i==null){r(nF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:P}=S,T=Math.min(O,i.x+i.width),F=Math.min(P,i.y+i.height),J={x:s==="horizontal"?I.coordinate:T,y:s==="horizontal"?F:I.coordinate},ge=nF({active:d.payload.active,coordinate:J,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(ge)}}};return j2.on(iF,c),()=>{j2.off(iF,c)}},[l,r,e,t,n,a,s,i])}function tXe(){var t=Gr(kR),e=Gr(FR),r=Ka();v.useEffect(()=>{if(t==null)return mw;var n=(a,s,i)=>{e!==i&&t===a&&r(GWe(s))};return j2.on(IG,n),()=>{j2.off(IG,n)}},[r,e,t])}function rXe(){var t=Ka();v.useEffect(()=>{t(HWe())},[t]),eXe(),tXe()}function nXe(t,e,r,n,a,s){var i=Gr(A=>dWe(A,t,e)),l=Gr(FR),c=Gr(kR),u=Gr(qie),d=Gr($We),f=d==null?void 0:d.active,h=r3();v.useEffect(()=>{if(!f&&c!=null&&l!=null){var A=nF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});j2.emit(iF,c,A,l)}},[f,r,i,a,n,l,c,u,s,h])}function PG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(n){aXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aXe(t,e,r){return(e=sXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sXe(t){var e=iXe(t,"string");return typeof e=="symbol"?e:e+""}function iXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oXe(t){return t.dataKey}function lXe(t,e){return v.isValidElement(t)?v.cloneElement(t,e):typeof t=="function"?v.createElement(t,e):v.createElement(XVe,e)}var kG=[],cXe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function FG(t){var e,r,n=zo(t,cXe),{active:a,allowEscapeViewBox:s,animationDuration:i,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:A,reverseDirection:m,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=Ka(),E=typeof w=="number"?String(w):w;v.useEffect(()=>{_(ize({shared:y,trigger:b,axisId:I,active:a,defaultIndex:E}))},[_,y,b,I,a,E]);var S=r3(),O=Dse(),P=eze(y),{activeIndex:T,isActive:F}=(e=Gr(X=>hWe(X,P,b,E)))!==null&&e!==void 0?e:{},J=Gr(X=>AWe(X,P,b,E)),ge=Gr(X=>qoe(X,P,b,E)),le=Gr(X=>fWe(X,P,b,E)),de=J,Ae=MWe(),se=(r=a??F)!==null&&r!==void 0?r:!1,[Ie,Pe]=Rae([de,se]),k=P==="axis"?ge:void 0;nXe(P,b,le,k,T,se);var H=j??Ae;if(H==null||S==null||P==null)return null;var R=de??kG;se||(R=kG),u&&R.length&&(R=_ae(R.filter(X=>X.value!=null&&(X.hide!==!0||n.includeHidden)),h,oXe));var M=R.length>0,G=v.createElement(nHe,{allowEscapeViewBox:s,animationDuration:i,animationEasing:l,isAnimationActive:d,active:se,coordinate:le,hasPayload:M,offset:f,position:A,reverseDirection:m,useTranslate3d:p,viewBox:S,wrapperStyle:g,lastBoundingBox:Ie,innerRef:Pe,hasPortalFromProps:!!j},lXe(c,TG(TG({},n),{},{payload:R,label:k,active:se,activeIndex:T,coordinate:le,accessibilityLayer:O})));return v.createElement(v.Fragment,null,Lu.createPortal(G,H),se&&v.createElement(RWe,{cursor:x,tooltipEventType:P,coordinate:le,payload:R,index:T}))}var Ow=t=>null;Ow.displayName="Cell";function uXe(t,e,r){return(e=dXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dXe(t){var e=fXe(t,"string");return typeof e=="symbol"?e:e+""}function fXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class AXe{constructor(e){uXe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function OG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hXe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(r),!0).forEach(function(n){mXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mXe(t,e,r){return(e=pXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pXe(t){var e=gXe(t,"string");return typeof e=="symbol"?e:e+""}function gXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xXe={cacheSize:2e3,enableCache:!0},ele=hXe({},xXe),DG=new AXe(ele.cacheSize),vXe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RG="recharts_measurement_span";function yXe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",i=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(l)}var MG=(t,e)=>{try{var r=document.getElementById(RG);r||(r=document.createElement("span"),r.setAttribute("id",RG),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,vXe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ub=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||o3.isSsr)return{width:0,height:0};if(!ele.enableCache)return MG(e,r);var n=yXe(e,r),a=DG.get(n);if(a)return a;var s=MG(e,r);return DG.set(n,s),s},tle;function bXe(t,e,r){return(e=wXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wXe(t){var e=NXe(t,"string");return typeof e=="symbol"?e:e+""}function NXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CXe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_Xe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EXe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},SXe=["cm","mm","pt","pc","in","Q","px"];function IXe(t){return SXe.includes(t)}var Ex="NaN";function jXe(t,e){return t*EXe[e]}class Fo{static parse(e){var r,[,n,a]=(r=_Xe.exec(e))!==null&&r!==void 0?r:[];return n==null?Fo.NaN:new Fo(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,jf(e)&&(this.unit=""),r!==""&&!CXe.test(r)&&(this.num=NaN,this.unit=""),IXe(r)&&(this.num=jXe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Fo(NaN,""):new Fo(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return jf(this.num)}}tle=Fo;bXe(Fo,"NaN",new tle(NaN,""));function rle(t){if(t==null||t.includes(Ex))return Ex;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=LG.exec(e))!==null&&r!==void 0?r:[],i=Fo.parse(n??""),l=Fo.parse(s??""),c=a==="*"?i.multiply(l):i.divide(l);if(c.isNaN())return Ex;e=e.replace(LG,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,h]=(u=UG.exec(e))!==null&&u!==void 0?u:[],A=Fo.parse(d??""),m=Fo.parse(h??""),p=f==="+"?A.add(m):A.subtract(m);if(p.isNaN())return Ex;e=e.replace(UG,p.toString())}return e}var QG=/\(([^()]*)\)/;function BXe(t){for(var e=t,r;(r=QG.exec(e))!=null;){var[,n]=r;e=e.replace(QG,rle(n))}return e}function PXe(t){var e=t.replace(/\s+/g,"");return e=BXe(e),e=rle(e),e}function TXe(t){try{return PXe(t)}catch{return Ex}}function TB(t){var e=TXe(t.slice(5,-1));return e===Ex?"":e}var kXe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],FXe=["dx","dy","angle","className","breakAll"];function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function VG(t,e){if(t==null)return{};var r,n,a=OXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function OXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var nle=/[ \f\n\r\t\v\u2028\u2029]+/,ale=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];vo(e)||(r?a=e.toString().split(""):a=e.toString().split(nle));var s=a.map(l=>({word:l,width:ub(l,n).width})),i=r?0:ub("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}};function DXe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var sle=(t,e,r,n)=>t.reduce((a,s)=>{var{word:i,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(i),c.width+=l+r;else{var u={words:[i],width:l};a.push(u)}return a},[]),ile=t=>t.reduce((e,r)=>e.width>r.width?e:r),RXe="",HG=(t,e,r,n,a,s,i,l)=>{var c=t.slice(0,e),u=ale({breakAll:r,style:n,children:c+RXe});if(!u)return[!1,[]];var d=sle(u.wordsWithComputedWidth,s,i,l),f=d.length>a||ile(d).width>Number(s);return[f,d]},MXe=(t,e,r,n,a)=>{var{maxLines:s,children:i,style:l,breakAll:c}=t,u=Xr(s),d=String(i),f=sle(e,n,r,a);if(!u||a)return f;var h=f.length>s||ile(f).width>Number(n);if(!h)return f;for(var A=0,m=d.length-1,p=0,g;A<=m&&p<=d.length-1;){var x=Math.floor((A+m)/2),y=x-1,[b,w]=HG(d,y,c,l,s,n,r,a),[j]=HG(d,x,c,l,s,n,r,a);if(!b&&!j&&(A=x+1),b&&j&&(m=x-1),!b&&j){g=w;break}p++}return g||f},$G=t=>{var e=vo(t)?[]:t.toString().split(nle);return[{words:e,width:void 0}]},LXe=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=t;if((e||r)&&!o3.isSsr){var l,c,u=ale({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return $G(n);return MXe({breakAll:s,children:n,maxLines:i,style:a},l,c,e,!!r)}return $G(n)},ole="#808080",UXe={angle:0,breakAll:!1,capHeight:"0.71em",fill:ole,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},S3=v.forwardRef((t,e)=>{var r=zo(t,UXe),{x:n,y:a,lineHeight:s,capHeight:i,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=VG(r,kXe),h=v.useMemo(()=>LXe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:A,dy:m,angle:p,className:g,breakAll:x}=f,y=VG(f,FXe);if(!Bf(n)||!Bf(a)||h.length===0)return null;var b=Number(n)+(Xr(A)?A:0),w=Number(a)+(Xr(m)?m:0);if(!ks(b)||!ks(w))return null;var j;switch(d){case"start":j=TB("calc(".concat(i,")"));break;case"middle":j=TB("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:j=TB("calc(".concat(h.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=h[0].width,{width:E}=f;I.push("scale(".concat(Xr(E)&&Xr(_)?E/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),v.createElement("text",oF({},qu(y),{ref:e,x:b,y:w,className:_a("recharts-text",g),textAnchor:u,fill:l.includes("url")?ole:l}),h.map((S,O)=>{var P=S.words.join(x?"":" ");return v.createElement("tspan",{x:b,dy:O===0?j:s,key:"".concat(P,"-").concat(O)},P)}))});S3.displayName="Text";var QXe=["labelRef"],VXe=["content"];function KG(t,e){if(t==null)return{};var r,n,a=HXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function HXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function GG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GG(Object(r),!0).forEach(function(n){$Xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Xe(t,e,r){return(e=KXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KXe(t){var e=GXe(t,"string");return typeof e=="symbol"?e:e+""}function GXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cA.apply(null,arguments)}var lle=v.createContext(null),qXe=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i,children:l}=t,c=v.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:i}),[e,r,n,a,s,i]);return v.createElement(lle.Provider,{value:c},l)},cle=()=>{var t=v.useContext(lle),e=r3();return t||Nse(e)},zXe=v.createContext(null),WXe=()=>{var t=v.useContext(zXe),e=Gr(Jie);return t||e},XXe=t=>{var{value:e,formatter:r}=t,n=vo(t.children)?e:t.children;return typeof r=="function"?r(n):n},g8=t=>t!=null&&typeof t=="function",YXe=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),360);return r*n},JXe=(t,e,r,n,a)=>{var{offset:s,className:i}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:A}=a,m=(u+d)/2,p=YXe(f,h),g=p>=0?1:-1,x,y;switch(e){case"insideStart":x=f+g*s,y=A;break;case"insideEnd":x=h-g*s,y=!A;break;case"end":x=h+g*s,y=A;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=yi(l,c,m,x),w=yi(l,c,m,x+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=vo(t.id)?p2("recharts-radial-line-"):t.id;return v.createElement("text",cA({},n,{dominantBaseline:"central",className:_a("recharts-radial-bar-label",i)}),v.createElement("defs",null,v.createElement("path",{id:I,d:j})),v.createElement("textPath",{xlinkHref:"#".concat(I)},r))},ZXe=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=yi(n,a,i+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:A,y:m}=yi(n,a,h,u);return{x:A,y:m,textAnchor:"middle",verticalAnchor:"middle"}},lF=t=>"cx"in t&&Xr(t.cx),eYe=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!lF(r)&&(s=r);var{x:i,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=i,h=i+(c-u)/2,A=(f+h)/2,m=(c+u)/2,p=f+c/2,g=d>=0?1:-1,x=g*n,y=g>0?"end":"start",b=g>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var E={x:f+c/2,y:l-x,textAnchor:"middle",verticalAnchor:y};return ti(ti({},E),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var S={x:h+u/2,y:l+d+x,textAnchor:"middle",verticalAnchor:b};return ti(ti({},S),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var O={x:A-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return ti(ti({},O),s?{width:Math.max(O.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:A+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return ti(ti({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var T=s?{width:m,height:d}:{};return a==="insideLeft"?ti({x:A+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},T):a==="insideRight"?ti({x:A+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},T):a==="insideTop"?ti({x:f+c/2,y:l+x,textAnchor:"middle",verticalAnchor:b},T):a==="insideBottom"?ti({x:h+u/2,y:l+d-x,textAnchor:"middle",verticalAnchor:y},T):a==="insideTopLeft"?ti({x:f+j,y:l+x,textAnchor:_,verticalAnchor:b},T):a==="insideTopRight"?ti({x:f+c-j,y:l+x,textAnchor:I,verticalAnchor:b},T):a==="insideBottomLeft"?ti({x:h+j,y:l+d-x,textAnchor:_,verticalAnchor:y},T):a==="insideBottomRight"?ti({x:h+u-j,y:l+d-x,textAnchor:I,verticalAnchor:y},T):a&&typeof a=="object"&&(Xr(a.x)||UA(a.x))&&(Xr(a.y)||UA(a.y))?ti({x:i+xl(a.x,m),y:l+xl(a.y,d),textAnchor:"end",verticalAnchor:"end"},T):ti({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},T)},tYe={angle:0,offset:5,zIndex:pl.label,position:"middle",textBreakAll:!1};function zh(t){var e=zo(t,tYe),{viewBox:r,position:n,value:a,children:s,content:i,className:l="",textBreakAll:c,labelRef:u}=e,d=WXe(),f=cle(),h=n==="center"?f:d??f,A,m,p;if(r==null?A=h:lF(r)?A=r:A=Nse(r),!A||vo(a)&&vo(s)&&!v.isValidElement(i)&&typeof i!="function")return null;var g=ti(ti({},e),{},{viewBox:A});if(v.isValidElement(i)){var{labelRef:x}=g,y=KG(g,QXe);return v.cloneElement(i,y)}if(typeof i=="function"){var{content:b}=g,w=KG(g,VXe);if(m=v.createElement(i,w),v.isValidElement(m))return m}else m=XXe(e);var j=qu(e);if(lF(A)){if(n==="insideStart"||n==="insideEnd"||n==="end")return JXe(e,n,m,j,A);p=ZXe(A,e.offset,e.position)}else p=eYe(e,A);return v.createElement(Mf,{zIndex:e.zIndex},v.createElement(S3,cA({ref:u,className:_a("recharts-label",l)},j,p,{textAnchor:DXe(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}zh.displayName="Label";var rYe=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?v.createElement(zh,cA({key:"label-implicit"},n)):Bf(t)?v.createElement(zh,cA({key:"label-implicit",value:t},n)):v.isValidElement(t)?t.type===zh?v.cloneElement(t,ti({key:"label-implicit"},n)):v.createElement(zh,cA({key:"label-implicit",content:t},n)):g8(t)?v.createElement(zh,cA({key:"label-implicit",content:t},n)):t&&typeof t=="object"?v.createElement(zh,cA({},t,{key:"label-implicit"},n)):null};function nYe(t){var{label:e,labelRef:r}=t,n=cle();return rYe(e,n,r)||null}var ule={},dle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(dle);var fle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(fle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dle,r=fle,n=L4;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(ule);var aYe=ule.last;const sYe=qA(aYe);var iYe=["valueAccessor"],oYe=["dataKey","clockWise","id","textBreakAll","zIndex"];function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(null,arguments)}function qG(t,e){if(t==null)return{};var r,n,a=lYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function lYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var cYe=t=>Array.isArray(t.value)?sYe(t.value):t.value,Ale=v.createContext(void 0),uYe=Ale.Provider,hle=v.createContext(void 0),dYe=hle.Provider;function fYe(){return v.useContext(Ale)}function AYe(){return v.useContext(hle)}function K_(t){var{valueAccessor:e=cYe}=t,r=qG(t,iYe),{dataKey:n,clockWise:a,id:s,textBreakAll:i,zIndex:l}=r,c=qG(r,oYe),u=fYe(),d=AYe(),f=u||d;return!f||!f.length?null:v.createElement(Mf,{zIndex:l??pl.label},v.createElement(Hl,{className:"recharts-label-list"},f.map((h,A)=>{var m,p=vo(n)?e(h,A):ts(h&&h.payload,n),g=vo(s)?{}:{id:"".concat(s,"-").concat(A)};return v.createElement(zh,iI({key:"label-".concat(A)},qu(h),c,g,{fill:(m=r.fill)!==null&&m!==void 0?m:h.fill,parentViewBox:h.parentViewBox,value:p,textBreakAll:i,viewBox:h.viewBox,index:A,zIndex:0}))})))}K_.displayName="LabelList";function mle(t){var{label:e}=t;return e?e===!0?v.createElement(K_,{key:"labelList-implicit"}):v.isValidElement(e)||g8(e)?v.createElement(K_,{key:"labelList-implicit",content:e}):typeof e=="object"?v.createElement(K_,iI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var ple=t=>t.graphicalItems.polarItems,hYe=Ut([xs,Sw],UR),I3=Ut([ple,Fs,hYe],VR),mYe=Ut([I3],HR),j3=Ut([mYe,p3],$R),pYe=Ut([j3,Fs,I3],GR);Ut([j3,Fs,I3],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,i=ts(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:ts(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var zG=()=>{},gYe=Ut([j3,Fs,I3,N3,xs],XR),xYe=Ut([Fs,zR,WR,zG,gYe,zG,ea,xs],YR),gle=Ut([Fs,ea,j3,pYe,Ew,xs,xYe],JR),vYe=Ut([gle,Fs,Wv],t8);Ut([Fs,gle,vYe,xs],n8);var yYe={radiusAxis:{},angleAxis:{}},xle=vc({name:"polarAxis",initialState:yYe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Jrt,removeRadiusAxis:Zrt,addAngleAxis:ent,removeAngleAxis:tnt}=xle.actions,bYe=xle.reducer;function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(r),!0).forEach(function(n){wYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wYe(t,e,r){return(e=NYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NYe(t){var e=CYe(t,"string");return typeof e=="symbol"?e:e+""}function CYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Ye=(t,e)=>e,x8=Ut([ple,_Ye],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),EYe=[],v8=(t,e,r)=>(r==null?void 0:r.length)===0?EYe:r,vle=Ut([p3,x8,v8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>XG(XG({},e.presentationProps),s.props))),a!=null)return a}}),SYe=Ut([vle,x8,v8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,i=ts(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:Y4(i,e.dataKey),color:l,payload:n,type:e.legendType}})}),IYe=Ut([vle,x8,v8,Gi],(t,e,r,n)=>{if(!(e==null||t==null))return BJe({offset:n,pieSettings:e,displayedData:t,cells:r})}),yle={exports:{}},Da={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y8=Symbol.for("react.transitional.element"),b8=Symbol.for("react.portal"),B3=Symbol.for("react.fragment"),P3=Symbol.for("react.strict_mode"),T3=Symbol.for("react.profiler"),k3=Symbol.for("react.consumer"),F3=Symbol.for("react.context"),O3=Symbol.for("react.forward_ref"),D3=Symbol.for("react.suspense"),R3=Symbol.for("react.suspense_list"),M3=Symbol.for("react.memo"),L3=Symbol.for("react.lazy"),jYe=Symbol.for("react.view_transition"),BYe=Symbol.for("react.client.reference");function Ju(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case y8:switch(t=t.type,t){case B3:case T3:case P3:case D3:case R3:case jYe:return t;default:switch(t=t&&t.$$typeof,t){case F3:case O3:case L3:case M3:return t;case k3:return t;default:return e}}case b8:return e}}}Da.ContextConsumer=k3;Da.ContextProvider=F3;Da.Element=y8;Da.ForwardRef=O3;Da.Fragment=B3;Da.Lazy=L3;Da.Memo=M3;Da.Portal=b8;Da.Profiler=T3;Da.StrictMode=P3;Da.Suspense=D3;Da.SuspenseList=R3;Da.isContextConsumer=function(t){return Ju(t)===k3};Da.isContextProvider=function(t){return Ju(t)===F3};Da.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===y8};Da.isForwardRef=function(t){return Ju(t)===O3};Da.isFragment=function(t){return Ju(t)===B3};Da.isLazy=function(t){return Ju(t)===L3};Da.isMemo=function(t){return Ju(t)===M3};Da.isPortal=function(t){return Ju(t)===b8};Da.isProfiler=function(t){return Ju(t)===T3};Da.isStrictMode=function(t){return Ju(t)===P3};Da.isSuspense=function(t){return Ju(t)===D3};Da.isSuspenseList=function(t){return Ju(t)===R3};Da.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===B3||t===T3||t===P3||t===D3||t===R3||typeof t=="object"&&t!==null&&(t.$$typeof===L3||t.$$typeof===M3||t.$$typeof===F3||t.$$typeof===k3||t.$$typeof===O3||t.$$typeof===BYe||t.getModuleId!==void 0)};Da.typeOf=Ju;yle.exports=Da;var PYe=yle.exports,YG=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",JG=null,kB=null,ble=t=>{if(t===JG&&Array.isArray(kB))return kB;var e=[];return v.Children.forEach(t,r=>{vo(r)||(PYe.isFragment(r)?e=e.concat(ble(r.props.children)):e.push(r))}),kB=e,JG=t,e};function w8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>YG(a)):n=[YG(e)],ble(t).forEach(a=>{var s=Lp(a,"type.displayName")||Lp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var wle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(wle);var TYe=wle.isPlainObject;const kYe=qA(TYe);var ZG,eq,tq,rq,nq;function aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aq(Object(r),!0).forEach(function(n){FYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FYe(t,e,r){return(e=OYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OYe(t){var e=DYe(t,"string");return typeof e=="symbol"?e:e+""}function DYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oI.apply(null,arguments)}function Z1(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var iq=(t,e,r,n,a)=>{var s=r-n,i;return i=Qs(ZG||(ZG=Z1(["M ",",",""])),t,e),i+=Qs(eq||(eq=Z1(["L ",",",""])),t+r,e),i+=Qs(tq||(tq=Z1(["L ",",",""])),t+r-s/2,e+a),i+=Qs(rq||(rq=Z1(["L ",",",""])),t+r-s/2-n,e+a),i+=Qs(nq||(nq=Z1(["L ",","," Z"])),t,e),i},RYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MYe=t=>{var e=zo(t,RYe),{x:r,y:n,upperWidth:a,lowerWidth:s,height:i,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,h=v.useRef(null),[A,m]=v.useState(-1),p=v.useRef(a),g=v.useRef(s),x=v.useRef(i),y=v.useRef(r),b=v.useRef(n),w=c3(t,"trapezoid-");if(v.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var J=h.current.getTotalLength();J&&m(J)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||i!==+i||a===0&&s===0||i===0)return null;var j=_a("recharts-trapezoid",l);if(!f)return v.createElement("g",null,v.createElement("path",oI({},qu(e),{className:j,d:iq(r,n,a,s,i)})));var I=p.current,_=g.current,E=x.current,S=y.current,O=b.current,P="0px ".concat(A===-1?1:A,"px"),T="".concat(A,"px 0px"),F=Rse(["strokeDasharray"],u,c);return v.createElement(l3,{animationId:w,key:w,canBegin:A>0,duration:u,easing:c,isActive:f,begin:d},J=>{var ge=Fi(I,a,J),le=Fi(_,s,J),de=Fi(E,i,J),Ae=Fi(S,r,J),se=Fi(O,n,J);h.current&&(p.current=ge,g.current=le,x.current=de,y.current=Ae,b.current=se);var Ie=J>0?{transition:F,strokeDasharray:T}:{strokeDasharray:P};return v.createElement("path",oI({},qu(e),{className:j,d:iq(Ae,se,ge,le,de),ref:h,style:sq(sq({},Ie),e.style)}))})},LYe=["option","shapeType","activeClassName"];function UYe(t,e){if(t==null)return{};var r,n,a=QYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function QYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oq(Object(r),!0).forEach(function(n){VYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VYe(t,e,r){return(e=HYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HYe(t){var e=$Ye(t,"string");return typeof e=="symbol"?e:e+""}function $Ye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KYe(t,e){return lI(lI({},e),t)}function GYe(t,e){return t==="symbols"}function lq(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return v.createElement(Qse,r);case"trapezoid":return v.createElement(MYe,r);case"sector":return v.createElement(Kse,r);case"symbols":if(GYe(e))return v.createElement(RD,r);break;case"curve":return v.createElement(iR,r);default:return null}}function qYe(t){return v.isValidElement(t)?t.props:t}function Nle(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=UYe(t,LYe),s;if(v.isValidElement(e))s=v.cloneElement(e,lI(lI({},a),qYe(e)));else if(typeof e=="function")s=e(a,a.index);else if(kYe(e)&&typeof e!="boolean"){var i=KYe(e,a);s=v.createElement(lq,{shapeType:r,elementProps:i})}else{var l=a;s=v.createElement(lq,{shapeType:r,elementProps:l})}return a.isActive?v.createElement(Hl,{className:n},s):s}var N8=(t,e,r)=>{var n=Ka();return(a,s)=>i=>{t==null||t(a,s,i),n(joe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},C8=t=>{var e=Ka();return(r,n)=>a=>{t==null||t(r,n,a),e(oze())}},_8=(t,e,r)=>{var n=Ka();return(a,s)=>i=>{t==null||t(a,s,i),n(lze({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Cle(t){var{tooltipEntrySettings:e}=t,r=Ka(),n=eu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(nze(e)):a.current!==e&&r(aze({prev:a.current,next:e})),a.current=e)},[e,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(sze(a.current)),a.current=null)},[r]),null}function zYe(t){var{legendPayload:e}=t,r=Ka(),n=eu(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(kse(e)):a.current!==e&&r(Fse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Ose(a.current)),a.current=null)},[r]),null}function WYe(t){var{legendPayload:e}=t,r=Ka(),n=Gr(ea),a=v.useRef(null);return v.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(kse(e)):a.current!==e&&r(Fse({prev:a.current,next:e})),a.current=e)},[r,n,e]),v.useLayoutEffect(()=>()=>{a.current&&(r(Ose(a.current)),a.current=null)},[r]),null}var FB,XYe=()=>{var[t]=v.useState(()=>p2("uid-"));return t},YYe=(FB=iue.useId)!==null&&FB!==void 0?FB:XYe;function JYe(t,e){var r=YYe();return e||(t?"".concat(t,"-").concat(r):r)}var ZYe=v.createContext(void 0),_le=t=>{var{id:e,type:r,children:n}=t,a=JYe("recharts-".concat(r),e);return v.createElement(ZYe.Provider,{value:a},n(a))},eJe={cartesianItems:[],polarItems:[]},Ele=vc({name:"graphicalItems",initialState:eJe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:cs()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=Pd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:cs()},removeCartesianGraphicalItem:{reducer(t,e){var r=Pd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:cs()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:cs()},removePolarGraphicalItem:{reducer(t,e){var r=Pd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:cs()}}}),{addCartesianGraphicalItem:tJe,replaceCartesianGraphicalItem:rJe,removeCartesianGraphicalItem:nJe,addPolarGraphicalItem:aJe,removePolarGraphicalItem:sJe}=Ele.actions,iJe=Ele.reducer,oJe=t=>{var e=Ka(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(tJe(t)):r.current!==t&&e(rJe({prev:r.current,next:t})),r.current=t},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(e(nJe(r.current)),r.current=null)},[e]),null},lJe=v.memo(oJe);function cJe(t){var e=Ka();return v.useLayoutEffect(()=>(e(aJe(t)),()=>{e(sJe(t))}),[e,t]),null}var uJe=["key"],dJe=["onMouseEnter","onClick","onMouseLeave"],fJe=["id"],AJe=["id"];function cq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cq(Object(r),!0).forEach(function(n){hJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hJe(t,e,r){return(e=mJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mJe(t){var e=pJe(t,"string");return typeof e=="symbol"?e:e+""}function pJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X0(){return X0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X0.apply(null,arguments)}function U3(t,e){if(t==null)return{};var r,n,a=gJe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gJe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function xJe(t){var e=v.useMemo(()=>w8(t.children,Ow),[t.children]),r=Gr(n=>SYe(n,t.id,e));return r==null?null:v.createElement(WYe,{legendPayload:r})}var vJe=v.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:e,nameKey:r,name:Y4(l,e),hide:c,type:u,color:i,unit:"",graphicalItemId:d}};return v.createElement(Cle,{tooltipEntrySettings:f})}),yJe=(t,e)=>t>e?"start":t<e?"end":"middle",bJe=(t,e,r)=>xl(typeof e=="function"?e(t):e,r,r*.8),wJe=(t,e,r)=>{var{top:n,left:a,width:s,height:i}=e,l=Vse(s,i),c=a+xl(t.cx,s,s/2),u=n+xl(t.cy,i,i/2),d=xl(t.innerRadius,l,0),f=bJe(r,t.outerRadius,l),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},NJe=(t,e)=>{var r=Ko(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function CJe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var _Je=(t,e)=>{if(v.isValidElement(t))return v.cloneElement(t,e);if(typeof t=="function")return t(e);var r=_a("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=U3(e,uJe);return v.createElement(iR,X0({},a,{type:"linear",className:r}))},EJe=(t,e,r)=>{if(v.isValidElement(t))return v.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),v.isValidElement(n)))return n;var a=_a("recharts-pie-label-text",CJe(t));return v.createElement(S3,X0({},e,{alignmentBaseline:"middle",className:a}),n)};function SJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!e)return null;var l=If(r),c=m2(a),u=m2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((h,A)=>{var m=(h.startAngle+h.endAngle)/2,p=yi(h.cx,h.cy,h.outerRadius+d,m),g=$s($s($s($s({},l),h),{},{stroke:"none"},c),{},{index:A,textAnchor:yJe(p.x,h.cx)},p),x=$s($s($s($s({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:A,points:[yi(h.cx,h.cy,h.outerRadius,m),p],key:"line"});return v.createElement(Mf,{zIndex:pl.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(A)},v.createElement(Hl,null,s&&_Je(s,x),EJe(a,g,ts(h,i))))});return v.createElement(Hl,{className:"recharts-pie-labels"},f)}function IJe(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?v.createElement(mle,{label:a}):v.createElement(SJe,{sectors:e,props:r,showLabels:n})}function jJe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:i}=t,l=Gr($p),c=Gr(f8),u=Gr(qze),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,A=U3(a,dJe),m=N8(d,a.dataKey,i),p=C8(h),g=_8(f,a.dataKey,i);return e==null||e.length===0?null:v.createElement(v.Fragment,null,e.map((x,y)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var b=u==null||u===i,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=$s($s({},x),{},{stroke:x.stroke,tabIndex:-1,[mse]:y,[pse]:i});return v.createElement(Hl,X0({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},pw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),v.createElement(Nle,X0({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function BJe(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:i,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),A=NJe(l,c),m=Math.abs(A),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,g=n.filter(I=>ts(I,u,0)!==0).length,x=(m>=360?g:g-1)*p,y=m-g*h-x,b=n.reduce((I,_)=>{var E=ts(_,u,0);return I+(Xr(E)?E:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var E=ts(I,u,0),S=ts(I,d,_),O=wJe(r,s,I),P=(Xr(E)?E:0)/b,T,F=$s($s({},I),a&&a[_]&&a[_].props);_?T=j.endAngle+Ko(A)*p*(E!==0?1:0):T=l;var J=T+Ko(A)*((E!==0?h:0)+P*y),ge=(T+J)/2,le=(O.innerRadius+O.outerRadius)/2,de=[{name:S,value:E,payload:F,dataKey:u,type:f,graphicalItemId:r.id}],Ae=yi(O.cx,O.cy,le,ge);return j=$s($s($s($s({},r.presentationProps),{},{percent:P,cornerRadius:typeof i=="string"?parseFloat(i):i,name:S,tooltipPayload:de,midAngle:ge,middleRadius:le,tooltipPosition:Ae},F),O),{},{value:E,dataKey:u,startAngle:T,endAngle:J,payload:F,paddingAngle:Ko(A)*p}),j})}return w}function PJe(t){var{showLabels:e,sectors:r,children:n}=t,a=v.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return v.createElement(dYe,{value:e?a:void 0},n)}function TJe(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:h}=e,A=c3(e,"recharts-pie-"),m=r.current,[p,g]=v.useState(!1),x=v.useCallback(()=>{typeof h=="function"&&h(),g(!1)},[h]),y=v.useCallback(()=>{typeof f=="function"&&f(),g(!0)},[f]);return v.createElement(PJe,{showLabels:!p,sectors:a},v.createElement(l3,{animationId:A,begin:i,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:x,key:A},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,E)=>{var S=m&&m[E],O=E>0?Lp(_,"paddingAngle",0):0;if(S){var P=Fi(S.endAngle-S.startAngle,_.endAngle-_.startAngle,b),T=$s($s({},_),{},{startAngle:I+O,endAngle:I+P+O});w.push(T),I=T.endAngle}else{var{endAngle:F,startAngle:J}=_,ge=Fi(0,F-J,b),le=$s($s({},_),{},{startAngle:I+O,endAngle:I+ge+O});w.push(le),I=le.endAngle}}),r.current=w,v.createElement(Hl,null,v.createElement(jJe,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),v.createElement(IJe,{showLabels:!p,sectors:a,props:e}),e.children)}var kJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:pl.area};function FJe(t){var{id:e}=t,r=U3(t,fJe),{hide:n,className:a,rootTabIndex:s}=t,i=v.useMemo(()=>w8(t.children,Ow),[t.children]),l=Gr(d=>IYe(d,e,i)),c=v.useRef(null),u=_a("recharts-pie",a);return n||l==null?(c.current=null,v.createElement(Hl,{tabIndex:s,className:u})):v.createElement(Mf,{zIndex:t.zIndex},v.createElement(vJe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),v.createElement(Hl,{tabIndex:s,className:u},v.createElement(TJe,{props:$s($s({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Sle(t){var e=zo(t,kJe),{id:r}=e,n=U3(e,AJe),a=If(n);return v.createElement(_le,{id:r,type:"pie"},s=>v.createElement(v.Fragment,null,v.createElement(cJe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),v.createElement(xJe,X0({},n,{id:s})),v.createElement(FJe,X0({},n,{id:s}))))}Sle.displayName="Pie";function uq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uq(Object(r),!0).forEach(function(n){OJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OJe(t,e,r){return(e=DJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DJe(t){var e=RJe(t,"string");return typeof e=="symbol"?e:e+""}function RJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ile=0,MJe={xAxis:{},yAxis:{},zAxis:{}},jle=vc({name:"cartesianAxis",initialState:MJe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:cs()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:cs()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:cs()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:cs()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:cs()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:cs()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:cs()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:cs()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:cs()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var i=[...s,n].slice(-3);t.yAxis[r]=dq(dq({},t.yAxis[r]),{},{width:n,widthHistory:i})}}}}),{addXAxis:LJe,replaceXAxis:UJe,removeXAxis:QJe,addYAxis:VJe,replaceYAxis:HJe,removeYAxis:$Je,addZAxis:rnt,replaceZAxis:nnt,removeZAxis:ant,updateYAxisWidth:KJe}=jle.actions,GJe=jle.reducer,qJe=Ut([Gi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),zJe=Ut([qJe,nh,ah],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),Ble=()=>Gr(zJe),fq=(t,e,r)=>{var n=r??t;if(!vo(n))return xl(n,e,0)},WJe=(t,e,r)=>{var n={},a=t.filter(v3),s=t.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(m=>m.dataKey),A=fq(e,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:A}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=fq(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function Aq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(r),!0).forEach(function(n){XJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XJe(t,e,r){return(e=YJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YJe(t){var e=JJe(t,"string");return typeof e=="symbol"?e:e+""}function JJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZJe(t,e,r,n,a){var s=n.length;if(!(s<1)){var i=xl(t,r,0,!0),l,c=[];if(ks(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((x,y)=>x+(y.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,A={offset:h-i,size:0};l=n.reduce((x,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A.offset+A.size+i,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...x,w];return A=j[j.length-1].position,j},c)}else{var m=xl(e,r,0,!0);r-2*m-(s-1)*i<=0&&(i=0);var p=(r-2*m-(s-1)*i)/s;p>1&&(p>>=0);var g=ks(a)?Math.min(p,a):p;l=n.reduce((x,y,b)=>[...x,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+i)*b+(p-g)/2,size:g}}],c)}return l}}var eZe=(t,e,r,n,a,s,i)=>{var l=vo(i)?e:i,c=ZJe(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>YC(YC({},u),{},{position:YC(YC({},u.position),{},{offset:u.position.offset-a/2})}))),c},tZe=(t,e)=>{var r=MR(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}};function rZe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ks(t.zIndex)?t.zIndex:e}var Ple=t=>{var{chartData:e}=t,r=Ka(),n=eu();return v.useEffect(()=>n?()=>{}:(r(jG(e)),()=>{r(jG(void 0))}),[e,r,n]),null},hq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Tle=vc({name:"brush",initialState:hq,reducers:{setBrushSettings(t,e){return e.payload==null?hq:e.payload}}}),{setBrushSettings:snt}=Tle.actions,nZe=Tle.reducer;function aZe(t,e,r){return(e=sZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sZe(t){var e=iZe(t,"string");return typeof e=="symbol"?e:e+""}function iZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class E8{static create(e){return new E8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}aZe(E8,"EPS",1e-4);function oZe(t){return(t%180+180)%180}var lZe=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=oZe(a),i=s*Math.PI/180,l=Math.atan(n/r),c=i>l&&i<Math.PI-l?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},cZe={dots:[],areas:[],lines:[]},kle=vc({name:"referenceElements",initialState:cZe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=Pd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=Pd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=Pd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:int,removeDot:ont,addArea:lnt,removeArea:cnt,addLine:unt,removeLine:dnt}=kle.actions,uZe=kle.reducer,dZe=v.createContext(void 0),fZe=t=>{var{children:e}=t,[r]=v.useState("".concat(p2("recharts"),"-clip")),n=Ble();if(n==null)return null;var{x:a,y:s,width:i,height:l}=n;return v.createElement(dZe.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:s,height:l,width:i}))),e)};function Fle(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function AZe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return lZe(n,r)}function hZe(t,e,r){var n=r==="width",{x:a,y:s,width:i,height:l}=t;return e===1?{start:n?a:s,end:n?a+i:s+l}:{start:n?a+i:s+l,end:n?a:s}}function B2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function mZe(t,e){return Fle(t,e+1)}function pZe(t,e,r,n,a){for(var s=(n||[]).slice(),{start:i,end:l}=e,c=0,u=1,d=i,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:Fle(n,u)};var p=c,g,x=()=>(g===void 0&&(g=r(m,p)),g),y=m.coordinate,b=c===0||B2(t,y,x,d,l);b||(c=0,d=i,u+=1),b&&(d=y+t*(x()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function gZe(t,e,r,n,a){var s=(n||[]).slice(),i=s.length;if(i===0)return[];for(var{start:l,end:c}=e,u=1;u<=i;u++){for(var d=(i-1)%u,f=l,h=!0,A=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||B2(t,I,j,f,c);if(!_)return h=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<i&&!A();m+=u);if(h){for(var p=[],g=d;g<i;g+=u)p.push(n[g]);return p}}return[]}function mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function cl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mq(Object(r),!0).forEach(function(n){xZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xZe(t,e,r){return(e=vZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vZe(t){var e=yZe(t,"string");return typeof e=="symbol"?e:e+""}function yZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bZe(t,e,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:l}=e,{end:c}=e,u=function(h){var A=s[h],m,p=()=>(m===void 0&&(m=r(A,h)),m);if(h===i-1){var g=t*(A.coordinate+t*p()/2-c);s[h]=A=cl(cl({},A),{},{tickCoord:g>0?A.coordinate-g*t:A.coordinate})}else s[h]=A=cl(cl({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var x=B2(t,A.tickCoord,p,l,c);x&&(c=A.tickCoord-t*(p()/2+a),s[h]=cl(cl({},A),{},{isShow:!0}))}},d=i-1;d>=0;d--)u(d);return s}function wZe(t,e,r,n,a,s){var i=(n||[]).slice(),l=i.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),h=t*(d.coordinate+t*f/2-u);if(i[l-1]=d=cl(cl({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate}),d.tickCoord!=null){var A=B2(t,d.tickCoord,()=>f,c,u);A&&(u=d.tickCoord-t*(f/2+a),i[l-1]=cl(cl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=i[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);i[y]=b=cl(cl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else i[y]=b=cl(cl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=B2(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),i[y]=cl(cl({},b),{},{isShow:!0}))}},g=0;g<m;g++)p(g);return i}function NZe(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(Xr(c)||o3.isSsr){var h;return(h=mZe(a,Xr(c)?c:0))!==null&&h!==void 0?h:[]}var A=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?ub(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?AZe(ub(j,{fontSize:e,letterSpacing:r}),p,f):ub(j,{fontSize:e,letterSpacing:r})[m]},x=a.length>=2?Ko(a[1].coordinate-a[0].coordinate):1,y=hZe(s,x,m);return c==="equidistantPreserveStart"?pZe(x,y,g,a,i):c==="equidistantPreserveEnd"?gZe(x,y,g,a,i):(c==="preserveStart"||c==="preserveStartEnd"?A=wZe(x,y,g,a,i,c==="preserveStartEnd"):A=bZe(x,y,g,a,i),A.filter(b=>b.isShow))}var CZe=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,i=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+l+(r?n:0);return Math.round(u)}return 0},_Ze=["axisLine","width","height","className","hide","ticks","axisType"];function EZe(t,e){if(t==null)return{};var r,n,a=SZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function SZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kp.apply(null,arguments)}function pq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pq(Object(r),!0).forEach(function(n){IZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IZe(t,e,r){return(e=jZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jZe(t){var e=BZe(t,"string");return typeof e=="symbol"?e:e+""}function BZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pl.axis};function PZe(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=pi(pi(pi({},c),If(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!i||s==="bottom"&&i);u=pi(pi({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!i||s==="right"&&i);u=pi(pi({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return v.createElement("line",Kp({},u,{className:_a("recharts-cartesian-axis-line",Lp(l,"className"))}))}function TZe(t,e,r,n,a,s,i,l,c){var u,d,f,h,A,m,p=l?-1:1,g=t.tickSize||i,x=Xr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,h=r+ +!l*a,f=h-p*g,m=f-p*c,A=x;break;case"left":f=h=t.coordinate,d=e+ +!l*n,u=d-p*g,A=u-p*c,m=x;break;case"right":f=h=t.coordinate,d=e+ +l*n,u=d+p*g,A=u+p*c,m=x;break;default:u=d=t.coordinate,h=r+ +l*a,f=h+p*g,m=f+p*c,A=x;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:A,y:m}}}function kZe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function FZe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function OZe(t){var{option:e,tickProps:r,value:n}=t,a,s=_a(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(e))a=v.cloneElement(e,pi(pi({},r),{},{className:s}));else if(typeof e=="function")a=e(pi(pi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(i=_a(i,e==null?void 0:e.className)),a=v.createElement(S3,Kp({},r,{className:i}),n)}return a}var DZe=v.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:i,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:A,width:m,height:p,tickSize:g,tickMargin:x,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=NZe(pi(pi({},w),{},{ticks:r}),y,b),E=kZe(d,f),S=FZe(d,f),O=If(w),P=m2(n),T={};typeof a=="object"&&(T=a);var F=pi(pi({},O),{},{fill:"none"},T),J=_.map(de=>pi({entry:de},TZe(de,h,A,m,p,d,g,f,x))),ge=J.map(de=>{var{entry:Ae,line:se}=de;return v.createElement(Hl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Ae.value,"-").concat(Ae.coordinate,"-").concat(Ae.tickCoord)},a&&v.createElement("line",Kp({},F,se,{className:_a("recharts-cartesian-axis-tick-line",Lp(a,"className"))})))}),le=J.map((de,Ae)=>{var{entry:se,tick:Ie}=de,Pe=pi(pi(pi(pi({textAnchor:E,verticalAnchor:S},O),{},{stroke:"none",fill:s},P),Ie),{},{index:Ae,payload:se,visibleTicksCount:_.length,tickFormatter:i,padding:c},u);return v.createElement(Hl,Kp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(se.value,"-").concat(se.coordinate,"-").concat(se.tickCoord)},pw(j,se,Ae)),n&&v.createElement(OZe,{option:n,tickProps:Pe,value:"".concat(typeof i=="function"?i(se.value,Ae):se.value).concat(l||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},le.length>0&&v.createElement(Mf,{zIndex:pl.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},le)),ge.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},ge))}),RZe=v.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:i,ticks:l,axisType:c}=t,u=EZe(t,_Ze),[d,f]=v.useState(""),[h,A]=v.useState(""),m=v.useRef(null);v.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var g;return CZe({ticks:m.current,label:(g=t.labelRef)===null||g===void 0?void 0:g.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=v.useCallback(g=>{if(g){var x=g.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=x;var y=x[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==h)&&(f(w),A(j))}}},[d,h]);return i||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(Mf,{zIndex:t.zIndex},v.createElement(Hl,{className:_a("recharts-cartesian-axis",s)},v.createElement(PZe,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:If(t)}),v.createElement(DZe,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:h,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),v.createElement(qXe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},v.createElement(nYe,{label:t.label,labelRef:t.labelRef}),t.children)))}),S8=v.forwardRef((t,e)=>{var r=zo(t,mp);return v.createElement(RZe,Kp({},r,{ref:e}))});S8.displayName="CartesianAxis";var MZe={},Ole=vc({name:"errorBars",initialState:MZe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:fnt,replaceErrorBar:Ant,removeErrorBar:hnt}=Ole.actions,LZe=Ole.reducer,UZe=["children"];function QZe(t,e){if(t==null)return{};var r,n,a=VZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function VZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var HZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},$Ze=v.createContext(HZe);function KZe(t){var{children:e}=t,r=QZe(t,UZe);return v.createElement($Ze.Provider,{value:r},e)}function Dle(t,e){var r,n,a=Gr(u=>oh(u,t)),s=Gr(u=>lh(u,e)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:ao.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:so.allowDataOverflow,c=i||l;return{needClip:c,needClipX:i,needClipY:l}}function GZe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=Ble(),{needClipX:s,needClipY:i,needClip:l}=Dle(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var qZe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=v;function zZe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WZe=typeof Object.is=="function"?Object.is:zZe,XZe=Dw.useSyncExternalStore,YZe=Dw.useRef,JZe=Dw.useEffect,ZZe=Dw.useMemo,eet=Dw.useDebugValue;qZe.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=YZe(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=ZZe(function(){function c(A){if(!u){if(u=!0,d=A,A=n(A),a!==void 0&&i.hasValue){var m=i.value;if(a(m,A))return f=m}return f=A}if(m=f,WZe(d,A))return m;var p=n(A);return a!==void 0&&a(m,p)?(d=A,m):(d=A,f=p)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,r,n,a]);var l=XZe(t,s[0],s[1]);return JZe(function(){i.hasValue=!0,i.value=l},[l]),eet(l),l};function tet(t){t()}function ret(){let t=null,e=null;return{clear(){t=null,e=null},notify(){tet(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var gq={notify(){},get:()=>[]};function net(t,e){let r,n=gq,a=0,s=!1;function i(p){d();const g=n.subscribe(p);let x=!1;return()=>{x||(x=!0,g(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=ret())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=gq)}function h(){s||(s=!0,d())}function A(){s&&(s=!1,f())}const m={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:A,getListeners:()=>n};return m}var aet=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",set=aet(),iet=()=>typeof navigator<"u"&&navigator.product==="ReactNative",oet=iet(),cet=()=>set||oet?v.useLayoutEffect:v.useEffect,uet=cet();function xq(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function det(t,e){if(xq(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!xq(t[r[a]],e[r[a]]))return!1;return!0}var OB=Symbol.for("react-redux-context"),DB=typeof globalThis<"u"?globalThis:{};function fet(){if(!v.createContext)return{};const t=DB[OB]??(DB[OB]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var Aet=fet();function het(t){const{children:e,context:r,serverState:n,store:a}=t,s=v.useMemo(()=>{const c=net(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=v.useMemo(()=>a.getState(),[a]);uet(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||Aet;return v.createElement(l.Provider,{value:s},e)}var met=het,pet=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function get(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function I8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(pet.has(n)){if(t[n]==null&&e[n]==null)continue;if(!det(t[n],e[n]))return!1}else if(!get(t[n],e[n]))return!1;return!0}function Ag(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:Ile}function hg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:Ile}var xet="Invariant failed";function vet(t,e){throw new Error(xet)}function cF(){return cF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cF.apply(null,arguments)}function cI(t){return v.createElement(Nle,cF({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var yet=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Xr(e))return e;var s=Xr(n)||vo(n);return s?e(n,a):(s||vet(),r)}},bet=(t,e,r)=>r,wet=(t,e)=>e,Rw=Ut([QR,wet],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Net=Ut([Rw],t=>t==null?void 0:t.maxBarSize),Cet=(t,e,r,n)=>n,_et=Ut([ea,QR,Ag,hg,bet],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Eet=(t,e,r)=>{var n=ea(t),a=Ag(t,e),s=hg(t,e);if(!(a==null||s==null))return n==="horizontal"?rF(t,"yAxis",s,r):rF(t,"xAxis",a,r)},Iet=(t,e)=>{var r=ea(t),n=Ag(t,e),a=hg(t,e);if(!(n==null||a==null))return r==="horizontal"?xG(t,"xAxis",n):xG(t,"yAxis",a)},jet=Ut([_et,XGe,Iet],WJe),Bet=(t,e,r)=>{var n,a,s=Rw(t,e);if(s!=null){var i=Ag(t,e),l=hg(t,e);if(!(i==null||l==null)){var c=ea(t),u=$ie(t),{maxBarSize:d}=s,f=vo(d)?u:d,h,A;return c==="horizontal"?(h=yv(t,"xAxis",i,r),A=vv(t,"xAxis",i,r)):(h=yv(t,"yAxis",l,r),A=vv(t,"yAxis",l,r)),(n=(a=RS(h,A,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},Rle=(t,e,r)=>{var n=ea(t),a=Ag(t,e),s=hg(t,e);if(!(a==null||s==null)){var i,l;return n==="horizontal"?(i=yv(t,"xAxis",a,r),l=vv(t,"xAxis",a,r)):(i=yv(t,"yAxis",s,r),l=vv(t,"yAxis",s,r)),RS(i,l)}},Pet=Ut([jet,$ie,WGe,Kie,Bet,Rle,Net],eZe),Tet=(t,e,r)=>{var n=Ag(t,e);if(n!=null)return yv(t,"xAxis",n,r)},ket=(t,e,r)=>{var n=hg(t,e);if(n!=null)return yv(t,"yAxis",n,r)},Fet=(t,e,r)=>{var n=Ag(t,e);if(n!=null)return vv(t,"xAxis",n,r)},Oet=(t,e,r)=>{var n=hg(t,e);if(n!=null)return vv(t,"yAxis",n,r)},Det=Ut([Pet,Rw],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),Ret=Ut([Eet,Rw],tZe),Met=Ut([Gi,rR,Tet,ket,Fet,Oet,Det,ea,RGe,Rle,Ret,Rw,Cet],(t,e,r,n,a,s,i,l,c,u,d,f,h)=>{var{chartData:A,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||i==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:g}=f,x;if(g!=null&&g.length>0?x=g:x=A==null?void 0:A.slice(m,p+1),x!=null)return Att({layout:l,barSettings:f,pos:i,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:x,offset:t,cells:h,dataStartIndex:m})}}),Let=["index"];function uF(){return uF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uF.apply(null,arguments)}function Uet(t,e){if(t==null)return{};var r,n,a=Qet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Mle=v.createContext(void 0),Vet=t=>{var e=v.useContext(Mle);if(e!=null)return e.stackId;if(t!=null)return MQe(t)},Het=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),$et=t=>{var e=v.useContext(Mle);if(e!=null){var{stackId:r}=e;return"url(#".concat(Het(r,t),")")}},Ket=t=>{var{index:e}=t,r=Uet(t,Let),n=$et(e);return v.createElement(Hl,uF({className:"recharts-bar-stack-layer",clipPath:n},r))},Get=["onMouseEnter","onMouseLeave","onClick"],qet=["value","background","tooltipPosition"],zet=["id"],Wet=["onMouseEnter","onClick","onMouseLeave"];function GA(){return GA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GA.apply(null,arguments)}function vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vq(Object(r),!0).forEach(function(n){Xet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xet(t,e,r){return(e=Yet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yet(t){var e=Jet(t,"string");return typeof e=="symbol"?e:e+""}function Jet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uI(t,e){if(t==null)return{};var r,n,a=Zet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Zet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ett=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:Y4(r,e),payload:t}]},ttt=v.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:Y4(s,e),hide:i,type:c,color:a,unit:l,graphicalItemId:u}};return v.createElement(Cle,{tooltipEntrySettings:d})});function rtt(t){var e=Gr($p),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:i,onMouseLeave:l,onClick:c}=s,u=uI(s,Get),d=N8(i,n,s.id),f=C8(l),h=_8(c,n,s.id);if(!a||r==null)return null;var A=m2(a);return v.createElement(Mf,{zIndex:rZe(a,pl.barBackground)},r.map((m,p)=>{var{value:g,background:x,tooltipPosition:y}=m,b=uI(m,qet);if(!x)return null;var w=d(m,p),j=f(m,p),I=h(m,p),_=Rl(Rl(Rl(Rl(Rl({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},x),A),pw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return v.createElement(cI,GA({key:"background-bar-".concat(p)},_))}))}function ntt(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var i={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Rl(Rl({},i),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:i,fill:s.fill})});return v.createElement(uYe,{value:e?a:void 0},r)}function att(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:i}=t,l=Gr($p),c=Gr(f8),u=r&&String(s)===l&&(c==null||i===c),d=u?r:e;return u?v.createElement(Mf,{zIndex:pl.activeBar},v.createElement(cI,GA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))):v.createElement(cI,GA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:i}))}function stt(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return v.createElement(cI,GA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function itt(t){var e,{data:r,props:n}=t,a=(e=If(n))!==null&&e!==void 0?e:{},{id:s}=a,i=uI(a,zet),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,A=uI(n,Wet),m=N8(d,c,s),p=C8(h),g=_8(f,c,s);return r?v.createElement(v.Fragment,null,r.map((x,y)=>v.createElement(Ket,GA({index:y,key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(y),className:"recharts-bar-rectangle"},pw(A,x,y),{onMouseEnter:m(x,y),onMouseLeave:p(x,y),onClick:g(x,y)}),u?v.createElement(att,{shape:l,activeBar:u,baseProps:i,entry:x,index:y,dataKey:c}):v.createElement(stt,{shape:l,baseProps:i,entry:x,index:y,dataKey:c})))):null}function ott(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,h=c3(e,"recharts-bar-"),[A,m]=v.useState(!1),p=!A,g=v.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),x=v.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return v.createElement(ntt,{showLabels:p,rects:n},v.createElement(l3,{animationId:h,begin:i,duration:l,isActive:s,easing:c,onAnimationEnd:g,onAnimationStart:x,key:h},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return Rl(Rl({},w),{},{x:Fi(I.x,w.x,y),y:Fi(I.y,w.y,y),width:Fi(I.width,w.width,y),height:Fi(I.height,w.height,y)});if(a==="horizontal"){var _=Fi(0,w.height,y),E=Fi(w.stackedBarStart,w.y,y);return Rl(Rl({},w),{},{y:E,height:_})}var S=Fi(0,w.width,y),O=Fi(w.stackedBarStart,w.x,y);return Rl(Rl({},w),{},{width:S,x:O})});return y>0&&(r.current=b??null),b==null?null:v.createElement(Hl,null,v.createElement(itt,{props:e,data:b}))}),v.createElement(mle,{label:e.label}),e.children)}function ltt(t){var e=v.useRef(null);return v.createElement(ott,{previousRectanglesRef:e,props:t})}var Lle=0,ctt=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ts(t,e)}};class utt extends v.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=_a("recharts-bar",a),f=u;return v.createElement(Hl,{className:d,id:u},l&&v.createElement("defs",null,v.createElement(GZe,{clipPathId:f,xAxisId:s,yAxisId:i})),v.createElement(Hl,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},v.createElement(rtt,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),v.createElement(ltt,this.props)))}}var dtt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Lle,xAxisId:0,yAxisId:0,zIndex:pl.bar};function ftt(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=Dle(e,r),h=yw(),A=eu(),m=w8(t.children,Ow),p=Gr(y=>Met(y,t.id,A,m));if(h!=="vertical"&&h!=="horizontal")return null;var g,x=p==null?void 0:p[0];return x==null||x.height==null||x.width==null?g=0:g=h==="vertical"?x.height/2:x.width/2,v.createElement(KZe,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:ctt,errorBarOffset:g},v.createElement(utt,GA({},t,{layout:h,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Att(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:A,parentViewBox:m,dataStartIndex:p}=t,g=e==="horizontal"?l:i,x=d?g.scale.domain():null,y=LQe({numericAxis:g}),b=g.scale(y);return f.map((w,j)=>{var I,_,E,S,O,P;if(d){var T=d[j+p];if(T==null)return null;I=kQe(T,x)}else I=ts(w,r),Array.isArray(I)||(I=[y,I]);var F=yet(n,Lle)(I[1],j);if(e==="horizontal"){var J,[ge,le]=[l.scale(I[0]),l.scale(I[1])];_=I$({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),E=(J=le??ge)!==null&&J!==void 0?J:void 0,S=a.size;var de=ge-le;if(O=jf(de)?0:de,P={x:_,y:h.top,width:S,height:h.height},Math.abs(F)>0&&Math.abs(O)<Math.abs(F)){var Ae=Ko(O||F)*(Math.abs(F)-Math.abs(O));E-=Ae,O+=Ae}}else{var[se,Ie]=[i.scale(I[0]),i.scale(I[1])];if(_=se,E=I$({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),S=Ie-se,O=a.size,P={x:h.left,y:E,width:h.width,height:O},Math.abs(F)>0&&Math.abs(S)<Math.abs(F)){var Pe=Ko(S||F)*(Math.abs(F)-Math.abs(S));S+=Pe}}if(_==null||E==null||S==null||O==null)return null;var k=Rl(Rl({},w),{},{stackedBarStart:b,x:_,y:E,width:S,height:O,value:d?I:I[1],payload:w,background:P,tooltipPosition:{x:_+S/2,y:E+O/2},parentViewBox:m},A&&A[j]&&A[j].props);return k}).filter(Boolean)}function htt(t){var e=zo(t,dtt),r=Vet(e.stackId),n=eu();return v.createElement(_le,{id:e.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(zYe,{legendPayload:ett(e)}),v.createElement(ttt,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),v.createElement(lJe,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),v.createElement(Mf,{zIndex:e.zIndex},v.createElement(ftt,GA({},e,{id:a})))))}var dF=v.memo(htt,I8);dF.displayName="Bar";var mtt=["domain","range"],ptt=["domain","range"];function yq(t,e){if(t==null)return{};var r,n,a=gtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function gtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function bq(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Ule(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=yq(t,mtt),{domain:s,range:i}=e,l=yq(e,ptt);return!bq(r,s)||!bq(n,i)?!1:I8(a,l)}var xtt=["dangerouslySetInnerHTML","ticks","scale"],vtt=["id","scale"];function fF(){return fF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fF.apply(null,arguments)}function wq(t,e){if(t==null)return{};var r,n,a=ytt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ytt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function btt(t){var e=Ka(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(LJe(t)):r.current!==t&&e(UJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e(QJe(r.current)),r.current=null)},[e]),null}var wtt=t=>{var{xAxisId:e,className:r}=t,n=Gr(rR),a=eu(),s="xAxis",i=Gr(x=>Noe(x,s,e,a)),l=Gr(x=>voe(x,e)),c=Gr(x=>qqe(x,e)),u=Gr(x=>eoe(x,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:h}=t,A=wq(t,xtt),{id:m,scale:p}=u,g=wq(u,vtt);return v.createElement(S8,fF({},A,g,{x:c.x,y:c.y,width:l.width,height:l.height,className:_a("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:i,axisType:s}))},Ntt={allowDataOverflow:ao.allowDataOverflow,allowDecimals:ao.allowDecimals,allowDuplicatedCategory:ao.allowDuplicatedCategory,angle:ao.angle,axisLine:mp.axisLine,height:ao.height,hide:!1,includeHidden:ao.includeHidden,interval:ao.interval,minTickGap:ao.minTickGap,mirror:ao.mirror,orientation:ao.orientation,padding:ao.padding,reversed:ao.reversed,scale:ao.scale,tick:ao.tick,tickCount:ao.tickCount,tickLine:mp.tickLine,tickSize:mp.tickSize,type:ao.type,xAxisId:0},Ctt=t=>{var e=zo(t,Ntt);return v.createElement(v.Fragment,null,v.createElement(btt,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),v.createElement(wtt,e))},Qle=v.memo(Ctt,Ule);Qle.displayName="XAxis";var _tt=["dangerouslySetInnerHTML","ticks","scale"],Ett=["id","scale"];function AF(){return AF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AF.apply(null,arguments)}function Nq(t,e){if(t==null)return{};var r,n,a=Stt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Stt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Itt(t){var e=Ka(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?e(VJe(t)):r.current!==t&&e(HJe({prev:r.current,next:t})),r.current=t},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(e($Je(r.current)),r.current=null)},[e]),null}var jtt=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=v.useRef(null),i=v.useRef(null),l=Gr(rR),c=eu(),u=Ka(),d="yAxis",f=Gr(I=>yoe(I,e)),h=Gr(I=>Wqe(I,e)),A=Gr(I=>Noe(I,d,e,c)),m=Gr(I=>toe(I,e));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!f||g8(a)||v.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(KJe({id:e,width:_}))}}},[A,f,u,a,e,n,m]),f==null||h==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:x}=t,y=Nq(t,_tt),{id:b,scale:w}=m,j=Nq(m,Ett);return v.createElement(S8,AF({},y,j,{ref:s,labelRef:i,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:_a("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:A,axisType:d}))},Btt={allowDataOverflow:so.allowDataOverflow,allowDecimals:so.allowDecimals,allowDuplicatedCategory:so.allowDuplicatedCategory,angle:so.angle,axisLine:mp.axisLine,hide:!1,includeHidden:so.includeHidden,interval:so.interval,minTickGap:so.minTickGap,mirror:so.mirror,orientation:so.orientation,padding:so.padding,reversed:so.reversed,scale:so.scale,tick:so.tick,tickCount:so.tickCount,tickLine:mp.tickLine,tickSize:mp.tickSize,type:so.type,width:so.width,yAxisId:0},Ptt=t=>{var e=zo(t,Btt);return v.createElement(v.Fragment,null,v.createElement(Itt,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),v.createElement(jtt,e))},Vle=v.memo(Ptt,Ule);Vle.displayName="YAxis";var Ttt=(t,e)=>e,j8=Ut([Ttt,ea,Jie,zi,Loe,ch,uWe,Gi],gWe),B8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Hle=zu("mouseClick"),$le=xw();$le.startListening({actionCreator:Hle,effect:(t,e)=>{var r=t.payload,n=j8(e.getState(),B8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(cze({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var hF=zu("mouseMove"),Kle=xw(),JC=null;Kle.startListening({actionCreator:hF,effect:(t,e)=>{var r=t.payload;JC!==null&&cancelAnimationFrame(JC);var n=B8(r);JC=requestAnimationFrame(()=>{var a=e.getState(),s=i8(a,a.tooltip.settings.shared);if(s==="axis"){var i=j8(a,n);(i==null?void 0:i.activeIndex)!=null?e.dispatch(Poe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(Boe())}JC=null})}});function ktt(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Cq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Gle=vc({name:"rootProps",initialState:Cq,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Cq.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Ftt=Gle.reducer,{updateOptions:Ott}=Gle.actions,qle=vc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Dtt}=qle.actions,Rtt=qle.reducer,zle=zu("keyDown"),Wle=zu("focus"),P8=xw();P8.startListening({actionCreator:zle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=o8(a,Jv(r),Bw(r),kw(r)),l=i==null?-1:Number(i);if(!(!Number.isFinite(l)||l<0)){var c=ch(r);if(s==="Enter"){var u=sI(r,"axis","hover",String(a.index));e.dispatch(aF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=Zqe(r),f=d==="left-to-right"?1:-1,h=s==="ArrowRight"?1:-1,A=l+h*f;if(!(c==null||A>=c.length||A<0)){var m=sI(r,"axis","hover",String(A));e.dispatch(aF({active:!0,activeIndex:A.toString(),activeCoordinate:m}))}}}}}});P8.startListening({actionCreator:Wle,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=sI(r,"axis","hover",String(s));e.dispatch(aF({active:!0,activeIndex:s,activeCoordinate:i}))}}}});var Nu=zu("externalEvent"),Xle=xw(),RB=new Map;Xle.startListening({actionCreator:Nu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=RB.get(a);s!==void 0&&cancelAnimationFrame(s);var i=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Wze(l),activeDataKey:f8(l),activeIndex:$p(l),activeLabel:Voe(l),activeTooltipIndex:$p(l),isTooltipActive:Xze(l)};r(c,n)}finally{RB.delete(a)}});RB.set(a,i)}}});var Mtt=Ut([Xv],t=>t.tooltipItemPayloads),Ltt=Ut([Mtt,Tw,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=e(s,r);return i}}}),Yle=zu("touchMove"),Jle=xw();Jle.startListening({actionCreator:Yle,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=i8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var i=j8(n,B8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&e.dispatch(Poe({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(mse),f=(l=u.getAttribute(pse))!==null&&l!==void 0?l:void 0,h=Yv(n).find(p=>p.id===f);if(d==null||h==null||f==null)return;var{dataKey:A}=h,m=Ltt(n,d,f);e.dispatch(joe({activeDataKey:A,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var Utt=Lae({brush:nZe,cartesianAxis:GJe,chartData:qWe,errorBars:LZe,graphicalItems:iJe,layout:SQe,legend:TVe,options:VWe,polarAxis:bYe,polarOptions:Rtt,referenceElements:uZe,rootProps:Ftt,tooltip:uze,zIndex:PWe}),Qtt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return J9e({reducer:Utt,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([$le.middleware,Kle.middleware,P8.middleware,Xle.middleware,Jle.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(ese({type:"raf"}))},devTools:{serialize:{replacer:ktt},name:"recharts-".concat(r)}})};function Zle(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=eu(),s=v.useRef(null);if(a)return r;s.current==null&&(s.current=Qtt(e,n));var i=qD;return v.createElement(met,{context:i,store:s.current},r)}function Vtt(t){var{layout:e,margin:r}=t,n=Ka(),a=eu();return v.useEffect(()=>{a||(n(CQe(e)),n(NQe(r)))},[n,a,e,r]),null}var ece=v.memo(Vtt,I8);function tce(t){var e=Ka();return v.useEffect(()=>{e(Ott(t))},[e,t]),null}function _q(t){var{zIndex:e,isPanorama:r}=t,n=v.useRef(null),a=Ka();return v.useLayoutEffect(()=>(n.current&&a(jWe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(BWe({zIndex:e,isPanorama:r}))}),[a,e,r]),v.createElement("g",{tabIndex:-1,ref:n})}function Eq(t){var{children:e,isPanorama:r}=t,n=Gr(vWe);if(!n||n.length===0)return e;var a=n.filter(i=>i<0),s=n.filter(i=>i>0);return v.createElement(v.Fragment,null,a.map(i=>v.createElement(_q,{key:i,zIndex:i,isPanorama:r})),e,s.map(i=>v.createElement(_q,{key:i,zIndex:i,isPanorama:r})))}var Htt=["children"];function $tt(t,e){if(t==null)return{};var r,n,a=Ktt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ktt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dI.apply(null,arguments)}var Gtt={width:"100%",height:"100%",display:"block"},qtt=v.forwardRef((t,e)=>{var r=Cse(),n=_se(),a=Dse();if(!z0(r)||!z0(n))return null;var{children:s,otherAttributes:i,title:l,desc:c}=t,u,d;return i!=null&&(typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0),v.createElement(TD,dI({},i,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Gtt,ref:e}),s)}),ztt=t=>{var{children:e}=t,r=Gr(t3);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return v.createElement(TD,{width:n,height:a,x:i,y:s},e)},Sq=v.forwardRef((t,e)=>{var{children:r}=t,n=$tt(t,Htt),a=eu();return a?v.createElement(ztt,null,v.createElement(Eq,{isPanorama:!0},r)):v.createElement(qtt,dI({ref:e},n),v.createElement(Eq,{isPanorama:!1},r))});function Wtt(){var t=Ka(),[e,r]=v.useState(null),n=Gr(KQe);return v.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;ks(s)&&s!==n&&t(EQe(s))}},[e,t,n]),r}function Iq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xtt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Iq(Object(r),!0).forEach(function(n){Ytt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ytt(t,e,r){return(e=Jtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jtt(t){var e=Ztt(t,"string");return typeof e=="symbol"?e:e+""}function Ztt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gp.apply(null,arguments)}var ert=()=>(rXe(),null);function fI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var trt=v.forwardRef((t,e)=>{var r,n,a=v.useRef(null),[s,i]=v.useState({containerWidth:fI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:fI((n=t.style)===null||n===void 0?void 0:n.height)}),l=v.useCallback((u,d)=>{i(f=>{var h=Math.round(u),A=Math.round(d);return f.containerWidth===h&&f.containerHeight===A?f:{containerWidth:h,containerHeight:A}})},[]),c=v.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var h=m=>{var{width:p,height:g}=m[0].contentRect;l(p,g)},A=new ResizeObserver(h);A.observe(u),a.current=A}},[e,l]);return v.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),v.createElement(v.Fragment,null,v.createElement(n3,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Gp({ref:c},t)))}),rrt=v.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=v.useState({containerWidth:fI(r),containerHeight:fI(n)}),i=v.useCallback((c,u)=>{s(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=v.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();i(u,d)}},[e,i]);return v.createElement(v.Fragment,null,v.createElement(n3,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",Gp({ref:l},t)))}),nrt=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return v.createElement(v.Fragment,null,v.createElement(n3,{width:r,height:n}),v.createElement("div",Gp({ref:e},t)))}),art=v.forwardRef((t,e)=>{var{width:r,height:n}=t;return UA(r)||UA(n)?v.createElement(rrt,Gp({},t,{ref:e})):v.createElement(nrt,Gp({},t,{ref:e}))});function srt(t){return t===!0?trt:art}var irt=v.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:A,onTouchMove:m,onTouchStart:p,style:g,width:x,responsive:y,dispatchTouchEvents:b=!0}=t,w=v.useRef(null),j=Ka(),[I,_]=v.useState(null),[E,S]=v.useState(null),O=Wtt(),P=nR(),T=(P==null?void 0:P.width)>0?P.width:x,F=(P==null?void 0:P.height)>0?P.height:a,J=v.useCallback(Q=>{O(Q),typeof e=="function"&&e(Q),_(Q),S(Q),Q!=null&&(w.current=Q)},[O,e,_,S]),ge=v.useCallback(Q=>{j(Hle(Q)),j(Nu({handler:s,reactEvent:Q}))},[j,s]),le=v.useCallback(Q=>{j(hF(Q)),j(Nu({handler:u,reactEvent:Q}))},[j,u]),de=v.useCallback(Q=>{j(Boe()),j(Nu({handler:d,reactEvent:Q}))},[j,d]),Ae=v.useCallback(Q=>{j(hF(Q)),j(Nu({handler:f,reactEvent:Q}))},[j,f]),se=v.useCallback(()=>{j(Wle())},[j]),Ie=v.useCallback(Q=>{j(zle(Q.key))},[j]),Pe=v.useCallback(Q=>{j(Nu({handler:i,reactEvent:Q}))},[j,i]),k=v.useCallback(Q=>{j(Nu({handler:l,reactEvent:Q}))},[j,l]),H=v.useCallback(Q=>{j(Nu({handler:c,reactEvent:Q}))},[j,c]),R=v.useCallback(Q=>{j(Nu({handler:h,reactEvent:Q}))},[j,h]),M=v.useCallback(Q=>{j(Nu({handler:p,reactEvent:Q}))},[j,p]),G=v.useCallback(Q=>{b&&j(Yle(Q)),j(Nu({handler:m,reactEvent:Q}))},[j,b,m]),X=v.useCallback(Q=>{j(Nu({handler:A,reactEvent:Q}))},[j,A]),D=srt(y);return v.createElement(Woe.Provider,{value:I},v.createElement(Une.Provider,{value:E},v.createElement(D,{width:T??(g==null?void 0:g.width),height:F??(g==null?void 0:g.height),className:_a("recharts-wrapper",n),style:Xtt({position:"relative",cursor:"default",width:T,height:F},g),onClick:ge,onContextMenu:Pe,onDoubleClick:k,onFocus:se,onKeyDown:Ie,onMouseDown:H,onMouseEnter:le,onMouseLeave:de,onMouseMove:Ae,onMouseUp:R,onTouchEnd:X,onTouchMove:G,onTouchStart:M,ref:J},v.createElement(ert,null),r)))}),ort=["width","height","responsive","children","className","style","compact","title","desc"];function lrt(t,e){if(t==null)return{};var r,n,a=crt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function crt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var rce=v.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:i,style:l,compact:c,title:u,desc:d}=t,f=lrt(t,ort),h=If(f);return c?v.createElement(v.Fragment,null,v.createElement(n3,{width:r,height:n}),v.createElement(Sq,{otherAttributes:h,title:u,desc:d},s)):v.createElement(irt,{className:i,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},v.createElement(Sq,{otherAttributes:h,title:u,desc:d,ref:e},v.createElement(fZe,null,s)))});function mF(){return mF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mF.apply(null,arguments)}var urt={top:5,right:5,bottom:5,left:5},drt={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:urt,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},frt=v.forwardRef(function(e,r){var n,a=zo(e.categoricalChartProps,drt),{chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:i,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return v.createElement(Zle,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},v.createElement(Ple,{chartData:u.data}),v.createElement(ece,{layout:a.layout,margin:a.margin}),v.createElement(tce,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(rce,mF({},a,{ref:r})))}),Art=["axis","item"],hrt=v.forwardRef((t,e)=>v.createElement(frt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Art,tooltipPayloadSearcher:Yoe,categoricalChartProps:t,ref:e}));function mrt(t){var e=Ka();return v.useEffect(()=>{e(Dtt(t))},[e,t]),null}var prt=["layout"];function pF(){return pF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pF.apply(null,arguments)}function grt(t,e){if(t==null)return{};var r,n,a=xrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var vrt={top:5,right:5,bottom:5,left:5},nce={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:vrt,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yrt=v.forwardRef(function(e,r){var n,a=zo(e.categoricalChartProps,nce),{layout:s}=a,i=grt(a,prt),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(Zle,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},v.createElement(Ple,{chartData:a.data}),v.createElement(ece,{layout:s,margin:a.margin}),v.createElement(tce,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(mrt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),v.createElement(rce,pF({},i,{ref:r})))});function jq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(r),!0).forEach(function(n){brt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function brt(t,e,r){return(e=wrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wrt(t){var e=Nrt(t,"string");return typeof e=="symbol"?e:e+""}function Nrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Crt=["item"],_rt=Bq(Bq({},nce),{},{layout:"centric",startAngle:0,endAngle:360}),Ert=v.forwardRef((t,e)=>{var r=zo(t,_rt);return v.createElement(yrt,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Crt,tooltipPayloadSearcher:Yoe,categoricalChartProps:r,ref:e})});const Srt="sellers_candies",ZC="cash_deliveries_candies";function sa(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function Zs(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function e_(t,e){return t*e/100}function t_(t,e,r){return t-e-r}function Pq(t){return t?Er(t.toDate(),"yyyy-MM-dd"):""}function r_(t){if(!t)return dr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return dr.fromDate(a)}function Irt(){const t=new Date,[e,r]=v.useState(Er(Vd(t),"yyyy-MM-dd")),[n,a]=v.useState(Er(Qd(t),"yyyy-MM-dd")),[s,i]=v.useState([]),l=v.useMemo(()=>{const D=new Map;return s.forEach(Q=>D.set(Q.id,Q)),D},[s]),[c,u]=v.useState([]),[d,f]=v.useState(!0),[h,A]=v.useState(()=>Er(new Date,"yyyy-MM-dd")),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState("0"),[w,j]=v.useState(""),[I,_]=v.useState(null),[E,S]=v.useState({}),O=v.useRef(null);v.useEffect(()=>{const D=er(ht(ke,Srt),on("name","asc")),Q=Od(D,te=>{const me=te.docs.map(L=>{const he=L.data();return{id:L.id,name:String((he==null?void 0:he.name)??""),branch:he!=null&&he.branch?String(he.branch):"",commissionPercent:sa((he==null?void 0:he.commissionPercent)??0)}});i(me)},()=>i([]));return()=>Q()},[]),v.useEffect(()=>{f(!0);const D=r_(e),Q=new Date(r_(n).toDate().getTime());Q.setDate(Q.getDate()+1);const te=dr.fromDate(Q),me=er(ht(ke,ZC),ir("date",">=",D),ir("date","<",te),on("date","desc")),L=Od(me,he=>{const ne=he.docs.map(z=>{const ce=z.data();return{id:z.id,date:ce==null?void 0:ce.date,sellerId:String((ce==null?void 0:ce.sellerId)??""),sellerName:String((ce==null?void 0:ce.sellerName)??""),amountDelivered:sa(ce==null?void 0:ce.amountDelivered),commissionPercent:sa(ce==null?void 0:ce.commissionPercent),commissionPaid:sa(ce==null?void 0:ce.commissionPaid),extraExpenses:sa(ce==null?void 0:ce.extraExpenses),totalFinal:sa(ce==null?void 0:ce.totalFinal),comment:String((ce==null?void 0:ce.comment)??""),createdAt:ce==null?void 0:ce.createdAt,updatedAt:ce==null?void 0:ce.updatedAt}});u(ne),f(!1)},he=>{console.error("Firestore deliveries query error:",he),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>L()},[e,n]);const P=v.useMemo(()=>m?l.get(m):void 0,[m,l]),T=sa((P==null?void 0:P.commissionPercent)??0),F=sa(g),J=sa(y),ge=e_(F,T),le=t_(F,ge,J),de=v.useMemo(()=>{var Q;const D=new Map;for(const te of c){const me=te.sellerId||te.sellerName||"UNKNOWN",L=D.get(me)??{sellerId:te.sellerId,sellerName:te.sellerName||((Q=l.get(te.sellerId))==null?void 0:Q.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};L.delivered+=sa(te.amountDelivered),L.commission+=sa(te.commissionPaid),L.totalFinal+=sa(te.totalFinal),D.set(me,L)}return Array.from(D.values()).sort((te,me)=>te.sellerName.localeCompare(me.sellerName))},[c,l]),Ae=v.useMemo(()=>{let D=0,Q=0,te=0,me=0;for(const L of c)D+=sa(L.amountDelivered),Q+=sa(L.commissionPaid),te+=sa(L.extraExpenses),me+=sa(L.totalFinal);return{delivered:D,commission:Q,expenses:te,totalFinal:me}},[c]),se=v.useMemo(()=>de.map(D=>({name:D.sellerName,Entregado:Number(D.delivered.toFixed(2)),Comision:Number(D.commission.toFixed(2))})),[de]),Ie=v.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(Ae.delivered.toFixed(2))},{name:"Total Comisin",value:Number(Ae.commission.toFixed(2))},{name:"Total Gastos",value:Number(Ae.expenses.toFixed(2))}].filter(D=>D.value>0),[Ae]),Pe=["#3B82F6","#F59E0B","#EF4444"];async function k(){if(!m)return alert("Seleccion un vendedor.");if(F<=0)return alert("Ingres un Monto entregado vlido (> 0).");const D=l.get(m),Q=(D==null?void 0:D.name)??"Sin nombre",te=sa((D==null?void 0:D.commissionPercent)??0),me=e_(F,te),L=t_(F,me,J);await _n(ht(ke,ZC),{date:r_(h),sellerId:m,sellerName:Q,amountDelivered:F,commissionPercent:te,commissionPaid:me,extraExpenses:J,totalFinal:L,comment:w??"",createdAt:dr.now()}),x(""),b("0"),j("")}function H(D){_(D.id),S({...D,dateInput:Pq(D.date)})}function R(){_(null),S({})}async function M(D){const Q=E,te=String(Q.sellerId??""),me=l.get(te),L=String(Q.sellerName??(me==null?void 0:me.name)??"Sin nombre"),he=sa(Q.amountDelivered),ne=sa(Q.extraExpenses),z=sa(Q.commissionPercent??(me==null?void 0:me.commissionPercent)??0),ce=e_(he,z),K=t_(he,ce,ne),oe=r_(String(Q.dateInput??Pq(Q.date)));await nn($t(ke,ZC,D),{date:oe,sellerId:te,sellerName:L,amountDelivered:he,commissionPercent:z,commissionPaid:ce,extraExpenses:ne,totalFinal:K,comment:String(Q.comment??""),updatedAt:dr.now()}),R()}async function G(D){confirm("Eliminar este registro?")&&await Cn($t(ke,ZC,D))}async function X(){if(!O.current)return;const D=await tg(O.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),Q=D.toDataURL("image/png"),te=new Fr("p","mm","a4"),me=te.internal.pageSize.getWidth(),L=te.internal.pageSize.getHeight(),he=me,ne=D.height*he/D.width;let z=ne,ce=0;for(te.addImage(Q,"PNG",0,ce,he,ne),z-=L;z>0;)te.addPage(),ce=-(ne-z),te.addImage(Q,"PNG",0,ce,he,ne),z-=L;te.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return o.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),o.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",o.jsx("span",{className:"font-bold",children:e})," "," ",o.jsx("span",{className:"font-bold",children:n})]})]}),o.jsx("button",{onClick:X,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),o.jsx("input",{type:"date",value:e,onChange:D=>r(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),o.jsx("input",{type:"date",value:n,onChange:D=>a(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),o.jsxs("div",{ref:O,className:"space-y-3 md:space-y-4",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Zs(Ae.totalFinal)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Zs(Ae.commission)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Zs(Ae.expenses)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),o.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[o.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),o.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",Zs(Ae.delivered)]}),o.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),o.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),o.jsx("tbody",{children:de.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):de.map(D=>o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",Zs(D.delivered)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",Zs(D.commission)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Zs(D.totalFinal)]})]},D.sellerId||D.sellerName))})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(D$,{children:o.jsxs(hrt,{data:se,children:[o.jsx(Qle,{dataKey:"name",interval:0,angle:-12,height:70}),o.jsx(Vle,{}),o.jsx(FG,{}),o.jsx(Uk,{}),o.jsx(dF,{dataKey:"Entregado"}),o.jsx(dF,{dataKey:"Comision"})]})})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),o.jsx("div",{className:"w-full h-[320px]",children:o.jsx(D$,{children:o.jsxs(Ert,{children:[o.jsx(Sle,{data:Ie,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Ie.map((D,Q)=>o.jsx(Ow,{fill:Pe[Q%Pe.length]},Q))}),o.jsx(FG,{}),o.jsx(Uk,{})]})})})]})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:h,onChange:D=>A(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:m,onChange:D=>p(D.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",inputMode:"decimal",value:g,onChange:D=>x(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),o.jsx("input",{value:`${T}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),o.jsx("input",{value:`$ ${Zs(ge)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:D=>b(D.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),o.jsx("input",{value:`$ ${Zs(le)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),o.jsxs("label",{className:"space-y-1 md:col-span-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{value:w,onChange:D=>j(D.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{onClick:k,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),o.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[o.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?o.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[o.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),o.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),o.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),o.jsx("tbody",{children:c.map(D=>{if(!(I===D.id))return o.jsxs("tr",{className:"border-t",children:[o.jsx("td",{className:"p-2",children:Er(D.date.toDate(),"yyyy-MM-dd")}),o.jsx("td",{className:"p-2 font-semibold",children:D.sellerName}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",Zs(D.amountDelivered)]}),o.jsxs("td",{className:"p-2 text-right",children:[Zs(D.commissionPercent),"%"]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",Zs(D.commissionPaid)]}),o.jsxs("td",{className:"p-2 text-right",children:["$ ",Zs(D.extraExpenses)]}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Zs(D.totalFinal)]}),o.jsx("td",{className:"p-2",children:D.comment}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>H(D),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>G(D.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},D.id);const te=sa(E.amountDelivered??D.amountDelivered),me=sa(E.commissionPercent??D.commissionPercent),L=sa(E.extraExpenses??D.extraExpenses),he=e_(te,me),ne=t_(te,he,L);return o.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:z=>S(ce=>({...ce,dateInput:z.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("select",{value:String(E.sellerId??D.sellerId),onChange:z=>{const ce=z.target.value,K=l.get(ce);S(oe=>({...oe,sellerId:ce,sellerName:(K==null?void 0:K.name)??"",commissionPercent:sa((K==null?void 0:K.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(z=>o.jsxs("option",{value:z.id,children:[z.name," ",z.branch?`(${z.branch})`:""]},z.id))]})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(te),onChange:z=>S(ce=>({...ce,amountDelivered:sa(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(me),onChange:z=>S(ce=>({...ce,commissionPercent:sa(z.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",Zs(he)]}),o.jsx("td",{className:"p-2 text-right",children:o.jsx("input",{type:"number",value:String(L),onChange:z=>S(ce=>({...ce,extraExpenses:sa(z.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",Zs(ne)]}),o.jsx("td",{className:"p-2",children:o.jsx("input",{type:"text",value:String(E.comment??D.comment),onChange:z=>S(ce=>({...ce,comment:z.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),o.jsx("td",{className:"p-2",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(D.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:R,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},D.id)})})]})}),o.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(D=>o.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"font-black text-gray-900",children:D.sellerName}),o.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Er(D.date.toDate(),"yyyy-MM-dd")})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),o.jsxs("div",{className:"font-extrabold",children:["$ ",Zs(D.amountDelivered)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),o.jsxs("div",{className:"font-semibold",children:[Zs(D.commissionPercent),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),o.jsxs("div",{className:"font-semibold",children:["$ ",Zs(D.commissionPaid)]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),o.jsxs("div",{className:"font-semibold",children:["$ ",Zs(D.extraExpenses)]})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),o.jsxs("div",{className:"text-base font-black",children:["$ ",Zs(D.totalFinal)]})]}),D.comment?o.jsxs("div",{className:"col-span-2",children:[o.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),o.jsx("div",{className:"text-sm text-gray-800",children:D.comment})]}):null]}),o.jsxs("div",{className:"mt-3 flex gap-2",children:[o.jsx("button",{onClick:()=>H(D),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),o.jsx("button",{onClick:()=>G(D.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},D.id)),I?o.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[o.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),o.jsx("input",{type:"date",value:String(E.dateInput??""),onChange:D=>S(Q=>({...Q,dateInput:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),o.jsxs("select",{value:String(E.sellerId??""),onChange:D=>{const Q=D.target.value,te=l.get(Q);S(me=>({...me,sellerId:Q,sellerName:(te==null?void 0:te.name)??"",commissionPercent:sa((te==null?void 0:te.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[o.jsx("option",{value:"",children:"Seleccionar..."}),s.map(D=>o.jsxs("option",{value:D.id,children:[D.name," ",D.branch?`(${D.branch})`:""]},D.id))]})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),o.jsx("input",{type:"number",value:String(E.amountDelivered??""),onChange:D=>S(Q=>({...Q,amountDelivered:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),o.jsx("input",{type:"number",value:String(E.extraExpenses??""),onChange:D=>S(Q=>({...Q,extraExpenses:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),o.jsx("input",{type:"number",value:String(E.commissionPercent??""),onChange:D=>S(Q=>({...Q,commissionPercent:sa(D.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("label",{className:"space-y-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),o.jsx("input",{type:"text",value:String(E.comment??""),onChange:D=>S(Q=>({...Q,comment:D.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>M(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),o.jsx("button",{onClick:R,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Cm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function jrt(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Tq(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Brt(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Prt({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),[s,i]=v.useState(""),l=v.useRef("");return v.useEffect(()=>{if(!t)return;let c=!1;const u=new Jb,d=()=>{var h,A,m;try{(h=a.current)==null||h.stop()}catch{}a.current=null;try{const p=(A=n.current)==null?void 0:A.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(g=>g.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{i("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const h=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,A=>{if(!c&&A){const m=String(A.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=h}catch(h){const A=String((h==null?void 0:h.message)||""),m=String((h==null?void 0:h.name)||"");A.toLowerCase().includes("permission")||m==="NotAllowedError"?i("Permiso de cmara denegado."):m==="NotFoundError"||A.toLowerCase().includes("notfound")?i("No se encontr cmara en este dispositivo."):A.toLowerCase().includes("secure")||A.toLowerCase().includes("https")?i("La cmara requiere HTTPS (sitio seguro)."):i(A||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?o.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),o.jsxs("div",{className:"p-3",children:[o.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[o.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&o.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),o.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function Trt(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState("ANY"),[y,b]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const Ge=await Lt(er(ht(ke,"candy_main_orders"))),ye=new Map;Ge.forEach(qe=>{var bt,kt,Vt;const je=qe.data(),pe=Brt(je.date),He=((kt=(bt=je==null?void 0:je.createdAt)==null?void 0:bt.toMillis)==null?void 0:kt.call(bt))||((Vt=je==null?void 0:je.createdAt)!=null&&Vt.seconds?je.createdAt.seconds*1e3:0)||0,at=Math.max(pe,He),yt=Array.isArray(je.items)?je.items:[];for(const ve of yt){const Qe=String((ve==null?void 0:ve.id)||(ve==null?void 0:ve.productId)||"").trim();if(!Qe)continue;const Z=String((ve==null?void 0:ve.name)||(ve==null?void 0:ve.productName)||"").trim(),$e=String((ve==null?void 0:ve.category)||"").trim(),Le=Number((ve==null?void 0:ve.unitPriceIsla)||0),Ve=Number((ve==null?void 0:ve.unitPriceRivas)||0),At=Number((ve==null?void 0:ve.unitsPerPackage)||(ve==null?void 0:ve.unitsPerPack)||1),pt=ye.get(Qe);(!pt||at>=pt._sortKey)&&ye.set(Qe,{productId:Qe,category:$e,productName:Z,priceIsla:Le,priceRivas:Ve,unitsPerPackage:At,_sortKey:at})}});const We=Array.from(ye.values()).sort((qe,je)=>qe.productName.localeCompare(je.productName,"es"));l(We)}catch(Ge){console.error(Ge),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),v.useEffect(()=>{const Ge=ht(ke,"products_candies"),ye=er(Ge),We=Od(ye,qe=>{const je={},pe={},He={},at={};qe.forEach(yt=>{const bt=yt.data();je[yt.id]=Number((bt==null?void 0:bt.providerPrice)||(bt==null?void 0:bt.providerPricePerUnit)||0),He[yt.id]=Number((bt==null?void 0:bt.unitsPerPackage)||(bt==null?void 0:bt.unitsPerPack)||1)||1;const kt=String((bt==null?void 0:bt.barcode)||"").trim();kt&&(pe[yt.id]=kt);const Vt=String((bt==null?void 0:bt.packaging)||(bt==null?void 0:bt.empaque)||"").trim();Vt&&(at[yt.id]=Vt)});try{const yt=I.current||{};let bt=!1;for(const Qe of Object.keys(pe))if((pe[Qe]||"")!==(yt[Qe]||"")){bt=!0;break}const kt=E.current||{};let Vt=!1;for(const Qe of Object.keys(He))if((He[Qe]||0)!==(kt[Qe]||0)){Vt=!0;break}T(je),J(He);const ve={...pe,...yt};j(ve),I.current=ve,E.current={...He},Ae(at),l(Qe=>Qe.map(Z=>({...Z,unitsPerPackage:He[Z.productId]??Z.unitsPerPackage}))),!_.current&&bt&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!_.current&&Vt&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),_.current=!1}catch{T(je),J(He),j(bt=>({...pe,...bt})),E.current={...He},Ae(at),l(bt=>bt.map(kt=>({...kt,unitsPerPackage:He[kt.productId]??kt.unitsPerPackage})))}},qe=>console.error(qe));return()=>We()},[]);const[w,j]=v.useState({}),I=v.useRef({}),_=v.useRef(!0),E=v.useRef({}),S=v.useRef({}),O=v.useRef(!0),[P,T]=v.useState({}),[F,J]=v.useState({}),[ge,le]=v.useState({}),[de,Ae]=v.useState({}),[se,Ie]=v.useState("");v.useEffect(()=>{const Ge=ht(ke,"inventory_candies"),ye=er(Ge),We=Od(ye,qe=>{try{const je={};qe.forEach(He=>{var ve,Qe,Z;const at=He.data(),yt=String(at.productId||"").trim();if(!yt)return;const bt=Number(at.unitsPerPackage||at.unitsPerPack||0)||0,kt=((Qe=(ve=at==null?void 0:at.createdAt)==null?void 0:ve.toMillis)==null?void 0:Qe.call(ve))||((Z=at==null?void 0:at.createdAt)!=null&&Z.seconds?at.createdAt.seconds*1e3:0)||0,Vt=je[yt];(!Vt||kt>=Vt.ts)&&(je[yt]={val:bt||0,ts:kt})});const pe={};for(const He of Object.keys(je))pe[He]=je[He].val||0;le(pe);try{const He=S.current||{};let at=!1;for(const yt of Object.keys(pe))if((pe[yt]||0)!==(He[yt]||0)){at=!0;break}S.current={...pe},!O.current&&at&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),O.current=!1}catch{}l(He=>He.map(at=>({...at,unitsPerPackage:pe[at.productId]??F[at.productId]??at.unitsPerPackage})))}catch(je){console.error("inventory_candies snapshot error:",je)}},qe=>console.error(qe));return()=>We()},[F]),v.useEffect(()=>{l(Ge=>Ge.map(ye=>({...ye,unitsPerPackage:ge[ye.productId]??F[ye.productId]??ye.unitsPerPackage})))},[F,ge]);const Pe=v.useMemo(()=>{const Ge=jrt(c),ye=String(d||"").trim(),We=String(se||"").trim().toLowerCase(),qe=h.trim()===""?null:Tq(h,NaN),je=m.trim()===""?null:Tq(m,NaN);return i.filter(pe=>{const He=String(de[pe.productId]||"").trim().toLowerCase();if(We)return He===We;if(Ge&&!`${pe.category} ${pe.productName}`.toLowerCase().includes(Ge))return!1;if(ye){const kt=String(pe.productId||""),Vt=String(w[pe.productId]||"");if(!kt.includes(ye)&&!Vt.includes(ye))return!1}const at=g==="ISLA"?[pe.priceIsla]:g==="RIVAS"?[pe.priceRivas]:[pe.priceIsla,pe.priceRivas],yt=qe==null||!Number.isFinite(qe)?!0:at.some(kt=>kt>=qe),bt=je==null||!Number.isFinite(je)?!0:at.some(kt=>kt<=je);return yt&&bt})},[i,c,h,m,g,w,se,de]),k=()=>{u(""),A(""),p(""),x("ANY"),Ie("")},[H,R]=v.useState(!1),[M,G]=v.useState("search"),[X,D]=v.useState(null),[Q,te]=v.useState(0),[me,L]=v.useState(0),[he,ne]=v.useState(null),[z,ce]=v.useState(""),[K,oe]=v.useState(""),xe=v.useMemo(()=>c.trim()!==""||h.trim()!==""||m.trim()!==""||g!=="ANY"||se.trim()!=="",[c,h,m,g,se]),[De,nt]=v.useState(!1);v.useEffect(()=>{var We;const Ge=window.matchMedia("(max-width: 900px)"),ye=()=>nt(Ge.matches);return ye(),(We=Ge.addEventListener)==null||We.call(Ge,"change",ye),()=>{var qe;return(qe=Ge.removeEventListener)==null?void 0:qe.call(Ge,"change",ye)}},[]);const[Me,Je]=v.useState(!1);v.useEffect(()=>{const Ge=BO(Q0,async ye=>{if(!ye)return Je(!1);try{const We=await li($t(ke,"users",ye.uid)),qe=We.exists()?We.data():null,je=qe?Array.isArray(qe.roles)?qe.roles:qe.role?[qe.role]:[]:[];Je(Jr(je,"admin"))}catch(We){console.error(We),Je(!1)}});return()=>Ge()},[]);const lt=async Ge=>{var ye;if(M==="search"){f(Ge);const We=Object.keys(w).find(pe=>(w[pe]||"")===Ge),qe=(ye=i.find(pe=>String(pe.productId||"").includes(Ge)))==null?void 0:ye.productId,je=We||qe||null;je&&(ne(je),b(!1)),R(!1);return}if(M==="edit"&&X)try{const We=ht(ke,"products_candies"),qe=$t(We,X);await nn(qe,{barcode:Ge}),j(je=>({...je,[X]:Ge})),ce(Ge),R(!1),G("search"),s(" Producto guardado.")}catch(We){console.error(We),s(" Error guardando el cdigo.")}},ft=async Ge=>{l(ye=>ye.map(We=>We.productId===Ge?{...We,priceIsla:Number(Q||0),priceRivas:Number(me||0)}:We));try{const ye=String(K||"").trim();await nn($t(ht(ke,"products_candies"),Ge),{packaging:ye||""}),Ae(We=>({...We,[Ge]:ye||""}))}catch(ye){console.error("Error updating packaging:",ye),s(" Error guardando empaque.")}D(null),s(De?" Producto guardado.":"")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),o.jsx("div",{className:"flex gap-2",children:o.jsx(pc,{onClick:e,loading:r})})]}),o.jsxs("div",{className:"md:hidden mb-3",children:[o.jsxs("button",{type:"button",onClick:()=>b(Ge=>!Ge),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${xe?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-semibold",children:"Filtros"}),o.jsxs("div",{className:"text-xs text-gray-600",children:[xe?"Activos":"Ninguno","  ","Mostrando ",o.jsx("b",{children:Pe.length})]})]}),o.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&o.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:Ge=>u(Ge.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:se,onChange:Ge=>Ie(Ge.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:Ge=>f(Ge.target.value),placeholder:"Cdigo EAN"}),o.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{G("search"),R(!0)},children:"Escanear"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{k(),f("")},children:"Limpiar filtros"}),o.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),o.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:Ge=>u(Ge.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:se,onChange:Ge=>Ie(Ge.target.value),children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:h,onChange:Ge=>A(Ge.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:Ge=>p(Ge.target.value),placeholder:"0"})]}),o.jsx("div",{className:"text-right",children:o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:k,children:"Limpiar"})})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[o.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",o.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",o.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",o.jsx("b",{children:Pe.length})]})]})]}),o.jsxs("div",{className:"md:hidden",children:[r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):Pe.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):o.jsx("div",{className:"space-y-2",children:Pe.map(Ge=>{const ye=he===Ge.productId,We=X===Ge.productId,qe=P[Ge.productId]||0,je=Ge.priceIsla-qe,pe=je*.25;return o.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[o.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ne(He=>He===Ge.productId?null:Ge.productId),children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[13px] font-semibold truncate",children:Ge.productName}),o.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:Ge.category})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Cm(Ge.priceIsla)})]})]}),ye&&o.jsx("div",{className:"px-3 pb-3 border-t",children:o.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),o.jsx("div",{className:"text-sm",children:Ge.category}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),o.jsx("div",{className:"text-sm",children:String(Ge.unitsPerPackage||1)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),o.jsx("div",{className:"text-sm tabular-nums",children:Cm(Ge.priceIsla/(Ge.unitsPerPackage||1))})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),We?o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(Q),onChange:He=>te(Number(He.target.value||0))}):o.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Cm(Ge.priceIsla)})]})]}),o.jsxs("div",{children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),o.jsx("div",{className:"text-sm tabular-nums",children:Cm(je)})]}),o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),o.jsx("div",{className:"text-sm tabular-nums",children:Cm(pe)})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),We?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:z,readOnly:!0}),o.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{G("edit"),R(!0)},type:"button",children:"Escanear"})]}):o.jsx("div",{children:w[Ge.productId]||""})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),We?o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:K,onChange:He=>oe(He.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):o.jsx("div",{className:"text-sm",children:de[Ge.productId]||""})]})]})]}),o.jsx("div",{className:"flex gap-2",children:We?o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{ft(Ge.productId),ne(null)},type:"button",children:"Guardar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{G("edit"),R(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>D(null),type:"button",children:"Cancelar"})]}):Me&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{D(Ge.productId),te(Ge.priceIsla||0),L(Ge.priceRivas||0),ce(w[Ge.productId]||""),oe(de[Ge.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(He=>He.filter(at=>at.productId!==Ge.productId)),type:"button",children:"Borrar"})]})})]})})]},Ge.productId)})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a})]}),o.jsx(Prt,{open:H,onClose:()=>R(!1),onDetected:lt}),o.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),o.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):Pe.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):Pe.map(Ge=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-2 border",children:Ge.category}),o.jsx("td",{className:"p-2 border",children:Ge.productName}),o.jsx("td",{className:"p-2 border",children:X===Ge.productId?o.jsxs("select",{className:"w-full border rounded px-2 py-1",value:K,onChange:ye=>oe(ye.target.value),children:[o.jsx("option",{value:"",children:""}),o.jsx("option",{value:"Tarro",children:"Tarro"}),o.jsx("option",{value:"Bolsa",children:"Bolsa"}),o.jsx("option",{value:"Ristra",children:"Ristra"}),o.jsx("option",{value:"Caja",children:"Caja"}),o.jsx("option",{value:"Vaso",children:"Vaso"}),o.jsx("option",{value:"Pana",children:"Pana"})]}):de[Ge.productId]||""}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:X===Ge.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Q),onChange:ye=>te(Number(ye.target.value||0))}):Cm(Ge.priceIsla)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:X===Ge.productId?o.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(me),onChange:ye=>L(Number(ye.target.value||0))}):Cm(Ge.priceRivas)}),o.jsx("td",{className:"p-2 border text-right",children:X===Ge.productId?o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>ft(Ge.productId),type:"button",children:"Guardar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>D(null),type:"button",children:"Cancelar"})]}):Me&&o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{D(Ge.productId),te(Ge.priceIsla||0),L(Ge.priceRivas||0),ce(w[Ge.productId]||"")},type:"button",children:"Editar"}),o.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{D(Ge.productId),G("edit"),R(!0)},type:"button",children:"Escanear"}),o.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(ye=>ye.filter(We=>We.productId!==Ge.productId)),type:"button",children:"Borrar"})]})})]},Ge.productId))})]})}),a&&o.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const n_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],kq=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],MB=["Hombre","Mujer","Variado","NA"],krt=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],il=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Bi(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function kl(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function G_(t,e=1){const r=Math.floor(kl(t,e));return r>0?r:e}function ace(t){return!Number.isFinite(t)||t<=0?0:t}function LB(t){const e=String(t??"").trim();return e||""}function Ad(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Bi(a),a));for(const a of e){const s=n.get(Bi(a));if(s!=null)return t[s]}}function Frt(t){return Object.values(t||{}).every(r=>Bi(r)==="")}function zg(t){const e=Math.max(0,kl(t.providerPrice,0)),r=Math.max(1,G_(t.quantity,1)),n=ace(kl(t.margin,0)),a=Math.max(0,kl(t.salePrice,0)),s=n>0?e/n:e,i=a>0?a:s,l=i>0?e/i:n,c=e*r,u=(i-e)*r,d=i*r;return{providerPrice:e,quantity:r,margin:l,salePrice:i,facturado:c,gain:u,totalEsperado:d}}function Ort(){const{refreshKey:t,refresh:e}=gc(),[r,n]=v.useState(!0),[a,s]=v.useState(""),[i,l]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(""),[h,A]=v.useState(""),[m,p]=v.useState(""),[g,x]=v.useState(""),[y,b]=v.useState(!1),[w,j]=v.useState(null),[I,_]=v.useState(!1),[E,S]=v.useState(null),[O,P]=v.useState(n_[0]),[T,F]=v.useState(kq[0]),[J,ge]=v.useState(""),[le,de]=v.useState(0),[Ae,se]=v.useState(1),[Ie,Pe]=v.useState(.7),[k,H]=v.useState(0),[R,M]=v.useState("NA"),[G,X]=v.useState(""),[D,Q]=v.useState(""),[te,me]=v.useState(!1),[L,he]=v.useState(""),[ne,z]=v.useState([]),[ce,K]=v.useState([]),[oe,xe]=v.useState(!1);v.useEffect(()=>{(async()=>{n(!0),s("");try{const ve=await Lt(er(ht(ke,"products_stationery"))),Qe=[];ve.forEach(Z=>{const $e=Z.data();Qe.push({id:Z.id,category:$e.category||"",brand:$e.brand||"",name:$e.name||"",providerPrice:Number($e.providerPrice||0),quantity:Number($e.quantity||1),facturado:Number($e.facturado||0),margin:Number($e.margin||0),salePrice:Number($e.salePrice||0),gain:Number($e.gain||0),gender:$e.gender||"NA",typeProduct:$e.typeProduct||"",code:$e.code??"",createdAt:$e.createdAt,updatedAt:$e.updatedAt,totalEsperado:Number($e.totalEsperado||Number($e.salePrice||0)*Number($e.quantity||1))})}),l(Qe)}catch(ve){console.error(ve),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const De=v.useMemo(()=>{const ve=Bi(d),Qe=Bi(h),Z=m.trim()===""?null:kl(m,NaN),$e=g.trim()===""?null:kl(g,NaN);return i.filter(Le=>!(ve&&!`${Le.category} ${Le.name}`.toLowerCase().includes(ve)||Qe&&!String(Le.code||"").toLowerCase().includes(Qe)||Z!=null&&Number.isFinite(Z)&&Le.salePrice<Z||$e!=null&&Number.isFinite($e)&&Le.salePrice>$e))},[i,d,h,m,g]),nt=v.useMemo(()=>d.trim()!==""||h.trim()!==""||m.trim()!==""||g.trim()!=="",[d,h,m,g]),Me=v.useMemo(()=>{const ve=i.length,Qe=i.reduce((Le,Ve)=>Le+(Ve.facturado||0),0),Z=i.reduce((Le,Ve)=>Le+Number(Ve.totalEsperado||Number(Ve.salePrice||0)*Number(Ve.quantity||1)),0),$e=i.reduce((Le,Ve)=>Le+(Ve.gain||0),0);return{count:ve,sumFact:Qe,sumEsperado:Z,sumGain:$e}},[i]),Je=()=>{P(n_[0]),ge(""),de(0),se(1),Pe(.7),H(0),M("NA"),X(""),Q(""),j(null)},lt=()=>{Je(),b(!0)},ft=ve=>{j(ve),P(ve.category||n_[0]),F(ve.brand||kq[0]),ge(ve.name||""),de(Number(ve.providerPrice||0)),se(Number(ve.quantity||1)),Pe(Number(ve.margin||.7)),H(Number(ve.salePrice||0)),M(ve.gender||"NA"),X(ve.typeProduct||""),Q(String(ve.code||"")),b(!0)},Ge=async()=>{s("");const ve=String(O||"").trim(),Qe=String(T||"").trim(),Z=String(J||"").trim(),{providerPrice:$e,quantity:Le,margin:Ve,salePrice:At,facturado:pt,totalEsperado:Be,gain:gt}=zg({providerPrice:le,quantity:Ae,margin:Ie,salePrice:k});if(!ve)return s(" Categora requerida.");if(!Z)return s(" Producto requerido.");if($e<=0)return s(" Precio proveedor debe ser > 0.");if(Le<=0)return s(" Cantidad debe ser > 0.");if(At<=0)return s(" Precio venta invlido.");if(Ve<=0)return s(" Margen invlido.");const V={category:ve,brand:Qe,name:Z,providerPrice:$e,quantity:Le,facturado:pt,margin:Ve,salePrice:At,gain:gt,gender:R||"NA",typeProduct:String(G||"").trim(),code:LB(D)||null,updatedAt:dr.now(),totalEsperado:Be};try{n(!0),w?(await nn($t(ke,"products_stationery",w.id),V),s(" Producto actualizado.")):(await _n(ht(ke,"products_stationery"),{...V,createdAt:dr.now()}),s(" Producto creado.")),b(!1),j(null),Je(),e()}catch(ae){console.error(ae),s(" Error guardando producto.")}finally{n(!1)}},ye=async()=>{var ve;try{const Qe=new Jb,Z=await Jb.listVideoInputDevices(),$e=(ve=Z[Z.length-1])==null?void 0:ve.deviceId;if(!$e)return null;const Le=document.createElement("div");Le.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Ve=document.createElement("div");Ve.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const At=document.createElement("div");At.className="p-3 flex items-center justify-between border-b",At.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const pt=document.createElement("button");pt.textContent="Cerrar",pt.className="px-3 py-1 rounded bg-gray-200";const Be=document.createElement("div");Be.className="p-3";const gt=document.createElement("video");return gt.style.width="100%",gt.style.borderRadius="12px",Be.appendChild(gt),At.appendChild(pt),Ve.appendChild(At),Ve.appendChild(Be),Le.appendChild(Ve),document.body.appendChild(Le),await new Promise(async V=>{const ae=()=>{Le.remove(),V(null)};pt.onclick=ae;const Se=await Qe.decodeFromVideoDevice($e,gt,_e=>{if(_e){const Ee=_e.getText();try{Se.stop()}catch{}Le.remove(),V(Ee)}})})}catch(Qe){return console.error(Qe),null}},We=async()=>{const ve=await ye();ve&&Q(ve)},qe=async()=>{const ve=await ye();if(!ve)return;const Qe=i.find(Z=>String(Z.code||"")===String(ve));Qe?(S(Qe),_(!0),s("")):(S(null),_(!0),s(""))},je=(ve,Qe)=>{const Z=ve.map(Ve=>({Id:Ve.id,Categoria:Ve.category,brand:Ve.brand,Producto:Ve.name,PrecioProveedor:Ve.providerPrice,Cantidad:Ve.quantity,Facturado:Ve.facturado,TotalEsperado:Ve.totalEsperado||Ve.salePrice*Ve.quantity,Margen:Ve.margin,PrecioVenta:Ve.salePrice,Ganancia:Ve.gain,Genero:Ve.gender,TipoProducto:Ve.typeProduct,Codigo:Ve.code||""})),$e=Es.json_to_sheet(Z),Le=Es.book_new();Es.book_append_sheet(Le,$e,"Productos"),hk(Le,Qe)},pe=()=>{const ve=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],Qe=Es.json_to_sheet(ve),Z=Es.book_new();Es.book_append_sheet(Z,Qe,"Productos");const $e=T4(Z,{type:"array",bookType:"xlsx"}),Le=new Blob([$e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ve=URL.createObjectURL(Le),At=document.createElement("a");At.href=Ve,At.download="template_products_stationery.xlsx",document.body.appendChild(At),At.click(),At.remove(),URL.revokeObjectURL(Ve)},He=ve=>{const Qe=[],Z=[];ve.forEach((Le,Ve)=>{if(!Le||typeof Le!="object"||Frt(Le))return;const At=Ve+2,pt=String(Ad(Le,["Id","ID","docId","DocId"])??"").trim(),Be=String(Ad(Le,["Categoria","Categora","Category","category"])??"").trim(),gt=String(Ad(Le,["Brand","Marca","brand","marca"])??"").trim(),V=String(Ad(Le,["Producto","Product","Nombre","Name","name"])??"").trim(),ae=Ad(Le,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),Se=Ad(Le,["Cantidad","Qty","quantity","cantidad"]),_e=Ad(Le,["Margen","Margin","margen","margin"]),Ee=Ad(Le,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),ze=String(Ad(Le,["Genero","Gnero","Gender","gender"])??"NA").trim(),ut=String(Ad(Le,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),st=Ad(Le,["Codigo","Cdigo","Code","Barcode","code"]),ee=LB(st),W=Math.max(0,kl(ae,0)),re=Math.max(1,G_(Se,1)),fe=ace(kl(_e,0)),Ne=Math.max(0,kl(Ee,0));Be||Z.push(`Fila ${At}: falta Categoria.`),V||Z.push(`Fila ${At}: falta Producto.`),W<=0&&Z.push(`Fila ${At}: PrecioProveedor debe ser > 0.`),re<=0&&Z.push(`Fila ${At}: Cantidad debe ser > 0.`),fe<=0&&Ne<=0&&Z.push(`Fila ${At}: Margen debe ser > 0 (o enviar PrecioVenta).`);const Xe=MB.includes(ze||"NA")?ze:"NA";Be&&V&&W>0&&re>0&&(fe>0||Ne>0)&&Qe.push({id:pt||void 0,category:Be,brand:gt,name:V,providerPrice:W,quantity:re,margin:fe>0?fe:.7,salePrice:Ne>0?Ne:void 0,gender:Xe,typeProduct:ut,code:ee||"",_raw:Le})});const $e=new Map;for(const Le of Qe){const Ve=Le.id?`id::${Le.id}`:`${Bi(Le.category)}::${Bi(Le.name)}`;$e.set(Ve,Le)}return{rows:Array.from($e.values()),errors:Z}},at=async ve=>{if(s(""),K([]),z([]),he((ve==null?void 0:ve.name)||""),!ve)return;const Qe=ve.name.toLowerCase(),Z=Qe.endsWith(".xlsx")||Qe.endsWith(".xls"),$e=Qe.endsWith(".csv");if(!Z&&!$e){K(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{xe(!0);const Le=new FileReader,Ve=await new Promise((Se,_e)=>{Le.onerror=()=>_e(new Error("No se pudo leer el archivo.")),Le.onload=()=>Se(Le.result),Le.readAsArrayBuffer(ve)}),At=f2(new Uint8Array(Ve),{type:"array"}),pt=At.SheetNames[0],Be=At.Sheets[pt],gt=Es.sheet_to_json(Be,{defval:""}),{rows:V,errors:ae}=He(gt);z(V),K(ae),V.length===0&&ae.length===0&&K(["No se encontraron filas vlidas para importar."])}catch(Le){console.error(Le),K(["Error leyendo el archivo. Revis que no est corrupto."])}finally{xe(!1)}},yt=(ve,Qe)=>{z(Z=>{const $e=[...Z],Le=$e[ve];return Le?($e[ve]={...Le,...Qe},$e):Z})},bt=v.useMemo(()=>{const ve=new Set(i.map(Le=>Le.id)),Qe=new Set(i.map(Le=>`${Bi(Le.category)}::${Bi(Le.name)}`));let Z=0,$e=0;for(const Le of ne){if(Le.id&&ve.has(Le.id)){Z+=1;continue}const Ve=`${Bi(Le.category)}::${Bi(Le.name)}`;Qe.has(Ve)?Z+=1:$e+=1}return{total:ne.length,willCreate:$e,willUpdate:Z}},[ne,i]),kt=async()=>{if(s(""),ce.length>0){s(" Correg los errores antes de importar.");return}if(ne.length===0){s(" No hay filas para importar.");return}try{xe(!0);const ve={},Qe={};i.forEach(Ve=>{ve[Ve.id]=Ve,Qe[`${Bi(Ve.category)}::${Bi(Ve.name)}`]=Ve});const Z=eg(ke);let $e=0,Le=0;for(const Ve of ne){const At=String(Ve.category||"").trim(),pt=String(Ve.name||"").trim(),{providerPrice:Be,quantity:gt,margin:V,salePrice:ae,facturado:Se,totalEsperado:_e,gain:Ee}=zg({providerPrice:Ve.providerPrice,quantity:Ve.quantity,margin:Ve.margin,salePrice:Ve.salePrice});if(!At||!pt||Be<=0||gt<=0||ae<=0||V<=0)continue;const ze={category:At,name:pt,providerPrice:Be,quantity:gt,facturado:Se,totalEsperado:_e,margin:V,salePrice:ae,gain:Ee,gender:Ve.gender||"NA",typeProduct:String(Ve.typeProduct||"").trim(),code:LB(Ve.code)||null,updatedAt:dr.now()};let ut;if(Ve.id&&ve[Ve.id])ut=ve[Ve.id];else{const st=`${Bi(At)}::${Bi(pt)}`;ut=Qe[st]}if(ut)Z.update($t(ke,"products_stationery",ut.id),ze),Le+=1;else{const st=$t(ht(ke,"products_stationery"));Z.set(st,{...ze,createdAt:dr.now()}),$e+=1}}await Z.commit(),s(` Importacin lista. Creados: ${$e}, Actualizados: ${Le}`),me(!1),z([]),K([]),he(""),e()}catch(ve){console.error(ve),s(" Error importando productos a Firestore.")}finally{xe(!1)}},Vt=()=>{f(""),A(""),p(""),x("")};return o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),o.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:qe,type:"button",children:"Escanear"}),o.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:lt,type:"button",children:"+ Nuevo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{me(!0),z([]),K([]),he("")},type:"button",children:"Importar (.xlsx)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>je(i,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>je(De,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),o.jsx(pc,{onClick:e,loading:r||oe})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[o.jsx(a_,{label:"Productos",value:Me.count}),o.jsx(a_,{label:"Facturado",value:il(Me.sumFact)}),o.jsx(a_,{label:"Esperado",value:il(Me.sumEsperado)}),o.jsx(a_,{label:"Ganancia",value:il(Me.sumGain)})]}),o.jsxs("div",{className:"mb-3",children:[o.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${nt?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(ve=>!ve),children:[c?"Cerrar filtros":"Abrir filtros"," ",nt?"(activos)":""]}),c&&o.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:ve=>f(ve.target.value),placeholder:"Ej: Cuaderno Norma"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:h,onChange:ve=>A(ve.target.value),placeholder:"Barcode"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:ve=>p(ve.target.value),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),o.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:g,onChange:ve=>x(ve.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Vt,children:"Limpiar"}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[o.jsxs("div",{children:["Mostrando: ",o.jsx("b",{children:De.length})]}),o.jsxs("div",{children:["Coleccin: ",o.jsx("b",{children:"products_stationery"})]})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:r?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):De.length===0?o.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):De.map(ve=>o.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:ve.category}),o.jsx("div",{className:"text-base font-bold leading-tight",children:ve.name}),o.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(ve.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",o.jsx("b",{children:il(ve.totalEsperado||ve.salePrice*ve.quantity)})]}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(ve.gain)})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",o.jsx("b",{children:ve.code||""})]}),o.jsx("div",{className:"mt-2 flex gap-2",children:o.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ft(ve),children:"Editar"})})]},ve.id))}),o.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:o.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),o.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"Venta"}),o.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),o.jsx("tbody",{children:r?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):De.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):De.map(ve=>o.jsxs("tr",{className:"align-top",children:[o.jsx("td",{className:"p-2 border",children:ve.category}),o.jsx("td",{className:"p-2 border",children:ve.name}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(ve.providerPrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve.quantity}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(ve.facturado)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(ve.totalEsperado||ve.salePrice*ve.quantity)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(ve.margin||0).toFixed(2)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(ve.salePrice)}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:il(ve.gain)}),o.jsx("td",{className:"p-2 border",children:ve.gender}),o.jsx("td",{className:"p-2 border",children:ve.typeProduct}),o.jsx("td",{className:"p-2 border",children:ve.code||""}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>ft(ve),children:"Editar"})})]},ve.id))})]})}),a&&o.jsx("p",{className:"mt-2 text-sm",children:a}),y&&o.jsxs(Fq,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Categora"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:O,onChange:ve=>P(ve.target.value),children:n_.map(ve=>o.jsx("option",{value:ve,children:ve},ve))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsx("input",{className:"w-full border rounded px-2 py-2",value:J,onChange:ve=>ge(ve.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(le)?"":le,onChange:ve=>de(Math.max(0,kl(ve.target.value,0)))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Cantidad"}),o.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:Ae,onChange:ve=>se(G_(ve.target.value,1))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:il(zg({providerPrice:le,quantity:Ae,margin:Ie,salePrice:k}).facturado)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Margen"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Ie)?"":Ie,onChange:ve=>Pe(Math.max(0,kl(ve.target.value,0)))}),o.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(zg({providerPrice:le,quantity:Ae,margin:Ie,salePrice:k}).salePrice)?"":zg({providerPrice:le,quantity:Ae,margin:Ie,salePrice:k}).salePrice,onChange:ve=>{H(Math.max(0,kl(ve.target.value,0)))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),o.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:il(zg({providerPrice:le,quantity:Ae,margin:Ie,salePrice:k}).gain)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Gnero"}),o.jsx("select",{className:"w-full border rounded px-2 py-2",value:R,onChange:ve=>M(ve.target.value),children:MB.map(ve=>o.jsx("option",{value:ve,children:ve},ve))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2",value:G,onChange:ve=>X(ve.target.value),children:[o.jsx("option",{value:"",children:""}),krt.map(ve=>o.jsx("option",{value:ve,children:ve},ve))]})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cdigo"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:D,onChange:ve=>Q(ve.target.value),placeholder:"Escane o peg el cdigo"}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:We,children:"Escanear"})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),o.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:Ge,disabled:r,children:"Guardar"})]})]}),I&&o.jsx(Fq,{onClose:()=>_(!1),title:"Resultado de escaneo",children:E?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"text-xs text-gray-600",children:E.category}),o.jsx("div",{className:"text-lg font-bold",children:E.name}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(E.salePrice)})]}),o.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),o.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:il(E.gain)})]})]}),o.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),o.jsx("div",{className:"font-semibold tabular-nums",children:il(E.providerPrice)})]}),o.jsxs("div",{className:"rounded-lg border p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.quantity})]}),o.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),o.jsx("div",{className:"font-semibold tabular-nums",children:E.code||""})]})]}),o.jsx("div",{className:"mt-4 flex justify-end",children:o.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),ft(E)},children:"Editar"})})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-semibold",children:"No encontrado"}),o.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",o.jsx("b",{children:"products_stationery"}),"."]})]})}),te&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:o.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>me(!1),children:"Cerrar"})]}),o.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),o.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:pe,type:"button",children:"Descargar template .xlsx"})]}),o.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[o.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ve=>{var Qe;return at(((Qe=ve.target.files)==null?void 0:Qe[0])||null)}}),L&&o.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",o.jsx("b",{children:L})]}),oe&&o.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),ce.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[o.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),o.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:ce.slice(0,60).map((ve,Qe)=>o.jsx("li",{children:ve},Qe))})]}),o.jsxs("div",{className:"bg-white border rounded p-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),o.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",bt.total," filas (Crear:"," ",bt.willCreate," / Actualizar:"," ",bt.willUpdate,")"]})]}),o.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:kt,disabled:oe||ne.length===0||ce.length>0,type:"button",children:"Importar a Firestore"})]}),o.jsxs("div",{className:"overflow-x-auto border rounded",children:[o.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),o.jsx("th",{className:"p-2 border text-left",children:"Categora"}),o.jsx("th",{className:"p-2 border text-left",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),o.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),o.jsx("th",{className:"p-2 border text-right",children:"Margen"}),o.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),o.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),o.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),o.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),o.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),o.jsx("tbody",{children:ne.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ne.slice(0,300).map((ve,Qe)=>{const Z=ve.id?i.some(Ve=>Ve.id===ve.id):!1,$e=i.some(Ve=>`${Bi(Ve.category)}::${Bi(Ve.name)}`==`${Bi(ve.category)}::${Bi(ve.name)}`),Le=Z||$e;return o.jsxs("tr",{className:"whitespace-nowrap",children:[o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ve.id||"",onChange:Ve=>yt(Qe,{id:Ve.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-44 border rounded px-2 py-1",value:ve.category,onChange:Ve=>yt(Qe,{category:Ve.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-72 border rounded px-2 py-1",value:ve.name,onChange:Ve=>yt(Qe,{name:Ve.target.value})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ve.providerPrice,onChange:Ve=>yt(Qe,{providerPrice:Math.max(0,kl(Ve.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:ve.quantity,onChange:Ve=>yt(Qe,{quantity:G_(Ve.target.value,1)})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:ve.margin,onChange:Ve=>yt(Qe,{margin:Math.max(0,kl(Ve.target.value,0))})})}),o.jsx("td",{className:"p-2 border text-right tabular-nums",children:o.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:ve.salePrice??"",onChange:Ve=>yt(Qe,{salePrice:Math.max(0,kl(Ve.target.value,0))||void 0}),placeholder:"Opcional"})}),o.jsx("td",{className:"p-2 border",children:o.jsx("select",{className:"w-28 border rounded px-2 py-1",value:ve.gender,onChange:Ve=>yt(Qe,{gender:Ve.target.value}),children:MB.map(Ve=>o.jsx("option",{value:Ve,children:Ve},Ve))})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ve.typeProduct,onChange:Ve=>yt(Qe,{typeProduct:Ve.target.value})})}),o.jsx("td",{className:"p-2 border",children:o.jsx("input",{className:"w-56 border rounded px-2 py-1",value:ve.code||"",onChange:Ve=>yt(Qe,{code:Ve.target.value})})}),o.jsx("td",{className:"p-2 border text-center",children:o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${Le?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:Le?"ACTUALIZA":"CREA"})})]},`${ve.id||""}-${Qe}`)})})]}),ne.length>300&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ne.length," filas (importa todas)."]})]})]})]})})]})}function a_({label:t,value:e}){return o.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:t}),o.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Fq({title:t,children:e,onClose:r}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-xl font-bold",children:t}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const xu=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Drt(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Er(t.createdAt.toDate(),"yyyy-MM-dd"):""}function Rrt(t,e){const r=Drt(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((s,i)=>s+(Number(i.qty??i.quantity??i.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,_raw:t}}async function Mrt(t){const e=er(ht(ke,"ar_movements"),ir("ref.saleId","==",t)),r=await Lt(e);await Promise.all(r.docs.map(n=>Cn($t(ke,"ar_movements",n.id))))}function Lrt({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=Jr(n,"vendedor_pollo"),s=Jr(n,"admin");if(!(Jr(n,"admin")||Jr(n,"vendedor_pollo")||Jr(n,"supervisor_pollo")||Jr(n,"contador")))return o.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const i=s?7:6,[l,c]=v.useState(!1),[u,d]=v.useState(!1),[f,h]=v.useState(null),[A,m]=v.useState([]),p=async K=>{c(!0),d(!0),h(K),m([]);try{const oe=await li($t(ke,"salesV2",K)),xe=oe.exists()?oe.data():null;if(!xe){m([]);return}let De=[];if(Array.isArray(xe.items)&&xe.items.length>0)De=xe.items;else if(xe.items&&typeof xe.items=="object")try{De=Object.values(xe.items)}catch{De=[]}else xe.item?De=[xe.item]:Array.isArray(xe.products)&&xe.products.length>0?De=xe.products:Array.isArray(xe.lines)&&xe.lines.length>0?De=xe.lines:Array.isArray(xe.detalles)&&xe.detalles.length>0?De=xe.detalles:(xe.productName||xe.product)&&(De=[{productName:xe.productName||xe.product||"",qty:xe.qty??xe.quantity??xe.lbs??0,unitPrice:xe.unitPrice??xe.price??0,discount:xe.discount??0,total:xe.total??xe.amount??0}]);const nt=ye=>{if(ye==null)return NaN;if(typeof ye=="number")return ye;let We=String(ye).trim();if(!We)return NaN;if(We=We.replace(/[^0-9.,-]/g,""),!We)return NaN;We.indexOf(".")>-1&&We.indexOf(",")>-1?We=We.replace(/,/g,""):We.indexOf(",")>-1&&We.indexOf(".")===-1&&(We=We.replace(/,/g,"."));const qe=Number(We);return isNaN(qe)?NaN:qe},Me=new Set;for(const ye of De)if(Array.isArray(ye==null?void 0:ye.allocations))for(const We of ye.allocations){const qe=String((We==null?void 0:We.batchId)||"").trim();qe&&Me.add(qe)}else if(ye!=null&&ye.allocations&&typeof ye.allocations=="object")try{for(const We of Object.values(ye.allocations)){const qe=String((We==null?void 0:We.batchId)||"").trim();qe&&Me.add(qe)}}catch{}if(Array.isArray(xe==null?void 0:xe.allocations))for(const ye of xe.allocations){const We=String((ye==null?void 0:ye.batchId)||"").trim();We&&Me.add(We)}const Je={};Me.size>0&&await Promise.all(Array.from(Me).map(async ye=>{try{const We=await li($t(ke,"inventory_batches",ye));if(We.exists()){const qe=We.data();Je[ye]=Number(qe.salePrice??qe.sale_price??qe.price??0)}}catch{}}));const lt=new Set;for(const ye of De){const We=String(ye.productId||ye.productId||"").trim();We&&lt.add(We)}const ft={};lt.size>0&&await Promise.all(Array.from(lt).map(async ye=>{try{const We=await li($t(ke,"products",ye));if(We.exists()){const qe=We.data();ft[ye]=Number(qe.salePrice??qe.price??0)}}catch{}}));const Ge=De.map(ye=>{const We=String(ye.productName||ye.product||ye.name||"(sin nombre)"),qe=Number(ye.qty??ye.quantity??ye.lbs??ye.weight??0)||0,je=nt(ye.total??ye.lineFinal??ye.amount??ye.monto??ye.line_total)||0;let pe=0;const He=[ye.unitPrice,ye.unitPricePackage,ye.salePrice,ye.sale_price,ye.price,ye.unit_price,ye.pricePerUnit,ye.price_per_unit];for(const bt of He){const kt=nt(bt);if(!isNaN(kt)&&kt!==0){pe=kt;break}}if(!pe){const bt=(xe==null?void 0:xe.salePrice)??(xe==null?void 0:xe.sale_price)??(xe==null?void 0:xe.unitPrice)??(xe==null?void 0:xe.unit_price)??(xe==null?void 0:xe.price)??(xe==null?void 0:xe.pricePerUnit),kt=nt(bt);!isNaN(kt)&&kt!==0&&(pe=kt)}if(!pe){const bt=Array.isArray(ye.allocations)?ye.allocations[0]:ye.allocations&&typeof ye.allocations=="object"?Object.values(ye.allocations)[0]:null,kt=bt?String(bt.batchId||"").trim():"";kt&&Je[kt]&&(pe=Je[kt]||0)}!pe&&ye.productId&&(pe=ft[String(ye.productId)]||0),(!pe||pe===0)&&je>0&&qe>0&&(pe=je/qe);const at=nt(ye.discount??ye.desc??0)||0;let yt=je;return(!yt||yt===0)&&(yt=Number(pe*qe||0)),yt=Number(yt)||0,{productName:We,qty:qe,unitPrice:pe,discount:at,total:yt}});m(Ge)}catch(oe){console.error(oe)}finally{d(!1)}},[g,x]=v.useState(Er(new Date,"yyyy-MM-01")),[y,b]=v.useState(Er(new Date,"yyyy-MM-dd")),[w,j]=v.useState([]),[I,_]=v.useState([]),[E,S]=v.useState([]),[O,P]=v.useState(!0),[T,F]=v.useState(""),[J,ge]=v.useState(""),[le,de]=v.useState(""),[Ae,se]=v.useState("ALL"),[Ie,Pe]=v.useState(null),k=15,[H,R]=v.useState(1),M=v.useMemo(()=>{const K={};return w.forEach(oe=>K[oe.id]=oe.name),K},[w]);v.useEffect(()=>{(async()=>{P(!0),F("");try{const K=[];if(a&&e){const nt=er(ht(ke,"customers_pollo"),ir("vendorId","==",e),on("createdAt","desc"));(await Lt(nt)).forEach(Je=>K.push({id:Je.id,name:Je.data().name||""}))}else(await Lt(er(ht(ke,"customers_pollo"),on("createdAt","desc")))).forEach(Me=>K.push({id:Me.id,name:Me.data().name||""}));j(K);const oe=await Lt(er(ht(ke,"salesV2"),on("createdAt","desc"))),xe=[];oe.forEach(nt=>{const Me=Rrt(nt.data(),nt.id);Me&&Me.date>=g&&Me.date<=y&&xe.push(Me)});const De=xe.sort((nt,Me)=>Me.date.localeCompare(nt.date));_(De),S(Array.from(new Set(De.map(nt=>{var Me,Je,lt,ft;return((Me=nt._raw)==null?void 0:Me.productName)||((ft=(lt=(Je=nt._raw)==null?void 0:Je.items)==null?void 0:lt[0])==null?void 0:ft.productName)||"(sin producto)"}))).sort()),R(1)}catch(K){console.error(K),F(" Error cargando transacciones.")}finally{P(!1)}})()},[g,y]);const G=v.useMemo(()=>I.filter(K=>{var oe,xe,De,nt;if(J&&K.customerId!==J||le&&K.type!==le)return!1;if(Ae&&Ae!=="ALL"){const Me=((oe=K._raw)==null?void 0:oe.productName)||((nt=(De=(xe=K._raw)==null?void 0:xe.items)==null?void 0:De[0])==null?void 0:nt.productName)||"";if(!Me||Me!==Ae)return!1}return!0}),[I,J,le,Ae]),X=v.useMemo(()=>{let K=0,oe=0,xe=0,De=0;for(const Je of G)Je.type==="CONTADO"?(K+=Je.quantity,xe+=Je.total):(oe+=Je.quantity,De+=Je.total);const nt=K+oe,Me=xe+De;return{packsCash:K,packsCredito:oe,packsTotal:nt,montoCash:xe,montoCredito:De,montoTotal:Me}},[G]),D=Math.max(1,Math.ceil(G.length/k)),Q=v.useMemo(()=>{const K=(H-1)*k;return G.slice(K,K+k)},[G,H]);v.useMemo(()=>f&&I.find(K=>K.id===f)||null,[f,I]);const te=async K=>{if(s&&(Pe(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{P(!0),await ate(K.id),await Mrt(K.id),_(oe=>oe.filter(xe=>xe.id!==K.id)),F(" Venta eliminada")}catch(oe){console.error(oe),F(" No se pudo eliminar la venta.")}finally{P(!1)}},me=()=>{const K=`Ventas del dia  ${g} a ${y}`,oe=Me=>(Me||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),xe=G.map(Me=>{var lt,ft,Ge,ye;const Je=Me.customerName||(Me.customerId?M[Me.customerId]:"")||"Nombre cliente";return(lt=Me._raw)!=null&&lt.productName||(ye=(Ge=(ft=Me._raw)==null?void 0:ft.items)==null?void 0:Ge[0])!=null&&ye.productName,`<tr>
          <td>${Me.date}</td>
          <td>${oe(Je)}</td>
          <td>${Me.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Me.quantity}</td>
          <td style="text-align:right">${xu(Me.total)}</td>
        </tr>`}).join(""),De=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${oe(K)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${oe(K)}</h1>
      <div class="kpis">
        <div><b>Libras Cash:</b> ${X.packsCash}</div>
        <div><b>Libras Crdito:</b> ${X.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${xu(X.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${xu(X.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${xe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,nt=window.open("","_blank");nt&&(nt.document.open(),nt.document.write(De),nt.document.close())},L=()=>R(1),he=()=>R(K=>Math.max(1,K-1)),ne=()=>R(K=>Math.min(D,K+1)),z=()=>R(D),ce=()=>{const K=[];if(D<=7)for(let xe=1;xe<=D;xe++)K.push(xe);else{const xe=Math.max(1,H-2),De=Math.min(D,H+2);K.push(1),xe>2&&K.push(-1);for(let nt=xe;nt<=De;nt++)nt!==1&&nt!==D&&K.push(nt);De<D-1&&K.push(-2),K.push(D)}return o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:L,disabled:H===1,children:" Primero"}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:he,disabled:H===1,children:" Anterior"}),K.map((xe,De)=>typeof xe=="number"?o.jsx("button",{className:`px-3 py-1 border rounded ${xe===H?"bg-blue-600 text-white":""}`,onClick:()=>R(xe),children:xe},De):o.jsx("span",{className:"px-2",children:""},De)),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ne,disabled:H===D,children:"Siguiente "}),o.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:z,disabled:H===D,children:"ltimo "})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",H," de ",D,"  ",G.length," transaccin(es)"]})]})};return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),o.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Desde"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:g,onChange:K=>{x(K.target.value),R(1)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Hasta"}),o.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:K=>{b(K.target.value),R(1)}})]}),o.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[o.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:J,onChange:K=>{ge(K.target.value),R(1)},children:[o.jsx("option",{value:"",children:"Todos"}),w.map(K=>o.jsx("option",{value:K.id,children:K.name},K.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Tipo"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:le,onChange:K=>{de(K.target.value),R(1)},children:[o.jsx("option",{value:"",children:"Todos"}),o.jsx("option",{value:"CONTADO",children:"Cash"}),o.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-semibold",children:"Producto"}),o.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Ae,onChange:K=>{se(K.target.value),R(1)},children:[o.jsx("option",{value:"ALL",children:"Todos"}),E.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:me,children:"Exportar PDF"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3 mb-4",children:[o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:X.packsCash})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:X.packsCredito})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Libras Total"}),o.jsx("div",{className:"text-xl font-semibold",children:X.packsTotal})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),o.jsx("div",{className:"text-xl font-semibold",children:xu(X.montoCash)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),o.jsx("div",{className:"text-xl font-semibold",children:xu(X.montoCredito)})]}),o.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),o.jsx("div",{className:"text-xl font-semibold",children:xu(X.montoTotal)})]})]}),o.jsxs("div",{className:"block md:hidden space-y-3",children:[O?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):Q.length===0?o.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):Q.map(K=>{var De,nt,Me,Je;const oe=K.customerName||(K.customerId?M[K.customerId]:"")||"Nombre cliente",xe=((De=K._raw)==null?void 0:De.productName)||((Je=(Me=(nt=K._raw)==null?void 0:nt.items)==null?void 0:Me[0])==null?void 0:Je.productName)||"(sin producto)";return o.jsx("div",{className:"bg-white border rounded-xl shadow",children:o.jsxs("details",{className:"group",children:[o.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"font-semibold truncate",children:oe}),o.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:K.date})]}),o.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-full border ${K.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:K.type==="CREDITO"?"Crdito":"Cash"}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Libras:"})," ",o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:lt=>{lt.preventDefault(),p(K.id)},title:"Ver detalle",children:K.quantity})]}),o.jsxs("span",{className:"text-gray-700",children:[o.jsx("b",{children:"Monto:"})," ",xu(K.total)]})]})]}),o.jsx("div",{className:"text-gray-500 mt-1",children:o.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),o.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:o.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Cliente"}),o.jsx("span",{className:"font-medium text-right",children:oe})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Producto"}),o.jsx("span",{className:"font-medium text-right",children:xe})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Fecha"}),o.jsx("span",{className:"font-medium",children:K.date})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Tipo"}),o.jsx("span",{className:"font-medium",children:K.type==="CREDITO"?"Crdito":"Cash"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Libras"}),o.jsx("span",{className:"font-medium",children:o.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(K.id),title:"Ver detalle",children:K.quantity})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-600",children:"Monto"}),o.jsx("span",{className:"font-semibold",children:xu(K.total)})]}),o.jsx("div",{className:"flex items-center justify-between",children:s&&o.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[o.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>Pe(lt=>lt===K.id?null:K.id),children:" Acciones"}),Ie===K.id&&o.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>te(K),children:"Eliminar"})]})})]})})]})},K.id)}),o.jsx("div",{className:"bg-white p-3 rounded shadow border",children:ce()})]}),o.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[o.jsxs("table",{className:"min-w-full w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Fecha"}),o.jsx("th",{className:"p-2 border",children:"Cliente"}),o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border",children:"Tipo"}),o.jsx("th",{className:"p-2 border",children:"Libras"}),o.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&o.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),o.jsx("tbody",{children:O?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Cargando"})}):Q.length===0?o.jsx("tr",{children:o.jsx("td",{className:"p-4 text-center",colSpan:i,children:"Sin transacciones en el rango."})}):Q.map(K=>{var De,nt,Me,Je;const oe=K.customerName||(K.customerId?M[K.customerId]:"")||"Nombre cliente",xe=((De=K._raw)==null?void 0:De.productName)||((Je=(Me=(nt=K._raw)==null?void 0:nt.items)==null?void 0:Me[0])==null?void 0:Je.productName)||"(sin producto)";return o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border",children:K.date}),o.jsx("td",{className:"p-2 border",children:oe}),o.jsx("td",{className:"p-2 border",children:xe}),o.jsx("td",{className:"p-2 border",children:K.type==="CREDITO"?"Crdito":"Cash"}),o.jsx("td",{className:"p-2 border",children:o.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(K.id),children:K.quantity})}),o.jsx("td",{className:"p-2 border",children:xu(K.total)}),s&&o.jsxs("td",{className:"p-2 border relative",children:[o.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>Pe(lt=>lt===K.id?null:K.id),title:"Acciones",children:""}),Ie===K.id&&o.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:o.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>te(K),children:"Eliminar"})})]})]},K.id)})})]}),ce()]}),T&&o.jsx("p",{className:"mt-2 text-sm",children:T}),l&&o.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{children:o.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),o.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),o.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2 border",children:"Producto"}),o.jsx("th",{className:"p-2 border text-right",children:"Libras"}),o.jsx("th",{className:"p-2 border text-right",children:"Precio"}),o.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),o.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),o.jsx("tbody",{children:u?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):A.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):A.map((K,oe)=>o.jsxs("tr",{className:"text-center",children:[o.jsx("td",{className:"p-2 border text-left",children:K.productName}),o.jsx("td",{className:"p-2 border text-right",children:K.qty}),o.jsx("td",{className:"p-2 border text-right",children:xu(K.unitPrice)}),o.jsx("td",{className:"p-2 border text-right",children:xu(K.discount||0)}),o.jsx("td",{className:"p-2 border text-right",children:xu(K.total)})]},oe))})]})})]})})]})}function Urt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function Qrt(){const[t,e]=v.useState(null),[r,n]=v.useState(""),[a,s]=v.useState([]),[i,l]=v.useState(""),[c,u]=v.useState(!0),d=Urt(),f=v.useMemo(()=>d?o.jsx(Xve,{role:r,roles:a}):o.jsx(Wve,{role:r,roles:a}),[d,r,a]),h=(t==null?void 0:t.email)||"";if(v.useEffect(()=>{const m=BO(Q0,async p=>{if(u(!0),p){e(p);try{const g=$t(ke,"users",p.uid),x=await li(g);if(x.exists()){const y=x.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return o.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const A=()=>{const m=a&&a.length?a:r;return Jr(m,"admin")?o.jsx(rA,{to:"financialDashboard",replace:!0}):Jr(m,"vendedor_pollo")?o.jsx(rA,{to:"salesV2",replace:!0}):Jr(m,"supervisor_pollo")?o.jsx(rA,{to:"batches",replace:!0}):Jr(m,"contador")?o.jsx(rA,{to:"batches",replace:!0}):Jr(m,"vendedor_ropa")?o.jsx(rA,{to:"salesClothes",replace:!0}):Jr(m,"vendedor_dulces")?o.jsx(rA,{to:"salesCandies",replace:!0}):o.jsx(rA,{to:"/",replace:!0})};return o.jsx(PAe,{children:o.jsxs(lAe,{children:[o.jsx(mn,{path:"/",element:o.jsx(zve,{})}),o.jsxs(mn,{path:"/admin",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[o.jsx(mn,{index:!0,element:o.jsx(A,{})}),o.jsx(mn,{path:"bills",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(PSe,{})})}),o.jsx(mn,{path:"salesV2",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(QQ,{user:t})})}),o.jsx(mn,{path:"financialDashboard",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(GSe,{})})}),o.jsx(mn,{path:"expenses",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(qSe,{})})}),o.jsx(mn,{path:"transactionsPollo",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(Lrt,{role:r,roles:a})})}),o.jsx(mn,{path:"batches",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(HSe,{role:r,roles:a})})}),o.jsx(mn,{path:"paidBatches",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(eIe,{})})}),o.jsx(mn,{path:"fix",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(XSe,{})})}),o.jsx(mn,{path:"transactionclose",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx($Se,{})})}),o.jsx(mn,{path:"billhistoric",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(TSe,{})})}),o.jsx(mn,{path:"users",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(kSe,{})})}),o.jsx(mn,{path:"products",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(FSe,{})})}),o.jsx(mn,{path:"customersPollo",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:o.jsx(PIe,{role:r,roles:a,currentUserEmail:h,sellerPolloId:i})})}),o.jsx(mn,{path:"datacenter",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(_Ue,{})})}),o.jsx(mn,{path:"productsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(SLe,{})})}),o.jsx(mn,{path:"mainordersCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(cUe,{})})}),o.jsx(mn,{path:"productsPricesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(Trt,{})})}),o.jsx(mn,{path:"inventoryMainOrderCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(uUe,{})})}),o.jsx(mn,{path:"inventoryCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(OLe,{})})}),o.jsx(mn,{path:"billingsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(vUe,{})})}),o.jsx(mn,{path:"cashDeliveries",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(Irt,{})})}),o.jsx(mn,{path:"customersCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(DLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"salesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(VLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"expensesCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(HLe,{})})}),o.jsx(mn,{path:"dashboardCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(JLe,{})})}),o.jsx(mn,{path:"transactionCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(qLe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"vendorsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(ZLe,{})})}),o.jsx(mn,{path:"productsVendorsCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(sUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"cierreVentasCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(fUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"reporteCierresCandies",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(bUe,{role:r,roles:a,currentUserEmail:h,sellerCandyId:i})})}),o.jsx(mn,{path:"consolidatedVendors",element:o.jsx(wn,{allowedRoles:["admin","vendedor_dulces"],children:o.jsx(gUe,{})})}),o.jsx(mn,{path:"salesClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(yIe,{})})}),o.jsx(mn,{path:"notebooksInventory",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(Ort,{})})}),o.jsx(mn,{path:"TransactionsReportClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(BIe,{})})}),o.jsx(mn,{path:"financialDashboardClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(NIe,{})})}),o.jsx(mn,{path:"ExpensesClothes",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(CIe,{})})}),o.jsx(mn,{path:"inventoryClothesBatches",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(aIe,{})})}),o.jsx(mn,{path:"productsClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(mIe,{})})}),o.jsx(mn,{path:"CustomersClothes",element:o.jsx(wn,{allowedRoles:["admin","vendedor_ropa"],children:o.jsx(gIe,{})})})]}),o.jsx(mn,{path:"/salesV2",element:o.jsx(wn,{allowedRoles:["admin","vendedor_pollo","contador"],children:o.jsx(QQ,{user:t})})}),o.jsx(mn,{path:"*",element:o.jsx(rA,{to:"/"})})]})})}UB.createRoot(document.getElementById("root")).render(o.jsx(Lo.StrictMode,{children:o.jsx(Qrt,{})}));export{ba as _,Hrt as c,qA as g};
