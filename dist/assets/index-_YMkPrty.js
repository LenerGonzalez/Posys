var jde=Object.defineProperty;var Pde=(t,e,r)=>e in t?jde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Cr=(t,e,r)=>Pde(t,typeof e!="symbol"?e+"":e,r);function Bde(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var fit=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gz={exports:{}},HI={},Kz={exports:{}},ta={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=Symbol.for("react.element"),Tde=Symbol.for("react.portal"),kde=Symbol.for("react.fragment"),Fde=Symbol.for("react.strict_mode"),Ode=Symbol.for("react.profiler"),Dde=Symbol.for("react.provider"),Rde=Symbol.for("react.context"),Mde=Symbol.for("react.forward_ref"),Lde=Symbol.for("react.suspense"),Ude=Symbol.for("react.memo"),Qde=Symbol.for("react.lazy"),fL=Symbol.iterator;function Vde(t){return t===null||typeof t!="object"?null:(t=fL&&t[fL]||t["@@iterator"],typeof t=="function"?t:null)}var qz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zz=Object.assign,Wz={};function Wv(t,e,r){this.props=t,this.context=e,this.refs=Wz,this.updater=r||qz}Wv.prototype.isReactComponent={};Wv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xz(){}Xz.prototype=Wv.prototype;function cO(t,e,r){this.props=t,this.context=e,this.refs=Wz,this.updater=r||qz}var uO=cO.prototype=new Xz;uO.constructor=cO;zz(uO,Wv.prototype);uO.isPureReactComponent=!0;var hL=Array.isArray,Yz=Object.prototype.hasOwnProperty,dO={current:null},Jz={key:!0,ref:!0,__self:!0,__source:!0};function Zz(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Yz.call(e,n)&&!Jz.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:aw,type:t,key:s,ref:o,props:a,_owner:dO.current}}function Hde(t,e){return{$$typeof:aw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fO(t){return typeof t=="object"&&t!==null&&t.$$typeof===aw}function $de(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var AL=/\/+/g;function F4(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$de(""+t.key):e.toString(36)}function j_(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case aw:case Tde:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+F4(o,0):n,hL(a)?(r="",t!=null&&(r=t.replace(AL,"$&/")+"/"),j_(a,e,r,"",function(u){return u})):a!=null&&(fO(a)&&(a=Hde(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(AL,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",hL(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+F4(s,l);o+=j_(s,e,r,c,a)}else if(c=Vde(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+F4(s,l++),o+=j_(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jN(t,e,r){if(t==null)return t;var n=[],a=0;return j_(t,n,"","",function(s){return e.call(r,s,a++)}),n}function Gde(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nc={current:null},P_={transition:null},Kde={ReactCurrentDispatcher:Nc,ReactCurrentBatchConfig:P_,ReactCurrentOwner:dO};function eW(){throw Error("act(...) is not supported in production builds of React.")}ta.Children={map:jN,forEach:function(t,e,r){jN(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return jN(t,function(){e++}),e},toArray:function(t){return jN(t,function(e){return e})||[]},only:function(t){if(!fO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ta.Component=Wv;ta.Fragment=kde;ta.Profiler=Ode;ta.PureComponent=cO;ta.StrictMode=Fde;ta.Suspense=Lde;ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kde;ta.act=eW;ta.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=zz({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dO.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Yz.call(e,c)&&!Jz.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:aw,type:t.type,key:a,ref:s,props:n,_owner:o}};ta.createContext=function(t){return t={$$typeof:Rde,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dde,_context:t},t.Consumer=t};ta.createElement=Zz;ta.createFactory=function(t){var e=Zz.bind(null,t);return e.type=t,e};ta.createRef=function(){return{current:null}};ta.forwardRef=function(t){return{$$typeof:Mde,render:t}};ta.isValidElement=fO;ta.lazy=function(t){return{$$typeof:Qde,_payload:{_status:-1,_result:t},_init:Gde}};ta.memo=function(t,e){return{$$typeof:Ude,type:t,compare:e===void 0?null:e}};ta.startTransition=function(t){var e=P_.transition;P_.transition={};try{t()}finally{P_.transition=e}};ta.unstable_act=eW;ta.useCallback=function(t,e){return Nc.current.useCallback(t,e)};ta.useContext=function(t){return Nc.current.useContext(t)};ta.useDebugValue=function(){};ta.useDeferredValue=function(t){return Nc.current.useDeferredValue(t)};ta.useEffect=function(t,e){return Nc.current.useEffect(t,e)};ta.useId=function(){return Nc.current.useId()};ta.useImperativeHandle=function(t,e,r){return Nc.current.useImperativeHandle(t,e,r)};ta.useInsertionEffect=function(t,e){return Nc.current.useInsertionEffect(t,e)};ta.useLayoutEffect=function(t,e){return Nc.current.useLayoutEffect(t,e)};ta.useMemo=function(t,e){return Nc.current.useMemo(t,e)};ta.useReducer=function(t,e,r){return Nc.current.useReducer(t,e,r)};ta.useRef=function(t){return Nc.current.useRef(t)};ta.useState=function(t){return Nc.current.useState(t)};ta.useSyncExternalStore=function(t,e,r){return Nc.current.useSyncExternalStore(t,e,r)};ta.useTransition=function(){return Nc.current.useTransition()};ta.version="18.3.1";Kz.exports=ta;var g=Kz.exports;const $o=CA(g),qde=Bde({__proto__:null,default:$o},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zde=g,Wde=Symbol.for("react.element"),Xde=Symbol.for("react.fragment"),Yde=Object.prototype.hasOwnProperty,Jde=zde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zde={key:!0,ref:!0,__self:!0,__source:!0};function tW(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Yde.call(e,n)&&!Zde.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:Wde,type:t,key:s,ref:o,props:a,_owner:Jde.current}}HI.Fragment=Xde;HI.jsx=tW;HI.jsxs=tW;Gz.exports=HI;var i=Gz.exports,EB={},rW={exports:{}},Ou={},nW={exports:{}},aW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(me,ne){var Pe=me.length;me.push(ne);e:for(;0<Pe;){var Te=Pe-1>>>1,O=me[Te];if(0<a(O,ne))me[Te]=ne,me[Pe]=O,Pe=Te;else break e}}function r(me){return me.length===0?null:me[0]}function n(me){if(me.length===0)return null;var ne=me[0],Pe=me.pop();if(Pe!==ne){me[0]=Pe;e:for(var Te=0,O=me.length,K=O>>>1;Te<K;){var q=2*(Te+1)-1,U=me[q],W=q+1,J=me[W];if(0>a(U,Pe))W<O&&0>a(J,U)?(me[Te]=J,me[W]=Pe,Te=W):(me[Te]=U,me[q]=Pe,Te=q);else if(W<O&&0>a(J,Pe))me[Te]=J,me[W]=Pe,Te=W;else break e}}return ne}function a(me,ne){var Pe=me.sortIndex-ne.sortIndex;return Pe!==0?Pe:me.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,A=3,h=!1,m=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(me){for(var ne=r(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=me)n(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=r(u)}}function w(me){if(p=!1,b(me),!m)if(r(c)!==null)m=!0,Ae(j);else{var ne=r(u);ne!==null&&fe(w,ne.startTime-me)}}function j(me,ne){m=!1,p&&(p=!1,v(S),S=-1),h=!0;var Pe=A;try{for(b(ne),f=r(c);f!==null&&(!(f.expirationTime>ne)||me&&!k());){var Te=f.callback;if(typeof Te=="function"){f.callback=null,A=f.priorityLevel;var O=Te(f.expirationTime<=ne);ne=t.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&n(c),b(ne)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var q=r(u);q!==null&&fe(w,q.startTime-ne),K=!1}return K}finally{f=null,A=Pe,h=!1}}var I=!1,_=null,S=-1,E=5,F=-1;function k(){return!(t.unstable_now()-F<E)}function B(){if(_!==null){var me=t.unstable_now();F=me;var ne=!0;try{ne=_(!0,me)}finally{ne?D():(I=!1,_=null)}}else I=!1}var D;if(typeof y=="function")D=function(){y(B)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,he=X.port2;X.port1.onmessage=B,D=function(){he.postMessage(null)}}else D=function(){x(B,0)};function Ae(me){_=me,I||(I=!0,D())}function fe(me,ne){S=x(function(){me(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(me){me.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,Ae(j))},t.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<me?Math.floor(1e3/me):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(me){switch(A){case 1:case 2:case 3:var ne=3;break;default:ne=A}var Pe=A;A=ne;try{return me()}finally{A=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(me,ne){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Pe=A;A=me;try{return ne()}finally{A=Pe}},t.unstable_scheduleCallback=function(me,ne,Pe){var Te=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Te+Pe:Te):Pe=Te,me){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Pe+O,me={id:d++,callback:ne,priorityLevel:me,startTime:Pe,expirationTime:O,sortIndex:-1},Pe>Te?(me.sortIndex=Pe,e(u,me),r(c)===null&&me===r(u)&&(p?(v(S),S=-1):p=!0,fe(w,Pe-Te))):(me.sortIndex=O,e(c,me),m||h||(m=!0,Ae(j))),me},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(me){var ne=A;return function(){var Pe=A;A=ne;try{return me.apply(this,arguments)}finally{A=Pe}}}})(aW);nW.exports=aW;var efe=nW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tfe=g,Pu=efe;function Ir(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sW=new Set,Mb={};function wg(t,e){gv(t,e),gv(t+"Capture",e)}function gv(t,e){for(Mb[t]=e,t=0;t<e.length;t++)sW.add(e[t])}var iA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SB=Object.prototype.hasOwnProperty,rfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mL={},pL={};function nfe(t){return SB.call(pL,t)?!0:SB.call(mL,t)?!1:rfe.test(t)?pL[t]=!0:(mL[t]=!0,!1)}function afe(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sfe(t,e,r,n){if(e===null||typeof e>"u"||afe(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cc(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var _l={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){_l[t]=new Cc(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];_l[e]=new Cc(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){_l[t]=new Cc(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){_l[t]=new Cc(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){_l[t]=new Cc(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){_l[t]=new Cc(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){_l[t]=new Cc(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){_l[t]=new Cc(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){_l[t]=new Cc(t,5,!1,t.toLowerCase(),null,!1,!1)});var hO=/[\-:]([a-z])/g;function AO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hO,AO);_l[e]=new Cc(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hO,AO);_l[e]=new Cc(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hO,AO);_l[e]=new Cc(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){_l[t]=new Cc(t,1,!1,t.toLowerCase(),null,!1,!1)});_l.xlinkHref=new Cc("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){_l[t]=new Cc(t,1,!1,t.toLowerCase(),null,!0,!0)});function mO(t,e,r,n){var a=_l.hasOwnProperty(e)?_l[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sfe(e,r,a,n)&&(r=null),n||a===null?nfe(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var _A=tfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,PN=Symbol.for("react.element"),Bx=Symbol.for("react.portal"),Tx=Symbol.for("react.fragment"),pO=Symbol.for("react.strict_mode"),IB=Symbol.for("react.profiler"),iW=Symbol.for("react.provider"),oW=Symbol.for("react.context"),gO=Symbol.for("react.forward_ref"),jB=Symbol.for("react.suspense"),PB=Symbol.for("react.suspense_list"),xO=Symbol.for("react.memo"),y0=Symbol.for("react.lazy"),lW=Symbol.for("react.offscreen"),gL=Symbol.iterator;function H1(t){return t===null||typeof t!="object"?null:(t=gL&&t[gL]||t["@@iterator"],typeof t=="function"?t:null)}var ii=Object.assign,O4;function Sy(t){if(O4===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);O4=e&&e[1]||""}return`
`+O4+t}var D4=!1;function R4(t,e){if(!t||D4)return"";D4=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{D4=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Sy(t):""}function ife(t){switch(t.tag){case 5:return Sy(t.type);case 16:return Sy("Lazy");case 13:return Sy("Suspense");case 19:return Sy("SuspenseList");case 0:case 2:case 15:return t=R4(t.type,!1),t;case 11:return t=R4(t.type.render,!1),t;case 1:return t=R4(t.type,!0),t;default:return""}}function BB(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tx:return"Fragment";case Bx:return"Portal";case IB:return"Profiler";case pO:return"StrictMode";case jB:return"Suspense";case PB:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case oW:return(t.displayName||"Context")+".Consumer";case iW:return(t._context.displayName||"Context")+".Provider";case gO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xO:return e=t.displayName||null,e!==null?e:BB(t.type)||"Memo";case y0:e=t._payload,t=t._init;try{return BB(t(e))}catch{}}return null}function ofe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return BB(e);case 8:return e===pO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cW(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lfe(t){var e=cW(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function BN(t){t._valueTracker||(t._valueTracker=lfe(t))}function uW(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=cW(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function xE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function TB(t,e){var r=e.checked;return ii({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xL(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=dm(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dW(t,e){e=e.checked,e!=null&&mO(t,"checked",e,!1)}function kB(t,e){dW(t,e);var r=dm(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?FB(t,e.type,r):e.hasOwnProperty("defaultValue")&&FB(t,e.type,dm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vL(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function FB(t,e,r){(e!=="number"||xE(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Iy=Array.isArray;function Zx(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+dm(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function OB(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ir(91));return ii({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yL(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ir(92));if(Iy(r)){if(1<r.length)throw Error(Ir(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:dm(r)}}function fW(t,e){var r=dm(e.value),n=dm(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function bL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hW(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DB(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hW(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var TN,AW=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(TN=TN||document.createElement("div"),TN.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=TN.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lb(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Zy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cfe=["Webkit","ms","Moz","O"];Object.keys(Zy).forEach(function(t){cfe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zy[e]=Zy[t]})});function mW(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Zy.hasOwnProperty(t)&&Zy[t]?(""+e).trim():e+"px"}function pW(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=mW(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var ufe=ii({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RB(t,e){if(e){if(ufe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ir(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ir(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ir(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ir(62))}}function MB(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LB=null;function vO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var UB=null,ev=null,tv=null;function wL(t){if(t=ow(t)){if(typeof UB!="function")throw Error(Ir(280));var e=t.stateNode;e&&(e=zI(e),UB(t.stateNode,t.type,e))}}function gW(t){ev?tv?tv.push(t):tv=[t]:ev=t}function xW(){if(ev){var t=ev,e=tv;if(tv=ev=null,wL(t),e)for(t=0;t<e.length;t++)wL(e[t])}}function vW(t,e){return t(e)}function yW(){}var M4=!1;function bW(t,e,r){if(M4)return t(e,r);M4=!0;try{return vW(t,e,r)}finally{M4=!1,(ev!==null||tv!==null)&&(yW(),xW())}}function Ub(t,e){var r=t.stateNode;if(r===null)return null;var n=zI(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ir(231,e,typeof r));return r}var QB=!1;if(iA)try{var $1={};Object.defineProperty($1,"passive",{get:function(){QB=!0}}),window.addEventListener("test",$1,$1),window.removeEventListener("test",$1,$1)}catch{QB=!1}function dfe(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var eb=!1,vE=null,yE=!1,VB=null,ffe={onError:function(t){eb=!0,vE=t}};function hfe(t,e,r,n,a,s,o,l,c){eb=!1,vE=null,dfe.apply(ffe,arguments)}function Afe(t,e,r,n,a,s,o,l,c){if(hfe.apply(this,arguments),eb){if(eb){var u=vE;eb=!1,vE=null}else throw Error(Ir(198));yE||(yE=!0,VB=u)}}function Ng(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function wW(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NL(t){if(Ng(t)!==t)throw Error(Ir(188))}function mfe(t){var e=t.alternate;if(!e){if(e=Ng(t),e===null)throw Error(Ir(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return NL(a),t;if(s===n)return NL(a),e;s=s.sibling}throw Error(Ir(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Ir(189))}}if(r.alternate!==n)throw Error(Ir(190))}if(r.tag!==3)throw Error(Ir(188));return r.stateNode.current===r?t:e}function NW(t){return t=mfe(t),t!==null?CW(t):null}function CW(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CW(t);if(e!==null)return e;t=t.sibling}return null}var _W=Pu.unstable_scheduleCallback,CL=Pu.unstable_cancelCallback,pfe=Pu.unstable_shouldYield,gfe=Pu.unstable_requestPaint,Fi=Pu.unstable_now,xfe=Pu.unstable_getCurrentPriorityLevel,yO=Pu.unstable_ImmediatePriority,EW=Pu.unstable_UserBlockingPriority,bE=Pu.unstable_NormalPriority,vfe=Pu.unstable_LowPriority,SW=Pu.unstable_IdlePriority,$I=null,Yf=null;function yfe(t){if(Yf&&typeof Yf.onCommitFiberRoot=="function")try{Yf.onCommitFiberRoot($I,t,void 0,(t.current.flags&128)===128)}catch{}}var sf=Math.clz32?Math.clz32:Nfe,bfe=Math.log,wfe=Math.LN2;function Nfe(t){return t>>>=0,t===0?32:31-(bfe(t)/wfe|0)|0}var kN=64,FN=4194304;function jy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wE(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=jy(l):(s&=o,s!==0&&(n=jy(s)))}else o=r&~a,o!==0?n=jy(o):s!==0&&(n=jy(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-sf(e),a=1<<r,n|=t[r],e&=~a;return n}function Cfe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _fe(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sf(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Cfe(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function HB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IW(){var t=kN;return kN<<=1,!(kN&4194240)&&(kN=64),t}function L4(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sw(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sf(e),t[e]=r}function Efe(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-sf(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function bO(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-sf(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Wa=0;function jW(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PW,wO,BW,TW,kW,$B=!1,ON=[],q0=null,z0=null,W0=null,Qb=new Map,Vb=new Map,E0=[],Sfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _L(t,e){switch(t){case"focusin":case"focusout":q0=null;break;case"dragenter":case"dragleave":z0=null;break;case"mouseover":case"mouseout":W0=null;break;case"pointerover":case"pointerout":Qb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vb.delete(e.pointerId)}}function G1(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=ow(e),e!==null&&wO(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Ife(t,e,r,n,a){switch(e){case"focusin":return q0=G1(q0,t,e,r,n,a),!0;case"dragenter":return z0=G1(z0,t,e,r,n,a),!0;case"mouseover":return W0=G1(W0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Qb.set(s,G1(Qb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Vb.set(s,G1(Vb.get(s)||null,t,e,r,n,a)),!0}return!1}function FW(t){var e=mp(t.target);if(e!==null){var r=Ng(e);if(r!==null){if(e=r.tag,e===13){if(e=wW(r),e!==null){t.blockedOn=e,kW(t.priority,function(){BW(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function B_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=GB(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);LB=n,r.target.dispatchEvent(n),LB=null}else return e=ow(r),e!==null&&wO(e),t.blockedOn=r,!1;e.shift()}return!0}function EL(t,e,r){B_(t)&&r.delete(e)}function jfe(){$B=!1,q0!==null&&B_(q0)&&(q0=null),z0!==null&&B_(z0)&&(z0=null),W0!==null&&B_(W0)&&(W0=null),Qb.forEach(EL),Vb.forEach(EL)}function K1(t,e){t.blockedOn===e&&(t.blockedOn=null,$B||($B=!0,Pu.unstable_scheduleCallback(Pu.unstable_NormalPriority,jfe)))}function Hb(t){function e(a){return K1(a,t)}if(0<ON.length){K1(ON[0],t);for(var r=1;r<ON.length;r++){var n=ON[r];n.blockedOn===t&&(n.blockedOn=null)}}for(q0!==null&&K1(q0,t),z0!==null&&K1(z0,t),W0!==null&&K1(W0,t),Qb.forEach(e),Vb.forEach(e),r=0;r<E0.length;r++)n=E0[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<E0.length&&(r=E0[0],r.blockedOn===null);)FW(r),r.blockedOn===null&&E0.shift()}var rv=_A.ReactCurrentBatchConfig,NE=!0;function Pfe(t,e,r,n){var a=Wa,s=rv.transition;rv.transition=null;try{Wa=1,NO(t,e,r,n)}finally{Wa=a,rv.transition=s}}function Bfe(t,e,r,n){var a=Wa,s=rv.transition;rv.transition=null;try{Wa=4,NO(t,e,r,n)}finally{Wa=a,rv.transition=s}}function NO(t,e,r,n){if(NE){var a=GB(t,e,r,n);if(a===null)W4(t,e,n,CE,r),_L(t,n);else if(Ife(a,t,e,r,n))n.stopPropagation();else if(_L(t,n),e&4&&-1<Sfe.indexOf(t)){for(;a!==null;){var s=ow(a);if(s!==null&&PW(s),s=GB(t,e,r,n),s===null&&W4(t,e,n,CE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else W4(t,e,n,null,r)}}var CE=null;function GB(t,e,r,n){if(CE=null,t=vO(n),t=mp(t),t!==null)if(e=Ng(t),e===null)t=null;else if(r=e.tag,r===13){if(t=wW(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return CE=t,null}function OW(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xfe()){case yO:return 1;case EW:return 4;case bE:case vfe:return 16;case SW:return 536870912;default:return 16}default:return 16}}var R0=null,CO=null,T_=null;function DW(){if(T_)return T_;var t,e=CO,r=e.length,n,a="value"in R0?R0.value:R0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return T_=a.slice(t,1<n?1-n:void 0)}function k_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function DN(){return!0}function SL(){return!1}function Du(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?DN:SL,this.isPropagationStopped=SL,this}return ii(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=DN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=DN)},persist:function(){},isPersistent:DN}),e}var Xv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_O=Du(Xv),iw=ii({},Xv,{view:0,detail:0}),Tfe=Du(iw),U4,Q4,q1,GI=ii({},iw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:EO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==q1&&(q1&&t.type==="mousemove"?(U4=t.screenX-q1.screenX,Q4=t.screenY-q1.screenY):Q4=U4=0,q1=t),U4)},movementY:function(t){return"movementY"in t?t.movementY:Q4}}),IL=Du(GI),kfe=ii({},GI,{dataTransfer:0}),Ffe=Du(kfe),Ofe=ii({},iw,{relatedTarget:0}),V4=Du(Ofe),Dfe=ii({},Xv,{animationName:0,elapsedTime:0,pseudoElement:0}),Rfe=Du(Dfe),Mfe=ii({},Xv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lfe=Du(Mfe),Ufe=ii({},Xv,{data:0}),jL=Du(Ufe),Qfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $fe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hfe[t])?!!e[t]:!1}function EO(){return $fe}var Gfe=ii({},iw,{key:function(t){if(t.key){var e=Qfe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=k_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:EO,charCode:function(t){return t.type==="keypress"?k_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?k_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kfe=Du(Gfe),qfe=ii({},GI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),PL=Du(qfe),zfe=ii({},iw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:EO}),Wfe=Du(zfe),Xfe=ii({},Xv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yfe=Du(Xfe),Jfe=ii({},GI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zfe=Du(Jfe),ehe=[9,13,27,32],SO=iA&&"CompositionEvent"in window,tb=null;iA&&"documentMode"in document&&(tb=document.documentMode);var the=iA&&"TextEvent"in window&&!tb,RW=iA&&(!SO||tb&&8<tb&&11>=tb),BL=" ",TL=!1;function MW(t,e){switch(t){case"keyup":return ehe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LW(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kx=!1;function rhe(t,e){switch(t){case"compositionend":return LW(e);case"keypress":return e.which!==32?null:(TL=!0,BL);case"textInput":return t=e.data,t===BL&&TL?null:t;default:return null}}function nhe(t,e){if(kx)return t==="compositionend"||!SO&&MW(t,e)?(t=DW(),T_=CO=R0=null,kx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RW&&e.locale!=="ko"?null:e.data;default:return null}}var ahe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ahe[t.type]:e==="textarea"}function UW(t,e,r,n){gW(n),e=_E(e,"onChange"),0<e.length&&(r=new _O("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var rb=null,$b=null;function she(t){YW(t,0)}function KI(t){var e=Dx(t);if(uW(e))return t}function ihe(t,e){if(t==="change")return e}var QW=!1;if(iA){var H4;if(iA){var $4="oninput"in document;if(!$4){var FL=document.createElement("div");FL.setAttribute("oninput","return;"),$4=typeof FL.oninput=="function"}H4=$4}else H4=!1;QW=H4&&(!document.documentMode||9<document.documentMode)}function OL(){rb&&(rb.detachEvent("onpropertychange",VW),$b=rb=null)}function VW(t){if(t.propertyName==="value"&&KI($b)){var e=[];UW(e,$b,t,vO(t)),bW(she,e)}}function ohe(t,e,r){t==="focusin"?(OL(),rb=e,$b=r,rb.attachEvent("onpropertychange",VW)):t==="focusout"&&OL()}function lhe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return KI($b)}function che(t,e){if(t==="click")return KI(e)}function uhe(t,e){if(t==="input"||t==="change")return KI(e)}function dhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Af=typeof Object.is=="function"?Object.is:dhe;function Gb(t,e){if(Af(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!SB.call(e,a)||!Af(t[a],e[a]))return!1}return!0}function DL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RL(t,e){var r=DL(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DL(r)}}function HW(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HW(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $W(){for(var t=window,e=xE();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xE(t.document)}return e}function IO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fhe(t){var e=$W(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&HW(r.ownerDocument.documentElement,r)){if(n!==null&&IO(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=RL(r,s);var o=RL(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hhe=iA&&"documentMode"in document&&11>=document.documentMode,Fx=null,KB=null,nb=null,qB=!1;function ML(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qB||Fx==null||Fx!==xE(n)||(n=Fx,"selectionStart"in n&&IO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nb&&Gb(nb,n)||(nb=n,n=_E(KB,"onSelect"),0<n.length&&(e=new _O("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Fx)))}function RN(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ox={animationend:RN("Animation","AnimationEnd"),animationiteration:RN("Animation","AnimationIteration"),animationstart:RN("Animation","AnimationStart"),transitionend:RN("Transition","TransitionEnd")},G4={},GW={};iA&&(GW=document.createElement("div").style,"AnimationEvent"in window||(delete Ox.animationend.animation,delete Ox.animationiteration.animation,delete Ox.animationstart.animation),"TransitionEvent"in window||delete Ox.transitionend.transition);function qI(t){if(G4[t])return G4[t];if(!Ox[t])return t;var e=Ox[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in GW)return G4[t]=e[r];return t}var KW=qI("animationend"),qW=qI("animationiteration"),zW=qI("animationstart"),WW=qI("transitionend"),XW=new Map,LL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jm(t,e){XW.set(t,e),wg(e,[t])}for(var K4=0;K4<LL.length;K4++){var q4=LL[K4],Ahe=q4.toLowerCase(),mhe=q4[0].toUpperCase()+q4.slice(1);jm(Ahe,"on"+mhe)}jm(KW,"onAnimationEnd");jm(qW,"onAnimationIteration");jm(zW,"onAnimationStart");jm("dblclick","onDoubleClick");jm("focusin","onFocus");jm("focusout","onBlur");jm(WW,"onTransitionEnd");gv("onMouseEnter",["mouseout","mouseover"]);gv("onMouseLeave",["mouseout","mouseover"]);gv("onPointerEnter",["pointerout","pointerover"]);gv("onPointerLeave",["pointerout","pointerover"]);wg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wg("onBeforeInput",["compositionend","keypress","textInput","paste"]);wg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Py="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),phe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Py));function UL(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Afe(n,e,void 0,t),t.currentTarget=null}function YW(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;UL(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;UL(a,l,u),s=c}}}if(yE)throw t=VB,yE=!1,VB=null,t}function ws(t,e){var r=e[JB];r===void 0&&(r=e[JB]=new Set);var n=t+"__bubble";r.has(n)||(JW(e,t,2,!1),r.add(n))}function z4(t,e,r){var n=0;e&&(n|=4),JW(r,t,n,e)}var MN="_reactListening"+Math.random().toString(36).slice(2);function Kb(t){if(!t[MN]){t[MN]=!0,sW.forEach(function(r){r!=="selectionchange"&&(phe.has(r)||z4(r,!1,t),z4(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[MN]||(e[MN]=!0,z4("selectionchange",!1,e))}}function JW(t,e,r,n){switch(OW(e)){case 1:var a=Pfe;break;case 4:a=Bfe;break;default:a=NO}r=a.bind(null,e,r,t),a=void 0,!QB||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function W4(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=mp(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}bW(function(){var u=s,d=vO(r),f=[];e:{var A=XW.get(t);if(A!==void 0){var h=_O,m=t;switch(t){case"keypress":if(k_(r)===0)break e;case"keydown":case"keyup":h=Kfe;break;case"focusin":m="focus",h=V4;break;case"focusout":m="blur",h=V4;break;case"beforeblur":case"afterblur":h=V4;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=IL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ffe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Wfe;break;case KW:case qW:case zW:h=Rfe;break;case WW:h=Yfe;break;case"scroll":h=Tfe;break;case"wheel":h=Zfe;break;case"copy":case"cut":case"paste":h=Lfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=PL}var p=(e&4)!==0,x=!p&&t==="scroll",v=p?A!==null?A+"Capture":null:A;p=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=Ub(y,v),w!=null&&p.push(qb(y,w,b)))),x)break;y=y.return}0<p.length&&(A=new h(A,m,null,r,d),f.push({event:A,listeners:p}))}}if(!(e&7)){e:{if(A=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",A&&r!==LB&&(m=r.relatedTarget||r.fromElement)&&(mp(m)||m[oA]))break e;if((h||A)&&(A=d.window===d?d:(A=d.ownerDocument)?A.defaultView||A.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?mp(m):null,m!==null&&(x=Ng(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(p=IL,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(p=PL,w="onPointerLeave",v="onPointerEnter",y="pointer"),x=h==null?A:Dx(h),b=m==null?A:Dx(m),A=new p(w,y+"leave",h,r,d),A.target=x,A.relatedTarget=b,w=null,mp(d)===u&&(p=new p(v,y+"enter",m,r,d),p.target=b,p.relatedTarget=x,w=p),x=w,h&&m)t:{for(p=h,v=m,y=0,b=p;b;b=Kg(b))y++;for(b=0,w=v;w;w=Kg(w))b++;for(;0<y-b;)p=Kg(p),y--;for(;0<b-y;)v=Kg(v),b--;for(;y--;){if(p===v||v!==null&&p===v.alternate)break t;p=Kg(p),v=Kg(v)}p=null}else p=null;h!==null&&QL(f,A,h,p,!1),m!==null&&x!==null&&QL(f,x,m,p,!0)}}e:{if(A=u?Dx(u):window,h=A.nodeName&&A.nodeName.toLowerCase(),h==="select"||h==="input"&&A.type==="file")var j=ihe;else if(kL(A))if(QW)j=uhe;else{j=lhe;var I=ohe}else(h=A.nodeName)&&h.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(j=che);if(j&&(j=j(t,u))){UW(f,j,r,d);break e}I&&I(t,A,u),t==="focusout"&&(I=A._wrapperState)&&I.controlled&&A.type==="number"&&FB(A,"number",A.value)}switch(I=u?Dx(u):window,t){case"focusin":(kL(I)||I.contentEditable==="true")&&(Fx=I,KB=u,nb=null);break;case"focusout":nb=KB=Fx=null;break;case"mousedown":qB=!0;break;case"contextmenu":case"mouseup":case"dragend":qB=!1,ML(f,r,d);break;case"selectionchange":if(hhe)break;case"keydown":case"keyup":ML(f,r,d)}var _;if(SO)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else kx?MW(t,r)&&(S="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(RW&&r.locale!=="ko"&&(kx||S!=="onCompositionStart"?S==="onCompositionEnd"&&kx&&(_=DW()):(R0=d,CO="value"in R0?R0.value:R0.textContent,kx=!0)),I=_E(u,S),0<I.length&&(S=new jL(S,t,null,r,d),f.push({event:S,listeners:I}),_?S.data=_:(_=LW(r),_!==null&&(S.data=_)))),(_=the?rhe(t,r):nhe(t,r))&&(u=_E(u,"onBeforeInput"),0<u.length&&(d=new jL("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=_))}YW(f,e)})}function qb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function _E(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Ub(t,r),s!=null&&n.unshift(qb(t,s,a)),s=Ub(t,e),s!=null&&n.push(qb(t,s,a))),t=t.return}return n}function Kg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function QL(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Ub(r,s),c!=null&&o.unshift(qb(r,c,l))):a||(c=Ub(r,s),c!=null&&o.push(qb(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var ghe=/\r\n?/g,xhe=/\u0000|\uFFFD/g;function VL(t){return(typeof t=="string"?t:""+t).replace(ghe,`
`).replace(xhe,"")}function LN(t,e,r){if(e=VL(e),VL(t)!==e&&r)throw Error(Ir(425))}function EE(){}var zB=null,WB=null;function XB(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var YB=typeof setTimeout=="function"?setTimeout:void 0,vhe=typeof clearTimeout=="function"?clearTimeout:void 0,HL=typeof Promise=="function"?Promise:void 0,yhe=typeof queueMicrotask=="function"?queueMicrotask:typeof HL<"u"?function(t){return HL.resolve(null).then(t).catch(bhe)}:YB;function bhe(t){setTimeout(function(){throw t})}function X4(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Hb(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Hb(e)}function X0(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $L(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Yv=Math.random().toString(36).slice(2),Qf="__reactFiber$"+Yv,zb="__reactProps$"+Yv,oA="__reactContainer$"+Yv,JB="__reactEvents$"+Yv,whe="__reactListeners$"+Yv,Nhe="__reactHandles$"+Yv;function mp(t){var e=t[Qf];if(e)return e;for(var r=t.parentNode;r;){if(e=r[oA]||r[Qf]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=$L(t);t!==null;){if(r=t[Qf])return r;t=$L(t)}return e}t=r,r=t.parentNode}return null}function ow(t){return t=t[Qf]||t[oA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ir(33))}function zI(t){return t[zb]||null}var ZB=[],Rx=-1;function Pm(t){return{current:t}}function Is(t){0>Rx||(t.current=ZB[Rx],ZB[Rx]=null,Rx--)}function ms(t,e){Rx++,ZB[Rx]=t.current,t.current=e}var fm={},Jl=Pm(fm),zc=Pm(!1),$p=fm;function xv(t,e){var r=t.type.contextTypes;if(!r)return fm;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Wc(t){return t=t.childContextTypes,t!=null}function SE(){Is(zc),Is(Jl)}function GL(t,e,r){if(Jl.current!==fm)throw Error(Ir(168));ms(Jl,e),ms(zc,r)}function ZW(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(Ir(108,ofe(t)||"Unknown",a));return ii({},r,n)}function IE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fm,$p=Jl.current,ms(Jl,t),ms(zc,zc.current),!0}function KL(t,e,r){var n=t.stateNode;if(!n)throw Error(Ir(169));r?(t=ZW(t,e,$p),n.__reactInternalMemoizedMergedChildContext=t,Is(zc),Is(Jl),ms(Jl,t)):Is(zc),ms(zc,r)}var Fh=null,WI=!1,Y4=!1;function eX(t){Fh===null?Fh=[t]:Fh.push(t)}function Che(t){WI=!0,eX(t)}function Bm(){if(!Y4&&Fh!==null){Y4=!0;var t=0,e=Wa;try{var r=Fh;for(Wa=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Fh=null,WI=!1}catch(a){throw Fh!==null&&(Fh=Fh.slice(t+1)),_W(yO,Bm),a}finally{Wa=e,Y4=!1}}return null}var Mx=[],Lx=0,jE=null,PE=0,ld=[],cd=0,Gp=null,Lh=1,Uh="";function Zm(t,e){Mx[Lx++]=PE,Mx[Lx++]=jE,jE=t,PE=e}function tX(t,e,r){ld[cd++]=Lh,ld[cd++]=Uh,ld[cd++]=Gp,Gp=t;var n=Lh;t=Uh;var a=32-sf(n)-1;n&=~(1<<a),r+=1;var s=32-sf(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Lh=1<<32-sf(e)+a|r<<a|n,Uh=s+t}else Lh=1<<s|r<<a|n,Uh=t}function jO(t){t.return!==null&&(Zm(t,1),tX(t,1,0))}function PO(t){for(;t===jE;)jE=Mx[--Lx],Mx[Lx]=null,PE=Mx[--Lx],Mx[Lx]=null;for(;t===Gp;)Gp=ld[--cd],ld[cd]=null,Uh=ld[--cd],ld[cd]=null,Lh=ld[--cd],ld[cd]=null}var Su=null,Nu=null,Rs=!1,Yd=null;function rX(t,e){var r=dd(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function qL(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Su=t,Nu=X0(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Su=t,Nu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Gp!==null?{id:Lh,overflow:Uh}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=dd(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Su=t,Nu=null,!0):!1;default:return!1}}function eT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tT(t){if(Rs){var e=Nu;if(e){var r=e;if(!qL(t,e)){if(eT(t))throw Error(Ir(418));e=X0(r.nextSibling);var n=Su;e&&qL(t,e)?rX(n,r):(t.flags=t.flags&-4097|2,Rs=!1,Su=t)}}else{if(eT(t))throw Error(Ir(418));t.flags=t.flags&-4097|2,Rs=!1,Su=t}}}function zL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Su=t}function UN(t){if(t!==Su)return!1;if(!Rs)return zL(t),Rs=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!XB(t.type,t.memoizedProps)),e&&(e=Nu)){if(eT(t))throw nX(),Error(Ir(418));for(;e;)rX(t,e),e=X0(e.nextSibling)}if(zL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ir(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Nu=X0(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Nu=null}}else Nu=Su?X0(t.stateNode.nextSibling):null;return!0}function nX(){for(var t=Nu;t;)t=X0(t.nextSibling)}function vv(){Nu=Su=null,Rs=!1}function BO(t){Yd===null?Yd=[t]:Yd.push(t)}var _he=_A.ReactCurrentBatchConfig;function z1(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ir(309));var n=r.stateNode}if(!n)throw Error(Ir(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ir(284));if(!r._owner)throw Error(Ir(290,t))}return t}function QN(t,e){throw t=Object.prototype.toString.call(e),Error(Ir(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function WL(t){var e=t._init;return e(t._payload)}function aX(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function n(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=em(v,y),v.index=0,v.sibling=null,v}function s(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,w){return y===null||y.tag!==6?(y=a3(b,v.mode,w),y.return=v,y):(y=a(y,b),y.return=v,y)}function c(v,y,b,w){var j=b.type;return j===Tx?d(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===y0&&WL(j)===y.type)?(w=a(y,b.props),w.ref=z1(v,y,b),w.return=v,w):(w=U_(b.type,b.key,b.props,null,v.mode,w),w.ref=z1(v,y,b),w.return=v,w)}function u(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=s3(b,v.mode,w),y.return=v,y):(y=a(y,b.children||[]),y.return=v,y)}function d(v,y,b,w,j){return y===null||y.tag!==7?(y=Sp(b,v.mode,w,j),y.return=v,y):(y=a(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=a3(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case PN:return b=U_(y.type,y.key,y.props,null,v.mode,b),b.ref=z1(v,null,y),b.return=v,b;case Bx:return y=s3(y,v.mode,b),y.return=v,y;case y0:var w=y._init;return f(v,w(y._payload),b)}if(Iy(y)||H1(y))return y=Sp(y,v.mode,b,null),y.return=v,y;QN(v,y)}return null}function A(v,y,b,w){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case PN:return b.key===j?c(v,y,b,w):null;case Bx:return b.key===j?u(v,y,b,w):null;case y0:return j=b._init,A(v,y,j(b._payload),w)}if(Iy(b)||H1(b))return j!==null?null:d(v,y,b,w,null);QN(v,b)}return null}function h(v,y,b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,l(y,v,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case PN:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,j);case Bx:return v=v.get(w.key===null?b:w.key)||null,u(y,v,w,j);case y0:var I=w._init;return h(v,y,b,I(w._payload),j)}if(Iy(w)||H1(w))return v=v.get(b)||null,d(y,v,w,j,null);QN(y,w)}return null}function m(v,y,b,w){for(var j=null,I=null,_=y,S=y=0,E=null;_!==null&&S<b.length;S++){_.index>S?(E=_,_=null):E=_.sibling;var F=A(v,_,b[S],w);if(F===null){_===null&&(_=E);break}t&&_&&F.alternate===null&&e(v,_),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F,_=E}if(S===b.length)return r(v,_),Rs&&Zm(v,S),j;if(_===null){for(;S<b.length;S++)_=f(v,b[S],w),_!==null&&(y=s(_,y,S),I===null?j=_:I.sibling=_,I=_);return Rs&&Zm(v,S),j}for(_=n(v,_);S<b.length;S++)E=h(_,v,S,b[S],w),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?S:E.key),y=s(E,y,S),I===null?j=E:I.sibling=E,I=E);return t&&_.forEach(function(k){return e(v,k)}),Rs&&Zm(v,S),j}function p(v,y,b,w){var j=H1(b);if(typeof j!="function")throw Error(Ir(150));if(b=j.call(b),b==null)throw Error(Ir(151));for(var I=j=null,_=y,S=y=0,E=null,F=b.next();_!==null&&!F.done;S++,F=b.next()){_.index>S?(E=_,_=null):E=_.sibling;var k=A(v,_,F.value,w);if(k===null){_===null&&(_=E);break}t&&_&&k.alternate===null&&e(v,_),y=s(k,y,S),I===null?j=k:I.sibling=k,I=k,_=E}if(F.done)return r(v,_),Rs&&Zm(v,S),j;if(_===null){for(;!F.done;S++,F=b.next())F=f(v,F.value,w),F!==null&&(y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return Rs&&Zm(v,S),j}for(_=n(v,_);!F.done;S++,F=b.next())F=h(_,v,S,F.value,w),F!==null&&(t&&F.alternate!==null&&_.delete(F.key===null?S:F.key),y=s(F,y,S),I===null?j=F:I.sibling=F,I=F);return t&&_.forEach(function(B){return e(v,B)}),Rs&&Zm(v,S),j}function x(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===Tx&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case PN:e:{for(var j=b.key,I=y;I!==null;){if(I.key===j){if(j=b.type,j===Tx){if(I.tag===7){r(v,I.sibling),y=a(I,b.props.children),y.return=v,v=y;break e}}else if(I.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===y0&&WL(j)===I.type){r(v,I.sibling),y=a(I,b.props),y.ref=z1(v,I,b),y.return=v,v=y;break e}r(v,I);break}else e(v,I);I=I.sibling}b.type===Tx?(y=Sp(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=U_(b.type,b.key,b.props,null,v.mode,w),w.ref=z1(v,y,b),w.return=v,v=w)}return o(v);case Bx:e:{for(I=b.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){r(v,y.sibling),y=a(y,b.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else e(v,y);y=y.sibling}y=s3(b,v.mode,w),y.return=v,v=y}return o(v);case y0:return I=b._init,x(v,y,I(b._payload),w)}if(Iy(b))return m(v,y,b,w);if(H1(b))return p(v,y,b,w);QN(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(r(v,y.sibling),y=a(y,b),y.return=v,v=y):(r(v,y),y=a3(b,v.mode,w),y.return=v,v=y),o(v)):r(v,y)}return x}var yv=aX(!0),sX=aX(!1),BE=Pm(null),TE=null,Ux=null,TO=null;function kO(){TO=Ux=TE=null}function FO(t){var e=BE.current;Is(BE),t._currentValue=e}function rT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function nv(t,e){TE=t,TO=Ux=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gc=!0),t.firstContext=null)}function wd(t){var e=t._currentValue;if(TO!==t)if(t={context:t,memoizedValue:e,next:null},Ux===null){if(TE===null)throw Error(Ir(308));Ux=t,TE.dependencies={lanes:0,firstContext:t}}else Ux=Ux.next=t;return e}var pp=null;function OO(t){pp===null?pp=[t]:pp.push(t)}function iX(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,OO(e)):(r.next=a.next,a.next=r),e.interleaved=r,lA(t,n)}function lA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var b0=!1;function DO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oX(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Y0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pa&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,lA(t,r)}return a=n.interleaved,a===null?(e.next=e,OO(n)):(e.next=a.next,a.next=e),n.interleaved=e,lA(t,r)}function F_(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bO(t,r)}}function XL(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function kE(t,e,r,n){var a=t.updateQueue;b0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var A=l.lane,h=l.eventTime;if((n&A)===A){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,p=l;switch(A=e,h=r,p.tag){case 1:if(m=p.payload,typeof m=="function"){f=m.call(h,f,A);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,A=typeof m=="function"?m.call(h,f,A):m,A==null)break e;f=ii({},f,A);break e;case 2:b0=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,A=a.effects,A===null?a.effects=[l]:A.push(l))}else h={eventTime:h,lane:A,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=A;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;A=l,l=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);qp|=o,t.lanes=o,t.memoizedState=f}}function YL(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Ir(191,a));a.call(n)}}}var lw={},Jf=Pm(lw),Wb=Pm(lw),Xb=Pm(lw);function gp(t){if(t===lw)throw Error(Ir(174));return t}function RO(t,e){switch(ms(Xb,e),ms(Wb,t),ms(Jf,lw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:DB(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=DB(e,t)}Is(Jf),ms(Jf,e)}function bv(){Is(Jf),Is(Wb),Is(Xb)}function lX(t){gp(Xb.current);var e=gp(Jf.current),r=DB(e,t.type);e!==r&&(ms(Wb,t),ms(Jf,r))}function MO(t){Wb.current===t&&(Is(Jf),Is(Wb))}var ei=Pm(0);function FE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var J4=[];function LO(){for(var t=0;t<J4.length;t++)J4[t]._workInProgressVersionPrimary=null;J4.length=0}var O_=_A.ReactCurrentDispatcher,Z4=_A.ReactCurrentBatchConfig,Kp=0,ai=null,Ao=null,Ho=null,OE=!1,ab=!1,Yb=0,Ehe=0;function jl(){throw Error(Ir(321))}function UO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Af(t[r],e[r]))return!1;return!0}function QO(t,e,r,n,a,s){if(Kp=s,ai=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,O_.current=t===null||t.memoizedState===null?Phe:Bhe,t=r(n,a),ab){s=0;do{if(ab=!1,Yb=0,25<=s)throw Error(Ir(301));s+=1,Ho=Ao=null,e.updateQueue=null,O_.current=The,t=r(n,a)}while(ab)}if(O_.current=DE,e=Ao!==null&&Ao.next!==null,Kp=0,Ho=Ao=ai=null,OE=!1,e)throw Error(Ir(300));return t}function VO(){var t=Yb!==0;return Yb=0,t}function Uf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ho===null?ai.memoizedState=Ho=t:Ho=Ho.next=t,Ho}function Nd(){if(Ao===null){var t=ai.alternate;t=t!==null?t.memoizedState:null}else t=Ao.next;var e=Ho===null?ai.memoizedState:Ho.next;if(e!==null)Ho=e,Ao=t;else{if(t===null)throw Error(Ir(310));Ao=t,t={memoizedState:Ao.memoizedState,baseState:Ao.baseState,baseQueue:Ao.baseQueue,queue:Ao.queue,next:null},Ho===null?ai.memoizedState=Ho=t:Ho=Ho.next=t}return Ho}function Jb(t,e){return typeof e=="function"?e(t):e}function e3(t){var e=Nd(),r=e.queue;if(r===null)throw Error(Ir(311));r.lastRenderedReducer=t;var n=Ao,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Kp&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ai.lanes|=d,qp|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Af(n,e.memoizedState)||(Gc=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,ai.lanes|=s,qp|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function t3(t){var e=Nd(),r=e.queue;if(r===null)throw Error(Ir(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Af(s,e.memoizedState)||(Gc=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function cX(){}function uX(t,e){var r=ai,n=Nd(),a=e(),s=!Af(n.memoizedState,a);if(s&&(n.memoizedState=a,Gc=!0),n=n.queue,HO(hX.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Ho!==null&&Ho.memoizedState.tag&1){if(r.flags|=2048,Zb(9,fX.bind(null,r,n,a,e),void 0,null),zo===null)throw Error(Ir(349));Kp&30||dX(r,e,a)}return a}function dX(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ai.updateQueue,e===null?(e={lastEffect:null,stores:null},ai.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function fX(t,e,r,n){e.value=r,e.getSnapshot=n,AX(e)&&mX(t)}function hX(t,e,r){return r(function(){AX(e)&&mX(t)})}function AX(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Af(t,r)}catch{return!0}}function mX(t){var e=lA(t,1);e!==null&&of(e,t,1,-1)}function JL(t){var e=Uf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jb,lastRenderedState:t},e.queue=t,t=t.dispatch=jhe.bind(null,ai,t),[e.memoizedState,t]}function Zb(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ai.updateQueue,e===null?(e={lastEffect:null,stores:null},ai.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pX(){return Nd().memoizedState}function D_(t,e,r,n){var a=Uf();ai.flags|=t,a.memoizedState=Zb(1|e,r,void 0,n===void 0?null:n)}function XI(t,e,r,n){var a=Nd();n=n===void 0?null:n;var s=void 0;if(Ao!==null){var o=Ao.memoizedState;if(s=o.destroy,n!==null&&UO(n,o.deps)){a.memoizedState=Zb(e,r,s,n);return}}ai.flags|=t,a.memoizedState=Zb(1|e,r,s,n)}function ZL(t,e){return D_(8390656,8,t,e)}function HO(t,e){return XI(2048,8,t,e)}function gX(t,e){return XI(4,2,t,e)}function xX(t,e){return XI(4,4,t,e)}function vX(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yX(t,e,r){return r=r!=null?r.concat([t]):null,XI(4,4,vX.bind(null,e,t),r)}function $O(){}function bX(t,e){var r=Nd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function wX(t,e){var r=Nd();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&UO(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function NX(t,e,r){return Kp&21?(Af(r,e)||(r=IW(),ai.lanes|=r,qp|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gc=!0),t.memoizedState=r)}function She(t,e){var r=Wa;Wa=r!==0&&4>r?r:4,t(!0);var n=Z4.transition;Z4.transition={};try{t(!1),e()}finally{Wa=r,Z4.transition=n}}function CX(){return Nd().memoizedState}function Ihe(t,e,r){var n=Z0(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_X(t))EX(e,r);else if(r=iX(t,e,r,n),r!==null){var a=xc();of(r,t,n,a),SX(r,e,n)}}function jhe(t,e,r){var n=Z0(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_X(t))EX(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Af(l,o)){var c=e.interleaved;c===null?(a.next=a,OO(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=iX(t,e,a,n),r!==null&&(a=xc(),of(r,t,n,a),SX(r,e,n))}}function _X(t){var e=t.alternate;return t===ai||e!==null&&e===ai}function EX(t,e){ab=OE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function SX(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,bO(t,r)}}var DE={readContext:wd,useCallback:jl,useContext:jl,useEffect:jl,useImperativeHandle:jl,useInsertionEffect:jl,useLayoutEffect:jl,useMemo:jl,useReducer:jl,useRef:jl,useState:jl,useDebugValue:jl,useDeferredValue:jl,useTransition:jl,useMutableSource:jl,useSyncExternalStore:jl,useId:jl,unstable_isNewReconciler:!1},Phe={readContext:wd,useCallback:function(t,e){return Uf().memoizedState=[t,e===void 0?null:e],t},useContext:wd,useEffect:ZL,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,D_(4194308,4,vX.bind(null,e,t),r)},useLayoutEffect:function(t,e){return D_(4194308,4,t,e)},useInsertionEffect:function(t,e){return D_(4,2,t,e)},useMemo:function(t,e){var r=Uf();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Uf();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ihe.bind(null,ai,t),[n.memoizedState,t]},useRef:function(t){var e=Uf();return t={current:t},e.memoizedState=t},useState:JL,useDebugValue:$O,useDeferredValue:function(t){return Uf().memoizedState=t},useTransition:function(){var t=JL(!1),e=t[0];return t=She.bind(null,t[1]),Uf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ai,a=Uf();if(Rs){if(r===void 0)throw Error(Ir(407));r=r()}else{if(r=e(),zo===null)throw Error(Ir(349));Kp&30||dX(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,ZL(hX.bind(null,n,s,t),[t]),n.flags|=2048,Zb(9,fX.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Uf(),e=zo.identifierPrefix;if(Rs){var r=Uh,n=Lh;r=(n&~(1<<32-sf(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Yb++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Ehe++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bhe={readContext:wd,useCallback:bX,useContext:wd,useEffect:HO,useImperativeHandle:yX,useInsertionEffect:gX,useLayoutEffect:xX,useMemo:wX,useReducer:e3,useRef:pX,useState:function(){return e3(Jb)},useDebugValue:$O,useDeferredValue:function(t){var e=Nd();return NX(e,Ao.memoizedState,t)},useTransition:function(){var t=e3(Jb)[0],e=Nd().memoizedState;return[t,e]},useMutableSource:cX,useSyncExternalStore:uX,useId:CX,unstable_isNewReconciler:!1},The={readContext:wd,useCallback:bX,useContext:wd,useEffect:HO,useImperativeHandle:yX,useInsertionEffect:gX,useLayoutEffect:xX,useMemo:wX,useReducer:t3,useRef:pX,useState:function(){return t3(Jb)},useDebugValue:$O,useDeferredValue:function(t){var e=Nd();return Ao===null?e.memoizedState=t:NX(e,Ao.memoizedState,t)},useTransition:function(){var t=t3(Jb)[0],e=Nd().memoizedState;return[t,e]},useMutableSource:cX,useSyncExternalStore:uX,useId:CX,unstable_isNewReconciler:!1};function Wd(t,e){if(t&&t.defaultProps){e=ii({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function nT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ii({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var YI={isMounted:function(t){return(t=t._reactInternals)?Ng(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=xc(),a=Z0(t),s=Wh(n,a);s.payload=e,r!=null&&(s.callback=r),e=Y0(t,s,a),e!==null&&(of(e,t,a,n),F_(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=xc(),a=Z0(t),s=Wh(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Y0(t,s,a),e!==null&&(of(e,t,a,n),F_(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=xc(),n=Z0(t),a=Wh(r,n);a.tag=2,e!=null&&(a.callback=e),e=Y0(t,a,n),e!==null&&(of(e,t,n,r),F_(e,t,n))}};function eU(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gb(r,n)||!Gb(a,s):!0}function IX(t,e,r){var n=!1,a=fm,s=e.contextType;return typeof s=="object"&&s!==null?s=wd(s):(a=Wc(e)?$p:Jl.current,n=e.contextTypes,s=(n=n!=null)?xv(t,a):fm),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=YI,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function tU(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&YI.enqueueReplaceState(e,e.state,null)}function aT(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},DO(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=wd(s):(s=Wc(e)?$p:Jl.current,a.context=xv(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nT(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&YI.enqueueReplaceState(a,a.state,null),kE(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function wv(t,e){try{var r="",n=e;do r+=ife(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function r3(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var khe=typeof WeakMap=="function"?WeakMap:Map;function jX(t,e,r){r=Wh(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ME||(ME=!0,mT=n),sT(t,e)},r}function PX(t,e,r){r=Wh(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){sT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){sT(t,e),typeof n!="function"&&(J0===null?J0=new Set([this]):J0.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function rU(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new khe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=qhe.bind(null,t,e,r),e.then(t,t))}function nU(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aU(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wh(-1,1),e.tag=2,Y0(r,e,1))),r.lanes|=1),t)}var Fhe=_A.ReactCurrentOwner,Gc=!1;function fc(t,e,r,n){e.child=t===null?sX(e,null,r,n):yv(e,t.child,r,n)}function sU(t,e,r,n,a){r=r.render;var s=e.ref;return nv(e,a),n=QO(t,e,r,n,s,a),r=VO(),t!==null&&!Gc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,cA(t,e,a)):(Rs&&r&&jO(e),e.flags|=1,fc(t,e,n,a),e.child)}function iU(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!JO(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,BX(t,e,s,n,a)):(t=U_(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Gb,r(o,n)&&t.ref===e.ref)return cA(t,e,a)}return e.flags|=1,t=em(s,n),t.ref=e.ref,t.return=e,e.child=t}function BX(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Gb(s,n)&&t.ref===e.ref)if(Gc=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Gc=!0);else return e.lanes=t.lanes,cA(t,e,a)}return iT(t,e,r,n,a)}function TX(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ms(Vx,pu),pu|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ms(Vx,pu),pu|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ms(Vx,pu),pu|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ms(Vx,pu),pu|=n;return fc(t,e,a,r),e.child}function kX(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function iT(t,e,r,n,a){var s=Wc(r)?$p:Jl.current;return s=xv(e,s),nv(e,a),r=QO(t,e,r,n,s,a),n=VO(),t!==null&&!Gc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,cA(t,e,a)):(Rs&&n&&jO(e),e.flags|=1,fc(t,e,r,a),e.child)}function oU(t,e,r,n,a){if(Wc(r)){var s=!0;IE(e)}else s=!1;if(nv(e,a),e.stateNode===null)R_(t,e),IX(e,r,n),aT(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=wd(u):(u=Wc(r)?$p:Jl.current,u=xv(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&tU(e,o,n,u),b0=!1;var A=e.memoizedState;o.state=A,kE(e,n,o,a),c=e.memoizedState,l!==n||A!==c||zc.current||b0?(typeof d=="function"&&(nT(e,r,d,n),c=e.memoizedState),(l=b0||eU(e,r,l,n,A,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,oX(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Wd(e.type,l),o.props=u,f=e.pendingProps,A=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=wd(c):(c=Wc(r)?$p:Jl.current,c=xv(e,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||A!==c)&&tU(e,o,n,c),b0=!1,A=e.memoizedState,o.state=A,kE(e,n,o,a);var m=e.memoizedState;l!==f||A!==m||zc.current||b0?(typeof h=="function"&&(nT(e,r,h,n),m=e.memoizedState),(u=b0||eU(e,r,u,n,A,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&A===t.memoizedState||(e.flags|=1024),n=!1)}return oT(t,e,r,n,s,a)}function oT(t,e,r,n,a,s){kX(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&KL(e,r,!1),cA(t,e,s);n=e.stateNode,Fhe.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=yv(e,t.child,null,s),e.child=yv(e,null,l,s)):fc(t,e,l,s),e.memoizedState=n.state,a&&KL(e,r,!0),e.child}function FX(t){var e=t.stateNode;e.pendingContext?GL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GL(t,e.context,!1),RO(t,e.containerInfo)}function lU(t,e,r,n,a){return vv(),BO(a),e.flags|=256,fc(t,e,r,n),e.child}var lT={dehydrated:null,treeContext:null,retryLane:0};function cT(t){return{baseLanes:t,cachePool:null,transitions:null}}function OX(t,e,r){var n=e.pendingProps,a=ei.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ms(ei,a&1),t===null)return tT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ej(o,n,0,null),t=Sp(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cT(r),e.memoizedState=lT,t):GO(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Ohe(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=em(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=em(l,s):(s=Sp(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?cT(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=lT,n}return s=t.child,t=s.sibling,n=em(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function GO(t,e){return e=ej({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function VN(t,e,r,n){return n!==null&&BO(n),yv(e,t.child,null,r),t=GO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ohe(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=r3(Error(Ir(422))),VN(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=ej({mode:"visible",children:n.children},a,0,null),s=Sp(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&yv(e,t.child,null,o),e.child.memoizedState=cT(o),e.memoizedState=lT,s);if(!(e.mode&1))return VN(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(Ir(419)),n=r3(s,n,void 0),VN(t,e,o,n)}if(l=(o&t.childLanes)!==0,Gc||l){if(n=zo,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,lA(t,a),of(n,t,a,-1))}return YO(),n=r3(Error(Ir(421))),VN(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=zhe.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Nu=X0(a.nextSibling),Su=e,Rs=!0,Yd=null,t!==null&&(ld[cd++]=Lh,ld[cd++]=Uh,ld[cd++]=Gp,Lh=t.id,Uh=t.overflow,Gp=e),e=GO(e,n.children),e.flags|=4096,e)}function cU(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),rT(t.return,e,r)}function n3(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function DX(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(fc(t,e,n.children,r),n=ei.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cU(t,r,e);else if(t.tag===19)cU(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ms(ei,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&FE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),n3(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&FE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}n3(e,!0,r,null,s);break;case"together":n3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function R_(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),qp|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ir(153));if(e.child!==null){for(t=e.child,r=em(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=em(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Dhe(t,e,r){switch(e.tag){case 3:FX(e),vv();break;case 5:lX(e);break;case 1:Wc(e.type)&&IE(e);break;case 4:RO(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;ms(BE,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ms(ei,ei.current&1),e.flags|=128,null):r&e.child.childLanes?OX(t,e,r):(ms(ei,ei.current&1),t=cA(t,e,r),t!==null?t.sibling:null);ms(ei,ei.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return DX(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ms(ei,ei.current),n)break;return null;case 22:case 23:return e.lanes=0,TX(t,e,r)}return cA(t,e,r)}var RX,uT,MX,LX;RX=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uT=function(){};MX=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,gp(Jf.current);var s=null;switch(r){case"input":a=TB(t,a),n=TB(t,n),s=[];break;case"select":a=ii({},a,{value:void 0}),n=ii({},n,{value:void 0}),s=[];break;case"textarea":a=OB(t,a),n=OB(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=EE)}RB(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mb.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ws("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};LX=function(t,e,r,n){r!==n&&(e.flags|=4)};function W1(t,e){if(!Rs)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Pl(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Rhe(t,e,r){var n=e.pendingProps;switch(PO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pl(e),null;case 1:return Wc(e.type)&&SE(),Pl(e),null;case 3:return n=e.stateNode,bv(),Is(zc),Is(Jl),LO(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(UN(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yd!==null&&(xT(Yd),Yd=null))),uT(t,e),Pl(e),null;case 5:MO(e);var a=gp(Xb.current);if(r=e.type,t!==null&&e.stateNode!=null)MX(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ir(166));return Pl(e),null}if(t=gp(Jf.current),UN(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Qf]=e,n[zb]=s,t=(e.mode&1)!==0,r){case"dialog":ws("cancel",n),ws("close",n);break;case"iframe":case"object":case"embed":ws("load",n);break;case"video":case"audio":for(a=0;a<Py.length;a++)ws(Py[a],n);break;case"source":ws("error",n);break;case"img":case"image":case"link":ws("error",n),ws("load",n);break;case"details":ws("toggle",n);break;case"input":xL(n,s),ws("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ws("invalid",n);break;case"textarea":yL(n,s),ws("invalid",n)}RB(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&LN(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&LN(n.textContent,l,t),a=["children",""+l]):Mb.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ws("scroll",n)}switch(r){case"input":BN(n),vL(n,s,!0);break;case"textarea":BN(n),bL(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=EE)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hW(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Qf]=e,t[zb]=n,RX(t,e,!1,!1),e.stateNode=t;e:{switch(o=MB(r,n),r){case"dialog":ws("cancel",t),ws("close",t),a=n;break;case"iframe":case"object":case"embed":ws("load",t),a=n;break;case"video":case"audio":for(a=0;a<Py.length;a++)ws(Py[a],t);a=n;break;case"source":ws("error",t),a=n;break;case"img":case"image":case"link":ws("error",t),ws("load",t),a=n;break;case"details":ws("toggle",t),a=n;break;case"input":xL(t,n),a=TB(t,n),ws("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ii({},n,{value:void 0}),ws("invalid",t);break;case"textarea":yL(t,n),a=OB(t,n),ws("invalid",t);break;default:a=n}RB(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?pW(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AW(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Lb(t,c):typeof c=="number"&&Lb(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mb.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ws("scroll",t):c!=null&&mO(t,s,c,o))}switch(r){case"input":BN(t),vL(t,n,!1);break;case"textarea":BN(t),bL(t);break;case"option":n.value!=null&&t.setAttribute("value",""+dm(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Zx(t,!!n.multiple,s,!1):n.defaultValue!=null&&Zx(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=EE)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pl(e),null;case 6:if(t&&e.stateNode!=null)LX(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ir(166));if(r=gp(Xb.current),gp(Jf.current),UN(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qf]=e,(s=n.nodeValue!==r)&&(t=Su,t!==null))switch(t.tag){case 3:LN(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&LN(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qf]=e,e.stateNode=n}return Pl(e),null;case 13:if(Is(ei),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rs&&Nu!==null&&e.mode&1&&!(e.flags&128))nX(),vv(),e.flags|=98560,s=!1;else if(s=UN(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ir(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ir(317));s[Qf]=e}else vv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pl(e),s=!1}else Yd!==null&&(xT(Yd),Yd=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ei.current&1?No===0&&(No=3):YO())),e.updateQueue!==null&&(e.flags|=4),Pl(e),null);case 4:return bv(),uT(t,e),t===null&&Kb(e.stateNode.containerInfo),Pl(e),null;case 10:return FO(e.type._context),Pl(e),null;case 17:return Wc(e.type)&&SE(),Pl(e),null;case 19:if(Is(ei),s=e.memoizedState,s===null)return Pl(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)W1(s,!1);else{if(No!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=FE(t),o!==null){for(e.flags|=128,W1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ms(ei,ei.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fi()>Nv&&(e.flags|=128,n=!0,W1(s,!1),e.lanes=4194304)}else{if(!n)if(t=FE(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),W1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rs)return Pl(e),null}else 2*Fi()-s.renderingStartTime>Nv&&r!==1073741824&&(e.flags|=128,n=!0,W1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fi(),e.sibling=null,r=ei.current,ms(ei,n?r&1|2:r&1),e):(Pl(e),null);case 22:case 23:return XO(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?pu&1073741824&&(Pl(e),e.subtreeFlags&6&&(e.flags|=8192)):Pl(e),null;case 24:return null;case 25:return null}throw Error(Ir(156,e.tag))}function Mhe(t,e){switch(PO(e),e.tag){case 1:return Wc(e.type)&&SE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bv(),Is(zc),Is(Jl),LO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MO(e),null;case 13:if(Is(ei),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ir(340));vv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Is(ei),null;case 4:return bv(),null;case 10:return FO(e.type._context),null;case 22:case 23:return XO(),null;case 24:return null;default:return null}}var HN=!1,Kl=!1,Lhe=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function Qx(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){gi(t,e,n)}else r.current=null}function dT(t,e,r){try{r()}catch(n){gi(t,e,n)}}var uU=!1;function Uhe(t,e){if(zB=NE,t=$W(),IO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,A=null;t:for(;;){for(var h;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)A=f,f=h;for(;;){if(f===t)break t;if(A===r&&++u===a&&(l=o),A===s&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=A,A=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(WB={focusedElem:t,selectionRange:r},NE=!1,Xr=e;Xr!==null;)if(e=Xr,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xr=t;else for(;Xr!==null;){e=Xr;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,x=m.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:Wd(e.type,p),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ir(163))}}catch(w){gi(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Xr=t;break}Xr=e.return}return m=uU,uU=!1,m}function sb(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&dT(e,r,s)}a=a.next}while(a!==n)}}function JI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function fT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function UX(t){var e=t.alternate;e!==null&&(t.alternate=null,UX(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qf],delete e[zb],delete e[JB],delete e[whe],delete e[Nhe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QX(t){return t.tag===5||t.tag===3||t.tag===4}function dU(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QX(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=EE));else if(n!==4&&(t=t.child,t!==null))for(hT(t,e,r),t=t.sibling;t!==null;)hT(t,e,r),t=t.sibling}function AT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(AT(t,e,r),t=t.sibling;t!==null;)AT(t,e,r),t=t.sibling}var hl=null,Xd=!1;function r0(t,e,r){for(r=r.child;r!==null;)VX(t,e,r),r=r.sibling}function VX(t,e,r){if(Yf&&typeof Yf.onCommitFiberUnmount=="function")try{Yf.onCommitFiberUnmount($I,r)}catch{}switch(r.tag){case 5:Kl||Qx(r,e);case 6:var n=hl,a=Xd;hl=null,r0(t,e,r),hl=n,Xd=a,hl!==null&&(Xd?(t=hl,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):hl.removeChild(r.stateNode));break;case 18:hl!==null&&(Xd?(t=hl,r=r.stateNode,t.nodeType===8?X4(t.parentNode,r):t.nodeType===1&&X4(t,r),Hb(t)):X4(hl,r.stateNode));break;case 4:n=hl,a=Xd,hl=r.stateNode.containerInfo,Xd=!0,r0(t,e,r),hl=n,Xd=a;break;case 0:case 11:case 14:case 15:if(!Kl&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dT(r,e,o),a=a.next}while(a!==n)}r0(t,e,r);break;case 1:if(!Kl&&(Qx(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){gi(r,e,l)}r0(t,e,r);break;case 21:r0(t,e,r);break;case 22:r.mode&1?(Kl=(n=Kl)||r.memoizedState!==null,r0(t,e,r),Kl=n):r0(t,e,r);break;default:r0(t,e,r)}}function fU(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Lhe),e.forEach(function(n){var a=Whe.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ud(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:hl=l.stateNode,Xd=!1;break e;case 3:hl=l.stateNode.containerInfo,Xd=!0;break e;case 4:hl=l.stateNode.containerInfo,Xd=!0;break e}l=l.return}if(hl===null)throw Error(Ir(160));VX(s,o,a),hl=null,Xd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){gi(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HX(e,t),e=e.sibling}function HX(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ud(e,t),Bf(t),n&4){try{sb(3,t,t.return),JI(3,t)}catch(p){gi(t,t.return,p)}try{sb(5,t,t.return)}catch(p){gi(t,t.return,p)}}break;case 1:Ud(e,t),Bf(t),n&512&&r!==null&&Qx(r,r.return);break;case 5:if(Ud(e,t),Bf(t),n&512&&r!==null&&Qx(r,r.return),t.flags&32){var a=t.stateNode;try{Lb(a,"")}catch(p){gi(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&dW(a,s),MB(l,o);var u=MB(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?pW(a,f):d==="dangerouslySetInnerHTML"?AW(a,f):d==="children"?Lb(a,f):mO(a,d,f,u)}switch(l){case"input":kB(a,s);break;case"textarea":fW(a,s);break;case"select":var A=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Zx(a,!!s.multiple,h,!1):A!==!!s.multiple&&(s.defaultValue!=null?Zx(a,!!s.multiple,s.defaultValue,!0):Zx(a,!!s.multiple,s.multiple?[]:"",!1))}a[zb]=s}catch(p){gi(t,t.return,p)}}break;case 6:if(Ud(e,t),Bf(t),n&4){if(t.stateNode===null)throw Error(Ir(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(p){gi(t,t.return,p)}}break;case 3:if(Ud(e,t),Bf(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hb(e.containerInfo)}catch(p){gi(t,t.return,p)}break;case 4:Ud(e,t),Bf(t);break;case 13:Ud(e,t),Bf(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(zO=Fi())),n&4&&fU(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Kl=(u=Kl)||d,Ud(e,t),Kl=u):Ud(e,t),Bf(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Xr=t,d=t.child;d!==null;){for(f=Xr=d;Xr!==null;){switch(A=Xr,h=A.child,A.tag){case 0:case 11:case 14:case 15:sb(4,A,A.return);break;case 1:Qx(A,A.return);var m=A.stateNode;if(typeof m.componentWillUnmount=="function"){n=A,r=A.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){gi(n,r,p)}}break;case 5:Qx(A,A.return);break;case 22:if(A.memoizedState!==null){AU(f);continue}}h!==null?(h.return=A,Xr=h):AU(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=mW("display",o))}catch(p){gi(t,t.return,p)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){gi(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ud(e,t),Bf(t),n&4&&fU(t);break;case 21:break;default:Ud(e,t),Bf(t)}}function Bf(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QX(r)){var n=r;break e}r=r.return}throw Error(Ir(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Lb(a,""),n.flags&=-33);var s=dU(t);AT(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=dU(t);hT(t,l,o);break;default:throw Error(Ir(161))}}catch(c){gi(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qhe(t,e,r){Xr=t,$X(t)}function $X(t,e,r){for(var n=(t.mode&1)!==0;Xr!==null;){var a=Xr,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||HN;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Kl;l=HN;var u=Kl;if(HN=o,(Kl=c)&&!u)for(Xr=a;Xr!==null;)o=Xr,c=o.child,o.tag===22&&o.memoizedState!==null?mU(a):c!==null?(c.return=o,Xr=c):mU(a);for(;s!==null;)Xr=s,$X(s),s=s.sibling;Xr=a,HN=l,Kl=u}hU(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Xr=s):hU(t)}}function hU(t){for(;Xr!==null;){var e=Xr;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kl||JI(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Kl)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:Wd(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YL(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}YL(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Hb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ir(163))}Kl||e.flags&512&&fT(e)}catch(A){gi(e,e.return,A)}}if(e===t){Xr=null;break}if(r=e.sibling,r!==null){r.return=e.return,Xr=r;break}Xr=e.return}}function AU(t){for(;Xr!==null;){var e=Xr;if(e===t){Xr=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Xr=r;break}Xr=e.return}}function mU(t){for(;Xr!==null;){var e=Xr;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{JI(4,e)}catch(c){gi(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){gi(e,a,c)}}var s=e.return;try{fT(e)}catch(c){gi(e,s,c)}break;case 5:var o=e.return;try{fT(e)}catch(c){gi(e,o,c)}}}catch(c){gi(e,e.return,c)}if(e===t){Xr=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Xr=l;break}Xr=e.return}}var Vhe=Math.ceil,RE=_A.ReactCurrentDispatcher,KO=_A.ReactCurrentOwner,gd=_A.ReactCurrentBatchConfig,pa=0,zo=null,Zi=null,Cl=0,pu=0,Vx=Pm(0),No=0,e2=null,qp=0,ZI=0,qO=0,ib=null,Hc=null,zO=0,Nv=1/0,kh=null,ME=!1,mT=null,J0=null,$N=!1,M0=null,LE=0,ob=0,pT=null,M_=-1,L_=0;function xc(){return pa&6?Fi():M_!==-1?M_:M_=Fi()}function Z0(t){return t.mode&1?pa&2&&Cl!==0?Cl&-Cl:_he.transition!==null?(L_===0&&(L_=IW()),L_):(t=Wa,t!==0||(t=window.event,t=t===void 0?16:OW(t.type)),t):1}function of(t,e,r,n){if(50<ob)throw ob=0,pT=null,Error(Ir(185));sw(t,r,n),(!(pa&2)||t!==zo)&&(t===zo&&(!(pa&2)&&(ZI|=r),No===4&&S0(t,Cl)),Xc(t,n),r===1&&pa===0&&!(e.mode&1)&&(Nv=Fi()+500,WI&&Bm()))}function Xc(t,e){var r=t.callbackNode;_fe(t,e);var n=wE(t,t===zo?Cl:0);if(n===0)r!==null&&CL(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&CL(r),e===1)t.tag===0?Che(pU.bind(null,t)):eX(pU.bind(null,t)),yhe(function(){!(pa&6)&&Bm()}),r=null;else{switch(jW(n)){case 1:r=yO;break;case 4:r=EW;break;case 16:r=bE;break;case 536870912:r=SW;break;default:r=bE}r=JX(r,GX.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function GX(t,e){if(M_=-1,L_=0,pa&6)throw Error(Ir(327));var r=t.callbackNode;if(av()&&t.callbackNode!==r)return null;var n=wE(t,t===zo?Cl:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=UE(t,n);else{e=n;var a=pa;pa|=2;var s=qX();(zo!==t||Cl!==e)&&(kh=null,Nv=Fi()+500,Ep(t,e));do try{Ghe();break}catch(l){KX(t,l)}while(!0);kO(),RE.current=s,pa=a,Zi!==null?e=0:(zo=null,Cl=0,e=No)}if(e!==0){if(e===2&&(a=HB(t),a!==0&&(n=a,e=gT(t,a))),e===1)throw r=e2,Ep(t,0),S0(t,n),Xc(t,Fi()),r;if(e===6)S0(t,n);else{if(a=t.current.alternate,!(n&30)&&!Hhe(a)&&(e=UE(t,n),e===2&&(s=HB(t),s!==0&&(n=s,e=gT(t,s))),e===1))throw r=e2,Ep(t,0),S0(t,n),Xc(t,Fi()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(Ir(345));case 2:ep(t,Hc,kh);break;case 3:if(S0(t,n),(n&130023424)===n&&(e=zO+500-Fi(),10<e)){if(wE(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){xc(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=YB(ep.bind(null,t,Hc,kh),e);break}ep(t,Hc,kh);break;case 4:if(S0(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-sf(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=Fi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Vhe(n/1960))-n,10<n){t.timeoutHandle=YB(ep.bind(null,t,Hc,kh),n);break}ep(t,Hc,kh);break;case 5:ep(t,Hc,kh);break;default:throw Error(Ir(329))}}}return Xc(t,Fi()),t.callbackNode===r?GX.bind(null,t):null}function gT(t,e){var r=ib;return t.current.memoizedState.isDehydrated&&(Ep(t,e).flags|=256),t=UE(t,e),t!==2&&(e=Hc,Hc=r,e!==null&&xT(e)),t}function xT(t){Hc===null?Hc=t:Hc.push.apply(Hc,t)}function Hhe(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Af(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function S0(t,e){for(e&=~qO,e&=~ZI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-sf(e),n=1<<r;t[r]=-1,e&=~n}}function pU(t){if(pa&6)throw Error(Ir(327));av();var e=wE(t,0);if(!(e&1))return Xc(t,Fi()),null;var r=UE(t,e);if(t.tag!==0&&r===2){var n=HB(t);n!==0&&(e=n,r=gT(t,n))}if(r===1)throw r=e2,Ep(t,0),S0(t,e),Xc(t,Fi()),r;if(r===6)throw Error(Ir(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ep(t,Hc,kh),Xc(t,Fi()),null}function WO(t,e){var r=pa;pa|=1;try{return t(e)}finally{pa=r,pa===0&&(Nv=Fi()+500,WI&&Bm())}}function zp(t){M0!==null&&M0.tag===0&&!(pa&6)&&av();var e=pa;pa|=1;var r=gd.transition,n=Wa;try{if(gd.transition=null,Wa=1,t)return t()}finally{Wa=n,gd.transition=r,pa=e,!(pa&6)&&Bm()}}function XO(){pu=Vx.current,Is(Vx)}function Ep(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vhe(r)),Zi!==null)for(r=Zi.return;r!==null;){var n=r;switch(PO(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&SE();break;case 3:bv(),Is(zc),Is(Jl),LO();break;case 5:MO(n);break;case 4:bv();break;case 13:Is(ei);break;case 19:Is(ei);break;case 10:FO(n.type._context);break;case 22:case 23:XO()}r=r.return}if(zo=t,Zi=t=em(t.current,null),Cl=pu=e,No=0,e2=null,qO=ZI=qp=0,Hc=ib=null,pp!==null){for(e=0;e<pp.length;e++)if(r=pp[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}pp=null}return t}function KX(t,e){do{var r=Zi;try{if(kO(),O_.current=DE,OE){for(var n=ai.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}OE=!1}if(Kp=0,Ho=Ao=ai=null,ab=!1,Yb=0,KO.current=null,r===null||r.return===null){No=1,e2=e,Zi=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=Cl,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var A=d.alternate;A?(d.updateQueue=A.updateQueue,d.memoizedState=A.memoizedState,d.lanes=A.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=nU(o);if(h!==null){h.flags&=-257,aU(h,o,l,s,e),h.mode&1&&rU(s,u,e),e=h,c=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(c),e.updateQueue=p}else m.add(c);break e}else{if(!(e&1)){rU(s,u,e),YO();break e}c=Error(Ir(426))}}else if(Rs&&l.mode&1){var x=nU(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),aU(x,o,l,s,e),BO(wv(c,l));break e}}s=c=wv(c,l),No!==4&&(No=2),ib===null?ib=[s]:ib.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=jX(s,c,e);XL(s,v);break e;case 1:l=c;var y=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(J0===null||!J0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=PX(s,l,e);XL(s,w);break e}}s=s.return}while(s!==null)}WX(r)}catch(j){e=j,Zi===r&&r!==null&&(Zi=r=r.return);continue}break}while(!0)}function qX(){var t=RE.current;return RE.current=DE,t===null?DE:t}function YO(){(No===0||No===3||No===2)&&(No=4),zo===null||!(qp&268435455)&&!(ZI&268435455)||S0(zo,Cl)}function UE(t,e){var r=pa;pa|=2;var n=qX();(zo!==t||Cl!==e)&&(kh=null,Ep(t,e));do try{$he();break}catch(a){KX(t,a)}while(!0);if(kO(),pa=r,RE.current=n,Zi!==null)throw Error(Ir(261));return zo=null,Cl=0,No}function $he(){for(;Zi!==null;)zX(Zi)}function Ghe(){for(;Zi!==null&&!pfe();)zX(Zi)}function zX(t){var e=YX(t.alternate,t,pu);t.memoizedProps=t.pendingProps,e===null?WX(t):Zi=e,KO.current=null}function WX(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Mhe(r,e),r!==null){r.flags&=32767,Zi=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{No=6,Zi=null;return}}else if(r=Rhe(r,e,pu),r!==null){Zi=r;return}if(e=e.sibling,e!==null){Zi=e;return}Zi=e=t}while(e!==null);No===0&&(No=5)}function ep(t,e,r){var n=Wa,a=gd.transition;try{gd.transition=null,Wa=1,Khe(t,e,r,n)}finally{gd.transition=a,Wa=n}return null}function Khe(t,e,r,n){do av();while(M0!==null);if(pa&6)throw Error(Ir(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ir(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(Efe(t,s),t===zo&&(Zi=zo=null,Cl=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$N||($N=!0,JX(bE,function(){return av(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=gd.transition,gd.transition=null;var o=Wa;Wa=1;var l=pa;pa|=4,KO.current=null,Uhe(t,r),HX(r,t),fhe(WB),NE=!!zB,WB=zB=null,t.current=r,Qhe(r),gfe(),pa=l,Wa=o,gd.transition=s}else t.current=r;if($N&&($N=!1,M0=t,LE=a),s=t.pendingLanes,s===0&&(J0=null),yfe(r.stateNode),Xc(t,Fi()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ME)throw ME=!1,t=mT,mT=null,t;return LE&1&&t.tag!==0&&av(),s=t.pendingLanes,s&1?t===pT?ob++:(ob=0,pT=t):ob=0,Bm(),null}function av(){if(M0!==null){var t=jW(LE),e=gd.transition,r=Wa;try{if(gd.transition=null,Wa=16>t?16:t,M0===null)var n=!1;else{if(t=M0,M0=null,LE=0,pa&6)throw Error(Ir(331));var a=pa;for(pa|=4,Xr=t.current;Xr!==null;){var s=Xr,o=s.child;if(Xr.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Xr=u;Xr!==null;){var d=Xr;switch(d.tag){case 0:case 11:case 15:sb(8,d,s)}var f=d.child;if(f!==null)f.return=d,Xr=f;else for(;Xr!==null;){d=Xr;var A=d.sibling,h=d.return;if(UX(d),d===u){Xr=null;break}if(A!==null){A.return=h,Xr=A;break}Xr=h}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}Xr=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xr=o;else e:for(;Xr!==null;){if(s=Xr,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Xr=v;break e}Xr=s.return}}var y=t.current;for(Xr=y;Xr!==null;){o=Xr;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Xr=b;else e:for(o=y;Xr!==null;){if(l=Xr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:JI(9,l)}}catch(j){gi(l,l.return,j)}if(l===o){Xr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Xr=w;break e}Xr=l.return}}if(pa=a,Bm(),Yf&&typeof Yf.onPostCommitFiberRoot=="function")try{Yf.onPostCommitFiberRoot($I,t)}catch{}n=!0}return n}finally{Wa=r,gd.transition=e}}return!1}function gU(t,e,r){e=wv(r,e),e=jX(t,e,1),t=Y0(t,e,1),e=xc(),t!==null&&(sw(t,1,e),Xc(t,e))}function gi(t,e,r){if(t.tag===3)gU(t,t,r);else for(;e!==null;){if(e.tag===3){gU(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(J0===null||!J0.has(n))){t=wv(r,t),t=PX(e,t,1),e=Y0(e,t,1),t=xc(),e!==null&&(sw(e,1,t),Xc(e,t));break}}e=e.return}}function qhe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=xc(),t.pingedLanes|=t.suspendedLanes&r,zo===t&&(Cl&r)===r&&(No===4||No===3&&(Cl&130023424)===Cl&&500>Fi()-zO?Ep(t,0):qO|=r),Xc(t,e)}function XX(t,e){e===0&&(t.mode&1?(e=FN,FN<<=1,!(FN&130023424)&&(FN=4194304)):e=1);var r=xc();t=lA(t,e),t!==null&&(sw(t,e,r),Xc(t,r))}function zhe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),XX(t,r)}function Whe(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ir(314))}n!==null&&n.delete(e),XX(t,r)}var YX;YX=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||zc.current)Gc=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gc=!1,Dhe(t,e,r);Gc=!!(t.flags&131072)}else Gc=!1,Rs&&e.flags&1048576&&tX(e,PE,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;R_(t,e),t=e.pendingProps;var a=xv(e,Jl.current);nv(e,r),a=QO(null,e,n,t,a,r);var s=VO();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wc(n)?(s=!0,IE(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,DO(e),a.updater=YI,e.stateNode=a,a._reactInternals=e,aT(e,n,t,r),e=oT(null,e,n,!0,s,r)):(e.tag=0,Rs&&s&&jO(e),fc(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(R_(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=Yhe(n),t=Wd(n,t),a){case 0:e=iT(null,e,n,t,r);break e;case 1:e=oU(null,e,n,t,r);break e;case 11:e=sU(null,e,n,t,r);break e;case 14:e=iU(null,e,n,Wd(n.type,t),r);break e}throw Error(Ir(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Wd(n,a),iT(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Wd(n,a),oU(t,e,n,a,r);case 3:e:{if(FX(e),t===null)throw Error(Ir(387));n=e.pendingProps,s=e.memoizedState,a=s.element,oX(t,e),kE(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=wv(Error(Ir(423)),e),e=lU(t,e,n,r,a);break e}else if(n!==a){a=wv(Error(Ir(424)),e),e=lU(t,e,n,r,a);break e}else for(Nu=X0(e.stateNode.containerInfo.firstChild),Su=e,Rs=!0,Yd=null,r=sX(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vv(),n===a){e=cA(t,e,r);break e}fc(t,e,n,r)}e=e.child}return e;case 5:return lX(e),t===null&&tT(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,XB(n,a)?o=null:s!==null&&XB(n,s)&&(e.flags|=32),kX(t,e),fc(t,e,o,r),e.child;case 6:return t===null&&tT(e),null;case 13:return OX(t,e,r);case 4:return RO(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=yv(e,null,n,r):fc(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Wd(n,a),sU(t,e,n,a,r);case 7:return fc(t,e,e.pendingProps,r),e.child;case 8:return fc(t,e,e.pendingProps.children,r),e.child;case 12:return fc(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,ms(BE,n._currentValue),n._currentValue=o,s!==null)if(Af(s.value,o)){if(s.children===a.children&&!zc.current){e=cA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Wh(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),rT(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ir(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),rT(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fc(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,nv(e,r),a=wd(a),n=n(a),e.flags|=1,fc(t,e,n,r),e.child;case 14:return n=e.type,a=Wd(n,e.pendingProps),a=Wd(n.type,a),iU(t,e,n,a,r);case 15:return BX(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:Wd(n,a),R_(t,e),e.tag=1,Wc(n)?(t=!0,IE(e)):t=!1,nv(e,r),IX(e,n,a),aT(e,n,a,r),oT(null,e,n,!0,t,r);case 19:return DX(t,e,r);case 22:return TX(t,e,r)}throw Error(Ir(156,e.tag))};function JX(t,e){return _W(t,e)}function Xhe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dd(t,e,r,n){return new Xhe(t,e,r,n)}function JO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yhe(t){if(typeof t=="function")return JO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gO)return 11;if(t===xO)return 14}return 2}function em(t,e){var r=t.alternate;return r===null?(r=dd(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function U_(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")JO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tx:return Sp(r.children,a,s,e);case pO:o=8,a|=8;break;case IB:return t=dd(12,r,e,a|2),t.elementType=IB,t.lanes=s,t;case jB:return t=dd(13,r,e,a),t.elementType=jB,t.lanes=s,t;case PB:return t=dd(19,r,e,a),t.elementType=PB,t.lanes=s,t;case lW:return ej(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iW:o=10;break e;case oW:o=9;break e;case gO:o=11;break e;case xO:o=14;break e;case y0:o=16,n=null;break e}throw Error(Ir(130,t==null?t:typeof t,""))}return e=dd(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Sp(t,e,r,n){return t=dd(7,t,n,e),t.lanes=r,t}function ej(t,e,r,n){return t=dd(22,t,n,e),t.elementType=lW,t.lanes=r,t.stateNode={isHidden:!1},t}function a3(t,e,r){return t=dd(6,t,null,e),t.lanes=r,t}function s3(t,e,r){return e=dd(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jhe(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L4(0),this.expirationTimes=L4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L4(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ZO(t,e,r,n,a,s,o,l,c){return t=new Jhe(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dd(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},DO(s),t}function Zhe(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bx,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZX(t){if(!t)return fm;t=t._reactInternals;e:{if(Ng(t)!==t||t.tag!==1)throw Error(Ir(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ir(171))}if(t.tag===1){var r=t.type;if(Wc(r))return ZW(t,r,e)}return e}function eY(t,e,r,n,a,s,o,l,c){return t=ZO(r,n,!0,t,a,s,o,l,c),t.context=ZX(null),r=t.current,n=xc(),a=Z0(r),s=Wh(n,a),s.callback=e??null,Y0(r,s,a),t.current.lanes=a,sw(t,a,n),Xc(t,n),t}function tj(t,e,r,n){var a=e.current,s=xc(),o=Z0(a);return r=ZX(r),e.context===null?e.context=r:e.pendingContext=r,e=Wh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Y0(a,e,o),t!==null&&(of(t,a,o,s),F_(t,a,o)),o}function QE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xU(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function eD(t,e){xU(t,e),(t=t.alternate)&&xU(t,e)}function eAe(){return null}var tY=typeof reportError=="function"?reportError:function(t){console.error(t)};function tD(t){this._internalRoot=t}rj.prototype.render=tD.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ir(409));tj(t,e,null,null)};rj.prototype.unmount=tD.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zp(function(){tj(null,t,null,null)}),e[oA]=null}};function rj(t){this._internalRoot=t}rj.prototype.unstable_scheduleHydration=function(t){if(t){var e=TW();t={blockedOn:null,target:t,priority:e};for(var r=0;r<E0.length&&e!==0&&e<E0[r].priority;r++);E0.splice(r,0,t),r===0&&FW(t)}};function rD(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vU(){}function tAe(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=QE(o);s.call(u)}}var o=eY(e,n,t,0,null,!1,!1,"",vU);return t._reactRootContainer=o,t[oA]=o.current,Kb(t.nodeType===8?t.parentNode:t),zp(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=QE(c);l.call(u)}}var c=ZO(t,0,!1,null,null,!1,!1,"",vU);return t._reactRootContainer=c,t[oA]=c.current,Kb(t.nodeType===8?t.parentNode:t),zp(function(){tj(e,c,r,n)}),c}function aj(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=QE(o);l.call(c)}}tj(e,o,t,a)}else o=tAe(r,e,t,a,n);return QE(o)}PW=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=jy(e.pendingLanes);r!==0&&(bO(e,r|1),Xc(e,Fi()),!(pa&6)&&(Nv=Fi()+500,Bm()))}break;case 13:zp(function(){var n=lA(t,1);if(n!==null){var a=xc();of(n,t,1,a)}}),eD(t,1)}};wO=function(t){if(t.tag===13){var e=lA(t,134217728);if(e!==null){var r=xc();of(e,t,134217728,r)}eD(t,134217728)}};BW=function(t){if(t.tag===13){var e=Z0(t),r=lA(t,e);if(r!==null){var n=xc();of(r,t,e,n)}eD(t,e)}};TW=function(){return Wa};kW=function(t,e){var r=Wa;try{return Wa=t,e()}finally{Wa=r}};UB=function(t,e,r){switch(e){case"input":if(kB(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=zI(n);if(!a)throw Error(Ir(90));uW(n),kB(n,a)}}}break;case"textarea":fW(t,r);break;case"select":e=r.value,e!=null&&Zx(t,!!r.multiple,e,!1)}};vW=WO;yW=zp;var rAe={usingClientEntryPoint:!1,Events:[ow,Dx,zI,gW,xW,WO]},X1={findFiberByHostInstance:mp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nAe={bundleType:X1.bundleType,version:X1.version,rendererPackageName:X1.rendererPackageName,rendererConfig:X1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_A.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NW(t),t===null?null:t.stateNode},findFiberByHostInstance:X1.findFiberByHostInstance||eAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var GN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!GN.isDisabled&&GN.supportsFiber)try{$I=GN.inject(nAe),Yf=GN}catch{}}Ou.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rAe;Ou.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rD(e))throw Error(Ir(200));return Zhe(t,e,null,r)};Ou.createRoot=function(t,e){if(!rD(t))throw Error(Ir(299));var r=!1,n="",a=tY;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=ZO(t,1,!1,null,null,r,!1,n,a),t[oA]=e.current,Kb(t.nodeType===8?t.parentNode:t),new tD(e)};Ou.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ir(188)):(t=Object.keys(t).join(","),Error(Ir(268,t)));return t=NW(e),t=t===null?null:t.stateNode,t};Ou.flushSync=function(t){return zp(t)};Ou.hydrate=function(t,e,r){if(!nj(e))throw Error(Ir(200));return aj(null,t,e,!0,r)};Ou.hydrateRoot=function(t,e,r){if(!rD(t))throw Error(Ir(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=tY;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=eY(e,null,t,1,r??null,a,!1,s,o),t[oA]=e.current,Kb(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new rj(e)};Ou.render=function(t,e,r){if(!nj(e))throw Error(Ir(200));return aj(null,t,e,!1,r)};Ou.unmountComponentAtNode=function(t){if(!nj(t))throw Error(Ir(40));return t._reactRootContainer?(zp(function(){aj(null,null,t,!1,function(){t._reactRootContainer=null,t[oA]=null})}),!0):!1};Ou.unstable_batchedUpdates=WO;Ou.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!nj(r))throw Error(Ir(200));if(t==null||t._reactInternals===void 0)throw Error(Ir(38));return aj(t,e,r,!1,n)};Ou.version="18.3.1-next-f1338f8080-20240426";function rY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rY)}catch(t){console.error(t)}}rY(),rW.exports=Ou;var Iu=rW.exports,yU=Iu;EB.createRoot=yU.createRoot,EB.hydrateRoot=yU.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bU="popstate";function aAe(t={}){function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return vT("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:t2(a)}return iAe(e,r,null,t)}function Vs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sAe(){return Math.random().toString(36).substring(2,10)}function wU(t,e){return{usr:t.state,key:t.key,idx:e}}function vT(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jv(e):e,state:r,key:e&&e.key||n||sAe()}}function t2({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Jv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function iAe(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let x=d(),v=x==null?null:x-u;u=x,c&&c({action:l,location:p.location,delta:v})}function A(x,v){l="PUSH";let y=vT(p.location,x,v);u=d()+1;let b=wU(y,u),w=p.createHref(y);try{o.pushState(b,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(w)}s&&c&&c({action:l,location:p.location,delta:1})}function h(x,v){l="REPLACE";let y=vT(p.location,x,v);u=d();let b=wU(y,u),w=p.createHref(y);o.replaceState(b,"",w),s&&c&&c({action:l,location:p.location,delta:0})}function m(x){return oAe(x)}let p={get action(){return l},get location(){return t(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(bU,f),c=x,()=>{a.removeEventListener(bU,f),c=null}},createHref(x){return e(a,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:A,replace:h,go(x){return o.go(x)}};return p}function oAe(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Vs(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:t2(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function nY(t,e,r="/"){return lAe(t,e,r,!1)}function lAe(t,e,r,n){let a=typeof e=="string"?Jv(e):e,s=uA(a.pathname||"/",r);if(s==null)return null;let o=aY(t);cAe(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=yAe(s);l=xAe(o[c],u,n)}return l}function aY(t,e=[],r=[],n="",a=!1){let s=(o,l,c=a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Vs(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let f=Xh([n,d.relativePath]),A=r.concat(d);o.children&&o.children.length>0&&(Vs(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),aY(o.children,e,A,f,c)),!(o.path==null&&!o.index)&&e.push({path:f,score:pAe(f,o.index),routesMeta:A})};return t.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let u of sY(o.path))s(o,l,!0,u)}),e}function sY(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=sY(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function cAe(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:gAe(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var uAe=/^:[\w-]+$/,dAe=3,fAe=2,hAe=1,AAe=10,mAe=-2,NU=t=>t==="*";function pAe(t,e){let r=t.split("/"),n=r.length;return r.some(NU)&&(n+=mAe),e&&(n+=fAe),r.filter(a=>!NU(a)).reduce((a,s)=>a+(uAe.test(s)?dAe:s===""?hAe:AAe),n)}function gAe(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function xAe(t,e,r=!1){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=VE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),A=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=VE({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Xh([s,f.pathname]),pathnameBase:CAe(Xh([s,f.pathnameBase])),route:A}),f.pathnameBase!=="/"&&(s=Xh([s,f.pathnameBase]))}return o}function VE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=vAe(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},A)=>{if(d==="*"){let m=l[A]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=l[A];return f&&!h?u[d]=void 0:u[d]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function vAe(t,e=!1,r=!0){mf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function yAe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mf(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function uA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function bAe(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Jv(t):t;return{pathname:r?r.startsWith("/")?r:wAe(r,e):e,search:_Ae(n),hash:EAe(a)}}function wAe(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function i3(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NAe(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function nD(t){let e=NAe(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aD(t,e,r,n=!1){let a;typeof t=="string"?a=Jv(t):(a={...t},Vs(!a.pathname||!a.pathname.includes("?"),i3("?","pathname","search",a)),Vs(!a.pathname||!a.pathname.includes("#"),i3("#","pathname","hash",a)),Vs(!a.search||!a.search.includes("#"),i3("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let A=o.split("/");for(;A[0]==="..";)A.shift(),f-=1;a.pathname=A.join("/")}l=f>=0?e[f]:"/"}let c=bAe(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Xh=t=>t.join("/").replace(/\/\/+/g,"/"),CAe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_Ae=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EAe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SAe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var iY=["POST","PUT","PATCH","DELETE"];new Set(iY);var IAe=["GET",...iY];new Set(IAe);var Zv=g.createContext(null);Zv.displayName="DataRouter";var sj=g.createContext(null);sj.displayName="DataRouterState";g.createContext(!1);var oY=g.createContext({isTransitioning:!1});oY.displayName="ViewTransition";var jAe=g.createContext(new Map);jAe.displayName="Fetchers";var PAe=g.createContext(null);PAe.displayName="Await";var vf=g.createContext(null);vf.displayName="Navigation";var cw=g.createContext(null);cw.displayName="Location";var yf=g.createContext({outlet:null,matches:[],isDataRoute:!1});yf.displayName="Route";var sD=g.createContext(null);sD.displayName="RouteError";function BAe(t,{relative:e}={}){Vs(e1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(vf),{hash:a,pathname:s,search:o}=dw(t,{relative:e}),l=s;return r!=="/"&&(l=s==="/"?r:Xh([r,s])),n.createHref({pathname:l,search:o,hash:a})}function e1(){return g.useContext(cw)!=null}function EA(){return Vs(e1(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(cw).location}var lY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cY(t){g.useContext(vf).static||g.useLayoutEffect(t)}function uw(){let{isDataRoute:t}=g.useContext(yf);return t?KAe():TAe()}function TAe(){Vs(e1(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Zv),{basename:e,navigator:r}=g.useContext(vf),{matches:n}=g.useContext(yf),{pathname:a}=EA(),s=JSON.stringify(nD(n)),o=g.useRef(!1);return cY(()=>{o.current=!0}),g.useCallback((c,u={})=>{if(mf(o.current,lY),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=aD(c,JSON.parse(s),a,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,s,a,t])}var kAe=g.createContext(null);function FAe(t){let e=g.useContext(yf).outlet;return e&&g.createElement(kAe.Provider,{value:t},e)}function dw(t,{relative:e}={}){let{matches:r}=g.useContext(yf),{pathname:n}=EA(),a=JSON.stringify(nD(r));return g.useMemo(()=>aD(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function OAe(t,e){return uY(t,e)}function uY(t,e,r,n){var v;Vs(e1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(vf),{matches:s}=g.useContext(yf),o=s[s.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let y=d&&d.path||"";dY(c,!d||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let f=EA(),A;if(e){let y=typeof e=="string"?Jv(e):e;Vs(u==="/"||((v=y.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=f;let h=A.pathname||"/",m=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=nY(t,{pathname:m});mf(d||p!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),mf(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=UAe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Xh([u,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Xh([u,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,r,n);return e&&x?g.createElement(cw.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},x):x}function DAe(){let t=GAe(),e=SAe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:a},r):null,o)}var RAe=g.createElement(DAe,null),MAe=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?g.createElement(yf.Provider,{value:this.props.routeContext},g.createElement(sD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LAe({routeContext:t,match:e,children:r}){let n=g.useContext(Zv);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(yf.Provider,{value:t},r)}function UAe(t,e=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Vs(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,A=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||A){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,u,d)=>{let f,A=!1,h=null,m=null;r&&(f=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||RAe,o&&(l<0&&d===0?(dY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,m=null):l===d&&(A=!0,m=u.route.hydrateFallbackElement||null)));let p=e.concat(a.slice(0,d+1)),x=()=>{let v;return f?v=h:A?v=m:u.route.Component?v=g.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,g.createElement(LAe,{match:u,routeContext:{outlet:c,matches:p,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?g.createElement(MAe,{location:r.location,revalidation:r.revalidation,component:h,error:f,children:x(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):x()},null)}function iD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QAe(t){let e=g.useContext(Zv);return Vs(e,iD(t)),e}function VAe(t){let e=g.useContext(sj);return Vs(e,iD(t)),e}function HAe(t){let e=g.useContext(yf);return Vs(e,iD(t)),e}function oD(t){let e=HAe(t),r=e.matches[e.matches.length-1];return Vs(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function $Ae(){return oD("useRouteId")}function GAe(){var n;let t=g.useContext(sD),e=VAe("useRouteError"),r=oD("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function KAe(){let{router:t}=QAe("useNavigate"),e=oD("useNavigate"),r=g.useRef(!1);return cY(()=>{r.current=!0}),g.useCallback(async(a,s={})=>{mf(r.current,lY),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...s}))},[t,e])}var CU={};function dY(t,e,r){!e&&!CU[t]&&(CU[t]=!0,mf(!1,r))}g.memo(qAe);function qAe({routes:t,future:e,state:r}){return uY(t,void 0,r,e)}function Bh({to:t,replace:e,state:r,relative:n}){Vs(e1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=g.useContext(vf);mf(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(yf),{pathname:o}=EA(),l=uw(),c=aD(t,nD(s),o,n==="path"),u=JSON.stringify(c);return g.useEffect(()=>{l(JSON.parse(u),{replace:e,state:r,relative:n})},[l,u,n,e,r]),null}function fY(t){return FAe(t.context)}function Fn(t){Vs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zAe({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Vs(!e1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=g.useMemo(()=>({basename:o,navigator:a,static:s,future:{}}),[o,a,s]);typeof r=="string"&&(r=Jv(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:A="default"}=r,h=g.useMemo(()=>{let m=uA(c,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:f,key:A},navigationType:n}},[o,c,u,d,f,A,n]);return mf(h!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:g.createElement(vf.Provider,{value:l},g.createElement(cw.Provider,{children:e,value:h}))}function WAe({children:t,location:e}){return OAe(yT(t),e)}function yT(t,e=[]){let r=[];return g.Children.forEach(t,(n,a)=>{if(!g.isValidElement(n))return;let s=[...e,a];if(n.type===g.Fragment){r.push.apply(r,yT(n.props.children,s));return}Vs(n.type===Fn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=yT(n.props.children,s)),r.push(o)}),r}var Q_="get",V_="application/x-www-form-urlencoded";function ij(t){return t!=null&&typeof t.tagName=="string"}function XAe(t){return ij(t)&&t.tagName.toLowerCase()==="button"}function YAe(t){return ij(t)&&t.tagName.toLowerCase()==="form"}function JAe(t){return ij(t)&&t.tagName.toLowerCase()==="input"}function ZAe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function e0e(t,e){return t.button===0&&(!e||e==="_self")&&!ZAe(t)}var KN=null;function t0e(){if(KN===null)try{new FormData(document.createElement("form"),0),KN=!1}catch{KN=!0}return KN}var r0e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o3(t){return t!=null&&!r0e.has(t)?(mf(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${V_}"`),null):t}function n0e(t,e){let r,n,a,s,o;if(YAe(t)){let l=t.getAttribute("action");n=l?uA(l,e):null,r=t.getAttribute("method")||Q_,a=o3(t.getAttribute("enctype"))||V_,s=new FormData(t)}else if(XAe(t)||JAe(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?uA(c,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Q_,a=o3(t.getAttribute("formenctype"))||o3(l.getAttribute("enctype"))||V_,s=new FormData(l,t),!t0e()){let{name:u,type:d,value:f}=t;if(d==="image"){let A=u?`${u}.`:"";s.append(`${A}x`,"0"),s.append(`${A}y`,"0")}else u&&s.append(u,f)}}else{if(ij(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Q_,n=null,a=V_,o=t}return s&&a==="text/plain"&&(o=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lD(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function a0e(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&uA(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function s0e(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function i0e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function o0e(t,e,r){let n=await Promise.all(t.map(async a=>{let s=e.routes[a.route.id];if(s){let o=await s0e(s,r);return o.links?o.links():[]}return[]}));return d0e(n.flat(1).filter(i0e).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function _U(t,e,r,n,a,s){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let A=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function l0e(t,e,{includeHydrateFallback:r}={}){return c0e(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function c0e(t){return[...new Set(t)]}function u0e(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function d0e(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let s=JSON.stringify(u0e(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function hY(){let t=g.useContext(Zv);return lD(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function f0e(){let t=g.useContext(sj);return lD(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cD=g.createContext(void 0);cD.displayName="FrameworkContext";function AY(){let t=g.useContext(cD);return lD(t,"You must render this element inside a <HydratedRouter> element"),t}function h0e(t,e){let r=g.useContext(cD),[n,a]=g.useState(!1),[s,o]=g.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,A=g.useRef(null);g.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let p=v=>{v.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(p,{threshold:.5});return A.current&&x.observe(A.current),()=>{x.disconnect()}}},[t]),g.useEffect(()=>{if(n){let p=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(p)}}},[n]);let h=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?t!=="intent"?[s,A,{}]:[s,A,{onFocus:Y1(l,h),onBlur:Y1(c,m),onMouseEnter:Y1(u,h),onMouseLeave:Y1(d,m),onTouchStart:Y1(f,h)}]:[!1,A,{}]}function Y1(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function A0e({page:t,...e}){let{router:r}=hY(),n=g.useMemo(()=>nY(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?g.createElement(p0e,{page:t,matches:n,...e}):null}function m0e(t){let{manifest:e,routeModules:r}=AY(),[n,a]=g.useState([]);return g.useEffect(()=>{let s=!1;return o0e(t,e,r).then(o=>{s||a(o)}),()=>{s=!0}},[t,e,r]),n}function p0e({page:t,matches:e,...r}){let n=EA(),{manifest:a,routeModules:s}=AY(),{basename:o}=hY(),{loaderData:l,matches:c}=f0e(),u=g.useMemo(()=>_U(t,e,c,a,n,"data"),[t,e,c,a,n]),d=g.useMemo(()=>_U(t,e,c,a,n,"assets"),[t,e,c,a,n]),f=g.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let m=new Set,p=!1;if(e.forEach(v=>{var b;let y=a.routes[v.route.id];!y||!y.hasLoader||(!u.some(w=>w.route.id===v.route.id)&&v.route.id in l&&((b=s[v.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?p=!0:m.add(v.route.id))}),m.size===0)return[];let x=a0e(t,o,"data");return p&&m.size>0&&x.searchParams.set("_routes",e.filter(v=>m.has(v.route.id)).map(v=>v.route.id).join(",")),[x.pathname+x.search]},[o,l,n,a,u,e,t,s]),A=g.useMemo(()=>l0e(d,a),[d,a]),h=m0e(d);return g.createElement(g.Fragment,null,f.map(m=>g.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),A.map(m=>g.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),h.map(({key:m,link:p})=>g.createElement("link",{key:m,nonce:r.nonce,...p})))}function g0e(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var mY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mY&&(window.__reactRouterVersion="7.8.1")}catch{}function x0e({basename:t,children:e,window:r}){let n=g.useRef();n.current==null&&(n.current=aAe({window:r,v5Compat:!0}));let a=n.current,[s,o]=g.useState({action:a.action,location:a.location}),l=g.useCallback(c=>{g.startTransition(()=>o(c))},[o]);return g.useLayoutEffect(()=>a.listen(l),[a,l]),g.createElement(zAe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a})}var pY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gY=g.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...A},h){let{basename:m}=g.useContext(vf),p=typeof u=="string"&&pY.test(u),x,v=!1;if(typeof u=="string"&&p&&(x=u,mY))try{let E=new URL(window.location.href),F=u.startsWith("//")?new URL(E.protocol+u):new URL(u),k=uA(F.pathname,m);F.origin===E.origin&&k!=null?u=k+F.search+F.hash:v=!0}catch{mf(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=BAe(u,{relative:a}),[b,w,j]=h0e(n,A),I=b0e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function _(E){e&&e(E),E.defaultPrevented||I(E)}let S=g.createElement("a",{...A,...j,href:x||y,onClick:v||s?e:_,ref:g0e(h,w),target:c,"data-discover":!p&&r==="render"?"true":void 0});return b&&!p?g.createElement(g.Fragment,null,S,g.createElement(A0e,{page:y})):S});gY.displayName="Link";var pn=g.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:o,viewTransition:l,children:c,...u},d){let f=dw(o,{relative:u.relative}),A=EA(),h=g.useContext(sj),{navigator:m,basename:p}=g.useContext(vf),x=h!=null&&E0e(f)&&l===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,y=A.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&p&&(b=uA(b,p)||b);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=y===v||!a&&y.startsWith(v)&&y.charAt(w)==="/",I=b!=null&&(b===v||!a&&b.startsWith(v)&&b.charAt(v.length)==="/"),_={isActive:j,isPending:I,isTransitioning:x},S=j?e:void 0,E;typeof n=="function"?E=n(_):E=[n,j?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(_):s;return g.createElement(gY,{...u,"aria-current":S,className:E,ref:d,style:F,to:o,viewTransition:l},typeof c=="function"?c(_):c)});pn.displayName="NavLink";var v0e=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:s,method:o=Q_,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...A},h)=>{let m=C0e(),p=_0e(l,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&pY.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let w=b.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||o;m(w||b.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:a,state:s,relative:u,preventScrollReset:d,viewTransition:f})};return g.createElement("form",{ref:h,method:x,action:p,onSubmit:n?c:y,...A,"data-discover":!v&&t==="render"?"true":void 0})});v0e.displayName="Form";function y0e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xY(t){let e=g.useContext(Zv);return Vs(e,y0e(t)),e}function b0e(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:o}={}){let l=uw(),c=EA(),u=dw(t,{relative:s});return g.useCallback(d=>{if(e0e(d,e)){d.preventDefault();let f=r!==void 0?r:t2(c)===t2(u);l(t,{replace:f,state:n,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,u,r,n,e,t,a,s,o])}var w0e=0,N0e=()=>`__${String(++w0e)}__`;function C0e(){let{router:t}=xY("useSubmit"),{basename:e}=g.useContext(vf),r=$Ae();return g.useCallback(async(n,a={})=>{let{action:s,method:o,encType:l,formData:c,body:u}=n0e(n,e);if(a.navigate===!1){let d=a.fetcherKey||N0e();await t.fetch(d,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await t.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:u,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function _0e(t,{relative:e}={}){let{basename:r}=g.useContext(vf),n=g.useContext(yf);Vs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...dw(t||".",{relative:e})},o=EA();if(t==null){s.search=o.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Xh([r,s.pathname])),t2(s)}function E0e(t,{relative:e}={}){let r=g.useContext(oY);Vs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=xY("useViewTransitionState"),a=dw(t,{relative:e});if(!r.isTransitioning)return!1;let s=uA(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=uA(r.nextLocation.pathname,n)||r.nextLocation.pathname;return VE(a.pathname,o)!=null||VE(a.pathname,s)!=null}function xn(t,e){if(!t)return!1;const r=String(e);if(Array.isArray(t))return t.map(String).includes(r);const n=String(t);return n===r||n==="vendedor"&&r==="vendedor_pollo"}var EU={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vY=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},S0e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let A=(l&15)<<2|u>>6,h=u&63;c||(h=64,o||(A=64)),n.push(r[d],r[f],r[A],r[h])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vY(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S0e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new I0e;const A=s<<2|l>>4;if(n.push(A),u!==64){const h=l<<4&240|u>>2;if(n.push(h),f!==64){const m=u<<6&192|f;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class I0e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j0e=function(t){const e=vY(t);return yY.encodeByteArray(e,!0)},HE=function(t){return j0e(t).replace(/\./g,"")},bY=function(t){try{return yY.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0e=()=>P0e().__FIREBASE_DEFAULTS__,T0e=()=>{if(typeof process>"u"||typeof EU>"u")return;const t=EU.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},k0e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bY(t[1]);return e&&JSON.parse(e)},oj=()=>{try{return B0e()||T0e()||k0e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wY=t=>{var e,r;return(r=(e=oj())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},F0e=t=>{const e=wY(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},NY=()=>{var t;return(t=oj())===null||t===void 0?void 0:t.config},CY=t=>{var e;return(e=oj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0e(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[HE(JSON.stringify(r)),HE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function R0e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_o())}function M0e(){var t;const e=(t=oj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L0e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U0e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Q0e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function V0e(){const t=_o();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _Y(){return!M0e()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EY(){try{return typeof indexedDB=="object"}catch{return!1}}function H0e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0e="FirebaseError";class SA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=$0e,Object.setPrototypeOf(this,SA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fw.prototype.create)}}class fw{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?G0e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new SA(a,l,n)}}function G0e(t,e){return t.replace(K0e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const K0e=/\{\$([^}]+)}/g;function q0e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function r2(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(SU(s)&&SU(o)){if(!r2(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function SU(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function By(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Ty(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function z0e(t,e){const r=new W0e(t,e);return r.subscribe.bind(r)}class W0e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");X0e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=l3),a.error===void 0&&(a.error=l3),a.complete===void 0&&(a.complete=l3);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X0e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function l3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){return t&&t._delegate?t._delegate:t}class Wp{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y0e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new O0e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Z0e(e))try{this.getOrInitializeService({instanceIdentifier:tp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=tp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tp){return this.instances.has(e)}getOptions(e=tp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:J0e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=tp){return this.component?this.component.multipleInstances?e:tp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function J0e(t){return t===tp?void 0:t}function Z0e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Y0e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aa;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(aa||(aa={}));const tme={debug:aa.DEBUG,verbose:aa.VERBOSE,info:aa.INFO,warn:aa.WARN,error:aa.ERROR,silent:aa.SILENT},rme=aa.INFO,nme={[aa.DEBUG]:"log",[aa.VERBOSE]:"log",[aa.INFO]:"info",[aa.WARN]:"warn",[aa.ERROR]:"error"},ame=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=nme[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uD=class{constructor(e){this.name=e,this._logLevel=rme,this._logHandler=ame,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in aa))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tme[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,aa.DEBUG,...e),this._logHandler(this,aa.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,aa.VERBOSE,...e),this._logHandler(this,aa.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,aa.INFO,...e),this._logHandler(this,aa.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,aa.WARN,...e),this._logHandler(this,aa.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,aa.ERROR,...e),this._logHandler(this,aa.ERROR,...e)}};const sme=(t,e)=>e.some(r=>t instanceof r);let IU,jU;function ime(){return IU||(IU=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ome(){return jU||(jU=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SY=new WeakMap,bT=new WeakMap,IY=new WeakMap,c3=new WeakMap,dD=new WeakMap;function lme(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(tm(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&SY.set(r,t)}).catch(()=>{}),dD.set(e,t),e}function cme(t){if(bT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});bT.set(t,e)}let wT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return bT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IY.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tm(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ume(t){wT=t(wT)}function dme(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(u3(this),e,...r);return IY.set(n,e.sort?e.sort():[e]),tm(n)}:ome().includes(t)?function(...e){return t.apply(u3(this),e),tm(SY.get(this))}:function(...e){return tm(t.apply(u3(this),e))}}function fme(t){return typeof t=="function"?dme(t):(t instanceof IDBTransaction&&cme(t),sme(t,ime())?new Proxy(t,wT):t)}function tm(t){if(t instanceof IDBRequest)return lme(t);if(c3.has(t))return c3.get(t);const e=fme(t);return e!==t&&(c3.set(t,e),dD.set(e,t)),e}const u3=t=>dD.get(t);function hme(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=tm(o);return n&&o.addEventListener("upgradeneeded",c=>{n(tm(o.result),c.oldVersion,c.newVersion,tm(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ame=["get","getKey","getAll","getAllKeys","count"],mme=["put","add","delete","clear"],d3=new Map;function PU(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(d3.get(e))return d3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=mme.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Ame.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return d3.set(e,s),s}ume(t=>({...t,get:(e,r,n)=>PU(e,r)||t.get(e,r,n),has:(e,r)=>!!PU(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(gme(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function gme(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const NT="@firebase/app",BU="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new uD("@firebase/app"),xme="@firebase/app-compat",vme="@firebase/analytics-compat",yme="@firebase/analytics",bme="@firebase/app-check-compat",wme="@firebase/app-check",Nme="@firebase/auth",Cme="@firebase/auth-compat",_me="@firebase/database",Eme="@firebase/data-connect",Sme="@firebase/database-compat",Ime="@firebase/functions",jme="@firebase/functions-compat",Pme="@firebase/installations",Bme="@firebase/installations-compat",Tme="@firebase/messaging",kme="@firebase/messaging-compat",Fme="@firebase/performance",Ome="@firebase/performance-compat",Dme="@firebase/remote-config",Rme="@firebase/remote-config-compat",Mme="@firebase/storage",Lme="@firebase/storage-compat",Ume="@firebase/firestore",Qme="@firebase/vertexai-preview",Vme="@firebase/firestore-compat",Hme="firebase",$me="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="[DEFAULT]",Gme={[NT]:"fire-core",[xme]:"fire-core-compat",[yme]:"fire-analytics",[vme]:"fire-analytics-compat",[wme]:"fire-app-check",[bme]:"fire-app-check-compat",[Nme]:"fire-auth",[Cme]:"fire-auth-compat",[_me]:"fire-rtdb",[Eme]:"fire-data-connect",[Sme]:"fire-rtdb-compat",[Ime]:"fire-fn",[jme]:"fire-fn-compat",[Pme]:"fire-iid",[Bme]:"fire-iid-compat",[Tme]:"fire-fcm",[kme]:"fire-fcm-compat",[Fme]:"fire-perf",[Ome]:"fire-perf-compat",[Dme]:"fire-rc",[Rme]:"fire-rc-compat",[Mme]:"fire-gcs",[Lme]:"fire-gcs-compat",[Ume]:"fire-fst",[Vme]:"fire-fst-compat",[Qme]:"fire-vertex","fire-js":"fire-js",[Hme]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map,_T=new Map,ET=new Map;function TU(t,e){try{t.container.addComponent(e)}catch(r){dA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _v(t){const e=t.name;if(ET.has(e))return dA.debug(`There were multiple attempts to register component ${e}.`),!1;ET.set(e,t);for(const r of Cv.values())TU(r,t);for(const r of _T.values())TU(r,t);return!0}function fD(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $f(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kme={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rm=new fw("app","Firebase",Kme);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qme{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rm.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=$me;function hD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:CT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw rm.create("bad-app-name",{appName:String(a)});if(r||(r=NY()),!r)throw rm.create("no-options");const s=Cv.get(a);if(s){if(r2(r,s.options)&&r2(n,s.config))return s;throw rm.create("duplicate-app",{appName:a})}const o=new eme(a);for(const c of ET.values())o.addComponent(c);const l=new qme(r,n,o);return Cv.set(a,l),l}function AD(t=CT){const e=Cv.get(t);if(!e&&t===CT&&NY())return hD();if(!e)throw rm.create("no-app",{appName:t});return e}async function zme(t){let e=!1;const r=t.name;Cv.has(r)?(e=!0,Cv.delete(r)):_T.has(r)&&t.decRefCount()<=0&&(_T.delete(r),e=!0),e&&(await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function nm(t,e,r){var n;let a=(n=Gme[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${a}" with version "${e}":`];s&&l.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dA.warn(l.join(" "));return}_v(new Wp(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme="firebase-heartbeat-database",Xme=1,n2="firebase-heartbeat-store";let f3=null;function jY(){return f3||(f3=hme(Wme,Xme,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(n2)}catch(r){console.warn(r)}}}}).catch(t=>{throw rm.create("idb-open",{originalErrorMessage:t.message})})),f3}async function Yme(t){try{const r=(await jY()).transaction(n2),n=await r.objectStore(n2).get(PY(t));return await r.done,n}catch(e){if(e instanceof SA)dA.warn(e.message);else{const r=rm.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dA.warn(r.message)}}}async function kU(t,e){try{const n=(await jY()).transaction(n2,"readwrite");await n.objectStore(n2).put(e,PY(t)),await n.done}catch(r){if(r instanceof SA)dA.warn(r.message);else{const n=rm.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});dA.warn(n.message)}}}function PY(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jme=1024,Zme=30*24*60*60*1e3;class epe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new rpe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FU();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Zme}),this._storage.overwrite(this._heartbeatsCache))}catch(n){dA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=FU(),{heartbeatsToSend:n,unsentEntries:a}=tpe(this._heartbeatsCache.heartbeats),s=HE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return dA.warn(r),""}}}function FU(){return new Date().toISOString().substring(0,10)}function tpe(t,e=Jme){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),OU(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),OU(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class rpe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EY()?H0e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Yme(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return kU(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function OU(t){return HE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function npe(t){_v(new Wp("platform-logger",e=>new pme(e),"PRIVATE")),_v(new Wp("heartbeat",e=>new epe(e),"PRIVATE")),nm(NT,BU,t),nm(NT,BU,"esm2017"),nm("fire-js","")}npe("");function mD(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function BY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ape=BY,TY=new fw("auth","Firebase",BY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new uD("@firebase/auth");function spe(t,...e){$E.logLevel<=aa.WARN&&$E.warn(`Auth (${t1}): ${t}`,...e)}function H_(t,...e){$E.logLevel<=aa.ERROR&&$E.error(`Auth (${t1}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t,...e){throw pD(t,...e)}function Zf(t,...e){return pD(t,...e)}function kY(t,e,r){const n=Object.assign(Object.assign({},ape()),{[e]:r});return new fw("auth","Firebase",n).create(e,{appName:t.name})}function Yh(t){return kY(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pD(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return TY.create(t,...e)}function In(t,e,...r){if(!t)throw pD(e,...r)}function Qh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw H_(e),new Error(e)}function fA(t,e){t||Qh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ipe(){return DU()==="http:"||DU()==="https:"}function DU(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ope(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ipe()||U0e()||"connection"in navigator)?navigator.onLine:!0}function lpe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,r){this.shortDelay=e,this.longDelay=r,fA(r>e,"Short delay should be less than long delay!"),this.isMobile=R0e()||Q0e()}get(){return ope()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){fA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe=new Aw(3e4,6e4);function IA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jA(t,e,r,n,a={}){return OY(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=hw(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return L0e()||(u.referrerPolicy="no-referrer"),FY.fetch()(DY(t,t.config.apiHost,r,l),u)})}async function OY(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},cpe),e);try{const a=new fpe(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qN(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qN(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qN(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qN(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kY(t,d,u);pf(t,d)}}catch(a){if(a instanceof SA)throw a;pf(t,"network-request-failed",{message:String(a)})}}async function mw(t,e,r,n,a={}){const s=await jA(t,e,r,n,a);return"mfaPendingCredential"in s&&pf(t,"multi-factor-auth-required",{_serverResponse:s}),s}function DY(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?gD(t.config,a):`${t.config.apiScheme}://${a}`}function dpe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fpe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Zf(this.auth,"network-request-failed")),upe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qN(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Zf(t,e,n);return a.customData._tokenResponse=r,a}function RU(t){return t!==void 0&&t.enterprise!==void 0}class hpe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return dpe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ape(t,e){return jA(t,"GET","/v2/recaptchaConfig",IA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpe(t,e){return jA(t,"POST","/v1/accounts:delete",e)}async function RY(t,e){return jA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ppe(t,e=!1){const r=oi(t),n=await r.getIdToken(e),a=xD(n);In(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:lb(h3(a.auth_time)),issuedAtTime:lb(h3(a.iat)),expirationTime:lb(h3(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function h3(t){return Number(t)*1e3}function xD(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return H_("JWT malformed, contained fewer than 3 sections"),null;try{const a=bY(r);return a?JSON.parse(a):(H_("Failed to decode base64 JWT payload"),null)}catch(a){return H_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function MU(t){const e=xD(t);return In(e,"internal-error"),In(typeof e.exp<"u","internal-error"),In(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof SA&&gpe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function gpe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xpe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=lb(this.lastLoginAt),this.creationTime=lb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t){var e;const r=t.auth,n=await t.getIdToken(),a=await a2(t,RY(r,{idToken:n}));In(a==null?void 0:a.users.length,r,"internal-error");const s=a.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?MY(s.providerUserInfo):[],l=ype(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new IT(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function vpe(t){const e=oi(t);await GE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ype(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function MY(t){return t.map(e=>{var{providerId:r}=e,n=mD(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bpe(t,e){const r=await OY(t,{},async()=>{const n=hw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=DY(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",FY.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function wpe(t,e){return jA(t,"POST","/v2/accounts:revokeToken",IA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){In(e.idToken,"internal-error"),In(typeof e.idToken<"u","internal-error"),In(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MU(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){In(e.length!==0,"internal-error");const r=MU(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(In(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await bpe(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new sv;return n&&(In(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(In(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(In(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sv,this.toJSON())}_performRefresh(){return Qh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e){In(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vh{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,s=mD(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xpe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new IT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await a2(this,this.stsTokenManager.getToken(this.auth,e));return In(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ppe(this,e)}reload(){return vpe(this)}_assign(e){this!==e&&(In(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){In(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await GE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($f(this.auth.app))return Promise.reject(Yh(this.auth));const e=await this.getIdToken();return await a2(this,mpe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,s,o,l,c,u,d;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,A=(a=r.email)!==null&&a!==void 0?a:void 0,h=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=r.photoURL)!==null&&o!==void 0?o:void 0,p=(l=r.tenantId)!==null&&l!==void 0?l:void 0,x=(c=r._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=r.createdAt)!==null&&u!==void 0?u:void 0,y=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:w,isAnonymous:j,providerData:I,stsTokenManager:_}=r;In(b&&_,e,"internal-error");const S=sv.fromJSON(this.name,_);In(typeof b=="string",e,"internal-error"),n0(f,e.name),n0(A,e.name),In(typeof w=="boolean",e,"internal-error"),In(typeof j=="boolean",e,"internal-error"),n0(h,e.name),n0(m,e.name),n0(p,e.name),n0(x,e.name),n0(v,e.name),n0(y,e.name);const E=new Vh({uid:b,auth:e,email:A,emailVerified:w,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:v,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(F=>Object.assign({},F))),x&&(E._redirectEventId=x),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new sv;a.updateFromServerResponse(r);const s=new Vh({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await GE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];In(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?MY(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new sv;l.updateFromIdToken(n);const c=new Vh({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new IT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Map;function Hh(t){fA(t instanceof Function,"Expected a class definition");let e=LU.get(t);return e?(fA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LU.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}LY.type="NONE";const UU=LY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e,r){return`firebase:${t}:${e}:${r}`}class iv{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=$_(this.userKey,a.apiKey,s),this.fullPersistenceKey=$_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new iv(Hh(UU),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Hh(UU);const o=$_(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){const f=Vh._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new iv(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new iv(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GY(e))return"Blackberry";if(KY(e))return"Webos";if(QY(e))return"Safari";if((e.includes("chrome/")||VY(e))&&!e.includes("edge/"))return"Chrome";if($Y(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function UY(t=_o()){return/firefox\//i.test(t)}function QY(t=_o()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VY(t=_o()){return/crios\//i.test(t)}function HY(t=_o()){return/iemobile/i.test(t)}function $Y(t=_o()){return/android/i.test(t)}function GY(t=_o()){return/blackberry/i.test(t)}function KY(t=_o()){return/webos/i.test(t)}function vD(t=_o()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Npe(t=_o()){var e;return vD(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Cpe(){return V0e()&&document.documentMode===10}function qY(t=_o()){return vD(t)||$Y(t)||KY(t)||GY(t)||/windows phone/i.test(t)||HY(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t,e=[]){let r;switch(t){case"Browser":r=QU(_o());break;case"Worker":r=`${QU(_o())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${t1}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _pe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Epe(t,e={}){return jA(t,"GET","/v2/passwordPolicy",IA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe=6;class Ipe{constructor(e){var r,n,a,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Spe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,s,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(r=c.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(a=c.containsLowercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jpe{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VU(this),this.idTokenSubscription=new VU(this),this.beforeStateQueue=new _pe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Hh(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await iv.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await RY(this,{idToken:e}),n=await Vh._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($f(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=a==null?void 0:a._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(a=c.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return In(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await GE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lpe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($f(this.app))return Promise.reject(Yh(this));const r=e?oi(e):null;return r&&In(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&In(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $f(this.app)?Promise.reject(Yh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $f(this.app)?Promise.reject(Yh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Epe(this),r=new Ipe(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fw("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await wpe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Hh(e)||this._popupRedirectResolver;In(r,this,"argument-error"),this.redirectPersistenceManager=await iv.create(this,[Hh(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(In(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return In(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&spe(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Tm(t){return oi(t)}class VU{constructor(e){this.auth=e,this.observer=null,this.addObserver=z0e(r=>this.observer=r)}get next(){return In(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ppe(t){lj=t}function WY(t){return lj.loadJS(t)}function Bpe(){return lj.recaptchaEnterpriseScript}function Tpe(){return lj.gapiScript}function kpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Fpe="recaptcha-enterprise",Ope="NO_RECAPTCHA";class Dpe{constructor(e){this.type=Fpe,this.auth=Tm(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ape(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new hpe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;RU(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ope)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&RU(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Bpe();c.length!==0&&(c+=l),WY(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function HU(t,e,r,n=!1){const a=new Dpe(t);let s;try{s=await a.verify(r)}catch{s=await a.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function KE(t,e,r,n){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await HU(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await HU(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rpe(t,e){const r=fD(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(r2(s,e??{}))return a;pf(a,"already-initialized")}return r.initialize({options:e})}function Mpe(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Hh);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Lpe(t,e,r){const n=Tm(t);In(n._canInitEmulator,n,"emulator-config-failed"),In(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=XY(e),{host:o,port:l}=Upe(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${s}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})}),Qpe()}function XY(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Upe(t){const e=XY(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:$U(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:$U(o)}}}function $U(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Qpe(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Qh("not implemented")}_getIdTokenResponse(e){return Qh("not implemented")}_linkToIdToken(e,r){return Qh("not implemented")}_getReauthenticationResolver(e){return Qh("not implemented")}}async function Vpe(t,e){return jA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hpe(t,e){return mw(t,"POST","/v1/accounts:signInWithPassword",IA(t,e))}async function $pe(t,e){return jA(t,"POST","/v1/accounts:sendOobCode",IA(t,e))}async function Gpe(t,e){return $pe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kpe(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",IA(t,e))}async function qpe(t,e){return mw(t,"POST","/v1/accounts:signInWithEmailLink",IA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2 extends yD{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new s2(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new s2(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KE(e,r,"signInWithPassword",Hpe);case"emailLink":return Kpe(e,{email:this._email,oobCode:this._password});default:pf(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return KE(e,n,"signUpPassword",Vpe);case"emailLink":return qpe(e,{idToken:r,email:this._email,oobCode:this._password});default:pf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(t,e){return mw(t,"POST","/v1/accounts:signInWithIdp",IA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe="http://localhost";class Xp extends yD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Xp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):pf("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,s=mD(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Xp(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return ov(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ov(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ov(e,r)}buildRequest(){const e={requestUri:zpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=hw(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xpe(t){const e=By(Ty(t)).link,r=e?By(Ty(e)).deep_link_id:null,n=By(Ty(t)).deep_link_id;return(n?By(Ty(n)).link:null)||n||r||e||t}class bD{constructor(e){var r,n,a,s,o,l;const c=By(Ty(e)),u=(r=c.apiKey)!==null&&r!==void 0?r:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,f=Wpe((a=c.mode)!==null&&a!==void 0?a:null);In(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=Xpe(e);try{return new bD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.providerId=r1.PROVIDER_ID}static credential(e,r){return s2._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bD.parseLink(r);return In(n,"argument-error"),s2._fromEmailAndCode(e,n.code,n.tenantId)}}r1.PROVIDER_ID="password";r1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";r1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends YY{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0 extends pw{constructor(){super("facebook.com")}static credential(e){return Xp._fromParams({providerId:I0.PROVIDER_ID,signInMethod:I0.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return I0.credentialFromTaggedObject(e)}static credentialFromError(e){return I0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return I0.credential(e.oauthAccessToken)}catch{return null}}}I0.FACEBOOK_SIGN_IN_METHOD="facebook.com";I0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends pw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Xp._fromParams({providerId:j0.PROVIDER_ID,signInMethod:j0.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return j0.credentialFromTaggedObject(e)}static credentialFromError(e){return j0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return j0.credential(r,n)}catch{return null}}}j0.GOOGLE_SIGN_IN_METHOD="google.com";j0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends pw{constructor(){super("github.com")}static credential(e){return Xp._fromParams({providerId:P0.PROVIDER_ID,signInMethod:P0.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return P0.credentialFromTaggedObject(e)}static credentialFromError(e){return P0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return P0.credential(e.oauthAccessToken)}catch{return null}}}P0.GITHUB_SIGN_IN_METHOD="github.com";P0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends pw{constructor(){super("twitter.com")}static credential(e,r){return Xp._fromParams({providerId:B0.PROVIDER_ID,signInMethod:B0.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return B0.credentialFromTaggedObject(e)}static credentialFromError(e){return B0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return B0.credential(r,n)}catch{return null}}}B0.TWITTER_SIGN_IN_METHOD="twitter.com";B0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ype(t,e){return mw(t,"POST","/v1/accounts:signUp",IA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Vh._fromIdTokenResponse(e,n,a),o=GU(n);return new Yp({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=GU(n);return new Yp({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function GU(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends SA{constructor(e,r,n,a){var s;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,qE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new qE(e,r,n,a)}}function JY(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qE._fromErrorAndOperation(t,s,e,n):s})}async function Jpe(t,e,r=!1){const n=await a2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Yp._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zpe(t,e,r=!1){const{auth:n}=t;if($f(n.app))return Promise.reject(Yh(n));const a="reauthenticate";try{const s=await a2(t,JY(n,a,e,t),r);In(s.idToken,n,"internal-error");const o=xD(s.idToken);In(o,n,"internal-error");const{sub:l}=o;return In(t.uid===l,n,"user-mismatch"),Yp._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pf(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZY(t,e,r=!1){if($f(t.app))return Promise.reject(Yh(t));const n="signIn",a=await JY(t,n,e),s=await Yp._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function ege(t,e){return ZY(Tm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJ(t){const e=Tm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tge(t,e,r){const n=Tm(t);await KE(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Gpe)}async function rge(t,e,r){if($f(t.app))return Promise.reject(Yh(t));const n=Tm(t),o=await KE(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ype).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&eJ(t),c}),l=await Yp._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function nge(t,e,r){return $f(t.app)?Promise.reject(Yh(t)):ege(oi(t),r1.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eJ(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t,e){return oi(t).setPersistence(e)}function age(t,e,r,n){return oi(t).onIdTokenChanged(e,r,n)}function sge(t,e,r){return oi(t).beforeAuthStateChanged(e,r)}function cj(t,e,r,n){return oi(t).onAuthStateChanged(e,r,n)}function wD(t){return oi(t).signOut()}const zE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(zE,"1"),this.storage.removeItem(zE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ige=1e3,oge=10;class rJ extends tJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);Cpe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,oge):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},ige)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}rJ.type="LOCAL";const ND=rJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ extends tJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}nJ.type="SESSION";const CD=nJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lge(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new uj(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await lge(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uj.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cge{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=_D("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const A=f;if(A.data.eventId===u)switch(A.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(A.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){return window}function uge(t){eh().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJ(){return typeof eh().WorkerGlobalScope<"u"&&typeof eh().importScripts=="function"}async function dge(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fge(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hge(){return aJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sJ="firebaseLocalStorageDb",Age=1,WE="firebaseLocalStorage",iJ="fbase_key";class gw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function dj(t,e){return t.transaction([WE],e?"readwrite":"readonly").objectStore(WE)}function mge(){const t=indexedDB.deleteDatabase(sJ);return new gw(t).toPromise()}function jT(){const t=indexedDB.open(sJ,Age);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(WE,{keyPath:iJ})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(WE)?e(n):(n.close(),await mge(),e(await jT()))})})}async function KU(t,e,r){const n=dj(t,!0).put({[iJ]:e,value:r});return new gw(n).toPromise()}async function pge(t,e){const r=dj(t,!1).get(e),n=await new gw(r).toPromise();return n===void 0?null:n.value}function qU(t,e){const r=dj(t,!0).delete(e);return new gw(r).toPromise()}const gge=800,xge=3;class oJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>xge)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uj._getInstance(hge()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await dge(),!this.activeServiceWorker)return;this.sender=new cge(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fge()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jT();return await KU(e,zE,"1"),await qU(e,zE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>KU(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>pge(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>qU(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=dj(a,!1).getAll();return new gw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gge)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oJ.type="LOCAL";const lJ=oJ;new Aw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vge(t,e){return e?Hh(e):(In(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED extends yD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ov(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ov(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ov(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function yge(t){return ZY(t.auth,new ED(t),t.bypassAuthState)}function bge(t){const{auth:e,user:r}=t;return In(r,e,"internal-error"),Zpe(r,new ED(t),t.bypassAuthState)}async function wge(t){const{auth:e,user:r}=t;return In(r,e,"internal-error"),Jpe(r,new ED(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yge;case"linkViaPopup":case"linkViaRedirect":return wge;case"reauthViaPopup":case"reauthViaRedirect":return bge;default:pf(this.auth,"internal-error")}}resolve(e){fA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nge=new Aw(2e3,1e4);class Hx extends cJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Hx.currentPopupAction&&Hx.currentPopupAction.cancel(),Hx.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return In(e,this.auth,"internal-error"),e}async onExecution(){fA(this.filter.length===1,"Popup operations only handle one event");const e=_D();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hx.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nge.get())};e()}}Hx.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cge="pendingRedirect",K_=new Map;class _ge extends cJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=K_.get(this.auth._key());if(!e){try{const n=await Ege(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}K_.set(this.auth._key(),e)}return this.bypassAuthState||K_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ege(t,e){const r=jge(e),n=Ige(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Sge(t,e){K_.set(t._key(),e)}function Ige(t){return Hh(t._redirectPersistence)}function jge(t){return $_(Cge,t.config.apiKey,t.name)}async function Pge(t,e,r=!1){if($f(t.app))return Promise.reject(Yh(t));const n=Tm(t),a=vge(n,e),o=await new _ge(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bge=10*60*1e3;class Tge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kge(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!uJ(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Zf(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bge&&this.cachedEventUids.clear(),this.cachedEventUids.has(zU(e))}saveEventToCache(e){this.cachedEventUids.add(zU(e)),this.lastProcessedEventTime=Date.now()}}function zU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fge(t,e={}){return jA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dge=/^https?/;async function Rge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Fge(t);for(const r of e)try{if(Mge(r))return}catch{}pf(t,"unauthorized-domain")}function Mge(t){const e=ST(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Dge.test(r))return!1;if(Oge.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge=new Aw(3e4,6e4);function WU(){const t=eh().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Uge(t){return new Promise((e,r)=>{var n,a,s;function o(){WU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WU(),r(Zf(t,"network-request-failed"))},timeout:Lge.get()})}if(!((a=(n=eh().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((s=eh().gapi)===null||s===void 0)&&s.load)o();else{const l=kpe("iframefcb");return eh()[l]=()=>{gapi.load?o():r(Zf(t,"network-request-failed"))},WY(`${Tpe()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw q_=null,e})}let q_=null;function Qge(t){return q_=q_||Uge(t),q_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vge=new Aw(5e3,15e3),Hge="__/auth/iframe",$ge="emulator/auth/iframe",Gge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qge(t){const e=t.config;In(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?gD(e,$ge):`https://${t.config.authDomain}/${Hge}`,n={apiKey:e.apiKey,appName:t.name,v:t1},a=Kge.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${hw(n).slice(1)}`}async function zge(t){const e=await Qge(t),r=eh().gapi;return In(r,t,"internal-error"),e.open({where:document.body,url:qge(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gge,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Zf(t,"network-request-failed"),l=eh().setTimeout(()=>{s(o)},Vge.get());function c(){eh().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xge=500,Yge=600,Jge="_blank",Zge="http://localhost";class XU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function exe(t,e,r,n=Xge,a=Yge){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Wge),{width:n.toString(),height:a.toString(),top:s,left:o}),u=_o().toLowerCase();r&&(l=VY(u)?Jge:r),UY(u)&&(e=e||Zge,c.scrollbars="yes");const d=Object.entries(c).reduce((A,[h,m])=>`${A}${h}=${m},`,"");if(Npe(u)&&l!=="_self")return txe(e||"",l),new XU(null);const f=window.open(e||"",l,d);In(f,t,"popup-blocked");try{f.focus()}catch{}return new XU(f)}function txe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rxe="__/auth/handler",nxe="emulator/auth/handler",axe=encodeURIComponent("fac");async function YU(t,e,r,n,a,s){In(t.config.authDomain,t,"auth-domain-config-required"),In(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:t1,eventId:a};if(e instanceof YY){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",q0e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof pw){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${axe}=${encodeURIComponent(c)}`:"";return`${sxe(t)}?${hw(l).slice(1)}${u}`}function sxe({config:t}){return t.emulator?gD(t,nxe):`https://${t.authDomain}/${rxe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="webStorageSupport";class ixe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CD,this._completeRedirectFn=Pge,this._overrideRedirectResult=Sge}async _openPopup(e,r,n,a){var s;fA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await YU(e,r,n,ST(),a);return exe(e,o,_D())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await YU(e,r,n,ST(),a);return uge(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(fA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await zge(e),n=new Tge(e);return r.register("authEvent",a=>(In(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(A3,{type:A3},a=>{var s;const o=(s=a==null?void 0:a[0])===null||s===void 0?void 0:s[A3];o!==void 0&&r(!!o),pf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Rge(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return qY()||QY()||vD()}}const oxe=ixe;var JU="@firebase/auth",ZU="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){In(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cxe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uxe(t){_v(new Wp("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;In(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zY(t)},u=new jpe(n,a,s,c);return Mpe(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_v(new Wp("auth-internal",e=>{const r=Tm(e.getProvider("auth").getImmediate());return(n=>new lxe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),nm(JU,ZU,cxe(t)),nm(JU,ZU,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dxe=5*60,fxe=CY("authIdTokenMaxAge")||dxe;let e7=null;const hxe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>fxe)return;const a=r==null?void 0:r.token;e7!==a&&(e7=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function PT(t=AD()){const e=fD(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Rpe(t,{popupRedirectResolver:oxe,persistence:[lJ,ND,CD]}),n=CY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=hxe(s.toString());sge(r,o,()=>o(r.currentUser)),age(r,l=>o(l))}}const a=wY("auth");return a&&Lpe(r,`http://${a}`),r}function Axe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ppe({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Zf("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",Axe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uxe("Browser");var mxe="firebase",pxe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nm(mxe,pxe,"app");var t7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ip,dJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,S){function E(){}E.prototype=S.prototype,_.D=S.prototype,_.prototype=new E,_.prototype.constructor=_,_.C=function(F,k,B){for(var D=Array(arguments.length-2),X=2;X<arguments.length;X++)D[X-2]=arguments[X];return S.prototype[k].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,S,E){E||(E=0);var F=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)F[k]=S.charCodeAt(E++)|S.charCodeAt(E++)<<8|S.charCodeAt(E++)<<16|S.charCodeAt(E++)<<24;else for(k=0;16>k;++k)F[k]=S[E++]|S[E++]<<8|S[E++]<<16|S[E++]<<24;S=_.g[0],E=_.g[1],k=_.g[2];var B=_.g[3],D=S+(B^E&(k^B))+F[0]+3614090360&4294967295;S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+F[1]+3905402710&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+F[2]+606105819&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+F[3]+3250441966&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+F[4]+4118548399&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+F[5]+1200080426&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+F[6]+2821735955&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+F[7]+4249261313&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+F[8]+1770035416&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+F[9]+2336552879&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+F[10]+4294925233&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+F[11]+2304563134&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(B^E&(k^B))+F[12]+1804603682&4294967295,S=E+(D<<7&4294967295|D>>>25),D=B+(k^S&(E^k))+F[13]+4254626195&4294967295,B=S+(D<<12&4294967295|D>>>20),D=k+(E^B&(S^E))+F[14]+2792965006&4294967295,k=B+(D<<17&4294967295|D>>>15),D=E+(S^k&(B^S))+F[15]+1236535329&4294967295,E=k+(D<<22&4294967295|D>>>10),D=S+(k^B&(E^k))+F[1]+4129170786&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+F[6]+3225465664&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+F[11]+643717713&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+F[0]+3921069994&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+F[5]+3593408605&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+F[10]+38016083&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+F[15]+3634488961&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+F[4]+3889429448&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+F[9]+568446438&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+F[14]+3275163606&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+F[3]+4107603335&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+F[8]+1163531501&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(k^B&(E^k))+F[13]+2850285829&4294967295,S=E+(D<<5&4294967295|D>>>27),D=B+(E^k&(S^E))+F[2]+4243563512&4294967295,B=S+(D<<9&4294967295|D>>>23),D=k+(S^E&(B^S))+F[7]+1735328473&4294967295,k=B+(D<<14&4294967295|D>>>18),D=E+(B^S&(k^B))+F[12]+2368359562&4294967295,E=k+(D<<20&4294967295|D>>>12),D=S+(E^k^B)+F[5]+4294588738&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+F[8]+2272392833&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+F[11]+1839030562&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+F[14]+4259657740&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+F[1]+2763975236&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+F[4]+1272893353&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+F[7]+4139469664&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+F[10]+3200236656&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+F[13]+681279174&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+F[0]+3936430074&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+F[3]+3572445317&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+F[6]+76029189&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(E^k^B)+F[9]+3654602809&4294967295,S=E+(D<<4&4294967295|D>>>28),D=B+(S^E^k)+F[12]+3873151461&4294967295,B=S+(D<<11&4294967295|D>>>21),D=k+(B^S^E)+F[15]+530742520&4294967295,k=B+(D<<16&4294967295|D>>>16),D=E+(k^B^S)+F[2]+3299628645&4294967295,E=k+(D<<23&4294967295|D>>>9),D=S+(k^(E|~B))+F[0]+4096336452&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+F[7]+1126891415&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+F[14]+2878612391&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+F[5]+4237533241&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+F[12]+1700485571&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+F[3]+2399980690&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+F[10]+4293915773&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+F[1]+2240044497&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+F[8]+1873313359&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+F[15]+4264355552&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+F[6]+2734768916&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+F[13]+1309151649&4294967295,E=k+(D<<21&4294967295|D>>>11),D=S+(k^(E|~B))+F[4]+4149444226&4294967295,S=E+(D<<6&4294967295|D>>>26),D=B+(E^(S|~k))+F[11]+3174756917&4294967295,B=S+(D<<10&4294967295|D>>>22),D=k+(S^(B|~E))+F[2]+718787259&4294967295,k=B+(D<<15&4294967295|D>>>17),D=E+(B^(k|~S))+F[9]+3951481745&4294967295,_.g[0]=_.g[0]+S&4294967295,_.g[1]=_.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+k&4294967295,_.g[3]=_.g[3]+B&4294967295}n.prototype.u=function(_,S){S===void 0&&(S=_.length);for(var E=S-this.blockSize,F=this.B,k=this.h,B=0;B<S;){if(k==0)for(;B<=E;)a(this,_,B),B+=this.blockSize;if(typeof _=="string"){for(;B<S;)if(F[k++]=_.charCodeAt(B++),k==this.blockSize){a(this,F),k=0;break}}else for(;B<S;)if(F[k++]=_[B++],k==this.blockSize){a(this,F),k=0;break}}this.h=k,this.o+=S},n.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var S=1;S<_.length-8;++S)_[S]=0;var E=8*this.o;for(S=_.length-8;S<_.length;++S)_[S]=E&255,E/=256;for(this.u(_),_=Array(16),S=E=0;4>S;++S)for(var F=0;32>F;F+=8)_[E++]=this.g[S]>>>F&255;return _};function s(_,S){var E=l;return Object.prototype.hasOwnProperty.call(E,_)?E[_]:E[_]=S(_)}function o(_,S){this.h=S;for(var E=[],F=!0,k=_.length-1;0<=k;k--){var B=_[k]|0;F&&B==S||(E[k]=B,F=!1)}this.g=E}var l={};function c(_){return-128<=_&&128>_?s(_,function(S){return new o([S|0],0>S?-1:0)}):new o([_|0],0>_?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return x(u(-_));for(var S=[],E=1,F=0;_>=E;F++)S[F]=_/E|0,E*=4294967296;return new o(S,0)}function d(_,S){if(_.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(_.charAt(0)=="-")return x(d(_.substring(1),S));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(S,8)),F=f,k=0;k<_.length;k+=8){var B=Math.min(8,_.length-k),D=parseInt(_.substring(k,k+B),S);8>B?(B=u(Math.pow(S,B)),F=F.j(B).add(u(D))):(F=F.j(E),F=F.add(u(D)))}return F}var f=c(0),A=c(1),h=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-x(this).m();for(var _=0,S=1,E=0;E<this.g.length;E++){var F=this.i(E);_+=(0<=F?F:4294967296+F)*S,S*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+x(this).toString(_);for(var S=u(Math.pow(_,6)),E=this,F="";;){var k=w(E,S).g;E=v(E,k.j(S));var B=((0<E.g.length?E.g[0]:E.h)>>>0).toString(_);if(E=k,m(E))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var S=0;S<_.g.length;S++)if(_.g[S]!=0)return!1;return!0}function p(_){return _.h==-1}t.l=function(_){return _=v(this,_),p(_)?-1:m(_)?0:1};function x(_){for(var S=_.g.length,E=[],F=0;F<S;F++)E[F]=~_.g[F];return new o(E,~_.h).add(A)}t.abs=function(){return p(this)?x(this):this},t.add=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0,k=0;k<=S;k++){var B=F+(this.i(k)&65535)+(_.i(k)&65535),D=(B>>>16)+(this.i(k)>>>16)+(_.i(k)>>>16);F=D>>>16,B&=65535,D&=65535,E[k]=D<<16|B}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(_,S){return _.add(x(S))}t.j=function(_){if(m(this)||m(_))return f;if(p(this))return p(_)?x(this).j(x(_)):x(x(this).j(_));if(p(_))return x(this.j(x(_)));if(0>this.l(h)&&0>_.l(h))return u(this.m()*_.m());for(var S=this.g.length+_.g.length,E=[],F=0;F<2*S;F++)E[F]=0;for(F=0;F<this.g.length;F++)for(var k=0;k<_.g.length;k++){var B=this.i(F)>>>16,D=this.i(F)&65535,X=_.i(k)>>>16,he=_.i(k)&65535;E[2*F+2*k]+=D*he,y(E,2*F+2*k),E[2*F+2*k+1]+=B*he,y(E,2*F+2*k+1),E[2*F+2*k+1]+=D*X,y(E,2*F+2*k+1),E[2*F+2*k+2]+=B*X,y(E,2*F+2*k+2)}for(F=0;F<S;F++)E[F]=E[2*F+1]<<16|E[2*F];for(F=S;F<2*S;F++)E[F]=0;return new o(E,0)};function y(_,S){for(;(_[S]&65535)!=_[S];)_[S+1]+=_[S]>>>16,_[S]&=65535,S++}function b(_,S){this.g=_,this.h=S}function w(_,S){if(m(S))throw Error("division by zero");if(m(_))return new b(f,f);if(p(_))return S=w(x(_),S),new b(x(S.g),x(S.h));if(p(S))return S=w(_,x(S)),new b(x(S.g),S.h);if(30<_.g.length){if(p(_)||p(S))throw Error("slowDivide_ only works with positive integers.");for(var E=A,F=S;0>=F.l(_);)E=j(E),F=j(F);var k=I(E,1),B=I(F,1);for(F=I(F,2),E=I(E,2);!m(F);){var D=B.add(F);0>=D.l(_)&&(k=k.add(E),B=D),F=I(F,1),E=I(E,1)}return S=v(_,k.j(S)),new b(k,S)}for(k=f;0<=_.l(S);){for(E=Math.max(1,Math.floor(_.m()/S.m())),F=Math.ceil(Math.log(E)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=u(E),D=B.j(S);p(D)||0<D.l(_);)E-=F,B=u(E),D=B.j(S);m(B)&&(B=A),k=k.add(B),_=v(_,D)}return new b(k,_)}t.A=function(_){return w(this,_).h},t.and=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)&_.i(F);return new o(E,this.h&_.h)},t.or=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)|_.i(F);return new o(E,this.h|_.h)},t.xor=function(_){for(var S=Math.max(this.g.length,_.g.length),E=[],F=0;F<S;F++)E[F]=this.i(F)^_.i(F);return new o(E,this.h^_.h)};function j(_){for(var S=_.g.length+1,E=[],F=0;F<S;F++)E[F]=_.i(F)<<1|_.i(F-1)>>>31;return new o(E,_.h)}function I(_,S){var E=S>>5;S%=32;for(var F=_.g.length-E,k=[],B=0;B<F;B++)k[B]=0<S?_.i(B+E)>>>S|_.i(B+E+1)<<32-S:_.i(B+E);return new o(k,_.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,dJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ip=o}).apply(typeof t7<"u"?t7:typeof self<"u"?self:typeof window<"u"?window:{});var zN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fJ,ky,hJ,z_,BT,AJ,mJ,pJ;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,Y,pe){return C==Array.prototype||C==Object.prototype||(C[Y]=pe.value),C};function r(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof zN=="object"&&zN];for(var Y=0;Y<C.length;++Y){var pe=C[Y];if(pe&&pe.Math==Math)return pe}throw Error("Cannot find global object")}var n=r(this);function a(C,Y){if(Y)e:{var pe=n;C=C.split(".");for(var ze=0;ze<C.length-1;ze++){var Dt=C[ze];if(!(Dt in pe))break e;pe=pe[Dt]}C=C[C.length-1],ze=pe[C],Y=Y(ze),Y!=ze&&Y!=null&&e(pe,C,{configurable:!0,writable:!0,value:Y})}}function s(C,Y){C instanceof String&&(C+="");var pe=0,ze=!1,Dt={next:function(){if(!ze&&pe<C.length){var Xt=pe++;return{value:Y(Xt,C[Xt]),done:!1}}return ze=!0,{done:!0,value:void 0}}};return Dt[Symbol.iterator]=function(){return Dt},Dt}a("Array.prototype.values",function(C){return C||function(){return s(this,function(Y,pe){return pe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(C){var Y=typeof C;return Y=Y!="object"?Y:C?Array.isArray(C)?"array":Y:"null",Y=="array"||Y=="object"&&typeof C.length=="number"}function u(C){var Y=typeof C;return Y=="object"&&C!=null||Y=="function"}function d(C,Y,pe){return C.call.apply(C.bind,arguments)}function f(C,Y,pe){if(!C)throw Error();if(2<arguments.length){var ze=Array.prototype.slice.call(arguments,2);return function(){var Dt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Dt,ze),C.apply(Y,Dt)}}return function(){return C.apply(Y,arguments)}}function A(C,Y,pe){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,A.apply(null,arguments)}function h(C,Y){var pe=Array.prototype.slice.call(arguments,1);return function(){var ze=pe.slice();return ze.push.apply(ze,arguments),C.apply(this,ze)}}function m(C,Y){function pe(){}pe.prototype=Y.prototype,C.aa=Y.prototype,C.prototype=new pe,C.prototype.constructor=C,C.Qb=function(ze,Dt,Xt){for(var Pr=Array(arguments.length-2),oa=2;oa<arguments.length;oa++)Pr[oa-2]=arguments[oa];return Y.prototype[Dt].apply(ze,Pr)}}function p(C){const Y=C.length;if(0<Y){const pe=Array(Y);for(let ze=0;ze<Y;ze++)pe[ze]=C[ze];return pe}return[]}function x(C,Y){for(let pe=1;pe<arguments.length;pe++){const ze=arguments[pe];if(c(ze)){const Dt=C.length||0,Xt=ze.length||0;C.length=Dt+Xt;for(let Pr=0;Pr<Xt;Pr++)C[Dt+Pr]=ze[Pr]}else C.push(ze)}}class v{constructor(Y,pe){this.i=Y,this.j=pe,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}function y(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=l.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function I(C,Y,pe){for(const ze in C)Y.call(pe,C[ze],ze,C)}function _(C,Y){for(const pe in C)Y.call(void 0,C[pe],pe,C)}function S(C){const Y={};for(const pe in C)Y[pe]=C[pe];return Y}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(C,Y){let pe,ze;for(let Dt=1;Dt<arguments.length;Dt++){ze=arguments[Dt];for(pe in ze)C[pe]=ze[pe];for(let Xt=0;Xt<E.length;Xt++)pe=E[Xt],Object.prototype.hasOwnProperty.call(ze,pe)&&(C[pe]=ze[pe])}}function k(C){var Y=1;C=C.split(":");const pe=[];for(;0<Y&&C.length;)pe.push(C.shift()),Y--;return C.length&&pe.push(C.join(":")),pe}function B(C){l.setTimeout(()=>{throw C},0)}function D(){var C=ne;let Y=null;return C.g&&(Y=C.g,C.g=C.g.next,C.g||(C.h=null),Y.next=null),Y}class X{constructor(){this.h=this.g=null}add(Y,pe){const ze=he.get();ze.set(Y,pe),this.h?this.h.next=ze:this.g=ze,this.h=ze}}var he=new v(()=>new Ae,C=>C.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(Y,pe){this.h=Y,this.g=pe,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,me=!1,ne=new X,Pe=()=>{const C=l.Promise.resolve(void 0);fe=()=>{C.then(Te)}};var Te=()=>{for(var C;C=D();){try{C.h.call(C.g)}catch(pe){B(pe)}var Y=he;Y.j(C),100>Y.h&&(Y.h++,C.next=Y.g,Y.g=C)}me=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(C,Y){this.type=C,this.g=this.target=Y,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var C=!1,Y=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const pe=()=>{};l.addEventListener("test",pe,Y),l.removeEventListener("test",pe,Y)}catch{}return C}();function U(C,Y){if(K.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var pe=this.type=C.type,ze=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=Y,Y=C.relatedTarget){if(j){e:{try{w(Y.nodeName);var Dt=!0;break e}catch{}Dt=!1}Dt||(Y=null)}}else pe=="mouseover"?Y=C.fromElement:pe=="mouseout"&&(Y=C.toElement);this.relatedTarget=Y,ze?(this.clientX=ze.clientX!==void 0?ze.clientX:ze.pageX,this.clientY=ze.clientY!==void 0?ze.clientY:ze.pageY,this.screenX=ze.screenX||0,this.screenY=ze.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:W[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&U.aa.h.call(this)}}m(U,K);var W={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),M=0;function H(C,Y,pe,ze,Dt){this.listener=C,this.proxy=null,this.src=Y,this.type=pe,this.capture=!!ze,this.ha=Dt,this.key=++M,this.da=this.fa=!1}function te(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function ve(C){this.src=C,this.g={},this.h=0}ve.prototype.add=function(C,Y,pe,ze,Dt){var Xt=C.toString();C=this.g[Xt],C||(C=this.g[Xt]=[],this.h++);var Pr=Ke(C,Y,ze,Dt);return-1<Pr?(Y=C[Pr],pe||(Y.fa=!1)):(Y=new H(Y,this.src,Xt,!!ze,Dt),Y.fa=pe,C.push(Y)),Y};function Q(C,Y){var pe=Y.type;if(pe in C.g){var ze=C.g[pe],Dt=Array.prototype.indexOf.call(ze,Y,void 0),Xt;(Xt=0<=Dt)&&Array.prototype.splice.call(ze,Dt,1),Xt&&(te(Y),C.g[pe].length==0&&(delete C.g[pe],C.h--))}}function Ke(C,Y,pe,ze){for(var Dt=0;Dt<C.length;++Dt){var Xt=C[Dt];if(!Xt.da&&Xt.listener==Y&&Xt.capture==!!pe&&Xt.ha==ze)return Dt}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),ee={};function Fe(C,Y,pe,ze,Dt){if(Array.isArray(Y)){for(var Xt=0;Xt<Y.length;Xt++)Fe(C,Y[Xt],pe,ze,Dt);return null}return pe=Rt(pe),C&&C[J]?C.K(Y,pe,u(ze)?!!ze.capture:!1,Dt):ce(C,Y,pe,!1,ze,Dt)}function ce(C,Y,pe,ze,Dt,Xt){if(!Y)throw Error("Invalid event type");var Pr=u(Dt)?!!Dt.capture:!!Dt,oa=Ct(C);if(oa||(C[ae]=oa=new ve(C)),pe=oa.add(Y,pe,ze,Pr,Xt),pe.proxy)return pe;if(ze=be(),pe.proxy=ze,ze.src=C,ze.listener=pe,C.addEventListener)q||(Dt=Pr),Dt===void 0&&(Dt=!1),C.addEventListener(Y.toString(),ze,Dt);else if(C.attachEvent)C.attachEvent(pt(Y.toString()),ze);else if(C.addListener&&C.removeListener)C.addListener(ze);else throw Error("addEventListener and attachEvent are unavailable.");return pe}function be(){function C(pe){return Y.call(C.src,C.listener,pe)}const Y=wt;return C}function Ve(C,Y,pe,ze,Dt){if(Array.isArray(Y))for(var Xt=0;Xt<Y.length;Xt++)Ve(C,Y[Xt],pe,ze,Dt);else ze=u(ze)?!!ze.capture:!!ze,pe=Rt(pe),C&&C[J]?(C=C.i,Y=String(Y).toString(),Y in C.g&&(Xt=C.g[Y],pe=Ke(Xt,pe,ze,Dt),-1<pe&&(te(Xt[pe]),Array.prototype.splice.call(Xt,pe,1),Xt.length==0&&(delete C.g[Y],C.h--)))):C&&(C=Ct(C))&&(Y=C.g[Y.toString()],C=-1,Y&&(C=Ke(Y,pe,ze,Dt)),(pe=-1<C?Y[C]:null)&&We(pe))}function We(C){if(typeof C!="number"&&C&&!C.da){var Y=C.src;if(Y&&Y[J])Q(Y.i,C);else{var pe=C.type,ze=C.proxy;Y.removeEventListener?Y.removeEventListener(pe,ze,C.capture):Y.detachEvent?Y.detachEvent(pt(pe),ze):Y.addListener&&Y.removeListener&&Y.removeListener(ze),(pe=Ct(Y))?(Q(pe,C),pe.h==0&&(pe.src=null,Y[ae]=null)):te(C)}}}function pt(C){return C in ee?ee[C]:ee[C]="on"+C}function wt(C,Y){if(C.da)C=!0;else{Y=new U(Y,this);var pe=C.listener,ze=C.ha||C.src;C.fa&&We(C),C=pe.call(ze,Y)}return C}function Ct(C){return C=C[ae],C instanceof ve?C:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(C){return typeof C=="function"?C:(C[St]||(C[St]=function(Y){return C.handleEvent(Y)}),C[St])}function jt(){O.call(this),this.i=new ve(this),this.M=this,this.F=null}m(jt,O),jt.prototype[J]=!0,jt.prototype.removeEventListener=function(C,Y,pe,ze){Ve(this,C,Y,pe,ze)};function Ue(C,Y){var pe,ze=C.F;if(ze)for(pe=[];ze;ze=ze.F)pe.push(ze);if(C=C.M,ze=Y.type||Y,typeof Y=="string")Y=new K(Y,C);else if(Y instanceof K)Y.target=Y.target||C;else{var Dt=Y;Y=new K(ze,C),F(Y,Dt)}if(Dt=!0,pe)for(var Xt=pe.length-1;0<=Xt;Xt--){var Pr=Y.g=pe[Xt];Dt=Be(Pr,ze,!0,Y)&&Dt}if(Pr=Y.g=C,Dt=Be(Pr,ze,!0,Y)&&Dt,Dt=Be(Pr,ze,!1,Y)&&Dt,pe)for(Xt=0;Xt<pe.length;Xt++)Pr=Y.g=pe[Xt],Dt=Be(Pr,ze,!1,Y)&&Dt}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var C=this.i,Y;for(Y in C.g){for(var pe=C.g[Y],ze=0;ze<pe.length;ze++)te(pe[ze]);delete C.g[Y],C.h--}}this.F=null},jt.prototype.K=function(C,Y,pe,ze){return this.i.add(String(C),Y,!1,pe,ze)},jt.prototype.L=function(C,Y,pe,ze){return this.i.add(String(C),Y,!0,pe,ze)};function Be(C,Y,pe,ze){if(Y=C.i.g[String(Y)],!Y)return!0;Y=Y.concat();for(var Dt=!0,Xt=0;Xt<Y.length;++Xt){var Pr=Y[Xt];if(Pr&&!Pr.da&&Pr.capture==pe){var oa=Pr.listener,Ws=Pr.ha||Pr.src;Pr.fa&&Q(C.i,Pr),Dt=oa.call(Ws,ze)!==!1&&Dt}}return Dt&&!ze.defaultPrevented}function ye(C,Y,pe){if(typeof C=="function")pe&&(C=A(C,pe));else if(C&&typeof C.handleEvent=="function")C=A(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(Y)?-1:l.setTimeout(C,Y||0)}function oe(C){C.g=ye(()=>{C.g=null,C.i&&(C.i=!1,oe(C))},C.l);const Y=C.h;C.h=null,C.m.apply(null,Y)}class Z extends O{constructor(Y,pe){super(),this.m=Y,this.l=pe,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(C){O.call(this),this.h=C,this.g={}}m(Ne,O);var Re=[];function ge(C){I(C.g,function(Y,pe){this.g.hasOwnProperty(pe)&&We(Y)},C),C.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),ge(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=l.JSON.stringify,vt=l.JSON.parse,it=class{stringify(C){return l.JSON.stringify(C,void 0)}parse(C){return l.JSON.parse(C,void 0)}};function de(){}de.prototype.h=null;function Ce(C){return C.h||(C.h=C.i())}function Ye(){}var ft={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){K.call(this,"d")}m(we,K);function Le(){K.call(this,"c")}m(Le,K);var gt={},Ut=null;function Mt(){return Ut=Ut||new jt}gt.La="serverreachability";function Yt(C){K.call(this,gt.La,C)}m(Yt,K);function st(C){const Y=Mt();Ue(Y,new Yt(Y))}gt.STAT_EVENT="statevent";function _e(C,Y){K.call(this,gt.STAT_EVENT,C),this.stat=Y}m(_e,K);function xe(C){const Y=Mt();Ue(Y,new _e(Y,C))}gt.Ma="timingevent";function ie(C,Y){K.call(this,gt.Ma,C),this.size=Y}m(ie,K);function Oe(C,Y){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){C()},Y)}function le(){this.g=!0}le.prototype.xa=function(){this.g=!1};function De(C,Y,pe,ze,Dt,Xt){C.info(function(){if(C.g)if(Xt)for(var Pr="",oa=Xt.split("&"),Ws=0;Ws<oa.length;Ws++){var zn=oa[Ws].split("=");if(1<zn.length){var va=zn[0];zn=zn[1];var ds=va.split("_");Pr=2<=ds.length&&ds[1]=="type"?Pr+(va+"="+zn+"&"):Pr+(va+"=redacted&")}}else Pr=null;else Pr=Xt;return"XMLHTTP REQ ("+ze+") [attempt "+Dt+"]: "+Y+`
`+pe+`
`+Pr})}function He(C,Y,pe,ze,Dt,Xt,Pr){C.info(function(){return"XMLHTTP RESP ("+ze+") [ attempt "+Dt+"]: "+Y+`
`+pe+`
`+Xt+" "+Pr})}function P(C,Y,pe,ze){C.info(function(){return"XMLHTTP TEXT ("+Y+"): "+L(C,pe)+(ze?" "+ze:"")})}function R(C,Y){C.info(function(){return"TIMEOUT: "+Y})}le.prototype.info=function(){};function L(C,Y){if(!C.g)return Y;if(!Y)return null;try{var pe=JSON.parse(Y);if(pe){for(C=0;C<pe.length;C++)if(Array.isArray(pe[C])){var ze=pe[C];if(!(2>ze.length)){var Dt=ze[1];if(Array.isArray(Dt)&&!(1>Dt.length)){var Xt=Dt[0];if(Xt!="noop"&&Xt!="stop"&&Xt!="close")for(var Pr=1;Pr<Dt.length;Pr++)Dt[Pr]=""}}}}return Xe(pe)}catch{return Y}}var G={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ue;function $e(){}m($e,de),$e.prototype.g=function(){return new XMLHttpRequest},$e.prototype.i=function(){return{}},ue=new $e;function rt(C,Y,pe,ze){this.j=C,this.i=Y,this.l=pe,this.R=ze||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Je={},ht={};function Ot(C,Y,pe){C.L=1,C.v=_t(nt(Y)),C.m=pe,C.P=!0,Se(C,null)}function Se(C,Y){C.F=Date.now(),kt(C),C.A=nt(C.v);var pe=C.A,ze=C.R;Array.isArray(ze)||(ze=[String(ze)]),Wr(pe.i,"t",ze),C.C=0,pe=C.j.J,C.h=new At,C.g=di(C.j,pe?Y:null,!C.m),0<C.O&&(C.M=new Z(A(C.Y,C,C.g),C.O)),Y=C.U,pe=C.g,ze=C.ca;var Dt="readystatechange";Array.isArray(Dt)||(Dt&&(Re[0]=Dt.toString()),Dt=Re);for(var Xt=0;Xt<Dt.length;Xt++){var Pr=Fe(pe,Dt[Xt],ze||Y.handleEvent,!1,Y.h||Y);if(!Pr)break;Y.g[Pr.key]=Pr}Y=C.H?S(C.H):{},C.m?(C.u||(C.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,Y)):(C.u="GET",C.g.ea(C.A,C.u,null,Y)),st(),De(C.i,C.u,C.A,C.l,C.R,C.m)}rt.prototype.ca=function(C){C=C.target;const Y=this.M;Y&&ys(C)==3?Y.j():this.Y(C)},rt.prototype.Y=function(C){try{if(C==this.g)e:{const ds=ys(this.g);var Y=this.g.Ba();const nu=this.g.Z();if(!(3>ds)&&(ds!=3||this.g&&(this.h.h||this.g.oa()||Ef(this.g)))){this.J||ds!=4||Y==7||(Y==8||0>=nu?st(3):st(2)),nr(this);var pe=this.g.Z();this.X=pe;t:if(tt(this)){var ze=Ef(this.g);C="";var Dt=ze.length,Xt=ys(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Nr(this),cr(this);var Pr="";break t}this.h.i=new l.TextDecoder}for(Y=0;Y<Dt;Y++)this.h.h=!0,C+=this.h.i.decode(ze[Y],{stream:!(Xt&&Y==Dt-1)});ze.length=0,this.h.g+=C,this.C=0,Pr=this.h.g}else Pr=this.g.oa();if(this.o=pe==200,He(this.i,this.u,this.A,this.l,this.R,ds,pe),this.o){if(this.T&&!this.K){t:{if(this.g){var oa,Ws=this.g;if((oa=Ws.g?Ws.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(oa)){var zn=oa;break t}}zn=null}if(pe=zn)P(this.i,this.l,pe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mn(this,pe);else{this.o=!1,this.s=3,xe(12),Nr(this),cr(this);break e}}if(this.P){pe=!0;let Sl;for(;!this.J&&this.C<Pr.length;)if(Sl=xt(this,Pr),Sl==ht){ds==4&&(this.s=4,xe(14),pe=!1),P(this.i,this.l,null,"[Incomplete Response]");break}else if(Sl==Je){this.s=4,xe(15),P(this.i,this.l,Pr,"[Invalid Chunk]"),pe=!1;break}else P(this.i,this.l,Sl,null),mn(this,Sl);if(tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ds!=4||Pr.length!=0||this.h.h||(this.s=1,xe(16),pe=!1),this.o=this.o&&pe,!pe)P(this.i,this.l,Pr,"[Invalid Chunked Response]"),Nr(this),cr(this);else if(0<Pr.length&&!this.W){this.W=!0;var va=this.j;va.g==this&&va.ba&&!va.M&&(va.j.info("Great, no buffering proxy detected. Bytes received: "+Pr.length),zr(va),va.M=!0,xe(11))}}else P(this.i,this.l,Pr,null),mn(this,Pr);ds==4&&Nr(this),this.o&&!this.J&&(ds==4?kn(this.j,this):(this.o=!1,kt(this)))}else VA(this.g),pe==400&&0<Pr.indexOf("Unknown SID")?(this.s=3,xe(12)):(this.s=0,xe(13)),Nr(this),cr(this)}}}catch{}finally{}};function tt(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function xt(C,Y){var pe=C.C,ze=Y.indexOf(`
`,pe);return ze==-1?ht:(pe=Number(Y.substring(pe,ze)),isNaN(pe)?Je:(ze+=1,ze+pe>Y.length?ht:(Y=Y.slice(ze,ze+pe),C.C=ze+pe,Y)))}rt.prototype.cancel=function(){this.J=!0,Nr(this)};function kt(C){C.S=Date.now()+C.I,tr(C,C.I)}function tr(C,Y){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Oe(A(C.ba,C),Y)}function nr(C){C.B&&(l.clearTimeout(C.B),C.B=null)}rt.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(R(this.i,this.A),this.L!=2&&(st(),xe(17)),Nr(this),this.s=2,cr(this)):tr(this,this.S-C)};function cr(C){C.j.G==0||C.J||kn(C.j,C)}function Nr(C){nr(C);var Y=C.M;Y&&typeof Y.ma=="function"&&Y.ma(),C.M=null,ge(C.U),C.g&&(Y=C.g,C.g=null,Y.abort(),Y.ma())}function mn(C,Y){try{var pe=C.j;if(pe.G!=0&&(pe.g==C||Bn(pe.h,C))){if(!C.K&&Bn(pe.h,C)&&pe.G==3){try{var ze=pe.Da.g.parse(Y)}catch{ze=null}if(Array.isArray(ze)&&ze.length==3){var Dt=ze;if(Dt[0]==0){e:if(!pe.u){if(pe.g)if(pe.g.F+3e3<C.F)bn(pe),Mu(pe);else break e;gr(pe),xe(18)}}else pe.za=Dt[1],0<pe.za-pe.T&&37500>Dt[2]&&pe.F&&pe.v==0&&!pe.C&&(pe.C=Oe(A(pe.Za,pe),6e3));if(1>=Zn(pe.h)&&pe.ca){try{pe.ca()}catch{}pe.ca=void 0}}else Ea(pe,11)}else if((C.K||pe.g==C)&&bn(pe),!y(Y))for(Dt=pe.Da.g.parse(Y),Y=0;Y<Dt.length;Y++){let zn=Dt[Y];if(pe.T=zn[0],zn=zn[1],pe.G==2)if(zn[0]=="c"){pe.K=zn[1],pe.ia=zn[2];const va=zn[3];va!=null&&(pe.la=va,pe.j.info("VER="+pe.la));const ds=zn[4];ds!=null&&(pe.Aa=ds,pe.j.info("SVER="+pe.Aa));const nu=zn[5];nu!=null&&typeof nu=="number"&&0<nu&&(ze=1.5*nu,pe.L=ze,pe.j.info("backChannelRequestTimeoutMs_="+ze)),ze=pe;const Sl=C.g;if(Sl){const tl=Sl.g?Sl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var Xt=ze.h;Xt.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(Xt.j=Xt.l,Xt.g=new Set,Xt.h&&(zt(Xt,Xt.h),Xt.h=null))}if(ze.D){const Dd=Sl.g?Sl.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(ze.ya=Dd,ot(ze.I,ze.D,Dd))}}pe.G=3,pe.l&&pe.l.ua(),pe.ba&&(pe.R=Date.now()-C.F,pe.j.info("Handshake RTT: "+pe.R+"ms")),ze=pe;var Pr=C;if(ze.qa=Oa(ze,ze.J?ze.ia:null,ze.W),Pr.K){pr(ze.h,Pr);var oa=Pr,Ws=ze.L;Ws&&(oa.I=Ws),oa.B&&(nr(oa),kt(oa)),ze.g=Pr}else fr(ze);0<pe.i.length&&V(pe)}else zn[0]!="stop"&&zn[0]!="close"||Ea(pe,7);else pe.G==3&&(zn[0]=="stop"||zn[0]=="close"?zn[0]=="stop"?Ea(pe,7):Sf(pe):zn[0]!="noop"&&pe.l&&pe.l.ta(zn),pe.v=0)}}st(4)}catch{}}var Mr=class{constructor(C,Y){this.g=C,this.map=Y}};function Vr(C){this.l=C||10,l.PerformanceNavigationTiming?(C=l.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fn(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Zn(C){return C.h?1:C.g?C.g.size:0}function Bn(C,Y){return C.h?C.h==Y:C.g?C.g.has(Y):!1}function zt(C,Y){C.g?C.g.add(Y):C.h=Y}function pr(C,Y){C.h&&C.h==Y?C.h=null:C.g&&C.g.has(Y)&&C.g.delete(Y)}Vr.prototype.cancel=function(){if(this.i=Gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Gt(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let Y=C.i;for(const pe of C.g.values())Y=Y.concat(pe.D);return Y}return p(C.i)}function Qr(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(c(C)){for(var Y=[],pe=C.length,ze=0;ze<pe;ze++)Y.push(C[ze]);return Y}Y=[],pe=0;for(ze in C)Y[pe++]=C[ze];return Y}function ln(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(c(C)||typeof C=="string"){var Y=[];C=C.length;for(var pe=0;pe<C;pe++)Y.push(pe);return Y}Y=[],pe=0;for(const ze in C)Y[pe++]=ze;return Y}}}function tn(C,Y){if(C.forEach&&typeof C.forEach=="function")C.forEach(Y,void 0);else if(c(C)||typeof C=="string")Array.prototype.forEach.call(C,Y,void 0);else for(var pe=ln(C),ze=Qr(C),Dt=ze.length,Xt=0;Xt<Dt;Xt++)Y.call(void 0,ze[Xt],pe&&pe[Xt],C)}var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ur(C,Y){if(C){C=C.split("&");for(var pe=0;pe<C.length;pe++){var ze=C[pe].indexOf("="),Dt=null;if(0<=ze){var Xt=C[pe].substring(0,ze);Dt=C[pe].substring(ze+1)}else Xt=C[pe];Y(Xt,Dt?decodeURIComponent(Dt.replace(/\+/g," ")):"")}}}function je(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof je){this.h=C.h,dt(this,C.j),this.o=C.o,this.g=C.g,Nt(this,C.s),this.l=C.l;var Y=C.i,pe=new Ft;pe.i=Y.i,Y.g&&(pe.g=new Map(Y.g),pe.h=Y.h),Qe(this,pe),this.m=C.m}else C&&(Y=String(C).match(mt))?(this.h=!1,dt(this,Y[1]||"",!0),this.o=et(Y[2]||""),this.g=et(Y[3]||"",!0),Nt(this,Y[4]),this.l=et(Y[5]||"",!0),Qe(this,Y[6]||"",!0),this.m=et(Y[7]||"")):(this.h=!1,this.i=new Ft(null,this.h))}je.prototype.toString=function(){var C=[],Y=this.j;Y&&C.push(It(Y,rr,!0),":");var pe=this.g;return(pe||Y=="file")&&(C.push("//"),(Y=this.o)&&C.push(It(Y,rr,!0),"@"),C.push(encodeURIComponent(String(pe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),pe=this.s,pe!=null&&C.push(":",String(pe))),(pe=this.l)&&(this.g&&pe.charAt(0)!="/"&&C.push("/"),C.push(It(pe,pe.charAt(0)=="/"?Bt:er,!0))),(pe=this.i.toString())&&C.push("?",pe),(pe=this.m)&&C.push("#",It(pe,wr)),C.join("")};function nt(C){return new je(C)}function dt(C,Y,pe){C.j=pe?et(Y,!0):Y,C.j&&(C.j=C.j.replace(/:$/,""))}function Nt(C,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);C.s=Y}else C.s=null}function Qe(C,Y,pe){Y instanceof Ft?(C.i=Y,ia(C.i,C.h)):(pe||(Y=It(Y,br)),C.i=new Ft(Y,C.h))}function ot(C,Y,pe){C.i.set(Y,pe)}function _t(C){return ot(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function et(C,Y){return C?Y?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function It(C,Y,pe){return typeof C=="string"?(C=encodeURI(C).replace(Y,Vt),pe&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Vt(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var rr=/[#\/\?@]/g,er=/[#\?:]/g,Bt=/[#\?]/g,br=/[#\?@]/g,wr=/#/g;function Ft(C,Y){this.h=this.g=null,this.i=C||null,this.j=!!Y}function Zt(C){C.g||(C.g=new Map,C.h=0,C.i&&ur(C.i,function(Y,pe){C.add(decodeURIComponent(Y.replace(/\+/g," ")),pe)}))}t=Ft.prototype,t.add=function(C,Y){Zt(this),this.i=null,C=Sr(this,C);var pe=this.g.get(C);return pe||this.g.set(C,pe=[]),pe.push(Y),this.h+=1,this};function dr(C,Y){Zt(C),Y=Sr(C,Y),C.g.has(Y)&&(C.i=null,C.h-=C.g.get(Y).length,C.g.delete(Y))}function Rr(C,Y){return Zt(C),Y=Sr(C,Y),C.g.has(Y)}t.forEach=function(C,Y){Zt(this),this.g.forEach(function(pe,ze){pe.forEach(function(Dt){C.call(Y,Dt,ze,this)},this)},this)},t.na=function(){Zt(this);const C=Array.from(this.g.values()),Y=Array.from(this.g.keys()),pe=[];for(let ze=0;ze<Y.length;ze++){const Dt=C[ze];for(let Xt=0;Xt<Dt.length;Xt++)pe.push(Y[ze])}return pe},t.V=function(C){Zt(this);let Y=[];if(typeof C=="string")Rr(this,C)&&(Y=Y.concat(this.g.get(Sr(this,C))));else{C=Array.from(this.g.values());for(let pe=0;pe<C.length;pe++)Y=Y.concat(C[pe])}return Y},t.set=function(C,Y){return Zt(this),this.i=null,C=Sr(this,C),Rr(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[Y]),this.h+=1,this},t.get=function(C,Y){return C?(C=this.V(C),0<C.length?String(C[0]):Y):Y};function Wr(C,Y,pe){dr(C,Y),0<pe.length&&(C.i=null,C.g.set(Sr(C,Y),p(pe)),C.h+=pe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],Y=Array.from(this.g.keys());for(var pe=0;pe<Y.length;pe++){var ze=Y[pe];const Xt=encodeURIComponent(String(ze)),Pr=this.V(ze);for(ze=0;ze<Pr.length;ze++){var Dt=Xt;Pr[ze]!==""&&(Dt+="="+encodeURIComponent(String(Pr[ze]))),C.push(Dt)}}return this.i=C.join("&")};function Sr(C,Y){return Y=String(Y),C.j&&(Y=Y.toLowerCase()),Y}function ia(C,Y){Y&&!C.j&&(Zt(C),C.i=null,C.g.forEach(function(pe,ze){var Dt=ze.toLowerCase();ze!=Dt&&(dr(this,ze),Wr(this,Dt,pe))},C)),C.j=Y}function _a(C,Y){const pe=new le;if(l.Image){const ze=new Image;ze.onload=h(En,pe,"TestLoadImage: loaded",!0,Y,ze),ze.onerror=h(En,pe,"TestLoadImage: error",!1,Y,ze),ze.onabort=h(En,pe,"TestLoadImage: abort",!1,Y,ze),ze.ontimeout=h(En,pe,"TestLoadImage: timeout",!1,Y,ze),l.setTimeout(function(){ze.ontimeout&&ze.ontimeout()},1e4),ze.src=C}else Y(!1)}function ha(C,Y){const pe=new le,ze=new AbortController,Dt=setTimeout(()=>{ze.abort(),En(pe,"TestPingServer: timeout",!1,Y)},1e4);fetch(C,{signal:ze.signal}).then(Xt=>{clearTimeout(Dt),Xt.ok?En(pe,"TestPingServer: ok",!0,Y):En(pe,"TestPingServer: server error",!1,Y)}).catch(()=>{clearTimeout(Dt),En(pe,"TestPingServer: error",!1,Y)})}function En(C,Y,pe,ze,Dt){try{Dt&&(Dt.onload=null,Dt.onerror=null,Dt.onabort=null,Dt.ontimeout=null),ze(pe)}catch{}}function vs(){this.g=new it}function Fd(C,Y,pe){const ze=pe||"";try{tn(C,function(Dt,Xt){let Pr=Dt;u(Dt)&&(Pr=Xe(Dt)),Y.push(ze+Xt+"="+encodeURIComponent(Pr))})}catch(Dt){throw Y.push(ze+"type="+encodeURIComponent("_badmap")),Dt}}function Tn(C){this.l=C.Ub||null,this.j=C.eb||!1}m(Tn,de),Tn.prototype.g=function(){return new To(this.l,this.j)},Tn.prototype.i=function(C){return function(){return C}}({});function To(C,Y){jt.call(this),this.D=C,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(To,jt),t=To.prototype,t.open=function(C,Y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=Y,this.readyState=1,$i(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(Y.body=C),(this.D||l).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sc(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sc(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var Y=C.value?C.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!C.done}))&&(this.response=this.responseText+=Y)}C.done?Gs(this):$i(this),this.readyState==3&&Sc(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,Gs(this))},t.Qa=function(C){this.g&&(this.response=C,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(C){C.readyState=4,C.l=null,C.j=null,C.v=null,$i(C)}t.setRequestHeader=function(C,Y){this.u.append(C,Y)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],Y=this.h.entries();for(var pe=Y.next();!pe.done;)pe=pe.value,C.push(pe[0]+": "+pe[1]),pe=Y.next();return C.join(`\r
`)};function $i(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Gi(C){let Y="";return I(C,function(pe,ze){Y+=ze,Y+=":",Y+=pe,Y+=`\r
`}),Y}function Ic(C,Y,pe){e:{for(ze in pe){var ze=!1;break e}ze=!0}ze||(pe=Gi(pe),typeof C=="string"?pe!=null&&encodeURIComponent(String(pe)):ot(C,Y,pe))}function ca(C){jt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(ca,jt);var ru=/^https?$/i,QA=["POST","PUT"];t=ca.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,Y,pe,ze){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);Y=Y?Y.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ue.g(),this.v=this.o?Ce(this.o):Ce(ue),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(Y,String(C),!0),this.B=!1}catch(Xt){jc(this,Xt);return}if(C=pe||"",pe=new Map(this.headers),ze)if(Object.getPrototypeOf(ze)===Object.prototype)for(var Dt in ze)pe.set(Dt,ze[Dt]);else if(typeof ze.keys=="function"&&typeof ze.get=="function")for(const Xt of ze.keys())pe.set(Xt,ze.get(Xt));else throw Error("Unknown input type for opt_headers: "+String(ze));ze=Array.from(pe.keys()).find(Xt=>Xt.toLowerCase()=="content-type"),Dt=l.FormData&&C instanceof l.FormData,!(0<=Array.prototype.indexOf.call(QA,Y,void 0))||ze||Dt||pe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Xt,Pr]of pe)this.g.setRequestHeader(Xt,Pr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rc(this),this.u=!0,this.g.send(C),this.u=!1}catch(Xt){jc(this,Xt)}};function jc(C,Y){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=Y,C.m=5,_f(C),el(C)}function _f(C){C.A||(C.A=!0,Ue(C,"complete"),Ue(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ue(this,"complete"),Ue(this,"abort"),el(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),el(this,!0)),ca.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Od(this):this.bb())},t.bb=function(){Od(this)};function Od(C){if(C.h&&typeof o<"u"&&(!C.v[1]||ys(C)!=4||C.Z()!=2)){if(C.u&&ys(C)==4)ye(C.Ea,0,C);else if(Ue(C,"readystatechange"),ys(C)==4){C.h=!1;try{const Pr=C.Z();e:switch(Pr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var pe;if(!(pe=Y)){var ze;if(ze=Pr===0){var Dt=String(C.D).match(mt)[1]||null;!Dt&&l.self&&l.self.location&&(Dt=l.self.location.protocol.slice(0,-1)),ze=!ru.test(Dt?Dt.toLowerCase():"")}pe=ze}if(pe)Ue(C,"complete"),Ue(C,"success");else{C.m=6;try{var Xt=2<ys(C)?C.g.statusText:""}catch{Xt=""}C.l=Xt+" ["+C.Z()+"]",_f(C)}}finally{el(C)}}}}function el(C,Y){if(C.g){rc(C);const pe=C.g,ze=C.v[0]?()=>{}:null;C.g=null,C.v=null,Y||Ue(C,"ready");try{pe.onreadystatechange=ze}catch{}}}function rc(C){C.I&&(l.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function ys(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<ys(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var Y=this.g.responseText;return C&&Y.indexOf(C)==0&&(Y=Y.substring(C.length)),vt(Y)}};function Ef(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function VA(C){const Y={};C=(C.g&&2<=ys(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ze=0;ze<C.length;ze++){if(y(C[ze]))continue;var pe=k(C[ze]);const Dt=pe[0];if(pe=pe[1],typeof pe!="string")continue;pe=pe.trim();const Xt=Y[Dt]||[];Y[Dt]=Xt,Xt.push(pe)}_(Y,function(ze){return ze.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(C,Y,pe){return pe&&pe.internalChannelParams&&pe.internalChannelParams[C]||Y}function Pc(C){this.Aa=0,this.i=[],this.j=new le,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,C),this.cb=Ni("retryDelaySeedMs",1e4,C),this.Wa=Ni("forwardChannelMaxRetries",2,C),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Vr(C&&C.concurrentRequestLimit),this.Da=new vs,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pc.prototype,t.la=8,t.G=1,t.connect=function(C,Y,pe,ze){xe(0),this.W=C,this.H=Y||{},pe&&ze!==void 0&&(this.H.OSID=pe,this.H.OAID=ze),this.F=this.X,this.I=Oa(this,null,this.W),V(this)};function Sf(C){if(Um(C),C.G==3){var Y=C.U++,pe=nt(C.I);if(ot(pe,"SID",C.K),ot(pe,"RID",Y),ot(pe,"TYPE","terminate"),bt(C,pe),Y=new rt(C,C.j,Y),Y.L=2,Y.v=_t(nt(pe)),pe=!1,l.navigator&&l.navigator.sendBeacon)try{pe=l.navigator.sendBeacon(Y.v.toString(),"")}catch{}!pe&&l.Image&&(new Image().src=Y.v,pe=!0),pe||(Y.g=di(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),kt(Y)}Ks(C)}function Mu(C){C.g&&(zr(C),C.g.cancel(),C.g=null)}function Um(C){Mu(C),C.u&&(l.clearTimeout(C.u),C.u=null),bn(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&l.clearTimeout(C.s),C.s=null)}function V(C){if(!fn(C.h)&&!C.s){C.s=!0;var Y=C.Ga;fe||Pe(),me||(fe(),me=!0),ne.add(Y,C),C.B=0}}function Ee(C,Y){return Zn(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=Y.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Oe(A(C.Ga,C,Y),ra(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Dt=new rt(this,this.j,C);let Xt=this.o;if(this.S&&(Xt?(Xt=S(Xt),F(Xt,this.S)):Xt=this.S),this.m!==null||this.O||(Dt.H=Xt,Xt=null),this.P)e:{for(var Y=0,pe=0;pe<this.i.length;pe++){t:{var ze=this.i[pe];if("__data__"in ze.map&&(ze=ze.map.__data__,typeof ze=="string")){ze=ze.length;break t}ze=void 0}if(ze===void 0)break;if(Y+=ze,4096<Y){Y=pe;break e}if(Y===4096||pe===this.i.length-1){Y=pe+1;break e}}Y=1e3}else Y=1e3;Y=Tt(this,Dt,Y),pe=nt(this.I),ot(pe,"RID",C),ot(pe,"CVER",22),this.D&&ot(pe,"X-HTTP-Session-Id",this.D),bt(this,pe),Xt&&(this.O?Y="headers="+encodeURIComponent(String(Gi(Xt)))+"&"+Y:this.m&&Ic(pe,this.m,Xt)),zt(this.h,Dt),this.Ua&&ot(pe,"TYPE","init"),this.P?(ot(pe,"$req",Y),ot(pe,"SID","null"),Dt.T=!0,Ot(Dt,pe,null)):Ot(Dt,pe,Y),this.G=2}}else this.G==3&&(C?lt(this,C):this.i.length==0||fn(this.h)||lt(this))};function lt(C,Y){var pe;Y?pe=Y.l:pe=C.U++;const ze=nt(C.I);ot(ze,"SID",C.K),ot(ze,"RID",pe),ot(ze,"AID",C.T),bt(C,ze),C.m&&C.o&&Ic(ze,C.m,C.o),pe=new rt(C,C.j,pe,C.B+1),C.m===null&&(pe.H=C.o),Y&&(C.i=Y.D.concat(C.i)),Y=Tt(C,pe,1e3),pe.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),zt(C.h,pe),Ot(pe,ze,Y)}function bt(C,Y){C.H&&I(C.H,function(pe,ze){ot(Y,ze,pe)}),C.l&&tn({},function(pe,ze){ot(Y,ze,pe)})}function Tt(C,Y,pe){pe=Math.min(C.i.length,pe);var ze=C.l?A(C.l.Na,C.l,C):null;e:{var Dt=C.i;let Xt=-1;for(;;){const Pr=["count="+pe];Xt==-1?0<pe?(Xt=Dt[0].g,Pr.push("ofs="+Xt)):Xt=0:Pr.push("ofs="+Xt);let oa=!0;for(let Ws=0;Ws<pe;Ws++){let zn=Dt[Ws].g;const va=Dt[Ws].map;if(zn-=Xt,0>zn)Xt=Math.max(0,Dt[Ws].g-100),oa=!1;else try{Fd(va,Pr,"req"+zn+"_")}catch{ze&&ze(va)}}if(oa){ze=Pr.join("&");break e}}}return C=C.i.splice(0,pe),Y.D=C,ze}function fr(C){if(!C.g&&!C.u){C.Y=1;var Y=C.Fa;fe||Pe(),me||(fe(),me=!0),ne.add(Y,C),C.v=0}}function gr(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Oe(A(C.Fa,C),ra(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Oe(A(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xe(10),Mu(this),rn(this))};function zr(C){C.A!=null&&(l.clearTimeout(C.A),C.A=null)}function rn(C){C.g=new rt(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var Y=nt(C.qa);ot(Y,"RID","rpc"),ot(Y,"SID",C.K),ot(Y,"AID",C.T),ot(Y,"CI",C.F?"0":"1"),!C.F&&C.ja&&ot(Y,"TO",C.ja),ot(Y,"TYPE","xmlhttp"),bt(C,Y),C.m&&C.o&&Ic(Y,C.m,C.o),C.L&&(C.g.I=C.L);var pe=C.g;C=C.ia,pe.L=1,pe.v=_t(nt(Y)),pe.m=null,pe.P=!0,Se(pe,C)}t.Za=function(){this.C!=null&&(this.C=null,Mu(this),gr(this),xe(19))};function bn(C){C.C!=null&&(l.clearTimeout(C.C),C.C=null)}function kn(C,Y){var pe=null;if(C.g==Y){bn(C),zr(C),C.g=null;var ze=2}else if(Bn(C.h,Y))pe=Y.D,pr(C.h,Y),ze=1;else return;if(C.G!=0){if(Y.o)if(ze==1){pe=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var Dt=C.B;ze=Mt(),Ue(ze,new ie(ze,pe)),V(C)}else fr(C);else if(Dt=Y.s,Dt==3||Dt==0&&0<Y.X||!(ze==1&&Ee(C,Y)||ze==2&&gr(C)))switch(pe&&0<pe.length&&(Y=C.h,Y.i=Y.i.concat(pe)),Dt){case 1:Ea(C,5);break;case 4:Ea(C,10);break;case 3:Ea(C,6);break;default:Ea(C,2)}}}function ra(C,Y){let pe=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(pe*=2),pe*Y}function Ea(C,Y){if(C.j.info("Error code "+Y),Y==2){var pe=A(C.fb,C),ze=C.Xa;const Dt=!ze;ze=new je(ze||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||dt(ze,"https"),_t(ze),Dt?_a(ze.toString(),pe):ha(ze.toString(),pe)}else xe(2);C.G=0,C.l&&C.l.sa(Y),Ks(C),Um(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))};function Ks(C){if(C.G=0,C.ka=[],C.l){const Y=Gt(C.h);(Y.length!=0||C.i.length!=0)&&(x(C.ka,Y),x(C.ka,C.i),C.h.i.length=0,p(C.i),C.i.length=0),C.l.ra()}}function Oa(C,Y,pe){var ze=pe instanceof je?nt(pe):new je(pe);if(ze.g!="")Y&&(ze.g=Y+"."+ze.g),Nt(ze,ze.s);else{var Dt=l.location;ze=Dt.protocol,Y=Y?Y+"."+Dt.hostname:Dt.hostname,Dt=+Dt.port;var Xt=new je(null);ze&&dt(Xt,ze),Y&&(Xt.g=Y),Dt&&Nt(Xt,Dt),pe&&(Xt.l=pe),ze=Xt}return pe=C.D,Y=C.ya,pe&&Y&&ot(ze,pe,Y),ot(ze,"VER",C.la),bt(C,ze),ze}function di(C,Y,pe){if(Y&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return Y=C.Ca&&!C.pa?new ca(new Tn({eb:pe})):new ca(C.pa),Y.Ha(C.J),Y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qs(){}t=qs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fi(){}fi.prototype.g=function(C,Y){return new zs(C,Y)};function zs(C,Y){jt.call(this),this.g=new Pc(Y),this.l=C,this.h=Y&&Y.messageUrlParams||null,C=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(C?C["X-WebChannel-Content-Type"]=Y.messageContentType:C={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(C?C["X-WebChannel-Client-Profile"]=Y.va:C={"X-WebChannel-Client-Profile":Y.va}),this.g.S=C,(C=Y&&Y.Sb)&&!y(C)&&(this.g.m=C),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!y(Y)&&(this.g.D=Y,C=this.h,C!==null&&Y in C&&(C=this.h,Y in C&&delete C[Y])),this.j=new Uu(this)}m(zs,jt),zs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zs.prototype.close=function(){Sf(this.g)},zs.prototype.o=function(C){var Y=this.g;if(typeof C=="string"){var pe={};pe.__data__=C,C=pe}else this.u&&(pe={},pe.__data__=Xe(C),C=pe);Y.i.push(new Mr(Y.Ya++,C)),Y.G==3&&V(Y)},zs.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,zs.aa.N.call(this)};function Bc(C){we.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var Y=C.__sm__;if(Y){e:{for(const pe in Y){C=pe;break e}C=void 0}(this.i=C)&&(C=this.i,Y=Y!==null&&C in Y?Y[C]:void 0),this.data=Y}else this.data=C}m(Bc,we);function Lu(){Le.call(this),this.status=1}m(Lu,Le);function Uu(C){this.g=C}m(Uu,qs),Uu.prototype.ua=function(){Ue(this.g,"a")},Uu.prototype.ta=function(C){Ue(this.g,new Bc(C))},Uu.prototype.sa=function(C){Ue(this.g,new Lu)},Uu.prototype.ra=function(){Ue(this.g,"b")},fi.prototype.createWebChannel=fi.prototype.g,zs.prototype.send=zs.prototype.o,zs.prototype.open=zs.prototype.m,zs.prototype.close=zs.prototype.close,pJ=function(){return new fi},mJ=function(){return Mt()},AJ=gt,BT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},G.NO_ERROR=0,G.TIMEOUT=8,G.HTTP_ERROR=6,z_=G,re.COMPLETE="complete",hJ=re,Ye.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",jt.prototype.listen=jt.prototype.K,ky=Ye,ca.prototype.listenOnce=ca.prototype.L,ca.prototype.getLastError=ca.prototype.Ka,ca.prototype.getLastErrorCode=ca.prototype.Ba,ca.prototype.getStatus=ca.prototype.Z,ca.prototype.getResponseJson=ca.prototype.Oa,ca.prototype.getResponseText=ca.prototype.oa,ca.prototype.send=ca.prototype.ea,ca.prototype.setWithCredentials=ca.prototype.Ha,fJ=ca}).apply(typeof zN<"u"?zN:typeof self<"u"?self:typeof window<"u"?window:{});const r7="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pl.UNAUTHENTICATED=new pl(null),pl.GOOGLE_CREDENTIALS=new pl("google-credentials-uid"),pl.FIRST_PARTY=new pl("first-party-uid"),pl.MOCK_USER=new pl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new uD("@firebase/firestore");function yx(){return Jp.logLevel}function Er(t,...e){if(Jp.logLevel<=aa.DEBUG){const r=e.map(SD);Jp.debug(`Firestore (${n1}): ${t}`,...r)}}function pc(t,...e){if(Jp.logLevel<=aa.ERROR){const r=e.map(SD);Jp.error(`Firestore (${n1}): ${t}`,...r)}}function hm(t,...e){if(Jp.logLevel<=aa.WARN){const r=e.map(SD);Jp.warn(`Firestore (${n1}): ${t}`,...r)}}function SD(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t="Unexpected state"){const e=`FIRESTORE (${n1}) INTERNAL ASSERTION FAILED: `+t;throw pc(e),new Error(e)}function on(t,e){t||en()}function Pn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kr extends SA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(pl.UNAUTHENTICATED))}shutdown(){}}class gxe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class xxe{constructor(e){this.t=e,this.currentUser=pl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){on(this.o===void 0);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new lf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lf,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{Er("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Er("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lf)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Er("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(on(typeof n.accessToken=="string"),new gJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return on(e===null||typeof e=="string"),new pl(e)}}class vxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=pl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yxe{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new vxe(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(pl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bxe{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wxe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){on(this.o===void 0);const n=s=>{s.error!=null&&Er("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Er("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Er("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?a(s):Er("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(on(typeof r.token=="string"),this.R=r.token,new bxe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Nxe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%e.length))}return n}}function Rn(t,e){return t<e?-1:t>e?1:0}function Ev(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function vJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new kr(lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new kr(lr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new kr(lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kr(lr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new xr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hn(e)}static min(){return new hn(new xr(0,0))}static max(){return new hn(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,r,n){r===void 0?r=0:r>e.length&&en(),n===void 0?n=e.length-r:n>e.length-r&&en(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return i2.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof i2?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=e.get(a),o=r.get(a);if(s<o)return-1;if(s>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class wa extends i2{construct(e,r,n){return new wa(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new kr(lr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new wa(r)}static emptyPath(){return new wa([])}}const Cxe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ls extends i2{construct(e,r,n){return new Ls(e,r,n)}static isValidIdentifier(e){return Cxe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ls(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new kr(lr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new kr(lr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new kr(lr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new kr(lr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ls(r)}static emptyPath(){return new Ls([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.path=e}static fromPath(e){return new Hr(wa.fromString(e))}static fromName(e){return new Hr(wa.fromString(e).popFirst(5))}static empty(){return new Hr(wa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wa.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return wa.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Hr(new wa(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function TT(t){return t.fields.find(e=>e.kind===2)}function rp(t){return t.fields.filter(e=>e.kind!==2)}XE.UNKNOWN_ID=-1;class W_{constructor(e,r){this.fieldPath=e,this.kind=r}}class o2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new o2(0,Bu.min())}}function _xe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=hn.fromTimestamp(n===1e9?new xr(r+1,0):new xr(r,n));return new Bu(a,Hr.empty(),e)}function yJ(t){return new Bu(t.readTime,t.key,-1)}class Bu{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Bu(hn.min(),Hr.empty(),-1)}static max(){return new Bu(hn.max(),Hr.empty(),-1)}}function jD(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Hr.comparator(t.documentKey,e.documentKey),r!==0?r:Rn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(t){if(t.code!==lr.FAILED_PRECONDITION||t.message!==bJ)throw t;Er("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new qt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof qt?r:qt.resolve(r)}catch(r){return qt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):qt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):qt.reject(r)}static resolve(e){return new qt((r,n)=>{r(e)})}static reject(e){return new qt((r,n)=>{n(e)})}static waitFor(e){return new qt((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=qt.resolve(!1);for(const n of e)r=r.next(a=>a?qt.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new qt((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new qt((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new lf,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new cb(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=PD(n.target.error);this.V.reject(new cb(e,a))}}static open(e,r,n,a){try{return new fj(r,e.transaction(a,n))}catch(s){throw new cb(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Er("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Sxe(r)}}class am{constructor(e,r,n){this.name=e,this.version=r,this.p=n,am.S(_o())===12.2&&pc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Er("SimpleDb","Removing database:",e),cp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!EY())return!1;if(am.v())return!0;const e=_o(),r=am.S(e),n=0<r&&r<10,a=NJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Er("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new cb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new kr(lr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new kr(lr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new cb(e,o))},a.onupgradeneeded=s=>{Er("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,a.transaction,s.oldVersion,this.version).next(()=>{Er("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const l=fj.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.g(),u)).catch(u=>(l.abort(u),qt.reject(u))).toPromise();return c.catch(()=>{}),await l.m,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(Er("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function NJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Exe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return cp(this.B.delete())}}class cb extends kr{constructor(e,r){super(lr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function km(t){return t.name==="IndexedDbTransactionError"}class Sxe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Er("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Er("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cp(n)}add(e){return Er("SimpleDb","ADD",this.store.name,e,e),cp(this.store.add(e))}get(e){return cp(this.store.get(e)).next(r=>(r===void 0&&(r=null),Er("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Er("SimpleDb","DELETE",this.store.name,e),cp(this.store.delete(e))}count(){return Er("SimpleDb","COUNT",this.store.name),cp(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new qt((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.W(s,(l,c)=>{o.push(c)}).next(()=>o)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new qt((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}j(e,r){Er("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,(s,o,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new qt((n,a)=>{r.onerror=s=>{const o=PD(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}W(e,r){const n=[];return new qt((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new Exe(l),u=r(l.primaryKey,l.value,c);if(u instanceof qt){const d=u.catch(f=>(c.done(),qt.reject(f)));n.push(d)}c.isDone?a():c.K===null?l.continue():l.continue(c.K)}}).next(()=>qt.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function cp(t){return new qt((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=PD(n.target.error);r(a)}})}let n7=!1;function PD(t){const e=am.S(_o());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new kr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return n7||(n7=!0,setTimeout(()=>{throw n},0)),n}}return t}class Ixe{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Er("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Er("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){km(r)?Er("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Cg(r)}await this.X(6e4)})}}class jxe{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let a=r,s=!0;return qt.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return Er("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(a,s)).next(l=>(Er("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}re(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=yJ(s);jD(o,n)>0&&(n=o)}),new Bu(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}fd.oe=-1;function xw(t){return t==null}function l2(t){return t===0&&1/t==-1/0}function Pxe(t){return typeof t=="number"&&Number.isInteger(t)&&!l2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=a7(e)),e=Bxe(t.get(r),e);return a7(e)}function Bxe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function a7(t){return t+""}function Gf(t){const e=t.length;if(on(e>=2),e===2)return on(t.charAt(0)===""&&t.charAt(1)===""),wa.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>r)&&en(),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:en()}s=o+2}return new wa(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e){return[t,vc(e)]}function CJ(t,e,r){return[t,vc(e),r]}const Txe={},kxe=["prefixPath","collectionGroup","readTime","documentId"],Fxe=["prefixPath","collectionGroup","documentId"],Oxe=["collectionGroup","readTime","prefixPath","documentId"],Dxe=["canonicalId","targetId"],Rxe=["targetId","path"],Mxe=["path","targetId"],Lxe=["collectionId","parent"],Uxe=["indexId","uid"],Qxe=["uid","sequenceNumber"],Vxe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hxe=["indexId","uid","orderedDocumentKey"],$xe=["userId","collectionPath","documentId"],Gxe=["userId","collectionPath","largestBatchId"],Kxe=["userId","collectionGroup","largestBatchId"],_J=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qxe=[..._J,"documentOverlays"],EJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SJ=EJ,BD=[...SJ,"indexConfiguration","indexState","indexEntries"],zxe=BD,Wxe=[...BD,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends wJ{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function So(t,e){const r=Pn(t);return am.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function _g(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function IJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,r){this.comparator=e,this.root=r||gl.EMPTY}insert(e,r){return new Hs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,gl.BLACK,null,null))}remove(e){return new Hs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gl.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new WN(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new WN(this.root,e,this.comparator,!1)}getReverseIterator(){return new WN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new WN(this.root,e,this.comparator,!0)}}class WN{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gl{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??gl.RED,this.left=a??gl.EMPTY,this.right=s??gl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new gl(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return gl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return gl.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const e=this.left.check();if(e!==this.right.check())throw en();return e+(this.isRed()?0:1)}}gl.EMPTY=null,gl.RED=!0,gl.BLACK=!1;gl.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(e,r,n,a,s){return this}insert(e,r,n){return new gl(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this.comparator=e,this.data=new Hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new o7(this.data.getIterator())}getIteratorFrom(e){return new o7(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof rs)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new rs(this.comparator);return r.data=e,r}}class o7{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.fields=e,e.sort(Ls.comparator)}static empty(){return new Kc([])}unionWith(e){let r=new rs(Ls.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Kc(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ev(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jJ("Invalid base64 string: "+s):s}}(e);return new Vi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new Vi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const Xxe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hA(t){if(on(!!t),typeof t=="string"){let e=0;const r=Xxe.exec(t);if(on(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ds(t.seconds),nanos:Ds(t.nanos)}}function Ds(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Am(t){return typeof t=="string"?Vi.fromBase64String(t):Vi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function kD(t){const e=t.mapValue.fields.__previous_value__;return TD(e)?kD(e):e}function c2(t){const e=hA(t.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxe{constructor(e,r,n,a,s,o,l,c,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class mm{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new mm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Y_={nullValue:"NULL_VALUE"};function Zp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?TD(t)?4:PJ(t)?9007199254740991:hj(t)?10:11:en()}function rh(t,e){if(t===e)return!0;const r=Zp(t);if(r!==Zp(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return c2(t).isEqual(c2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=hA(a.timestampValue),l=hA(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return Am(a.bytesValue).isEqual(Am(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return Ds(a.geoPointValue.latitude)===Ds(s.geoPointValue.latitude)&&Ds(a.geoPointValue.longitude)===Ds(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Ds(a.integerValue)===Ds(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=Ds(a.doubleValue),l=Ds(s.doubleValue);return o===l?l2(o)===l2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ev(t.arrayValue.values||[],e.arrayValue.values||[],rh);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(i7(o)!==i7(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!rh(o[c],l[c])))return!1;return!0}(t,e);default:return en()}}function u2(t,e){return(t.values||[]).find(r=>rh(r,e))!==void 0}function pm(t,e){if(t===e)return 0;const r=Zp(t),n=Zp(e);if(r!==n)return Rn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Rn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ds(s.integerValue||s.doubleValue),c=Ds(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return l7(t.timestampValue,e.timestampValue);case 4:return l7(c2(t),c2(e));case 5:return Rn(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Am(s),c=Am(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Rn(l[u],c[u]);if(d!==0)return d}return Rn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Rn(Ds(s.latitude),Ds(o.latitude));return l!==0?l:Rn(Ds(s.longitude),Ds(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c7(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,c,u,d;const f=s.fields||{},A=o.fields||{},h=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=(c=A.value)===null||c===void 0?void 0:c.arrayValue,p=Rn(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return p!==0?p:c7(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===L0.mapValue&&o===L0.mapValue)return 0;if(s===L0.mapValue)return 1;if(o===L0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const A=Rn(c[f],d[f]);if(A!==0)return A;const h=pm(l[c[f]],u[d[f]]);if(h!==0)return h}return Rn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw en()}}function l7(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rn(t,e);const r=hA(t),n=hA(e),a=Rn(r.seconds,n.seconds);return a!==0?a:Rn(r.nanos,n.nanos)}function c7(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=pm(r[a],n[a]);if(s)return s}return Rn(r.length,n.length)}function Sv(t){return FT(t)}function FT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=hA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Am(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Hr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=FT(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${FT(r.fields[o])}`;return a+"}"}(t.mapValue):en()}function d2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function OT(t){return!!t&&"integerValue"in t}function f2(t){return!!t&&"arrayValue"in t}function u7(t){return!!t&&"nullValue"in t}function d7(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function J_(t){return!!t&&"mapValue"in t}function hj(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function ub(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _g(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ub(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ub(t.arrayValue.values[r]);return e}return Object.assign({},t)}function PJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const BJ={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Jxe(t){return"nullValue"in t?Y_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?d2(mm.empty(),Hr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?hj(t)?BJ:{mapValue:{}}:en()}function Zxe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?d2(mm.empty(),Hr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?BJ:"mapValue"in t?hj(t)?{mapValue:{}}:L0:en()}function f7(t,e){const r=pm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function h7(t,e){const r=pm(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.value=e}static empty(){return new vl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!J_(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ub(r)}setAll(e){let r=Ls.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=ub(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());J_(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return rh(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];J_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){_g(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new vl(ub(this.value))}}function TJ(t){const e=[];return _g(t.fields,(r,n)=>{const a=new Ls([r]);if(J_(n)){const s=TJ(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new Kc(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ms(e,0,hn.min(),hn.min(),hn.min(),vl.empty(),0)}static newFoundDocument(e,r,n,a){return new Ms(e,1,r,hn.min(),n,a,0)}static newNoDocument(e,r){return new Ms(e,2,r,hn.min(),hn.min(),vl.empty(),0)}static newUnknownDocument(e,r){return new Ms(e,3,r,hn.min(),hn.min(),vl.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(hn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ms&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ms(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,r){this.position=e,this.inclusive=r}}function A7(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=Hr.comparator(Hr.fromName(o.referenceValue),r.key):n=pm(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function m7(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!rh(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,r="asc"){this.field=e,this.dir=r}}function eve(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{}class sa extends kJ{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new tve(e,r,n):r==="array-contains"?new ave(e,n):r==="in"?new LJ(e,n):r==="not-in"?new sve(e,n):r==="array-contains-any"?new ive(e,n):new sa(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new rve(e,n):new nve(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(pm(r,this.value)):r!==null&&Zp(this.value)===Zp(r)&&this.matchesComparison(pm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return en()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qa extends kJ{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new qa(e,r)}matches(e){return jv(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jv(t){return t.op==="and"}function DT(t){return t.op==="or"}function FD(t){return FJ(t)&&jv(t)}function FJ(t){for(const e of t.filters)if(e instanceof qa)return!1;return!0}function RT(t){if(t instanceof sa)return t.field.canonicalString()+t.op.toString()+Sv(t.value);if(FD(t))return t.filters.map(e=>RT(e)).join(",");{const e=t.filters.map(r=>RT(r)).join(",");return`${t.op}(${e})`}}function OJ(t,e){return t instanceof sa?function(n,a){return a instanceof sa&&n.op===a.op&&n.field.isEqual(a.field)&&rh(n.value,a.value)}(t,e):t instanceof qa?function(n,a){return a instanceof qa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&OJ(o,a.filters[l]),!0):!1}(t,e):void en()}function DJ(t,e){const r=t.filters.concat(e);return qa.create(r,t.op)}function RJ(t){return t instanceof sa?function(r){return`${r.field.canonicalString()} ${r.op} ${Sv(r.value)}`}(t):t instanceof qa?function(r){return r.op.toString()+" {"+r.getFilters().map(RJ).join(" ,")+"}"}(t):"Filter"}class tve extends sa{constructor(e,r,n){super(e,r,n),this.key=Hr.fromName(n.referenceValue)}matches(e){const r=Hr.comparator(e.key,this.key);return this.matchesComparison(r)}}class rve extends sa{constructor(e,r){super(e,"in",r),this.keys=MJ("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nve extends sa{constructor(e,r){super(e,"not-in",r),this.keys=MJ("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function MJ(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Hr.fromName(n.referenceValue))}class ave extends sa{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return f2(r)&&u2(r.arrayValue,this.value)}}class LJ extends sa{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&u2(this.value.arrayValue,r)}}class sve extends sa{constructor(e,r){super(e,"not-in",r)}matches(e){if(u2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!u2(this.value.arrayValue,r)}}class ive extends sa{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!f2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>u2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ove{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function MT(t,e=null,r=[],n=[],a=null,s=null,o=null){return new ove(t,e,r,n,a,s,o)}function eg(t){const e=Pn(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>RT(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),xw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Sv(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Sv(n)).join(",")),e.ue=r}return e.ue}function vw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!eve(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!OJ(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m7(t.startAt,e.startAt)&&m7(t.endAt,e.endAt)}function YE(t){return Hr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function JE(t,e){return t.filters.filter(r=>r instanceof sa&&r.field.isEqual(e))}function p7(t,e,r){let n=Y_,a=!0;for(const s of JE(t,e)){let o=Y_,l=!0;switch(s.op){case"<":case"<=":o=Jxe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=Y_}f7({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];f7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function g7(t,e,r){let n=L0,a=!0;for(const s of JE(t,e)){let o=L0,l=!0;switch(s.op){case">=":case">":o=Zxe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=L0}h7({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];h7({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lve(t,e,r,n,a,s,o,l){return new a1(t,e,r,n,a,s,o,l)}function yw(t){return new a1(t)}function x7(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function UJ(t){return t.collectionGroup!==null}function db(t){const e=Pn(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rs(Ls.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new h2(s,n))}),r.has(Ls.keyField().canonicalString())||e.ce.push(new h2(Ls.keyField(),n))}return e.ce}function xd(t){const e=Pn(t);return e.le||(e.le=cve(e,db(t))),e.le}function cve(t,e){if(t.limitType==="F")return MT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new h2(a.field,s)});const r=t.endAt?new Iv(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Iv(t.startAt.position,t.startAt.inclusive):null;return MT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function LT(t,e){const r=t.filters.concat([e]);return new a1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ZE(t,e,r){return new a1(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Aj(t,e){return vw(xd(t),xd(e))&&t.limitType===e.limitType}function QJ(t){return`${eg(xd(t))}|lt:${t.limitType}`}function bx(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>RJ(a)).join(", ")}]`),xw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Sv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Sv(a)).join(",")),`Target(${n})`}(xd(t))}; limitType=${t.limitType})`}function bw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Hr.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of db(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=A7(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,db(n),a)||n.endAt&&!function(o,l,c){const u=A7(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,db(n),a))}(t,e)}function uve(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VJ(t){return(e,r)=>{let n=!1;for(const a of db(t)){const s=dve(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function dve(t,e,r){const n=t.field.isKeyField()?Hr.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?pm(c,u):en()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return en()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){_g(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return IJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fve=new Hs(Hr.comparator);function Cu(){return fve}const HJ=new Hs(Hr.comparator);function Fy(...t){let e=HJ;for(const r of t)e=e.insert(r.key,r);return e}function $J(t){let e=HJ;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Kf(){return fb()}function GJ(){return fb()}function fb(){return new Fm(t=>t.toString(),(t,e)=>t.isEqual(e))}const hve=new Hs(Hr.comparator),Ave=new rs(Hr.comparator);function qn(...t){let e=Ave;for(const r of t)e=e.add(r);return e}const mve=new rs(Rn);function pve(){return mve}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:l2(e)?"-0":e}}function KJ(t){return{integerValue:""+t}}function gve(t,e){return Pxe(e)?KJ(e):OD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this._=void 0}}function xve(t,e,r){return t instanceof A2?function(a,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&TD(s)&&(s=kD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(r,e):t instanceof tg?zJ(t,e):t instanceof Pv?WJ(t,e):function(a,s){const o=qJ(a,s),l=v7(o)+v7(a.Pe);return OT(o)&&OT(a.Pe)?KJ(l):OD(a.serializer,l)}(t,e)}function vve(t,e,r){return t instanceof tg?zJ(t,e):t instanceof Pv?WJ(t,e):r}function qJ(t,e){return t instanceof m2?function(n){return OT(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class A2 extends mj{}class tg extends mj{constructor(e){super(),this.elements=e}}function zJ(t,e){const r=XJ(e);for(const n of t.elements)r.some(a=>rh(a,n))||r.push(n);return{arrayValue:{values:r}}}class Pv extends mj{constructor(e){super(),this.elements=e}}function WJ(t,e){let r=XJ(e);for(const n of t.elements)r=r.filter(a=>!rh(a,n));return{arrayValue:{values:r}}}class m2 extends mj{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function v7(t){return Ds(t.integerValue||t.doubleValue)}function XJ(t){return f2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(e,r){this.field=e,this.transform=r}}function yve(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof tg&&a instanceof tg||n instanceof Pv&&a instanceof Pv?Ev(n.elements,a.elements,rh):n instanceof m2&&a instanceof m2?rh(n.Pe,a.Pe):n instanceof A2&&a instanceof A2}(t.transform,e.transform)}class bve{constructor(e,r){this.version=e,this.transformResults=r}}class Us{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Z_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pj{}function JJ(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new i1(t.key,Us.none()):new s1(t.key,t.data,Us.none());{const r=t.data,n=vl.empty();let a=new rs(Ls.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new PA(t.key,n,new Kc(a.toArray()),Us.none())}}function wve(t,e,r){t instanceof s1?function(a,s,o){const l=a.value.clone(),c=b7(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof PA?function(a,s,o){if(!Z_(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=b7(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(ZJ(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function hb(t,e,r,n){return t instanceof s1?function(s,o,l,c){if(!Z_(s.precondition,o))return l;const u=s.value.clone(),d=w7(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof PA?function(s,o,l,c){if(!Z_(s.precondition,o))return l;const u=w7(s.fieldTransforms,c,o),d=o.data;return d.setAll(ZJ(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return Z_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Nve(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=qJ(n.transform,a||null);s!=null&&(r===null&&(r=vl.empty()),r.set(n.field,s))}return r||null}function y7(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Ev(n,a,(s,o)=>yve(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class s1 extends pj{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class PA extends pj{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZJ(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function b7(t,e,r){const n=new Map;on(t.length===r.length);for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,vve(o,l,r[a]))}return n}function w7(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,xve(s,o,e))}return n}class i1 extends pj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DD extends pj{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&wve(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=hb(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=hb(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=GJ();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=JJ(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(hn.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qn())}isEqual(e){return this.batchId===e.batchId&&Ev(this.mutations,e.mutations,(r,n)=>y7(r,n))&&Ev(this.baseMutations,e.baseMutations,(r,n)=>y7(r,n))}}class MD{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){on(e.mutations.length===n.length);let a=function(){return hve}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new MD(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zi,da;function eZ(t){switch(t){default:return en();case lr.CANCELLED:case lr.UNKNOWN:case lr.DEADLINE_EXCEEDED:case lr.RESOURCE_EXHAUSTED:case lr.INTERNAL:case lr.UNAVAILABLE:case lr.UNAUTHENTICATED:return!1;case lr.INVALID_ARGUMENT:case lr.NOT_FOUND:case lr.ALREADY_EXISTS:case lr.PERMISSION_DENIED:case lr.FAILED_PRECONDITION:case lr.ABORTED:case lr.OUT_OF_RANGE:case lr.UNIMPLEMENTED:case lr.DATA_LOSS:return!0}}function tZ(t){if(t===void 0)return pc("GRPC error has no .code"),lr.UNKNOWN;switch(t){case zi.OK:return lr.OK;case zi.CANCELLED:return lr.CANCELLED;case zi.UNKNOWN:return lr.UNKNOWN;case zi.DEADLINE_EXCEEDED:return lr.DEADLINE_EXCEEDED;case zi.RESOURCE_EXHAUSTED:return lr.RESOURCE_EXHAUSTED;case zi.INTERNAL:return lr.INTERNAL;case zi.UNAVAILABLE:return lr.UNAVAILABLE;case zi.UNAUTHENTICATED:return lr.UNAUTHENTICATED;case zi.INVALID_ARGUMENT:return lr.INVALID_ARGUMENT;case zi.NOT_FOUND:return lr.NOT_FOUND;case zi.ALREADY_EXISTS:return lr.ALREADY_EXISTS;case zi.PERMISSION_DENIED:return lr.PERMISSION_DENIED;case zi.FAILED_PRECONDITION:return lr.FAILED_PRECONDITION;case zi.ABORTED:return lr.ABORTED;case zi.OUT_OF_RANGE:return lr.OUT_OF_RANGE;case zi.UNIMPLEMENTED:return lr.UNIMPLEMENTED;case zi.DATA_LOSS:return lr.DATA_LOSS;default:return en()}}(da=zi||(zi={}))[da.OK=0]="OK",da[da.CANCELLED=1]="CANCELLED",da[da.UNKNOWN=2]="UNKNOWN",da[da.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",da[da.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",da[da.NOT_FOUND=5]="NOT_FOUND",da[da.ALREADY_EXISTS=6]="ALREADY_EXISTS",da[da.PERMISSION_DENIED=7]="PERMISSION_DENIED",da[da.UNAUTHENTICATED=16]="UNAUTHENTICATED",da[da.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",da[da.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",da[da.ABORTED=10]="ABORTED",da[da.OUT_OF_RANGE=11]="OUT_OF_RANGE",da[da.UNIMPLEMENTED=12]="UNIMPLEMENTED",da[da.INTERNAL=13]="INTERNAL",da[da.UNAVAILABLE=14]="UNAVAILABLE",da[da.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ve(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eve=new Ip([4294967295,4294967295],0);function N7(t){const e=_ve().encode(t),r=new dJ;return r.update(e),new Uint8Array(r.digest())}function C7(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ip([r,n],0),new Ip([a,s],0)]}class UD{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Oy(`Invalid padding: ${r}`);if(n<0)throw new Oy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Oy(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Oy(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ip.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Ip.fromNumber(n)));return a.compare(Eve)===1&&(a=new Ip([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=N7(e),[n,a]=C7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new UD(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=N7(e),[n,a]=C7(r);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,a,s);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Oy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,ww.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new gj(hn.min(),a,new Hs(Rn),Cu(),qn())}}class ww{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ww(n,r,qn(),qn(),qn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class rZ{constructor(e,r){this.targetId=e,this.me=r}}class nZ{constructor(e,r,n=Vi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class _7{constructor(){this.fe=0,this.ge=S7(),this.pe=Vi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qn(),r=qn(),n=qn();return this.ge.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:en()}}),new ww(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=S7()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,on(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Sve{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cu(),this.qe=E7(),this.Qe=new Hs(Rn)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:en()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,a)=>{this.ze(a)&&r(a)})}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const s=a.target;if(YE(s))if(n===0){const o=new Hr(s.path);this.Ue(r,o,Ms.newNoDocument(o,hn.min()))}else on(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Am(n).toUint8Array()}catch(c){if(c instanceof jJ)return hm("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new UD(o,a,s)}catch(c){return hm(c instanceof Oy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,s,null),a++)}),a}rt(e){const r=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&YE(l.target)){const c=new Hr(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ms.newNoDocument(c,e))}s.be&&(r.set(o,s.ve()),s.Ce())}});let n=qn();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const a=new gj(e,r,this.Qe,this.ke,n);return this.ke=Cu(),this.qe=E7(),this.Qe=new Hs(Rn),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new _7,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new rs(Rn),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Er("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _7),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function E7(){return new Hs(Hr.comparator)}function S7(){return new Hs(Hr.comparator)}const Ive={asc:"ASCENDING",desc:"DESCENDING"},jve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pve={and:"AND",or:"OR"};class Bve{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function UT(t,e){return t.useProto3Json||xw(e)?e:{value:e}}function Bv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aZ(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tve(t,e){return Bv(t,e.toTimestamp())}function Wo(t){return on(!!t),hn.fromTimestamp(function(r){const n=hA(r);return new xr(n.seconds,n.nanos)}(t))}function QD(t,e){return QT(t,e).canonicalString()}function QT(t,e){const r=function(a){return new wa(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function sZ(t){const e=wa.fromString(t);return on(AZ(e)),e}function p2(t,e){return QD(t.databaseId,e.path)}function Jh(t,e){const r=sZ(e);if(r.get(1)!==t.databaseId.projectId)throw new kr(lr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new kr(lr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Hr(lZ(r))}function iZ(t,e){return QD(t.databaseId,e)}function oZ(t){const e=sZ(t);return e.length===4?wa.emptyPath():lZ(e)}function VT(t){return new wa(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lZ(t){return on(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function I7(t,e,r){return{name:p2(t,e),fields:r.value.mapValue.fields}}function kve(t,e,r){const n=Jh(t,e.name),a=Wo(e.updateTime),s=e.createTime?Wo(e.createTime):hn.min(),o=new vl({mapValue:{fields:e.fields}}),l=Ms.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Fve(t,e){return"found"in e?function(n,a){on(!!a.found),a.found.name,a.found.updateTime;const s=Jh(n,a.found.name),o=Wo(a.found.updateTime),l=a.found.createTime?Wo(a.found.createTime):hn.min(),c=new vl({mapValue:{fields:a.found.fields}});return Ms.newFoundDocument(s,o,l,c)}(t,e):"missing"in e?function(n,a){on(!!a.missing),on(!!a.readTime);const s=Jh(n,a.missing),o=Wo(a.readTime);return Ms.newNoDocument(s,o)}(t,e):en()}function Ove(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:en()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(on(d===void 0||typeof d=="string"),Vi.fromBase64String(d||"")):(on(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Vi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?lr.UNKNOWN:tZ(u.code);return new kr(d,u.message||"")}(o);r=new nZ(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Jh(t,n.document.name),s=Wo(n.document.updateTime),o=n.document.createTime?Wo(n.document.createTime):hn.min(),l=new vl({mapValue:{fields:n.document.fields}}),c=Ms.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new eE(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Jh(t,n.document),s=n.readTime?Wo(n.readTime):hn.min(),o=Ms.newNoDocument(a,s),l=n.removedTargetIds||[];r=new eE([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Jh(t,n.document),s=n.removedTargetIds||[];r=new eE([],s,a,null)}else{if(!("filter"in e))return en();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Cve(a,s),l=n.targetId;r=new rZ(l,o)}}return r}function g2(t,e){let r;if(e instanceof s1)r={update:I7(t,e.key,e.value)};else if(e instanceof i1)r={delete:p2(t,e.key)};else if(e instanceof PA)r={update:I7(t,e.key,e.data),updateMask:Qve(e.fieldMask)};else{if(!(e instanceof DD))return en();r={verify:p2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof A2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof tg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof m2)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw en()}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Tve(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:en()}(t,e.precondition)),r}function HT(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Us.updateTime(Wo(s.updateTime)):s.exists!==void 0?Us.exists(s.exists):Us.none()}(e.currentDocument):Us.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)on(l.setToServerValue==="REQUEST_TIME"),c=new A2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new tg(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Pv(d)}else"increment"in l?c=new m2(o,l.increment):en();const u=Ls.fromServerFormat(l.fieldPath);return new YJ(u,c)}(t,a)):[];if(e.update){e.update.name;const a=Jh(t,e.update.name),s=new vl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new Kc(u.map(d=>Ls.fromServerFormat(d)))}(e.updateMask);return new PA(a,s,o,r,n)}return new s1(a,s,r,n)}if(e.delete){const a=Jh(t,e.delete);return new i1(a,r)}if(e.verify){const a=Jh(t,e.verify);return new DD(a,r)}return en()}function Dve(t,e){return t&&t.length>0?(on(e!==void 0),t.map(r=>function(a,s){let o=a.updateTime?Wo(a.updateTime):Wo(s);return o.isEqual(hn.min())&&(o=Wo(s)),new bve(o,a.transformResults||[])}(r,e))):[]}function cZ(t,e){return{documents:[iZ(t,e.path)]}}function uZ(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=iZ(t,a);const s=function(u){if(u.length!==0)return hZ(qa.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(A){return{field:wx(A.field),direction:Mve(A.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=UT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:a}}function dZ(t){let e=oZ(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){on(n===1);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const A=fZ(f);return A instanceof qa&&FD(A)?A.getFilters():[A]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(A=>function(m){return new h2(Nx(m.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(A))}(r.orderBy));let l=null;r.limit&&(l=function(f){let A;return A=typeof f=="object"?f.value:f,xw(A)?null:A}(r.limit));let c=null;r.startAt&&(c=function(f){const A=!!f.before,h=f.values||[];return new Iv(h,A)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const A=!f.before,h=f.values||[];return new Iv(h,A)}(r.endAt)),lve(e,a,o,s,l,"F",c,u)}function Rve(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function fZ(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Nx(r.unaryFilter.field);return sa.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Nx(r.unaryFilter.field);return sa.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nx(r.unaryFilter.field);return sa.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nx(r.unaryFilter.field);return sa.create(o,"!=",{nullValue:"NULL_VALUE"});default:return en()}}(t):t.fieldFilter!==void 0?function(r){return sa.create(Nx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return qa.create(r.compositeFilter.filters.map(n=>fZ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return en()}}(r.compositeFilter.op))}(t):en()}function Mve(t){return Ive[t]}function Lve(t){return jve[t]}function Uve(t){return Pve[t]}function wx(t){return{fieldPath:t.canonicalString()}}function Nx(t){return Ls.fromServerFormat(t.fieldPath)}function hZ(t){return t instanceof sa?function(r){if(r.op==="=="){if(d7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NAN"}};if(u7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(d7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NOT_NAN"}};if(u7(r.value))return{unaryFilter:{field:wx(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wx(r.field),op:Lve(r.op),value:r.value}}}(t):t instanceof qa?function(r){const n=r.getFilters().map(a=>hZ(a));return n.length===1?n[0]:{compositeFilter:{op:Uve(r.op),filters:n}}}(t):en()}function Qve(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function AZ(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,r,n,a,s=hn.min(),o=hn.min(),l=Vi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new $h(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new $h(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $h(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $h(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(e){this.ct=e}}function Vve(t,e){let r;if(e.document)r=kve(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Hr.fromSegments(e.noDocument.path),a=ng(e.noDocument.readTime);r=Ms.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return en();{const n=Hr.fromSegments(e.unknownDocument.path),a=ng(e.unknownDocument.version);r=Ms.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new xr(a[0],a[1]);return hn.fromTimestamp(s)}(e.readTime)),r}function j7(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:eS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:p2(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Bv(s,o.version.toTimestamp()),createTime:Bv(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:rg(e.version)};else{if(!e.isUnknownDocument())return en();n.unknownDocument={path:r.path.toArray(),version:rg(e.version)}}return n}function eS(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rg(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ng(t){const e=new xr(t.seconds,t.nanoseconds);return hn.fromTimestamp(e)}function up(t,e){const r=(e.baseMutations||[]).map(s=>HT(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>HT(t.ct,s)),a=xr.fromMillis(e.localWriteTimeMs);return new RD(e.batchId,a,r,n)}function Dy(t){const e=ng(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?ng(t.lastLimboFreeSnapshotVersion):hn.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return on(s.documents.length===1),xd(yw(oZ(s.documents[0])))}(t.query):function(s){return xd(dZ(s))}(t.query),new $h(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Vi.fromBase64String(t.resumeToken))}function pZ(t,e){const r=rg(e.snapshotVersion),n=rg(e.lastLimboFreeSnapshotVersion);let a;a=YE(e.target)?cZ(t.ct,e.target):uZ(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eg(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function gZ(t){const e=dZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ZE(e,e.limit,"L"):e}function m3(t,e){return new LD(e.largestBatchId,HT(t.ct,e.overlayMutation))}function P7(t,e){const r=e.path.lastSegment();return[t,vc(e.path.popLast()),r]}function B7(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:rg(n.readTime),documentKey:vc(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{getBundleMetadata(e,r){return T7(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:ng(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return T7(e).put(function(a){return{bundleId:a.id,createTime:rg(Wo(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return k7(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:gZ(s.bundledQuery),readTime:ng(s.readTime)}}(n)})}saveNamedQuery(e,r){return k7(e).put(function(a){return{name:a.name,readTime:rg(Wo(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function T7(t){return So(t,"bundles")}function k7(t){return So(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new xj(e,n)}getOverlay(e,r){return J1(e).get(P7(this.userId,r)).next(n=>n?m3(this.serializer,n):null)}getOverlays(e,r){const n=Kf();return qt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new LD(r,o);a.push(this.ht(e,l))}),qt.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(vc(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(J1(e).j("collectionPathOverlayIndex",l))}),qt.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Kf(),s=vc(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return J1(e).U("collectionPathOverlayIndex",o).next(l=>{for(const c of l){const u=m3(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Kf();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return J1(e).J({index:"collectionGroupOverlayIndex",range:l},(c,u,d)=>{const f=m3(this.serializer,u);s.size()<a||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return J1(e).put(function(a,s,o){const[l,c,u]=P7(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:g2(a.ct,o.mutation)}}(this.serializer,this.userId,r))}}function J1(t){return So(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{Pt(e){return So(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Vi.fromUint8Array(n):Vi.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ds(e.integerValue));else if("doubleValue"in e){const n=Ds(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),l2(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=hA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Am(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?PJ(e)?this.dt(r,Number.MAX_SAFE_INTEGER):hj(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):en()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const s=e.fields||{};this.dt(r,53);const o="value",l=((a=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Ds(l)),this.Vt(o,r),this.Tt(s[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),Hr.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}dp.vt=new dp;function Gve(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function F7(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Gve(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class Kve{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=F7(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=F7(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class qve{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class zve{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Z1{constructor(){this.jt=new Kve,this.Ht=new qve(this.jt),this.Jt=new zve(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new fp(this.indexId,this.documentKey,this.arrayValue,n)}}function a0(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=O7(t.arrayValue,e.arrayValue),r!==0?r:(r=O7(t.directionalValue,e.directionalValue),r!==0?r:Hr.comparator(t.documentKey,e.documentKey)))}function O7(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.Xt=new rs((r,n)=>Ls.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(on(e.collectionGroup===this.collectionId),this.nn)return!1;const r=TT(e);if(r!==void 0&&!this.sn(r))return!1;const n=rp(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.sn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.on(l,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.en.length||!this._n(this.en[o++],l))return!1}return!0}an(){if(this.nn)return null;let e=new rs(Ls.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new W_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new W_(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new W_(n.field,n.dir==="asc"?0:1)));return new XE(XE.UNKNOWN_ID,this.collectionId,r,o2.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xZ(t){var e,r;if(on(t instanceof sa||t instanceof qa),t instanceof sa){if(t instanceof LJ){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>sa.create(t.field,"==",s)))||[];return qa.create(a,"or")}return t}const n=t.filters.map(a=>xZ(a));return qa.create(n,t.op)}function Wve(t){if(t.getFilters().length===0)return[];const e=KT(xZ(t));return on(vZ(e)),$T(e)||GT(e)?[e]:e.getFilters()}function $T(t){return t instanceof sa}function GT(t){return t instanceof qa&&FD(t)}function vZ(t){return $T(t)||GT(t)||function(r){if(r instanceof qa&&DT(r)){for(const n of r.getFilters())if(!$T(n)&&!GT(n))return!1;return!0}return!1}(t)}function KT(t){if(on(t instanceof sa||t instanceof qa),t instanceof sa)return t;if(t.filters.length===1)return KT(t.filters[0]);const e=t.filters.map(n=>KT(n));let r=qa.create(e,t.op);return r=tS(r),vZ(r)?r:(on(r instanceof qa),on(jv(r)),on(r.filters.length>1),r.filters.reduce((n,a)=>VD(n,a)))}function VD(t,e){let r;return on(t instanceof sa||t instanceof qa),on(e instanceof sa||e instanceof qa),r=t instanceof sa?e instanceof sa?function(a,s){return qa.create([a,s],"and")}(t,e):R7(t,e):e instanceof sa?R7(e,t):function(a,s){if(on(a.filters.length>0&&s.filters.length>0),jv(a)&&jv(s))return DJ(a,s.getFilters());const o=DT(a)?a:s,l=DT(a)?s:a,c=o.filters.map(u=>VD(u,l));return qa.create(c,"or")}(t,e),tS(r)}function R7(t,e){if(jv(e))return DJ(e,t.getFilters());{const r=e.filters.map(n=>VD(t,n));return qa.create(r,"or")}}function tS(t){if(on(t instanceof sa||t instanceof qa),t instanceof sa)return t;const e=t.getFilters();if(e.length===1)return tS(e[0]);if(FJ(t))return t;const r=e.map(a=>tS(a)),n=[];return r.forEach(a=>{a instanceof sa?n.push(a):a instanceof qa&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:qa.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xve{constructor(){this.un=new HD}addToCollectionParentIndex(e,r){return this.un.add(r),qt.resolve()}getCollectionParents(e,r){return qt.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return qt.resolve()}deleteFieldIndex(e,r){return qt.resolve()}deleteAllFieldIndexes(e){return qt.resolve()}createTargetIndexes(e,r){return qt.resolve()}getDocumentsMatchingTarget(e,r){return qt.resolve(null)}getIndexType(e,r){return qt.resolve(0)}getFieldIndexes(e,r){return qt.resolve([])}getNextCollectionGroupToUpdate(e){return qt.resolve(null)}getMinOffset(e,r){return qt.resolve(Bu.min())}getMinOffsetFromCollectionGroup(e,r){return qt.resolve(Bu.min())}updateCollectionGroup(e,r,n){return qt.resolve()}updateIndexEntries(e,r){return qt.resolve()}}class HD{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new rs(wa.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new rs(wa.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Uint8Array(0);class Yve{constructor(e,r){this.databaseId=r,this.cn=new HD,this.ln=new Fm(n=>eg(n),(n,a)=>vw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:vc(a)};return M7(e).put(s)}return qt.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[vJ(r),""],!1,!0);return M7(e).U(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Gf(o.parent))}return n})}addFieldIndex(e,r){const n=ey(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Wg(e);return s.next(l=>{o.put(B7(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=ey(e),a=Wg(e),s=zg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=ey(e),n=zg(e),a=Wg(e);return r.j().next(()=>n.j()).next(()=>a.j())}createTargetIndexes(e,r){return qt.forEach(this.hn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new D7(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=zg(e);let a=!0;const s=new Map;return qt.forEach(this.hn(r),o=>this.Pn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=qn();const l=[];return qt.forEach(s,(c,u)=>{Er("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(w=>`${w.fieldPath}:${w.kind}`).join(",")}`}(c)} to execute ${eg(r)}`);const d=function(b,w){const j=TT(w);if(j===void 0)return null;for(const I of JE(b,j.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,c),f=function(b,w){const j=new Map;for(const I of rp(w))for(const _ of JE(b,I.fieldPath))switch(_.op){case"==":case"in":j.set(I.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return j.set(I.fieldPath.canonicalString(),_.value),Array.from(j.values())}return null}(u,c),A=function(b,w){const j=[];let I=!0;for(const _ of rp(w)){const S=_.kind===0?p7(b,_.fieldPath,b.startAt):g7(b,_.fieldPath,b.startAt);j.push(S.value),I&&(I=S.inclusive)}return new Iv(j,I)}(u,c),h=function(b,w){const j=[];let I=!0;for(const _ of rp(w)){const S=_.kind===0?g7(b,_.fieldPath,b.endAt):p7(b,_.fieldPath,b.endAt);j.push(S.value),I&&(I=S.inclusive)}return new Iv(j,I)}(u,c),m=this.In(c,u,A),p=this.In(c,u,h),x=this.Tn(c,u,f),v=this.En(c.indexId,d,m,A.inclusive,p,h.inclusive,x);return qt.forEach(v,y=>n.G(y,r.limit).next(b=>{b.forEach(w=>{const j=Hr.fromSegments(w.documentKey);o.has(j)||(o=o.add(j),l.push(j))})}))}).next(()=>l)}return qt.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Wve(qa.create(e.filters,"and")).map(n=>MT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let f=0;f<c;++f){const A=r?this.dn(r[f/u]):XN,h=this.An(e,A,n[f%u],a),m=this.Rn(e,A,s[f%u],o),p=l.map(x=>this.An(e,A,x,!0));d.push(...this.createRange(h,m,p))}return d}An(e,r,n,a){const s=new fp(e,Hr.empty(),r,n);return a?s:s.Zt()}Rn(e,r,n,a){const s=new fp(e,Hr.empty(),r,n);return a?s.Zt():s}Pn(e,r){const n=new D7(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.rn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.hn(r);return qt.forEach(a,s=>this.Pn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new rs(Ls.comparator),d=!1;for(const f of c.filters)for(const A of f.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?d=!0:u=u.add(A.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Vn(e,r){const n=new Z1;for(const a of rp(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Yt(a.kind);dp.vt.It(s,o)}return n.zt()}dn(e){const r=new Z1;return dp.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Z1;return dp.vt.It(d2(this.databaseId,r),n.Yt(function(s){const o=rp(s);return o.length===0?0:o[o.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Z1);let s=0;for(const o of rp(e)){const l=n[s++];for(const c of a)if(this.fn(r,o.fieldPath)&&f2(l))a=this.gn(a,o,l);else{const u=c.Yt(o.kind);dp.vt.It(l,u)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new Z1;c.seed(l.zt()),dp.vt.It(o,c.Yt(r.kind)),s.push(c)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof sa&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=ey(e),a=Wg(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const o=[];return qt.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,f){const A=f?new o2(f.sequenceNumber,new Bu(ng(f.readTime),new Hr(Gf(f.documentKey)),f.largestBatchId)):o2.empty(),h=d.fields.map(([m,p])=>new W_(Ls.fromServerFormat(m),p));return new XE(d.indexId,d.collectionGroup,h,A)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:Rn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=ey(e),s=Wg(e);return this.yn(e).next(o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>qt.forEach(l,c=>s.put(B7(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return qt.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?qt.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),qt.forEach(l,c=>this.wn(e,a,c).next(u=>{const d=this.Sn(s,c);return u.isEqual(d)?qt.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,r,n,a){return zg(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return zg(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=zg(e);let s=new rs(a0);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(o,l)=>{s=s.add(new fp(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>s)}Sn(e,r){let n=new rs(a0);const a=this.Vn(r,e);if(a==null)return n;const s=TT(r);if(s!=null){const o=e.data.field(s.fieldPath);if(f2(o))for(const l of o.arrayValue.values||[])n=n.add(new fp(r.indexId,e.key,this.dn(l),a))}else n=n.add(new fp(r.indexId,e.key,XN,a));return n}bn(e,r,n,a,s){Er("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,f,A){const h=c.getIterator(),m=u.getIterator();let p=qg(h),x=qg(m);for(;p||x;){let v=!1,y=!1;if(p&&x){const b=d(p,x);b<0?y=!0:b>0&&(v=!0)}else p!=null?y=!0:v=!0;v?(f(x),x=qg(m)):y?(A(p),p=qg(h)):(p=qg(h),x=qg(m))}}(a,s,a0,l=>{o.push(this.Dn(e,r,n,l))},l=>{o.push(this.vn(e,r,n,l))}),qt.waitFor(o)}yn(e){let r=1;return Wg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>a0(o,l)).filter((o,l,c)=>!l||a0(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=a0(o,e),c=a0(o,r);if(l===0)a[0]=e.Zt();else if(l>0&&c<0)a.push(o),a.push(o.Zt());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const l=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,XN,[]],c=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,XN,[]];s.push(IDBKeyRange.bound(l,c))}return s}Cn(e,r){return a0(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(L7)}getMinOffset(e,r){return qt.mapArray(this.hn(r),n=>this.Pn(e,n).next(a=>a||en())).next(L7)}}function M7(t){return So(t,"collectionParents")}function zg(t){return So(t,"indexEntries")}function ey(t){return So(t,"indexConfiguration")}function Wg(t){return So(t,"indexState")}function L7(t){on(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;jD(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Bu(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qc{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qc(e,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yZ(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.J({range:o},(d,f,A)=>(l++,A.delete()));s.push(c.next(()=>{on(l===1)}));const u=[];for(const d of r.mutations){const f=CJ(e,d.key.path,r.batchId);s.push(a.delete(f)),u.push(d.key)}return qt.waitFor(s).next(()=>u)}function rS(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw en();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qc.DEFAULT_COLLECTION_PERCENTILE=10,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qc.DEFAULT=new Qc(41943040,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qc.DISABLED=new Qc(-1,0,0);class vj{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){on(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new vj(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return s0(e).J({index:"userMutationsIndex",range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Cx(e),o=s0(e);return o.add({}).next(l=>{on(typeof l=="number");const c=new RD(l,r,n,a),u=function(h,m,p){const x=p.baseMutations.map(y=>g2(h.ct,y)),v=p.mutations.map(y=>g2(h.ct,y));return{userId:m,batchId:p.batchId,localWriteTimeMs:p.localWriteTime.toMillis(),baseMutations:x,mutations:v}}(this.serializer,this.userId,c),d=[];let f=new rs((A,h)=>Rn(A.canonicalString(),h.canonicalString()));for(const A of a){const h=CJ(this.userId,A.key.path,l);f=f.add(A.key.path.popLast()),d.push(o.put(u)),d.push(s.put(h,Txe))}return f.forEach(A=>{d.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Fn[l]=c.keys()}),qt.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return s0(e).get(r).next(n=>n?(on(n.userId===this.userId),up(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?qt.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return s0(e).J({index:"userMutationsIndex",range:a},(o,l,c)=>{l.userId===this.userId&&(on(l.batchId>=n),s=up(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return s0(e).J({index:"userMutationsIndex",range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return s0(e).U("userMutationsIndex",r).next(n=>n.map(a=>up(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=X_(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Cx(e).J({range:a},(o,l,c)=>{const[u,d,f]=o,A=Gf(d);if(u===this.userId&&r.path.isEqual(A))return s0(e).get(f).next(h=>{if(!h)throw en();on(h.userId===this.userId),s.push(up(this.serializer,h))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new rs(Rn);const a=[];return r.forEach(s=>{const o=X_(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Cx(e).J({range:l},(u,d,f)=>{const[A,h,m]=u,p=Gf(h);A===this.userId&&s.path.isEqual(p)?n=n.add(m):f.done()});a.push(c)}),qt.waitFor(a).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=X_(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new rs(Rn);return Cx(e).J({range:o},(c,u,d)=>{const[f,A,h]=c,m=Gf(A);f===this.userId&&n.isPrefixOf(m)?m.length===a&&(l=l.add(h)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],a=[];return r.forEach(s=>{a.push(s0(e).get(s).next(o=>{if(o===null)throw en();on(o.userId===this.userId),n.push(up(this.serializer,o))}))}),qt.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return yZ(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),qt.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return qt.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Cx(e).J({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Gf(s[1]);a.push(c)}else l.done()}).next(()=>{on(a.length===0)})})}containsKey(e,r){return bZ(e,this.userId,r)}Nn(e){return wZ(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bZ(t,e,r){const n=X_(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Cx(t).J({range:s,H:!0},(l,c,u)=>{const[d,f,A]=l;d===e&&f===a&&(o=!0),u.done()}).next(()=>o)}function s0(t){return So(t,"mutations")}function Cx(t){return So(t,"documentMutations")}function wZ(t){return So(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ag(0)}static kn(){return new ag(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jve{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new ag(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>hn.fromTimestamp(new xr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Xg(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(on(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return Xg(e).J((o,l)=>{const c=Dy(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>qt.waitFor(s)).next(()=>a)}forEachTarget(e,r){return Xg(e).J((n,a)=>{const s=Dy(a);r(s)})}qn(e){return Q7(e).get("targetGlobalKey").next(r=>(on(r!==null),r))}Qn(e,r){return Q7(e).put("targetGlobalKey",r)}Kn(e,r){return Xg(e).put(pZ(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=eg(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Xg(e).J({range:a,index:"queryTargetsIndex"},(o,l,c)=>{const u=Dy(l);vw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=T0(e);return r.forEach(o=>{const l=vc(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),qt.waitFor(a)}removeMatchingKeys(e,r,n){const a=T0(e);return qt.forEach(r,s=>{const o=vc(s.path);return qt.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=T0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=T0(e);let s=qn();return a.J({range:n,H:!0},(o,l,c)=>{const u=Gf(o[1]),d=new Hr(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=vc(r.path),a=IDBKeyRange.bound([n],[vJ(n)],!1,!0);let s=0;return T0(e).J({index:"documentTargetsIndex",H:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,r){return Xg(e).get(r).next(n=>n?Dy(n):null)}}function Xg(t){return So(t,"targets")}function Q7(t){return So(t,"targetGlobal")}function T0(t){return So(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7([t,e],[r,n]){const a=Rn(t,r);return a===0?Rn(e,n):a}class Zve{constructor(e){this.Un=e,this.buffer=new rs(V7),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();V7(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class e1e{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Er("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){km(r)?Er("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Cg(r)}await this.Hn(3e5)})}}class t1e{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return qt.resolve(fd.oe);const n=new Zve(r);return this.Jn.forEachTarget(e,a=>n.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>n.zn(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Er("LruGarbageCollector","Garbage collection skipped; disabled"),qt.resolve(U7)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Er("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U7):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Er("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),yx()<=aa.DEBUG&&Er("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),qt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function r1e(t,e){return new t1e(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1e{constructor(e,r){this.db=e,this.garbageCollector=r1e(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,a)=>r(a))}addReference(e,r,n){return YN(e,n)}removeReference(e,r,n){return YN(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return YN(e,r)}nr(e,r){return function(a,s){let o=!1;return wZ(a).Y(l=>bZ(a,l,s).next(c=>(c&&(o=!0),qt.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.tr(e,(o,l)=>{if(l<=r){const c=this.nr(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,hn.min()),T0(e).delete(function(f){return[0,vc(f.path)]}(o))))});a.push(c)}}).next(()=>qt.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return YN(e,r)}tr(e,r){const n=T0(e);let a,s=fd.oe;return n.J({index:"documentTargetsIndex"},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==fd.oe&&r(new Hr(Gf(a)),s),s=u,a=c):s=fd.oe}).next(()=>{s!==fd.oe&&r(new Hr(Gf(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YN(t,e){return T0(t).put(function(n,a){return{targetId:0,path:vc(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(){this.changes=new Fm(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ms.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?qt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Gm(e).put(n)}removeEntry(e,r,n){return Gm(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],eS(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Ms.newInvalidDocument(r);return Gm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ty(r))},(a,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Ms.newInvalidDocument(r)};return Gm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ty(r))},(a,s)=>{n={document:this.ir(r,s),size:rS(s)}}).next(()=>n)}getEntries(e,r){let n=Cu();return this._r(e,r,(a,s)=>{const o=this.ir(a,s);n=n.insert(a,o)}).next(()=>n)}ar(e,r){let n=Cu(),a=new Hs(Hr.comparator);return this._r(e,r,(s,o)=>{const l=this.ir(s,o);n=n.insert(s,l),a=a.insert(s,rS(o))}).next(()=>({documents:n,ur:a}))}_r(e,r,n){if(r.isEmpty())return qt.resolve();let a=new rs(G7);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(ty(a.first()),ty(a.last())),o=a.getIterator();let l=o.getNext();return Gm(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{const f=Hr.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&G7(l,f)<0;)n(l,null),l=o.getNext();l&&l.isEqual(f)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.$(ty(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),eS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gm(e).U(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Cu();for(const f of u){const A=this.ir(Hr.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);A.isFoundDocument()&&(bw(r,A)||a.has(A.key))&&(d=d.insert(A.key,A))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Cu();const o=$7(r,n),l=$7(r,Bu.max());return Gm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const f=this.ir(Hr.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new s1e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return H7(e).get("remoteDocumentGlobalKey").next(r=>(on(!!r),r))}rr(e,r){return H7(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Vve(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(hn.min())))return n}return Ms.newInvalidDocument(e)}}function CZ(t){return new a1e(t)}class s1e extends NZ{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Fm(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new rs((s,o)=>Rn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=j7(this.cr.serializer,o);a=a.add(s.path.popLast());const u=rS(c);n+=u-l.size,r.push(this.cr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=j7(this.cr.serializer,o.convertToNoDocument(hn.min()));r.push(this.cr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),qt.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:a})=>(a.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function H7(t){return So(t,"remoteDocumentGlobal")}function Gm(t){return So(t,"remoteDocumentsV14")}function ty(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $7(t,e){const r=e.documentKey.path.toArray();return[t,eS(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function G7(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=Rn(r[s],n[s]),a)return a;return a=Rn(r.length,n.length),a||(a=Rn(r[r.length-2],n[n.length-2]),a||Rn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1e{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&hb(n.mutation,a,Kc.empty(),xr.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,qn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=qn()){const a=Kf();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=Fy();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Kf();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,qn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Cu();const o=fb(),l=function(){return fb()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof PA)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),hb(d.mutation,u,d.mutation.getFieldMask(),xr.now())):o.set(u.key,Kc.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>{var f;return l.set(u,new i1e(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const n=fb();let a=new Hs((o,l)=>o-l),s=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Kc.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||qn()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=GJ();d.forEach(A=>{if(!s.has(A)){const h=JJ(r.get(A),n.get(A));h!==null&&f.set(A,h),s=s.add(A)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return qt.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return Hr.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):UJ(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):qt.resolve(Kf());let l=-1,c=s;return o.next(u=>qt.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?qt.resolve():this.remoteDocumentCache.getEntry(e,d).next(A=>{c=c.insert(d,A)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,qn())).next(d=>({batchId:l,changes:$J(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Hr(r)).next(n=>{let a=Fy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=Fy();return this.indexManager.getCollectionParents(e,s).next(l=>qt.forEach(l,c=>{const u=function(f,A){return new a1(A,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,A)=>{o=o.insert(f,A)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ms.newInvalidDocument(d)))});let l=Fy();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&hb(d.mutation,u,Kc.empty(),xr.now()),bw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1e{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return qt.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:Wo(a.createTime)}}(r)),qt.resolve()}getNamedQuery(e,r){return qt.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(a){return{name:a.name,query:gZ(a.bundledQuery),readTime:Wo(a.readTime)}}(r)),qt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1e{constructor(){this.overlays=new Hs(Hr.comparator),this.Ir=new Map}getOverlay(e,r){return qt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Kf();return qt.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.ht(e,r,s)}),qt.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),qt.resolve()}getOverlaysForCollection(e,r,n){const a=Kf(),s=r.length+1,o=new Hr(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return qt.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new Hs((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Kf(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Kf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return qt.resolve(l)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new LD(r,n));let s=this.Ir.get(r);s===void 0&&(s=qn(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1e{constructor(){this.sessionToken=Vi.EMPTY_BYTE_STRING}getSessionToken(e){return qt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,qt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Tr=new rs(Uo.Er),this.dr=new rs(Uo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Uo(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Uo(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Hr(new wa([])),n=new Uo(r,e),a=new Uo(r,e+1),s=[];return this.dr.forEachInRange([n,a],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Hr(new wa([])),n=new Uo(r,e),a=new Uo(r,e+1);let s=qn();return this.dr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Uo(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Uo{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Hr.comparator(e.key,r.key)||Rn(e.wr,r.wr)}static Ar(e,r){return Rn(e.wr,r.wr)||Hr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1e{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new rs(Uo.Er)}checkEmpty(e){return qt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RD(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.br=this.br.add(new Uo(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return qt.resolve(o)}lookupMutationBatch(e,r){return qt.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),s=a<0?0:a;return qt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return qt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return qt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Uo(r,0),a=new Uo(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,a],o=>{const l=this.Dr(o.wr);s.push(l)}),qt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new rs(Rn);return r.forEach(a=>{const s=new Uo(a,0),o=new Uo(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{n=n.add(l.wr)})}),qt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;Hr.isDocumentKey(s)||(s=s.child(""));const o=new Uo(new Hr(s),0);let l=new rs(Rn);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.wr)),!0)},o),qt.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const a=this.Dr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){on(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return qt.forEach(r.mutations,a=>{const s=new Uo(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Uo(r,0),a=this.br.firstAfterOrEqual(n);return qt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,qt.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1e{constructor(e){this.Mr=e,this.docs=function(){return new Hs(Hr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return qt.resolve(n?n.document.mutableCopy():Ms.newInvalidDocument(r))}getEntries(e,r){let n=Cu();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Ms.newInvalidDocument(a))}),qt.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Cu();const o=r.path,l=new Hr(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jD(yJ(d),n)<=0||(a.has(d.key)||bw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return qt.resolve(s)}getAllFromCollectionGroup(e,r,n,a){en()}Or(e,r){return qt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new f1e(this)}getSize(e){return qt.resolve(this.size)}}class f1e extends NZ{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)}),qt.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1e{constructor(e){this.persistence=e,this.Nr=new Fm(r=>eg(r),vw),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $D,this.targetCount=0,this.kr=ag.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,a)=>r(a)),qt.resolve()}getLastRemoteSnapshotVersion(e){return qt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),qt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),qt.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new ag(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,qt.resolve()}updateTargetData(e,r){return this.Kn(r),qt.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,qt.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),qt.waitFor(s).next(()=>a)}getTargetCount(e){return qt.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return qt.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),qt.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),qt.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),qt.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return qt.resolve(n)}containsKey(e,r){return qt.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e,r){this.qr={},this.overlays={},this.Qr=new fd(0),this.Kr=!1,this.Kr=!0,this.$r=new c1e,this.referenceDelegate=e(this),this.Ur=new h1e(this),this.indexManager=new Xve,this.remoteDocumentCache=function(a){return new d1e(a)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new mZ(r),this.Gr=new o1e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new l1e,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new u1e(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Er("MemoryPersistence","Starting transaction:",e);const a=new A1e(this.Qr.next());return this.referenceDelegate.zr(),n(a).next(s=>this.referenceDelegate.jr(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Hr(e,r){return qt.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class A1e extends wJ{constructor(e){super(),this.currentSequenceNumber=e}}class yj{constructor(e){this.persistence=e,this.Jr=new $D,this.Yr=null}static Zr(e){return new yj(e)}get Xr(){if(this.Yr)return this.Yr;throw en()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),qt.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),qt.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),qt.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(a=>this.Xr.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qt.forEach(this.Xr,n=>{const a=Hr.fromPath(n);return this.ei(e,a).next(s=>{s||r.removeEntry(a,hn.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return qt.or([()=>qt.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1e{constructor(e){this.serializer=e}O(e,r,n,a){const s=new fj("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s7,{unique:!0}),c.createObjectStore("documentMutations")}(e),K7(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=qt.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),K7(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:hn.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",s7,{unique:!0});const f=u.store("mutations"),A=d.map(h=>f.put(h));return qt.waitFor(A)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.ni(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&a>=7&&(o=o.next(()=>this.ii(s))),n<8&&a>=8&&(o=o.next(()=>this.si(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.oi(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:$xe});u.createIndex("collectionPathOverlayIndex",Gxe,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Kxe,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:kxe});u.createIndex("documentKeyIndex",Fxe),u.createIndex("collectionGroupIndex",Oxe)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&a>=14&&(o=o.next(()=>this.ai(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Uxe}).createIndex("sequenceNumberIndex",Qxe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Vxe}).createIndex("documentKeyIndex",Hxe,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let r=0;return e.store("remoteDocuments").J((n,a)=>{r+=rS(a)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(a=>qt.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next(l=>qt.forEach(l,c=>{on(c.userId===s.userId);const u=up(this.serializer,c);return yZ(e,s.userId,u).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const s=[];return n.J((o,l)=>{const c=new wa(o),u=function(f){return[0,vc(f)]}(c);s.push(r.get(u).next(d=>d?qt.resolve():(f=>r.put({targetId:0,path:vc(f),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>qt.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:Lxe});const n=r.store("collectionParents"),a=new HD,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:vc(c)})}};return r.store("remoteDocuments").J({H:!0},(o,l)=>{const c=new wa(o);return s(c.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([o,l,c],u)=>{const d=Gf(l);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,a)=>{const s=Dy(a),o=pZ(this.serializer,s);return r.put(o)})}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J((s,o)=>{const l=r.store("remoteDocumentsV14"),c=function(f){return f.document?new Hr(wa.fromString(f.document.name).popFirst(5)):f.noDocument?Hr.fromSegments(f.noDocument.path):f.unknownDocument?Hr.fromSegments(f.unknownDocument.path):en()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>qt.waitFor(a))}ai(e,r){const n=r.store("mutations"),a=CZ(this.serializer),s=new EZ(yj.Zr,this.serializer.ct);return n.U().next(o=>{const l=new Map;return o.forEach(c=>{var u;let d=(u=l.get(c.userId))!==null&&u!==void 0?u:qn();up(this.serializer,c).keys().forEach(f=>d=d.add(f)),l.set(c.userId,d)}),qt.forEach(l,(c,u)=>{const d=new pl(u),f=xj.lt(this.serializer,d),A=s.getIndexManager(d),h=vj.lt(d,this.serializer,A,s.referenceDelegate);return new _Z(a,h,f,A).recalculateAndSaveOverlaysForDocumentKeys(new kT(r,fd.oe),c).next()})})}}function K7(t){t.createObjectStore("targetDocuments",{keyPath:Rxe}).createIndex("documentTargetsIndex",Mxe,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dxe,{unique:!0}),t.createObjectStore("targetGlobal")}const p3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GD{constructor(e,r,n,a,s,o,l,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=o,this.document=l,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=A=>Promise.resolve(),!GD.D())throw new kr(lr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n1e(this,a),this.Ai=r+"main",this.serializer=new mZ(c),this.Ri=new am(this.Ai,this.hi,new m1e(this.serializer)),this.$r=new $ve,this.Ur=new Jve(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CZ(this.serializer),this.Gr=new Hve,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&pc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new kr(lr.FAILED_PRECONDITION,p3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fd(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>JN(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(km(e))return Er("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Er("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ry(e).get("owner").next(r=>qt.resolve(this.vi(r)))}Ci(e){return JN(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=So(r,"clientMetadata");return n.U().next(a=>{const s=this.xi(a,18e5),o=a.filter(l=>s.indexOf(l)===-1);return qt.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?qt.resolve(!0):ry(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new kr(lr.FAILED_PRECONDITION,p3);return!1}}return!(!this.networkEnabled||!this.inForeground)||JN(e).U().next(n=>this.xi(n,5e3).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Er("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new kT(e,fd.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>JN(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return vj.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yve(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xj.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Er("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===17?Wxe:c===16?zxe:c===15?BD:c===14?SJ:c===13?EJ:c===12?qxe:c===11?_J:void en()}(this.hi);let o;return this.Ri.runTransaction(e,a,s,l=>(o=new kT(l,this.Qr?this.Qr.next():fd.oe),r==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw pc(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new kr(lr.FAILED_PRECONDITION,bJ);return n(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e){return ry(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new kr(lr.FAILED_PRECONDITION,p3)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ry(e).put("owner",r)}static D(){return am.D()}bi(e){const r=ry(e);return r.get("owner").next(n=>this.vi(n)?(Er("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):qt.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(pc(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;_Y()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Er("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return pc("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){pc("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ry(t){return So(t,"owner")}function JN(t){return So(t,"clientMetadata")}function p1e(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=qn(),a=qn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new KD(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1e{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _Y()?8:NJ(_o())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.Yi(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new g1e;return this.Xi(e,r,o).next(l=>{if(s.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>s.result)}es(e,r,n,a){return n.documentReadCount<this.ji?(yx()<=aa.DEBUG&&Er("QueryEngine","SDK will not create cache indexes for query:",bx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),qt.resolve()):(yx()<=aa.DEBUG&&Er("QueryEngine","Query:",bx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(yx()<=aa.DEBUG&&Er("QueryEngine","The SDK decides to create cache indexes for query:",bx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xd(r))):qt.resolve())}Yi(e,r){if(x7(r))return qt.resolve(null);let n=xd(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=ZE(r,null,"F"),n=xd(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=qn(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(r,l);return this.ns(r,u,o,c.readTime)?this.Yi(e,ZE(r,null,"F")):this.rs(e,u,r,c)}))})))}Zi(e,r,n,a){return x7(r)||a.isEqual(hn.min())?qt.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const o=this.ts(r,s);return this.ns(r,o,n,a)?qt.resolve(null):(yx()<=aa.DEBUG&&Er("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),bx(r)),this.rs(e,o,r,_xe(a,-1)).next(l=>l))})}ts(e,r){let n=new rs(VJ(e));return r.forEach((a,s)=>{bw(e,s)&&(n=n.add(s))}),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Xi(e,r,n){return yx()<=aa.DEBUG&&Er("QueryEngine","Using full collection scan to execute query:",bx(r)),this.Ji.getDocumentsMatchingQuery(e,r,Bu.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1e{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Hs(Rn),this._s=new Fm(s=>eg(s),vw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _Z(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function IZ(t,e,r,n){return new x1e(t,e,r,n)}async function jZ(t,e){const r=Pn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=qn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function v1e(t,e){const r=Pn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,A=f.keys();let h=qt.resolve();return A.forEach(m=>{h=h.next(()=>d.getEntry(c,m)).next(p=>{const x=u.docVersions.get(m);on(x!==null),p.version.compareTo(x)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),h.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=qn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function PZ(t){const e=Pn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function y1e(t,e){const r=Pn(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const l=[];e.targetChanges.forEach((d,f)=>{const A=a.get(f);if(!A)return;l.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,f)));let h=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(Vi.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):d.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(d.resumeToken,n)),a=a.insert(f,h),function(p,x,v){return p.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(A,h,d)&&l.push(r.Ur.updateTargetData(s,h))});let c=Cu(),u=qn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(b1e(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(hn.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(f=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return qt.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.os=a,s))}function b1e(t,e,r){let n=qn(),a=qn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Cu();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(hn.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Er("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:a}})}function w1e(t,e){const r=Pn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function N1e(t,e){const r=Pn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Ur.getTargetData(n,e).next(s=>s?(a=s,qt.resolve(a)):r.Ur.allocateTargetId(n).next(o=>(a=new $h(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function qT(t,e,r){const n=Pn(t),a=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!km(o))throw o;Er("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function q7(t,e,r){const n=Pn(t);let a=hn.min(),s=qn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=Pn(c),A=f._s.get(d);return A!==void 0?qt.resolve(f.os.get(A)):f.Ur.getTargetData(u,d)}(n,o,xd(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:hn.min(),r?s:qn())).next(l=>(C1e(n,uve(e),l),{documents:l,Ts:s})))}function C1e(t,e,r){let n=t.us.get(e)||hn.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}class z7{constructor(){this.activeTargetIds=pve()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BZ{constructor(){this.so=new z7,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new z7,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1e{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Er("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Er("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZN=null;function g3(){return ZN===null?ZN=function(){return 268435456+Math.round(2147483648*Math.random())}():ZN++,"0x"+ZN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1e{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="WebChannelConnection";class I1e extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${s}`}get Fo(){return!1}Mo(r,n,a,s,o){const l=g3(),c=this.xo(r,n.toUriEncodedString());Er("RestConnection",`Sending RPC '${r}' ${l}:`,c,a);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(r,c,u,a).then(d=>(Er("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw hm("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",c,"request:",a),d})}Lo(r,n,a,s,o,l){return this.Mo(r,n,a,s,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+n1}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>r[o]=s),a&&a.headers.forEach((s,o)=>r[o]=s)}xo(r,n){const a=E1e[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const s=g3();return new Promise((o,l)=>{const c=new fJ;c.setWithCredentials(!0),c.listenOnce(hJ.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case z_.NO_ERROR:const d=c.getResponseJson();Er(Bl,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case z_.TIMEOUT:Er(Bl,`RPC '${e}' ${s} timed out`),l(new kr(lr.DEADLINE_EXCEEDED,"Request time out"));break;case z_.HTTP_ERROR:const f=c.getStatus();if(Er(Bl,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let A=c.getResponseJson();Array.isArray(A)&&(A=A[0]);const h=A==null?void 0:A.error;if(h&&h.status&&h.message){const m=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(lr).indexOf(v)>=0?v:lr.UNKNOWN}(h.status);l(new kr(m,h.message))}else l(new kr(lr.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new kr(lr.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{Er(Bl,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(a);Er(Bl,`RPC '${e}' ${s} sending request:`,a),c.send(r,"POST",u,n,15)})}Bo(e,r,n){const a=g3(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pJ(),l=mJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");Er(Bl,`Creating RPC '${e}' stream ${a}: ${d}`,c);const f=o.createWebChannel(d,c);let A=!1,h=!1;const m=new S1e({Io:x=>{h?Er(Bl,`Not sending because RPC '${e}' stream ${a} is closed:`,x):(A||(Er(Bl,`Opening RPC '${e}' stream ${a} transport.`),f.open(),A=!0),Er(Bl,`RPC '${e}' stream ${a} sending:`,x),f.send(x))},To:()=>f.close()}),p=(x,v,y)=>{x.listen(v,b=>{try{y(b)}catch(w){setTimeout(()=>{throw w},0)}})};return p(f,ky.EventType.OPEN,()=>{h||(Er(Bl,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),p(f,ky.EventType.CLOSE,()=>{h||(h=!0,Er(Bl,`RPC '${e}' stream ${a} transport closed`),m.So())}),p(f,ky.EventType.ERROR,x=>{h||(h=!0,hm(Bl,`RPC '${e}' stream ${a} transport errored:`,x),m.So(new kr(lr.UNAVAILABLE,"The operation could not be completed")))}),p(f,ky.EventType.MESSAGE,x=>{var v;if(!h){const y=x.data[0];on(!!y);const b=y,w=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(w){Er(Bl,`RPC '${e}' stream ${a} received error:`,w);const j=w.status;let I=function(E){const F=zi[E];if(F!==void 0)return tZ(F)}(j),_=w.message;I===void 0&&(I=lr.INTERNAL,_="Unknown error status: "+j+" with message "+w.message),h=!0,m.So(new kr(I,_)),f.close()}else Er(Bl,`RPC '${e}' stream ${a} received:`,y),m.bo(y)}}),p(l,AJ.STAT_EVENT,x=>{x.stat===BT.PROXY?Er(Bl,`RPC '${e}' stream ${a} detected buffering proxy`):x.stat===BT.NOPROXY&&Er(Bl,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1e(){return typeof window<"u"?window:null}function tE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t){return new Bve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,r,n=1e3,a=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Er("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e,r,n,a,s,o,l,c){this.ui=e,this.Ho=n,this.Jo=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qD(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===lr.RESOURCE_EXHAUSTED?(pc(r.toString()),pc("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===lr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.Yo===r&&this.P_(n,a)},n=>{e(()=>{const a=new kr(lr.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{n(()=>this.I_(a))}),this.stream.onMessage(a=>{n(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Er("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Er("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P1e extends TZ{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Ove(this.serializer,e),n=function(s){if(!("targetChange"in s))return hn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?hn.min():o.readTime?Wo(o.readTime):hn.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=VT(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=YE(c)?{documents:cZ(s,c)}:{query:uZ(s,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=aZ(s,o.resumeToken);const u=UT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(hn.min())>0){l.readTime=Bv(s,o.snapshotVersion.toTimestamp());const u=UT(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Rve(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=VT(this.serializer),r.removeTarget=e,this.a_(r)}}class B1e extends TZ{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return on(!!e.streamToken),this.lastStreamToken=e.streamToken,on(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){on(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Dve(e.writeResults,e.commitTime),n=Wo(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=VT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>g2(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1e extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new kr(lr.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,QT(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===lr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new kr(lr.UNKNOWN,s.toString())})}Lo(e,r,n,a,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,QT(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===lr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new kr(lr.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class k1e{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pc(r),this.D_=!1):Er("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1e{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{n.enqueueAndForget(async()=>{Eg(this)&&(Er("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Pn(c);u.L_.add(4),await Nw(u),u.q_.set("Unknown"),u.L_.delete(4),await wj(u)}(this))})}),this.q_=new k1e(n,a)}}async function wj(t){if(Eg(t))for(const e of t.B_)await e(!0)}async function Nw(t){for(const e of t.B_)await e(!1)}function kZ(t,e){const r=Pn(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),YD(r)?XD(r):o1(r).r_()&&WD(r,e))}function zD(t,e){const r=Pn(t),n=o1(r);r.N_.delete(e),n.r_()&&FZ(r,e),r.N_.size===0&&(n.r_()?n.o_():Eg(r)&&r.q_.set("Unknown"))}function WD(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(hn.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}o1(t).A_(e)}function FZ(t,e){t.Q_.xe(e),o1(t).R_(e)}function XD(t){t.Q_=new Sve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),o1(t).start(),t.q_.v_()}function YD(t){return Eg(t)&&!o1(t).n_()&&t.N_.size>0}function Eg(t){return Pn(t).L_.size===0}function OZ(t){t.Q_=void 0}async function O1e(t){t.q_.set("Online")}async function D1e(t){t.N_.forEach((e,r)=>{WD(t,e)})}async function R1e(t,e){OZ(t),YD(t)?(t.q_.M_(e),XD(t)):t.q_.set("Unknown")}async function M1e(t,e,r){if(t.q_.set("Online"),e instanceof nZ&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.N_.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.N_.delete(l),a.Q_.removeTarget(l))}(t,e)}catch(n){Er("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await nS(t,n)}else if(e instanceof eE?t.Q_.Ke(e):e instanceof rZ?t.Q_.He(e):t.Q_.We(e),!r.isEqual(hn.min()))try{const n=await PZ(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Vi.EMPTY_BYTE_STRING,d.snapshotVersion)),FZ(s,c);const f=new $h(d.target,c,u,d.sequenceNumber);WD(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Er("RemoteStore","Failed to raise snapshot:",n),await nS(t,n)}}async function nS(t,e,r){if(!km(e))throw e;t.L_.add(1),await Nw(t),t.q_.set("Offline"),r||(r=()=>PZ(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Er("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await wj(t)})}function DZ(t,e){return e().catch(r=>nS(t,r,e))}async function Cw(t){const e=Pn(t),r=gm(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;L1e(e);)try{const a=await w1e(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,U1e(e,a)}catch(a){await nS(e,a)}RZ(e)&&MZ(e)}function L1e(t){return Eg(t)&&t.O_.length<10}function U1e(t,e){t.O_.push(e);const r=gm(t);r.r_()&&r.V_&&r.m_(e.mutations)}function RZ(t){return Eg(t)&&!gm(t).n_()&&t.O_.length>0}function MZ(t){gm(t).start()}async function Q1e(t){gm(t).p_()}async function V1e(t){const e=gm(t);for(const r of t.O_)e.m_(r.mutations)}async function H1e(t,e,r){const n=t.O_.shift(),a=MD.from(n,e,r);await DZ(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Cw(t)}async function $1e(t,e){e&&gm(t).V_&&await async function(n,a){if(function(o){return eZ(o)&&o!==lr.ABORTED}(a.code)){const s=n.O_.shift();gm(n).s_(),await DZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await Cw(n)}}(t,e),RZ(t)&&MZ(t)}async function X7(t,e){const r=Pn(t);r.asyncQueue.verifyOperationInProgress(),Er("RemoteStore","RemoteStore received new credentials");const n=Eg(r);r.L_.add(3),await Nw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await wj(r)}async function G1e(t,e){const r=Pn(t);e?(r.L_.delete(2),await wj(r)):e||(r.L_.add(2),await Nw(r),r.q_.set("Unknown"))}function o1(t){return t.K_||(t.K_=function(r,n,a){const s=Pn(r);return s.w_(),new P1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:O1e.bind(null,t),Ro:D1e.bind(null,t),mo:R1e.bind(null,t),d_:M1e.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),YD(t)?XD(t):t.q_.set("Unknown")):(await t.K_.stop(),OZ(t))})),t.K_}function gm(t){return t.U_||(t.U_=function(r,n,a){const s=Pn(r);return s.w_(),new B1e(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q1e.bind(null,t),mo:$1e.bind(null,t),f_:V1e.bind(null,t),g_:H1e.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cw(t)):(await t.U_.stop(),t.O_.length>0&&(Er("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new lf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new JD(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kr(lr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZD(t,e){if(pc("AsyncQueue",`${e}: ${t}`),km(t))return new kr(lr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Hr.comparator(r.key,n.key):(r,n)=>Hr.comparator(r.key,n.key),this.keyedMap=Fy(),this.sortedSet=new Hs(this.comparator)}static emptySet(e){return new lv(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof lv)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new lv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.W_=new Hs(Hr.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):en():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Tv{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Tv(e,r,lv.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Aj(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1e{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class q1e{constructor(){this.queries=J7(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Pn(r),s=a.queries;a.queries=J7(),s.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new kr(lr.ABORTED,"Firestore shutting down"))}}function J7(){return new Fm(t=>QJ(t),Aj)}async function e6(t,e){const r=Pn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.H_()&&e.J_()&&(n=2):(s=new K1e,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(a,!0);break;case 1:s.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=ZD(o,`Initialization of query '${bx(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&r6(r)}async function t6(t,e){const r=Pn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?a=e.J_()?0:1:!s.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function z1e(t,e){const r=Pn(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.j_)l.X_(a)&&(n=!0);o.z_=a}}n&&r6(r)}function W1e(t,e,r){const n=Pn(t),a=n.queries.get(e);if(a)for(const s of a.j_)s.onError(r);n.queries.delete(e)}function r6(t){t.Y_.forEach(e=>{e.next()})}var zT,Z7;(Z7=zT||(zT={})).ea="default",Z7.Cache="cache";class n6{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Tv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(e){this.key=e}}class UZ{constructor(e){this.key=e}}class X1e{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qn(),this.mutatedKeys=qn(),this.Aa=VJ(e),this.Ra=new lv(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Y7,a=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const A=a.get(d),h=bw(this.query,f)?f:null,m=!!A&&this.mutatedKeys.has(A.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let x=!1;A&&h?A.data.isEqual(h.data)?m!==p&&(n.track({type:3,doc:h}),x=!0):this.ga(A,h)||(n.track({type:2,doc:h}),x=!0,(c&&this.Aa(h,c)>0||u&&this.Aa(h,u)<0)&&(l=!0)):!A&&h?(n.track({type:0,doc:h}),x=!0):A&&!h&&(n.track({type:1,doc:A}),x=!0,(c||u)&&(l=!0)),x&&(h?(o=o.add(h),s=p?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(h,m){const p=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return p(h)-p(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(n),a=a!=null&&a;const l=r&&!a?this.ya():[],c=this.da.size===0&&this.current&&!a?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Tv(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Y7,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qn(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new UZ(n))}),this.da.forEach(n=>{e.has(n)||r.push(new LZ(n))}),r}ba(e){this.Ta=e.Ts,this.da=qn();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Tv.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Y1e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class J1e{constructor(e){this.key=e,this.va=!1}}class Z1e{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fm(l=>QJ(l),Aj),this.Ma=new Map,this.xa=new Set,this.Oa=new Hs(Hr.comparator),this.Na=new Map,this.La=new $D,this.Ba={},this.ka=new Map,this.qa=ag.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eye(t,e,r=!0){const n=KZ(t);let a;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.Da()):a=await QZ(n,e,r,!0),a}async function tye(t,e){const r=KZ(t);await QZ(r,e,!0,!1)}async function QZ(t,e,r,n){const a=await N1e(t.localStore,xd(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await rye(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&kZ(t.remoteStore,a),l}async function rye(t,e,r,n,a){t.Ka=(f,A,h)=>async function(p,x,v,y){let b=x.view.ma(v);b.ns&&(b=await q7(p.localStore,x.query,!1).then(({documents:_})=>x.view.ma(_,b)));const w=y&&y.targetChanges.get(x.targetId),j=y&&y.targetMismatches.get(x.targetId)!=null,I=x.view.applyChanges(b,p.isPrimaryClient,w,j);return t9(p,x.targetId,I.wa),I.snapshot}(t,f,A,h);const s=await q7(t.localStore,e,!0),o=new X1e(e,s.Ts),l=o.ma(s.documents),c=ww.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);t9(t,r,u.wa);const d=new Y1e(e,r,o);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function nye(t,e,r){const n=Pn(t),a=n.Fa.get(e),s=n.Ma.get(a.targetId);if(s.length>1)return n.Ma.set(a.targetId,s.filter(o=>!Aj(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await qT(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&zD(n.remoteStore,a.targetId),WT(n,a.targetId)}).catch(Cg)):(WT(n,a.targetId),await qT(n.localStore,a.targetId,!0))}async function aye(t,e){const r=Pn(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zD(r.remoteStore,n.targetId))}async function sye(t,e,r){const n=qZ(t);try{const a=await function(o,l){const c=Pn(o),u=xr.now(),d=l.reduce((h,m)=>h.add(m.key),qn());let f,A;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=Cu(),p=qn();return c.cs.getEntries(h,d).next(x=>{m=x,m.forEach((v,y)=>{y.isValidDocument()||(p=p.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,m)).next(x=>{f=x;const v=[];for(const y of l){const b=Nve(y,f.get(y.key).overlayedDocument);b!=null&&v.push(new PA(y.key,b,TJ(b.value.mapValue),Us.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,v,l)}).next(x=>{A=x;const v=x.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(h,x.batchId,v)})}).then(()=>({batchId:A.batchId,changes:$J(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Hs(Rn)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,a.batchId,r),await _w(n,a.changes),await Cw(n.remoteStore)}catch(a){const s=ZD(a,"Failed to persist write");r.reject(s)}}async function VZ(t,e){const r=Pn(t);try{const n=await y1e(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Na.get(s);o&&(on(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?on(o.va):a.removedDocuments.size>0&&(on(o.va),o.va=!1))}),await _w(r,n,e)}catch(n){await Cg(n)}}function e9(t,e,r){const n=Pn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=Pn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const A of f.j_)A.Z_(l)&&(u=!0)}),u&&r6(c)}(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function iye(t,e,r){const n=Pn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),s=a&&a.key;if(s){let o=new Hs(Hr.comparator);o=o.insert(s,Ms.newNoDocument(s,hn.min()));const l=qn().add(s),c=new gj(hn.min(),new Map,new Hs(Rn),o,l);await VZ(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),a6(n)}else await qT(n.localStore,e,!1).then(()=>WT(n,e,r)).catch(Cg)}async function oye(t,e){const r=Pn(t),n=e.batch.batchId;try{const a=await v1e(r.localStore,e);$Z(r,n,null),HZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await _w(r,a)}catch(a){await Cg(a)}}async function lye(t,e,r){const n=Pn(t);try{const a=await function(o,l){const c=Pn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(on(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);$Z(n,e,r),HZ(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await _w(n,a)}catch(a){await Cg(a)}}function HZ(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function $Z(t,e,r){const n=Pn(t);let a=n.Ba[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function WT(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||GZ(t,n)})}function GZ(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zD(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),a6(t))}function t9(t,e,r){for(const n of r)n instanceof LZ?(t.La.addReference(n.key,e),cye(t,n)):n instanceof UZ?(Er("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||GZ(t,n.key)):en()}function cye(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Er("SyncEngine","New document in limbo: "+r),t.xa.add(n),a6(t))}function a6(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Hr(wa.fromString(e)),n=t.qa.next();t.Na.set(n,new J1e(r)),t.Oa=t.Oa.insert(r,n),kZ(t.remoteStore,new $h(xd(yw(r.path)),n,"TargetPurposeLimboResolution",fd.oe))}}async function _w(t,e,r){const n=Pn(t),a=[],s=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=KD.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Ca.d_(a),await async function(c,u){const d=Pn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>qt.forEach(u,A=>qt.forEach(A.$i,h=>d.persistence.referenceDelegate.addReference(f,A.targetId,h)).next(()=>qt.forEach(A.Ui,h=>d.persistence.referenceDelegate.removeReference(f,A.targetId,h)))))}catch(f){if(!km(f))throw f;Er("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const A=f.targetId;if(!f.fromCache){const h=d.os.get(A),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(A,p)}}}(n.localStore,s))}async function uye(t,e){const r=Pn(t);if(!r.currentUser.isEqual(e)){Er("SyncEngine","User change. New user:",e.toKey());const n=await jZ(r.localStore,e);r.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new kr(lr.CANCELLED,o))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _w(r,n.hs)}}function dye(t,e){const r=Pn(t),n=r.Na.get(e);if(n&&n.va)return qn().add(n.key);{let a=qn();const s=r.Ma.get(e);if(!s)return a;for(const o of s){const l=r.Fa.get(o);a=a.unionWith(l.view.Va)}return a}}function KZ(t){const e=Pn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VZ.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dye.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iye.bind(null,e),e.Ca.d_=z1e.bind(null,e.eventManager),e.Ca.$a=W1e.bind(null,e.eventManager),e}function qZ(t){const e=Pn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oye.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lye.bind(null,e),e}class x2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bj(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return IZ(this.persistence,new SZ,e.initialUser,this.serializer)}Ga(e){return new EZ(yj.Zr,this.serializer)}Wa(e){return new BZ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}x2.provider={build:()=>new x2};class fye extends x2{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await qZ(this.Ja.syncEngine),await Cw(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return IZ(this.persistence,new SZ,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new e1e(n,e.asyncQueue,r)}Ha(e,r){const n=new jxe(r,this.persistence);return new Ixe(e.asyncQueue,n)}Ga(e){const r=p1e(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Qc.withCacheSize(this.cacheSizeBytes):Qc.DEFAULT;return new GD(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,j1e(),tE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new BZ}}class aS{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>e9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=uye.bind(null,this.syncEngine),await G1e(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q1e}()}createDatastore(e){const r=bj(e.databaseInfo.databaseId),n=function(s){return new I1e(s)}(e.databaseInfo);return function(s,o,l,c){return new T1e(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new F1e(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>e9(this.syncEngine,r,0),function(){return W7.D()?new W7:new _1e}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new Z1e(a,s,o,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=Pn(a);Er("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Nw(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}aS.provider={build:()=>new aS};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pc("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hye{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new kr(lr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(a,s){const o=Pn(a),l={documents:s.map(f=>p2(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,wa.emptyPath(),l,s.length),u=new Map;c.forEach(f=>{const A=Fve(o.serializer,f);u.set(A.key.toString(),A)});const d=[];return s.forEach(f=>{const A=u.get(f.toString());on(!!A),d.push(A)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new i1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const a=Hr.fromPath(n);this.mutations.push(new DD(a,this.precondition(a)))}),await async function(n,a){const s=Pn(n),o={writes:a.map(l=>g2(s.serializer,l))};await s.Mo("Commit",s.serializer.databaseId,wa.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw en();r=hn.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new kr(lr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(hn.min())?Us.exists(!1):Us.updateTime(r):Us.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(hn.min()))throw new kr(lr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Us.updateTime(r)}return Us.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(e,r,n,a,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=s,this._u=n.maxAttempts,this.t_=new qD(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new hye(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.lu(a)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!xw(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!eZ(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mye{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=pl.UNAUTHENTICATED,this.clientId=ID.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{Er("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Er("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ZD(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function x3(t,e){t.asyncQueue.verifyOperationInProgress(),Er("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await jZ(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r9(t,e){t.asyncQueue.verifyOperationInProgress();const r=await pye(t);Er("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>X7(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>X7(e.remoteStore,a)),t._onlineComponents=e}async function pye(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Er("FirestoreClient","Using user provided OfflineComponentProvider");try{await x3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===lr.FAILED_PRECONDITION||a.code===lr.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;hm("Error using user provided cache. Falling back to memory cache: "+r),await x3(t,new x2)}}else Er("FirestoreClient","Using default OfflineComponentProvider"),await x3(t,new x2);return t._offlineComponents}async function i6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Er("FirestoreClient","Using user provided OnlineComponentProvider"),await r9(t,t._uninitializedComponentsProvider._online)):(Er("FirestoreClient","Using default OnlineComponentProvider"),await r9(t,new aS))),t._onlineComponents}function gye(t){return i6(t).then(e=>e.syncEngine)}function xye(t){return i6(t).then(e=>e.datastore)}async function sS(t){const e=await i6(t),r=e.eventManager;return r.onListen=eye.bind(null,e.syncEngine),r.onUnlisten=nye.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=tye.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aye.bind(null,e.syncEngine),r}function vye(t,e,r={}){const n=new lf;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new s6({next:A=>{d.Za(),o.enqueueAndForget(()=>t6(s,f));const h=A.docs.has(l);!h&&A.fromCache?u.reject(new kr(lr.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&A.fromCache&&c&&c.source==="server"?u.reject(new kr(lr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new n6(yw(l.path),d,{includeMetadataChanges:!0,_a:!0});return e6(s,f)}(await sS(t),t.asyncQueue,e,r,n)),n.promise}function yye(t,e,r={}){const n=new lf;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new s6({next:A=>{d.Za(),o.enqueueAndForget(()=>t6(s,f)),A.fromCache&&c.source==="server"?u.reject(new kr(lr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(A)},error:A=>u.reject(A)}),f=new n6(l,d,{includeMetadataChanges:!0,_a:!0});return e6(s,f)}(await sS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WZ(t,e,r){if(!r)throw new kr(lr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XZ(t,e,r,n){if(e===!0&&n===!0)throw new kr(lr.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function a9(t){if(!Hr.isDocumentKey(t))throw new kr(lr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s9(t){if(Hr.isDocumentKey(t))throw new kr(lr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":en()}function Xo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kr(lr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Nj(t);throw new kr(lr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new kr(lr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new kr(lr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XZ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zZ((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new kr(lr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new kr(lr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new kr(lr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cj{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kr(lr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new kr(lr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i9(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xJ;switch(n.type){case"firstParty":return new yxe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new kr(lr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=n9.get(r);n&&(Er("ComponentProvider","Removing Datastore"),n9.delete(r),n.terminate())}(this),Promise.resolve()}}function YZ(t,e,r,n={}){var a;const s=(t=Xo(t,Cj))._getSettings(),o=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&hm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=pl.MOCK_USER;else{l=D0e(n.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new kr(lr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new pl(u)}t._authCredentials=new gxe(new gJ(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lh(this.firestore,e,this._query)}}class Yo{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yo(this.firestore,e,this._key)}}class Zh extends lh{constructor(e,r,n){super(e,r,yw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yo(this.firestore,null,new Hr(e))}withConverter(e){return new Zh(this.firestore,e,this._path)}}function yt(t,e,...r){if(t=oi(t),WZ("collection","path",e),t instanceof Cj){const n=wa.fromString(e,...r);return s9(n),new Zh(t,null,n)}{if(!(t instanceof Yo||t instanceof Zh))throw new kr(lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wa.fromString(e,...r));return s9(n),new Zh(t.firestore,null,n)}}function Jt(t,e,...r){if(t=oi(t),arguments.length===1&&(e=ID.newId()),WZ("doc","path",e),t instanceof Cj){const n=wa.fromString(e,...r);return a9(n),new Yo(t,null,new Hr(n))}{if(!(t instanceof Yo||t instanceof Zh))throw new kr(lr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(wa.fromString(e,...r));return a9(n),new Yo(t.firestore,t instanceof Zh?t.converter:null,new Hr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qD(this,"async_queue_retry"),this.Vu=()=>{const n=tE();n&&Er("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=tE();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=tE();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new lf;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!km(e))throw e;Er("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const a=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw pc("INTERNAL UNHANDLED ERROR: ",a),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=JD.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(a),a}fu(){this.Eu&&en()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function l9(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Tu extends Cj{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new o9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o9(e),this._firestoreClient=void 0,await e}}}function JZ(t,e){const r=typeof t=="object"?t:AD(),n=typeof t=="string"?t:"(default)",a=fD(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=F0e("firestore");s&&YZ(a,...s)}return a}function Sg(t){if(t._terminated)throw new kr(lr.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZZ(t),t._firestoreClient}function ZZ(t){var e,r,n;const a=t._freezeSettings(),s=function(l,c,u,d){return new Yxe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zZ(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new mye(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function eee(t,e){hm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return bye(t,aS.provider,{build:n=>new fye(n,r.cacheSizeBytes,void 0)}),Promise.resolve()}function bye(t,e,r){if((t=Xo(t,Tu))._firestoreClient||t._terminated)throw new kr(lr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new kr(lr.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},ZZ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xm(Vi.fromBase64String(e))}catch(r){throw new kr(lr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new xm(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new kr(lr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new kr(lr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new kr(lr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wye=/^__.*__$/;class Nye{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new PA(e,this.data,this.fieldMask,r,this.fieldTransforms):new s1(e,this.data,r,this.fieldTransforms)}}class tee{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new PA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ree(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class Sj{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sj(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return iS(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ree(this.Cu)&&wye.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Cye{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||bj(e)}Qu(e,r,n,a=!1){return new Sj({Cu:e,methodName:r,qu:n,path:Ls.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l1(t){const e=t._freezeSettings(),r=bj(t._databaseId);return new Cye(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Ij(t,e,r,n,a,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,r,a);u6("Data must be an object, but it was:",o,n);const l=nee(n,o);let c,u;if(s.merge)c=new Kc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const A=XT(e,f,r);if(!o.contains(A))throw new kr(lr.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);see(d,A)||d.push(A)}c=new Kc(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Nye(new vl(l),c,u)}class jj extends Ew{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jj}}function _ye(t,e,r){return new Sj({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class o6 extends Ew{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=_ye(this,e,!0),n=this.Ku.map(s=>c1(s,r)),a=new tg(n);return new YJ(e.path,a)}isEqual(e){return e instanceof o6&&r2(this.Ku,e.Ku)}}function l6(t,e,r,n){const a=t.Qu(1,e,r);u6("Data must be an object, but it was:",a,n);const s=[],o=vl.empty();_g(n,(c,u)=>{const d=d6(e,c,r);u=oi(u);const f=a.Nu(d);if(u instanceof jj)s.push(d);else{const A=c1(u,f);A!=null&&(s.push(d),o.set(d,A))}});const l=new Kc(s);return new tee(o,l,a.fieldTransforms)}function c6(t,e,r,n,a,s){const o=t.Qu(1,e,r),l=[XT(e,n,r)],c=[a];if(s.length%2!=0)throw new kr(lr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)l.push(XT(e,s[A])),c.push(s[A+1]);const u=[],d=vl.empty();for(let A=l.length-1;A>=0;--A)if(!see(u,l[A])){const h=l[A];let m=c[A];m=oi(m);const p=o.Nu(h);if(m instanceof jj)u.push(h);else{const x=c1(m,p);x!=null&&(u.push(h),d.set(h,x))}}const f=new Kc(u);return new tee(d,f,o.fieldTransforms)}function Eye(t,e,r,n=!1){return c1(r,t.Qu(n?4:3,e))}function c1(t,e){if(aee(t=oi(t)))return u6("Unsupported field value:",e,t),nee(t,e);if(t instanceof Ew)return function(n,a){if(!ree(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=c1(l,a.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=oi(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return gve(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=xr.fromDate(n);return{timestampValue:Bv(a.serializer,s)}}if(n instanceof xr){const s=new xr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Bv(a.serializer,s)}}if(n instanceof _j)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof xm)return{bytesValue:aZ(a.serializer,n._byteString)};if(n instanceof Yo){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ej)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return OD(l.serializer,c)})}}}}}}(n,a);throw a.Bu(`Unsupported field value: ${Nj(n)}`)}(t,e)}function nee(t,e){const r={};return IJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_g(t,(n,a)=>{const s=c1(a,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function aee(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xr||t instanceof _j||t instanceof xm||t instanceof Yo||t instanceof Ew||t instanceof Ej)}function u6(t,e,r){if(!aee(r)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(r)){const n=Nj(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function XT(t,e,r){if((e=oi(e))instanceof Ig)return e._internalPath;if(typeof e=="string")return d6(t,e);throw iS("Field path arguments must be of type string or ",t,!1,void 0,r)}const Sye=new RegExp("[~\\*/\\[\\]]");function d6(t,e,r){if(e.search(Sye)>=0)throw iS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Ig(...e.split("."))._internalPath}catch{throw iS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function iS(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new kr(lr.INVALID_ARGUMENT,l+t+c)}function see(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Iye(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Pj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Iye extends oS{data(){return super.data()}}function Pj(t,e){return typeof e=="string"?d6(t,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iee(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new kr(lr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f6{}class Bj extends f6{}function ar(t,e,...r){let n=[];e instanceof f6&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof Tj).length,l=s.filter(c=>c instanceof Sw).length;if(o>1||o>0&&l>0)throw new kr(lr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Sw extends Bj{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Sw(e,r,n)}_apply(e){const r=this._parse(e);return oee(e._query,r),new lh(e.firestore,e.converter,LT(e._query,r))}_parse(e){const r=l1(e.firestore);return function(s,o,l,c,u,d,f){let A;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new kr(lr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){u9(f,d);const h=[];for(const m of f)h.push(c9(c,s,m));A={arrayValue:{values:h}}}else A=c9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||u9(f,d),A=Eye(l,o,f,d==="in"||d==="not-in");return sa.create(u,d,A)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function mr(t,e,r){const n=e,a=Pj("where",t);return Sw._create(a,n,r)}class Tj extends f6{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Tj(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:qa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)oee(o,c),o=LT(o,c)}(e._query,r),new lh(e.firestore,e.converter,LT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class kj extends Bj{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new kj(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new kr(lr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new kr(lr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new h2(s,o)}(e._query,this._field,this._direction);return new lh(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new a1(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function wn(t,e="asc"){const r=e,n=Pj("orderBy",t);return kj._create(n,r)}class Fj extends Bj{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Fj(e,r,n)}_apply(e){return new lh(e.firestore,e.converter,ZE(e._query,this._limit,this._limitType))}}function lS(t){return Fj._create("limit",t,"F")}function c9(t,e,r){if(typeof(r=oi(r))=="string"){if(r==="")throw new kr(lr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UJ(e)&&r.indexOf("/")!==-1)throw new kr(lr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(wa.fromString(r));if(!Hr.isDocumentKey(n))throw new kr(lr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return d2(t,new Hr(n))}if(r instanceof Yo)return d2(t,r._key);throw new kr(lr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nj(r)}.`)}function u9(t,e){if(!Array.isArray(t)||t.length===0)throw new kr(lr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oee(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new kr(lr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new kr(lr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class h6{convertValue(e,r="none"){switch(Zp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ds(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Am(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw en()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return _g(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,a;const s=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map(o=>Ds(o.doubleValue));return new Ej(s)}convertGeoPoint(e){return new _j(Ds(e.latitude),Ds(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=kD(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(c2(e));default:return null}}convertTimestamp(e){const r=hA(e);return new xr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=wa.fromString(e);on(AZ(n));const a=new mm(n.get(1),n.get(3)),s=new Hr(n.popFirst(5));return a.isEqual(r)||pc(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class jye extends h6{constructor(e){super(),this.firestore=e}convertBytes(e){return new xm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yo(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dj extends oS{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Pj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ab extends Dj{data(e={}){return super.data(e)}}class A6{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new xp(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ab(this._firestore,this._userDataWriter,n.key,n,new xp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new kr(lr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new Ab(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Ab(a._firestore,a._userDataWriter,l.doc.key,l.doc,new xp(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Pye(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Pye(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t){t=Xo(t,Yo);const e=Xo(t.firestore,Tu);return vye(Sg(e),t._key).then(r=>cee(e,t,r))}class Rj extends h6{constructor(e){super(),this.firestore=e}convertBytes(e){return new xm(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Yo(this.firestore,null,r)}}function Qt(t){t=Xo(t,lh);const e=Xo(t.firestore,Tu),r=Sg(e),n=new Rj(e);return iee(t._query),yye(r,t._query).then(a=>new A6(e,n,t,a))}function lee(t,e,r){t=Xo(t,Yo);const n=Xo(t.firestore,Tu),a=Oj(t.converter,e,r);return u1(n,[Ij(l1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Us.none())])}function _n(t,e,r,...n){t=Xo(t,Yo);const a=Xo(t.firestore,Tu),s=l1(a);let o;return o=typeof(e=oi(e))=="string"||e instanceof Ig?c6(s,"updateDoc",t._key,e,r,n):l6(s,"updateDoc",t._key,e),u1(a,[o.toMutation(t._key,Us.exists(!0))])}function Mn(t){return u1(Xo(t.firestore,Tu),[new i1(t._key,Us.none())])}function $n(t,e){const r=Xo(t.firestore,Tu),n=Jt(t),a=Oj(t.converter,e);return u1(r,[Ij(l1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Us.exists(!1))]).then(()=>n)}function vd(t,...e){var r,n,a;t=oi(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||l9(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(l9(e[o])){const f=e[o];e[o]=(r=f.next)===null||r===void 0?void 0:r.bind(f),e[o+1]=(n=f.error)===null||n===void 0?void 0:n.bind(f),e[o+2]=(a=f.complete)===null||a===void 0?void 0:a.bind(f)}let c,u,d;if(t instanceof Yo)u=Xo(t.firestore,Tu),d=yw(t._key.path),c={next:f=>{e[o]&&e[o](cee(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Xo(t,lh);u=Xo(f.firestore,Tu),d=f._query;const A=new Rj(u);c={next:h=>{e[o]&&e[o](new A6(u,A,f,h))},error:e[o+1],complete:e[o+2]},iee(t._query)}return function(A,h,m,p){const x=new s6(p),v=new n6(h,x,m);return A.asyncQueue.enqueueAndForget(async()=>e6(await sS(A),v)),()=>{x.Za(),A.asyncQueue.enqueueAndForget(async()=>t6(await sS(A),v))}}(Sg(u),d,l,c)}function u1(t,e){return function(n,a){const s=new lf;return n.asyncQueue.enqueueAndForget(async()=>sye(await gye(n),a,s)),s.promise}(Sg(t),e)}function cee(t,e,r){const n=r.docs.get(e._key),a=new Rj(t);return new Dj(t,a,e._key,n,new xp(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bye={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=l1(e)}set(e,r,n){this._verifyNotCommitted();const a=k0(e,this._firestore),s=Oj(a.converter,r,n),o=Ij(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Us.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=k0(e,this._firestore);let o;return o=typeof(r=oi(r))=="string"||r instanceof Ig?c6(this._dataReader,"WriteBatch.update",s._key,r,n,a):l6(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Us.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=k0(e,this._firestore);return this._mutations=this._mutations.concat(new i1(r._key,Us.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new kr(lr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function k0(t,e){if((t=oi(t)).firestore!==e)throw new kr(lr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=l1(r)}get(r){const n=k0(r,this._firestore),a=new jye(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return en();const o=s[0];if(o.isFoundDocument())return new oS(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new oS(this._firestore,a,n._key,null,n.converter);throw en()})}set(r,n,a){const s=k0(r,this._firestore),o=Oj(s.converter,n,a),l=Ij(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,a);return this._transaction.set(s._key,l),this}update(r,n,a,...s){const o=k0(r,this._firestore);let l;return l=typeof(n=oi(n))=="string"||n instanceof Ig?c6(this._dataReader,"Transaction.update",o._key,n,a,s):l6(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,l),this}delete(r){const n=k0(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=k0(e,this._firestore),n=new Rj(this._firestore);return super.get(e).then(a=>new Dj(this._firestore,n,r._key,a._document,new xp(!1,!1),r.converter))}}function Mi(t,e,r){t=Xo(t,Tu);const n=Object.assign(Object.assign({},Bye),r);return function(s){if(s.maxAttempts<1)throw new kr(lr.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,o,l){const c=new lf;return s.asyncQueue.enqueueAndForget(async()=>{const u=await xye(s);new Aye(s.asyncQueue,u,l,o,c).au()}),c.promise}(Sg(t),a=>e(new dee(t,a)),n)}function fee(...t){return new o6("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){return Sg(t=Xo(t,Tu)),new uee(t,e=>u1(t,e))}(function(e,r=!0){(function(a){n1=a})(t1),_v(new Wp("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Tu(new xxe(n.getProvider("auth-internal")),new wxe(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new kr(lr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mm(u.options.projectId,d)}(o,a),o);return s=Object.assign({useFetchStreams:r},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),nm(r7,"4.7.3",e),nm(r7,"4.7.3","esm2017")})();const Tye=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:h6,Bytes:xm,CollectionReference:Zh,DocumentReference:Yo,DocumentSnapshot:Dj,FieldPath:Ig,FieldValue:Ew,Firestore:Tu,FirestoreError:kr,GeoPoint:_j,Query:lh,QueryCompositeFilterConstraint:Tj,QueryConstraint:Bj,QueryDocumentSnapshot:Ab,QueryFieldFilterConstraint:Sw,QueryLimitConstraint:Fj,QueryOrderByConstraint:kj,QuerySnapshot:A6,SnapshotMetadata:xp,Timestamp:xr,Transaction:dee,VectorValue:Ej,WriteBatch:uee,_AutoId:ID,_ByteString:Vi,_DatabaseId:mm,_DocumentKey:Hr,_EmptyAuthCredentialsProvider:xJ,_FieldPath:Ls,_cast:Xo,_logWarn:hm,_validateIsNotUsedTogether:XZ,addDoc:$n,arrayUnion:fee,collection:yt,connectFirestoreEmulator:YZ,deleteDoc:Mn,doc:Jt,enableIndexedDbPersistence:eee,ensureFirestoreConfigured:Sg,executeWrite:u1,getDoc:si,getDocs:Qt,getFirestore:JZ,limit:lS,onSnapshot:vd,orderBy:wn,query:ar,runTransaction:Mi,setDoc:lee,updateDoc:_n,where:mr,writeBatch:cf},Symbol.toStringTag,{value:"Module"})),kye={apiKey:"AIzaSyA_ZzeP_DAoXeRuallrOaJ4xFaxjnuhw-8",authDomain:"posys-103de.firebaseapp.com",projectId:"posys-103de",storageBucket:"posys-103de.firebasestorage.app",messagingSenderId:"401054148688",appId:"1:401054148688:web:1c2aea9e8b40958b514955",measurementId:"G-Q2GWQXMFLX"},hee=hD(kye),ke=JZ(hee),uf=PT(hee),Fye=(async()=>{try{return await G_(uf,ND),console.info(" Auth persistence: browserLocalPersistence enabled"),"local"}catch(t){console.warn(" browserLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await G_(uf,lJ),console.info(" Auth persistence: indexedDBLocalPersistence enabled"),"indexeddb"}catch(t){console.warn(" indexedDBLocalPersistence failed:",(t==null?void 0:t.code)||t)}try{return await G_(uf,CD),console.info(" Auth persistence: browserSessionPersistence enabled (session only)"),"session"}catch(t){console.warn(" browserSessionPersistence failed:",(t==null?void 0:t.code)||t)}return console.warn(" No se pudo establecer ninguna persistencia para Auth."),"none"})();eee(ke).catch(t=>{t.code==="failed-precondition"?console.warn(" Ya hay otra pestaa usando persistencia."):t.code==="unimplemented"?console.warn(" El navegador no soporta persistencia offline."):console.error(" Error en persistencia offline:",t)});function Oye(){const[t,e]=g.useState(""),[r,n]=g.useState(""),[a,s]=g.useState(!1),[o,l]=g.useState(""),[c,u]=g.useState(!1),d=uw();g.useEffect(()=>{let h=!0;const m=cj(uf,async p=>{if(!(!p||!h))try{const x=await si(Jt(ke,"users",p.uid));if(!x.exists())return;const v=x.data(),y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"";localStorage.setItem("user_email",p.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin",{replace:!0})}catch{}});return()=>{h=!1,m()}},[d]);const f=h=>{if(Array.isArray(h)){if(h.length!==1)return localStorage.setItem("role",h[0]||""),d("/admin");h=h[0]||""}const m=String(h||"");if(localStorage.setItem("role",m),xn(m,"admin"))return d("/admin");if(xn(m,"vendedor_pollo"))return d("/admin/salesV2");if(xn(m,"vendedor_ropa"))return d("/admin/salesClothes");if(xn(m,"vendedor_dulces"))return d("/admin/salesCandies");if(xn(m,"supervisor_pollo")||xn(m,"contador"))return d("/admin/batches")},A=async h=>{if(h.preventDefault(),l(""),!t.trim()){l("Ingresa el correo.");return}if(r.length<6){l("La contrasea debe tener al menos 6 caracteres.");return}try{u(!0),console.info&&console.info("[Login] attempting signIn",{email:t}),await G_(uf,ND);const m=await nge(uf,t,r);console.info&&console.info("[Login] signInWithEmailAndPassword success",{uid:m.user.uid,email:m.user.email});const p=m.user.uid;localStorage.setItem("POSYS_LOGIN_AT",String(Date.now()));const x=await si(Jt(ke,"users",p));if(console.info&&console.info("[Login] firestore users doc snap: exists=",x.exists()),!x.exists()){console.warn&&console.warn("[Login] user doc missing for uid",p),l("Tu usuario no tiene perfil en la base de datos.");return}const v=x.data();console.info&&console.info("[Login] user profile:",v);const y=Array.isArray(v.roles)?v.roles:v.role?[v.role]:[],b=y[0]||"",w=v.name||"",j=["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"];if(!y.some(I=>j.includes(I))){l("Rol no vlido. Consulta al administrador.");return}localStorage.setItem("user_email",m.user.email||""),w&&localStorage.setItem("user_name",w),localStorage.setItem("roles",JSON.stringify(y)),y.length===1?f(b):d("/admin")}catch(m){console.error&&console.error("[Login] sign-in error:",m);const p=String((m==null?void 0:m.code)||"");l(p==="auth/invalid-credential"||p==="auth/wrong-password"?"Credenciales incorrectas. ("+p+")":p==="auth/user-not-found"?"Usuario no encontrado. ("+p+")":p==="auth/too-many-requests"?"Demasiados intentos. Intenta ms tarde. ("+p+")":((m==null?void 0:m.message)||"Error al iniciar sesin.")+(p?` (${p})`:""))}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen grid place-items-center ",children:i.jsxs("form",{onSubmit:A,className:"w-[92%] max-w-md bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Iniciar Sesin"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border rounded-2xl px-3 py-2 mb-3 shadow-2xl",value:t,onChange:h=>e(h.target.value),autoComplete:"username"}),i.jsx("label",{className:"block text-sm font-semibold",children:"Contrasea"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:a?"text":"password",className:"flex-1 border rounded-2xl px-3 py-2 shadow-2xl",value:r,onChange:h=>n(h.target.value),minLength:6,autoComplete:"current-password"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-2xl shadow-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>s(h=>!h),children:a?"Ocultar":"Mostrar"})]}),i.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Mnimo 6 caracteres (requisito de Firebase)."}),i.jsx("button",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-2xl shadow-2xl hover:bg-blue-700 disabled:opacity-60",disabled:c,children:c?"Entrando...":"Entrar"}),o&&i.jsx("p",{className:`mt-3 text-sm ${o.startsWith("Error")||o.includes("no vlido")?"text-red-600":"text-gray-700"}`,children:o})]})})}function Vn({children:t,allowedRoles:e}){const[r,n]=g.useState(!0),[a,s]=g.useState(!1);return g.useEffect(()=>{const o=cj(uf,async l=>{if(l){const c=Jt(ke,"users",l.uid),u=await si(c);if(u.exists()){const d=u.data(),f=Array.isArray(d.roles)?d.roles:d.role?[d.role]:[];try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e):console.debug&&console.debug("[PrivateRoute] uid:",l.uid,"roleFromDoc:",role,"allowedRoles:",e)}catch{}let A=!1;for(const h of e)if(xn(f,h)){A=!0;break}s(A)}else try{typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?console.info&&console.info("[PrivateRoute] no user doc for uid:",l.uid):console.debug&&console.debug("[PrivateRoute] no user doc for uid:",l.uid)}catch{}}n(!1)});return()=>o()},[e]),r?i.jsx("div",{className:"p-4",children:"Cargando..."}):a?t:i.jsx(Bh,{to:"/"})}const Dye={admin:{},supervisor_pollo:{bills:{view:!0,edit:!1},expenses:{view:!0,edit:!1},customersPollo:{view:!0,edit:!1},transactionsPollo:{view:!0,edit:!1},batches:{view:!0,edit:!1}},contador:{salesV2:{view:!0,edit:!0},customersPollo:{view:!0,edit:!0},batches:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},expenses:{view:!0,edit:!0},financialDashboard:{view:!0,edit:!1}},vendedor_pollo:{salesV2:{view:!0,edit:!0},transactionsPollo:{view:!0,edit:!1},bills:{view:!0,edit:!1},customersPollo:{view:!0,edit:!0}},vendedor_dulces:{salesCandies:{view:!0,edit:!0},productsVendorsCandies:{view:!0,edit:!1},productsPricesCandies:{view:!0,edit:!1},transactionCandies:{view:!0,edit:!1},cierreVentasCandies:{view:!0,edit:!1},customersCandies:{view:!0,edit:!0}},vendedor_ropa:{}};function Aee(t){return t?Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean):[]}function Xn(t,e,r="view"){const n=Aee(t);return n.some(a=>a==="admin")?!0:n.some(a=>{var s,o;return!!((o=(s=Dye[a])==null?void 0:s[e])!=null&&o[r])})}const Rye={admin:{},supervisor_pollo:{bills:{cerrarVentas:!1},batches:{create:!1,update:!1,delete:!1,export:!1}},contador:{batches:{create:!0,update:!1,delete:!1,export:!0},bills:{cerrarVentas:!1}},vendedor_pollo:{salesV2:{create:!0,update:!0},customersPollo:{update:!0},bills:{cerrarVentas:!0}},vendedor_dulces:{salesCandies:{create:!0,update:!0},productsVendorsCandies:{create:!0,update:!1,delete:!1},customersCandies:{update:!0},productsPricesCandies:{price_edit:!1}},vendedor_ropa:{}};function Mye(t,e,r){const n=Aee(t);return n.some(a=>a==="admin")?!0:Xn(t,e,"view")?n.some(a=>{var o;const s=(o=Rye[a])==null?void 0:o[e];return!!(s!=null&&s[r])}):!1}function Lye({role:t,roles:e}){const r="/admin",n=({isActive:ae})=>`block rounded px-3 py-2 text-sm ${ae?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"}`,a=uw(),[s,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(!1),[h,m]=g.useState(!1),[p,x]=g.useState(!1),[v,y]=g.useState(!1),[b,w]=g.useState(!1),[j,I]=g.useState(!1),[_,S]=g.useState(!1),[E,F]=g.useState(!1),[k,B]=g.useState(!1),[D,X]=g.useState(!1),[he,Ae]=g.useState(!1),[fe,me]=g.useState(!1),[ne,Pe]=g.useState(!1),[Te,O]=g.useState(!1),[K,q]=g.useState(!1),U=async()=>{q(!0)},W=async()=>{try{await wD(uf)}catch(ae){console.error("signOut error:",ae)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}q(!1),a("/")}},J=({open:ae,onClick:ee,children:Fe})=>i.jsxs("button",{type:"button",onClick:ee,className:"w-full flex items-center justify-between px-3 py-2 text-left text-sm font-semibold rounded hover:bg-gray-100",children:[i.jsx("span",{children:Fe}),i.jsx("span",{className:"text-xs",children:ae?"":""})]}),M=({open:ae,onClick:ee,title:Fe})=>i.jsxs("button",{type:"button",onClick:ee,className:"ml-2 w-[calc(100%-0.5rem)] flex items-center justify-between px-3 py-2 text-left text-sm rounded hover:bg-gray-100",children:[i.jsx("span",{className:"text-blue-500 font-medium ",children:Fe}),i.jsx("span",{className:"text-xs",children:ae?"":""})]}),H=e&&e.length?e:t,te=xn(H,"admin");xn(H,"vendedor_pollo");const ve=xn(H,"vendedor_ropa");xn(H,"vendedor_dulces"),xn(H,"supervisor_pollo")||xn(H,"contador"),xn(H,"contador");const Q=Xn(H,"salesV2","view")||Xn(H,"customersPollo","view")||Xn(H,"transactionsPollo","view")||Xn(H,"bills","view")||Xn(H,"expenses","view")||Xn(H,"batches","view"),Ke=Xn(H,"salesCandies","view")||Xn(H,"productsVendorsCandies","view")||Xn(H,"customersCandies","view")||Xn(H,"productsPricesCandies","view")||Xn(H,"transactionCandies","view")||Xn(H,"cierreVentasCandies","view");return i.jsxs("div",{className:"min-h-screen flex",children:[i.jsxs("aside",{className:`${s?"w-15 bg-gray-50 border-r p-3 transition-all duration-300 flex flex-col items-center":"w-55"} bg-[#f1f3f7] border-r p-3 transition-all duration-300 flex flex-col`,children:[i.jsx("button",{onClick:()=>o(!s),className:"mb-2 p-2 rounded-2xl shadow-2xl bg-gray-300 hover:bg-gray-400","aria-label":s?"Expandir men":"Colapsar men",children:s?i.jsx("span",{title:"Expandir men",children:"Menu "}):i.jsx("span",{title:"Colapsar men",children:"Cerrar "})}),!s&&i.jsxs(i.Fragment,{children:[i.jsxs("nav",{className:"space-y-1",children:[te&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:l,onClick:()=>c(ae=>!ae),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:p,onClick:()=>x(ae=>!ae),title:"Operaciones"}),p&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(pn,{to:`${r}/salesV2`,className:n,children:"Vender"}),i.jsx(pn,{to:`${r}/customersPollo`,className:n,children:"Saldo Pendientes"}),i.jsx(pn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),i.jsx(pn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"})]}),i.jsx(M,{open:u,onClick:()=>d(ae=>!ae),title:"Inventarios"}),u&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(pn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),i.jsx(pn,{to:`${r}/paidBatches`,className:n,children:"Inventarios Pagados"})]}),i.jsx(M,{open:f,onClick:()=>A(ae=>!ae),title:"Finanzas"}),f&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(pn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),i.jsx(pn,{to:`${r}/billing`,className:n,children:"Facturacion"}),i.jsx(pn,{to:`${r}/expenses`,className:n,children:"Gastos"}),i.jsx(pn,{to:`${r}/salesV2`,className:n,children:"Venta"}),i.jsx(pn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),i.jsx(pn,{to:`${r}/billhistoric`,className:n,children:"Historial de Cierres"})]}),i.jsx(M,{open:h,onClick:()=>m(ae=>!ae),title:"Productos"}),h&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/products`,className:n,children:"Productos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:v,onClick:()=>y(ae=>!ae),children:"Gonper"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:b,onClick:()=>w(ae=>!ae),title:"Inventarios"}),b&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/notebooksInventory`,className:n,children:"Productos y Precios"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:D,onClick:()=>X(ae=>!ae),children:"CandyShop"}),D&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:fe,onClick:()=>me(ae=>!ae),title:"Vendedores"}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/productsVendorsCandies`,className:n,children:"Sub ordenes"})}),fe&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})}),i.jsx(M,{open:he,onClick:()=>Ae(ae=>!ae),title:"Inventario"}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/mainordersCandies`,className:n,children:"Ordenes Maestras"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/inventoryMainOrderCandies`,className:n,children:"Lista de Ordenes"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/inventoryCandies`,className:n,children:"Lista Productos"})}),he&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/productsCandies`,className:n,children:"Productos"})}),i.jsx(M,{open:ne,onClick:()=>Pe(ae=>!ae),title:"Finanzas"}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/datacenter`,className:n,children:"Data Center"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/cashDeliveries`,className:n,children:"Entregas Cash"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/transactionCandies`,className:n,children:"Transacciones"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierres"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/reporteCierresCandies`,className:n,children:"Reporte Cierres"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/billingsCandies`,className:n,children:"Facturas"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/consolidatedVendors`,className:n,children:"Consolidado Vendedores"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/dashboardCandies`,className:n,children:"Dashboard"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/vendorsCandies`,className:n,children:"Vendedores"})}),ne&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/expensesCandies`,className:n,children:"Gastos"})})]})]}),i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:Te,onClick:()=>O(ae=>!ae),children:"Operaciones Otras"}),Te&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[i.jsx(pn,{to:`${r}/users`,className:n,children:"Usuarios"}),i.jsx(pn,{to:`${r}/fix`,className:n,children:"Fix de lotes"}),i.jsx(pn,{to:`${r}/transactionclose`,className:n,children:"Liquidaciones"})]})]})]}),!te&&Q&&i.jsxs("div",{className:"border rounded mb-1 rounded-2xl shadow-2xl bg-white",children:[i.jsx(J,{open:l,onClick:()=>c(ae=>!ae),children:"Pollos Bea"}),l&&i.jsxs("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:[Xn(H,"salesV2")&&i.jsx(pn,{to:`${r}/salesV2`,className:n,children:"Vender"}),Xn(H,"financialDashboard")&&i.jsx(pn,{to:`${r}/financialDashboard`,className:n,children:"Dashboard"}),Xn(H,"batches")&&i.jsx(pn,{to:`${r}/batches`,className:n,children:"Inventario Pollo"}),Xn(H,"bills")&&i.jsx(pn,{to:`${r}/bills`,className:n,children:"Cierre Ventas"}),Xn(H,"transactionsPollo")&&i.jsx(pn,{to:`${r}/transactionsPollo`,className:n,children:"Transacciones"}),Xn(H,"expenses")&&i.jsx(pn,{to:`${r}/expenses`,className:n,children:"Gastos"}),Xn(H,"customersPollo")&&i.jsx(pn,{to:`${r}/customersPollo`,className:n,children:"Saldos Pendientes"})]})]}),!te&&Ke&&i.jsxs("div",{className:"border rounded",children:[i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Xn(H,"salesCandies")&&i.jsx(pn,{to:`${r}/salesCandies`,className:n,children:"Venta"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Xn(H,"transactionCandies")&&i.jsx(pn,{to:`${r}/transactionCandies`,className:n,children:"Ventas del dia"})}),i.jsx("div",{className:"pb-2 ml-4 mt-1 space-y-1",children:Xn(H,"cierreVentasCandies")&&i.jsx(pn,{to:`${r}/cierreVentasCandies`,className:n,children:"Cierre de Ventas"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Xn(H,"productsVendorsCandies")&&i.jsx(pn,{to:`${r}/productsVendorsCandies`,className:n,children:"Pedidos"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Xn(H,"customersCandies")&&i.jsx(pn,{to:`${r}/customersCandies`,className:n,children:"Clientes"})}),i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:Xn(H,"productsPricesCandies")&&i.jsx(pn,{to:`${r}/productsPricesCandies`,className:n,children:"Precios Venta"})})]}),ve&&i.jsxs("div",{className:"border rounded",children:[i.jsx(J,{open:v,onClick:()=>y(ae=>!ae),children:"Operaciones Ropa"}),v&&i.jsxs("div",{className:"pb-2",children:[i.jsx(M,{open:E,onClick:()=>F(ae=>!ae),title:"Ventas"}),E&&i.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[i.jsx(pn,{to:`${r}/salesClothes`,className:n,children:"Venta Ropa"}),i.jsx(pn,{to:`${r}/TransactionsReportClothes`,className:n,children:"Transacciones"})]}),i.jsx(M,{open:j,onClick:()=>I(ae=>!ae),title:"Productos"}),j&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/productsClothes`,className:n,children:"Agregar Productos"})}),i.jsx(M,{open:_,onClick:()=>S(ae=>!ae),title:"Clientes"}),_&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:i.jsx(pn,{to:`${r}/CustomersClothes`,className:n,children:"Listado de Clientes"})})]})]})]}),i.jsx("button",{onClick:U,className:"mt-4 bg-red-500 text-white px-3 py-2 rounded-2xl shadow-2xl hover:bg-red-600",children:"Cerrar sesin"}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-700",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))}),K&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>q(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>q(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:W,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]}),i.jsx("main",{className:"flex-1 p-6",children:i.jsx(fY,{})})]})}function ny(...t){return t.filter(Boolean).join(" ")}function Uye({role:t,roles:e}){const r=uw(),n=EA(),a="/admin",s=e&&e.length?e:t,o=xn(s,"admin"),l=xn(s,"vendedor_pollo"),c=xn(s,"vendedor_dulces"),u=xn(s,"supervisor_pollo")||xn(s,"contador"),d=xn(s,"contador"),f=Xn(s,"salesV2","view")||Xn(s,"batches","view")||Xn(s,"bills","view")||Xn(s,"transactionsPollo","view")||Xn(s,"customersPollo","view"),A=Xn(s,"salesCandies","view")||Xn(s,"productsVendorsCandies","view")||Xn(s,"customersCandies","view")||Xn(s,"productsPricesCandies","view")||Xn(s,"transactionCandies","view")||Xn(s,"cierreVentasCandies","view"),h=f&&A,[m,p]=g.useState(()=>{try{const F=typeof window<"u"?localStorage.getItem("rubro"):null;if(F==="POLLO"||F==="DULCES")return F}catch{}return f?"POLLO":A?"DULCES":"POLLO"}),[x,v]=g.useState(!1),[y,b]=g.useState(!1),w=g.useMemo(()=>{let F=[];if(o||h){if(m==="POLLO")if(o)F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"invPag",label:"Factura",to:`${a}/paidBatches`},{key:"gastos",label:"Gastos",to:`${a}/expenses`}];else if(u){const D=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`}];xn(s,"contador")&&(F=D)}else l?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:d?F=[{key:"venta",label:"Vender",to:`${a}/salesV2`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"cierre",label:"Cierre Ventas",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];m==="DULCES"&&(o?F=[{key:"dc",label:"Data Center Reporte",to:`${a}/datacenter`},{key:"maes",label:"Inventario Maestro",to:`${a}/mainordersCandies`},{key:"ord",label:"Inventario Vendedor",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas del dia",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre de ventas",to:`${a}/cierreVentasCandies`},{key:"cash",label:"Entregas Efectivo ",to:`${a}/cashDeliveries`},{key:"items",label:"Productos",to:`${a}/productsCandies`},{key:"precios",label:"Precio Ventas",to:`${a}/productsPricesCandies`},{key:"gonper",label:"Productos Gonper",to:`${a}/notebooksInventory`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}])}else if(u){const D=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"dash",label:"Dashboard",to:`${a}/financialDashboard`},{key:"inv",label:"Inventario",to:`${a}/batches`},{key:"clientes",label:"Saldos Pendientes",to:`${a}/customersPollo`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`},{key:"cierre",label:"Cierre",to:`${a}/bills`}];xn(s,"contador"),F=D}else l?F=[{key:"venta",label:"Venta",to:`${a}/salesV2`},{key:"cierre",label:"Cierre",to:`${a}/bills`},{key:"trxs",label:"Transacciones",to:`${a}/transactionsPollo`}]:c?F=[{key:"venta",label:"Vender",to:`${a}/salesCandies`},{key:"precios",label:"Precios",to:`${a}/productsPricesCandies`},{key:"ped",label:"Inventario",to:`${a}/productsVendorsCandies`},{key:"cli",label:"Saldos Pendientes",to:`${a}/customersCandies`},{key:"trx",label:"Ventas",to:`${a}/transactionCandies`},{key:"cier",label:"Cierre",to:`${a}/cierreVentasCandies`}]:F=[{key:"home",label:"Inicio",to:`${a}`}];const k=new Set(["bills","customersPollo","transactionsPollo","batches","salesV2","financialDashboard","salesCandies","productsVendorsCandies","productsPricesCandies","transactionCandies","cierreVentasCandies","customersCandies"]);return F.filter(D=>{const he=D.to.replace(`${a}/`,"");return k.has(he)?Xn(s,he,"view"):!0})},[a,m,o,h,u,l,c,d,s]);g.useEffect(()=>{if((o||h)&&w.length){try{localStorage.setItem("rubro",m)}catch{}r(w[0].to,{replace:!0})}},[m]),g.useEffect(()=>{x&&v(!1)},[n.pathname]),g.useEffect(()=>{const F=k=>{k.key==="Escape"&&v(!1)};return x&&window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[x]);const j=async()=>{b(!0)},I=async()=>{try{await wD(uf)}catch(F){console.error("signOut error:",F)}finally{try{localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),localStorage.removeItem("roles"),localStorage.removeItem("role")}catch{}b(!1),v(!1),r("/")}},_=({isActive:F})=>ny("flex-1 text-center text-[11px] py-1.5 rounded-lg","leading-none select-none",F?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"),S=w.length<=2,E=({isActive:F})=>ny("w-full flex items-center justify-between px-4 py-3 rounded-xl border",F?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50");return i.jsxs("div",{className:"min-h-screen bg-[#f1f3f7] flex flex-col",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white border-b shadow-sm",children:i.jsxs("div",{className:"px-3 py-3 flex items-center gap-2",children:[o||h?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>p("POLLO"),className:ny("px-3 py-2 rounded-2xl text-sm font-semibold",m==="POLLO"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Carniceria"}),i.jsx("button",{type:"button",onClick:()=>p("DULCES"),className:ny("px-3 py-2 rounded-2xl text-sm font-semibold",m==="DULCES"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"),children:"Mr. Candy"})]}):i.jsx("div",{className:"text-sm font-semibold text-gray-800",children:l?"Pollos Bea":c?"CandyShop":"Posys"}),i.jsx("div",{className:"ml-auto flex items-center gap-2",children:i.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-2 rounded-2xl bg-gray-100 text-gray-800 text-sm font-bold shadow hover:bg-gray-200","aria-label":"Abrir men",title:"Men",children:""})})]})}),x&&i.jsxs("div",{className:"fixed inset-0 z-[80]",children:[i.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>v(!1),"aria-label":"Cerrar men"}),i.jsxs("aside",{className:"absolute right-0 top-0 h-full w-[86%] max-w-sm bg-white shadow-2xl border-l flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-bold text-gray-900",children:"Men"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200",children:""})]}),i.jsx("div",{className:"mt-2 text-[20px] text-gray-600",children:typeof window<"u"&&(localStorage.getItem("user_name")||localStorage.getItem("user_email"))})]}),i.jsx("div",{className:"p-3 flex-1 overflow-y-auto space-y-2",children:w.map(F=>i.jsxs(pn,{to:F.to,className:E,children:[i.jsx("span",{className:"font-semibold",children:F.label}),i.jsx("span",{className:"text-sm opacity-80",children:""})]},F.key))}),i.jsxs("div",{className:"p-3 border-t space-y-2 pb-[calc(12px+env(safe-area-inset-bottom))]",children:[i.jsx("button",{onClick:j,className:"w-full px-4 py-3 rounded-xl bg-red-500 text-white font-semibold shadow hover:bg-red-600",children:"Cerrar sesin"}),y&&i.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/20",onClick:()=>b(!1)}),i.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-lg z-[130] w-[90%] max-w-sm",children:[i.jsx("div",{className:"font-semibold mb-3",children:"Ests seguro de cerrar sesin?"}),i.jsxs("div",{className:"flex gap-2 justify-end",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-3 py-2 rounded bg-gray-200",children:"No"}),i.jsx("button",{onClick:I,className:"px-3 py-2 rounded bg-red-500 text-white",children:"SI"})]})]})]})]})]})]}),i.jsx("main",{className:ny("flex-1 overflow-y-auto px-3 pt-3",S?"pb-[calc(92px+env(safe-area-inset-bottom))]":"pb-[calc(16px+env(safe-area-inset-bottom))]"),children:i.jsx(fY,{})}),S&&i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-md pb-[env(safe-area-inset-bottom)]",children:i.jsx("div",{className:"max-w-3xl mx-auto px-2 py-1.5 flex gap-1.5",children:w.map(F=>i.jsx(pn,{to:F.to,className:_,children:F.label},F.key))})})]})}const mee=6048e5,Qye=864e5,Vye=6e4,Hye=36e5,$ye=1e3,d9=Symbol.for("constructDateFrom");function no(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&d9 in t?t[d9](e):t instanceof Date?new t.constructor(e):new Date(e)}function li(t,e){return no(e||t,t)}function m6(t,e,r){const n=li(t,r==null?void 0:r.in);return isNaN(e)?no((r==null?void 0:r.in)||t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Gye(t,e,r){const n=li(t,r==null?void 0:r.in);if(isNaN(e))return no(t,NaN);const a=n.getDate(),s=no(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}let Kye={};function d1(){return Kye}function vm(t,e){var l,c,u,d;const r=d1(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=li(t,e==null?void 0:e.in),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function kv(t,e){return vm(t,{...e,weekStartsOn:1})}function pee(t,e){const r=li(t,e==null?void 0:e.in),n=r.getFullYear(),a=no(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=kv(a),o=no(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=kv(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function cS(t){const e=li(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function qye(t,...e){const r=no.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function f9(t,e){const r=li(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function zye(t,e,r){const[n,a]=qye(r==null?void 0:r.in,t,e),s=f9(n),o=f9(a),l=+s-cS(s),c=+o-cS(o);return Math.round((l-c)/Qye)}function Wye(t,e){const r=pee(t,e),n=no(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),kv(n)}function Xye(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function p6(t){return!(!Xye(t)&&typeof t!="number"||isNaN(+li(t)))}function jd(t,e){const r=li(t,e==null?void 0:e.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Pd(t,e){const r=li(t,e==null?void 0:e.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Yye(t,e){const r=li(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Jye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Zye=(t,e,r)=>{let n;const a=Jye[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function v3(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const ebe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tbe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nbe={date:v3({formats:ebe,defaultWidth:"full"}),time:v3({formats:tbe,defaultWidth:"full"}),dateTime:v3({formats:rbe,defaultWidth:"full"})},abe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sbe=(t,e,r,n)=>abe[t];function ay(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const ibe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},obe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lbe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cbe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ube={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dbe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fbe=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},hbe={ordinalNumber:fbe,era:ay({values:ibe,defaultWidth:"wide"}),quarter:ay({values:obe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ay({values:lbe,defaultWidth:"wide"}),day:ay({values:cbe,defaultWidth:"wide"}),dayPeriod:ay({values:ube,defaultWidth:"wide",formattingValues:dbe,defaultFormattingWidth:"wide"})};function sy(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?mbe(l,f=>f.test(o)):Abe(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function Abe(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function mbe(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function pbe(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const gbe=/^(\d+)(th|st|nd|rd)?/i,xbe=/\d+/i,vbe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ybe={any:[/^b/i,/^(a|c)/i]},bbe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wbe={any:[/1/i,/2/i,/3/i,/4/i]},Nbe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cbe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_be={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ebe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Sbe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ibe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jbe={ordinalNumber:pbe({matchPattern:gbe,parsePattern:xbe,valueCallback:t=>parseInt(t,10)}),era:sy({matchPatterns:vbe,defaultMatchWidth:"wide",parsePatterns:ybe,defaultParseWidth:"any"}),quarter:sy({matchPatterns:bbe,defaultMatchWidth:"wide",parsePatterns:wbe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:sy({matchPatterns:Nbe,defaultMatchWidth:"wide",parsePatterns:Cbe,defaultParseWidth:"any"}),day:sy({matchPatterns:_be,defaultMatchWidth:"wide",parsePatterns:Ebe,defaultParseWidth:"any"}),dayPeriod:sy({matchPatterns:Sbe,defaultMatchWidth:"any",parsePatterns:Ibe,defaultParseWidth:"any"})},gee={code:"en-US",formatDistance:Zye,formatLong:nbe,formatRelative:sbe,localize:hbe,match:jbe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Pbe(t,e){const r=li(t,e==null?void 0:e.in);return zye(r,Yye(r))+1}function xee(t,e){const r=li(t,e==null?void 0:e.in),n=+kv(r)-+Wye(r);return Math.round(n/mee)+1}function g6(t,e){var d,f,A,h;const r=li(t,e==null?void 0:e.in),n=r.getFullYear(),a=d1(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(A=a.locale)==null?void 0:A.options)==null?void 0:h.firstWeekContainsDate)??1,o=no((e==null?void 0:e.in)||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=vm(o,e),c=no((e==null?void 0:e.in)||t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=vm(c,e);return+r>=+l?n+1:+r>=+u?n:n-1}function Bbe(t,e){var l,c,u,d;const r=d1(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=g6(t,e),s=no((e==null?void 0:e.in)||t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),vm(s,e)}function vee(t,e){const r=li(t,e==null?void 0:e.in),n=+vm(r,e)-+Bbe(r,e);return Math.round(n/mee)+1}function Ha(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const i0={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Ha(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Ha(r+1,2)},d(t,e){return Ha(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Ha(t.getHours()%12||12,e.length)},H(t,e){return Ha(t.getHours(),e.length)},m(t,e){return Ha(t.getMinutes(),e.length)},s(t,e){return Ha(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Ha(a,e.length)}},Yg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},h9={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return i0.y(t,e)},Y:function(t,e,r,n){const a=g6(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return Ha(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Ha(s,e.length)},R:function(t,e){const r=pee(t);return Ha(r,e.length)},u:function(t,e){const r=t.getFullYear();return Ha(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ha(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ha(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return i0.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ha(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=vee(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Ha(a,e.length)},I:function(t,e,r){const n=xee(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Ha(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):i0.d(t,e)},D:function(t,e,r){const n=Pbe(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ha(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Ha(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Ha(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return Ha(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=Yg.noon:n===0?a=Yg.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=Yg.evening:n>=12?a=Yg.afternoon:n>=4?a=Yg.morning:a=Yg.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return i0.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):i0.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ha(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ha(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):i0.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):i0.s(t,e)},S:function(t,e){return i0.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return m9(n);case"XXXX":case"XX":return np(n);case"XXXXX":case"XXX":default:return np(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return m9(n);case"xxxx":case"xx":return np(n);case"xxxxx":case"xxx":default:return np(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+A9(n,":");case"OOOO":default:return"GMT"+np(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+A9(n,":");case"zzzz":default:return"GMT"+np(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Ha(n,e.length)},T:function(t,e,r){return Ha(+t,e.length)}};function A9(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+Ha(s,2)}function m9(t,e){return t%60===0?(t>0?"-":"+")+Ha(Math.abs(t)/60,2):np(t,e)}function np(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Ha(Math.trunc(n/60),2),s=Ha(n%60,2);return r+a+e+s}const p9=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},yee=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Tbe=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return p9(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",p9(n,e)).replace("{{time}}",yee(a,e))},YT={p:yee,P:Tbe},kbe=/^D+$/,Fbe=/^Y+$/,Obe=["D","DD","YY","YYYY"];function bee(t){return kbe.test(t)}function wee(t){return Fbe.test(t)}function JT(t,e,r){const n=Dbe(t,e,r);if(console.warn(n),Obe.includes(t))throw new RangeError(n)}function Dbe(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Rbe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lbe=/^'([^]*?)'?$/,Ube=/''/g,Qbe=/[a-zA-Z]/;function Br(t,e,r){var d,f,A,h;const n=d1(),a=n.locale??gee,s=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((h=(A=n.locale)==null?void 0:A.options)==null?void 0:h.weekStartsOn)??0,l=li(t,r==null?void 0:r.in);if(!p6(l))throw new RangeError("Invalid time value");let c=e.match(Mbe).map(m=>{const p=m[0];if(p==="p"||p==="P"){const x=YT[p];return x(m,a.formatLong)}return m}).join("").match(Rbe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const p=m[0];if(p==="'")return{isToken:!1,value:Vbe(m)};if(h9[p])return{isToken:!0,value:m};if(p.match(Qbe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:m}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(m=>{if(!m.isToken)return m.value;const p=m.value;(wee(p)||bee(p))&&JT(p,e,String(t));const x=h9[p[0]];return x(l,p,a.localize,u)}).join("")}function Vbe(t){const e=t.match(Lbe);return e?e[1].replace(Ube,"'"):t}function Hbe(){return Object.assign({},d1())}function $be(t,e){const r=li(t,e==null?void 0:e.in).getDay();return r===0?7:r}function Gbe(t,e){const r=Kbe(e)?new e(0):no(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function Kbe(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const qbe=10;class Nee{constructor(){Cr(this,"subPriority",0)}validate(e,r){return!0}}class zbe extends Nee{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class Wbe extends Nee{constructor(r,n){super();Cr(this,"priority",qbe);Cr(this,"subPriority",-1);this.context=r||(a=>no(n,a))}set(r,n){return n.timestampIsSet?r:no(r,Gbe(r,this.context))}}let Ba=class{run(e,r,n,a){const s=this.parse(e,r,n,a);return s?{setter:new zbe(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}};class Xbe extends Ba{constructor(){super(...arguments);Cr(this,"priority",140);Cr(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,a){switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})||a.era(r,{width:"abbreviated"})||a.era(r,{width:"narrow"})}}set(r,n,a){return n.era=a,r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}const Li={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Vf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ui(t,e){return t&&{value:e(t.value),rest:t.rest}}function ti(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function Hf(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(a*Hye+s*Vye+o*$ye),rest:e.slice(r[0].length)}}function Cee(t){return ti(Li.anyDigitsSigned,t)}function bi(t,e){switch(t){case 1:return ti(Li.singleDigit,e);case 2:return ti(Li.twoDigits,e);case 3:return ti(Li.threeDigits,e);case 4:return ti(Li.fourDigits,e);default:return ti(new RegExp("^\\d{1,"+t+"}"),e)}}function uS(t,e){switch(t){case 1:return ti(Li.singleDigitSigned,e);case 2:return ti(Li.twoDigitsSigned,e);case 3:return ti(Li.threeDigitsSigned,e);case 4:return ti(Li.fourDigitsSigned,e);default:return ti(new RegExp("^-?\\d{1,"+t+"}"),e)}}function x6(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function _ee(t,e){const r=e>0,n=r?e:1-e;let a;if(n<=50)a=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,l=t>=s%100;a=t+o-(l?100:0)}return r?a:1-a}function Eee(t){return t%400===0||t%4===0&&t%100!==0}class Ybe extends Ba{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ui(bi(4,r),s);case"yo":return Ui(a.ordinalNumber(r,{unit:"year"}),s);default:return Ui(bi(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a){const s=r.getFullYear();if(a.isTwoDigitYear){const l=_ee(a.year,s);return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}const o=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}}class Jbe extends Ba{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,a){const s=o=>({year:o,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ui(bi(4,r),s);case"Yo":return Ui(a.ordinalNumber(r,{unit:"year"}),s);default:return Ui(bi(n.length,r),s)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,a,s){const o=g6(r,s);if(a.isTwoDigitYear){const c=_ee(a.year,o);return r.setFullYear(c,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),vm(r,s)}const l=!("era"in n)||n.era===1?a.year:1-a.year;return r.setFullYear(l,0,s.firstWeekContainsDate),r.setHours(0,0,0,0),vm(r,s)}}class Zbe extends Ba{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return uS(n==="R"?4:n.length,r)}set(r,n,a){const s=no(r,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),kv(s)}}class e2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",130);Cr(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return uS(n==="u"?4:n.length,r)}set(r,n,a){return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}}class t2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",120);Cr(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"Q":case"QQ":return bi(n.length,r);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})||a.quarter(r,{width:"abbreviated",context:"formatting"})||a.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class r2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",120);Cr(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"q":case"qq":return bi(n.length,r);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})||a.quarter(r,{width:"abbreviated",context:"standalone"})||a.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,a){return r.setMonth((a-1)*3,1),r.setHours(0,0,0,0),r}}class n2e extends Ba{constructor(){super(...arguments);Cr(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Cr(this,"priority",110)}parse(r,n,a){const s=o=>o-1;switch(n){case"M":return Ui(ti(Li.month,r),s);case"MM":return Ui(bi(2,r),s);case"Mo":return Ui(a.ordinalNumber(r,{unit:"month"}),s);case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})||a.month(r,{width:"abbreviated",context:"formatting"})||a.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}class a2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",110);Cr(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,a){const s=o=>o-1;switch(n){case"L":return Ui(ti(Li.month,r),s);case"LL":return Ui(bi(2,r),s);case"Lo":return Ui(a.ordinalNumber(r,{unit:"month"}),s);case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})||a.month(r,{width:"abbreviated",context:"standalone"})||a.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.setMonth(a,1),r.setHours(0,0,0,0),r}}function s2e(t,e,r){const n=li(t,r==null?void 0:r.in),a=vee(n,r)-e;return n.setDate(n.getDate()-a*7),li(n,r==null?void 0:r.in)}class i2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",100);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,a){switch(n){case"w":return ti(Li.week,r);case"wo":return a.ordinalNumber(r,{unit:"week"});default:return bi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a,s){return vm(s2e(r,a,s),s)}}function o2e(t,e,r){const n=li(t,r==null?void 0:r.in),a=xee(n,r)-e;return n.setDate(n.getDate()-a*7),n}class l2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",100);Cr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,a){switch(n){case"I":return ti(Li.week,r);case"Io":return a.ordinalNumber(r,{unit:"week"});default:return bi(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,a){return kv(o2e(r,a))}}const c2e=[31,28,31,30,31,30,31,31,30,31,30,31],u2e=[31,29,31,30,31,30,31,31,30,31,30,31];class d2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"subPriority",1);Cr(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"d":return ti(Li.date,r);case"do":return a.ordinalNumber(r,{unit:"date"});default:return bi(n.length,r)}}validate(r,n){const a=r.getFullYear(),s=Eee(a),o=r.getMonth();return s?n>=1&&n<=u2e[o]:n>=1&&n<=c2e[o]}set(r,n,a){return r.setDate(a),r.setHours(0,0,0,0),r}}class f2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"subpriority",1);Cr(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,a){switch(n){case"D":case"DD":return ti(Li.dayOfYear,r);case"Do":return a.ordinalNumber(r,{unit:"date"});default:return bi(n.length,r)}}validate(r,n){const a=r.getFullYear();return Eee(a)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,a){return r.setMonth(0,a),r.setHours(0,0,0,0),r}}function v6(t,e,r){var f,A,h,m;const n=d1(),a=(r==null?void 0:r.weekStartsOn)??((A=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:A.weekStartsOn)??n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=li(t,r==null?void 0:r.in),o=s.getDay(),c=(e%7+7)%7,u=7-a,d=e<0||e>6?e-(o+u)%7:(c+u)%7-(o+u)%7;return m6(s,d,r)}class h2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,a){switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}class A2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"e":case"ee":return Ui(bi(n.length,r),o);case"eo":return Ui(a.ordinalNumber(r,{unit:"day"}),o);case"eee":return a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}class m2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,a,s){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+c};switch(n){case"c":case"cc":return Ui(bi(n.length,r),o);case"co":return Ui(a.ordinalNumber(r,{unit:"day"}),o);case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(r,{width:"wide",context:"standalone"})||a.day(r,{width:"abbreviated",context:"standalone"})||a.day(r,{width:"short",context:"standalone"})||a.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,a,s){return r=v6(r,a,s),r.setHours(0,0,0,0),r}}function p2e(t,e,r){const n=li(t,r==null?void 0:r.in),a=$be(n,r),s=e-a;return m6(n,s,r)}class g2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",90);Cr(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,a){const s=o=>o===0?7:o;switch(n){case"i":case"ii":return bi(n.length,r);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return Ui(a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiii":return Ui(a.day(r,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Ui(a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Ui(a.day(r,{width:"wide",context:"formatting"})||a.day(r,{width:"abbreviated",context:"formatting"})||a.day(r,{width:"short",context:"formatting"})||a.day(r,{width:"narrow",context:"formatting"}),s)}}validate(r,n){return n>=1&&n<=7}set(r,n,a){return r=p2e(r,a),r.setHours(0,0,0,0),r}}class x2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,a){switch(n){case"a":case"aa":case"aaa":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class v2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,a){switch(n){case"b":case"bb":case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class y2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",80);Cr(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,a){switch(n){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})||a.dayPeriod(r,{width:"abbreviated",context:"formatting"})||a.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,a){return r.setHours(x6(a),0,0,0),r}}class b2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,a){switch(n){case"h":return ti(Li.hour12h,r);case"ho":return a.ordinalNumber(r,{unit:"hour"});default:return bi(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,a){const s=r.getHours()>=12;return s&&a<12?r.setHours(a+12,0,0,0):!s&&a===12?r.setHours(0,0,0,0):r.setHours(a,0,0,0),r}}class w2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,a){switch(n){case"H":return ti(Li.hour23h,r);case"Ho":return a.ordinalNumber(r,{unit:"hour"});default:return bi(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,a){return r.setHours(a,0,0,0),r}}class N2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,a){switch(n){case"K":return ti(Li.hour11h,r);case"Ko":return a.ordinalNumber(r,{unit:"hour"});default:return bi(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,a){return r.getHours()>=12&&a<12?r.setHours(a+12,0,0,0):r.setHours(a,0,0,0),r}}class C2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",70);Cr(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,a){switch(n){case"k":return ti(Li.hour24h,r);case"ko":return a.ordinalNumber(r,{unit:"hour"});default:return bi(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,a){const s=a<=24?a%24:a;return r.setHours(s,0,0,0),r}}class _2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",60);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"m":return ti(Li.minute,r);case"mo":return a.ordinalNumber(r,{unit:"minute"});default:return bi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setMinutes(a,0,0),r}}class E2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",50);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n,a){switch(n){case"s":return ti(Li.second,r);case"so":return a.ordinalNumber(r,{unit:"second"});default:return bi(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,a){return r.setSeconds(a,0),r}}class S2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",30);Cr(this,"incompatibleTokens",["t","T"])}parse(r,n){const a=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Ui(bi(n.length,r),a)}set(r,n,a){return r.setMilliseconds(a),r}}class I2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",10);Cr(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Hf(Vf.basicOptionalMinutes,r);case"XX":return Hf(Vf.basic,r);case"XXXX":return Hf(Vf.basicOptionalSeconds,r);case"XXXXX":return Hf(Vf.extendedOptionalSeconds,r);case"XXX":default:return Hf(Vf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:no(r,r.getTime()-cS(r)-a)}}class j2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",10);Cr(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Hf(Vf.basicOptionalMinutes,r);case"xx":return Hf(Vf.basic,r);case"xxxx":return Hf(Vf.basicOptionalSeconds,r);case"xxxxx":return Hf(Vf.extendedOptionalSeconds,r);case"xxx":default:return Hf(Vf.extended,r)}}set(r,n,a){return n.timestampIsSet?r:no(r,r.getTime()-cS(r)-a)}}class P2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",40);Cr(this,"incompatibleTokens","*")}parse(r){return Cee(r)}set(r,n,a){return[no(r,a*1e3),{timestampIsSet:!0}]}}class B2e extends Ba{constructor(){super(...arguments);Cr(this,"priority",20);Cr(this,"incompatibleTokens","*")}parse(r){return Cee(r)}set(r,n,a){return[no(r,a),{timestampIsSet:!0}]}}const T2e={G:new Xbe,y:new Ybe,Y:new Jbe,R:new Zbe,u:new e2e,Q:new t2e,q:new r2e,M:new n2e,L:new a2e,w:new i2e,I:new l2e,d:new d2e,D:new f2e,E:new h2e,e:new A2e,c:new m2e,i:new g2e,a:new x2e,b:new v2e,B:new y2e,h:new b2e,H:new w2e,K:new N2e,k:new C2e,m:new _2e,s:new E2e,S:new S2e,X:new I2e,x:new j2e,t:new P2e,T:new B2e},k2e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,F2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,O2e=/^'([^]*?)'?$/,D2e=/''/g,R2e=/\S/,M2e=/[a-zA-Z]/;function dS(t,e,r,n){var x,v,y,b;const a=()=>no(r,NaN),s=Hbe(),o=s.locale??gee,l=s.firstWeekContainsDate??((v=(x=s.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)??1,c=s.weekStartsOn??((b=(y=s.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0;if(!e)return t?a():li(r,n==null?void 0:n.in);const u={firstWeekContainsDate:l,weekStartsOn:c,locale:o},d=[new Wbe(n==null?void 0:n.in,r)],f=e.match(F2e).map(w=>{const j=w[0];if(j in YT){const I=YT[j];return I(w,o.formatLong)}return w}).join("").match(k2e),A=[];for(let w of f){wee(w)&&JT(w,e,t),bee(w)&&JT(w,e,t);const j=w[0],I=T2e[j];if(I){const{incompatibleTokens:_}=I;if(Array.isArray(_)){const E=A.find(F=>_.includes(F.token)||F.token===j);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${w}\` at the same time`)}else if(I.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);A.push({token:j,fullToken:w});const S=I.run(t,w,o.match,u);if(!S)return a();d.push(S.setter),t=S.rest}else{if(j.match(M2e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(w==="''"?w="'":j==="'"&&(w=L2e(w)),t.indexOf(w)===0)t=t.slice(w.length);else return a()}}if(t.length>0&&R2e.test(t))return a();const h=d.map(w=>w.priority).sort((w,j)=>j-w).filter((w,j,I)=>I.indexOf(w)===j).map(w=>d.filter(j=>j.priority===w).sort((j,I)=>I.subPriority-j.subPriority)).map(w=>w[0]);let m=li(r,n==null?void 0:n.in);if(isNaN(+m))return a();const p={};for(const w of h){if(!w.validate(m,u))return a();const j=w.set(m,p,u);Array.isArray(j)?(m=j[0],Object.assign(p,j[1])):m=j}return m}function L2e(t){return t.match(O2e)[1].replace(D2e,"'")}function See(t,e,r){return m6(t,-14,r)}function U2e(t,e,r){return Gye(t,-1,r)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ZT=function(t,e){return ZT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},ZT(t,e)};function bf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ZT(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ek=function(){return ek=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ek.apply(this,arguments)};function uc(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function Ql(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function eC(t,e,r){if(arguments.length===2)for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var AA=function(){function t(e,r,n,a){this.left=e,this.top=r,this.width=n,this.height=a}return t.prototype.add=function(e,r,n,a){return new t(this.left+e,this.top+r,this.width+n,this.height+a)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Mj=function(t,e){return AA.fromClientRect(t,e.getBoundingClientRect())},Q2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),a=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new AA(0,0,n,a)},Lj=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},Ti=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},g9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tC=0;tC<g9.length;tC++)V2e[g9.charCodeAt(tC)]=tC;var x9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ry=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rC=0;rC<x9.length;rC++)Ry[x9.charCodeAt(rC)]=rC;var H2e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Ry[t.charCodeAt(n)],o=Ry[t.charCodeAt(n+1)],l=Ry[t.charCodeAt(n+2)],c=Ry[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},$2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},G2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},jp=5,y6=11,y3=2,K2e=y6-jp,Iee=65536>>jp,q2e=1<<jp,b3=q2e-1,z2e=1024>>jp,W2e=Iee+z2e,X2e=W2e,Y2e=32,J2e=X2e+Y2e,Z2e=65536>>y6,ewe=1<<K2e,twe=ewe-1,v9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},rwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},nwe=function(t,e){var r=H2e(t),n=Array.isArray(r)?G2e(r):new Uint32Array(r),a=Array.isArray(r)?$2e(r):new Uint16Array(r),s=24,o=v9(a,s/2,n[4]/2),l=n[5]===2?v9(a,(s+n[4])/2):rwe(n,Math.ceil((s+n[4])/4));return new awe(n[0],n[1],n[2],n[3],o,l)},awe=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>jp],r=(r<<y3)+(e&b3),this.data[r];if(e<=65535)return r=this.index[Iee+(e-55296>>jp)],r=(r<<y3)+(e&b3),this.data[r];if(e<this.highStart)return r=J2e-Z2e+(e>>y6),r=this.index[r],r+=e>>jp&twe,r=this.index[r],r=(r<<y3)+(e&b3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),y9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",swe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nC=0;nC<y9.length;nC++)swe[y9.charCodeAt(nC)]=nC;var iwe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",b9=50,owe=1,jee=2,Pee=3,lwe=4,cwe=5,w9=7,Bee=8,N9=9,U0=10,tk=11,C9=12,rk=13,uwe=14,My=15,nk=16,aC=17,iy=18,dwe=19,_9=20,ak=21,oy=22,w3=23,Jg=24,mu=25,Ly=26,Uy=27,Zg=28,fwe=29,hp=30,hwe=31,sC=32,iC=33,sk=34,ik=35,ok=36,v2=37,lk=38,rE=39,nE=40,N3=41,Tee=42,Awe=43,mwe=[9001,65288],kee="!",na="",oC="",ck=nwe(iwe),yh=[hp,ok],uk=[owe,jee,Pee,cwe],Fee=[U0,Bee],E9=[Uy,Ly],pwe=uk.concat(Fee),S9=[lk,rE,nE,sk,ik],gwe=[My,rk],xwe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],a=[];return t.forEach(function(s,o){var l=ck.get(s);if(l>b9?(a.push(!0),l-=b9):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(o),r.push(nk);if(l===lwe||l===tk){if(o===0)return n.push(o),r.push(hp);var c=r[o-1];return pwe.indexOf(c)===-1?(n.push(n[o-1]),r.push(c)):(n.push(o),r.push(hp))}if(n.push(o),l===hwe)return r.push(e==="strict"?ak:v2);if(l===Tee||l===fwe)return r.push(hp);if(l===Awe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(v2):r.push(hp);r.push(l)}),[n,r,a]},C3=function(t,e,r,n){var a=n[r];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var s=r;s<=n.length;){s++;var o=n[s];if(o===e)return!0;if(o!==U0)break}if(a===U0)for(var s=r;s>0;){s--;var l=n[s];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var c=r;c<=n.length;){c++;var o=n[c];if(o===e)return!0;if(o!==U0)break}if(l!==U0)break}return!1},I9=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===U0)r--;else return n}return 0},vwe=function(t,e,r,n,a){if(r[n]===0)return na;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return na;var o=s-1,l=s+1,c=e[s],u=o>=0?e[o]:0,d=e[l];if(c===jee&&d===Pee)return na;if(uk.indexOf(c)!==-1)return kee;if(uk.indexOf(d)!==-1||Fee.indexOf(d)!==-1)return na;if(I9(s,e)===Bee)return oC;if(ck.get(t[s])===tk||(c===sC||c===iC)&&ck.get(t[l])===tk||c===w9||d===w9||c===N9||[U0,rk,My].indexOf(c)===-1&&d===N9||[aC,iy,dwe,Jg,Zg].indexOf(d)!==-1||I9(s,e)===oy||C3(w3,oy,s,e)||C3([aC,iy],ak,s,e)||C3(C9,C9,s,e))return na;if(c===U0)return oC;if(c===w3||d===w3)return na;if(d===nk||c===nk)return oC;if([rk,My,ak].indexOf(d)!==-1||c===uwe||u===ok&&gwe.indexOf(c)!==-1||c===Zg&&d===ok||d===_9||yh.indexOf(d)!==-1&&c===mu||yh.indexOf(c)!==-1&&d===mu||c===Uy&&[v2,sC,iC].indexOf(d)!==-1||[v2,sC,iC].indexOf(c)!==-1&&d===Ly||yh.indexOf(c)!==-1&&E9.indexOf(d)!==-1||E9.indexOf(c)!==-1&&yh.indexOf(d)!==-1||[Uy,Ly].indexOf(c)!==-1&&(d===mu||[oy,My].indexOf(d)!==-1&&e[l+1]===mu)||[oy,My].indexOf(c)!==-1&&d===mu||c===mu&&[mu,Zg,Jg].indexOf(d)!==-1)return na;if([mu,Zg,Jg,aC,iy].indexOf(d)!==-1)for(var f=s;f>=0;){var A=e[f];if(A===mu)return na;if([Zg,Jg].indexOf(A)!==-1)f--;else break}if([Uy,Ly].indexOf(d)!==-1)for(var f=[aC,iy].indexOf(c)!==-1?o:s;f>=0;){var A=e[f];if(A===mu)return na;if([Zg,Jg].indexOf(A)!==-1)f--;else break}if(lk===c&&[lk,rE,sk,ik].indexOf(d)!==-1||[rE,sk].indexOf(c)!==-1&&[rE,nE].indexOf(d)!==-1||[nE,ik].indexOf(c)!==-1&&d===nE||S9.indexOf(c)!==-1&&[_9,Ly].indexOf(d)!==-1||S9.indexOf(d)!==-1&&c===Uy||yh.indexOf(c)!==-1&&yh.indexOf(d)!==-1||c===Jg&&yh.indexOf(d)!==-1||yh.concat(mu).indexOf(c)!==-1&&d===oy&&mwe.indexOf(t[l])===-1||yh.concat(mu).indexOf(d)!==-1&&c===iy)return na;if(c===N3&&d===N3){for(var h=r[s],m=1;h>0&&(h--,e[h]===N3);)m++;if(m%2!==0)return na}return c===sC&&d===iC?na:oC},ywe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=xwe(t,e.lineBreak),n=r[0],a=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(l){return[mu,hp,Tee].indexOf(l)!==-1?v2:l}));var o=e.wordBreak==="keep-all"?s.map(function(l,c){return l&&t[c]>=19968&&t[c]<=40959}):void 0;return[n,a,o]},bwe=function(){function t(e,r,n,a){this.codePoints=e,this.required=r===kee,this.start=n,this.end=a}return t.prototype.slice=function(){return Ti.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),wwe=function(t,e){var r=Lj(t),n=ywe(r,e),a=n[0],s=n[1],o=n[2],l=r.length,c=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var d=na;u<l&&(d=vwe(r,s,a,++u,o))===na;);if(d!==na||u===l){var f=new bwe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Nwe=1,Cwe=2,Iw=4,j9=8,fS=10,P9=47,mb=92,_we=9,Ewe=32,lC=34,ly=61,Swe=35,Iwe=36,jwe=37,cC=39,uC=40,cy=41,Pwe=95,Vc=45,Bwe=33,Twe=60,kwe=62,Fwe=64,Owe=91,Dwe=93,Rwe=61,Mwe=123,dC=63,Lwe=125,B9=124,Uwe=126,Qwe=128,T9=65533,_3=42,vp=43,Vwe=44,Hwe=58,$we=59,y2=46,Gwe=0,Kwe=8,qwe=11,zwe=14,Wwe=31,Xwe=127,Tf=-1,Oee=48,Dee=97,Ree=101,Ywe=102,Jwe=117,Zwe=122,Mee=65,Lee=69,Uee=70,eNe=85,tNe=90,$l=function(t){return t>=Oee&&t<=57},rNe=function(t){return t>=55296&&t<=57343},ex=function(t){return $l(t)||t>=Mee&&t<=Uee||t>=Dee&&t<=Ywe},nNe=function(t){return t>=Dee&&t<=Zwe},aNe=function(t){return t>=Mee&&t<=tNe},sNe=function(t){return nNe(t)||aNe(t)},iNe=function(t){return t>=Qwe},fC=function(t){return t===fS||t===_we||t===Ewe},hS=function(t){return sNe(t)||iNe(t)||t===Pwe},k9=function(t){return hS(t)||$l(t)||t===Vc},oNe=function(t){return t>=Gwe&&t<=Kwe||t===qwe||t>=zwe&&t<=Wwe||t===Xwe},w0=function(t,e){return t!==mb?!1:e!==fS},hC=function(t,e,r){return t===Vc?hS(e)||w0(e,r):hS(t)?!0:!!(t===mb&&w0(t,e))},E3=function(t,e,r){return t===vp||t===Vc?$l(e)?!0:e===y2&&$l(r):$l(t===y2?e:t)},lNe=function(t){var e=0,r=1;(t[e]===vp||t[e]===Vc)&&(t[e]===Vc&&(r=-1),e++);for(var n=[];$l(t[e]);)n.push(t[e++]);var a=n.length?parseInt(Ti.apply(void 0,n),10):0;t[e]===y2&&e++;for(var s=[];$l(t[e]);)s.push(t[e++]);var o=s.length,l=o?parseInt(Ti.apply(void 0,s),10):0;(t[e]===Lee||t[e]===Ree)&&e++;var c=1;(t[e]===vp||t[e]===Vc)&&(t[e]===Vc&&(c=-1),e++);for(var u=[];$l(t[e]);)u.push(t[e++]);var d=u.length?parseInt(Ti.apply(void 0,u),10):0;return r*(a+l*Math.pow(10,-o))*Math.pow(10,c*d)},cNe={type:2},uNe={type:3},dNe={type:4},fNe={type:13},hNe={type:8},ANe={type:21},mNe={type:9},pNe={type:10},gNe={type:11},xNe={type:12},vNe={type:14},AC={type:23},yNe={type:1},bNe={type:25},wNe={type:24},NNe={type:26},CNe={type:27},_Ne={type:28},ENe={type:29},SNe={type:31},dk={type:32},Qee=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Lj(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==dk;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case lC:return this.consumeStringToken(lC);case Swe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(k9(r)||w0(n,a)){var s=hC(r,n,a)?Cwe:Nwe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Iwe:if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),fNe;break;case cC:return this.consumeStringToken(cC);case uC:return cNe;case cy:return uNe;case _3:if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),vNe;break;case vp:if(E3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Vwe:return dNe;case Vc:var l=e,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(E3(l,c,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hC(l,c,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(c===Vc&&u===kwe)return this.consumeCodePoint(),this.consumeCodePoint(),wNe;break;case y2:if(E3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case P9:if(this.peekCodePoint(0)===_3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===_3&&(d=this.consumeCodePoint(),d===P9))return this.consumeToken();if(d===Tf)return this.consumeToken()}break;case Hwe:return NNe;case $we:return CNe;case Twe:if(this.peekCodePoint(0)===Bwe&&this.peekCodePoint(1)===Vc&&this.peekCodePoint(2)===Vc)return this.consumeCodePoint(),this.consumeCodePoint(),bNe;break;case Fwe:var f=this.peekCodePoint(0),A=this.peekCodePoint(1),h=this.peekCodePoint(2);if(hC(f,A,h)){var o=this.consumeName();return{type:7,value:o}}break;case Owe:return _Ne;case mb:if(w0(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Dwe:return ENe;case Rwe:if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),hNe;break;case Mwe:return gNe;case Lwe:return xNe;case Jwe:case eNe:var m=this.peekCodePoint(0),p=this.peekCodePoint(1);return m===vp&&(ex(p)||p===dC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case B9:if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),mNe;if(this.peekCodePoint(0)===B9)return this.consumeCodePoint(),ANe;break;case Uwe:if(this.peekCodePoint(0)===ly)return this.consumeCodePoint(),pNe;break;case Tf:return dk}return fC(e)?(this.consumeWhiteSpace(),SNe):$l(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):hS(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ti(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ex(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===dC&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Ti.apply(void 0,e.map(function(c){return c===dC?Oee:c})),16),s=parseInt(Ti.apply(void 0,e.map(function(c){return c===dC?Uee:c})),16);return{type:30,start:a,end:s}}var o=parseInt(Ti.apply(void 0,e),16);if(this.peekCodePoint(0)===Vc&&ex(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];ex(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var s=parseInt(Ti.apply(void 0,l),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===uC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===uC?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tf)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===cC||r===lC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Tf||this.peekCodePoint(0)===cy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),AC)}for(;;){var a=this.consumeCodePoint();if(a===Tf||a===cy)return{type:22,value:Ti.apply(void 0,e)};if(fC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Tf||this.peekCodePoint(0)===cy?(this.consumeCodePoint(),{type:22,value:Ti.apply(void 0,e)}):(this.consumeBadUrlRemnants(),AC);if(a===lC||a===cC||a===uC||oNe(a))return this.consumeBadUrlRemnants(),AC;if(a===mb)if(w0(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),AC;else e.push(a)}},t.prototype.consumeWhiteSpace=function(){for(;fC(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===cy||e===Tf)return;w0(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var a=Math.min(r,e);n+=Ti.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var a=this._value[n];if(a===Tf||a===void 0||a===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===fS)return this._value.splice(0,n),yNe;if(a===mb){var s=this._value[n+1];s!==Tf&&s!==void 0&&(s===fS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):w0(a,s)&&(r+=this.consumeStringSlice(n),r+=Ti(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Iw,n=this.peekCodePoint(0);for((n===vp||n===Vc)&&e.push(this.consumeCodePoint());$l(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===y2&&$l(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=j9;$l(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Lee||n===Ree)&&((a===vp||a===Vc)&&$l(s)||$l(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=j9;$l(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[lNe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(hC(a,s,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return a===jwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ex(e)){for(var r=Ti(e);ex(this.peekCodePoint(0))&&r.length<6;)r+=Ti(this.consumeCodePoint());fC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||rNe(n)||n>1114111?T9:n}return e===Tf?T9:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(k9(r))e+=Ti(r);else if(w0(r,this.peekCodePoint(0)))e+=Ti(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Vee=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new Qee;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||jNe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?dk:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),jw=function(t){return t.type===15},f1=function(t){return t.type===17},es=function(t){return t.type===20},INe=function(t){return t.type===0},fk=function(t,e){return es(t)&&t.value===e},Hee=function(t){return t.type!==31},Fv=function(t){return t.type!==31&&t.type!==4},ch=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},jNe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ym=function(t){return t.type===17||t.type===15},Ji=function(t){return t.type===16||ym(t)},$ee=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},bl={type:17,number:0,flags:Iw},b6={type:16,number:50,flags:Iw},Q0={type:16,number:100,flags:Iw},Qy=function(t,e,r){var n=t[0],a=t[1];return[As(n,e),As(typeof a<"u"?a:n,r)]},As=function(t,e){if(t.type===16)return t.number/100*e;if(jw(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Gee="deg",Kee="grad",qee="rad",zee="turn",Uj={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Gee:return Math.PI*e.number/180;case Kee:return Math.PI/200*e.number;case qee:return e.number;case zee:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Wee=function(t){return t.type===15&&(t.unit===Gee||t.unit===Kee||t.unit===qee||t.unit===zee)},Xee=function(t){var e=t.filter(es).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[bl,bl];case"to top":case"bottom":return hd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[bl,Q0];case"to right":case"left":return hd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Q0,Q0];case"to bottom":case"top":return hd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Q0,bl];case"to left":case"right":return hd(270)}return 0},hd=function(t){return Math.PI*t/180},sm={name:"color",parse:function(t,e){if(e.type===18){var r=PNe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3);return V0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return V0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6);return V0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return V0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var l=eA[e.value.toUpperCase()];if(typeof l<"u")return l}return eA.TRANSPARENT}},im=function(t){return(255&t)===0},Oo=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,a=255&t>>24;return e<255?"rgba("+a+","+n+","+r+","+e/255+")":"rgb("+a+","+n+","+r+")"},V0=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},F9=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},O9=function(t,e){var r=e.filter(Fv);if(r.length===3){var n=r.map(F9),a=n[0],s=n[1],o=n[2];return V0(a,s,o,1)}if(r.length===4){var l=r.map(F9),a=l[0],s=l[1],o=l[2],c=l[3];return V0(a,s,o,c)}return 0};function S3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var D9=function(t,e){var r=e.filter(Fv),n=r[0],a=r[1],s=r[2],o=r[3],l=(n.type===17?hd(n.number):Uj.parse(t,n))/(Math.PI*2),c=Ji(a)?a.number/100:0,u=Ji(s)?s.number/100:0,d=typeof o<"u"&&Ji(o)?As(o,1):1;if(c===0)return V0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,A=u*2-f,h=S3(A,f,l+1/3),m=S3(A,f,l),p=S3(A,f,l-1/3);return V0(h*255,m*255,p*255,d)},PNe={hsl:D9,hsla:D9,rgb:O9,rgba:O9},pb=function(t,e){return sm.parse(t,Vee.create(e).parseComponentValue())},eA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},BNe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(es(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TNe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Qj=function(t,e){var r=sm.parse(t,e[0]),n=e[1];return n&&Ji(n)?{color:r,stop:n}:{color:r,stop:null}},R9=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=bl),n.stop===null&&(n.stop=Q0);for(var a=[],s=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var c=As(l,e);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var d=a[o];if(d===null)u===null&&(u=o);else if(u!==null){for(var f=o-u,A=a[u-1],h=(d-A)/(f+1),m=1;m<=f;m++)a[u+m-1]=h*m;u=null}}return t.map(function(p,x){var v=p.color;return{color:v,stop:Math.max(Math.min(1,a[x]/e),0)}})},kNe=function(t,e,r){var n=e/2,a=r/2,s=As(t[0],e)-n,o=a-As(t[1],r);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},FNe=function(t,e,r){var n=typeof t=="number"?t:kNe(t,e,r),a=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,o=r/2,l=a/2,c=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[a,s-u,s+u,o-c,o+c]},qd=function(t,e){return Math.sqrt(t*t+e*e)},M9=function(t,e,r,n,a){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(o,l){var c=l[0],u=l[1],d=qd(r-c,n-u);return(a?d<o.optimumDistance:d>o.optimumDistance)?{optimumCorner:l,optimumDistance:d}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},ONe=function(t,e,r,n,a){var s=0,o=0;switch(t.size){case 0:t.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(t.shape===0)s=o=Math.min(qd(e,r),qd(e,r-a),qd(e-n,r),qd(e-n,r-a));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(e),Math.abs(e-n)),c=M9(n,a,e,r,!0),u=c[0],d=c[1];s=qd(u-e,(d-r)/l),o=l*s}break;case 1:t.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-a)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(t.shape===0)s=o=Math.max(qd(e,r),qd(e,r-a),qd(e-n,r),qd(e-n,r-a));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(e),Math.abs(e-n)),f=M9(n,a,e,r,!1),u=f[0],d=f[1];s=qd(u-e,(d-r)/l),o=l*s}break}return Array.isArray(t.size)&&(s=As(t.size[0],n),o=t.size.length===2?As(t.size[1],a):s),[s,o]},DNe=function(t,e){var r=hd(180),n=[];return ch(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&o.value==="to"){r=Xee(a);return}else if(Wee(o)){r=Uj.parse(t,o);return}}var l=Qj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},mC=function(t,e){var r=hd(180),n=[];return ch(e).forEach(function(a,s){if(s===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=Xee(a);return}else if(Wee(o)){r=(Uj.parse(t,o)+hd(270))%hd(360);return}}var l=Qj(t,a);n.push(l)}),{angle:r,stops:n,type:1}},RNe=function(t,e){var r=hd(180),n=[],a=1,s=0,o=3,l=[];return ch(e).forEach(function(c,u){var d=c[0];if(u===0){if(es(d)&&d.value==="linear"){a=1;return}else if(es(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=sm.parse(t,d.values[0]);n.push({stop:bl,color:f})}else if(d.name==="to"){var f=sm.parse(t,d.values[0]);n.push({stop:Q0,color:f})}else if(d.name==="color-stop"){var A=d.values.filter(Fv);if(A.length===2){var f=sm.parse(t,A[1]),h=A[0];f1(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),a===1?{angle:(r+hd(180))%hd(360),stops:n,type:a}:{size:o,shape:s,stops:n,position:l,type:a}},Yee="closest-side",Jee="farthest-side",Zee="closest-corner",ete="farthest-corner",tte="circle",rte="ellipse",nte="cover",ate="contain",MNe=function(t,e){var r=0,n=3,a=[],s=[];return ch(e).forEach(function(o,l){var c=!0;if(l===0){var u=!1;c=o.reduce(function(f,A){if(u)if(es(A))switch(A.value){case"center":return s.push(b6),f;case"top":case"left":return s.push(bl),f;case"right":case"bottom":return s.push(Q0),f}else(Ji(A)||ym(A))&&s.push(A);else if(es(A))switch(A.value){case tte:return r=0,!1;case rte:return r=1,!1;case"at":return u=!0,!1;case Yee:return n=0,!1;case nte:case Jee:return n=1,!1;case ate:case Zee:return n=2,!1;case ete:return n=3,!1}else if(ym(A)||Ji(A))return Array.isArray(n)||(n=[]),n.push(A),!1;return f},c)}if(c){var d=Qj(t,o);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},pC=function(t,e){var r=0,n=3,a=[],s=[];return ch(e).forEach(function(o,l){var c=!0;if(l===0?c=o.reduce(function(d,f){if(es(f))switch(f.value){case"center":return s.push(b6),!1;case"top":case"left":return s.push(bl),!1;case"right":case"bottom":return s.push(Q0),!1}else if(Ji(f)||ym(f))return s.push(f),!1;return d},c):l===1&&(c=o.reduce(function(d,f){if(es(f))switch(f.value){case tte:return r=0,!1;case rte:return r=1,!1;case ate:case Yee:return n=0,!1;case Jee:return n=1,!1;case Zee:return n=2,!1;case nte:case ete:return n=3,!1}else if(ym(f)||Ji(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Qj(t,o);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},LNe=function(t){return t.type===1},UNe=function(t){return t.type===2},w6={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ste[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function QNe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ste[t.name])}var ste={"linear-gradient":DNe,"-moz-linear-gradient":mC,"-ms-linear-gradient":mC,"-o-linear-gradient":mC,"-webkit-linear-gradient":mC,"radial-gradient":MNe,"-moz-radial-gradient":pC,"-ms-radial-gradient":pC,"-o-radial-gradient":pC,"-webkit-radial-gradient":pC,"-webkit-gradient":RNe},VNe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Fv(n)&&QNe(n)}).map(function(n){return w6.parse(t,n)})}},HNe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(es(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$Ne={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return ch(e).map(function(r){return r.filter(Ji)}).map($ee)}},GNe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return ch(e).map(function(r){return r.filter(es).map(function(n){return n.value}).join(" ")}).map(KNe)}},KNe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cv;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(cv||(cv={}));var qNe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return ch(e).map(function(r){return r.filter(zNe)})}},zNe=function(t){return es(t)||Ji(t)},Vj=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},WNe=Vj("top"),XNe=Vj("right"),YNe=Vj("bottom"),JNe=Vj("left"),Hj=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return $ee(r.filter(Ji))}}},ZNe=Hj("top-left"),eCe=Hj("top-right"),tCe=Hj("bottom-right"),rCe=Hj("bottom-left"),$j=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nCe=$j("top"),aCe=$j("right"),sCe=$j("bottom"),iCe=$j("left"),Gj=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return jw(r)?r.number:0}}},oCe=Gj("top"),lCe=Gj("right"),cCe=Gj("bottom"),uCe=Gj("left"),dCe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fCe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},hCe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(es).reduce(function(r,n){return r|ACe(n.value)},0)}},ACe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},mCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},pCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},AS;(function(t){t.NORMAL="normal",t.STRICT="strict"})(AS||(AS={}));var gCe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return AS.STRICT;case"normal":default:return AS.NORMAL}}},xCe={name:"line-height",initialValue:"normal",prefix:!1,type:4},L9=function(t,e){return es(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ji(t)?As(t,e):e},vCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:w6.parse(t,e)}},yCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},hk={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Kj=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},bCe=Kj("top"),wCe=Kj("right"),NCe=Kj("bottom"),CCe=Kj("left"),_Ce={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(es).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},ECe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},qj=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},SCe=qj("top"),ICe=qj("right"),jCe=qj("bottom"),PCe=qj("left"),BCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},TCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&fk(e[0],"none")?[]:ch(e).map(function(r){for(var n={color:eA.TRANSPARENT,offsetX:bl,offsetY:bl,blur:bl},a=0,s=0;s<r.length;s++){var o=r[s];ym(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:n.blur=o,a++):n.color=sm.parse(t,o)}return n})}},FCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},OCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=MCe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},DCe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},RCe=function(t){var e=t.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=e[0],n=e[1];e[2],e[3];var a=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,a,s,o,l]:null},MCe={matrix:DCe,matrix3d:RCe},U9={type:16,number:50,flags:Iw},LCe=[U9,U9],UCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ji);return r.length!==2?LCe:[r[0],r[1]]}},QCe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},gb;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(gb||(gb={}));var VCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return gb.BREAK_ALL;case"keep-all":return gb.KEEP_ALL;case"normal":default:return gb.NORMAL}}},HCe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(f1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ite={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},$Ce={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return f1(e)?e.number:1}},GCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},KCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(es).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},qCe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},zCe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},WCe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(f1(e))return e.number;if(es(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},XCe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(es).map(function(r){return r.value})}},YCe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},vo=function(t,e){return(t&e)!==0},JCe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},ZCe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=e.filter(Hee),s=0;s<a.length;s++){var o=a[s],l=a[s+1];if(o.type===20){var c=l&&f1(l)?l.number:1;n.push({counter:o.value,increment:c})}}return n}},e_e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(Hee),a=0;a<n.length;a++){var s=n[a],o=n[a+1];if(es(s)&&s.value!=="none"){var l=o&&f1(o)?o.number:0;r.push({counter:s.value,reset:l})}}return r}},t_e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(jw).map(function(r){return ite.parse(t,r)})}},r_e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],a=e.filter(INe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var o=a[s].value,l=a[s+1].value;n.push({open:o,close:l})}return n}},Q9=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},n_e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&fk(e[0],"none")?[]:ch(e).map(function(r){for(var n={color:255,offsetX:bl,offsetY:bl,blur:bl,spread:bl,inset:!1},a=0,s=0;s<r.length;s++){var o=r[s];fk(o,"inset")?n.inset=!0:ym(o)?(a===0?n.offsetX=o:a===1?n.offsetY=o:a===2?n.blur=o:n.spread=o,a++):n.color=sm.parse(t,o)}return n})}},a_e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(es).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},s_e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},i_e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return jw(e)?e.number:0}},o_e=function(){function t(e,r){var n,a;this.animationDuration=Kr(e,t_e,r.animationDuration),this.backgroundClip=Kr(e,BNe,r.backgroundClip),this.backgroundColor=Kr(e,TNe,r.backgroundColor),this.backgroundImage=Kr(e,VNe,r.backgroundImage),this.backgroundOrigin=Kr(e,HNe,r.backgroundOrigin),this.backgroundPosition=Kr(e,$Ne,r.backgroundPosition),this.backgroundRepeat=Kr(e,GNe,r.backgroundRepeat),this.backgroundSize=Kr(e,qNe,r.backgroundSize),this.borderTopColor=Kr(e,WNe,r.borderTopColor),this.borderRightColor=Kr(e,XNe,r.borderRightColor),this.borderBottomColor=Kr(e,YNe,r.borderBottomColor),this.borderLeftColor=Kr(e,JNe,r.borderLeftColor),this.borderTopLeftRadius=Kr(e,ZNe,r.borderTopLeftRadius),this.borderTopRightRadius=Kr(e,eCe,r.borderTopRightRadius),this.borderBottomRightRadius=Kr(e,tCe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Kr(e,rCe,r.borderBottomLeftRadius),this.borderTopStyle=Kr(e,nCe,r.borderTopStyle),this.borderRightStyle=Kr(e,aCe,r.borderRightStyle),this.borderBottomStyle=Kr(e,sCe,r.borderBottomStyle),this.borderLeftStyle=Kr(e,iCe,r.borderLeftStyle),this.borderTopWidth=Kr(e,oCe,r.borderTopWidth),this.borderRightWidth=Kr(e,lCe,r.borderRightWidth),this.borderBottomWidth=Kr(e,cCe,r.borderBottomWidth),this.borderLeftWidth=Kr(e,uCe,r.borderLeftWidth),this.boxShadow=Kr(e,n_e,r.boxShadow),this.color=Kr(e,dCe,r.color),this.direction=Kr(e,fCe,r.direction),this.display=Kr(e,hCe,r.display),this.float=Kr(e,mCe,r.cssFloat),this.fontFamily=Kr(e,qCe,r.fontFamily),this.fontSize=Kr(e,zCe,r.fontSize),this.fontStyle=Kr(e,YCe,r.fontStyle),this.fontVariant=Kr(e,XCe,r.fontVariant),this.fontWeight=Kr(e,WCe,r.fontWeight),this.letterSpacing=Kr(e,pCe,r.letterSpacing),this.lineBreak=Kr(e,gCe,r.lineBreak),this.lineHeight=Kr(e,xCe,r.lineHeight),this.listStyleImage=Kr(e,vCe,r.listStyleImage),this.listStylePosition=Kr(e,yCe,r.listStylePosition),this.listStyleType=Kr(e,hk,r.listStyleType),this.marginTop=Kr(e,bCe,r.marginTop),this.marginRight=Kr(e,wCe,r.marginRight),this.marginBottom=Kr(e,NCe,r.marginBottom),this.marginLeft=Kr(e,CCe,r.marginLeft),this.opacity=Kr(e,$Ce,r.opacity);var s=Kr(e,_Ce,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Kr(e,ECe,r.overflowWrap),this.paddingTop=Kr(e,SCe,r.paddingTop),this.paddingRight=Kr(e,ICe,r.paddingRight),this.paddingBottom=Kr(e,jCe,r.paddingBottom),this.paddingLeft=Kr(e,PCe,r.paddingLeft),this.paintOrder=Kr(e,a_e,r.paintOrder),this.position=Kr(e,TCe,r.position),this.textAlign=Kr(e,BCe,r.textAlign),this.textDecorationColor=Kr(e,GCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Kr(e,KCe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Kr(e,kCe,r.textShadow),this.textTransform=Kr(e,FCe,r.textTransform),this.transform=Kr(e,OCe,r.transform),this.transformOrigin=Kr(e,UCe,r.transformOrigin),this.visibility=Kr(e,QCe,r.visibility),this.webkitTextStrokeColor=Kr(e,s_e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Kr(e,i_e,r.webkitTextStrokeWidth),this.wordBreak=Kr(e,VCe,r.wordBreak),this.zIndex=Kr(e,HCe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return im(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return vo(this.display,4)||vo(this.display,33554432)||vo(this.display,268435456)||vo(this.display,536870912)||vo(this.display,67108864)||vo(this.display,134217728)},t}(),l_e=function(){function t(e,r){this.content=Kr(e,JCe,r.content),this.quotes=Kr(e,r_e,r.quotes)}return t}(),V9=function(){function t(e,r){this.counterIncrement=Kr(e,ZCe,r.counterIncrement),this.counterReset=Kr(e,e_e,r.counterReset)}return t}(),Kr=function(t,e,r){var n=new Qee,a=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(a);var s=new Vee(n.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,es(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Uj.parse(t,s.parseComponentValue());case"color":return sm.parse(t,s.parseComponentValue());case"image":return w6.parse(t,s.parseComponentValue());case"length":var l=s.parseComponentValue();return ym(l)?l:bl;case"length-percentage":var c=s.parseComponentValue();return Ji(c)?c:bl;case"time":return ite.parse(t,s.parseComponentValue())}break}},c_e="data-html2canvas-debug",u_e=function(t){var e=t.getAttribute(c_e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ak=function(t,e){var r=u_e(t);return r===1||e===r},uh=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Ak(r,3))debugger;this.styles=new o_e(e,window.getComputedStyle(r,null)),gk(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Mj(this.context,r),Ak(r,4)&&(this.flags|=16)}return t}(),d_e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",H9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gC=0;gC<H9.length;gC++)Vy[H9.charCodeAt(gC)]=gC;var f_e=function(t){var e=t.length*.75,r=t.length,n,a=0,s,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Vy[t.charCodeAt(n)],o=Vy[t.charCodeAt(n+1)],l=Vy[t.charCodeAt(n+2)],c=Vy[t.charCodeAt(n+3)],d[a++]=s<<2|o>>4,d[a++]=(o&15)<<4|l>>2,d[a++]=(l&3)<<6|c&63;return u},h_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},A_e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Pp=5,N6=11,I3=2,m_e=N6-Pp,ote=65536>>Pp,p_e=1<<Pp,j3=p_e-1,g_e=1024>>Pp,x_e=ote+g_e,v_e=x_e,y_e=32,b_e=v_e+y_e,w_e=65536>>N6,N_e=1<<m_e,C_e=N_e-1,$9=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},__e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},E_e=function(t,e){var r=f_e(t),n=Array.isArray(r)?A_e(r):new Uint32Array(r),a=Array.isArray(r)?h_e(r):new Uint16Array(r),s=24,o=$9(a,s/2,n[4]/2),l=n[5]===2?$9(a,(s+n[4])/2):__e(n,Math.ceil((s+n[4])/4));return new S_e(n[0],n[1],n[2],n[3],o,l)},S_e=function(){function t(e,r,n,a,s,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Pp],r=(r<<I3)+(e&j3),this.data[r];if(e<=65535)return r=this.index[ote+(e-55296>>Pp)],r=(r<<I3)+(e&j3),this.data[r];if(e<this.highStart)return r=b_e-w_e+(e>>N6),r=this.index[r],r+=e>>Pp&C_e,r=this.index[r],r=(r<<I3)+(e&j3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),G9="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xC=0;xC<G9.length;xC++)I_e[G9.charCodeAt(xC)]=xC;var j_e=1,P3=2,B3=3,K9=4,q9=5,P_e=7,z9=8,T3=9,k3=10,W9=11,X9=12,Y9=13,J9=14,F3=15,B_e=function(t){for(var e=[],r=0,n=t.length;r<n;){var a=t.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((a&1023)<<10)+(s&1023)+65536):(e.push(a),r--)}else e.push(a)}return e},T_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var o=t[a];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},k_e=E_e(d_e),sd="",O3="",F_e=function(t){return k_e.get(t)},O_e=function(t,e,r){var n=r-2,a=e[n],s=e[r-1],o=e[r];if(s===P3&&o===B3)return sd;if(s===P3||s===B3||s===K9||o===P3||o===B3||o===K9)return O3;if(s===z9&&[z9,T3,W9,X9].indexOf(o)!==-1||(s===W9||s===T3)&&(o===T3||o===k3)||(s===X9||s===k3)&&o===k3||o===Y9||o===q9||o===P_e||s===j_e)return sd;if(s===Y9&&o===J9){for(;a===q9;)a=e[--n];if(a===J9)return sd}if(s===F3&&o===F3){for(var l=0;a===F3;)l++,a=e[--n];if(l%2===0)return sd}return O3},D_e=function(t){var e=B_e(t),r=e.length,n=0,a=0,s=e.map(F_e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=sd;n<r&&(o=O_e(e,s,++n))===sd;);if(o!==sd||n===r){var l=T_e.apply(null,e.slice(a,n));return a=n,{value:l,done:!1}}return{done:!0,value:null}}}},R_e=function(t){for(var e=D_e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},M_e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(t.body.removeChild(n),s===e)return!0}}return!1},L_e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=Lj(n.data).map(function(c){return Ti(c)}),s=0,o={},l=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>o.x||d.y>o.y;return o=d,u===0?!0:f});return t.body.removeChild(e),l},U_e=function(){return typeof new Image().crossOrigin<"u"},Q_e=function(){return typeof new XMLHttpRequest().responseType=="string"},V_e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},Z9=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},H_e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=e.toDataURL();a.src=s;var o=mk(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),eQ(o).then(function(l){n.drawImage(l,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",Z9(c)?eQ(mk(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),Z9(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},mk=function(t,e,r,n,a){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(a),o},eQ=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ml={get SUPPORT_RANGE_BOUNDS(){var t=M_e(document);return Object.defineProperty(ml,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ml.SUPPORT_RANGE_BOUNDS&&L_e(document);return Object.defineProperty(ml,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=V_e(document);return Object.defineProperty(ml,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?H_e(document):Promise.resolve(!1);return Object.defineProperty(ml,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=U_e();return Object.defineProperty(ml,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=Q_e();return Object.defineProperty(ml,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ml,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ml,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},xb=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),$_e=function(t,e,r,n){var a=q_e(e,r),s=[],o=0;return a.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(ml.SUPPORT_RANGE_BOUNDS){var c=tQ(n,o,l.length).getClientRects();if(c.length>1){var u=C6(l),d=0;u.forEach(function(A){s.push(new xb(A,AA.fromDOMRectList(t,tQ(n,d+o,A.length).getClientRects()))),d+=A.length})}else s.push(new xb(l,AA.fromDOMRectList(t,c)))}else{var f=n.splitText(l.length);s.push(new xb(l,G_e(t,n))),n=f}else ml.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),s},G_e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var s=Mj(t,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return AA.EMPTY},tQ=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(t,e),a.setEnd(t,e+r),a},C6=function(t){if(ml.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return R_e(t)},K_e=function(t,e){if(ml.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return W_e(t,e)},q_e=function(t,e){return e.letterSpacing!==0?C6(t):K_e(t,e)},z_e=[32,160,4961,65792,65793,4153,4241],W_e=function(t,e){for(var r=wwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,s=function(){if(a.value){var o=a.value.slice(),l=Lj(o),c="";l.forEach(function(u){z_e.indexOf(u)===-1?c+=Ti(u):(c.length&&n.push(c),n.push(Ti(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},X_e=function(){function t(e,r,n){this.text=Y_e(r.data,n.textTransform),this.textBounds=$_e(e,this.text,n,r)}return t}(),Y_e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(J_e,Z_e);case 2:return t.toUpperCase();default:return t}},J_e=/(^|\s|:|-|\(|\))([a-z])/g,Z_e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},lte=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(uh),cte=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(uh),ute=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=new XMLSerializer,o=Mj(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(uh),dte=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(uh),pk=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(uh),eEe=[{type:15,flags:0,unit:"px",number:3}],tEe=[{type:16,flags:0,number:50}],rEe=function(t){return t.width>t.height?new AA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new AA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},nEe=function(t){var e=t.type===aEe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},mS="checkbox",pS="radio",aEe="password",rQ=707406591,_6=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=nEe(n),(a.type===mS||a.type===pS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=rEe(a.bounds)),a.type){case mS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=eEe;break;case pS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=tEe;break}return a}return e}(uh),fte=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return e}(uh),hte=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.value=n.value,a}return e}(uh),Ate=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=pte(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?pb(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):eA.TRANSPARENT,o=n.contentWindow.document.body?pb(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):eA.TRANSPARENT;a.backgroundColor=im(s)?im(o)?a.styles.backgroundColor:o:s}}catch{}return a}return e}(uh),sEe=["OL","UL","MENU"],aE=function(t,e,r,n){for(var a=e.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,gte(a)&&a.data.trim().length>0)r.textNodes.push(new X_e(t,a,r.styles));else if($x(a))if(bte(a)&&a.assignedNodes)a.assignedNodes().forEach(function(l){return aE(t,l,r,n)});else{var o=mte(t,a);o.styles.isVisible()&&(iEe(a,o,n)?o.flags|=4:oEe(o.styles)&&(o.flags|=2),sEe.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?aE(t,a.shadowRoot,o,n):!gS(a)&&!xte(a)&&!xS(a)&&aE(t,a,o,n))}},mte=function(t,e){return xk(e)?new lte(t,e):vte(e)?new cte(t,e):xte(e)?new ute(t,e):lEe(e)?new dte(t,e):cEe(e)?new pk(t,e):uEe(e)?new _6(t,e):xS(e)?new fte(t,e):gS(e)?new hte(t,e):yte(e)?new Ate(t,e):new uh(t,e)},pte=function(t,e){var r=mte(t,e);return r.flags|=4,aE(t,e,r,r),r},iEe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||E6(t)&&r.styles.isTransparent()},oEe=function(t){return t.isPositioned()||t.isFloating()},gte=function(t){return t.nodeType===Node.TEXT_NODE},$x=function(t){return t.nodeType===Node.ELEMENT_NODE},gk=function(t){return $x(t)&&typeof t.style<"u"&&!sE(t)},sE=function(t){return typeof t.className=="object"},lEe=function(t){return t.tagName==="LI"},cEe=function(t){return t.tagName==="OL"},uEe=function(t){return t.tagName==="INPUT"},dEe=function(t){return t.tagName==="HTML"},xte=function(t){return t.tagName==="svg"},E6=function(t){return t.tagName==="BODY"},vte=function(t){return t.tagName==="CANVAS"},nQ=function(t){return t.tagName==="VIDEO"},xk=function(t){return t.tagName==="IMG"},yte=function(t){return t.tagName==="IFRAME"},aQ=function(t){return t.tagName==="STYLE"},fEe=function(t){return t.tagName==="SCRIPT"},gS=function(t){return t.tagName==="TEXTAREA"},xS=function(t){return t.tagName==="SELECT"},bte=function(t){return t.tagName==="SLOT"},sQ=function(t){return t.tagName.indexOf("-")>0},hEe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,a=e.counterReset,s=!0;n!==null&&n.forEach(function(l){var c=r.counters[l.counter];c&&l.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=l.increment)});var o=[];return s&&a.forEach(function(l){var c=r.counters[l.counter];o.push(l.counter),c||(c=r.counters[l.counter]=[]),c.push(l.reset)}),o},t}(),iQ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},oQ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},AEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mEe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},tx=function(t,e,r,n,a,s){return t<e||t>r?b2(t,a,s.length>0):n.integers.reduce(function(o,l,c){for(;t>=l;)t-=l,o+=n.values[c];return o},"")+s},wte=function(t,e,r,n){var a="";do r||t--,a=n(t)+a,t/=e;while(t*e>=e);return a},Ii=function(t,e,r,n,a){var s=r-e+1;return(t<0?"-":"")+(wte(Math.abs(t),s,n,function(o){return Ti(Math.floor(o%s)+e)})+a)},Km=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return wte(Math.abs(t),n,!1,function(a){return e[Math.floor(a%n)]})+r},_x=1,x0=2,v0=4,Hy=8,bh=function(t,e,r,n,a,s){if(t<-9999||t>9999)return b2(t,4,a.length>0);var o=Math.abs(t),l=a;if(o===0)return e[0]+l;for(var c=0;o>0&&c<=4;c++){var u=o%10;u===0&&vo(s,_x)&&l!==""?l=e[u]+l:u>1||u===1&&c===0||u===1&&c===1&&vo(s,x0)||u===1&&c===1&&vo(s,v0)&&t>100||u===1&&c>1&&vo(s,Hy)?l=e[u]+(c>0?r[c-1]:"")+l:u===1&&c>0&&(l=r[c-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},lQ="",cQ="",uQ="",D3="",b2=function(t,e,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Ii(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Km(t,"",a);case 6:return tx(t,1,3999,iQ,3,n).toLowerCase();case 7:return tx(t,1,3999,iQ,3,n);case 8:return Ii(t,945,969,!1,n);case 9:return Ii(t,97,122,!1,n);case 10:return Ii(t,65,90,!1,n);case 11:return Ii(t,1632,1641,!0,n);case 12:case 49:return tx(t,1,9999,oQ,3,n);case 35:return tx(t,1,9999,oQ,3,n).toLowerCase();case 13:return Ii(t,2534,2543,!0,n);case 14:case 30:return Ii(t,6112,6121,!0,n);case 15:return Km(t,"",a);case 16:return Km(t,"",a);case 17:case 48:return bh(t,"",lQ,"",a,x0|v0|Hy);case 47:return bh(t,"",cQ,"",a,_x|x0|v0|Hy);case 42:return bh(t,"",lQ,"",a,x0|v0|Hy);case 41:return bh(t,"",cQ,"",a,_x|x0|v0|Hy);case 26:return bh(t,"","",uQ,a,0);case 25:return bh(t,"","",uQ,a,_x|x0|v0);case 31:return bh(t,"","",D3,s,_x|x0|v0);case 33:return bh(t,"","",D3,s,0);case 32:return bh(t,"","",D3,s,_x|x0|v0);case 18:return Ii(t,2406,2415,!0,n);case 20:return tx(t,1,19999,mEe,3,n);case 21:return Ii(t,2790,2799,!0,n);case 22:return Ii(t,2662,2671,!0,n);case 22:return tx(t,1,10999,AEe,3,n);case 23:return Km(t,"");case 24:return Km(t,"");case 27:return Ii(t,3302,3311,!0,n);case 28:return Km(t,"",a);case 29:return Km(t,"",a);case 34:return Ii(t,3792,3801,!0,n);case 37:return Ii(t,6160,6169,!0,n);case 38:return Ii(t,4160,4169,!0,n);case 39:return Ii(t,2918,2927,!0,n);case 40:return Ii(t,1776,1785,!0,n);case 43:return Ii(t,3046,3055,!0,n);case 44:return Ii(t,3174,3183,!0,n);case 45:return Ii(t,3664,3673,!0,n);case 46:return Ii(t,3872,3881,!0,n);case 3:default:return Ii(t,48,57,!0,n)}},Nte="data-html2canvas-ignore",dQ=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new hEe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,a=pEe(e,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=a.contentWindow,c=l.document,u=vEe(a).then(function(){return uc(n,void 0,void 0,function(){var d,f;return Ql(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(NEe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,xEe(c)]:[3,4];case 3:A.sent(),A.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(bEe(document.doctype)+"<html></html>"),wEe(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},t.prototype.createElementClone=function(e){if(Ak(e,2))debugger;if(vte(e))return this.createCanvasClone(e);if(nQ(e))return this.createVideoClone(e);if(aQ(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return xk(r)&&(xk(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),sQ(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return R3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,o){return o&&typeof o.cssText=="string"?s+o.cssText:s},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var s=e.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var c=l.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},t.prototype.appendChildNode=function(e,r,n){(!$x(r)||!fEe(r)&&!r.hasAttribute(Nte)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$x(r)||!aQ(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var a=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if($x(s)&&bte(s)&&typeof s.assignedNodes=="function"){var o=s.assignedNodes();o.length&&o.forEach(function(l){return a.appendChildNode(r,l,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(gte(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&$x(e)&&(gk(e)||sE(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var s=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&gk(a)&&(this.clonedReferenceElement=a),E6(a)&&EEe(a);var c=this.counters.parse(new V9(this.context,s)),u=this.resolvePseudoContent(e,a,o,vb.BEFORE);sQ(e)&&(r=!0),nQ(e)||this.cloneChildNodes(e,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(e,a,l,vb.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||sE(e))&&!yte(e)||r)&&R3(s,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(gS(e)||xS(e))&&(gS(a)||xS(a))&&(a.value=e.value),a}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,a){var s=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new V9(this.context,n));var c=new l_e(this.context,n),u=l.createElement("html2canvaspseudoelement");R3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(l.createTextNode(f.value));else if(f.type===22){var A=l.createElement("img");A.src=f.value,A.style.opacity="1",u.appendChild(A)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(es);h.length&&u.appendChild(l.createTextNode(e.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var m=f.values.filter(Fv),p=m[0],x=m[1];if(p&&es(p)){var v=s.counters.getCounterValue(p.value),y=x&&es(x)?hk.parse(s.context,x.value):3;u.appendChild(l.createTextNode(b2(v,y,!1)))}}else if(f.name==="counters"){var b=f.values.filter(Fv),p=b[0],w=b[1],x=b[2];if(p&&es(p)){var j=s.counters.getCounterValues(p.value),I=x&&es(x)?hk.parse(s.context,x.value):3,_=w&&w.type===0?w.value:"",S=j.map(function(k){return b2(k,I,!1)}).join(_);u.appendChild(l.createTextNode(S))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(l.createTextNode(Q9(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(Q9(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(f.value))}}),u.className=vk+" "+yk;var d=a===vb.BEFORE?" "+vk:" "+yk;return sE(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),vb;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(vb||(vb={}));var pEe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(Nte,"true"),t.body.appendChild(r),r},gEe=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},xEe=function(t){return Promise.all([].slice.call(t.images,0).map(gEe))},vEe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},yEe=["all","d","content"],R3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);yEe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},bEe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},wEe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},NEe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},CEe=":before",_Ee=":after",vk="___html2canvas___pseudoelement_before",yk="___html2canvas___pseudoelement_after",fQ=`{
    content: "" !important;
    display: none !important;
}`,EEe=function(t){SEe(t,"."+vk+CEe+fQ+`
         .`+yk+_Ee+fQ)},SEe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},Cte=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),IEe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(L3(e)||TEe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return uc(this,void 0,void 0,function(){var r,n,a,s,o=this;return Ql(this,function(l){switch(l.label){case 0:return r=Cte.isSameOrigin(e),n=!M3(e)&&this._options.useCORS===!0&&ml.SUPPORT_CORS_IMAGES&&!r,a=!M3(e)&&!r&&!L3(e)&&typeof this._options.proxy=="string"&&ml.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!M3(e)&&!L3(e)&&!a&&!n?[2]:(s=e,a?[4,this.proxy(s)]:[3,2]);case 1:s=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(kEe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(s,o){var l=ml.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(l==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(A){return o(A)},!1),f.readAsDataURL(c.response)}else o("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return o("Timed out ("+d+"ms) proxying "+a)}}c.send()})},t}(),jEe=/^data:image\/svg\+xml/i,PEe=/^data:image\/.*;base64,/i,BEe=/^data:image\/.*/i,TEe=function(t){return ml.SUPPORT_SVG_DRAWING||!FEe(t)},M3=function(t){return BEe.test(t)},kEe=function(t){return PEe.test(t)},L3=function(t){return t.substr(0,4)==="blob"},FEe=function(t){return t.substr(-3).toLowerCase()==="svg"||jEe.test(t)},Gr=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),rx=function(t,e,r){return new Gr(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},vC=function(){function t(e,r,n,a){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=a}return t.prototype.subdivide=function(e,r){var n=rx(this.start,this.startControl,e),a=rx(this.startControl,this.endControl,e),s=rx(this.endControl,this.end,e),o=rx(n,a,e),l=rx(a,s,e),c=rx(o,l,e);return r?new t(this.start,n,o,c):new t(c,l,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),ud=function(t){return t.type===1},OEe=function(){function t(e){var r=e.styles,n=e.bounds,a=Qy(r.borderTopLeftRadius,n.width,n.height),s=a[0],o=a[1],l=Qy(r.borderTopRightRadius,n.width,n.height),c=l[0],u=l[1],d=Qy(r.borderBottomRightRadius,n.width,n.height),f=d[0],A=d[1],h=Qy(r.borderBottomLeftRadius,n.width,n.height),m=h[0],p=h[1],x=[];x.push((s+c)/n.width),x.push((m+f)/n.width),x.push((o+p)/n.height),x.push((u+A)/n.height);var v=Math.max.apply(Math,x);v>1&&(s/=v,o/=v,c/=v,u/=v,f/=v,A/=v,m/=v,p/=v);var y=n.width-c,b=n.height-A,w=n.width-f,j=n.height-p,I=r.borderTopWidth,_=r.borderRightWidth,S=r.borderBottomWidth,E=r.borderLeftWidth,F=As(r.paddingTop,e.bounds.width),k=As(r.paddingRight,e.bounds.width),B=As(r.paddingBottom,e.bounds.width),D=As(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?Ts(n.left+E/3,n.top+I/3,s-E/3,o-I/3,Fa.TOP_LEFT):new Gr(n.left+E/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||o>0?Ts(n.left+y,n.top+I/3,c-_/3,u-I/3,Fa.TOP_RIGHT):new Gr(n.left+n.width-_/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||A>0?Ts(n.left+w,n.top+b,f-_/3,A-S/3,Fa.BOTTOM_RIGHT):new Gr(n.left+n.width-_/3,n.top+n.height-S/3),this.bottomLeftBorderDoubleOuterBox=m>0||p>0?Ts(n.left+E/3,n.top+j,m-E/3,p-S/3,Fa.BOTTOM_LEFT):new Gr(n.left+E/3,n.top+n.height-S/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?Ts(n.left+E*2/3,n.top+I*2/3,s-E*2/3,o-I*2/3,Fa.TOP_LEFT):new Gr(n.left+E*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?Ts(n.left+y,n.top+I*2/3,c-_*2/3,u-I*2/3,Fa.TOP_RIGHT):new Gr(n.left+n.width-_*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||A>0?Ts(n.left+w,n.top+b,f-_*2/3,A-S*2/3,Fa.BOTTOM_RIGHT):new Gr(n.left+n.width-_*2/3,n.top+n.height-S*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||p>0?Ts(n.left+E*2/3,n.top+j,m-E*2/3,p-S*2/3,Fa.BOTTOM_LEFT):new Gr(n.left+E*2/3,n.top+n.height-S*2/3),this.topLeftBorderStroke=s>0||o>0?Ts(n.left+E/2,n.top+I/2,s-E/2,o-I/2,Fa.TOP_LEFT):new Gr(n.left+E/2,n.top+I/2),this.topRightBorderStroke=s>0||o>0?Ts(n.left+y,n.top+I/2,c-_/2,u-I/2,Fa.TOP_RIGHT):new Gr(n.left+n.width-_/2,n.top+I/2),this.bottomRightBorderStroke=f>0||A>0?Ts(n.left+w,n.top+b,f-_/2,A-S/2,Fa.BOTTOM_RIGHT):new Gr(n.left+n.width-_/2,n.top+n.height-S/2),this.bottomLeftBorderStroke=m>0||p>0?Ts(n.left+E/2,n.top+j,m-E/2,p-S/2,Fa.BOTTOM_LEFT):new Gr(n.left+E/2,n.top+n.height-S/2),this.topLeftBorderBox=s>0||o>0?Ts(n.left,n.top,s,o,Fa.TOP_LEFT):new Gr(n.left,n.top),this.topRightBorderBox=c>0||u>0?Ts(n.left+y,n.top,c,u,Fa.TOP_RIGHT):new Gr(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||A>0?Ts(n.left+w,n.top+b,f,A,Fa.BOTTOM_RIGHT):new Gr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||p>0?Ts(n.left,n.top+j,m,p,Fa.BOTTOM_LEFT):new Gr(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?Ts(n.left+E,n.top+I,Math.max(0,s-E),Math.max(0,o-I),Fa.TOP_LEFT):new Gr(n.left+E,n.top+I),this.topRightPaddingBox=c>0||u>0?Ts(n.left+Math.min(y,n.width-_),n.top+I,y>n.width+_?0:Math.max(0,c-_),Math.max(0,u-I),Fa.TOP_RIGHT):new Gr(n.left+n.width-_,n.top+I),this.bottomRightPaddingBox=f>0||A>0?Ts(n.left+Math.min(w,n.width-E),n.top+Math.min(b,n.height-S),Math.max(0,f-_),Math.max(0,A-S),Fa.BOTTOM_RIGHT):new Gr(n.left+n.width-_,n.top+n.height-S),this.bottomLeftPaddingBox=m>0||p>0?Ts(n.left+E,n.top+Math.min(j,n.height-S),Math.max(0,m-E),Math.max(0,p-S),Fa.BOTTOM_LEFT):new Gr(n.left+E,n.top+n.height-S),this.topLeftContentBox=s>0||o>0?Ts(n.left+E+D,n.top+I+F,Math.max(0,s-(E+D)),Math.max(0,o-(I+F)),Fa.TOP_LEFT):new Gr(n.left+E+D,n.top+I+F),this.topRightContentBox=c>0||u>0?Ts(n.left+Math.min(y,n.width+E+D),n.top+I+F,y>n.width+E+D?0:c-E+D,u-(I+F),Fa.TOP_RIGHT):new Gr(n.left+n.width-(_+k),n.top+I+F),this.bottomRightContentBox=f>0||A>0?Ts(n.left+Math.min(w,n.width-(E+D)),n.top+Math.min(b,n.height+I+F),Math.max(0,f-(_+k)),A-(S+B),Fa.BOTTOM_RIGHT):new Gr(n.left+n.width-(_+k),n.top+n.height-(S+B)),this.bottomLeftContentBox=m>0||p>0?Ts(n.left+E+D,n.top+j,Math.max(0,m-(E+D)),p-(S+B),Fa.BOTTOM_LEFT):new Gr(n.left+E+D,n.top+n.height-(S+B))}return t}(),Fa;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Fa||(Fa={}));var Ts=function(t,e,r,n,a){var s=4*((Math.sqrt(2)-1)/3),o=r*s,l=n*s,c=t+r,u=e+n;switch(a){case Fa.TOP_LEFT:return new vC(new Gr(t,u),new Gr(t,u-l),new Gr(c-o,e),new Gr(c,e));case Fa.TOP_RIGHT:return new vC(new Gr(t,e),new Gr(t+o,e),new Gr(c,u-l),new Gr(c,u));case Fa.BOTTOM_RIGHT:return new vC(new Gr(c,e),new Gr(c,e+l),new Gr(t+o,u),new Gr(t,u));case Fa.BOTTOM_LEFT:default:return new vC(new Gr(c,u),new Gr(c-o,u),new Gr(t,e+l),new Gr(t,e))}},vS=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},DEe=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},yS=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},REe=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),yC=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),MEe=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),LEe=function(t){return t.type===0},_te=function(t){return t.type===1},UEe=function(t){return t.type===2},hQ=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},QEe=function(t,e,r,n,a){return t.map(function(s,o){switch(o){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+a);case 3:return s.add(e,r+a)}return s})},Ete=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Ste=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new OEe(this.container),this.container.styles.opacity<1&&this.effects.push(new MEe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new REe(n,a,s))}if(this.container.styles.overflowX!==0){var o=vS(this.curves),l=yS(this.curves);hQ(o,l)?this.effects.push(new yC(o,6)):(this.effects.push(new yC(o,2)),this.effects.push(new yC(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!_te(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=vS(n.curves),l=yS(n.curves);hQ(o,l)||a.unshift(new yC(l,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return vo(c.target,e)})},t}(),bk=function(t,e,r,n){t.container.elements.forEach(function(a){var s=vo(a.flags,4),o=vo(a.flags,2),l=new Ste(a,t);vo(a.styles.display,2048)&&n.push(l);var c=vo(a.flags,8)?[]:n;if(s||o){var u=s||a.styles.isPositioned()?r:e,d=new Ete(l);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var A=0;u.negativeZIndex.some(function(m,p){return f>m.element.container.styles.zIndex.order?(A=p,!1):A>0}),u.negativeZIndex.splice(A,0,d)}else if(f>0){var h=0;u.positiveZIndex.some(function(m,p){return f>=m.element.container.styles.zIndex.order?(h=p+1,!1):h>0}),u.positiveZIndex.splice(h,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);bk(l,d,s?d:r,c)}else a.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),bk(l,e,r,c);vo(a.flags,8)&&Ite(a,c)})},Ite=function(t,e){for(var r=t instanceof pk?t.start:1,n=t instanceof pk?t.reversed:!1,a=0;a<e.length;a++){var s=e[a];s.container instanceof dte&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=b2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},VEe=function(t){var e=new Ste(t,null),r=new Ete(e),n=[];return bk(e,r,r,n),Ite(e.container,n),r},AQ=function(t,e){switch(e){case 0:return Ad(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Ad(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Ad(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Ad(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},HEe=function(t,e){switch(e){case 0:return Ad(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Ad(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Ad(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Ad(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},$Ee=function(t,e){switch(e){case 0:return Ad(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Ad(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Ad(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Ad(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},GEe=function(t,e){switch(e){case 0:return bC(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return bC(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return bC(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return bC(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},bC=function(t,e){var r=[];return ud(t)?r.push(t.subdivide(.5,!1)):r.push(t),ud(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Ad=function(t,e,r,n){var a=[];return ud(t)?a.push(t.subdivide(.5,!1)):a.push(t),ud(r)?a.push(r.subdivide(.5,!0)):a.push(r),ud(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),ud(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},jte=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},bS=function(t){var e=t.styles,r=t.bounds,n=As(e.paddingLeft,r.width),a=As(e.paddingRight,r.width),s=As(e.paddingTop,r.width),o=As(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+s+o))},KEe=function(t,e){return t===0?e.bounds:t===2?bS(e):jte(e)},qEe=function(t,e){return t===0?e.bounds:t===2?bS(e):jte(e)},U3=function(t,e,r){var n=KEe(Ex(t.styles.backgroundOrigin,e),t),a=qEe(Ex(t.styles.backgroundClip,e),t),s=zEe(Ex(t.styles.backgroundSize,e),r,n),o=s[0],l=s[1],c=Qy(Ex(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=WEe(Ex(t.styles.backgroundRepeat,e),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,o,l]},nx=function(t){return es(t)&&t.value===cv.AUTO},wC=function(t){return typeof t=="number"},zEe=function(t,e,r){var n=e[0],a=e[1],s=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Ji(o)&&l&&Ji(l))return[As(o,r.width),As(l,r.height)];var c=wC(s);if(es(o)&&(o.value===cv.CONTAIN||o.value===cv.COVER)){if(wC(s)){var u=r.width/r.height;return u<s!=(o.value===cv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=wC(n),f=wC(a),A=d||f;if(nx(o)&&(!l||nx(l))){if(d&&f)return[n,a];if(!c&&!A)return[r.width,r.height];if(A&&c){var h=d?n:a*s,m=f?a:n/s;return[h,m]}var p=d?n:r.width,x=f?a:r.height;return[p,x]}if(c){var v=0,y=0;return Ji(o)?v=As(o,r.width):Ji(l)&&(y=As(l,r.height)),nx(o)?v=y*s:(!l||nx(l))&&(y=v/s),[v,y]}var b=null,w=null;if(Ji(o)?b=As(o,r.width):l&&Ji(l)&&(w=As(l,r.height)),b!==null&&(!l||nx(l))&&(w=d&&f?b/n*a:r.height),w!==null&&nx(o)&&(b=d&&f?w/a*n:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},Ex=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},WEe=function(t,e,r,n,a){var s=e[0],o=e[1],l=r[0],c=r[1];switch(t){case 2:return[new Gr(Math.round(n.left),Math.round(n.top+o)),new Gr(Math.round(n.left+n.width),Math.round(n.top+o)),new Gr(Math.round(n.left+n.width),Math.round(c+n.top+o)),new Gr(Math.round(n.left),Math.round(c+n.top+o))];case 3:return[new Gr(Math.round(n.left+s),Math.round(n.top)),new Gr(Math.round(n.left+s+l),Math.round(n.top)),new Gr(Math.round(n.left+s+l),Math.round(n.height+n.top)),new Gr(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Gr(Math.round(n.left+s),Math.round(n.top+o)),new Gr(Math.round(n.left+s+l),Math.round(n.top+o)),new Gr(Math.round(n.left+s+l),Math.round(n.top+o+c)),new Gr(Math.round(n.left+s),Math.round(n.top+o+c))];default:return[new Gr(Math.round(a.left),Math.round(a.top)),new Gr(Math.round(a.left+a.width),Math.round(a.top)),new Gr(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Gr(Math.round(a.left),Math.round(a.height+a.top))]}},XEe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",mQ="Hidden Text",YEe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),a.src=XEe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(mQ)),n.appendChild(s),n.appendChild(a);var l=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(mQ)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:c}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),Pte=function(){function t(e,r){this.context=e,this.options=r}return t}(),JEe=1e4,ZEe=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new YEe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(r){this.ctx.save(),UEe(r)&&(this.ctx.globalAlpha=r.opacity),LEe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),_te(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return uc(this,void 0,void 0,function(){var n;return Ql(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return uc(this,void 0,void 0,function(){return Ql(this,function(n){switch(n.label){case 0:if(vo(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=C6(r.text);o.reduce(function(l,c){return s.ctx.fillText(c,l,r.bounds.top+a),l+s.ctx.measureText(c).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=aSe(r.fontFamily).join(", "),s=jw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},e.prototype.renderTextNode=function(r,n){return uc(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A=this;return Ql(this,function(h){return a=this.createFontStyle(n),s=a[0],o=a[1],l=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(o,l),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(m){f.forEach(function(p){switch(p){case 0:A.ctx.fillStyle=Oo(n.color),A.renderTextWithLetterSpacing(m,n.letterSpacing,u);var x=n.textShadow;x.length&&m.text.trim().length&&(x.slice(0).reverse().forEach(function(v){A.ctx.shadowColor=Oo(v.color),A.ctx.shadowOffsetX=v.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=v.offsetY.number*A.options.scale,A.ctx.shadowBlur=v.blur.number,A.renderTextWithLetterSpacing(m,n.letterSpacing,u)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),n.textDecorationLine.length&&(A.ctx.fillStyle=Oo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(v){switch(v){case 1:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:A.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:A.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+d),m.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&m.text.trim().length&&(A.ctx.strokeStyle=Oo(n.webkitTextStrokeColor),A.ctx.lineWidth=n.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=bS(r),o=yS(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return uc(this,void 0,void 0,function(){var n,a,s,o,l,c,y,y,u,d,f,A,w,h,m,j,p,x,v,y,b,w,j;return Ql(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,o=0,l=n.textNodes,I.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof lte))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof cte&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof ute))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=I.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Ate&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof _6&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===mS?n.checked&&(this.ctx.save(),this.path([new Gr(n.bounds.left+f*.39363,n.bounds.top+f*.79),new Gr(n.bounds.left+f*.16,n.bounds.top+f*.5549),new Gr(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new Gr(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new Gr(n.bounds.left+f*.72983,n.bounds.top+f*.23),new Gr(n.bounds.left+f*.84,n.bounds.top+f*.34085),new Gr(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Oo(rQ),this.ctx.fill(),this.ctx.restore()):n.type===pS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Oo(rQ),this.ctx.fill(),this.ctx.restore())),eSe(n)&&n.value.length){switch(A=this.createFontStyle(s),w=A[0],h=A[1],m=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=Oo(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=rSe(n.styles.textAlign),j=bS(n),p=0,n.styles.textAlign){case 1:p+=j.width/2;break;case 2:p+=j.width;break}x=j.add(p,0,0,-j.height/2+1),this.ctx.save(),this.path([new Gr(j.left,j.top),new Gr(j.left+j.width,j.top),new Gr(j.left+j.width,j.top+j.height),new Gr(j.left,j.top+j.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new xb(n.value,x),s.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!vo(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(v=n.styles.listStyleImage,v.type!==0)return[3,18];y=void 0,b=v.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=I.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=Oo(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",j=new AA(n.bounds.left,n.bounds.top+As(n.styles.paddingTop,n.bounds.width),n.bounds.width,L9(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new xb(r.listValue,j),s.letterSpacing,L9(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return uc(this,void 0,void 0,function(){var n,a,v,s,o,v,l,c,v,u,d,v,f,A,v,h,m,v,p,x,v;return Ql(this,function(y){switch(y.label){case 0:if(vo(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:y.sent(),n=0,a=r.negativeZIndex,y.label=2;case 2:return n<a.length?(v=a[n],[4,this.renderStack(v)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:y.sent(),s=0,o=r.nonInlineLevel,y.label=7;case 7:return s<o.length?(v=o[s],[4,this.renderNode(v)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:l=0,c=r.nonPositionedFloats,y.label=11;case 11:return l<c.length?(v=c[l],[4,this.renderStack(v)]):[3,14];case 12:y.sent(),y.label=13;case 13:return l++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,y.label=15;case 15:return u<d.length?(v=d[u],[4,this.renderStack(v)]):[3,18];case 16:y.sent(),y.label=17;case 17:return u++,[3,15];case 18:f=0,A=r.inlineLevel,y.label=19;case 19:return f<A.length?(v=A[f],[4,this.renderNode(v)]):[3,22];case 20:y.sent(),y.label=21;case 21:return f++,[3,19];case 22:h=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<m.length?(v=m[h],[4,this.renderStack(v)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:p=0,x=r.positiveZIndex,y.label=27;case 27:return p<x.length?(v=x[p],[4,this.renderStack(v)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var o=ud(a)?a.start:a;s===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),ud(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},e.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,a);var c=l.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),l},e.prototype.renderBackgroundImage=function(r){return uc(this,void 0,void 0,function(){var n,a,s,o,l,c;return Ql(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,A,h,F,Ae,fe,D,X,S,m,F,Ae,fe,D,X,p,x,v,y,b,w,j,I,_,S,E,F,k,B,D,X,he,Ae,fe,me,ne,Pe,Te,O,K,q,U;return Ql(this,function(W){switch(W.label){case 0:if(d.type!==0)return[3,5];f=void 0,A=d.url,W.label=1;case 1:return W.trys.push([1,3,,4]),[4,s.context.cache.match(A)];case 2:return f=W.sent(),[3,4];case 3:return W.sent(),s.context.logger.error("Error loading background-image "+A),[3,4];case 4:return f&&(h=U3(r,n,[f.width,f.height,f.width/f.height]),F=h[0],Ae=h[1],fe=h[2],D=h[3],X=h[4],S=s.ctx.createPattern(s.resizeImage(f,D,X),"repeat"),s.renderRepeat(F,S,Ae,fe)),[3,6];case 5:LNe(d)?(m=U3(r,n,[null,null,null]),F=m[0],Ae=m[1],fe=m[2],D=m[3],X=m[4],p=FNe(d.angle,D,X),x=p[0],v=p[1],y=p[2],b=p[3],w=p[4],j=document.createElement("canvas"),j.width=D,j.height=X,I=j.getContext("2d"),_=I.createLinearGradient(v,b,y,w),R9(d.stops,x).forEach(function(J){return _.addColorStop(J.stop,Oo(J.color))}),I.fillStyle=_,I.fillRect(0,0,D,X),D>0&&X>0&&(S=s.ctx.createPattern(j,"repeat"),s.renderRepeat(F,S,Ae,fe))):UNe(d)&&(E=U3(r,n,[null,null,null]),F=E[0],k=E[1],B=E[2],D=E[3],X=E[4],he=d.position.length===0?[b6]:d.position,Ae=As(he[0],D),fe=As(he[he.length-1],X),me=ONe(d,Ae,fe,D,X),ne=me[0],Pe=me[1],ne>0&&Pe>0&&(Te=s.ctx.createRadialGradient(k+Ae,B+fe,0,k+Ae,B+fe,ne),R9(d.stops,ne*2).forEach(function(J){return Te.addColorStop(J.stop,Oo(J.color))}),s.path(F),s.ctx.fillStyle=Te,ne!==Pe?(O=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,q=Pe/ne,U=1/q,s.ctx.save(),s.ctx.translate(O,K),s.ctx.transform(1,0,0,q,0,0),s.ctx.translate(-O,-K),s.ctx.fillRect(k,U*(B-K)+K,D,X*U),s.ctx.restore()):s.ctx.fill())),W.label=6;case 6:return n--,[2]}})},s=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(c=l[o],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,a){return uc(this,void 0,void 0,function(){return Ql(this,function(s){return this.path(AQ(a,n)),this.ctx.fillStyle=Oo(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,a,s){return uc(this,void 0,void 0,function(){var o,l;return Ql(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return o=HEe(s,a),this.path(o),this.ctx.fillStyle=Oo(r),this.ctx.fill(),l=$Ee(s,a),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return uc(this,void 0,void 0,function(){var n,a,s,o,l,c,u,d,f=this;return Ql(this,function(A){switch(A.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!im(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=tSe(Ex(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),im(n.backgroundColor)||(this.ctx.fillStyle=Oo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var m=vS(r.curves),p=h.inset?0:JEe,x=QEe(m,-p+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(m),f.ctx.clip(),f.mask(x)):(f.mask(m),f.ctx.clip(),f.path(x)),f.ctx.shadowOffsetX=h.offsetX.number+p,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Oo(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Oo(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),A.label=2;case 2:l=0,c=0,u=s,A.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!im(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return A.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return A.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:A.sent(),A.label=11;case 11:l++,A.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,a,s,o){return uc(this,void 0,void 0,function(){var l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,j,I;return Ql(this,function(_){return this.ctx.save(),l=GEe(s,a),c=AQ(s,a),o===2&&(this.path(c),this.ctx.clip()),ud(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),ud(c[1])?(f=c[1].end.x,A=c[1].end.y):(f=c[1].x,A=c[1].y),a===0||a===2?h=Math.abs(u-f):h=Math.abs(d-A),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(c.slice(0,2)),m=n<3?n*3:n*2,p=n<3?n*2:n,o===3&&(m=n,p=n),x=!0,h<=m*2?x=!1:h<=m*2+p?(v=h/(2*m+p),m*=v,p*=v):(y=Math.floor((h+p)/(m+p)),b=(h-y*m)/(y-1),w=(h-(y+1)*m)/y,p=w<=0||Math.abs(p-b)<Math.abs(p-w)?b:w),x&&(o===3?this.ctx.setLineDash([0,m+p]):this.ctx.setLineDash([m,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Oo(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(ud(c[0])&&(j=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new Gr(j.end.x,j.end.y),new Gr(I.start.x,I.start.y)]),this.ctx.stroke()),ud(c[1])&&(j=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new Gr(j.end.x,j.end.y),new Gr(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return uc(this,void 0,void 0,function(){var n;return Ql(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Oo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=VEe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Pte),eSe=function(t){return t instanceof hte||t instanceof fte?!0:t instanceof _6&&t.type!==pS&&t.type!==mS},tSe=function(t,e){switch(t){case 0:return vS(e);case 2:return DEe(e);case 1:default:return yS(e)}},rSe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},nSe=["-apple-system","system-ui"],aSe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return nSe.indexOf(e)===-1}):t},sSe=function(t){bf(e,t);function e(r,n){var a=t.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(r){return uc(this,void 0,void 0,function(){var n,a;return Ql(this,function(s){switch(s.label){case 0:return n=mk(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,iSe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Oo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Pte),iSe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},oSe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,eC([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,eC([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),lSe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new oSe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new IEe(this,e)}return t.instanceCount=1,t}(),jg=function(t,e){return e===void 0&&(e={}),cSe(t,e)};typeof window<"u"&&Cte.setContext(window);var cSe=function(t,e){return uc(void 0,void 0,void 0,function(){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,_,I,_,S,E,F,k,B,D,X,he,Ae,fe,me,ne,Pe,Te,O,K,q;return Ql(this,function(U){switch(U.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(S=e.allowTaint)!==null&&S!==void 0?S:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},s=ek({logging:(k=e.logging)!==null&&k!==void 0?k:!0,cache:e.cache},a),o={windowWidth:(B=e.windowWidth)!==null&&B!==void 0?B:n.innerWidth,windowHeight:(D=e.windowHeight)!==null&&D!==void 0?D:n.innerHeight,scrollX:(X=e.scrollX)!==null&&X!==void 0?X:n.pageXOffset,scrollY:(he=e.scrollY)!==null&&he!==void 0?he:n.pageYOffset},l=new AA(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),c=new lSe(s,l),u=(Ae=e.foreignObjectRendering)!==null&&Ae!==void 0?Ae:!1,d={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),f=new dQ(c,t,d),A=f.clonedReferenceElement,A?[4,f.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=U.sent(),m=E6(A)||dEe(A)?Q2e(A.ownerDocument):Mj(c,A),p=m.width,x=m.height,v=m.left,y=m.top,b=uSe(c,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:b,scale:(ne=(me=e.scale)!==null&&me!==void 0?me:n.devicePixelRatio)!==null&&ne!==void 0?ne:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+v,y:((Te=e.y)!==null&&Te!==void 0?Te:0)+y,width:(O=e.width)!==null&&O!==void 0?O:Math.ceil(p),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(x)},u?(c.logger.debug("Document cloned, using foreign object rendering"),_=new sSe(c,w),[4,_.render(A)]):[3,3];case 2:return j=U.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+v+","+y+" with size "+p+"x"+x+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=pte(c,A),b===I.styles.backgroundColor&&(I.styles.backgroundColor=eA.TRANSPARENT),c.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),_=new ZEe(c,w),[4,_.render(I)];case 4:j=U.sent(),U.label=5;case 5:return(!((q=e.removeContainer)!==null&&q!==void 0)||q)&&(dQ.destroy(h)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,j]}})})},uSe=function(t,e,r){var n=e.ownerDocument,a=n.documentElement?pb(t,getComputedStyle(n.documentElement).backgroundColor):eA.TRANSPARENT,s=n.body?pb(t,getComputedStyle(n.body).backgroundColor):eA.TRANSPARENT,o=typeof r=="string"?pb(t,r):r===null?eA.TRANSPARENT:4294967295;return e===n.documentElement?im(a)?im(s)?o:s:a:o};const S6=Object.freeze(Object.defineProperty({__proto__:null,default:jg},Symbol.toStringTag,{value:"Module"})),dSe="modulepreload",fSe=function(t){return"/"+t},pQ={},tA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=fSe(c),c in pQ)return;pQ[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":dSe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((A,h)=>{f.addEventListener("load",A),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Ka(t){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(t)}var gf=Uint8Array,_u=Uint16Array,I6=Int32Array,j6=new gf([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P6=new gf([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gQ=new gf([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bte=function(t,e){for(var r=new _u(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new I6(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Tte=Bte(j6,2),hSe=Tte.b,wk=Tte.r;hSe[28]=258,wk[258]=28;var ASe=Bte(P6,0),xQ=ASe.r,Nk=new _u(32768);for(var Ss=0;Ss<32768;++Ss){var o0=(Ss&43690)>>1|(Ss&21845)<<1;o0=(o0&52428)>>2|(o0&13107)<<2,o0=(o0&61680)>>4|(o0&3855)<<4,Nk[Ss]=((o0&65280)>>8|(o0&255)<<8)>>1}var yb=function(t,e,r){for(var n=t.length,a=0,s=new _u(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new _u(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new _u(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],f=o[t[a]-1]++<<d,A=f|(1<<d)-1;f<=A;++f)l[Nk[f]>>c]=u}else for(l=new _u(n),a=0;a<n;++a)t[a]&&(l[a]=Nk[o[t[a]-1]++]>>15-t[a]);return l},sg=new gf(288);for(var Ss=0;Ss<144;++Ss)sg[Ss]=8;for(var Ss=144;Ss<256;++Ss)sg[Ss]=9;for(var Ss=256;Ss<280;++Ss)sg[Ss]=7;for(var Ss=280;Ss<288;++Ss)sg[Ss]=8;var wS=new gf(32);for(var Ss=0;Ss<32;++Ss)wS[Ss]=5;var mSe=yb(sg,9,0),pSe=yb(wS,5,0),kte=function(t){return(t+7)/8|0},gSe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new gf(t.subarray(e,r))},wh=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},uy=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Q3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Ote,l:0};if(a==1){var o=new gf(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(j,I){return j.f-I.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var A=s[0].s,n=1;n<a;++n)s[n].s>A&&(A=s[n].s);var h=new _u(A+1),m=Ck(r[d-1],h,0);if(m>e){var n=0,p=0,x=m-e,v=1<<x;for(s.sort(function(I,_){return h[_.s]-h[I.s]||I.f-_.f});n<a;++n){var y=s[n].s;if(h[y]>e)p+=v-(1<<m-h[y]),h[y]=e;else break}for(p>>=x;p>0;){var b=s[n].s;h[b]<e?p-=1<<e-h[b]++-1:++n}for(;n>=0&&p;--n){var w=s[n].s;h[w]==e&&(--h[w],++p)}m=e}return{t:new gf(h),l:m}},Ck=function(t,e,r){return t.s==-1?Math.max(Ck(t.l,e,r+1),Ck(t.r,e,r+1)):e[t.s]=r},vQ=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new _u(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},dy=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Fte=function(t,e,r){var n=r.length,a=kte(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},yQ=function(t,e,r,n,a,s,o,l,c,u,d){wh(e,d++,r),++a[256];for(var f=Q3(a,15),A=f.t,h=f.l,m=Q3(s,15),p=m.t,x=m.l,v=vQ(A),y=v.c,b=v.n,w=vQ(p),j=w.c,I=w.n,_=new _u(19),S=0;S<y.length;++S)++_[y[S]&31];for(var S=0;S<j.length;++S)++_[j[S]&31];for(var E=Q3(_,7),F=E.t,k=E.l,B=19;B>4&&!F[gQ[B-1]];--B);var D=u+5<<3,X=dy(a,sg)+dy(s,wS)+o,he=dy(a,A)+dy(s,p)+o+14+3*B+dy(_,F)+2*_[16]+3*_[17]+7*_[18];if(c>=0&&D<=X&&D<=he)return Fte(e,d,t.subarray(c,c+u));var Ae,fe,me,ne;if(wh(e,d,1+(he<X)),d+=2,he<X){Ae=yb(A,h,0),fe=A,me=yb(p,x,0),ne=p;var Pe=yb(F,k,0);wh(e,d,b-257),wh(e,d+5,I-1),wh(e,d+10,B-4),d+=14;for(var S=0;S<B;++S)wh(e,d+3*S,F[gQ[S]]);d+=3*B;for(var Te=[y,j],O=0;O<2;++O)for(var K=Te[O],S=0;S<K.length;++S){var q=K[S]&31;wh(e,d,Pe[q]),d+=F[q],q>15&&(wh(e,d,K[S]>>5&127),d+=K[S]>>12)}}else Ae=mSe,fe=sg,me=pSe,ne=wS;for(var S=0;S<l;++S){var U=n[S];if(U>255){var q=U>>18&31;uy(e,d,Ae[q+257]),d+=fe[q+257],q>7&&(wh(e,d,U>>23&31),d+=j6[q]);var W=U&31;uy(e,d,me[W]),d+=ne[W],W>3&&(uy(e,d,U>>5&8191),d+=P6[W])}else uy(e,d,Ae[U]),d+=fe[U]}return uy(e,d,Ae[256]),d+fe[256]},xSe=new I6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ote=new gf(0),vSe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new gf(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var f=xSe[e-1],A=f>>13,h=f&8191,m=(1<<r)-1,p=s.p||new _u(32768),x=s.h||new _u(m+1),v=Math.ceil(r/3),y=2*v,b=function(ae){return(t[ae]^t[ae+1]<<v^t[ae+2]<<y)&m},w=new I6(25e3),j=new _u(288),I=new _u(32),_=0,S=0,E=s.i||0,F=0,k=s.w||0,B=0;E+2<o;++E){var D=b(E),X=E&32767,he=x[D];if(p[X]=he,x[D]=X,k<=E){var Ae=o-E;if((_>7e3||F>24576)&&(Ae>423||!u)){d=yQ(t,c,0,w,j,I,S,F,B,E-B,d),F=_=S=0,B=E;for(var fe=0;fe<286;++fe)j[fe]=0;for(var fe=0;fe<30;++fe)I[fe]=0}var me=2,ne=0,Pe=h,Te=X-he&32767;if(Ae>2&&D==b(E-Te))for(var O=Math.min(A,Ae)-1,K=Math.min(32767,E),q=Math.min(258,Ae);Te<=K&&--Pe&&X!=he;){if(t[E+me]==t[E+me-Te]){for(var U=0;U<q&&t[E+U]==t[E+U-Te];++U);if(U>me){if(me=U,ne=Te,U>O)break;for(var W=Math.min(Te,U-2),J=0,fe=0;fe<W;++fe){var M=E-Te+fe&32767,H=p[M],te=M-H&32767;te>J&&(J=te,he=M)}}}X=he,he=p[X],Te+=X-he&32767}if(ne){w[F++]=268435456|wk[me]<<18|xQ[ne];var ve=wk[me]&31,Q=xQ[ne]&31;S+=j6[ve]+P6[Q],++j[257+ve],++I[Q],k=E+me,++_}else w[F++]=t[E],++j[t[E]]}}for(E=Math.max(E,k);E<o;++E)w[F++]=t[E],++j[t[E]];d=yQ(t,c,u,w,j,I,S,F,B,E-B,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=x,s.p=p,s.i=E,s.w=k)}else{for(var E=s.w||0;E<o+u;E+=65535){var Ke=E+65535;Ke>=o&&(c[d/8|0]=u,Ke=o),d=Fte(c,d+1,t.subarray(E,Ke))}s.i=o}return gSe(l,0,n+kte(d)+a)},Dte=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},ySe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new gf(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return vSe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Rte=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},bSe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Dte();a.p(e.dictionary),Rte(t,2,a.d())}};function _k(t,e){e||(e={});var r=Dte();r.p(t);var n=ySe(t,e,e.dictionary?6:2,4);return bSe(n,e),Rte(n,n.length-4,r.d()),n}var wSe=typeof TextDecoder<"u"&&new TextDecoder,NSe=0;try{wSe.decode(Ote,{stream:!0}),NSe=1}catch{}function CSe(t){if(Array.isArray(t))return t}function _Se(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bQ(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function ESe(t,e){if(t){if(typeof t=="string")return bQ(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bQ(t,e):void 0}}function SSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wQ(t,e){return CSe(t)||_Se(t,e)||ESe(t,e)||SSe()}function NQ(t,e="utf8"){return new TextDecoder(e).decode(t)}const ISe=new TextEncoder;function jSe(t){return ISe.encode(t)}const PSe=1024*8,BSe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),V3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class B6{constructor(e=PSe,r={}){Cr(this,"buffer");Cr(this,"byteLength");Cr(this,"byteOffset");Cr(this,"length");Cr(this,"offset");Cr(this,"lastWrittenByte");Cr(this,"littleEndian");Cr(this,"_data");Cr(this,"_mark");Cr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof B6)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=V3[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===BSe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new V3[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new V3[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return NQ(this.readBytes(e))}decodeText(e=1,r="utf8"){return NQ(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(jSe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function h1(t){let e=t.length;for(;--e>=0;)t[e]=0}const TSe=3,kSe=258,Mte=29,FSe=256,OSe=FSe+1+Mte,Lte=30,DSe=512,RSe=new Array((OSe+2)*2);h1(RSe);const MSe=new Array(Lte*2);h1(MSe);const LSe=new Array(DSe);h1(LSe);const USe=new Array(kSe-TSe+1);h1(USe);const QSe=new Array(Mte);h1(QSe);const VSe=new Array(Lte);h1(VSe);const HSe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var Ek=HSe;const $Se=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},GSe=new Uint32Array($Se()),KSe=(t,e,r,n)=>{const a=GSe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var kf=KSe,Sk={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ute={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const qSe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var zSe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)qSe(r,n)&&(t[n]=r[n])}}return t},WSe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},Qte={assign:zSe,flattenChunks:WSe};let Vte=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vte=!1}const w2=new Uint8Array(256);for(let t=0;t<256;t++)w2[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;w2[254]=w2[254]=1;var XSe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const YSe=(t,e)=>{if(e<65534&&t.subarray&&Vte)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var JSe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=w2[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return YSe(s,a)},ZSe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+w2[t[r]]>e?r:e},Ik={string2buf:XSe,buf2string:JSe,utf8border:ZSe};function eIe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tIe=eIe;const NC=16209,rIe=16191;var nIe=function(e,r){let n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E,F;const k=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=k.dmax,u=k.wsize,d=k.whave,f=k.wnext,A=k.window,h=k.hold,m=k.bits,p=k.lencode,x=k.distcode,v=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=p[h&v];t:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w===0)F[s++]=b&65535;else if(w&16){j=b&65535,w&=15,w&&(m<w&&(h+=E[n++]<<m,m+=8),j+=h&(1<<w)-1,h>>>=w,m-=w),m<15&&(h+=E[n++]<<m,m+=8,h+=E[n++]<<m,m+=8),b=x[h&y];r:for(;;){if(w=b>>>24,h>>>=w,m-=w,w=b>>>16&255,w&16){if(I=b&65535,w&=15,m<w&&(h+=E[n++]<<m,m+=8,m<w&&(h+=E[n++]<<m,m+=8)),I+=h&(1<<w)-1,I>c){e.msg="invalid distance too far back",k.mode=NC;break e}if(h>>>=w,m-=w,w=s-o,I>w){if(w=I-w,w>d&&k.sane){e.msg="invalid distance too far back",k.mode=NC;break e}if(_=0,S=A,f===0){if(_+=u-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}else if(f<w){if(_+=u+f-w,w-=f,w<j){j-=w;do F[s++]=A[_++];while(--w);if(_=0,f<j){w=f,j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}}}else if(_+=f-w,w<j){j-=w;do F[s++]=A[_++];while(--w);_=s-I,S=F}for(;j>2;)F[s++]=S[_++],F[s++]=S[_++],F[s++]=S[_++],j-=3;j&&(F[s++]=S[_++],j>1&&(F[s++]=S[_++]))}else{_=s-I;do F[s++]=F[_++],F[s++]=F[_++],F[s++]=F[_++],j-=3;while(j>2);j&&(F[s++]=F[_++],j>1&&(F[s++]=F[_++]))}}else if(w&64){e.msg="invalid distance code",k.mode=NC;break e}else{b=x[(b&65535)+(h&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){k.mode=rIe;break e}else{e.msg="invalid literal/length code",k.mode=NC;break e}else{b=p[(b&65535)+(h&(1<<w)-1)];continue t}break}}while(n<a&&s<l);j=m>>3,n-=j,m-=j<<3,h&=(1<<m)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),k.hold=h,k.bits=m};const ax=15,CQ=852,_Q=592,EQ=0,H3=1,SQ=2,aIe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),sIe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iIe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oIe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lIe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,f=0,A=0,h=0,m=0,p=0,x=0,v=0,y=0,b,w,j,I,_,S=null,E;const F=new Uint16Array(ax+1),k=new Uint16Array(ax+1);let B=null,D,X,he;for(u=0;u<=ax;u++)F[u]=0;for(d=0;d<n;d++)F[e[r+d]]++;for(h=c,A=ax;A>=1&&F[A]===0;A--);if(h>A&&(h=A),A===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(f=1;f<A&&F[f]===0;f++);for(h<f&&(h=f),x=1,u=1;u<=ax;u++)if(x<<=1,x-=F[u],x<0)return-1;if(x>0&&(t===EQ||A!==1))return-1;for(k[1]=0,u=1;u<ax;u++)k[u+1]=k[u]+F[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[k[e[r+d]]++]=d);if(t===EQ?(S=B=o,E=20):t===H3?(S=aIe,B=sIe,E=257):(S=iIe,B=oIe,E=0),y=0,d=0,u=f,_=s,m=h,p=0,j=-1,v=1<<h,I=v-1,t===H3&&v>CQ||t===SQ&&v>_Q)return 1;for(;;){D=u-p,o[d]+1<E?(X=0,he=o[d]):o[d]>=E?(X=B[o[d]-E],he=S[o[d]-E]):(X=96,he=0),b=1<<u-p,w=1<<m,f=w;do w-=b,a[_+(y>>p)+w]=D<<24|X<<16|he|0;while(w!==0);for(b=1<<u-1;y&b;)b>>=1;if(b!==0?(y&=b-1,y+=b):y=0,d++,--F[u]===0){if(u===A)break;u=e[r+o[d]]}if(u>h&&(y&I)!==j){for(p===0&&(p=h),_+=f,m=u-p,x=1<<m;m+p<A&&(x-=F[m+p],!(x<=0));)m++,x<<=1;if(v+=1<<m,t===H3&&v>CQ||t===SQ&&v>_Q)return 1;j=y&I,a[j]=h<<24|m<<16|_-s|0}}return y!==0&&(a[_+y]=u-p<<24|64<<16|0),l.bits=h,0};var bb=lIe;const cIe=0,Hte=1,$te=2,{Z_FINISH:IQ,Z_BLOCK:uIe,Z_TREES:CC,Z_OK:ig,Z_STREAM_END:dIe,Z_NEED_DICT:fIe,Z_STREAM_ERROR:Cd,Z_DATA_ERROR:Gte,Z_MEM_ERROR:Kte,Z_BUF_ERROR:hIe,Z_DEFLATED:jQ}=Ute,zj=16180,PQ=16181,BQ=16182,TQ=16183,kQ=16184,FQ=16185,OQ=16186,DQ=16187,RQ=16188,MQ=16189,NS=16190,Nh=16191,$3=16192,LQ=16193,G3=16194,UQ=16195,QQ=16196,VQ=16197,HQ=16198,_C=16199,EC=16200,$Q=16201,GQ=16202,KQ=16203,qQ=16204,zQ=16205,K3=16206,WQ=16207,XQ=16208,ks=16209,qte=16210,zte=16211,AIe=852,mIe=592,pIe=15,gIe=pIe,YQ=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function xIe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Pg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<zj||e.mode>zte?1:0},Wte=t=>{if(Pg(t))return Cd;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=zj,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(AIe),e.distcode=e.distdyn=new Int32Array(mIe),e.sane=1,e.back=-1,ig},Xte=t=>{if(Pg(t))return Cd;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Wte(t)},Yte=(t,e)=>{let r;if(Pg(t))return Cd;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Cd:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Xte(t))},Jte=(t,e)=>{if(!t)return Cd;const r=new xIe;t.state=r,r.strm=t,r.window=null,r.mode=zj;const n=Yte(t,e);return n!==ig&&(t.state=null),n},vIe=t=>Jte(t,gIe);let JQ=!0,q3,z3;const yIe=t=>{if(JQ){q3=new Int32Array(512),z3=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(bb(Hte,t.lens,0,288,q3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;bb($te,t.lens,0,32,z3,0,t.work,{bits:5}),JQ=!1}t.lencode=q3,t.lenbits=9,t.distcode=z3,t.distbits=5},Zte=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},bIe=(t,e)=>{let r,n,a,s,o,l,c,u,d,f,A,h,m,p,x=0,v,y,b,w,j,I,_,S;const E=new Uint8Array(4);let F,k;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Pg(t)||!t.output||!t.input&&t.avail_in!==0)return Cd;r=t.state,r.mode===Nh&&(r.mode=$3),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,f=l,A=c,S=ig;e:for(;;)switch(r.mode){case zj:if(r.wrap===0){r.mode=$3;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=kf(r.check,E,2,0),u=0,d=0,r.mode=PQ;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ks;break}if((u&15)!==jQ){t.msg="unknown compression method",r.mode=ks;break}if(u>>>=4,d-=4,_=(u&15)+8,r.wbits===0&&(r.wbits=_),_>15||_>r.wbits){t.msg="invalid window size",r.mode=ks;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?MQ:Nh,u=0,d=0;break;case PQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==jQ){t.msg="unknown compression method",r.mode=ks;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ks;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=kf(r.check,E,2,0)),u=0,d=0,r.mode=BQ;case BQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=kf(r.check,E,4,0)),u=0,d=0,r.mode=TQ;case TQ:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=kf(r.check,E,2,0)),u=0,d=0,r.mode=kQ;case kQ:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=kf(r.check,E,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=FQ;case FQ:if(r.flags&1024&&(h=r.length,h>l&&(h=l),h&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+h),_)),r.flags&512&&r.wrap&4&&(r.check=kf(r.check,n,h,s)),l-=h,s+=h,r.length-=h),r.length))break e;r.length=0,r.mode=OQ;case OQ:if(r.flags&2048){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=kf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=DQ;case DQ:if(r.flags&4096){if(l===0)break e;h=0;do _=n[s+h++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&h<l);if(r.flags&512&&r.wrap&4&&(r.check=kf(r.check,n,h,s)),l-=h,s+=h,_)break e}else r.head&&(r.head.comment=null);r.mode=RQ;case RQ:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ks;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Nh;break;case MQ:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=YQ(u),u=0,d=0,r.mode=NS;case NS:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,fIe;t.adler=r.check=1,r.mode=Nh;case Nh:if(e===uIe||e===CC)break e;case $3:if(r.last){u>>>=d&7,d-=d&7,r.mode=K3;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=LQ;break;case 1:if(yIe(r),r.mode=_C,e===CC){u>>>=2,d-=2;break e}break;case 2:r.mode=QQ;break;case 3:t.msg="invalid block type",r.mode=ks}u>>>=2,d-=2;break;case LQ:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ks;break}if(r.length=u&65535,u=0,d=0,r.mode=G3,e===CC)break e;case G3:r.mode=UQ;case UQ:if(h=r.length,h){if(h>l&&(h=l),h>c&&(h=c),h===0)break e;a.set(n.subarray(s,s+h),o),l-=h,s+=h,c-=h,o+=h,r.length-=h;break}r.mode=Nh;break;case QQ:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ks;break}r.have=0,r.mode=VQ;case VQ:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[B[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},S=bb(cIe,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid code lengths set",r.mode=ks;break}r.have=0,r.mode=HQ;case HQ:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(b<16)u>>>=v,d-=v,r.lens[r.have++]=b;else{if(b===16){for(k=v+2;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=v,d-=v,r.have===0){t.msg="invalid bit length repeat",r.mode=ks;break}_=r.lens[r.have-1],h=3+(u&3),u>>>=2,d-=2}else if(b===17){for(k=v+3;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=3+(u&7),u>>>=3,d-=3}else{for(k=v+7;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=v,d-=v,_=0,h=11+(u&127),u>>>=7,d-=7}if(r.have+h>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ks;break}for(;h--;)r.lens[r.have++]=_}}if(r.mode===ks)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ks;break}if(r.lenbits=9,F={bits:r.lenbits},S=bb(Hte,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,S){t.msg="invalid literal/lengths set",r.mode=ks;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},S=bb($te,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,S){t.msg="invalid distances set",r.mode=ks;break}if(r.mode=_C,e===CC)break e;case _C:r.mode=EC;case EC:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,nIe(t,A),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===Nh&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(y&&!(y&240)){for(w=v,j=y,I=b;x=r.lencode[I+((u&(1<<w+j)-1)>>w)],v=x>>>24,y=x>>>16&255,b=x&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,r.length=b,y===0){r.mode=zQ;break}if(y&32){r.back=-1,r.mode=Nh;break}if(y&64){t.msg="invalid literal/length code",r.mode=ks;break}r.extra=y&15,r.mode=$Q;case $Q:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=GQ;case GQ:for(;x=r.distcode[u&(1<<r.distbits)-1],v=x>>>24,y=x>>>16&255,b=x&65535,!(v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(y&240)){for(w=v,j=y,I=b;x=r.distcode[I+((u&(1<<w+j)-1)>>w)],v=x>>>24,y=x>>>16&255,b=x&65535,!(w+v<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=w,d-=w,r.back+=w}if(u>>>=v,d-=v,r.back+=v,y&64){t.msg="invalid distance code",r.mode=ks;break}r.offset=b,r.extra=y&15,r.mode=KQ;case KQ:if(r.extra){for(k=r.extra;d<k;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ks;break}r.mode=qQ;case qQ:if(c===0)break e;if(h=A-c,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ks;break}h>r.wnext?(h-=r.wnext,m=r.wsize-h):m=r.wnext-h,h>r.length&&(h=r.length),p=r.window}else p=a,m=o-r.offset,h=r.length;h>c&&(h=c),c-=h,r.length-=h;do a[o++]=p[m++];while(--h);r.length===0&&(r.mode=EC);break;case zQ:if(c===0)break e;a[o++]=r.length,c--,r.mode=EC;break;case K3:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(A-=c,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?kf(r.check,a,A,o-A):Ek(r.check,a,A,o-A)),A=c,r.wrap&4&&(r.flags?u:YQ(u))!==r.check){t.msg="incorrect data check",r.mode=ks;break}u=0,d=0}r.mode=WQ;case WQ:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ks;break}u=0,d=0}r.mode=XQ;case XQ:S=dIe;break e;case ks:S=Gte;break e;case qte:return Kte;case zte:default:return Cd}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||A!==t.avail_out&&r.mode<ks&&(r.mode<K3||e!==IQ))&&Zte(t,t.output,t.next_out,A-t.avail_out),f-=t.avail_in,A-=t.avail_out,t.total_in+=f,t.total_out+=A,r.total+=A,r.wrap&4&&A&&(t.adler=r.check=r.flags?kf(r.check,a,A,t.next_out-A):Ek(r.check,a,A,t.next_out-A)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Nh?128:0)+(r.mode===_C||r.mode===G3?256:0),(f===0&&A===0||e===IQ)&&S===ig&&(S=hIe),S},wIe=t=>{if(Pg(t))return Cd;let e=t.state;return e.window&&(e.window=null),t.state=null,ig},NIe=(t,e)=>{if(Pg(t))return Cd;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,ig):Cd},CIe=(t,e)=>{const r=e.length;let n,a,s;return Pg(t)||(n=t.state,n.wrap!==0&&n.mode!==NS)?Cd:n.mode===NS&&(a=1,a=Ek(a,e,r,0),a!==n.check)?Gte:(s=Zte(t,e,r,r),s?(n.mode=qte,Kte):(n.havedict=1,ig))};var _Ie=Xte,EIe=Yte,SIe=Wte,IIe=vIe,jIe=Jte,PIe=bIe,BIe=wIe,TIe=NIe,kIe=CIe,FIe="pako inflate (from Nodeca project)",Oh={inflateReset:_Ie,inflateReset2:EIe,inflateResetKeep:SIe,inflateInit:IIe,inflateInit2:jIe,inflate:PIe,inflateEnd:BIe,inflateGetHeader:TIe,inflateSetDictionary:kIe,inflateInfo:FIe};function OIe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var DIe=OIe;const ere=Object.prototype.toString,{Z_NO_FLUSH:RIe,Z_FINISH:MIe,Z_OK:N2,Z_STREAM_END:W3,Z_NEED_DICT:X3,Z_STREAM_ERROR:LIe,Z_DATA_ERROR:ZQ,Z_MEM_ERROR:UIe}=Ute;function Pw(t){this.options=Qte.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tIe,this.strm.avail_out=0;let r=Oh.inflateInit2(this.strm,e.windowBits);if(r!==N2)throw new Error(Sk[r]);if(this.header=new DIe,Oh.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ik.string2buf(e.dictionary):ere.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Oh.inflateSetDictionary(this.strm,e.dictionary),r!==N2)))throw new Error(Sk[r])}Pw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?MIe:RIe,ere.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Oh.inflate(r,o),s===X3&&a&&(s=Oh.inflateSetDictionary(r,a),s===N2?s=Oh.inflate(r,o):s===ZQ&&(s=X3));r.avail_in>0&&s===W3&&r.state.wrap>0&&t[r.next_in]!==0;)Oh.inflateReset(r),s=Oh.inflate(r,o);switch(s){case LIe:case ZQ:case X3:case UIe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===W3))if(this.options.to==="string"){let c=Ik.utf8border(r.output,r.next_out),u=r.next_out-c,d=Ik.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===N2&&l===0)){if(s===W3)return s=Oh.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Pw.prototype.onData=function(t){this.chunks.push(t)};Pw.prototype.onEnd=function(t){t===N2&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Qte.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function QIe(t,e){const r=new Pw(e);if(r.push(t),r.err)throw r.msg||Sk[r.err];return r.result}var VIe=Pw,HIe=QIe,$Ie={Inflate:VIe,inflate:HIe};const{Inflate:GIe,inflate:KIe}=$Ie;var eV=GIe,qIe=KIe;const tre=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;tre[t]=e}const tV=4294967295;function zIe(t,e,r){let n=t;for(let a=0;a<r;a++)n=tre[(n^e[a])&255]^n>>>8;return n}function WIe(t,e){return(zIe(tV,t,e)^tV)>>>0}function rV(t,e,r){const n=t.readUint32(),a=WIe(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function rre(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function nre(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function are(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function sre(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function ire(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+XIe(e[s-a],r[s],r[s-a])&255}}function XIe(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function YIe(t,e,r,n,a,s){switch(t){case 0:rre(e,r,a);break;case 1:nre(e,r,a,s);break;case 2:are(e,r,n,a);break;case 3:sre(e,r,n,a,s);break;case 4:ire(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const JIe=new Uint16Array([255]),ZIe=new Uint8Array(JIe.buffer),eje=ZIe[0]===255;function tje(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const f=o[d],A=Math.ceil((r-f.x)/f.xStep),h=Math.ceil((n-f.y)/f.yStep);if(A<=0||h<=0)continue;const m=A*l,p=new Uint8Array(m);for(let x=0;x<h;x++){const v=e[u++],y=e.subarray(u,u+m);u+=m;const b=new Uint8Array(m);YIe(v,y,b,p,m,l),p.set(b);for(let w=0;w<A;w++){const j=f.x+w*f.xStep,I=f.y+x*f.yStep;if(!(j>=r||I>=n))for(let _=0;_<l;_++)c[(I*r+j)*l+_]=b[w*l+_]}}}if(s===16){const d=new Uint16Array(c.buffer);if(eje)for(let f=0;f<d.length;f++)d[f]=rje(d[f]);return d}else return c}function rje(t){return(t&255)<<8|t>>8&255}const nje=new Uint16Array([255]),aje=new Uint8Array(nje.buffer),sje=aje[0]===255,ije=new Uint8Array(0);function nV(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=ije,d=0,f,A;for(let h=0;h<n;h++){switch(f=e.subarray(d+1,d+1+l),A=c.subarray(h*l,(h+1)*l),e[d]){case 0:rre(f,A,l);break;case 1:nre(f,A,l,o);break;case 2:are(f,A,u,l);break;case 3:sre(f,A,u,l,o);break;case 4:ire(f,A,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=A,d+=l+1}if(s===16){const h=new Uint16Array(c.buffer);if(sje)for(let m=0;m<h.length;m++)h[m]=oje(h[m]);return h}else return c}function oje(t){return(t&255)<<8|t>>8&255}const iE=Uint8Array.of(137,80,78,71,13,10,26,10);function aV(t){if(!lje(t.readBytes(iE.length)))throw new Error("wrong PNG signature")}function lje(t){if(t.length<iE.length)return!1;for(let e=0;e<iE.length;e++)if(t[e]!==iE[e])return!1;return!0}const cje="tEXt",uje=0,ore=new TextDecoder("latin1");function dje(t){if(hje(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const fje=/^[\u0000-\u00FF]*$/;function hje(t){if(!fje.test(t))throw new Error("invalid latin1 text")}function Aje(t,e,r){const n=lre(e);t[n]=mje(e,r-n.length-1)}function lre(t){for(t.mark();t.readByte()!==uje;);const e=t.offset;t.reset();const r=ore.decode(t.readBytes(e-t.offset-1));return t.skip(1),dje(r),r}function mje(t,e){return ore.decode(t.readBytes(e))}const fu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Y3={UNKNOWN:-1,DEFLATE:0},sV={UNKNOWN:-1,ADAPTIVE:0},J3={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},SC={NONE:0,BACKGROUND:1,PREVIOUS:2},Z3={SOURCE:0,OVER:1};class pje extends B6{constructor(r,n={}){super(r);Cr(this,"_checkCrc");Cr(this,"_inflator");Cr(this,"_png");Cr(this,"_apng");Cr(this,"_end");Cr(this,"_hasPalette");Cr(this,"_palette");Cr(this,"_hasTransparency");Cr(this,"_transparency");Cr(this,"_compressionMethod");Cr(this,"_filterMethod");Cr(this,"_interlaceMethod");Cr(this,"_colorType");Cr(this,"_isAnimated");Cr(this,"_numberOfFrames");Cr(this,"_numberOfPlays");Cr(this,"_frames");Cr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new eV,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Y3.UNKNOWN,this._filterMethod=sV.UNKNOWN,this._interlaceMethod=J3.UNKNOWN,this._colorType=fu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(aV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(aV(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case cje:Aje(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?rV(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?rV(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=gje(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case fu.GREYSCALE:a=1;break;case fu.TRUECOLOUR:a=3;break;case fu.INDEXED_COLOUR:a=1;break;case fu.GREYSCALE_ALPHA:a=2;break;case fu.TRUECOLOUR_ALPHA:a=4;break;case fu.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==Y3.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fu.GREYSCALE:case fu.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case fu.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fu.UNKNOWN:case fu.GREYSCALE_ALPHA:case fu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=lre(this),a=this.readUint8();if(a!==Y3.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:qIe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=nV({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case SC.NONE:break;case SC.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case SC.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case Z3.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case Z3.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const f=n.data[u+this._png.channels-1]/a,A=d%(this._png.channels-1)===0?1:n.data[u+d],h=Math.floor(f*A+(1-f)*r.data[c+d]);r.data[c+d]+=h}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==sV.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===J3.NO_INTERLACE)this._png.data=nV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===J3.ADAM7)this._png.data=tje({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:SC.NONE,blendOp:Z3.SOURCE,data:r}),this._inflator=new eV,this._writingDataChunks=!1}}function gje(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var iV;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(iV||(iV={}));function xje(t,e){return new pje(t,e).decode()}var jn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function e5(){jn.console&&typeof jn.console.log=="function"&&jn.console.log.apply(jn.console,arguments)}var is={log:e5,warn:function(t){jn.console&&(typeof jn.console.warn=="function"?jn.console.warn.apply(jn.console,arguments):e5.call(null,arguments))},error:function(t){jn.console&&(typeof jn.console.error=="function"?jn.console.error.apply(jn.console,arguments):e5(t))}};function t5(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ap(n.response,e,r)},n.onerror=function(){is.error("could not download file")},n.send()}function oV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function IC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ap=jn.saveAs||((typeof window>"u"?"undefined":Ka(window))!=="object"||window!==jn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=jn.URL||jn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?oV(a.href)?t5(t,e,r):IC(a,a.target="_blank"):IC(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){IC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(oV(t))t5(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){IC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Ka(s)!=="object"&&(is.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return t5(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(jn.HTMLElement)||jn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Ka(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=jn.URL||jn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cre(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var oE=jn.atob.bind(jn),lV=jn.btoa.bind(jn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function r5(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Tl(r,n,a,s,e[0],7,-680876936),s=Tl(s,r,n,a,e[1],12,-389564586),a=Tl(a,s,r,n,e[2],17,606105819),n=Tl(n,a,s,r,e[3],22,-1044525330),r=Tl(r,n,a,s,e[4],7,-176418897),s=Tl(s,r,n,a,e[5],12,1200080426),a=Tl(a,s,r,n,e[6],17,-1473231341),n=Tl(n,a,s,r,e[7],22,-45705983),r=Tl(r,n,a,s,e[8],7,1770035416),s=Tl(s,r,n,a,e[9],12,-1958414417),a=Tl(a,s,r,n,e[10],17,-42063),n=Tl(n,a,s,r,e[11],22,-1990404162),r=Tl(r,n,a,s,e[12],7,1804603682),s=Tl(s,r,n,a,e[13],12,-40341101),a=Tl(a,s,r,n,e[14],17,-1502002290),r=kl(r,n=Tl(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=kl(s,r,n,a,e[6],9,-1069501632),a=kl(a,s,r,n,e[11],14,643717713),n=kl(n,a,s,r,e[0],20,-373897302),r=kl(r,n,a,s,e[5],5,-701558691),s=kl(s,r,n,a,e[10],9,38016083),a=kl(a,s,r,n,e[15],14,-660478335),n=kl(n,a,s,r,e[4],20,-405537848),r=kl(r,n,a,s,e[9],5,568446438),s=kl(s,r,n,a,e[14],9,-1019803690),a=kl(a,s,r,n,e[3],14,-187363961),n=kl(n,a,s,r,e[8],20,1163531501),r=kl(r,n,a,s,e[13],5,-1444681467),s=kl(s,r,n,a,e[2],9,-51403784),a=kl(a,s,r,n,e[7],14,1735328473),r=Fl(r,n=kl(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Fl(s,r,n,a,e[8],11,-2022574463),a=Fl(a,s,r,n,e[11],16,1839030562),n=Fl(n,a,s,r,e[14],23,-35309556),r=Fl(r,n,a,s,e[1],4,-1530992060),s=Fl(s,r,n,a,e[4],11,1272893353),a=Fl(a,s,r,n,e[7],16,-155497632),n=Fl(n,a,s,r,e[10],23,-1094730640),r=Fl(r,n,a,s,e[13],4,681279174),s=Fl(s,r,n,a,e[0],11,-358537222),a=Fl(a,s,r,n,e[3],16,-722521979),n=Fl(n,a,s,r,e[6],23,76029189),r=Fl(r,n,a,s,e[9],4,-640364487),s=Fl(s,r,n,a,e[12],11,-421815835),a=Fl(a,s,r,n,e[15],16,530742520),r=Ol(r,n=Fl(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Ol(s,r,n,a,e[7],10,1126891415),a=Ol(a,s,r,n,e[14],15,-1416354905),n=Ol(n,a,s,r,e[5],21,-57434055),r=Ol(r,n,a,s,e[12],6,1700485571),s=Ol(s,r,n,a,e[3],10,-1894986606),a=Ol(a,s,r,n,e[10],15,-1051523),n=Ol(n,a,s,r,e[1],21,-2054922799),r=Ol(r,n,a,s,e[8],6,1873313359),s=Ol(s,r,n,a,e[15],10,-30611744),a=Ol(a,s,r,n,e[6],15,-1560198380),n=Ol(n,a,s,r,e[13],21,1309151649),r=Ol(r,n,a,s,e[4],6,-145523070),s=Ol(s,r,n,a,e[11],10,-1120210379),a=Ol(a,s,r,n,e[2],15,718787259),n=Ol(n,a,s,r,e[9],21,-343485551),t[0]=H0(r,t[0]),t[1]=H0(n,t[1]),t[2]=H0(a,t[2]),t[3]=H0(s,t[3])}function Wj(t,e,r,n,a,s){return e=H0(H0(e,t),H0(n,s)),H0(e<<a|e>>>32-a,r)}function Tl(t,e,r,n,a,s,o){return Wj(e&r|~e&n,t,e,a,s,o)}function kl(t,e,r,n,a,s,o){return Wj(e&n|r&~n,t,e,a,s,o)}function Fl(t,e,r,n,a,s,o){return Wj(e^r^n,t,e,a,s,o)}function Ol(t,e,r,n,a,s,o){return Wj(r^(e|~n),t,e,a,s,o)}function ure(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)r5(n,vje(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(r5(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,r5(n,a),n}function vje(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var cV="0123456789abcdef".split("");function yje(t){for(var e="",r=0;r<4;r++)e+=cV[t>>8*r+4&15]+cV[t>>8*r&15];return e}function bje(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function jk(t){return ure(t).map(bje).join("")}var wje=function(t){for(var e=0;e<t.length;e++)t[e]=yje(t[e]);return t.join("")}(ure("hello"))!="5d41402abc4b2a76b9719d911017c592";function H0(t,e){if(wje){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Pk(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var f=e.length,A=0,h=0,m="";for(c=0;c<f;c++)h=(h+(d=l[A=(A+1)%256]))%256,l[A]=l[h],l[h]=d,o=l[(l[A]+l[h])%256],m+=String.fromCharCode(e.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var uV={print:4,modify:8,copy:16,"annot-forms":32};function Sx(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(uV.perm!==void 0)throw new Error("Invalid permission: "+l);a+=uV[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=jk(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Pk(this.encryptionKey,this.padding)}function Ix(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function dV(t){if(Ka(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){jn.console&&is.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function C2(t){if(!(this instanceof C2))return new C2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function dre(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function F0(t,e,r,n,a){if(!(this instanceof F0))return new F0(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,dre.call(this,n,a)}function yp(t,e,r,n,a){if(!(this instanceof yp))return new yp(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,dre.call(this,n,a)}function qr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Ka(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=t.putOnlyUsedFonts||!1,A={},h={internal:{},__private__:{}};h.__private__.PubSub=dV;var m="1.3",p=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(V){m=V};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var v=h.__private__.getPageFormat=function(V){return x[V]};a=a||"a4";var y="compat",b="advanced",w=y;function j(){this.saveGraphicsState(),ee(new _e(oe,0,0,-oe,0,Mu()*oe).toString()+" cm"),this.setFontSize(this.getFontSize()/oe),u="n",w=b}function I(){this.restoreGraphicsState(),u="S",w=y}var _=h.__private__.combineFontStyleAndFontWeight=function(V,Ee){if(V=="bold"&&Ee=="normal"||V=="bold"&&Ee==400||V=="normal"&&Ee=="italic"||V=="bold"&&Ee=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ee&&(V=Ee==400||Ee==="normal"?V==="italic"?"italic":"normal":Ee!=700&&Ee!=="bold"||V!=="normal"?(Ee==700?"bold":Ee)+""+V:"bold"),V};h.advancedAPI=function(V){var Ee=w===y;return Ee&&j.call(this),typeof V!="function"||(V(this),Ee&&I.call(this)),this},h.compatAPI=function(V){var Ee=w===b;return Ee&&I.call(this),typeof V!="function"||(V(this),Ee&&j.call(this)),this},h.isAdvancedAPI=function(){return w===b};var S,E=function(V){if(w!==b)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=h.roundToPrecision=h.__private__.roundToPrecision=function(V,Ee){var lt=e||Ee;if(isNaN(V)||isNaN(lt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(lt).replace(/0+$/,"")};S=h.hpf=h.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return F(V,16)};var k=h.f2=h.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return F(V,2)},B=h.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return F(V,3)},D=h.scale=h.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?V*oe:w===b?V:void 0},X=function(V){return D(function(Ee){return w===y?Mu()-Ee:w===b?Ee:void 0}(V))};h.__private__.setPrecision=h.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(e=parseInt(V,10))};var he,Ae="00000000000000000000000000000000",fe=h.__private__.getFileId=function(){return Ae},me=h.__private__.setFileId=function(V){return Ae=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(je=new Sx(d.userPermissions,d.userPassword,d.ownerPassword,Ae)),Ae};h.setFileId=function(V){return me(V),this},h.getFileId=function(){return fe()};var ne=h.__private__.convertDateToPDFDate=function(V){var Ee=V.getTimezoneOffset(),lt=Ee<0?"+":"-",bt=Math.floor(Math.abs(Ee/60)),Tt=Math.abs(Ee%60),fr=[lt,q(bt),"'",q(Tt),"'"].join("");return["D:",V.getFullYear(),q(V.getMonth()+1),q(V.getDate()),q(V.getHours()),q(V.getMinutes()),q(V.getSeconds()),fr].join("")},Pe=h.__private__.convertPDFDateToDate=function(V){var Ee=parseInt(V.substr(2,4),10),lt=parseInt(V.substr(6,2),10)-1,bt=parseInt(V.substr(8,2),10),Tt=parseInt(V.substr(10,2),10),fr=parseInt(V.substr(12,2),10),gr=parseInt(V.substr(14,2),10);return new Date(Ee,lt,bt,Tt,fr,gr,0)},Te=h.__private__.setCreationDate=function(V){var Ee;if(V===void 0&&(V=new Date),V instanceof Date)Ee=ne(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ee=V}return he=Ee},O=h.__private__.getCreationDate=function(V){var Ee=he;return V==="jsDate"&&(Ee=Pe(he)),Ee};h.setCreationDate=function(V){return Te(V),this},h.getCreationDate=function(V){return O(V)};var K,q=h.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},U=h.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},W=0,J=[],M=[],H=0,te=[],ve=[],Q=!1,Ke=M;h.__private__.setCustomOutputDestination=function(V){Q=!0,Ke=V};var ae=function(V){Q||(Ke=V)};h.__private__.resetCustomOutputDestination=function(){Q=!1,Ke=M};var ee=h.__private__.out=function(V){return V=V.toString(),H+=V.length+1,Ke.push(V),Ke},Fe=h.__private__.write=function(V){return ee(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},ce=h.__private__.getArrayBuffer=function(V){for(var Ee=V.length,lt=new ArrayBuffer(Ee),bt=new Uint8Array(lt);Ee--;)bt[Ee]=V.charCodeAt(Ee);return lt},be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return be};var Ve=t.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(V){return Ve=w===b?V/oe:V,this};var We,pt=h.__private__.getFontSize=h.getFontSize=function(){return w===y?Ve:Ve*oe},wt=t.R2L||!1;h.__private__.setR2L=h.setR2L=function(V){return wt=V,this},h.__private__.getR2L=h.getR2L=function(){return wt};var Ct,St=h.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))We=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');We=V}else We=parseInt(V,10)};h.__private__.getZoomMode=function(){return We};var Rt,jt=h.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Ct=V};h.__private__.getPageMode=function(){return Ct};var Ue=h.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Rt=V};h.__private__.getLayoutMode=function(){return Rt},h.__private__.setDisplayMode=h.setDisplayMode=function(V,Ee,lt){return St(V),Ue(Ee),jt(lt),this};var Be={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(V){if(Object.keys(Be).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Be[V]},h.__private__.getDocumentProperties=function(){return Be},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(V){for(var Ee in Be)Be.hasOwnProperty(Ee)&&V[Ee]&&(Be[Ee]=V[Ee]);return this},h.__private__.setDocumentProperty=function(V,Ee){if(Object.keys(Be).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Be[V]=Ee};var ye,oe,Z,Ne,Re,ge={},Xe={},vt=[],it={},de={},Ce={},Ye={},ft=null,we=0,Le=[],gt=new dV(h),Ut=t.hotfixes||[],Mt={},Yt={},st=[],_e=function V(Ee,lt,bt,Tt,fr,gr){if(!(this instanceof V))return new V(Ee,lt,bt,Tt,fr,gr);isNaN(Ee)&&(Ee=1),isNaN(lt)&&(lt=0),isNaN(bt)&&(bt=0),isNaN(Tt)&&(Tt=1),isNaN(fr)&&(fr=0),isNaN(gr)&&(gr=0),this._matrix=[Ee,lt,bt,Tt,fr,gr]};Object.defineProperty(_e.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(_e.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(_e.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(_e.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(_e.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(_e.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(_e.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(_e.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(_e.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(_e.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(_e.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(_e.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(_e.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(_e.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(_e.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(_e.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),_e.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(V)},_e.prototype.multiply=function(V){var Ee=V.sx*this.sx+V.shy*this.shx,lt=V.sx*this.shy+V.shy*this.sy,bt=V.shx*this.sx+V.sy*this.shx,Tt=V.shx*this.shy+V.sy*this.sy,fr=V.tx*this.sx+V.ty*this.shx+this.tx,gr=V.tx*this.shy+V.ty*this.sy+this.ty;return new _e(Ee,lt,bt,Tt,fr,gr)},_e.prototype.decompose=function(){var V=this.sx,Ee=this.shy,lt=this.shx,bt=this.sy,Tt=this.tx,fr=this.ty,gr=Math.sqrt(V*V+Ee*Ee),zr=(V/=gr)*lt+(Ee/=gr)*bt;lt-=V*zr,bt-=Ee*zr;var rn=Math.sqrt(lt*lt+bt*bt);return zr/=rn,V*(bt/=rn)<Ee*(lt/=rn)&&(V=-V,Ee=-Ee,zr=-zr,gr=-gr),{scale:new _e(gr,0,0,rn,0,0),translate:new _e(1,0,0,1,Tt,fr),rotate:new _e(V,Ee,-Ee,V,0,0),skew:new _e(1,0,zr,1,0,0)}},_e.prototype.toString=function(V){return this.join(" ")},_e.prototype.inversed=function(){var V=this.sx,Ee=this.shy,lt=this.shx,bt=this.sy,Tt=this.tx,fr=this.ty,gr=1/(V*bt-Ee*lt),zr=bt*gr,rn=-Ee*gr,bn=-lt*gr,kn=V*gr;return new _e(zr,rn,bn,kn,-zr*Tt-bn*fr,-rn*Tt-kn*fr)},_e.prototype.applyToPoint=function(V){var Ee=V.x*this.sx+V.y*this.shx+this.tx,lt=V.x*this.shy+V.y*this.sy+this.ty;return new jc(Ee,lt)},_e.prototype.applyToRectangle=function(V){var Ee=this.applyToPoint(V),lt=this.applyToPoint(new jc(V.x+V.w,V.y+V.h));return new _f(Ee.x,Ee.y,lt.x-Ee.x,lt.y-Ee.y)},_e.prototype.clone=function(){var V=this.sx,Ee=this.shy,lt=this.shx,bt=this.sy,Tt=this.tx,fr=this.ty;return new _e(V,Ee,lt,bt,Tt,fr)},h.Matrix=_e;var xe=h.matrixMult=function(V,Ee){return Ee.multiply(V)},ie=new _e(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=ie;var Oe=function(V,Ee){if(!de[V]){var lt=(Ee instanceof F0?"Sh":"P")+(Object.keys(it).length+1).toString(10);Ee.id=lt,de[V]=lt,it[lt]=Ee,gt.publish("addPattern",Ee)}};h.ShadingPattern=F0,h.TilingPattern=yp,h.addShadingPattern=function(V,Ee){return E("addShadingPattern()"),Oe(V,Ee),this},h.beginTilingPattern=function(V){E("beginTilingPattern()"),el(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},h.endTilingPattern=function(V,Ee){E("endTilingPattern()"),Ee.stream=ve[K].join(`
`),Oe(V,Ee),gt.publish("endTilingPattern",Ee),st.pop().restore()};var le,De=h.__private__.newObject=function(){var V=He();return P(V,!0),V},He=h.__private__.newObjectDeferred=function(){return W++,J[W]=function(){return H},W},P=function(V,Ee){return Ee=typeof Ee=="boolean"&&Ee,J[V]=H,Ee&&ee(V+" 0 obj"),V},R=h.__private__.newAdditionalObject=function(){var V={objId:He(),content:""};return te.push(V),V},L=He(),G=He(),re=h.__private__.decodeColorString=function(V){var Ee=V.split(" ");if(Ee.length!==2||Ee[1]!=="g"&&Ee[1]!=="G")Ee.length!==5||Ee[4]!=="k"&&Ee[4]!=="K"||(Ee=[(1-Ee[0])*(1-Ee[3]),(1-Ee[1])*(1-Ee[3]),(1-Ee[2])*(1-Ee[3]),"r"]);else{var lt=parseFloat(Ee[0]);Ee=[lt,lt,lt,"r"]}for(var bt="#",Tt=0;Tt<3;Tt++)bt+=("0"+Math.floor(255*parseFloat(Ee[Tt])).toString(16)).slice(-2);return bt},ue=h.__private__.encodeColorString=function(V){var Ee;typeof V=="string"&&(V={ch1:V});var lt=V.ch1,bt=V.ch2,Tt=V.ch3,fr=V.ch4,gr=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof lt=="string"&&lt.charAt(0)!=="#"){var zr=new cre(lt);if(zr.ok)lt=zr.toHex();else if(!/^\d*\.?\d*$/.test(lt))throw new Error('Invalid color "'+lt+'" passed to jsPDF.encodeColorString.')}if(typeof lt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(lt)&&(lt="#"+lt[1]+lt[1]+lt[2]+lt[2]+lt[3]+lt[3]),typeof lt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(lt)){var rn=parseInt(lt.substr(1),16);lt=rn>>16&255,bt=rn>>8&255,Tt=255&rn}if(bt===void 0||fr===void 0&&lt===bt&&bt===Tt)Ee=typeof lt=="string"?lt+" "+gr[0]:V.precision===2?k(lt/255)+" "+gr[0]:B(lt/255)+" "+gr[0];else if(fr===void 0||Ka(fr)==="object"){if(fr&&!isNaN(fr.a)&&fr.a===0)return["1.","1.","1.",gr[1]].join(" ");Ee=typeof lt=="string"?[lt,bt,Tt,gr[1]].join(" "):V.precision===2?[k(lt/255),k(bt/255),k(Tt/255),gr[1]].join(" "):[B(lt/255),B(bt/255),B(Tt/255),gr[1]].join(" ")}else Ee=typeof lt=="string"?[lt,bt,Tt,fr,gr[2]].join(" "):V.precision===2?[k(lt),k(bt),k(Tt),k(fr),gr[2]].join(" "):[B(lt),B(bt),B(Tt),B(fr),gr[2]].join(" ");return Ee},$e=h.__private__.getFilters=function(){return o},rt=h.__private__.putStream=function(V){var Ee=(V=V||{}).data||"",lt=V.filters||$e(),bt=V.alreadyAppliedFilters||[],Tt=V.addLength1||!1,fr=Ee.length,gr=V.objectId,zr=function(di){return di};if(d!==null&&gr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(zr=je.encryptor(gr,0));var rn={};lt===!0&&(lt=["FlateEncode"]);var bn=V.additionalKeyValues||[],kn=(rn=qr.API.processDataByFilters!==void 0?qr.API.processDataByFilters(Ee,lt):{data:Ee,reverseChain:[]}).reverseChain+(Array.isArray(bt)?bt.join(" "):bt.toString());if(rn.data.length!==0&&(bn.push({key:"Length",value:rn.data.length}),Tt===!0&&bn.push({key:"Length1",value:fr})),kn.length!=0)if(kn.split("/").length-1==1)bn.push({key:"Filter",value:kn});else{bn.push({key:"Filter",value:"["+kn+"]"});for(var ra=0;ra<bn.length;ra+=1)if(bn[ra].key==="DecodeParms"){for(var Ea=[],Ks=0;Ks<rn.reverseChain.split("/").length-1;Ks+=1)Ea.push("null");Ea.push(bn[ra].value),bn[ra].value="["+Ea.join(" ")+"]"}}ee("<<");for(var Oa=0;Oa<bn.length;Oa++)ee("/"+bn[Oa].key+" "+bn[Oa].value);ee(">>"),rn.data.length!==0&&(ee("stream"),ee(zr(rn.data)),ee("endstream"))},At=h.__private__.putPage=function(V){var Ee=V.number,lt=V.data,bt=V.objId,Tt=V.contentsObjId;P(bt,!0),ee("<</Type /Page"),ee("/Parent "+V.rootDictionaryObjId+" 0 R"),ee("/Resources "+V.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(S(V.mediaBox.bottomLeftX))+" "+parseFloat(S(V.mediaBox.bottomLeftY))+" "+S(V.mediaBox.topRightX)+" "+S(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&ee("/CropBox ["+S(V.cropBox.bottomLeftX)+" "+S(V.cropBox.bottomLeftY)+" "+S(V.cropBox.topRightX)+" "+S(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&ee("/BleedBox ["+S(V.bleedBox.bottomLeftX)+" "+S(V.bleedBox.bottomLeftY)+" "+S(V.bleedBox.topRightX)+" "+S(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&ee("/TrimBox ["+S(V.trimBox.bottomLeftX)+" "+S(V.trimBox.bottomLeftY)+" "+S(V.trimBox.topRightX)+" "+S(V.trimBox.topRightY)+"]"),V.artBox!==null&&ee("/ArtBox ["+S(V.artBox.bottomLeftX)+" "+S(V.artBox.bottomLeftY)+" "+S(V.artBox.topRightX)+" "+S(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&ee("/UserUnit "+V.userUnit),gt.publish("putPage",{objId:bt,pageContext:Le[Ee],pageNumber:Ee,page:lt}),ee("/Contents "+Tt+" 0 R"),ee(">>"),ee("endobj");var fr=lt.join(`
`);return w===b&&(fr+=`
Q`),P(Tt,!0),rt({data:fr,filters:$e(),objectId:Tt}),ee("endobj"),bt},Je=h.__private__.putPages=function(){var V,Ee,lt=[];for(V=1;V<=we;V++)Le[V].objId=He(),Le[V].contentsObjId=He();for(V=1;V<=we;V++)lt.push(At({number:V,data:ve[V],objId:Le[V].objId,contentsObjId:Le[V].contentsObjId,mediaBox:Le[V].mediaBox,cropBox:Le[V].cropBox,bleedBox:Le[V].bleedBox,trimBox:Le[V].trimBox,artBox:Le[V].artBox,userUnit:Le[V].userUnit,rootDictionaryObjId:L,resourceDictionaryObjId:G}));P(L,!0),ee("<</Type /Pages");var bt="/Kids [";for(Ee=0;Ee<we;Ee++)bt+=lt[Ee]+" 0 R ";ee(bt+"]"),ee("/Count "+we),ee(">>"),ee("endobj"),gt.publish("postPutPages")},ht=function(V){gt.publish("putFont",{font:V,out:ee,newObject:De,putStream:rt}),V.isAlreadyPutted!==!0&&(V.objectNumber=De(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Ix(V.postScriptName)),ee("/Subtype /Type1"),typeof V.encoding=="string"&&ee("/Encoding /"+V.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Ot=function(V){V.objectNumber=De();var Ee=[];Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Form"}),Ee.push({key:"BBox",value:"["+[S(V.x),S(V.y),S(V.x+V.width),S(V.y+V.height)].join(" ")+"]"}),Ee.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var lt=V.pages[1].join(`
`);rt({data:lt,additionalKeyValues:Ee,objectId:V.objectNumber}),ee("endobj")},Se=function(V,Ee){Ee||(Ee=21);var lt=De(),bt=function(gr,zr){var rn,bn=[],kn=1/(zr-1);for(rn=0;rn<1;rn+=kn)bn.push(rn);if(bn.push(1),gr[0].offset!=0){var ra={offset:0,color:gr[0].color};gr.unshift(ra)}if(gr[gr.length-1].offset!=1){var Ea={offset:1,color:gr[gr.length-1].color};gr.push(Ea)}for(var Ks="",Oa=0,di=0;di<bn.length;di++){for(rn=bn[di];rn>gr[Oa+1].offset;)Oa++;var qs=gr[Oa].offset,fi=(rn-qs)/(gr[Oa+1].offset-qs),zs=gr[Oa].color,Bc=gr[Oa+1].color;Ks+=U(Math.round((1-fi)*zs[0]+fi*Bc[0]).toString(16))+U(Math.round((1-fi)*zs[1]+fi*Bc[1]).toString(16))+U(Math.round((1-fi)*zs[2]+fi*Bc[2]).toString(16))}return Ks.trim()}(V.colors,Ee),Tt=[];Tt.push({key:"FunctionType",value:"0"}),Tt.push({key:"Domain",value:"[0.0 1.0]"}),Tt.push({key:"Size",value:"["+Ee+"]"}),Tt.push({key:"BitsPerSample",value:"8"}),Tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:bt,additionalKeyValues:Tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:lt}),ee("endobj"),V.objectNumber=De(),ee("<< /ShadingType "+V.type),ee("/ColorSpace /DeviceRGB");var fr="/Coords ["+S(parseFloat(V.coords[0]))+" "+S(parseFloat(V.coords[1]))+" ";V.type===2?fr+=S(parseFloat(V.coords[2]))+" "+S(parseFloat(V.coords[3])):fr+=S(parseFloat(V.coords[2]))+" "+S(parseFloat(V.coords[3]))+" "+S(parseFloat(V.coords[4]))+" "+S(parseFloat(V.coords[5])),ee(fr+="]"),V.matrix&&ee("/Matrix ["+V.matrix.toString()+"]"),ee("/Function "+lt+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},tt=function(V,Ee){var lt=He(),bt=De();Ee.push({resourcesOid:lt,objectOid:bt}),V.objectNumber=bt;var Tt=[];Tt.push({key:"Type",value:"/Pattern"}),Tt.push({key:"PatternType",value:"1"}),Tt.push({key:"PaintType",value:"1"}),Tt.push({key:"TilingType",value:"1"}),Tt.push({key:"BBox",value:"["+V.boundingBox.map(S).join(" ")+"]"}),Tt.push({key:"XStep",value:S(V.xStep)}),Tt.push({key:"YStep",value:S(V.yStep)}),Tt.push({key:"Resources",value:lt+" 0 R"}),V.matrix&&Tt.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),rt({data:V.stream,additionalKeyValues:Tt,objectId:V.objectNumber}),ee("endobj")},xt=function(V){for(var Ee in V.objectNumber=De(),ee("<<"),V)switch(Ee){case"opacity":ee("/ca "+k(V[Ee]));break;case"stroke-opacity":ee("/CA "+k(V[Ee]))}ee(">>"),ee("endobj")},kt=function(V){P(V.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ee in ee("/Font <<"),ge)ge.hasOwnProperty(Ee)&&(f===!1||f===!0&&A.hasOwnProperty(Ee))&&ee("/"+Ee+" "+ge[Ee].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(it).length>0){for(var Ee in ee("/Shading <<"),it)it.hasOwnProperty(Ee)&&it[Ee]instanceof F0&&it[Ee].objectNumber>=0&&ee("/"+Ee+" "+it[Ee].objectNumber+" 0 R");gt.publish("putShadingPatternDict"),ee(">>")}}(),function(Ee){if(Object.keys(it).length>0){for(var lt in ee("/Pattern <<"),it)it.hasOwnProperty(lt)&&it[lt]instanceof h.TilingPattern&&it[lt].objectNumber>=0&&it[lt].objectNumber<Ee&&ee("/"+lt+" "+it[lt].objectNumber+" 0 R");gt.publish("putTilingPatternDict"),ee(">>")}}(V.objectOid),function(){if(Object.keys(Ce).length>0){var Ee;for(Ee in ee("/ExtGState <<"),Ce)Ce.hasOwnProperty(Ee)&&Ce[Ee].objectNumber>=0&&ee("/"+Ee+" "+Ce[Ee].objectNumber+" 0 R");gt.publish("putGStateDict"),ee(">>")}}(),function(){for(var Ee in ee("/XObject <<"),Mt)Mt.hasOwnProperty(Ee)&&Mt[Ee].objectNumber>=0&&ee("/"+Ee+" "+Mt[Ee].objectNumber+" 0 R");gt.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},tr=function(V){Xe[V.fontName]=Xe[V.fontName]||{},Xe[V.fontName][V.fontStyle]=V.id},nr=function(V,Ee,lt,bt,Tt){var fr={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:V,fontName:Ee,fontStyle:lt,encoding:bt,isStandardFont:Tt||!1,metadata:{}};return gt.publish("addFont",{font:fr,instance:this}),ge[fr.id]=fr,tr(fr),fr.id},cr=h.__private__.pdfEscape=h.pdfEscape=function(V,Ee){return function(lt,bt){var Tt,fr,gr,zr,rn,bn,kn,ra,Ea;if(gr=(bt=bt||{}).sourceEncoding||"Unicode",rn=bt.outputEncoding,(bt.autoencode||rn)&&ge[ye].metadata&&ge[ye].metadata[gr]&&ge[ye].metadata[gr].encoding&&(zr=ge[ye].metadata[gr].encoding,!rn&&ge[ye].encoding&&(rn=ge[ye].encoding),!rn&&zr.codePages&&(rn=zr.codePages[0]),typeof rn=="string"&&(rn=zr[rn]),rn)){for(kn=!1,bn=[],Tt=0,fr=lt.length;Tt<fr;Tt++)(ra=rn[lt.charCodeAt(Tt)])?bn.push(String.fromCharCode(ra)):bn.push(lt[Tt]),bn[Tt].charCodeAt(0)>>8&&(kn=!0);lt=bn.join("")}for(Tt=lt.length;kn===void 0&&Tt!==0;)lt.charCodeAt(Tt-1)>>8&&(kn=!0),Tt--;if(!kn)return lt;for(bn=bt.noBOM?[]:[254,255],Tt=0,fr=lt.length;Tt<fr;Tt++){if((Ea=(ra=lt.charCodeAt(Tt))>>8)>>8)throw new Error("Character at position "+Tt+" of string '"+lt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");bn.push(Ea),bn.push(ra-(Ea<<8))}return String.fromCharCode.apply(void 0,bn)}(V,Ee).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nr=h.__private__.beginPage=function(V){ve[++we]=[],Le[we]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},Vr(we),ae(ve[K])},mn=function(V,Ee){var lt,bt,Tt;switch(r=Ee||r,typeof V=="string"&&(lt=v(V.toLowerCase()),Array.isArray(lt)&&(bt=lt[0],Tt=lt[1])),Array.isArray(V)&&(bt=V[0]*oe,Tt=V[1]*oe),isNaN(bt)&&(bt=a[0],Tt=a[1]),(bt>14400||Tt>14400)&&(is.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),bt=Math.min(14400,bt),Tt=Math.min(14400,Tt)),a=[bt,Tt],r.substr(0,1)){case"l":Tt>bt&&(a=[Tt,bt]);break;case"p":bt>Tt&&(a=[Tt,bt])}Nr(a),Sr(Rr),ee(To),ca!==0&&ee(ca+" J"),ru!==0&&ee(ru+" j"),gt.publish("addPage",{pageNumber:we})},Mr=function(V){V>0&&V<=we&&(ve.splice(V,1),Le.splice(V,1),we--,K>we&&(K=we),this.setPage(K))},Vr=function(V){V>0&&V<=we&&(K=V)},fn=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Zn=function(V,Ee,lt){var bt,Tt=void 0;return lt=lt||{},V=V!==void 0?V:ge[ye].fontName,Ee=Ee!==void 0?Ee:ge[ye].fontStyle,bt=V.toLowerCase(),Xe[bt]!==void 0&&Xe[bt][Ee]!==void 0?Tt=Xe[bt][Ee]:Xe[V]!==void 0&&Xe[V][Ee]!==void 0?Tt=Xe[V][Ee]:lt.disableWarning===!1&&is.warn("Unable to look up font label for font '"+V+"', '"+Ee+"'. Refer to getFontList() for available fonts."),Tt||lt.noFallback||(Tt=Xe.times[Ee])==null&&(Tt=Xe.times.normal),Tt},Bn=h.__private__.putInfo=function(){var V=De(),Ee=function(bt){return bt};for(var lt in d!==null&&(Ee=je.encryptor(V,0)),ee("<<"),ee("/Producer ("+cr(Ee("jsPDF "+qr.version))+")"),Be)Be.hasOwnProperty(lt)&&Be[lt]&&ee("/"+lt.substr(0,1).toUpperCase()+lt.substr(1)+" ("+cr(Ee(Be[lt]))+")");ee("/CreationDate ("+cr(Ee(he))+")"),ee(">>"),ee("endobj")},zt=h.__private__.putCatalog=function(V){var Ee=(V=V||{}).rootDictionaryObjId||L;switch(De(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+Ee+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var lt=""+We;lt.substr(lt.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+k(We)+"]")}switch(Rt||(Rt="continuous"),Rt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Ct&&ee("/PageMode /"+Ct),gt.publish("putCatalog"),ee(">>"),ee("endobj")},pr=h.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(W+1)),ee("/Root "+W+" 0 R"),ee("/Info "+(W-1)+" 0 R"),d!==null&&ee("/Encrypt "+je.oid+" 0 R"),ee("/ID [ <"+Ae+"> <"+Ae+"> ]"),ee(">>")},Gt=h.__private__.putHeader=function(){ee("%PDF-"+m),ee("%")},Qr=h.__private__.putXRef=function(){var V="0000000000";ee("xref"),ee("0 "+(W+1)),ee("0000000000 65535 f ");for(var Ee=1;Ee<=W;Ee++)typeof J[Ee]=="function"?ee((V+J[Ee]()).slice(-10)+" 00000 n "):J[Ee]!==void 0?ee((V+J[Ee]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},ln=h.__private__.buildDocument=function(){var V;W=0,H=0,M=[],J=[],te=[],L=He(),G=He(),ae(M),gt.publish("buildDocument"),Gt(),Je(),function(){gt.publish("putAdditionalObjects");for(var lt=0;lt<te.length;lt++){var bt=te[lt];P(bt.objId,!0),ee(bt.content),ee("endobj")}gt.publish("postPutAdditionalObjects")}(),V=[],function(){for(var lt in ge)ge.hasOwnProperty(lt)&&(f===!1||f===!0&&A.hasOwnProperty(lt))&&ht(ge[lt])}(),function(){var lt;for(lt in Ce)Ce.hasOwnProperty(lt)&&xt(Ce[lt])}(),function(){for(var lt in Mt)Mt.hasOwnProperty(lt)&&Ot(Mt[lt])}(),function(lt){var bt;for(bt in it)it.hasOwnProperty(bt)&&(it[bt]instanceof F0?Se(it[bt]):it[bt]instanceof yp&&tt(it[bt],lt))}(V),gt.publish("putResources"),V.forEach(kt),kt({resourcesOid:G,objectOid:Number.MAX_SAFE_INTEGER}),gt.publish("postPutResources"),d!==null&&(je.oid=De(),ee("<<"),ee("/Filter /Standard"),ee("/V "+je.v),ee("/R "+je.r),ee("/U <"+je.toHexString(je.U)+">"),ee("/O <"+je.toHexString(je.O)+">"),ee("/P "+je.P),ee(">>"),ee("endobj")),Bn(),zt();var Ee=H;return Qr(),pr(),ee("startxref"),ee(""+Ee),ee("%%EOF"),ae(ve[K]),M.join(`
`)},tn=h.__private__.getBlob=function(V){return new Blob([ce(V)],{type:"application/pdf"})},mt=h.output=h.__private__.output=(le=function(V,Ee){switch(typeof(Ee=Ee||{})=="string"?Ee={filename:Ee}:Ee.filename=Ee.filename||"generated.pdf",V){case void 0:return ln();case"save":h.save(Ee.filename);break;case"arraybuffer":return ce(ln());case"blob":return tn(ln());case"bloburi":case"bloburl":if(jn.URL!==void 0&&typeof jn.URL.createObjectURL=="function")return jn.URL&&jn.URL.createObjectURL(tn(ln()))||void 0;is.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var lt="",bt=ln();try{lt=lV(bt)}catch{lt=lV(unescape(encodeURIComponent(bt)))}return"data:application/pdf;filename="+Ee.filename+";base64,"+lt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var Tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",fr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ee.pdfObjectUrl&&(Tt=Ee.pdfObjectUrl,fr="");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Tt+'"'+fr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ee)+");<\/script></body></html>",zr=jn.open();return zr!==null&&zr.document.write(gr),zr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jn)==="[object Window]"){var rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ee.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ee.filename+'" width="500px" height="400px" /></body></html>',bn=jn.open();if(bn!==null){bn.document.write(rn);var kn=this;bn.document.documentElement.querySelector("#pdfViewer").onload=function(){bn.document.title=Ee.filename,bn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(kn.output("bloburl"))}}return bn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ra='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ee)+'"></iframe></body></html>',Ea=jn.open();if(Ea!==null&&(Ea.document.write(ra),Ea.document.title=Ee.filename),Ea||typeof safari>"u")return Ea;break;case"datauri":case"dataurl":return jn.document.location.href=this.output("datauristring",Ee);default:return null}},le.foo=function(){try{return le.apply(this,arguments)}catch(lt){var V=lt.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var Ee="Error in function "+V.split(`
`)[0].split("<")[0]+": "+lt.message;if(!jn.console)throw new Error(Ee);jn.console.error(Ee,lt),jn.alert&&alert(Ee)}},le.foo.bar=le,le.foo),ur=function(V){return Array.isArray(Ut)===!0&&Ut.indexOf(V)>-1};switch(n){case"pt":oe=1;break;case"mm":oe=72/25.4;break;case"cm":oe=72/2.54;break;case"in":oe=72;break;case"px":oe=ur("px_scaling")==1?.75:96/72;break;case"pc":case"em":oe=12;break;case"ex":oe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);oe=n}var je=null;Te(),me();var nt=h.__private__.getPageInfo=h.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Le[V].objId,pageNumber:V,pageContext:Le[V]}},dt=h.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ee in Le)if(Le[Ee].objId===V)break;return nt(Ee)},Nt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Le[K].objId,pageNumber:K,pageContext:Le[K]}};h.addPage=function(){return mn.apply(this,arguments),this},h.setPage=function(){return Vr.apply(this,arguments),ae.call(this,ve[K]),this},h.insertPage=function(V){return this.addPage(),this.movePage(K,V),this},h.movePage=function(V,Ee){var lt,bt;if(V>Ee){lt=ve[V],bt=Le[V];for(var Tt=V;Tt>Ee;Tt--)ve[Tt]=ve[Tt-1],Le[Tt]=Le[Tt-1];ve[Ee]=lt,Le[Ee]=bt,this.setPage(Ee)}else if(V<Ee){lt=ve[V],bt=Le[V];for(var fr=V;fr<Ee;fr++)ve[fr]=ve[fr+1],Le[fr]=Le[fr+1];ve[Ee]=lt,Le[Ee]=bt,this.setPage(Ee)}return this},h.deletePage=function(){return Mr.apply(this,arguments),this},h.__private__.text=h.text=function(V,Ee,lt,bt,Tt){var fr,gr,zr,rn,bn,kn,ra,Ea,Ks,Oa=(bt=bt||{}).scope||this;if(typeof V=="number"&&typeof Ee=="number"&&(typeof lt=="string"||Array.isArray(lt))){var di=lt;lt=Ee,Ee=V,V=di}if(arguments[3]instanceof _e==0?(zr=arguments[4],rn=arguments[5],Ka(ra=arguments[3])==="object"&&ra!==null||(typeof zr=="string"&&(rn=zr,zr=null),typeof ra=="string"&&(rn=ra,ra=null),typeof ra=="number"&&(zr=ra,ra=null),bt={flags:ra,angle:zr,align:rn})):(E("The transform parameter of text() with a Matrix value"),Ks=Tt),isNaN(Ee)||isNaN(lt)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Oa;var qs,fi="",zs=typeof bt.lineHeightFactor=="number"?bt.lineHeightFactor:dr,Bc=Oa.internal.scaleFactor;function Lu(Ta){return Ta=Ta.split("	").join(Array(bt.TabLen||9).join(" ")),cr(Ta,ra)}function Uu(Ta){for(var ns,_i=Ta.concat(),ao=[],ph=_i.length;ph--;)typeof(ns=_i.shift())=="string"?ao.push(ns):Array.isArray(Ta)&&(ns.length===1||ns[1]===void 0&&ns[2]===void 0)?ao.push(ns[0]):ao.push([ns[0],ns[1],ns[2]]);return ao}function C(Ta,ns){var _i;if(typeof Ta=="string")_i=ns(Ta)[0];else if(Array.isArray(Ta)){for(var ao,ph,D1=Ta.concat(),$g=[],fN=D1.length;fN--;)typeof(ao=D1.shift())=="string"?$g.push(ns(ao)[0]):Array.isArray(ao)&&typeof ao[0]=="string"&&(ph=ns(ao[0],ao[1],ao[2]),$g.push([ph[0],ph[1],ph[2]]));_i=$g}return _i}var Y=!1,pe=!0;if(typeof V=="string")Y=!0;else if(Array.isArray(V)){var ze=V.concat();gr=[];for(var Dt,Xt=ze.length;Xt--;)(typeof(Dt=ze.shift())!="string"||Array.isArray(Dt)&&typeof Dt[0]!="string")&&(pe=!1);Y=pe}if(Y===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Pr=Ve/Oa.internal.scaleFactor,oa=Pr*(zs-1);switch(bt.baseline){case"bottom":lt-=oa;break;case"top":lt+=Pr-oa;break;case"hanging":lt+=Pr-2*oa;break;case"middle":lt+=Pr/2-oa}if((kn=bt.maxWidth||0)>0&&(typeof V=="string"?V=Oa.splitTextToSize(V,kn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Ta,ns){return Ta.concat(Oa.splitTextToSize(ns,kn))},[]))),fr={text:V,x:Ee,y:lt,options:bt,mutex:{pdfEscape:cr,activeFontKey:ye,fonts:ge,activeFontSize:Ve}},gt.publish("preProcessText",fr),V=fr.text,zr=(bt=fr.options).angle,Ks instanceof _e==0&&zr&&typeof zr=="number"){zr*=Math.PI/180,bt.rotationDirection===0&&(zr=-zr),w===b&&(zr=-zr);var Ws=Math.cos(zr),zn=Math.sin(zr);Ks=new _e(Ws,zn,-zn,Ws,0,0)}else zr&&zr instanceof _e&&(Ks=zr);w!==b||Ks||(Ks=ie),(bn=bt.charSpace||Gi)!==void 0&&(fi+=S(D(bn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ea=bt.horizontalScale)!==void 0&&(fi+=S(100*Ea)+` Tz
`),bt.lang;var va=-1,ds=bt.renderingMode!==void 0?bt.renderingMode:bt.stroke,nu=Oa.internal.getCurrentPageInfo().pageContext;switch(ds){case 0:case!1:case"fill":va=0;break;case 1:case!0:case"stroke":va=1;break;case 2:case"fillThenStroke":va=2;break;case 3:case"invisible":va=3;break;case 4:case"fillAndAddForClipping":va=4;break;case 5:case"strokeAndAddPathForClipping":va=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":va=6;break;case 7:case"addToPathForClipping":va=7}var Sl=nu.usedRenderingMode!==void 0?nu.usedRenderingMode:-1;va!==-1?fi+=va+` Tr
`:Sl!==-1&&(fi+=`0 Tr
`),va!==-1&&(nu.usedRenderingMode=va),rn=bt.align||"left";var tl,Dd=Ve*zs,j1=Oa.internal.pageSize.getWidth(),P1=ge[ye];bn=bt.charSpace||Gi,kn=bt.maxWidth||0,ra=Object.assign({autoencode:!0,noBOM:!0},bt.flags);var HA=[],Qm=function(Ta){return Oa.getStringUnitWidth(Ta,{font:P1,charSpace:bn,fontSize:Ve,doKerning:!1})*Ve/Bc};if(Object.prototype.toString.call(V)==="[object Array]"){var au;gr=Uu(V),rn!=="left"&&(tl=gr.map(Qm));var su,$A=0;if(rn==="right"){Ee-=tl[0],V=[],Xt=gr.length;for(var mh=0;mh<Xt;mh++)mh===0?(su=En(Ee),au=vs(lt)):(su=D($A-tl[mh]),au=-Dd),V.push([gr[mh],su,au]),$A=tl[mh]}else if(rn==="center"){Ee-=tl[0]/2,V=[],Xt=gr.length;for(var GA=0;GA<Xt;GA++)GA===0?(su=En(Ee),au=vs(lt)):(su=D(($A-tl[GA])/2),au=-Dd),V.push([gr[GA],su,au]),$A=tl[GA]}else if(rn==="left"){V=[],Xt=gr.length;for(var B1=0;B1<Xt;B1++)V.push(gr[B1])}else if(rn==="justify"&&P1.encoding==="Identity-H"){V=[],Xt=gr.length,kn=kn!==0?kn:j1;for(var Hg=0,Ci=0;Ci<Xt;Ci++)if(au=Ci===0?vs(lt):-Dd,su=Ci===0?En(Ee):Hg,Ci<Xt-1){var dN=D((kn-tl[Ci])/(gr[Ci].split(" ").length-1)),If=gr[Ci].split(" ");V.push([If[0]+" ",su,au]),Hg=0;for(var jf=1;jf<If.length;jf++){var T1=(Qm(If[jf-1]+" "+If[jf])-Qm(If[jf]))*Bc+dN;jf==If.length-1?V.push([If[jf],T1,0]):V.push([If[jf]+" ",T1,0]),Hg-=T1}}else V.push([gr[Ci],su,au]);V.push(["",Hg,0])}else{if(rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Xt=gr.length,kn=kn!==0?kn:j1,Ci=0;Ci<Xt;Ci++){au=Ci===0?vs(lt):-Dd,su=Ci===0?En(Ee):0;var k1=gr[Ci].split(" ").length-1,F1=k1>0?(kn-tl[Ci])/k1:0;Ci<Xt-1?HA.push(S(D(F1))):HA.push(0),V.push([gr[Ci],su,au])}}}(typeof bt.R2L=="boolean"?bt.R2L:wt)===!0&&(V=C(V,function(Ta,ns,_i){return[Ta.split("").reverse().join(""),ns,_i]})),fr={text:V,x:Ee,y:lt,options:bt,mutex:{pdfEscape:cr,activeFontKey:ye,fonts:ge,activeFontSize:Ve}},gt.publish("postProcessText",fr),V=fr.text,qs=fr.mutex.isHex||!1;var O1=ge[ye].encoding;O1!=="WinAnsiEncoding"&&O1!=="StandardEncoding"||(V=C(V,function(Ta,ns,_i){return[Lu(Ta),ns,_i]})),gr=Uu(V),V=[];for(var KA,qA,zA,Vm=Array.isArray(gr[0])?1:0,WA="",Hm=function(Ta,ns,_i){var ao="";return _i instanceof _e?(_i=typeof bt.angle=="number"?xe(_i,new _e(1,0,0,1,Ta,ns)):xe(new _e(1,0,0,1,Ta,ns),_i),w===b&&(_i=xe(new _e(1,0,0,-1,0,0),_i)),ao=_i.join(" ")+` Tm
`):ao=S(Ta)+" "+S(ns)+` Td
`,ao},Qu=0;Qu<gr.length;Qu++){switch(WA="",Vm){case 1:zA=(qs?"<":"(")+gr[Qu][0]+(qs?">":")"),KA=parseFloat(gr[Qu][1]),qA=parseFloat(gr[Qu][2]);break;case 0:zA=(qs?"<":"(")+gr[Qu]+(qs?">":")"),KA=En(Ee),qA=vs(lt)}HA!==void 0&&HA[Qu]!==void 0&&(WA=HA[Qu]+` Tw
`),Qu===0?V.push(WA+Hm(KA,qA,Ks)+zA):Vm===0?V.push(WA+zA):Vm===1&&V.push(WA+Hm(KA,qA,Ks)+zA)}V=Vm===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Pf=`BT
/`;return Pf+=ye+" "+Ve+` Tf
`,Pf+=S(Ve*zs)+` TL
`,Pf+=Gs+`
`,Pf+=fi,Pf+=V,ee(Pf+="ET"),A[ye]=!0,Oa};var Qe=h.__private__.clip=h.clip=function(V){return ee(V==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return Qe("evenodd")},h.__private__.discardPath=h.discardPath=function(){return ee("n"),this};var ot=h.__private__.isValidStyle=function(V){var Ee=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ee=!0),Ee};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(V){return ot(V)&&(u=V),this};var _t=h.__private__.getStyle=h.getStyle=function(V){var Ee=u;switch(V){case"D":case"S":Ee="S";break;case"F":Ee="f";break;case"FD":case"DF":Ee="B";break;case"f":case"f*":case"B":case"B*":Ee=V}return Ee},et=h.close=function(){return ee("h"),this};h.stroke=function(){return ee("S"),this},h.fill=function(V){return It("f",V),this},h.fillEvenOdd=function(V){return It("f*",V),this},h.fillStroke=function(V){return It("B",V),this},h.fillStrokeEvenOdd=function(V){return It("B*",V),this};var It=function(V,Ee){Ka(Ee)==="object"?er(Ee,V):ee(V)},Vt=function(V){V===null||w===b&&V===void 0||(V=_t(V),ee(V))};function rr(V,Ee,lt,bt,Tt){var fr=new yp(Ee||this.boundingBox,lt||this.xStep,bt||this.yStep,this.gState,Tt||this.matrix);fr.stream=this.stream;var gr=V+"$$"+this.cloneIndex+++"$$";return Oe(gr,fr),fr}var er=function(V,Ee){var lt=de[V.key],bt=it[lt];if(bt instanceof F0)ee("q"),ee(Bt(Ee)),bt.gState&&h.setGState(bt.gState),ee(V.matrix.toString()+" cm"),ee("/"+lt+" sh"),ee("Q");else if(bt instanceof yp){var Tt=new _e(1,0,0,-1,0,Mu());V.matrix&&(Tt=Tt.multiply(V.matrix||ie),lt=rr.call(bt,V.key,V.boundingBox,V.xStep,V.yStep,Tt).id),ee("q"),ee("/Pattern cs"),ee("/"+lt+" scn"),bt.gState&&h.setGState(bt.gState),ee(Ee),ee("Q")}},Bt=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},br=h.moveTo=function(V,Ee){return ee(S(D(V))+" "+S(X(Ee))+" m"),this},wr=h.lineTo=function(V,Ee){return ee(S(D(V))+" "+S(X(Ee))+" l"),this},Ft=h.curveTo=function(V,Ee,lt,bt,Tt,fr){return ee([S(D(V)),S(X(Ee)),S(D(lt)),S(X(bt)),S(D(Tt)),S(X(fr)),"c"].join(" ")),this};h.__private__.line=h.line=function(V,Ee,lt,bt,Tt){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||isNaN(bt)||!ot(Tt))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[lt-V,bt-Ee]],V,Ee,[1,1],Tt||"S"):this.lines([[lt-V,bt-Ee]],V,Ee,[1,1]).stroke()},h.__private__.lines=h.lines=function(V,Ee,lt,bt,Tt,fr){var gr,zr,rn,bn,kn,ra,Ea,Ks,Oa,di,qs,fi;if(typeof V=="number"&&(fi=lt,lt=Ee,Ee=V,V=fi),bt=bt||[1,1],fr=fr||!1,isNaN(Ee)||isNaN(lt)||!Array.isArray(V)||!Array.isArray(bt)||!ot(Tt)||typeof fr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(br(Ee,lt),gr=bt[0],zr=bt[1],bn=V.length,di=Ee,qs=lt,rn=0;rn<bn;rn++)(kn=V[rn]).length===2?(di=kn[0]*gr+di,qs=kn[1]*zr+qs,wr(di,qs)):(ra=kn[0]*gr+di,Ea=kn[1]*zr+qs,Ks=kn[2]*gr+di,Oa=kn[3]*zr+qs,di=kn[4]*gr+di,qs=kn[5]*zr+qs,Ft(ra,Ea,Ks,Oa,di,qs));return fr&&et(),Vt(Tt),this},h.path=function(V){for(var Ee=0;Ee<V.length;Ee++){var lt=V[Ee],bt=lt.c;switch(lt.op){case"m":br(bt[0],bt[1]);break;case"l":wr(bt[0],bt[1]);break;case"c":Ft.apply(this,bt);break;case"h":et()}}return this},h.__private__.rect=h.rect=function(V,Ee,lt,bt,Tt){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||isNaN(bt)||!ot(Tt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(bt=-bt),ee([S(D(V)),S(X(Ee)),S(D(lt)),S(D(bt)),"re"].join(" ")),Vt(Tt),this},h.__private__.triangle=h.triangle=function(V,Ee,lt,bt,Tt,fr,gr){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||isNaN(bt)||isNaN(Tt)||isNaN(fr)||!ot(gr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[lt-V,bt-Ee],[Tt-lt,fr-bt],[V-Tt,Ee-fr]],V,Ee,[1,1],gr,!0),this},h.__private__.roundedRect=h.roundedRect=function(V,Ee,lt,bt,Tt,fr,gr){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||isNaN(bt)||isNaN(Tt)||isNaN(fr)||!ot(gr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zr=4/3*(Math.SQRT2-1);return Tt=Math.min(Tt,.5*lt),fr=Math.min(fr,.5*bt),this.lines([[lt-2*Tt,0],[Tt*zr,0,Tt,fr-fr*zr,Tt,fr],[0,bt-2*fr],[0,fr*zr,-Tt*zr,fr,-Tt,fr],[2*Tt-lt,0],[-Tt*zr,0,-Tt,-fr*zr,-Tt,-fr],[0,2*fr-bt],[0,-fr*zr,Tt*zr,-fr,Tt,-fr]],V+Tt,Ee,[1,1],gr,!0),this},h.__private__.ellipse=h.ellipse=function(V,Ee,lt,bt,Tt){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||isNaN(bt)||!ot(Tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var fr=4/3*(Math.SQRT2-1)*lt,gr=4/3*(Math.SQRT2-1)*bt;return br(V+lt,Ee),Ft(V+lt,Ee-gr,V+fr,Ee-bt,V,Ee-bt),Ft(V-fr,Ee-bt,V-lt,Ee-gr,V-lt,Ee),Ft(V-lt,Ee+gr,V-fr,Ee+bt,V,Ee+bt),Ft(V+fr,Ee+bt,V+lt,Ee+gr,V+lt,Ee),Vt(Tt),this},h.__private__.circle=h.circle=function(V,Ee,lt,bt){if(isNaN(V)||isNaN(Ee)||isNaN(lt)||!ot(bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ee,lt,lt,bt)},h.setFont=function(V,Ee,lt){return lt&&(Ee=_(Ee,lt)),ye=Zn(V,Ee,{disableWarning:!1}),this};var Zt=h.__private__.getFont=h.getFont=function(){return ge[Zn.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var V,Ee,lt={};for(V in Xe)if(Xe.hasOwnProperty(V))for(Ee in lt[V]=[],Xe[V])Xe[V].hasOwnProperty(Ee)&&lt[V].push(Ee);return lt},h.addFont=function(V,Ee,lt,bt,Tt){var fr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&fr.indexOf(arguments[3])!==-1?Tt=arguments[3]:arguments[3]&&fr.indexOf(arguments[3])==-1&&(lt=_(lt,bt)),nr.call(this,V,Ee,lt,Tt=Tt||"Identity-H")};var dr,Rr=t.lineWidth||.200025,Wr=h.__private__.getLineWidth=h.getLineWidth=function(){return Rr},Sr=h.__private__.setLineWidth=h.setLineWidth=function(V){return Rr=V,ee(S(D(V))+" w"),this};h.__private__.setLineDash=qr.API.setLineDash=qr.API.setLineDashPattern=function(V,Ee){if(V=V||[],Ee=Ee||0,isNaN(Ee)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(lt){return S(D(lt))}).join(" "),Ee=S(D(Ee)),ee("["+V+"] "+Ee+" d"),this};var ia=h.__private__.getLineHeight=h.getLineHeight=function(){return Ve*dr};h.__private__.getLineHeight=h.getLineHeight=function(){return Ve*dr};var _a=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(dr=V),this},ha=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return dr};_a(t.lineHeight);var En=h.__private__.getHorizontalCoordinate=function(V){return D(V)},vs=h.__private__.getVerticalCoordinate=function(V){return w===b?V:Le[K].mediaBox.topRightY-Le[K].mediaBox.bottomLeftY-D(V)},Fd=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(V){return S(En(V))},Tn=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(V){return S(vs(V))},To=t.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return re(To)},h.__private__.setStrokeColor=h.setDrawColor=function(V,Ee,lt,bt){return To=ue({ch1:V,ch2:Ee,ch3:lt,ch4:bt,pdfColorType:"draw",precision:2}),ee(To),this};var Sc=t.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return re(Sc)},h.__private__.setFillColor=h.setFillColor=function(V,Ee,lt,bt){return Sc=ue({ch1:V,ch2:Ee,ch3:lt,ch4:bt,pdfColorType:"fill",precision:2}),ee(Sc),this};var Gs=t.textColor||"0 g",$i=h.__private__.getTextColor=h.getTextColor=function(){return re(Gs)};h.__private__.setTextColor=h.setTextColor=function(V,Ee,lt,bt){return Gs=ue({ch1:V,ch2:Ee,ch3:lt,ch4:bt,pdfColorType:"text",precision:3}),this};var Gi=t.charSpace,Ic=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(Gi||0)};h.__private__.setCharSpace=h.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Gi=V,this};var ca=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(V){var Ee=h.CapJoinStyles[V];if(Ee===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ca=Ee,ee(Ee+" J"),this};var ru=0;h.__private__.setLineJoin=h.setLineJoin=function(V){var Ee=h.CapJoinStyles[V];if(Ee===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ru=Ee,ee(Ee+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(S(D(V))+" M"),this},h.GState=C2,h.setGState=function(V){(V=typeof V=="string"?Ce[Ye[V]]:QA(null,V)).equals(ft)||(ee("/"+V.id+" gs"),ft=V)};var QA=function(V,Ee){if(!V||!Ye[V]){var lt=!1;for(var bt in Ce)if(Ce.hasOwnProperty(bt)&&Ce[bt].equals(Ee)){lt=!0;break}if(lt)Ee=Ce[bt];else{var Tt="GS"+(Object.keys(Ce).length+1).toString(10);Ce[Tt]=Ee,Ee.id=Tt}return V&&(Ye[V]=Ee.id),gt.publish("addGState",Ee),Ee}};h.addGState=function(V,Ee){return QA(V,Ee),this},h.saveGraphicsState=function(){return ee("q"),vt.push({key:ye,size:Ve,color:Gs}),this},h.restoreGraphicsState=function(){ee("Q");var V=vt.pop();return ye=V.key,Ve=V.size,Gs=V.color,ft=null,this},h.setCurrentTransformationMatrix=function(V){return ee(V.toString()+" cm"),this},h.comment=function(V){return ee("#"+V),this};var jc=function(V,Ee){var lt=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return lt},set:function(fr){isNaN(fr)||(lt=parseFloat(fr))}});var bt=Ee||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return bt},set:function(fr){isNaN(fr)||(bt=parseFloat(fr))}});var Tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Tt},set:function(fr){Tt=fr.toString()}}),this},_f=function(V,Ee,lt,bt){jc.call(this,V,Ee),this.type="rect";var Tt=lt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Tt},set:function(gr){isNaN(gr)||(Tt=parseFloat(gr))}});var fr=bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return fr},set:function(gr){isNaN(gr)||(fr=parseFloat(gr))}}),this},Od=function(){this.page=we,this.currentPage=K,this.pages=ve.slice(0),this.pagesContext=Le.slice(0),this.x=Z,this.y=Ne,this.matrix=Re,this.width=ys(K),this.height=VA(K),this.outputDestination=Ke,this.id="",this.objectNumber=-1};Od.prototype.restore=function(){we=this.page,K=this.currentPage,Le=this.pagesContext,ve=this.pages,Z=this.x,Ne=this.y,Re=this.matrix,Ef(K,this.width),Ni(K,this.height),Ke=this.outputDestination};var el=function(V,Ee,lt,bt,Tt){st.push(new Od),we=K=0,ve=[],Z=V,Ne=Ee,Re=Tt,Nr([lt,bt])};for(var rc in h.beginFormObject=function(V,Ee,lt,bt,Tt){return el(V,Ee,lt,bt,Tt),this},h.endFormObject=function(V){return function(Ee){if(Yt[Ee])st.pop().restore();else{var lt=new Od,bt="Xo"+(Object.keys(Mt).length+1).toString(10);lt.id=bt,Yt[Ee]=bt,Mt[bt]=lt,gt.publish("addFormObject",lt),st.pop().restore()}}(V),this},h.doFormObject=function(V,Ee){var lt=Mt[Yt[V]];return ee("q"),ee(Ee.toString()+" cm"),ee("/"+lt.id+" Do"),ee("Q"),this},h.getFormObject=function(V){var Ee=Mt[Yt[V]];return{x:Ee.x,y:Ee.y,width:Ee.width,height:Ee.height,matrix:Ee.matrix}},h.save=function(V,Ee){return V=V||"generated.pdf",(Ee=Ee||{}).returnPromise=Ee.returnPromise||!1,Ee.returnPromise===!1?(ap(tn(ln()),V),typeof ap.unload=="function"&&jn.setTimeout&&setTimeout(ap.unload,911),this):new Promise(function(lt,bt){try{var Tt=ap(tn(ln()),V);typeof ap.unload=="function"&&jn.setTimeout&&setTimeout(ap.unload,911),lt(Tt)}catch(fr){bt(fr.message)}})},qr.API)qr.API.hasOwnProperty(rc)&&(rc==="events"&&qr.API.events.length?function(V,Ee){var lt,bt,Tt;for(Tt=Ee.length-1;Tt!==-1;Tt--)lt=Ee[Tt][0],bt=Ee[Tt][1],V.subscribe.apply(V,[lt].concat(typeof bt=="function"?[bt]:bt))}(gt,qr.API.events):h[rc]=qr.API[rc]);function ys(V){return Le[V].mediaBox.topRightX-Le[V].mediaBox.bottomLeftX}function Ef(V,Ee){Le[V].mediaBox.topRightX=Ee+Le[V].mediaBox.bottomLeftX}function VA(V){return Le[V].mediaBox.topRightY-Le[V].mediaBox.bottomLeftY}function Ni(V,Ee){Le[V].mediaBox.topRightY=Ee+Le[V].mediaBox.bottomLeftY}var Pc=h.getPageWidth=function(V){return ys(V=V||K)/oe},Sf=h.setPageWidth=function(V,Ee){Ef(V,Ee*oe)},Mu=h.getPageHeight=function(V){return VA(V=V||K)/oe},Um=h.setPageHeight=function(V,Ee){Ni(V,Ee*oe)};return h.internal={pdfEscape:cr,getStyle:_t,getFont:Zt,getFontSize:pt,getCharSpace:Ic,getTextColor:$i,getLineHeight:ia,getLineHeightFactor:ha,getLineWidth:Wr,write:Fe,getHorizontalCoordinate:En,getVerticalCoordinate:vs,getCoordinateString:Fd,getVerticalCoordinateString:Tn,collections:{},newObject:De,newAdditionalObject:R,newObjectDeferred:He,newObjectDeferredBegin:P,getFilters:$e,putStream:rt,events:gt,scaleFactor:oe,pageSize:{getWidth:function(){return Pc(K)},setWidth:function(V){Sf(K,V)},getHeight:function(){return Mu(K)},setHeight:function(V){Um(K,V)}},encryptionOptions:d,encryption:je,getEncryptor:function(V){return d!==null?je.encryptor(V,0):function(Ee){return Ee}},output:mt,getNumberOfPages:fn,get pages(){return ve},out:ee,f2:k,f3:B,getPageInfo:nt,getPageInfoByObjId:dt,getCurrentPageInfo:Nt,getPDFVersion:p,Point:jc,Rectangle:_f,Matrix:_e,hasHotfix:ur},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return Pc(K)},set:function(V){Sf(K,V)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Mu(K)},set:function(V){Um(K,V)},enumerable:!0,configurable:!0}),(function(V){for(var Ee=0,lt=be.length;Ee<lt;Ee++){var bt=nr.call(this,V[Ee][0],V[Ee][1],V[Ee][2],be[Ee][3],!0);f===!1&&(A[bt]=!0);var Tt=V[Ee][0].split("-");tr({id:bt,fontName:Tt[0],fontStyle:Tt[1]||""})}gt.publish("addFonts",{fonts:ge,dictionary:Xe})}).call(h,be),ye="F1",mn(a,r),gt.publish("initialized"),h}Sx.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Sx.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sx.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Sx.prototype.processOwnerPassword=function(t,e){return Pk(jk(e).substr(0,5),t)},Sx.prototype.encryptor=function(t,e){var r=jk(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Pk(r,n)}},C2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ka(t)!==Ka(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},qr.API={events:[]},qr.version="3.0.4";var mi=qr.API,T6=1,Bg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sx=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},On=function(t){return t.toFixed(2)},l0=function(t){return t.toFixed(5)};mi.__acroform__={};var Zc=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},fV=function(t){return t*T6},Rf=function(t){var e=new hre,r=Zr.internal.getHeight(t)||0,n=Zr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(On(n)),Number(On(r))],e},Nje=mi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Cje=mi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},_je=mi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Oi=mi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _je(t,e-1)},Di=mi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Nje(t,e-1)},Ri=mi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Cje(t,e-1)},Eje=mi.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(On(c.lowerLeft_X)),Number(On(c.lowerLeft_Y)),Number(On(c.upperRight_X)),Number(On(c.upperRight_Y))]},Sje=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=Bk(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+On(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Rf(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Bk=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(k){return k.split(`
`)}):a.map(function(k){return[k]});var s=r,o=Zr.internal.getHeight(t)||0;o=o<0?-o:o;var l=Zr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(k,B,D){if(k+1<a.length){var X=B+" "+a[k+1][0];return jC(X,t,D).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,f=jC("3",t,s).height,A=t.multiline?o-s:(o-f)/2,h=A+=2,m=0,p=0,x=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+jC(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var v="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(a[b].length!==1&&x!==a[b].length-1){if((f+2)*(y+2)+2>o)continue e;v+=a[b][x],w=!0,p=b,b--}else{v=(v+=a[b][x]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var j=parseInt(b),I=c(j,v,s),_=b>=a.length-1;if(I&&!_){v+=" ",x=0;continue}if(I||_){if(_)p=j;else if(t.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!t.multiline||(f+2)*(y+2)+2>o)continue e;p=j}}for(var S="",E=m;E<=p;E++){var F=a[E];if(t.multiline){if(E===p){S+=F[x]+" ",x=(x+1)%F.length;continue}if(E===m){S+=F[F.length-1]+" ";continue}}S+=F[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=jC(S,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=On(u)+" "+On(h)+` Td
`,e+="("+Bg(S)+`) Tj
`,e+=-On(u)+` 0 Td
`,h=-(s+2),d=0,m=w?p:p+1,y++,v=""}break}return n.text=e,n.fontSize=s,n},jC=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},Ije={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jje=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Pje=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Ije)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");T6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Are,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&jje(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Eje(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Zr.createDefaultAppearanceStream(l),Ka(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=Sje(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var f="";for(var A in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(A)){var h=l.appearanceStreamContent[A];if(f+="/"+A+" ",f+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m+" ",a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(a,l)),f+="/"+o+" "+m,a.internal.acroformPlugin.xForms.indexOf(m)>=0||a.internal.acroformPlugin.xForms.push(m);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(p,x){for(var v in p)if(p.hasOwnProperty(v)){var y=v,b=p[v];x.internal.newObjectDeferredBegin(b.objId,!0),Ka(b)==="object"&&typeof b.putStream=="function"&&b.putStream(),delete p[y]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},fre=mi.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Ka(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Bg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},n5=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Bg(n(t))+")"},qf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qf.prototype.toString=function(){return this.objId+" 0 R"},qf.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},qf.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:fre(a,this.objId,this.scope)}):a instanceof qf?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var hre=function(){qf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Zc(hre,qf);var Are=function(){qf.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Bg(r(t))+")"}},set:function(r){t=r}})};Zc(Are,qf);var wf=function t(){qf.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');e=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Oi(e,3)},set:function(v){v?this.F=Di(e,3):this.F=Ri(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof CS)return;s="FieldObject"+t.FieldNum++}var v=function(y){return y};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Bg(v(s))+")"},set:function(v){s=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(v){s=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/T6:u},set:function(v){u=v}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(v){d=v}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof CS||this instanceof om))return n5(f,this.objId,this.scope)},set:function(v){v=v.toString(),f=v}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof mo==0?n5(A,this.objId,this.scope):A},set:function(v){v=v.toString(),A=this instanceof mo==0?v.substr(0,1)==="("?sx(v.substr(1,v.length-2)):sx(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mo==1?sx(A.substr(1,A.length-1)):A},set:function(v){v=v.toString(),A=this instanceof mo==1?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof mo==0?n5(h,this.objId,this.scope):h},set:function(v){v=v.toString(),h=this instanceof mo==0?v.substr(0,1)==="("?sx(v.substr(1,v.length-2)):sx(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mo==1?sx(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof mo==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(v){v=!!v,p=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,1)},set:function(v){v?this.Ff=Di(this.Ff,1):this.Ff=Ri(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,2)},set:function(v){v?this.Ff=Di(this.Ff,2):this.Ff=Ri(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,3)},set:function(v){v?this.Ff=Di(this.Ff,3):this.Ff=Ri(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');x=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(x){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};Zc(wf,qf);var Bp=function(){wf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return fre(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,18)},set:function(r){r?this.Ff=Di(this.Ff,18):this.Ff=Ri(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Di(this.Ff,19):this.Ff=Ri(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,20)},set:function(r){r?(this.Ff=Di(this.Ff,20),e.sort()):this.Ff=Ri(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,22)},set:function(r){r?this.Ff=Di(this.Ff,22):this.Ff=Ri(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,23)},set:function(r){r?this.Ff=Di(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,27)},set:function(r){r?this.Ff=Di(this.Ff,27):this.Ff=Ri(this.Ff,27)}}),this.hasAppearanceStream=!1};Zc(Bp,wf);var Tp=function(){Bp.call(this),this.fontName="helvetica",this.combo=!1};Zc(Tp,Bp);var kp=function(){Tp.call(this),this.combo=!0};Zc(kp,Tp);var wb=function(){kp.call(this),this.edit=!0};Zc(wb,kp);var mo=function(){wf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,15)},set:function(r){r?this.Ff=Di(this.Ff,15):this.Ff=Ri(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,16)},set:function(r){r?this.Ff=Di(this.Ff,16):this.Ff=Ri(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,17)},set:function(r){r?this.Ff=Di(this.Ff,17):this.Ff=Ri(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,26)},set:function(r){r?this.Ff=Di(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Bg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ka(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Zc(mo,wf);var Nb=function(){mo.call(this),this.pushButton=!0};Zc(Nb,mo);var Fp=function(){mo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Zc(Fp,mo);var CS=function(){var t,e;wf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+Bg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Ka(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Zr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zc(CS,wf),Fp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Fp.prototype.createOption=function(t){var e=new CS;return e.Parent=this,e.optionName=t,this.Kids.push(e),Bje.call(this.scope,e),e};var Cb=function(){mo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Zr.CheckBox.createAppearanceStream()};Zc(Cb,mo);var om=function(){wf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,13)},set:function(e){e?this.Ff=Di(this.Ff,13):this.Ff=Ri(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,21)},set:function(e){e?this.Ff=Di(this.Ff,21):this.Ff=Ri(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,23)},set:function(e){e?this.Ff=Di(this.Ff,23):this.Ff=Ri(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,24)},set:function(e){e?this.Ff=Di(this.Ff,24):this.Ff=Ri(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,25)},set:function(e){e?this.Ff=Di(this.Ff,25):this.Ff=Ri(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,26)},set:function(e){e?this.Ff=Di(this.Ff,26):this.Ff=Ri(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zc(om,wf);var _b=function(){om.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Oi(this.Ff,14)},set:function(t){t?this.Ff=Di(this.Ff,14):this.Ff=Ri(this.Ff,14)}}),this.password=!0};Zc(_b,om);var Zr={CheckBox:{createAppearanceStream:function(){return{N:{On:Zr.CheckBox.YesNormal},D:{On:Zr.CheckBox.YesPushDown,Off:Zr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=Bk(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+On(Zr.internal.getWidth(t))+" "+On(Zr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+On(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Rf(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Zr.internal.getHeight(t),o=Zr.internal.getWidth(t),l=Bk(t,t.caption);return a.push("1 g"),a.push("0 0 "+On(o)+" "+On(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+On(o-1)+" "+On(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+On(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+On(Zr.internal.getWidth(t))+" "+On(Zr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Zr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Zr.RadioButton.Circle.YesNormal,e.D[t]=Zr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Rf(t);e.scope=t.scope;var r=[],n=Zr.internal.getWidth(t)<=Zr.internal.getHeight(t)?Zr.internal.getWidth(t)/4:Zr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Zr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+l0(Zr.internal.getWidth(t)/2)+" "+l0(Zr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=[],n=Zr.internal.getWidth(t)<=Zr.internal.getHeight(t)?Zr.internal.getWidth(t)/4:Zr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Zr.internal.Bezier_C).toFixed(5)),o=Number((n*Zr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+l0(Zr.internal.getWidth(t)/2)+" "+l0(Zr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+l0(Zr.internal.getWidth(t)/2)+" "+l0(Zr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=[],n=Zr.internal.getWidth(t)<=Zr.internal.getHeight(t)?Zr.internal.getWidth(t)/4:Zr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Zr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+l0(Zr.internal.getWidth(t)/2)+" "+l0(Zr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Zr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Zr.RadioButton.Cross.YesNormal,e.D[t]=Zr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Rf(t);e.scope=t.scope;var r=[],n=Zr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+On(Zr.internal.getWidth(t)-2)+" "+On(Zr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(On(n.x1.x)+" "+On(n.x1.y)+" m"),r.push(On(n.x2.x)+" "+On(n.x2.y)+" l"),r.push(On(n.x4.x)+" "+On(n.x4.y)+" m"),r.push(On(n.x3.x)+" "+On(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=Zr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+On(Zr.internal.getWidth(t))+" "+On(Zr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+On(Zr.internal.getWidth(t)-2)+" "+On(Zr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(On(r.x1.x)+" "+On(r.x1.y)+" m"),n.push(On(r.x2.x)+" "+On(r.x2.y)+" l"),n.push(On(r.x4.x)+" "+On(r.x4.y)+" m"),n.push(On(r.x3.x)+" "+On(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Rf(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+On(Zr.internal.getWidth(t))+" "+On(Zr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Zr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Zr.internal.getWidth(t),r=Zr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Zr.internal.getWidth=function(t){var e=0;return Ka(t)==="object"&&(e=fV(t.Rect[2])),e},Zr.internal.getHeight=function(t){var e=0;return Ka(t)==="object"&&(e=fV(t.Rect[3])),e};var Bje=mi.addField=function(t){if(Pje(this,t),!(t instanceof wf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};mi.AcroFormChoiceField=Bp,mi.AcroFormListBox=Tp,mi.AcroFormComboBox=kp,mi.AcroFormEditBox=wb,mi.AcroFormButton=mo,mi.AcroFormPushButton=Nb,mi.AcroFormRadioButton=Fp,mi.AcroFormCheckBox=Cb,mi.AcroFormTextField=om,mi.AcroFormPasswordField=_b,mi.AcroFormAppearance=Zr,mi.AcroForm={ChoiceField:Bp,ListBox:Tp,ComboBox:kp,EditBox:wb,Button:mo,PushButton:Nb,RadioButton:Fp,CheckBox:Cb,TextField:om,PasswordField:_b,Appearance:Zr},qr.AcroForm={ChoiceField:Bp,ListBox:Tp,ComboBox:kp,EditBox:wb,Button:mo,PushButton:Nb,RadioButton:Fp,CheckBox:Cb,TextField:om,PasswordField:_b,Appearance:Zr};var Tje=qr.AcroForm;function mre(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(k,B){var D,X,he,Ae,fe,me=r;if((B=B||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(I(k))for(fe in n)for(he=n[fe],D=0;D<he.length;D+=1){for(Ae=!0,X=0;X<he[D].length;X+=1)if(he[D][X]!==void 0&&he[D][X]!==k[X]){Ae=!1;break}if(Ae===!0){me=fe;break}}else for(fe in n)for(he=n[fe],D=0;D<he.length;D+=1){for(Ae=!0,X=0;X<he[D].length;X+=1)if(he[D][X]!==void 0&&he[D][X]!==k.charCodeAt(X)){Ae=!1;break}if(Ae===!0){me=fe;break}}return me===r&&B!==r&&(me=B),me},s=function k(B){for(var D=this.internal.write,X=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var Ae=[];if(Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Image"}),Ae.push({key:"Width",value:B.width}),Ae.push({key:"Height",value:B.height}),B.colorSpace===v.INDEXED?Ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(Ae.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===v.DEVICE_CMYK&&Ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ae.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&Ae.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var fe="",me=0,ne=B.transparency.length;me<ne;me++)fe+=B.transparency[me]+" "+B.transparency[me]+" ";Ae.push({key:"Mask",value:"["+fe+"]"})}B.sMask!==void 0&&Ae.push({key:"SMask",value:B.objectId+1+" 0 R"});var Pe=B.filter!==void 0?["/"+B.filter]:void 0;if(X({data:B.data,additionalKeyValues:Ae,alreadyAppliedFilters:Pe,objectId:B.objectId}),D("endobj"),"sMask"in B&&B.sMask!==void 0){var Te,O=(Te=B.sMaskBitsPerComponent)!==null&&Te!==void 0?Te:B.bitsPerComponent,K={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:B.sMask};"filter"in B&&(K.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(B.width),K.filter=B.filter),k.call(this,K)}if(B.colorSpace===v.INDEXED){var q=this.internal.newObject();X({data:S(new Uint8Array(B.palette)),objectId:q}),D("endobj")}},o=function(){var k=this.internal.collections[e+"images"];for(var B in k)s.call(this,k[B])},l=function(){var k,B=this.internal.collections[e+"images"],D=this.internal.write;for(var X in B)D("/I"+(k=B[X]).index,k.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[e+"images"];return c.call(this),k},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},f=function(k){return typeof t["process"+k.toUpperCase()]=="function"},A=function(k){return Ka(k)==="object"&&k.nodeType===1},h=function(k,B){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var D=""+k.getAttribute("src");if(D.indexOf("data:image/")===0)return oE(unescape(D).split("base64,").pop());var X=t.loadFile(D,!0);if(X!==void 0)return X}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var he;switch(B){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;default:he="image/jpeg"}return oE(k.toDataURL(he,1).split("base64,").pop())}},m=function(k){var B=this.internal.collections[e+"images"];if(B){for(var D in B)if(k===B[D].alias)return B[D]}},p=function(k,B,D){return k||B||(k=-96,B=-96),k<0&&(k=-1*D.width*72/k/this.internal.scaleFactor),B<0&&(B=-1*D.height*72/B/this.internal.scaleFactor),k===0&&(k=B*D.width/D.height),B===0&&(B=k*D.height/D.width),[k,B]},x=function(k,B,D,X,he,Ae){var fe=p.call(this,D,X,he),me=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,Pe=u.call(this);if(D=fe[0],X=fe[1],Pe[he.index]=he,Ae){Ae*=Math.PI/180;var Te=Math.cos(Ae),O=Math.sin(Ae),K=function(U){return U.toFixed(4)},q=[K(Te),K(O),K(-1*O),K(Te),0,0,"cm"]}this.internal.write("q"),Ae?(this.internal.write([1,"0","0",1,me(k),ne(B+X),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([me(D),"0","0",me(X),"0","0","cm"].join(" "))):this.internal.write([me(D),"0","0",me(X),me(k),ne(B+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(k){var B,D,X=0;if(typeof k=="string")for(D=k.length,B=0;B<D;B++)X=(X<<5)-X+k.charCodeAt(B),X|=0;else if(I(k))for(D=k.byteLength/2,B=0;B<D;B++)X=(X<<5)-X+k[B],X|=0;return X},w=t.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var B=!0;return k.length===0&&(B=!1),k.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(B=!1),B},j=t.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var B=k.indexOf(",");return B<0?null:k.substring(0,B).trim().endsWith("base64")?k.substring(B+1):null};t.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},_=t.__addimage__.binaryStringToUint8Array=function(k){for(var B=k.length,D=new Uint8Array(B),X=0;X<B;X++)D[X]=k.charCodeAt(X);return D},S=t.__addimage__.arrayBufferToBinaryString=function(k){for(var B="",D=I(k)?k:new Uint8Array(k),X=0;X<D.length;X+=8192)B+=String.fromCharCode.apply(null,D.subarray(X,X+8192));return B};t.addImage=function(){var k,B,D,X,he,Ae,fe,me,ne;if(typeof arguments[1]=="number"?(B=r,D=arguments[1],X=arguments[2],he=arguments[3],Ae=arguments[4],fe=arguments[5],me=arguments[6],ne=arguments[7]):(B=arguments[1],D=arguments[2],X=arguments[3],he=arguments[4],Ae=arguments[5],fe=arguments[6],me=arguments[7],ne=arguments[8]),Ka(k=arguments[0])==="object"&&!A(k)&&"imageData"in k){var Pe=k;k=Pe.imageData,B=Pe.format||B||r,D=Pe.x||D||0,X=Pe.y||X||0,he=Pe.w||Pe.width||he,Ae=Pe.h||Pe.height||Ae,fe=Pe.alias||fe,me=Pe.compression||me,ne=Pe.rotation||Pe.angle||ne}var Te=this.internal.getFilters();if(me===void 0&&Te.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(D)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var O=E.call(this,k,B,fe,me);return x.call(this,D,X,he,Ae,O,ne),this};var E=function(k,B,D,X){var he,Ae,fe;if(typeof k=="string"&&a(k)===r){k=unescape(k);var me=F(k,!1);(me!==""||(me=t.loadFile(k,!0))!==void 0)&&(k=me)}if(A(k)&&(k=h(k,B)),B=a(k,B),!f(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((fe=D)==null||fe.length===0)&&(D=function(ne){return typeof ne=="string"||I(ne)?b(ne):I(ne.data)?b(ne.data):null}(k)),(he=m.call(this,D))||(k instanceof Uint8Array||B==="RGBA"||(Ae=k,k=_(k)),he=this["process"+B.toUpperCase()](k,d.call(this),D,function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in t.image_compression?ne:y.NONE}(X),Ae)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},F=t.__addimage__.convertBase64ToBinaryString=function(k,B){B=typeof B!="boolean"||B;var D,X="";if(typeof k=="string"){var he;D=(he=j(k))!==null&&he!==void 0?he:k;try{X=oE(D)}catch(Ae){if(B)throw w(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(k){var B,D,X="";if(A(k)&&(k=h(k)),typeof k=="string"&&a(k)===r&&((X=F(k,!1))===""&&(X=t.loadFile(k)||""),k=X),D=a(k),!f(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(k instanceof Uint8Array||(k=_(k)),!(B=this["process"+D.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=D,B}})(qr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};qr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var A=0;A<u.length;A++){n=u[A];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(p.objId),y=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+h(v(y))+") >>",p.content=s;var b=p.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(p.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var j=this.annotations._nameMap[n.options.name];n.options.pageNumber=j.page,n.options.top=j.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var I=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(qr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=t.__arabicParser__.isArabicEndLetter=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(p){return o(p)&&a.indexOf(p.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(p){return o(p)&&s(p)&&e[p.charCodeAt(0)].length==4},f=t.__arabicParser__.resolveLigatures=function(p){var x=0,v=r,y="",b=0;for(x=0;x<p.length;x+=1)v[p.charCodeAt(x)]!==void 0?(b++,typeof(v=v[p.charCodeAt(x)])=="number"&&(y+=String.fromCharCode(v),v=r,b=0),x===p.length-1&&(v=r,y+=p.charAt(x-(b-1)),x-=b-1,b=0)):(v=r,y+=p.charAt(x-b),x-=b,b=0);return y};t.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(p,x,v){return o(p)?s(p)===!1?-1:!u(p)||!o(x)&&!o(v)||!o(v)&&l(x)||l(p)&&!o(x)||l(p)&&c(x)||l(p)&&l(x)?0:d(p)&&o(x)&&!l(x)&&o(v)&&u(v)?3:l(p)||!o(v)?1:2:-1},h=function(p){var x=0,v=0,y=0,b="",w="",j="",I=(p=p||"").split("\\s+"),_=[];for(x=0;x<I.length;x+=1){for(_.push(""),v=0;v<I[x].length;v+=1)b=I[x][v],w=I[x][v-1],j=I[x][v+1],o(b)?(y=A(b,w,j),_[x]+=y!==-1?String.fromCharCode(e[b.charCodeAt(0)][y]):b):_[x]+=b;_[x]=f(_[x])}return _.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var p,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(x)){var y=0;for(v=[],y=0;y<x.length;y+=1)Array.isArray(x[y])?v.push([h(x[y][0]),x[y][1],x[y][2]]):v.push([h(x[y])]);p=v}else p=h(x);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};t.events.push(["preProcessText",m])}(qr.API),qr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(qr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(p){m=p}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),A=u.scaleFactor||this.internal.scaleFactor,h=0,m=0,p=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=u.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,w){return b.concat(x.splitTextToSize(w,v))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)h<(p=this.getStringUnitWidth(c[y],{font:f})*d)&&(h=p);return h!==0&&(m=c.length),{w:h/=A,h:Math.max((m*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,h&&A&&(this.printHeaderRow(c.lineNumber,!0),c.y+=A[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,f,A){if(n.call(this),!d)throw new Error("No data for PDF table.");var h,m,p,x,v=[],y=[],b=[],w={},j={},I=[],_=[],S=(A=A||{}).autoSize||!1,E=A.printHeaders!==!1,F=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,k=A.margins||Object.assign({width:this.getPageWidth()},e),B=typeof A.padding=="number"?A.padding:3,D=A.headerBackgroundColor||"#c8c8c8",X=A.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=X,this.setFontSize(F),f==null)y=v=Object.keys(d[0]),b=v.map(function(){return"left"});else if(Array.isArray(f)&&Ka(f[0])==="object")for(v=f.map(function(Pe){return Pe.name}),y=f.map(function(Pe){return Pe.prompt||Pe.name||""}),b=f.map(function(Pe){return Pe.align||"left"}),h=0;h<f.length;h+=1)j[f[h].name]=.7499990551181103*f[h].width;else Array.isArray(f)&&typeof f[0]=="string"&&(y=v=f,b=v.map(function(){return"left"}));if(S||Array.isArray(f)&&typeof f[0]=="string")for(h=0;h<v.length;h+=1){for(w[x=v[h]]=d.map(function(Pe){return Pe[x]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(y[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=w[x],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)I.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[x]=Math.max.apply(null,I)+B+B,I=[]}if(E){var he={};for(h=0;h<v.length;h+=1)he[v[h]]={},he[v[h]].text=y[h],he[v[h]].align=b[h];var Ae=l.call(this,he,j);_=v.map(function(Pe){return new s(c,u,j[Pe],Ae,he[Pe].text,void 0,he[Pe].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var fe=f.reduce(function(Pe,Te){return Pe[Te.name]=Te.align,Pe},{});for(h=0;h<d.length;h+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:h,data:d[h]},this);var me=l.call(this,d[h],j);for(p=0;p<v.length;p+=1){var ne=d[h][v[p]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:h,col:p,data:ne},this),o.call(this,new s(c,u,j[v[p]],me,ne,h+2,fe[v[p]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,u[h]-d-d)},this).map(function(h){return this.getLineHeightFactor()*h.length*f/A+d+d},this).reduce(function(h,m){return Math.max(h,m)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){d=this.internal.__cell__.tableHeaderRow[h].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,A.push(d)),d.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(m)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),r=!1}}(qr.API);var pre={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gre=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tk=mre(gre),xre=[100,200,300,400,500,600,700,800,900],kje=mre(xre);function a5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return pre[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof Tk[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function hV(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Fje={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},AV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function mV(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function pV(t){return t.trimLeft()}function Oje(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Dje(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var PC,gV,xV,ix,BC,vV,yV,bV,s5=["times"];function wV(t,e,r,n,a){var s=4,o=CV;switch(a){case qr.API.image_compression.FAST:s=1,o=NV;break;case qr.API.image_compression.MEDIUM:s=6,o=_V;break;case qr.API.image_compression.SLOW:s=9,o=EV}t=function(c,u,d,f){for(var A,h=c.length/u,m=new Uint8Array(c.length+h),p=[Rje,NV,CV,_V,EV],x=0;x<h;x+=1){var v=x*u,y=c.subarray(v,v+u);if(f)m.set(f(y,d,A),v+x);else{for(var b=p.length,w=[],j=0;j<b;j+=1)w[j]=p[j](y,d,A);var I=Lje(w.concat());m.set(w[I],v+x)}A=y}return m}(t,e,Math.ceil(r*n/8),o);var l=_k(t,{level:s});return qr.API.__addimage__.arrayBufferToBinaryString(l)}function Rje(t){var e=Array.apply([],t);return e.unshift(0),e}function NV(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function CV(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function _V(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function EV(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=Mje(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function Mje(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function Lje(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function i5(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return vre(t,a)>>s&o}function SV(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,f){if(d+1<u.byteLength)u.setUint16(d,f,!1);else{var A=f>>8&255;u.setUint8(d,A)}})(t,s,vre(t,s)&~(l<<o)&65535|c)}function vre(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Uje(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],f=0,A=null,h=0,m=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=t[e++];f=t[e++]|t[e++]<<8,A=t[e++],1&p||(A=null),h=p>>2&7,e++;break;case 254:for(;;){if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var x=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],j=w>>6&1,I=1<<1+(7&w),_=l,S=c,E=!1;w>>7&&(E=!0,_=e,S=I,e+=3*I);var F=e;for(e++;;){var k;if(!((k=t[e++])>=0))throw Error("Invalid block size");if(k===0)break;e+=k}d.push({x,y:v,width:y,height:b,has_local_palette:E,palette_offset:_,palette_size:S,data_offset:F,data_length:e-F,transparent_index:A,interlaced:!!j,delay:f,disposal:h});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return m},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,D){var X=this.frameInfo(B),he=X.width*X.height,Ae=new Uint8Array(he);IV(t,X.data_offset,Ae,he);var fe=X.palette_offset,me=X.transparent_index;me===null&&(me=256);var ne=X.width,Pe=r-ne,Te=ne,O=4*(X.y*r+X.x),K=4*((X.y+X.height)*r+X.x),q=O,U=4*Pe;X.interlaced===!0&&(U+=4*r*7);for(var W=8,J=0,M=Ae.length;J<M;++J){var H=Ae[J];if(Te===0&&(Te=ne,(q+=U)>=K&&(U=4*Pe+4*r*(W-1),q=O+(ne+Pe)*(W<<1),W>>=1)),H===me)q+=4;else{var te=t[fe+3*H],ve=t[fe+3*H+1],Q=t[fe+3*H+2];D[q++]=Q,D[q++]=ve,D[q++]=te,D[q++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(B,D){var X=this.frameInfo(B),he=X.width*X.height,Ae=new Uint8Array(he);IV(t,X.data_offset,Ae,he);var fe=X.palette_offset,me=X.transparent_index;me===null&&(me=256);var ne=X.width,Pe=r-ne,Te=ne,O=4*(X.y*r+X.x),K=4*((X.y+X.height)*r+X.x),q=O,U=4*Pe;X.interlaced===!0&&(U+=4*r*7);for(var W=8,J=0,M=Ae.length;J<M;++J){var H=Ae[J];if(Te===0&&(Te=ne,(q+=U)>=K&&(U=4*Pe+4*r*(W-1),q=O+(ne+Pe)*(W<<1),W>>=1)),H===me)q+=4;else{var te=t[fe+3*H],ve=t[fe+3*H+1],Q=t[fe+3*H+2];D[q++]=te,D[q++]=ve,D[q++]=Q,D[q++]=255}--Te}}}function IV(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,f=0,A=0,h=t[e++],m=new Int32Array(4096),p=null;;){for(;d<16&&h!==0;)f|=t[e++]<<d,d+=8,h===1?h=t[e++]:--h;if(d<c)break;var x=f&u;if(f>>=c,d-=c,x!==s){if(x===o)break;for(var v=x<l?x:p,y=0,b=v;b>s;)b=m[b]>>8,++y;var w=b;if(A+y+(v!==x?1:0)>n)return void is.log("Warning, gif stream longer than expected.");r[A++]=w;var j=A+=y;for(v!==x&&(r[A++]=w),b=v;y--;)b=m[b],r[--j]=255&b,b>>=8;p!==null&&l<4096&&(m[l++]=p<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),p=x}else l=o+1,u=(1<<(c=a+1))-1,p=null}return A!==n&&is.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function o5(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),A=new Array(65535),h=new Array(64),m=new Array(64),p=[],x=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),j=new Array(256),I=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ae(O,K){for(var q=0,U=0,W=new Array,J=1;J<=16;J++){for(var M=1;M<=O[J];M++)W[K[U]]=[],W[K[U]][0]=q,W[K[U]][1]=J,U++,q++;q*=2}return W}function fe(O){for(var K=O[0],q=O[1]-1;q>=0;)K&1<<q&&(x|=1<<v),q--,--v<0&&(x==255?(me(255),me(0)):me(x),v=7,x=0)}function me(O){p.push(O)}function ne(O){me(O>>8&255),me(255&O)}function Pe(O,K,q,U,W){for(var J,M=W[0],H=W[240],te=function(Ve,We){var pt,wt,Ct,St,Rt,jt,Ue,Be,ye,oe,Z=0;for(ye=0;ye<8;++ye){pt=Ve[Z],wt=Ve[Z+1],Ct=Ve[Z+2],St=Ve[Z+3],Rt=Ve[Z+4],jt=Ve[Z+5],Ue=Ve[Z+6];var Ne=pt+(Be=Ve[Z+7]),Re=pt-Be,ge=wt+Ue,Xe=wt-Ue,vt=Ct+jt,it=Ct-jt,de=St+Rt,Ce=St-Rt,Ye=Ne+de,ft=Ne-de,we=ge+vt,Le=ge-vt;Ve[Z]=Ye+we,Ve[Z+4]=Ye-we;var gt=.707106781*(Le+ft);Ve[Z+2]=ft+gt,Ve[Z+6]=ft-gt;var Ut=.382683433*((Ye=Ce+it)-(Le=Xe+Re)),Mt=.5411961*Ye+Ut,Yt=1.306562965*Le+Ut,st=.707106781*(we=it+Xe),_e=Re+st,xe=Re-st;Ve[Z+5]=xe+Mt,Ve[Z+3]=xe-Mt,Ve[Z+1]=_e+Yt,Ve[Z+7]=_e-Yt,Z+=8}for(Z=0,ye=0;ye<8;++ye){pt=Ve[Z],wt=Ve[Z+8],Ct=Ve[Z+16],St=Ve[Z+24],Rt=Ve[Z+32],jt=Ve[Z+40],Ue=Ve[Z+48];var ie=pt+(Be=Ve[Z+56]),Oe=pt-Be,le=wt+Ue,De=wt-Ue,He=Ct+jt,P=Ct-jt,R=St+Rt,L=St-Rt,G=ie+R,re=ie-R,ue=le+He,$e=le-He;Ve[Z]=G+ue,Ve[Z+32]=G-ue;var rt=.707106781*($e+re);Ve[Z+16]=re+rt,Ve[Z+48]=re-rt;var At=.382683433*((G=L+P)-($e=De+Oe)),Je=.5411961*G+At,ht=1.306562965*$e+At,Ot=.707106781*(ue=P+De),Se=Oe+Ot,tt=Oe-Ot;Ve[Z+40]=tt+Je,Ve[Z+24]=tt-Je,Ve[Z+8]=Se+ht,Ve[Z+56]=Se-ht,Z++}for(ye=0;ye<64;++ye)oe=Ve[ye]*We[ye],h[ye]=oe>0?oe+.5|0:oe-.5|0;return h}(O,K),ve=0;ve<64;++ve)m[_[ve]]=te[ve];var Q=m[0]-q;q=m[0],Q==0?fe(U[0]):(fe(U[A[J=32767+Q]]),fe(f[J]));for(var Ke=63;Ke>0&&m[Ke]==0;)Ke--;if(Ke==0)return fe(M),q;for(var ae,ee=1;ee<=Ke;){for(var Fe=ee;m[ee]==0&&ee<=Ke;)++ee;var ce=ee-Fe;if(ce>=16){ae=ce>>4;for(var be=1;be<=ae;++be)fe(H);ce&=15}J=32767+m[ee],fe(W[(ce<<4)+A[J]]),fe(f[J]),ee++}return Ke!=63&&fe(M),q}function Te(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(K){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var W=o((q[U]*K+50)/100);W=Math.min(Math.max(W,1),255),l[_[U]]=W}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],M=0;M<64;M++){var H=o((J[M]*K+50)/100);H=Math.min(Math.max(H,1),255),c[_[M]]=H}for(var te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,Q=0;Q<8;Q++)for(var Ke=0;Ke<8;Ke++)u[ve]=1/(l[_[ve]]*te[Q]*te[Ke]*8),d[ve]=1/(c[_[ve]]*te[Q]*te[Ke]*8),ve++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,K){K&&Te(K),p=new Array,x=0,v=7,ne(65496),ne(65504),ne(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),ne(1),ne(1),me(0),me(0),function(){ne(65499),ne(132),me(0);for(var wt=0;wt<64;wt++)me(l[wt]);me(1);for(var Ct=0;Ct<64;Ct++)me(c[Ct])}(),function(wt,Ct){ne(65472),ne(17),me(8),ne(Ct),ne(wt),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)}(O.width,O.height),function(){ne(65476),ne(418),me(0);for(var wt=0;wt<16;wt++)me(S[wt+1]);for(var Ct=0;Ct<=11;Ct++)me(E[Ct]);me(16);for(var St=0;St<16;St++)me(F[St+1]);for(var Rt=0;Rt<=161;Rt++)me(k[Rt]);me(1);for(var jt=0;jt<16;jt++)me(B[jt+1]);for(var Ue=0;Ue<=11;Ue++)me(D[Ue]);me(17);for(var Be=0;Be<16;Be++)me(X[Be+1]);for(var ye=0;ye<=161;ye++)me(he[ye])}(),ne(65498),ne(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var q=0,U=0,W=0;x=0,v=7,this.encode.displayName="_encode_";for(var J,M,H,te,ve,Q,Ke,ae,ee,Fe=O.data,ce=O.width,be=O.height,Ve=4*ce,We=0;We<be;){for(J=0;J<Ve;){for(ve=Ve*We+J,Ke=-1,ae=0,ee=0;ee<64;ee++)Q=ve+(ae=ee>>3)*Ve+(Ke=4*(7&ee)),We+ae>=be&&(Q-=Ve*(We+1+ae-be)),J+Ke>=Ve&&(Q-=J+Ke-Ve+4),M=Fe[Q++],H=Fe[Q++],te=Fe[Q++],y[ee]=(I[M]+I[H+256|0]+I[te+512|0]>>16)-128,b[ee]=(I[M+768|0]+I[H+1024|0]+I[te+1280|0]>>16)-128,w[ee]=(I[M+1280|0]+I[H+1536|0]+I[te+1792|0]>>16)-128;q=Pe(y,u,q,e,n),U=Pe(b,d,U,r,a),W=Pe(w,d,W,r,a),J+=32}We+=8}if(v>=0){var pt=[];pt[1]=v+1,pt[0]=(1<<v+1)-1,fe(pt)}return ne(65497),new Uint8Array(p)},t=t||50,function(){for(var O=String.fromCharCode,K=0;K<256;K++)j[K]=O(K)}(),e=Ae(S,E),r=Ae(B,D),n=Ae(F,k),a=Ae(X,he),function(){for(var O=1,K=2,q=1;q<=15;q++){for(var U=O;U<K;U++)A[32767+U]=q,f[32767+U]=[],f[32767+U][1]=q,f[32767+U][0]=U;for(var W=-(K-1);W<=-O;W++)A[32767+W]=q,f[32767+W]=[],f[32767+W][1]=q,f[32767+W][0]=K-1+W;O<<=1,K<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),Te(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qd(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jV(t){function e(E){if(!E)throw Error("assert :P")}function r(E,F,k){for(var B=0;4>B;B++)if(E[F+B]!=k.charCodeAt(B))return!0;return!1}function n(E,F,k,B,D){for(var X=0;X<D;X++)E[F+X]=k[B+X]}function a(E,F,k,B){for(var D=0;D<B;D++)E[F+D]=k}function s(E){return new Int32Array(E)}function o(E,F){for(var k=[],B=0;B<E;B++)k.push(new F);return k}function l(E,F){var k=[];return function B(D,X,he){for(var Ae=he[X],fe=0;fe<Ae&&(D.push(he.length>X+1?[]:new F),!(he.length<X+1));fe++)B(D[fe],X+1,he)}(k,0,E),k}var c=function(){var E=this;function F(N,T){for(var z=1<<T-1>>>0;N&z;)z>>>=1;return z?(N&z-1)+z:N}function k(N,T,z,se,Ie){e(!(se%z));do N[T+(se-=z)]=Ie;while(0<se)}function B(N,T,z,se,Ie){if(e(2328>=Ie),512>=Ie)var Me=s(512);else if((Me=s(Ie))==null)return 0;return function(Ge,qe,Ze,ct,Et,Kt){var ut,Pt,Lt=qe,or=1<<Ze,$t=s(16),hr=s(16);for(e(Et!=0),e(ct!=null),e(Ge!=null),e(0<Ze),Pt=0;Pt<Et;++Pt){if(15<ct[Pt])return 0;++$t[ct[Pt]]}if($t[0]==Et)return 0;for(hr[1]=0,ut=1;15>ut;++ut){if($t[ut]>1<<ut)return 0;hr[ut+1]=hr[ut]+$t[ut]}for(Pt=0;Pt<Et;++Pt)ut=ct[Pt],0<ct[Pt]&&(Kt[hr[ut]++]=Pt);if(hr[15]==1)return(ct=new D).g=0,ct.value=Kt[0],k(Ge,Lt,1,or,ct),or;var Ar,_r=-1,yr=or-1,un=0,Jr=1,Un=1,an=1<<Ze;for(Pt=0,ut=1,Et=2;ut<=Ze;++ut,Et<<=1){if(Jr+=Un<<=1,0>(Un-=$t[ut]))return 0;for(;0<$t[ut];--$t[ut])(ct=new D).g=ut,ct.value=Kt[Pt++],k(Ge,Lt+un,Et,an,ct),un=F(un,ut)}for(ut=Ze+1,Et=2;15>=ut;++ut,Et<<=1){if(Jr+=Un<<=1,0>(Un-=$t[ut]))return 0;for(;0<$t[ut];--$t[ut]){if(ct=new D,(un&yr)!=_r){for(Lt+=an,Ar=1<<(_r=ut)-Ze;15>_r&&!(0>=(Ar-=$t[_r]));)++_r,Ar<<=1;or+=an=1<<(Ar=_r-Ze),Ge[qe+(_r=un&yr)].g=Ar+Ze,Ge[qe+_r].value=Lt-qe-_r}ct.g=ut-Ze,ct.value=Kt[Pt++],k(Ge,Lt+(un>>Ze),Et,an,ct),un=F(un,ut)}}return Jr!=2*hr[15]-1?0:or}(N,T,z,se,Ie,Me)}function D(){this.value=this.g=0}function X(){this.value=this.g=0}function he(){this.G=o(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Qm,X)}function Ae(N,T,z,se){e(N!=null),e(T!=null),e(2147483648>se),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=T,N.pa=z,N.Jd=T,N.Yc=z+se,N.Zc=4<=se?z+se-4+1:z,M(N)}function fe(N,T){for(var z=0;0<T--;)z|=te(N,128)<<T;return z}function me(N,T){var z=fe(N,T);return H(N)?-z:z}function ne(N,T,z,se){var Ie,Me=0;for(e(N!=null),e(T!=null),e(4294967288>se),N.Sb=se,N.Ra=0,N.u=0,N.h=0,4<se&&(se=4),Ie=0;Ie<se;++Ie)Me+=T[z+Ie]<<8*Ie;N.Ra=Me,N.bb=se,N.oa=T,N.pa=z}function Pe(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<$A-8>>>0,++N.bb,N.u-=8;U(N)&&(N.h=1,N.u=0)}function Te(N,T){if(e(0<=T),!N.h&&T<=su){var z=q(N)&au[T];return N.u+=T,Pe(N),z}return N.h=1,N.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(N){return N.Ra>>>(N.u&$A-1)>>>0}function U(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>$A}function W(N,T){N.u=T,N.h=U(N)}function J(N){N.u>=mh&&(e(N.u>=mh),Pe(N))}function M(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function H(N){return fe(N,1)}function te(N,T){var z=N.Ca;0>N.b&&M(N);var se=N.b,Ie=z*T>>>8,Me=(N.I>>>se>Ie)+0;for(Me?(z-=Ie,N.I-=Ie+1<<se>>>0):z=Ie+1,se=z,Ie=0;256<=se;)Ie+=8,se>>=8;return se=7^Ie+GA[se],N.b-=se,N.Ca=(z<<se)-1,Me}function ve(N,T,z){N[T+0]=z>>24&255,N[T+1]=z>>16&255,N[T+2]=z>>8&255,N[T+3]=255&z}function Q(N,T){return N[T+0]|N[T+1]<<8}function Ke(N,T){return Q(N,T)|N[T+2]<<16}function ae(N,T){return Q(N,T)|Q(N,T+2)<<16}function ee(N,T){var z=1<<T;return e(N!=null),e(0<T),N.X=s(z),N.X==null?0:(N.Mb=32-T,N.Xa=T,1)}function Fe(N,T){e(N!=null),e(T!=null),e(N.Xa==T.Xa),n(T.X,0,N.X,0,1<<T.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function be(N,T,z,se){e(z!=null),e(se!=null);var Ie=z[0],Me=se[0];return Ie==0&&(Ie=(N*Me+T/2)/T),Me==0&&(Me=(T*Ie+N/2)/N),0>=Ie||0>=Me?0:(z[0]=Ie,se[0]=Me,1)}function Ve(N,T){return N+(1<<T)-1>>>T}function We(N,T){return((4278255360&N)+(4278255360&T)>>>0&4278255360)+((16711935&N)+(16711935&T)>>>0&16711935)>>>0}function pt(N,T){E[T]=function(z,se,Ie,Me,Ge,qe,Ze){var ct;for(ct=0;ct<Ge;++ct){var Et=E[N](qe[Ze+ct-1],Ie,Me+ct);qe[Ze+ct]=We(z[se+ct],Et)}}}function wt(){this.ud=this.hd=this.jd=0}function Ct(N,T){return((4278124286&(N^T))>>>1)+(N&T)>>>0}function St(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function Rt(N,T){return St(N+(N-T+.5>>1))}function jt(N,T,z){return Math.abs(T-z)-Math.abs(N-z)}function Ue(N,T,z,se,Ie,Me,Ge){for(se=Me[Ge-1],z=0;z<Ie;++z)Me[Ge+z]=se=We(N[T+z],se)}function Be(N,T,z,se,Ie){var Me;for(Me=0;Me<z;++Me){var Ge=N[T+Me],qe=Ge>>8&255,Ze=16711935&(Ze=(Ze=16711935&Ge)+((qe<<16)+qe));se[Ie+Me]=(4278255360&Ge)+Ze>>>0}}function ye(N,T){T.jd=255&N,T.hd=N>>8&255,T.ud=N>>16&255}function oe(N,T,z,se,Ie,Me){var Ge;for(Ge=0;Ge<se;++Ge){var qe=T[z+Ge],Ze=qe>>>8,ct=qe,Et=255&(Et=(Et=qe>>>16)+((N.jd<<24>>24)*(Ze<<24>>24)>>>5));ct=255&(ct=(ct+=(N.hd<<24>>24)*(Ze<<24>>24)>>>5)+((N.ud<<24>>24)*(Et<<24>>24)>>>5)),Ie[Me+Ge]=(4278255360&qe)+(Et<<16)+ct}}function Z(N,T,z,se,Ie){E[T]=function(Me,Ge,qe,Ze,ct,Et,Kt,ut,Pt){for(Ze=Kt;Ze<ut;++Ze)for(Kt=0;Kt<Pt;++Kt)ct[Et++]=Ie(qe[se(Me[Ge++])])},E[N]=function(Me,Ge,qe,Ze,ct,Et,Kt){var ut=8>>Me.b,Pt=Me.Ea,Lt=Me.K[0],or=Me.w;if(8>ut)for(Me=(1<<Me.b)-1,or=(1<<ut)-1;Ge<qe;++Ge){var $t,hr=0;for($t=0;$t<Pt;++$t)$t&Me||(hr=se(Ze[ct++])),Et[Kt++]=Ie(Lt[hr&or]),hr>>=ut}else E["VP8LMapColor"+z](Ze,ct,Lt,or,Et,Kt,Ge,qe,Pt)}}function Ne(N,T,z,se,Ie){for(z=T+z;T<z;){var Me=N[T++];se[Ie++]=Me>>16&255,se[Ie++]=Me>>8&255,se[Ie++]=255&Me}}function Re(N,T,z,se,Ie){for(z=T+z;T<z;){var Me=N[T++];se[Ie++]=Me>>16&255,se[Ie++]=Me>>8&255,se[Ie++]=255&Me,se[Ie++]=Me>>24&255}}function ge(N,T,z,se,Ie){for(z=T+z;T<z;){var Me=(Ge=N[T++])>>16&240|Ge>>12&15,Ge=240&Ge|Ge>>28&15;se[Ie++]=Me,se[Ie++]=Ge}}function Xe(N,T,z,se,Ie){for(z=T+z;T<z;){var Me=(Ge=N[T++])>>16&248|Ge>>13&7,Ge=Ge>>5&224|Ge>>3&31;se[Ie++]=Me,se[Ie++]=Ge}}function vt(N,T,z,se,Ie){for(z=T+z;T<z;){var Me=N[T++];se[Ie++]=255&Me,se[Ie++]=Me>>8&255,se[Ie++]=Me>>16&255}}function it(N,T,z,se,Ie,Me){if(Me==0)for(z=T+z;T<z;)ve(se,((Me=N[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Ie+=32;else n(se,Ie,N,T,z)}function de(N,T){E[T][0]=E[N+"0"],E[T][1]=E[N+"1"],E[T][2]=E[N+"2"],E[T][3]=E[N+"3"],E[T][4]=E[N+"4"],E[T][5]=E[N+"5"],E[T][6]=E[N+"6"],E[T][7]=E[N+"7"],E[T][8]=E[N+"8"],E[T][9]=E[N+"9"],E[T][10]=E[N+"10"],E[T][11]=E[N+"11"],E[T][12]=E[N+"12"],E[T][13]=E[N+"13"],E[T][14]=E[N+"0"],E[T][15]=E[N+"0"]}function Ce(N){return N==y4||N==b4||N==xN||N==w4}function Ye(){this.eb=[],this.size=this.A=this.fb=0}function ft(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function we(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ye,this.f.kb=new ft,this.sd=null}function Le(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ut(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function Mt(N,T){var z=N.T,se=T.ba.f.RGBA,Ie=se.eb,Me=se.fb+N.ka*se.A,Ge=Hu[T.ba.S],qe=N.y,Ze=N.O,ct=N.f,Et=N.N,Kt=N.ea,ut=N.W,Pt=T.cc,Lt=T.dc,or=T.Mc,$t=T.Nc,hr=N.ka,Ar=N.ka+N.T,_r=N.U,yr=_r+1>>1;for(hr==0?Ge(qe,Ze,null,null,ct,Et,Kt,ut,ct,Et,Kt,ut,Ie,Me,null,null,_r):(Ge(T.ec,T.fc,qe,Ze,Pt,Lt,or,$t,ct,Et,Kt,ut,Ie,Me-se.A,Ie,Me,_r),++z);hr+2<Ar;hr+=2)Pt=ct,Lt=Et,or=Kt,$t=ut,Et+=N.Rc,ut+=N.Rc,Me+=2*se.A,Ge(qe,(Ze+=2*N.fa)-N.fa,qe,Ze,Pt,Lt,or,$t,ct,Et,Kt,ut,Ie,Me-se.A,Ie,Me,_r);return Ze+=N.fa,N.j+Ar<N.o?(n(T.ec,T.fc,qe,Ze,_r),n(T.cc,T.dc,ct,Et,yr),n(T.Mc,T.Nc,Kt,ut,yr),z--):1&Ar||Ge(qe,Ze,null,null,ct,Et,Kt,ut,ct,Et,Kt,ut,Ie,Me+se.A,null,null,_r),z}function Yt(N,T,z){var se=N.F,Ie=[N.J];if(se!=null){var Me=N.U,Ge=T.ba.S,qe=Ge==gN||Ge==xN;T=T.ba.f.RGBA;var Ze=[0],ct=N.ka;Ze[0]=N.T,N.Kb&&(ct==0?--Ze[0]:(--ct,Ie[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ze[0]=N.o-N.j-ct));var Et=T.eb;ct=T.fb+ct*T.A,N=D8(se,Ie[0],N.width,Me,Ze,Et,ct+(qe?0:3),T.A),e(z==Ze),N&&Ce(Ge)&&R1(Et,ct,qe,Me,Ze,T.A)}return 0}function st(N){var T=N.ma,z=T.ba.S,se=11>z,Ie=z==mN||z==pN||z==gN||z==v4||z==12||Ce(z);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!j1(T.Oa,N,Ie?11:12))return 0;if(Ie&&Ce(z)&&Uu(),N.da)alert("todo:use_scaling");else{if(se){if(T.Ib=Ut,N.Kb){if(z=N.U+1>>1,T.memory=s(N.U+2*z),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+N.U,T.Mc=T.cc,T.Nc=T.dc+z,T.Ib=Mt,Uu()}}else alert("todo:EmitYUV");Ie&&(T.Jb=Yt,se&&Bc())}if(se&&!J8){for(N=0;256>N;++N)ude[N]=89858*(N-128)+yN>>vN,hde[N]=-22014*(N-128)+yN,fde[N]=-45773*(N-128),dde[N]=113618*(N-128)+yN>>vN;for(N=L1;N<_4;++N)T=76283*(N-16)+yN>>vN,Ade[N-L1]=Bn(T,255),mde[N-L1]=Bn(T+8>>4,15);J8=1}return 1}function _e(N){var T=N.ma,z=N.U,se=N.T;return e(!(1&N.ka)),0>=z||0>=se?0:(z=T.Ib(N,T),T.Jb!=null&&T.Jb(N,T,z),T.Dc+=z,1)}function xe(N){N.ma.memory=null}function ie(N,T,z,se){return Te(N,8)!=47?0:(T[0]=Te(N,14)+1,z[0]=Te(N,14)+1,se[0]=Te(N,1),Te(N,3)!=0?0:!N.h)}function Oe(N,T){if(4>N)return N+1;var z=N-2>>1;return(2+(1&N)<<z)+Te(T,z)+1}function le(N,T){return 120<T?T-120:1<=(z=((z=Xue[T-1])>>4)*N+(8-(15&z)))?z:1;var z}function De(N,T,z){var se=q(z),Ie=N[T+=255&se].g-8;return 0<Ie&&(W(z,z.u+8),se=q(z),T+=N[T].value,T+=se&(1<<Ie)-1),W(z,z.u+N[T].g),N[T].value}function He(N,T,z){return z.g+=N.g,z.value+=N.value<<T>>>0,e(8>=z.g),N.g}function P(N,T,z){var se=N.xc;return e((T=se==0?0:N.vc[N.md*(z>>se)+(T>>se)])<N.Wb),N.Ya[T]}function R(N,T,z,se){var Ie=N.ab,Me=N.c*T,Ge=N.C;T=Ge+T;var qe=z,Ze=se;for(se=N.Ta,z=N.Ua;0<Ie--;){var ct=N.gc[Ie],Et=Ge,Kt=T,ut=qe,Pt=Ze,Lt=(Ze=se,qe=z,ct.Ea);switch(e(Et<Kt),e(Kt<=ct.nc),ct.hc){case 2:Ci(ut,Pt,(Kt-Et)*Lt,Ze,qe);break;case 0:var or=Et,$t=Kt,hr=Ze,Ar=qe,_r=(an=ct).Ea;or==0&&(B1(ut,Pt,null,null,1,hr,Ar),Ue(ut,Pt+1,0,0,_r-1,hr,Ar+1),Pt+=_r,Ar+=_r,++or);for(var yr=1<<an.b,un=yr-1,Jr=Ve(_r,an.b),Un=an.K,an=an.w+(or>>an.b)*Jr;or<$t;){var la=Un,so=an,Qn=1;for(Hg(ut,Pt,hr,Ar-_r,1,hr,Ar);Qn<_r;){var sn=(Qn&~un)+yr;sn>_r&&(sn=_r),(0,k1[la[so++]>>8&15])(ut,Pt+ +Qn,hr,Ar+Qn-_r,sn-Qn,hr,Ar+Qn),Qn=sn}Pt+=_r,Ar+=_r,++or&un||(an+=Jr)}Kt!=ct.nc&&n(Ze,qe-Lt,Ze,qe+(Kt-Et-1)*Lt,Lt);break;case 1:for(Lt=ut,$t=Pt,_r=(ut=ct.Ea)-(Ar=ut&~(hr=(Pt=1<<ct.b)-1)),or=Ve(ut,ct.b),yr=ct.K,ct=ct.w+(Et>>ct.b)*or;Et<Kt;){for(un=yr,Jr=ct,Un=new wt,an=$t+Ar,la=$t+ut;$t<an;)ye(un[Jr++],Un),F1(Un,Lt,$t,Pt,Ze,qe),$t+=Pt,qe+=Pt;$t<la&&(ye(un[Jr++],Un),F1(Un,Lt,$t,_r,Ze,qe),$t+=_r,qe+=_r),++Et&hr||(ct+=or)}break;case 3:if(ut==Ze&&Pt==qe&&0<ct.b){for($t=Ze,ut=Lt=qe+(Kt-Et)*Lt-(Ar=(Kt-Et)*Ve(ct.Ea,ct.b)),Pt=Ze,hr=qe,or=[],Ar=(_r=Ar)-1;0<=Ar;--Ar)or[Ar]=Pt[hr+Ar];for(Ar=_r-1;0<=Ar;--Ar)$t[ut+Ar]=or[Ar];dN(ct,Et,Kt,Ze,Lt,Ze,qe)}else dN(ct,Et,Kt,ut,Pt,Ze,qe)}qe=se,Ze=z}Ze!=z&&n(se,z,qe,Ze,Me)}function L(N,T){var z=N.V,se=N.Ba+N.c*N.C,Ie=T-N.C;if(e(T<=N.l.o),e(16>=Ie),0<Ie){var Me=N.l,Ge=N.Ta,qe=N.Ua,Ze=Me.width;if(R(N,Ie,z,se),Ie=qe=[qe],e((z=N.C)<(se=T)),e(Me.v<Me.va),se>Me.o&&(se=Me.o),z<Me.j){var ct=Me.j-z;z=Me.j,Ie[0]+=ct*Ze}if(z>=se?z=0:(Ie[0]+=4*Me.v,Me.ka=z-Me.j,Me.U=Me.va-Me.v,Me.T=se-z,z=1),z){if(qe=qe[0],11>(z=N.ca).S){var Et=z.f.RGBA,Kt=(se=z.S,Ie=Me.U,Me=Me.T,ct=Et.eb,Et.A),ut=Me;for(Et=Et.fb+N.Ma*Et.A;0<ut--;){var Pt=Ge,Lt=qe,or=Ie,$t=ct,hr=Et;switch(se){case AN:O1(Pt,Lt,or,$t,hr);break;case mN:KA(Pt,Lt,or,$t,hr);break;case y4:KA(Pt,Lt,or,$t,hr),R1($t,hr,0,or,1,0);break;case H8:Vm(Pt,Lt,or,$t,hr);break;case pN:it(Pt,Lt,or,$t,hr,1);break;case b4:it(Pt,Lt,or,$t,hr,1),R1($t,hr,0,or,1,0);break;case gN:it(Pt,Lt,or,$t,hr,0);break;case xN:it(Pt,Lt,or,$t,hr,0),R1($t,hr,1,or,1,0);break;case v4:qA(Pt,Lt,or,$t,hr);break;case w4:qA(Pt,Lt,or,$t,hr),O8($t,hr,or,1,0);break;case $8:zA(Pt,Lt,or,$t,hr);break;default:e(0)}qe+=Ze,Et+=Kt}N.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=z.height)}}N.C=T,e(N.C<=N.i)}function G(N){var T;if(0<N.ua)return 0;for(T=0;T<N.Wb;++T){var z=N.Ya[T].G,se=N.Ya[T].H;if(0<z[1][se[1]+0].g||0<z[2][se[2]+0].g||0<z[3][se[3]+0].g)return 0}return 1}function re(N,T,z,se,Ie,Me){if(N.Z!=0){var Ge=N.qd,qe=N.rd;for(e(YA[N.Z]!=null);T<z;++T)YA[N.Z](Ge,qe,se,Ie,se,Ie,Me),Ge=se,qe=Ie,Ie+=Me;N.qd=Ge,N.rd=qe}}function ue(N,T){var z=N.l.ma,se=z.Z==0||z.Z==1?N.l.j:N.C;if(se=N.C<se?se:N.C,e(T<=N.l.o),T>se){var Ie=N.l.width,Me=z.ca,Ge=z.tb+Ie*se,qe=N.V,Ze=N.Ba+N.c*se,ct=N.gc;e(N.ab==1),e(ct[0].hc==3),jf(ct[0],se,T,qe,Ze,Me,Ge),re(z,se,T,Me,Ge,Ie)}N.C=N.Ma=T}function $e(N,T,z,se,Ie,Me,Ge){var qe=N.$/se,Ze=N.$%se,ct=N.m,Et=N.s,Kt=z+N.$,ut=Kt;Ie=z+se*Ie;var Pt=z+se*Me,Lt=280+Et.ua,or=N.Pb?qe:16777216,$t=0<Et.ua?Et.Wa:null,hr=Et.wc,Ar=Kt<Pt?P(Et,Ze,qe):null;e(N.C<Me),e(Pt<=Ie);var _r=!1;e:for(;;){for(;_r||Kt<Pt;){var yr=0;if(qe>=or){var un=Kt-z;e((or=N).Pb),or.wd=or.m,or.xd=un,0<or.s.ua&&Fe(or.s.Wa,or.s.vb),or=qe+Jue}if(Ze&hr||(Ar=P(Et,Ze,qe)),e(Ar!=null),Ar.Qb&&(T[Kt]=Ar.qb,_r=!0),!_r)if(J(ct),Ar.jc){yr=ct,un=T;var Jr=Kt,Un=Ar.pd[q(yr)&Qm-1];e(Ar.jc),256>Un.g?(W(yr,yr.u+Un.g),un[Jr]=Un.value,yr=0):(W(yr,yr.u+Un.g-256),e(256<=Un.value),yr=Un.value),yr==0&&(_r=!0)}else yr=De(Ar.G[0],Ar.H[0],ct);if(ct.h)break;if(_r||256>yr){if(!_r)if(Ar.nd)T[Kt]=(Ar.qb|yr<<8)>>>0;else{if(J(ct),_r=De(Ar.G[1],Ar.H[1],ct),J(ct),un=De(Ar.G[2],Ar.H[2],ct),Jr=De(Ar.G[3],Ar.H[3],ct),ct.h)break;T[Kt]=(Jr<<24|_r<<16|yr<<8|un)>>>0}if(_r=!1,++Kt,++Ze>=se&&(Ze=0,++qe,Ge!=null&&qe<=Me&&!(qe%16)&&Ge(N,qe),$t!=null))for(;ut<Kt;)yr=T[ut++],$t.X[(506832829*yr&4294967295)>>>$t.Mb]=yr}else if(280>yr){if(yr=Oe(yr-256,ct),un=De(Ar.G[4],Ar.H[4],ct),J(ct),un=le(se,un=Oe(un,ct)),ct.h)break;if(Kt-z<un||Ie-Kt<yr)break e;for(Jr=0;Jr<yr;++Jr)T[Kt+Jr]=T[Kt+Jr-un];for(Kt+=yr,Ze+=yr;Ze>=se;)Ze-=se,++qe,Ge!=null&&qe<=Me&&!(qe%16)&&Ge(N,qe);if(e(Kt<=Ie),Ze&hr&&(Ar=P(Et,Ze,qe)),$t!=null)for(;ut<Kt;)yr=T[ut++],$t.X[(506832829*yr&4294967295)>>>$t.Mb]=yr}else{if(!(yr<Lt))break e;for(_r=yr-280,e($t!=null);ut<Kt;)yr=T[ut++],$t.X[(506832829*yr&4294967295)>>>$t.Mb]=yr;yr=Kt,e(!(_r>>>(un=$t).Xa)),T[yr]=un.X[_r],_r=!0}_r||e(ct.h==U(ct))}if(N.Pb&&ct.h&&Kt<Ie)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&Fe(N.s.vb,N.s.Wa);else{if(ct.h)break e;Ge!=null&&Ge(N,qe>Me?Me:qe),N.a=0,N.$=Kt-z}return 1}return N.a=3,0}function rt(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var T=N.Wa;T!=null&&(T.X=null),N.vb=null,e(N!=null)}function At(){var N=new bn;return N==null?null:(N.a=0,N.xb=q8,de("Predictor","VP8LPredictors"),de("Predictor","VP8LPredictors_C"),de("PredictorAdd","VP8LPredictorsAdd"),de("PredictorAdd","VP8LPredictorsAdd_C"),Ci=Be,F1=oe,O1=Ne,KA=Re,qA=ge,zA=Xe,Vm=vt,E.VP8LMapColor32b=If,E.VP8LMapColor8b=T1,N)}function Je(N,T,z,se,Ie){var Me=1,Ge=[N],qe=[T],Ze=se.m,ct=se.s,Et=null,Kt=0;e:for(;;){if(z)for(;Me&&Te(Ze,1);){var ut=Ge,Pt=qe,Lt=se,or=1,$t=Lt.m,hr=Lt.gc[Lt.ab],Ar=Te($t,2);if(Lt.Oc&1<<Ar)Me=0;else{switch(Lt.Oc|=1<<Ar,hr.hc=Ar,hr.Ea=ut[0],hr.nc=Pt[0],hr.K=[null],++Lt.ab,e(4>=Lt.ab),Ar){case 0:case 1:hr.b=Te($t,3)+2,or=Je(Ve(hr.Ea,hr.b),Ve(hr.nc,hr.b),0,Lt,hr.K),hr.K=hr.K[0];break;case 3:var _r,yr=Te($t,8)+1,un=16<yr?0:4<yr?1:2<yr?2:3;if(ut[0]=Ve(hr.Ea,un),hr.b=un,_r=or=Je(yr,1,0,Lt,hr.K)){var Jr,Un=yr,an=hr,la=1<<(8>>an.b),so=s(la);if(so==null)_r=0;else{var Qn=an.K[0],sn=an.w;for(so[0]=an.K[0][0],Jr=1;Jr<1*Un;++Jr)so[Jr]=We(Qn[sn+Jr],so[Jr-1]);for(;Jr<4*la;++Jr)so[Jr]=0;an.K[0]=null,an.K[0]=so,_r=1}}or=_r;break;case 2:break;default:e(0)}Me=or}}if(Ge=Ge[0],qe=qe[0],Me&&Te(Ze,1)&&!(Me=1<=(Kt=Te(Ze,4))&&11>=Kt)){se.a=3;break e}var Ur;if(Ur=Me)t:{var Ei,Dn,ua,bs=se,rl=Ge,nc=qe,hi=Kt,Il=z,ac=bs.m,io=bs.s,Aa=[null],Da=1,Ai=0,Ra=Yue[hi];r:for(;;){if(Il&&Te(ac,1)){var nl=Te(ac,3)+2,Md=Ve(rl,nl),Si=Ve(nc,nl),Tc=Md*Si;if(!Je(Md,Si,0,bs,Aa))break r;for(Aa=Aa[0],io.xc=nl,Ei=0;Ei<Tc;++Ei){var as=Aa[Ei]>>8&65535;Aa[Ei]=as,as>=Da&&(Da=as+1)}}if(ac.h)break r;for(Dn=0;5>Dn;++Dn){var oo=G8[Dn];!Dn&&0<hi&&(oo+=1<<hi),Ai<oo&&(Ai=oo)}var ou=o(Da*Ra,D),sc=Da,lu=o(sc,he);if(lu==null)var cu=null;else e(65536>=sc),cu=lu;var kc=s(Ai);if(cu==null||kc==null||ou==null){bs.a=1;break r}var uu=ou;for(Ei=ua=0;Ei<Da;++Ei){var fs=cu[Ei],du=fs.G,Ld=fs.H,$m=0,xh=1,al=0;for(Dn=0;5>Dn;++Dn){oo=G8[Dn],du[Dn]=uu,Ld[Dn]=ua,!Dn&&0<hi&&(oo+=1<<hi);a:{var wN,E4=oo,NN=bs,U1=kc,xde=uu,vde=ua,S4=0,JA=NN.m,yde=Te(JA,1);if(a(U1,0,0,E4),yde){var bde=Te(JA,1)+1,wde=Te(JA,1),tL=Te(JA,wde==0?1:8);U1[tL]=1,bde==2&&(U1[tL=Te(JA,8)]=1);var CN=1}else{var rL=s(19),nL=Te(JA,4)+4;if(19<nL){NN.a=3;var _N=0;break a}for(wN=0;wN<nL;++wN)rL[Wue[wN]]=Te(JA,3);var I4=void 0,Q1=void 0,aL=NN,Nde=rL,EN=E4,sL=U1,j4=0,ZA=aL.m,iL=8,oL=o(128,D);n:for(;B(oL,0,7,Nde,19);){if(Te(ZA,1)){var Cde=2+2*Te(ZA,3);if((I4=2+Te(ZA,Cde))>EN)break n}else I4=EN;for(Q1=0;Q1<EN&&I4--;){J(ZA);var lL=oL[0+(127&q(ZA))];W(ZA,ZA.u+lL.g);var Gg=lL.value;if(16>Gg)sL[Q1++]=Gg,Gg!=0&&(iL=Gg);else{var _de=Gg==16,cL=Gg-16,Ede=que[cL],uL=Te(ZA,Kue[cL])+Ede;if(Q1+uL>EN)break n;for(var Sde=_de?iL:0;0<uL--;)sL[Q1++]=Sde}}j4=1;break n}j4||(aL.a=3),CN=j4}(CN=CN&&!JA.h)&&(S4=B(xde,vde,8,U1,E4)),CN&&S4!=0?_N=S4:(NN.a=3,_N=0)}if(_N==0)break r;if(xh&&zue[Dn]==1&&(xh=uu[ua].g==0),$m+=uu[ua].g,ua+=_N,3>=Dn){var V1,P4=kc[0];for(V1=1;V1<oo;++V1)kc[V1]>P4&&(P4=kc[V1]);al+=P4}}if(fs.nd=xh,fs.Qb=0,xh&&(fs.qb=(du[3][Ld[3]+0].value<<24|du[1][Ld[1]+0].value<<16|du[2][Ld[2]+0].value)>>>0,$m==0&&256>du[0][Ld[0]+0].value&&(fs.Qb=1,fs.qb+=du[0][Ld[0]+0].value<<8)),fs.jc=!fs.Qb&&6>al,fs.jc){var SN,vh=fs;for(SN=0;SN<Qm;++SN){var e0=SN,t0=vh.pd[e0],IN=vh.G[0][vh.H[0]+e0];256<=IN.value?(t0.g=IN.g+256,t0.value=IN.value):(t0.g=0,t0.value=0,e0>>=He(IN,8,t0),e0>>=He(vh.G[1][vh.H[1]+e0],16,t0),e0>>=He(vh.G[2][vh.H[2]+e0],0,t0),He(vh.G[3][vh.H[3]+e0],24,t0))}}}io.vc=Aa,io.Wb=Da,io.Ya=cu,io.yc=ou,Ur=1;break t}Ur=0}if(!(Me=Ur)){se.a=3;break e}if(0<Kt){if(ct.ua=1<<Kt,!ee(ct.Wa,Kt)){se.a=1,Me=0;break e}}else ct.ua=0;var B4=se,dL=Ge,Ide=qe,T4=B4.s,k4=T4.xc;if(B4.c=dL,B4.i=Ide,T4.md=Ve(dL,k4),T4.wc=k4==0?-1:(1<<k4)-1,z){se.xb=sde;break e}if((Et=s(Ge*qe))==null){se.a=1,Me=0;break e}Me=(Me=$e(se,Et,0,Ge,qe,qe,null))&&!Ze.h;break e}return Me?(Ie!=null?Ie[0]=Et:(e(Et==null),e(z)),se.$=0,z||rt(ct)):rt(ct),Me}function ht(N,T){var z=N.c*N.i,se=z+T+16*T;return e(N.c<=T),N.V=s(se),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+z+T,1)}function Ot(N,T){var z=N.C,se=T-z,Ie=N.V,Me=N.Ba+N.c*z;for(e(T<=N.l.o);0<se;){var Ge=16<se?16:se,qe=N.l.ma,Ze=N.l.width,ct=Ze*Ge,Et=qe.ca,Kt=qe.tb+Ze*z,ut=N.Ta,Pt=N.Ua;R(N,Ge,Ie,Me),R8(ut,Pt,Et,Kt,ct),re(qe,z,z+Ge,Et,Kt,Ze),se-=Ge,Ie+=Ge*N.c,z+=Ge}e(z==T),N.C=N.Ma=T}function Se(){this.ub=this.yd=this.td=this.Rb=0}function tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function kt(){this.Yb=function(){var N=[];return function T(z,se,Ie){for(var Me=Ie[se],Ge=0;Ge<Me&&(z.push(Ie.length>se+1?[]:0),!(Ie.length<se+1));Ge++)T(z[Ge],se+1,Ie)}(N,0,[3,11]),N}()}function tr(){this.jb=s(3),this.Wc=l([4,8],kt),this.Xc=l([4,17],kt)}function nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function cr(){this.ld=this.La=this.dd=this.tc=0}function Nr(){this.Na=this.la=0}function mn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Mr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vr(){this.uc=this.M=this.Nb=0,this.wa=Array(new cr),this.Y=0,this.ya=Array(new Mr),this.aa=0,this.l=new zt}function fn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Zn(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Se,this.Kc=new tt,this.ed=new nr,this.Qa=new xt,this.Ic=this.$c=this.Aa=0,this.D=new Vr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,O),this.ia=0,this.pb=o(4,mn),this.Pa=new tr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new fn),this.Hd=0,this.rb=Array(new Nr),this.sb=0,this.wa=Array(new cr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Mr),this.L=this.aa=0,this.gd=l([4,2],cr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Bn(N,T){return 0>N?0:N>T?T:N}function zt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function pr(){var N=new Zn;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,M1||(M1=tn)),N}function Gt(N,T,z){return N.a==0&&(N.a=T,N.sc=z,N.cb=0),0}function Qr(N,T,z){return 3<=z&&N[T+0]==157&&N[T+1]==1&&N[T+2]==42}function ln(N,T){if(N==null)return 0;if(N.a=0,N.sc="OK",T==null)return Gt(N,2,"null VP8Io passed to VP8GetHeaders()");var z=T.data,se=T.w,Ie=T.ha;if(4>Ie)return Gt(N,7,"Truncated header.");var Me=z[se+0]|z[se+1]<<8|z[se+2]<<16,Ge=N.Od;if(Ge.Rb=!(1&Me),Ge.td=Me>>1&7,Ge.yd=Me>>4&1,Ge.ub=Me>>5,3<Ge.td)return Gt(N,3,"Incorrect keyframe parameters.");if(!Ge.yd)return Gt(N,4,"Frame not displayable.");se+=3,Ie-=3;var qe=N.Kc;if(Ge.Rb){if(7>Ie)return Gt(N,7,"cannot parse picture header");if(!Qr(z,se,Ie))return Gt(N,3,"Bad code word");qe.c=16383&(z[se+4]<<8|z[se+3]),qe.Td=z[se+4]>>6,qe.i=16383&(z[se+6]<<8|z[se+5]),qe.Ud=z[se+6]>>6,se+=7,Ie-=7,N.za=qe.c+15>>4,N.Ub=qe.i+15>>4,T.width=qe.c,T.height=qe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((Me=N.Pa).jb,0,255,Me.jb.length),e((Me=N.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,a(Me.Zb,0,0,Me.Zb.length),a(Me.Lb,0,0,Me.Lb)}if(Ge.ub>Ie)return Gt(N,7,"bad partition length");Ae(Me=N.m,z,se,Ge.ub),se+=Ge.ub,Ie-=Ge.ub,Ge.Rb&&(qe.Ld=H(Me),qe.Kd=H(Me)),qe=N.Qa;var Ze,ct=N.Pa;if(e(Me!=null),e(qe!=null),qe.Cb=H(Me),qe.Cb){if(qe.Bb=H(Me),H(Me)){for(qe.Fb=H(Me),Ze=0;4>Ze;++Ze)qe.Zb[Ze]=H(Me)?me(Me,7):0;for(Ze=0;4>Ze;++Ze)qe.Lb[Ze]=H(Me)?me(Me,6):0}if(qe.Bb)for(Ze=0;3>Ze;++Ze)ct.jb[Ze]=H(Me)?fe(Me,8):255}else qe.Bb=0;if(Me.Ka)return Gt(N,3,"cannot parse segment header");if((qe=N.ed).zd=H(Me),qe.Tb=fe(Me,6),qe.wb=fe(Me,3),qe.Pc=H(Me),qe.Pc&&H(Me)){for(ct=0;4>ct;++ct)H(Me)&&(qe.vd[ct]=me(Me,6));for(ct=0;4>ct;++ct)H(Me)&&(qe.od[ct]=me(Me,6))}if(N.L=qe.Tb==0?0:qe.zd?1:2,Me.Ka)return Gt(N,3,"cannot parse filter header");var Et=Ie;if(Ie=Ze=se,se=Ze+Et,qe=Et,N.Xb=(1<<fe(N.m,2))-1,Et<3*(ct=N.Xb))z=7;else{for(Ze+=3*ct,qe-=3*ct,Et=0;Et<ct;++Et){var Kt=z[Ie+0]|z[Ie+1]<<8|z[Ie+2]<<16;Kt>qe&&(Kt=qe),Ae(N.Jc[+Et],z,Ze,Kt),Ze+=Kt,qe-=Kt,Ie+=3}Ae(N.Jc[+ct],z,Ze,qe),z=Ze<se?0:5}if(z!=0)return Gt(N,z,"cannot parse partitions");for(z=fe(Ze=N.m,7),Ie=H(Ze)?me(Ze,4):0,se=H(Ze)?me(Ze,4):0,qe=H(Ze)?me(Ze,4):0,ct=H(Ze)?me(Ze,4):0,Ze=H(Ze)?me(Ze,4):0,Et=N.Qa,Kt=0;4>Kt;++Kt){if(Et.Cb){var ut=Et.Zb[Kt];Et.Fb||(ut+=z)}else{if(0<Kt){N.pb[Kt]=N.pb[0];continue}ut=z}var Pt=N.pb[Kt];Pt.Sc[0]=N4[Bn(ut+Ie,127)],Pt.Sc[1]=C4[Bn(ut+0,127)],Pt.Eb[0]=2*N4[Bn(ut+se,127)],Pt.Eb[1]=101581*C4[Bn(ut+qe,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=N4[Bn(ut+ct,117)],Pt.Qc[1]=C4[Bn(ut+Ze,127)],Pt.lc=ut+Ze}if(!Ge.Rb)return Gt(N,4,"Not a key frame.");for(H(Me),Ge=N.Pa,z=0;4>z;++z){for(Ie=0;8>Ie;++Ie)for(se=0;3>se;++se)for(qe=0;11>qe;++qe)ct=te(Me,nde[z][Ie][se][qe])?fe(Me,8):tde[z][Ie][se][qe],Ge.Wc[z][Ie].Yb[se][qe]=ct;for(Ie=0;17>Ie;++Ie)Ge.Xc[z][Ie]=Ge.Wc[z][ade[Ie]]}return N.kc=H(Me),N.kc&&(N.Bd=fe(Me,8)),N.cb=1}function tn(N,T,z,se,Ie,Me,Ge){var qe=T[Ie].Yb[z];for(z=0;16>Ie;++Ie){if(!te(N,qe[z+0]))return Ie;for(;!te(N,qe[z+1]);)if(qe=T[++Ie].Yb[0],z=0,Ie==16)return 16;var Ze=T[Ie+1].Yb;if(te(N,qe[z+2])){var ct=N,Et=0;if(te(ct,(ut=qe)[(Kt=z)+3]))if(te(ct,ut[Kt+6])){for(qe=0,Kt=2*(Et=te(ct,ut[Kt+8]))+(ut=te(ct,ut[Kt+9+Et])),Et=0,ut=Zue[Kt];ut[qe];++qe)Et+=Et+te(ct,ut[qe]);Et+=3+(8<<Kt)}else te(ct,ut[Kt+7])?(Et=7+2*te(ct,165),Et+=te(ct,145)):Et=5+te(ct,159);else Et=te(ct,ut[Kt+4])?3+te(ct,ut[Kt+5]):2;qe=Ze[2]}else Et=1,qe=Ze[1];Ze=Ge+ede[Ie],0>(ct=N).b&&M(ct);var Kt,ut=ct.b,Pt=(Kt=ct.Ca>>1)-(ct.I>>ut)>>31;--ct.b,ct.Ca+=Pt,ct.Ca|=1,ct.I-=(Kt+1&Pt)<<ut,Me[Ze]=((Et^Pt)-Pt)*se[(0<Ie)+0]}return 16}function mt(N){var T=N.rb[N.sb-1];T.la=0,T.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function ur(N,T,z,se,Ie){Ie=N[T+z+32*se]+(Ie>>3),N[T+z+32*se]=-256&Ie?0>Ie?0:255:Ie}function je(N,T,z,se,Ie,Me){ur(N,T,0,z,se+Ie),ur(N,T,1,z,se+Me),ur(N,T,2,z,se-Me),ur(N,T,3,z,se-Ie)}function nt(N){return(20091*N>>16)+N}function dt(N,T,z,se){var Ie,Me=0,Ge=s(16);for(Ie=0;4>Ie;++Ie){var qe=N[T+0]+N[T+8],Ze=N[T+0]-N[T+8],ct=(35468*N[T+4]>>16)-nt(N[T+12]),Et=nt(N[T+4])+(35468*N[T+12]>>16);Ge[Me+0]=qe+Et,Ge[Me+1]=Ze+ct,Ge[Me+2]=Ze-ct,Ge[Me+3]=qe-Et,Me+=4,T++}for(Ie=Me=0;4>Ie;++Ie)qe=(N=Ge[Me+0]+4)+Ge[Me+8],Ze=N-Ge[Me+8],ct=(35468*Ge[Me+4]>>16)-nt(Ge[Me+12]),ur(z,se,0,0,qe+(Et=nt(Ge[Me+4])+(35468*Ge[Me+12]>>16))),ur(z,se,1,0,Ze+ct),ur(z,se,2,0,Ze-ct),ur(z,se,3,0,qe-Et),Me++,se+=32}function Nt(N,T,z,se){var Ie=N[T+0]+4,Me=35468*N[T+4]>>16,Ge=nt(N[T+4]),qe=35468*N[T+1]>>16;je(z,se,0,Ie+Ge,N=nt(N[T+1]),qe),je(z,se,1,Ie+Me,N,qe),je(z,se,2,Ie-Me,N,qe),je(z,se,3,Ie-Ge,N,qe)}function Qe(N,T,z,se,Ie){dt(N,T,z,se),Ie&&dt(N,T+16,z,se+4)}function ot(N,T,z,se){Hm(N,T+0,z,se,1),Hm(N,T+32,z,se+128,1)}function _t(N,T,z,se){var Ie;for(N=N[T+0]+4,Ie=0;4>Ie;++Ie)for(T=0;4>T;++T)ur(z,se,T,Ie,N)}function et(N,T,z,se){N[T+0]&&Ta(N,T+0,z,se),N[T+16]&&Ta(N,T+16,z,se+4),N[T+32]&&Ta(N,T+32,z,se+128),N[T+48]&&Ta(N,T+48,z,se+128+4)}function It(N,T,z,se){var Ie,Me=s(16);for(Ie=0;4>Ie;++Ie){var Ge=N[T+0+Ie]+N[T+12+Ie],qe=N[T+4+Ie]+N[T+8+Ie],Ze=N[T+4+Ie]-N[T+8+Ie],ct=N[T+0+Ie]-N[T+12+Ie];Me[0+Ie]=Ge+qe,Me[8+Ie]=Ge-qe,Me[4+Ie]=ct+Ze,Me[12+Ie]=ct-Ze}for(Ie=0;4>Ie;++Ie)Ge=(N=Me[0+4*Ie]+3)+Me[3+4*Ie],qe=Me[1+4*Ie]+Me[2+4*Ie],Ze=Me[1+4*Ie]-Me[2+4*Ie],ct=N-Me[3+4*Ie],z[se+0]=Ge+qe>>3,z[se+16]=ct+Ze>>3,z[se+32]=Ge-qe>>3,z[se+48]=ct-Ze>>3,se+=64}function Vt(N,T,z){var se,Ie=T-32,Me=iu,Ge=255-N[Ie-1];for(se=0;se<z;++se){var qe,Ze=Me,ct=Ge+N[T-1];for(qe=0;qe<z;++qe)N[T+qe]=Ze[ct+N[Ie+qe]];T+=32}}function rr(N,T){Vt(N,T,4)}function er(N,T){Vt(N,T,8)}function Bt(N,T){Vt(N,T,16)}function br(N,T){var z;for(z=0;16>z;++z)n(N,T+32*z,N,T-32,16)}function wr(N,T){var z;for(z=16;0<z;--z)a(N,T,N[T-1],16),T+=32}function Ft(N,T,z){var se;for(se=0;16>se;++se)a(T,z+32*se,N,16)}function Zt(N,T){var z,se=16;for(z=0;16>z;++z)se+=N[T-1+32*z]+N[T+z-32];Ft(se>>5,N,T)}function dr(N,T){var z,se=8;for(z=0;16>z;++z)se+=N[T-1+32*z];Ft(se>>4,N,T)}function Rr(N,T){var z,se=8;for(z=0;16>z;++z)se+=N[T+z-32];Ft(se>>4,N,T)}function Wr(N,T){Ft(128,N,T)}function Sr(N,T,z){return N+2*T+z+2>>2}function ia(N,T){var z,se=T-32;for(se=new Uint8Array([Sr(N[se-1],N[se+0],N[se+1]),Sr(N[se+0],N[se+1],N[se+2]),Sr(N[se+1],N[se+2],N[se+3]),Sr(N[se+2],N[se+3],N[se+4])]),z=0;4>z;++z)n(N,T+32*z,se,0,se.length)}function _a(N,T){var z=N[T-1],se=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96];ve(N,T+0,16843009*Sr(N[T-1-32],z,se)),ve(N,T+32,16843009*Sr(z,se,Ie)),ve(N,T+64,16843009*Sr(se,Ie,Me)),ve(N,T+96,16843009*Sr(Ie,Me,Me))}function ha(N,T){var z,se=4;for(z=0;4>z;++z)se+=N[T+z-32]+N[T-1+32*z];for(se>>=3,z=0;4>z;++z)a(N,T+32*z,se,4)}function En(N,T){var z=N[T-1+0],se=N[T-1+32],Ie=N[T-1+64],Me=N[T-1-32],Ge=N[T+0-32],qe=N[T+1-32],Ze=N[T+2-32],ct=N[T+3-32];N[T+0+96]=Sr(se,Ie,N[T-1+96]),N[T+1+96]=N[T+0+64]=Sr(z,se,Ie),N[T+2+96]=N[T+1+64]=N[T+0+32]=Sr(Me,z,se),N[T+3+96]=N[T+2+64]=N[T+1+32]=N[T+0+0]=Sr(Ge,Me,z),N[T+3+64]=N[T+2+32]=N[T+1+0]=Sr(qe,Ge,Me),N[T+3+32]=N[T+2+0]=Sr(Ze,qe,Ge),N[T+3+0]=Sr(ct,Ze,qe)}function vs(N,T){var z=N[T+1-32],se=N[T+2-32],Ie=N[T+3-32],Me=N[T+4-32],Ge=N[T+5-32],qe=N[T+6-32],Ze=N[T+7-32];N[T+0+0]=Sr(N[T+0-32],z,se),N[T+1+0]=N[T+0+32]=Sr(z,se,Ie),N[T+2+0]=N[T+1+32]=N[T+0+64]=Sr(se,Ie,Me),N[T+3+0]=N[T+2+32]=N[T+1+64]=N[T+0+96]=Sr(Ie,Me,Ge),N[T+3+32]=N[T+2+64]=N[T+1+96]=Sr(Me,Ge,qe),N[T+3+64]=N[T+2+96]=Sr(Ge,qe,Ze),N[T+3+96]=Sr(qe,Ze,Ze)}function Fd(N,T){var z=N[T-1+0],se=N[T-1+32],Ie=N[T-1+64],Me=N[T-1-32],Ge=N[T+0-32],qe=N[T+1-32],Ze=N[T+2-32],ct=N[T+3-32];N[T+0+0]=N[T+1+64]=Me+Ge+1>>1,N[T+1+0]=N[T+2+64]=Ge+qe+1>>1,N[T+2+0]=N[T+3+64]=qe+Ze+1>>1,N[T+3+0]=Ze+ct+1>>1,N[T+0+96]=Sr(Ie,se,z),N[T+0+64]=Sr(se,z,Me),N[T+0+32]=N[T+1+96]=Sr(z,Me,Ge),N[T+1+32]=N[T+2+96]=Sr(Me,Ge,qe),N[T+2+32]=N[T+3+96]=Sr(Ge,qe,Ze),N[T+3+32]=Sr(qe,Ze,ct)}function Tn(N,T){var z=N[T+0-32],se=N[T+1-32],Ie=N[T+2-32],Me=N[T+3-32],Ge=N[T+4-32],qe=N[T+5-32],Ze=N[T+6-32],ct=N[T+7-32];N[T+0+0]=z+se+1>>1,N[T+1+0]=N[T+0+64]=se+Ie+1>>1,N[T+2+0]=N[T+1+64]=Ie+Me+1>>1,N[T+3+0]=N[T+2+64]=Me+Ge+1>>1,N[T+0+32]=Sr(z,se,Ie),N[T+1+32]=N[T+0+96]=Sr(se,Ie,Me),N[T+2+32]=N[T+1+96]=Sr(Ie,Me,Ge),N[T+3+32]=N[T+2+96]=Sr(Me,Ge,qe),N[T+3+64]=Sr(Ge,qe,Ze),N[T+3+96]=Sr(qe,Ze,ct)}function To(N,T){var z=N[T-1+0],se=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96];N[T+0+0]=z+se+1>>1,N[T+2+0]=N[T+0+32]=se+Ie+1>>1,N[T+2+32]=N[T+0+64]=Ie+Me+1>>1,N[T+1+0]=Sr(z,se,Ie),N[T+3+0]=N[T+1+32]=Sr(se,Ie,Me),N[T+3+32]=N[T+1+64]=Sr(Ie,Me,Me),N[T+3+64]=N[T+2+64]=N[T+0+96]=N[T+1+96]=N[T+2+96]=N[T+3+96]=Me}function Sc(N,T){var z=N[T-1+0],se=N[T-1+32],Ie=N[T-1+64],Me=N[T-1+96],Ge=N[T-1-32],qe=N[T+0-32],Ze=N[T+1-32],ct=N[T+2-32];N[T+0+0]=N[T+2+32]=z+Ge+1>>1,N[T+0+32]=N[T+2+64]=se+z+1>>1,N[T+0+64]=N[T+2+96]=Ie+se+1>>1,N[T+0+96]=Me+Ie+1>>1,N[T+3+0]=Sr(qe,Ze,ct),N[T+2+0]=Sr(Ge,qe,Ze),N[T+1+0]=N[T+3+32]=Sr(z,Ge,qe),N[T+1+32]=N[T+3+64]=Sr(se,z,Ge),N[T+1+64]=N[T+3+96]=Sr(Ie,se,z),N[T+1+96]=Sr(Me,Ie,se)}function Gs(N,T){var z;for(z=0;8>z;++z)n(N,T+32*z,N,T-32,8)}function $i(N,T){var z;for(z=0;8>z;++z)a(N,T,N[T-1],8),T+=32}function Gi(N,T,z){var se;for(se=0;8>se;++se)a(T,z+32*se,N,8)}function Ic(N,T){var z,se=8;for(z=0;8>z;++z)se+=N[T+z-32]+N[T-1+32*z];Gi(se>>4,N,T)}function ca(N,T){var z,se=4;for(z=0;8>z;++z)se+=N[T+z-32];Gi(se>>3,N,T)}function ru(N,T){var z,se=4;for(z=0;8>z;++z)se+=N[T-1+32*z];Gi(se>>3,N,T)}function QA(N,T){Gi(128,N,T)}function jc(N,T,z){var se=N[T-z],Ie=N[T+0],Me=3*(Ie-se)+x4[1020+N[T-2*z]-N[T+z]],Ge=hN[112+(Me+4>>3)];N[T-z]=iu[255+se+hN[112+(Me+3>>3)]],N[T+0]=iu[255+Ie-Ge]}function _f(N,T,z,se){var Ie=N[T+0],Me=N[T+z];return Vu[255+N[T-2*z]-N[T-z]]>se||Vu[255+Me-Ie]>se}function Od(N,T,z,se){return 4*Vu[255+N[T-z]-N[T+0]]+Vu[255+N[T-2*z]-N[T+z]]<=se}function el(N,T,z,se,Ie){var Me=N[T-3*z],Ge=N[T-2*z],qe=N[T-z],Ze=N[T+0],ct=N[T+z],Et=N[T+2*z],Kt=N[T+3*z];return 4*Vu[255+qe-Ze]+Vu[255+Ge-ct]>se?0:Vu[255+N[T-4*z]-Me]<=Ie&&Vu[255+Me-Ge]<=Ie&&Vu[255+Ge-qe]<=Ie&&Vu[255+Kt-Et]<=Ie&&Vu[255+Et-ct]<=Ie&&Vu[255+ct-Ze]<=Ie}function rc(N,T,z,se){var Ie=2*se+1;for(se=0;16>se;++se)Od(N,T+se,z,Ie)&&jc(N,T+se,z)}function ys(N,T,z,se){var Ie=2*se+1;for(se=0;16>se;++se)Od(N,T+se*z,1,Ie)&&jc(N,T+se*z,1)}function Ef(N,T,z,se){var Ie;for(Ie=3;0<Ie;--Ie)rc(N,T+=4*z,z,se)}function VA(N,T,z,se){var Ie;for(Ie=3;0<Ie;--Ie)ys(N,T+=4,z,se)}function Ni(N,T,z,se,Ie,Me,Ge,qe){for(Me=2*Me+1;0<Ie--;){if(el(N,T,z,Me,Ge))if(_f(N,T,z,qe))jc(N,T,z);else{var Ze=N,ct=T,Et=z,Kt=Ze[ct-2*Et],ut=Ze[ct-Et],Pt=Ze[ct+0],Lt=Ze[ct+Et],or=Ze[ct+2*Et],$t=27*(Ar=x4[1020+3*(Pt-ut)+x4[1020+Kt-Lt]])+63>>7,hr=18*Ar+63>>7,Ar=9*Ar+63>>7;Ze[ct-3*Et]=iu[255+Ze[ct-3*Et]+Ar],Ze[ct-2*Et]=iu[255+Kt+hr],Ze[ct-Et]=iu[255+ut+$t],Ze[ct+0]=iu[255+Pt-$t],Ze[ct+Et]=iu[255+Lt-hr],Ze[ct+2*Et]=iu[255+or-Ar]}T+=se}}function Pc(N,T,z,se,Ie,Me,Ge,qe){for(Me=2*Me+1;0<Ie--;){if(el(N,T,z,Me,Ge))if(_f(N,T,z,qe))jc(N,T,z);else{var Ze=N,ct=T,Et=z,Kt=Ze[ct-Et],ut=Ze[ct+0],Pt=Ze[ct+Et],Lt=hN[112+(4+(or=3*(ut-Kt))>>3)],or=hN[112+(or+3>>3)],$t=Lt+1>>1;Ze[ct-2*Et]=iu[255+Ze[ct-2*Et]+$t],Ze[ct-Et]=iu[255+Kt+or],Ze[ct+0]=iu[255+ut-Lt],Ze[ct+Et]=iu[255+Pt-$t]}T+=se}}function Sf(N,T,z,se,Ie,Me){Ni(N,T,z,1,16,se,Ie,Me)}function Mu(N,T,z,se,Ie,Me){Ni(N,T,1,z,16,se,Ie,Me)}function Um(N,T,z,se,Ie,Me){var Ge;for(Ge=3;0<Ge;--Ge)Pc(N,T+=4*z,z,1,16,se,Ie,Me)}function V(N,T,z,se,Ie,Me){var Ge;for(Ge=3;0<Ge;--Ge)Pc(N,T+=4,1,z,16,se,Ie,Me)}function Ee(N,T,z,se,Ie,Me,Ge,qe){Ni(N,T,Ie,1,8,Me,Ge,qe),Ni(z,se,Ie,1,8,Me,Ge,qe)}function lt(N,T,z,se,Ie,Me,Ge,qe){Ni(N,T,1,Ie,8,Me,Ge,qe),Ni(z,se,1,Ie,8,Me,Ge,qe)}function bt(N,T,z,se,Ie,Me,Ge,qe){Pc(N,T+4*Ie,Ie,1,8,Me,Ge,qe),Pc(z,se+4*Ie,Ie,1,8,Me,Ge,qe)}function Tt(N,T,z,se,Ie,Me,Ge,qe){Pc(N,T+4,1,Ie,8,Me,Ge,qe),Pc(z,se+4,1,Ie,8,Me,Ge,qe)}function fr(){this.ba=new we,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function zr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rn(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new he,this.yc=new D}function bn(){this.xb=this.a=0,this.l=new zt,this.ca=new we,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rn,this.ab=0,this.gc=o(4,zr),this.Oc=0}function kn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ra(N,T,z,se,Ie,Me,Ge){for(N=N==null?0:N[T+0],T=0;T<Ge;++T)Ie[Me+T]=N+z[se+T]&255,N=Ie[Me+T]}function Ea(N,T,z,se,Ie,Me,Ge){var qe;if(N==null)ra(null,null,z,se,Ie,Me,Ge);else for(qe=0;qe<Ge;++qe)Ie[Me+qe]=N[T+qe]+z[se+qe]&255}function Ks(N,T,z,se,Ie,Me,Ge){if(N==null)ra(null,null,z,se,Ie,Me,Ge);else{var qe,Ze=N[T+0],ct=Ze,Et=Ze;for(qe=0;qe<Ge;++qe)ct=Et+(Ze=N[T+qe])-ct,Et=z[se+qe]+(-256&ct?0>ct?0:255:ct)&255,ct=Ze,Ie[Me+qe]=Et}}function Oa(N,T,z,se){var Ie=T.width,Me=T.o;if(e(N!=null&&T!=null),0>z||0>=se||z+se>Me)return null;if(!N.Cc){if(N.ga==null){var Ge;if(N.ga=new kn,(Ge=N.ga==null)||(Ge=T.width*T.o,e(N.Gb.length==0),N.Gb=s(Ge),N.Uc=0,N.Gb==null?Ge=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,Ge=1),Ge=!Ge),!Ge){Ge=N.ga;var qe=N.Fa,Ze=N.P,ct=N.qc,Et=N.mb,Kt=N.nb,ut=Ze+1,Pt=ct-1,Lt=Ge.l;if(e(qe!=null&&Et!=null&&T!=null),YA[0]=null,YA[1]=ra,YA[2]=Ea,YA[3]=Ks,Ge.ca=Et,Ge.tb=Kt,Ge.c=T.width,Ge.i=T.height,e(0<Ge.c&&0<Ge.i),1>=ct)T=0;else if(Ge.$a=3&qe[Ze+0],Ge.Z=qe[Ze+0]>>2&3,Ge.Lc=qe[Ze+0]>>4&3,Ze=qe[Ze+0]>>6&3,0>Ge.$a||1<Ge.$a||4<=Ge.Z||1<Ge.Lc||Ze)T=0;else if(Lt.put=_e,Lt.ac=st,Lt.bc=xe,Lt.ma=Ge,Lt.width=T.width,Lt.height=T.height,Lt.Da=T.Da,Lt.v=T.v,Lt.va=T.va,Lt.j=T.j,Lt.o=T.o,Ge.$a)e:{e(Ge.$a==1),T=At();t:for(;;){if(T==null){T=0;break e}if(e(Ge!=null),Ge.mc=T,T.c=Ge.c,T.i=Ge.i,T.l=Ge.l,T.l.ma=Ge,T.l.width=Ge.c,T.l.height=Ge.i,T.a=0,ne(T.m,qe,ut,Pt),!Je(Ge.c,Ge.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&G(T.s)?(Ge.ic=1,qe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(qe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ge.ic=0,T=ht(T,Ge.c)),!T))break t;T=1;break e}Ge.mc=null,T=0}else T=Pt>=Ge.c*Ge.i;Ge=!T}if(Ge)return null;N.ga.Lc!=1?N.Ga=0:se=Me-z}e(N.ga!=null),e(z+se<=Me);e:{if(T=(qe=N.ga).c,Me=qe.l.o,qe.$a==0){if(ut=N.rc,Pt=N.Vc,Lt=N.Fa,Ze=N.P+1+z*T,ct=N.mb,Et=N.nb+z*T,e(Ze<=N.P+N.qc),qe.Z!=0)for(e(YA[qe.Z]!=null),Ge=0;Ge<se;++Ge)YA[qe.Z](ut,Pt,Lt,Ze,ct,Et,T),ut=ct,Pt=Et,Et+=T,Ze+=T;else for(Ge=0;Ge<se;++Ge)n(ct,Et,Lt,Ze,T),ut=ct,Pt=Et,Et+=T,Ze+=T;N.rc=ut,N.Vc=Pt}else{if(e(qe.mc!=null),T=z+se,e((Ge=qe.mc)!=null),e(T<=Ge.i),Ge.C>=T)T=1;else if(qe.ic||Bc(),qe.ic){qe=Ge.V,ut=Ge.Ba,Pt=Ge.c;var or=Ge.i,$t=(Lt=1,Ze=Ge.$/Pt,ct=Ge.$%Pt,Et=Ge.m,Kt=Ge.s,Ge.$),hr=Pt*or,Ar=Pt*T,_r=Kt.wc,yr=$t<Ar?P(Kt,ct,Ze):null;e($t<=hr),e(T<=or),e(G(Kt));t:for(;;){for(;!Et.h&&$t<Ar;){if(ct&_r||(yr=P(Kt,ct,Ze)),e(yr!=null),J(Et),256>(or=De(yr.G[0],yr.H[0],Et)))qe[ut+$t]=or,++$t,++ct>=Pt&&(ct=0,++Ze<=T&&!(Ze%16)&&ue(Ge,Ze));else{if(!(280>or)){Lt=0;break t}or=Oe(or-256,Et);var un,Jr=De(yr.G[4],yr.H[4],Et);if(J(Et),!($t>=(Jr=le(Pt,Jr=Oe(Jr,Et)))&&hr-$t>=or)){Lt=0;break t}for(un=0;un<or;++un)qe[ut+$t+un]=qe[ut+$t+un-Jr];for($t+=or,ct+=or;ct>=Pt;)ct-=Pt,++Ze<=T&&!(Ze%16)&&ue(Ge,Ze);$t<Ar&&ct&_r&&(yr=P(Kt,ct,Ze))}e(Et.h==U(Et))}ue(Ge,Ze>T?T:Ze);break t}!Lt||Et.h&&$t<hr?(Lt=0,Ge.a=Et.h?5:3):Ge.$=$t,T=Lt}else T=$e(Ge,Ge.V,Ge.Ba,Ge.c,Ge.i,T,Ot);if(!T){se=0;break e}}z+se>=Me&&(N.Cc=1),se=1}if(!se)return null;if(N.Cc&&((se=N.ga)!=null&&(se.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+z*Ie}function di(N,T,z,se,Ie,Me){for(;0<Ie--;){var Ge,qe=N,Ze=T+(z?1:0),ct=N,Et=T+(z?0:3);for(Ge=0;Ge<se;++Ge){var Kt=ct[Et+4*Ge];Kt!=255&&(Kt*=32897,qe[Ze+4*Ge+0]=qe[Ze+4*Ge+0]*Kt>>23,qe[Ze+4*Ge+1]=qe[Ze+4*Ge+1]*Kt>>23,qe[Ze+4*Ge+2]=qe[Ze+4*Ge+2]*Kt>>23)}T+=Me}}function qs(N,T,z,se,Ie){for(;0<se--;){var Me;for(Me=0;Me<z;++Me){var Ge=N[T+2*Me+0],qe=15&(ct=N[T+2*Me+1]),Ze=4369*qe,ct=(240&ct|ct>>4)*Ze>>16;N[T+2*Me+0]=(240&Ge|Ge>>4)*Ze>>16&240|(15&Ge|Ge<<4)*Ze>>16>>4&15,N[T+2*Me+1]=240&ct|qe}T+=Ie}}function fi(N,T,z,se,Ie,Me,Ge,qe){var Ze,ct,Et=255;for(ct=0;ct<Ie;++ct){for(Ze=0;Ze<se;++Ze){var Kt=N[T+Ze];Me[Ge+4*Ze]=Kt,Et&=Kt}T+=z,Ge+=qe}return Et!=255}function zs(N,T,z,se,Ie){var Me;for(Me=0;Me<Ie;++Me)z[se+Me]=N[T+Me]>>8}function Bc(){R1=di,O8=qs,D8=fi,R8=zs}function Lu(N,T,z){E[N]=function(se,Ie,Me,Ge,qe,Ze,ct,Et,Kt,ut,Pt,Lt,or,$t,hr,Ar,_r){var yr,un=_r-1>>1,Jr=qe[Ze+0]|ct[Et+0]<<16,Un=Kt[ut+0]|Pt[Lt+0]<<16;e(se!=null);var an=3*Jr+Un+131074>>2;for(T(se[Ie+0],255&an,an>>16,or,$t),Me!=null&&(an=3*Un+Jr+131074>>2,T(Me[Ge+0],255&an,an>>16,hr,Ar)),yr=1;yr<=un;++yr){var la=qe[Ze+yr]|ct[Et+yr]<<16,so=Kt[ut+yr]|Pt[Lt+yr]<<16,Qn=Jr+la+Un+so+524296,sn=Qn+2*(la+Un)>>3;an=sn+Jr>>1,Jr=(Qn=Qn+2*(Jr+so)>>3)+la>>1,T(se[Ie+2*yr-1],255&an,an>>16,or,$t+(2*yr-1)*z),T(se[Ie+2*yr-0],255&Jr,Jr>>16,or,$t+(2*yr-0)*z),Me!=null&&(an=Qn+Un>>1,Jr=sn+so>>1,T(Me[Ge+2*yr-1],255&an,an>>16,hr,Ar+(2*yr-1)*z),T(Me[Ge+2*yr+0],255&Jr,Jr>>16,hr,Ar+(2*yr+0)*z)),Jr=la,Un=so}1&_r||(an=3*Jr+Un+131074>>2,T(se[Ie+_r-1],255&an,an>>16,or,$t+(_r-1)*z),Me!=null&&(an=3*Un+Jr+131074>>2,T(Me[Ge+_r-1],255&an,an>>16,hr,Ar+(_r-1)*z)))}}function Uu(){Hu[AN]=ide,Hu[mN]=z8,Hu[H8]=ode,Hu[pN]=W8,Hu[gN]=X8,Hu[v4]=Y8,Hu[$8]=lde,Hu[y4]=z8,Hu[b4]=W8,Hu[xN]=X8,Hu[w4]=Y8}function C(N){return N&-16384?0>N?0:255:N>>cde}function Y(N,T){return C((19077*N>>8)+(26149*T>>8)-14234)}function pe(N,T,z){return C((19077*N>>8)-(6419*T>>8)-(13320*z>>8)+8708)}function ze(N,T){return C((19077*N>>8)+(33050*T>>8)-17685)}function Dt(N,T,z,se,Ie){se[Ie+0]=Y(N,z),se[Ie+1]=pe(N,T,z),se[Ie+2]=ze(N,T)}function Xt(N,T,z,se,Ie){se[Ie+0]=ze(N,T),se[Ie+1]=pe(N,T,z),se[Ie+2]=Y(N,z)}function Pr(N,T,z,se,Ie){var Me=pe(N,T,z);T=Me<<3&224|ze(N,T)>>3,se[Ie+0]=248&Y(N,z)|Me>>5,se[Ie+1]=T}function oa(N,T,z,se,Ie){var Me=240&ze(N,T)|15;se[Ie+0]=240&Y(N,z)|pe(N,T,z)>>4,se[Ie+1]=Me}function Ws(N,T,z,se,Ie){se[Ie+0]=255,Dt(N,T,z,se,Ie+1)}function zn(N,T,z,se,Ie){Xt(N,T,z,se,Ie),se[Ie+3]=255}function va(N,T,z,se,Ie){Dt(N,T,z,se,Ie),se[Ie+3]=255}function ds(N,T,z){E[N]=function(se,Ie,Me,Ge,qe,Ze,ct,Et,Kt){for(var ut=Et+(-2&Kt)*z;Et!=ut;)T(se[Ie+0],Me[Ge+0],qe[Ze+0],ct,Et),T(se[Ie+1],Me[Ge+0],qe[Ze+0],ct,Et+z),Ie+=2,++Ge,++Ze,Et+=2*z;1&Kt&&T(se[Ie+0],Me[Ge+0],qe[Ze+0],ct,Et)}}function nu(N,T,z){return z==0?N==0?T==0?6:5:T==0?4:0:z}function Sl(N,T,z,se,Ie){switch(N>>>30){case 3:Hm(T,z,se,Ie,0);break;case 2:Qu(T,z,se,Ie);break;case 1:Ta(T,z,se,Ie)}}function tl(N,T){var z,se,Ie=T.M,Me=T.Nb,Ge=N.oc,qe=N.pc+40,Ze=N.oc,ct=N.pc+584,Et=N.oc,Kt=N.pc+600;for(z=0;16>z;++z)Ge[qe+32*z-1]=129;for(z=0;8>z;++z)Ze[ct+32*z-1]=129,Et[Kt+32*z-1]=129;for(0<Ie?Ge[qe-1-32]=Ze[ct-1-32]=Et[Kt-1-32]=129:(a(Ge,qe-32-1,127,21),a(Ze,ct-32-1,127,9),a(Et,Kt-32-1,127,9)),se=0;se<N.za;++se){var ut=T.ya[T.aa+se];if(0<se){for(z=-1;16>z;++z)n(Ge,qe+32*z-4,Ge,qe+32*z+12,4);for(z=-1;8>z;++z)n(Ze,ct+32*z-4,Ze,ct+32*z+4,4),n(Et,Kt+32*z-4,Et,Kt+32*z+4,4)}var Pt=N.Gd,Lt=N.Hd+se,or=ut.ad,$t=ut.Hc;if(0<Ie&&(n(Ge,qe-32,Pt[Lt].y,0,16),n(Ze,ct-32,Pt[Lt].f,0,8),n(Et,Kt-32,Pt[Lt].ea,0,8)),ut.Za){var hr=Ge,Ar=qe-32+16;for(0<Ie&&(se>=N.za-1?a(hr,Ar,Pt[Lt].y[15],4):n(hr,Ar,Pt[Lt+1].y,0,4)),z=0;4>z;z++)hr[Ar+128+z]=hr[Ar+256+z]=hr[Ar+384+z]=hr[Ar+0+z];for(z=0;16>z;++z,$t<<=2)hr=Ge,Ar=qe+Z8[z],Rd[ut.Ob[z]](hr,Ar),Sl($t,or,16*+z,hr,Ar)}else if(hr=nu(se,Ie,ut.Ob[0]),XA[hr](Ge,qe),$t!=0)for(z=0;16>z;++z,$t<<=2)Sl($t,or,16*+z,Ge,qe+Z8[z]);for(z=ut.Gc,hr=nu(se,Ie,ut.Dd),gh[hr](Ze,ct),gh[hr](Et,Kt),$t=or,hr=Ze,Ar=ct,255&(ut=0|z)&&(170&ut?Pf($t,256,hr,Ar):ns($t,256,hr,Ar)),ut=Et,$t=Kt,255&(z>>=8)&&(170&z?Pf(or,320,ut,$t):ns(or,320,ut,$t)),Ie<N.Ub-1&&(n(Pt[Lt].y,0,Ge,qe+480,16),n(Pt[Lt].f,0,Ze,ct+224,8),n(Pt[Lt].ea,0,Et,Kt+224,8)),z=8*Me*N.B,Pt=N.sa,Lt=N.ta+16*se+16*Me*N.R,or=N.qa,ut=N.ra+8*se+z,$t=N.Ha,hr=N.Ia+8*se+z,z=0;16>z;++z)n(Pt,Lt+z*N.R,Ge,qe+32*z,16);for(z=0;8>z;++z)n(or,ut+z*N.B,Ze,ct+32*z,8),n($t,hr+z*N.B,Et,Kt+32*z,8)}}function Dd(N,T,z,se,Ie,Me,Ge,qe,Ze){var ct=[0],Et=[0],Kt=0,ut=Ze!=null?Ze.kd:0,Pt=Ze??new gr;if(N==null||12>z)return 7;Pt.data=N,Pt.w=T,Pt.ha=z,T=[T],z=[z],Pt.gb=[Pt.gb];e:{var Lt=T,or=z,$t=Pt.gb;if(e(N!=null),e(or!=null),e($t!=null),$t[0]=0,12<=or[0]&&!r(N,Lt[0],"RIFF")){if(r(N,Lt[0]+8,"WEBP")){$t=3;break e}var hr=ae(N,Lt[0]+4);if(12>hr||4294967286<hr){$t=3;break e}if(ut&&hr>or[0]-8){$t=7;break e}$t[0]=hr,Lt[0]+=12,or[0]-=12}$t=0}if($t!=0)return $t;for(hr=0<Pt.gb[0],z=z[0];;){e:{var Ar=N;or=T,$t=z;var _r=ct,yr=Et,un=Lt=[0];if((an=Kt=[Kt])[0]=0,8>$t[0])$t=7;else{if(!r(Ar,or[0],"VP8X")){if(ae(Ar,or[0]+4)!=10){$t=3;break e}if(18>$t[0]){$t=7;break e}var Jr=ae(Ar,or[0]+8),Un=1+Ke(Ar,or[0]+12);if(2147483648<=Un*(Ar=1+Ke(Ar,or[0]+15))){$t=3;break e}un!=null&&(un[0]=Jr),_r!=null&&(_r[0]=Un),yr!=null&&(yr[0]=Ar),or[0]+=18,$t[0]-=18,an[0]=1}$t=0}}if(Kt=Kt[0],Lt=Lt[0],$t!=0)return $t;if(or=!!(2&Lt),!hr&&Kt)return 3;if(Me!=null&&(Me[0]=!!(16&Lt)),Ge!=null&&(Ge[0]=or),qe!=null&&(qe[0]=0),Ge=ct[0],Lt=Et[0],Kt&&or&&Ze==null){$t=0;break}if(4>z){$t=7;break}if(hr&&Kt||!hr&&!Kt&&!r(N,T[0],"ALPH")){z=[z],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];e:{Jr=N,$t=T,hr=z;var an=Pt.gb;_r=Pt.na,yr=Pt.P,un=Pt.Sa,Un=22,e(Jr!=null),e(hr!=null),Ar=$t[0];var la=hr[0];for(e(_r!=null),e(un!=null),_r[0]=null,yr[0]=null,un[0]=0;;){if($t[0]=Ar,hr[0]=la,8>la){$t=7;break e}var so=ae(Jr,Ar+4);if(4294967286<so){$t=3;break e}var Qn=8+so+1&-2;if(Un+=Qn,0<an&&Un>an){$t=3;break e}if(!r(Jr,Ar,"VP8 ")||!r(Jr,Ar,"VP8L")){$t=0;break e}if(la[0]<Qn){$t=7;break e}r(Jr,Ar,"ALPH")||(_r[0]=Jr,yr[0]=Ar+8,un[0]=so),Ar+=Qn,la-=Qn}}if(z=z[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],$t!=0)break}z=[z],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];e:if(an=N,$t=T,hr=z,_r=Pt.gb[0],yr=Pt.Ja,un=Pt.xa,Jr=$t[0],Ar=!r(an,Jr,"VP8 "),Un=!r(an,Jr,"VP8L"),e(an!=null),e(hr!=null),e(yr!=null),e(un!=null),8>hr[0])$t=7;else{if(Ar||Un){if(an=ae(an,Jr+4),12<=_r&&an>_r-12){$t=3;break e}if(ut&&an>hr[0]-8){$t=7;break e}yr[0]=an,$t[0]+=8,hr[0]-=8,un[0]=Un}else un[0]=5<=hr[0]&&an[Jr+0]==47&&!(an[Jr+4]>>5),yr[0]=hr[0];$t=0}if(z=z[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],T=T[0],$t!=0)break;if(4294967286<Pt.Ja)return 3;if(qe==null||or||(qe[0]=Pt.xa?2:1),Ge=[Ge],Lt=[Lt],Pt.xa){if(5>z){$t=7;break}qe=Ge,ut=Lt,or=Me,N==null||5>z?N=0:5<=z&&N[T+0]==47&&!(N[T+4]>>5)?(hr=[0],an=[0],_r=[0],ne(yr=new K,N,T,z),ie(yr,hr,an,_r)?(qe!=null&&(qe[0]=hr[0]),ut!=null&&(ut[0]=an[0]),or!=null&&(or[0]=_r[0]),N=1):N=0):N=0}else{if(10>z){$t=7;break}qe=Lt,N==null||10>z||!Qr(N,T+3,z-3)?N=0:(ut=N[T+0]|N[T+1]<<8|N[T+2]<<16,or=16383&(N[T+7]<<8|N[T+6]),N=16383&(N[T+9]<<8|N[T+8]),1&ut||3<(ut>>1&7)||!(ut>>4&1)||ut>>5>=Pt.Ja||!or||!N?N=0:(Ge&&(Ge[0]=or),qe&&(qe[0]=N),N=1))}if(!N||(Ge=Ge[0],Lt=Lt[0],Kt&&(ct[0]!=Ge||Et[0]!=Lt)))return 3;Ze!=null&&(Ze[0]=Pt,Ze.offset=T-Ze.w,e(4294967286>T-Ze.w),e(Ze.offset==Ze.ha-z));break}return $t==0||$t==7&&Kt&&Ze==null?(Me!=null&&(Me[0]|=Pt.na!=null&&0<Pt.na.length),se!=null&&(se[0]=Ge),Ie!=null&&(Ie[0]=Lt),0):$t}function j1(N,T,z){var se=T.width,Ie=T.height,Me=0,Ge=0,qe=se,Ze=Ie;if(T.Da=N!=null&&0<N.Da,T.Da&&(qe=N.cd,Ze=N.bd,Me=N.v,Ge=N.j,11>z||(Me&=-2,Ge&=-2),0>Me||0>Ge||0>=qe||0>=Ze||Me+qe>se||Ge+Ze>Ie))return 0;if(T.v=Me,T.j=Ge,T.va=Me+qe,T.o=Ge+Ze,T.U=qe,T.T=Ze,T.da=N!=null&&0<N.da,T.da){if(!be(qe,Ze,z=[N.ib],Me=[N.hb]))return 0;T.ib=z[0],T.hb=Me[0]}return T.ob=N!=null&&N.ob,T.Kb=N==null||!N.Sd,T.da&&(T.ob=T.ib<3*se/4&&T.hb<3*Ie/4,T.Kb=0),1}function P1(N){if(N==null)return 2;if(11>N.S){var T=N.f.RGBA;T.fb+=(N.height-1)*T.A,T.A=-T.A}else T=N.f.kb,N=N.height,T.O+=(N-1)*T.fa,T.fa=-T.fa,T.N+=(N-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(N-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(N-1)*T.lb,T.lb=-T.lb);return 0}function HA(N,T,z,se){if(se==null||0>=N||0>=T)return 2;if(z!=null){if(z.Da){var Ie=z.cd,Me=z.bd,Ge=-2&z.v,qe=-2&z.j;if(0>Ge||0>qe||0>=Ie||0>=Me||Ge+Ie>N||qe+Me>T)return 2;N=Ie,T=Me}if(z.da){if(!be(N,T,Ie=[z.ib],Me=[z.hb]))return 2;N=Ie[0],T=Me[0]}}se.width=N,se.height=T;e:{var Ze=se.width,ct=se.height;if(N=se.S,0>=Ze||0>=ct||!(N>=AN&&13>N))N=2;else{if(0>=se.Rd&&se.sd==null){Ge=Me=Ie=T=0;var Et=(qe=Ze*eL[N])*ct;if(11>N||(Me=(ct+1)/2*(T=(Ze+1)/2),N==12&&(Ge=(Ie=Ze)*ct)),(ct=s(Et+2*Me+Ge))==null){N=1;break e}se.sd=ct,11>N?((Ze=se.f.RGBA).eb=ct,Ze.fb=0,Ze.A=qe,Ze.size=Et):((Ze=se.f.kb).y=ct,Ze.O=0,Ze.fa=qe,Ze.Fd=Et,Ze.f=ct,Ze.N=0+Et,Ze.Ab=T,Ze.Cd=Me,Ze.ea=ct,Ze.W=0+Et+Me,Ze.Db=T,Ze.Ed=Me,N==12&&(Ze.F=ct,Ze.J=0+Et+2*Me),Ze.Tc=Ge,Ze.lb=Ie)}if(T=1,Ie=se.S,Me=se.width,Ge=se.height,Ie>=AN&&13>Ie)if(11>Ie)N=se.f.RGBA,T&=(qe=Math.abs(N.A))*(Ge-1)+Me<=N.size,T&=qe>=Me*eL[Ie],T&=N.eb!=null;else{N=se.f.kb,qe=(Me+1)/2,Et=(Ge+1)/2,Ze=Math.abs(N.fa),ct=Math.abs(N.Ab);var Kt=Math.abs(N.Db),ut=Math.abs(N.lb),Pt=ut*(Ge-1)+Me;T&=Ze*(Ge-1)+Me<=N.Fd,T&=ct*(Et-1)+qe<=N.Cd,T=(T&=Kt*(Et-1)+qe<=N.Ed)&Ze>=Me&ct>=qe&Kt>=qe,T&=N.y!=null,T&=N.f!=null,T&=N.ea!=null,Ie==12&&(T&=ut>=Me,T&=Pt<=N.Tc,T&=N.F!=null)}else T=0;N=T?0:2}}return N!=0||z!=null&&z.fd&&(N=P1(se)),N}var Qm=64,au=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],su=24,$A=32,mh=8,GA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(N){return N},E.Predictor2=function(N,T,z){return T[z+0]},E.Predictor3=function(N,T,z){return T[z+1]},E.Predictor4=function(N,T,z){return T[z-1]},E.Predictor5=function(N,T,z){return Ct(Ct(N,T[z+1]),T[z+0])},E.Predictor6=function(N,T,z){return Ct(N,T[z-1])},E.Predictor7=function(N,T,z){return Ct(N,T[z+0])},E.Predictor8=function(N,T,z){return Ct(T[z-1],T[z+0])},E.Predictor9=function(N,T,z){return Ct(T[z+0],T[z+1])},E.Predictor10=function(N,T,z){return Ct(Ct(N,T[z-1]),Ct(T[z+0],T[z+1]))},E.Predictor11=function(N,T,z){var se=T[z+0];return 0>=jt(se>>24&255,N>>24&255,(T=T[z-1])>>24&255)+jt(se>>16&255,N>>16&255,T>>16&255)+jt(se>>8&255,N>>8&255,T>>8&255)+jt(255&se,255&N,255&T)?se:N},E.Predictor12=function(N,T,z){var se=T[z+0];return(St((N>>24&255)+(se>>24&255)-((T=T[z-1])>>24&255))<<24|St((N>>16&255)+(se>>16&255)-(T>>16&255))<<16|St((N>>8&255)+(se>>8&255)-(T>>8&255))<<8|St((255&N)+(255&se)-(255&T)))>>>0},E.Predictor13=function(N,T,z){var se=T[z-1];return(Rt((N=Ct(N,T[z+0]))>>24&255,se>>24&255)<<24|Rt(N>>16&255,se>>16&255)<<16|Rt(N>>8&255,se>>8&255)<<8|Rt(255&N,255&se))>>>0};var B1=E.PredictorAdd0;E.PredictorAdd1=Ue,pt("Predictor2","PredictorAdd2"),pt("Predictor3","PredictorAdd3"),pt("Predictor4","PredictorAdd4"),pt("Predictor5","PredictorAdd5"),pt("Predictor6","PredictorAdd6"),pt("Predictor7","PredictorAdd7"),pt("Predictor8","PredictorAdd8"),pt("Predictor9","PredictorAdd9"),pt("Predictor10","PredictorAdd10"),pt("Predictor11","PredictorAdd11"),pt("Predictor12","PredictorAdd12"),pt("Predictor13","PredictorAdd13");var Hg=E.PredictorAdd2;Z("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Z("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var Ci,dN=E.ColorIndexInverseTransform,If=E.MapARGB,jf=E.VP8LColorIndexInverseTransformAlpha,T1=E.MapAlpha,k1=E.VP8LPredictorsAdd=[];k1.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var F1,O1,KA,qA,zA,Vm,WA,Hm,Qu,Pf,Ta,ns,_i,ao,ph,D1,$g,fN,j8,P8,B8,T8,k8,F8,R1,O8,D8,R8,M8=s(511),L8=s(2041),U8=s(225),Q8=s(767),V8=0,x4=L8,hN=U8,iu=Q8,Vu=M8,AN=0,mN=1,H8=2,pN=3,gN=4,v4=5,$8=6,y4=7,b4=8,xN=9,w4=10,Kue=[2,3,7],que=[3,3,11],G8=[280,256,256,256,40],zue=[0,1,1,1,0],Wue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yue=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jue=8,N4=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],C4=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],M1=null,Zue=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ede=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],K8=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tde=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rde=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nde=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ade=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],XA=[],Rd=[],gh=[],sde=1,q8=2,YA=[],Hu=[];Lu("UpsampleRgbLinePair",Dt,3),Lu("UpsampleBgrLinePair",Xt,3),Lu("UpsampleRgbaLinePair",va,4),Lu("UpsampleBgraLinePair",zn,4),Lu("UpsampleArgbLinePair",Ws,4),Lu("UpsampleRgba4444LinePair",oa,2),Lu("UpsampleRgb565LinePair",Pr,2);var ide=E.UpsampleRgbLinePair,ode=E.UpsampleBgrLinePair,z8=E.UpsampleRgbaLinePair,W8=E.UpsampleBgraLinePair,X8=E.UpsampleArgbLinePair,Y8=E.UpsampleRgba4444LinePair,lde=E.UpsampleRgb565LinePair,vN=16,yN=1<<vN-1,L1=-227,_4=482,cde=6,J8=0,ude=s(256),dde=s(256),fde=s(256),hde=s(256),Ade=s(_4-L1),mde=s(_4-L1);ds("YuvToRgbRow",Dt,3),ds("YuvToBgrRow",Xt,3),ds("YuvToRgbaRow",va,4),ds("YuvToBgraRow",zn,4),ds("YuvToArgbRow",Ws,4),ds("YuvToRgba4444Row",oa,2),ds("YuvToRgb565Row",Pr,2);var Z8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bN=[0,2,8],pde=[8,7,6,4,4,2,2,2,1,1,1,1],gde=1;this.WebPDecodeRGBA=function(N,T,z,se,Ie){var Me=mN,Ge=new fr,qe=new we;Ge.ba=qe,qe.S=Me,qe.width=[qe.width],qe.height=[qe.height];var Ze=qe.width,ct=qe.height,Et=new Le;if(Et==null||N==null)var Kt=2;else e(Et!=null),Kt=Dd(N,T,z,Et.width,Et.height,Et.Pd,Et.Qd,Et.format,null);if(Kt!=0?Ze=0:(Ze!=null&&(Ze[0]=Et.width[0]),ct!=null&&(ct[0]=Et.height[0]),Ze=1),Ze){qe.width=qe.width[0],qe.height=qe.height[0],se!=null&&(se[0]=qe.width),Ie!=null&&(Ie[0]=qe.height);e:{if(se=new zt,(Ie=new gr).data=N,Ie.w=T,Ie.ha=z,Ie.kd=1,T=[0],e(Ie!=null),((N=Dd(Ie.data,Ie.w,Ie.ha,null,null,null,T,null,Ie))==0||N==7)&&T[0]&&(N=4),(T=N)==0){if(e(Ge!=null),se.data=Ie.data,se.w=Ie.w+Ie.offset,se.ha=Ie.ha-Ie.offset,se.put=_e,se.ac=st,se.bc=xe,se.ma=Ge,Ie.xa){if((N=At())==null){Ge=1;break e}if(function(ut,Pt){var Lt=[0],or=[0],$t=[0];t:for(;;){if(ut==null)return 0;if(Pt==null)return ut.a=2,0;if(ut.l=Pt,ut.a=0,ne(ut.m,Pt.data,Pt.w,Pt.ha),!ie(ut.m,Lt,or,$t)){ut.a=3;break t}if(ut.xb=q8,Pt.width=Lt[0],Pt.height=or[0],!Je(Lt[0],or[0],1,ut,null))break t;return 1}return e(ut.a!=0),0}(N,se)){if(se=(T=HA(se.width,se.height,Ge.Oa,Ge.ba))==0){t:{se=N;r:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((z=se.l)!=null),e((Ie=z.ma)!=null),se.xb!=0){if(se.ca=Ie.ba,se.tb=Ie.tb,e(se.ca!=null),!j1(Ie.Oa,z,pN)){se.a=2;break r}if(!ht(se,z.width)||z.da)break r;if((z.da||Ce(se.ca.S))&&Bc(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Bc()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!ee(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!$e(se,se.V,se.Ba,se.c,se.i,z.o,L))break r;Ie.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(T=N.a)}else T=N.a}else{if((N=new pr)==null){Ge=1;break e}if(N.Fa=Ie.na,N.P=Ie.P,N.qc=Ie.Sa,ln(N,se)){if((T=HA(se.width,se.height,Ge.Oa,Ge.ba))==0){if(N.Aa=0,z=Ge.Oa,e((Ie=N)!=null),z!=null){if(0<(Ze=0>(Ze=z.Md)?0:100<Ze?255:255*Ze/100)){for(ct=Et=0;4>ct;++ct)12>(Kt=Ie.pb[ct]).lc&&(Kt.ia=Ze*pde[0>Kt.lc?0:Kt.lc]>>3),Et|=Kt.ia;Et&&(alert("todo:VP8InitRandom"),Ie.ia=1)}Ie.Ga=z.Id,100<Ie.Ga?Ie.Ga=100:0>Ie.Ga&&(Ie.Ga=0)}(function(ut,Pt){if(ut==null)return 0;if(Pt==null)return Gt(ut,2,"NULL VP8Io parameter in VP8Decode().");if(!ut.cb&&!ln(ut,Pt))return 0;if(e(ut.cb),Pt.ac==null||Pt.ac(Pt)){Pt.ob&&(ut.L=0);var Lt=bN[ut.L];if(ut.L==2?(ut.yb=0,ut.zb=0):(ut.yb=Pt.v-Lt>>4,ut.zb=Pt.j-Lt>>4,0>ut.yb&&(ut.yb=0),0>ut.zb&&(ut.zb=0)),ut.Va=Pt.o+15+Lt>>4,ut.Hb=Pt.va+15+Lt>>4,ut.Hb>ut.za&&(ut.Hb=ut.za),ut.Va>ut.Ub&&(ut.Va=ut.Ub),0<ut.L){var or=ut.ed;for(Lt=0;4>Lt;++Lt){var $t;if(ut.Qa.Cb){var hr=ut.Qa.Lb[Lt];ut.Qa.Fb||(hr+=or.Tb)}else hr=or.Tb;for($t=0;1>=$t;++$t){var Ar=ut.gd[Lt][$t],_r=hr;if(or.Pc&&(_r+=or.vd[0],$t&&(_r+=or.od[0])),0<(_r=0>_r?0:63<_r?63:_r)){var yr=_r;0<or.wb&&(yr=4<or.wb?yr>>2:yr>>1)>9-or.wb&&(yr=9-or.wb),1>yr&&(yr=1),Ar.dd=yr,Ar.tc=2*_r+yr,Ar.ld=40<=_r?2:15<=_r?1:0}else Ar.tc=0;Ar.La=$t}}}Lt=0}else Gt(ut,6,"Frame setup failed"),Lt=ut.a;if(Lt=Lt==0){if(Lt){ut.$c=0,0<ut.Aa||(ut.Ic=gde);t:{Lt=ut.Ic,or=4*(yr=ut.za);var un=32*yr,Jr=yr+1,Un=0<ut.L?yr*(0<ut.Aa?2:1):0,an=(ut.Aa==2?2:1)*yr;if((Ar=or+832+($t=3*(16*Lt+bN[ut.L])/2*un)+(hr=ut.Fa!=null&&0<ut.Fa.length?ut.Kc.c*ut.Kc.i:0))!=Ar)Lt=0;else{if(Ar>ut.Vb){if(ut.Vb=0,ut.Ec=s(Ar),ut.Fc=0,ut.Ec==null){Lt=Gt(ut,1,"no memory during frame initialization.");break t}ut.Vb=Ar}Ar=ut.Ec,_r=ut.Fc,ut.Ac=Ar,ut.Bc=_r,_r+=or,ut.Gd=o(un,fn),ut.Hd=0,ut.rb=o(Jr+1,Nr),ut.sb=1,ut.wa=Un?o(Un,cr):null,ut.Y=0,ut.D.Nb=0,ut.D.wa=ut.wa,ut.D.Y=ut.Y,0<ut.Aa&&(ut.D.Y+=yr),e(!0),ut.oc=Ar,ut.pc=_r,_r+=832,ut.ya=o(an,Mr),ut.aa=0,ut.D.ya=ut.ya,ut.D.aa=ut.aa,ut.Aa==2&&(ut.D.aa+=yr),ut.R=16*yr,ut.B=8*yr,yr=(un=bN[ut.L])*ut.R,un=un/2*ut.B,ut.sa=Ar,ut.ta=_r+yr,ut.qa=ut.sa,ut.ra=ut.ta+16*Lt*ut.R+un,ut.Ha=ut.qa,ut.Ia=ut.ra+8*Lt*ut.B+un,ut.$c=0,_r+=$t,ut.mb=hr?Ar:null,ut.nb=hr?_r:null,e(_r+hr<=ut.Fc+ut.Vb),mt(ut),a(ut.Ac,ut.Bc,0,or),Lt=1}}if(Lt){if(Pt.ka=0,Pt.y=ut.sa,Pt.O=ut.ta,Pt.f=ut.qa,Pt.N=ut.ra,Pt.ea=ut.Ha,Pt.Vd=ut.Ia,Pt.fa=ut.R,Pt.Rc=ut.B,Pt.F=null,Pt.J=0,!V8){for(Lt=-255;255>=Lt;++Lt)M8[255+Lt]=0>Lt?-Lt:Lt;for(Lt=-1020;1020>=Lt;++Lt)L8[1020+Lt]=-128>Lt?-128:127<Lt?127:Lt;for(Lt=-112;112>=Lt;++Lt)U8[112+Lt]=-16>Lt?-16:15<Lt?15:Lt;for(Lt=-255;510>=Lt;++Lt)Q8[255+Lt]=0>Lt?0:255<Lt?255:Lt;V8=1}WA=It,Hm=Qe,Pf=ot,Ta=_t,ns=et,Qu=Nt,_i=Sf,ao=Mu,ph=Ee,D1=lt,$g=Um,fN=V,j8=bt,P8=Tt,B8=rc,T8=ys,k8=Ef,F8=VA,Rd[0]=ha,Rd[1]=rr,Rd[2]=ia,Rd[3]=_a,Rd[4]=En,Rd[5]=Fd,Rd[6]=vs,Rd[7]=Tn,Rd[8]=Sc,Rd[9]=To,XA[0]=Zt,XA[1]=Bt,XA[2]=br,XA[3]=wr,XA[4]=dr,XA[5]=Rr,XA[6]=Wr,gh[0]=Ic,gh[1]=er,gh[2]=Gs,gh[3]=$i,gh[4]=ru,gh[5]=ca,gh[6]=QA,Lt=1}else Lt=0}Lt&&(Lt=function(la,so){for(la.M=0;la.M<la.Va;++la.M){var Qn,sn=la.Jc[la.M&la.Xb],Ur=la.m,Ei=la;for(Qn=0;Qn<Ei.za;++Qn){var Dn=Ur,ua=Ei,bs=ua.Ac,rl=ua.Bc+4*Qn,nc=ua.zc,hi=ua.ya[ua.aa+Qn];if(ua.Qa.Bb?hi.$b=te(Dn,ua.Pa.jb[0])?2+te(Dn,ua.Pa.jb[2]):te(Dn,ua.Pa.jb[1]):hi.$b=0,ua.kc&&(hi.Ad=te(Dn,ua.Bd)),hi.Za=!te(Dn,145)+0,hi.Za){var Il=hi.Ob,ac=0;for(ua=0;4>ua;++ua){var io,Aa=nc[0+ua];for(io=0;4>io;++io){Aa=rde[bs[rl+io]][Aa];for(var Da=K8[te(Dn,Aa[0])];0<Da;)Da=K8[2*Da+te(Dn,Aa[Da])];Aa=-Da,bs[rl+io]=Aa}n(Il,ac,bs,rl,4),ac+=4,nc[0+ua]=Aa}}else Aa=te(Dn,156)?te(Dn,128)?1:3:te(Dn,163)?2:0,hi.Ob[0]=Aa,a(bs,rl,Aa,4),a(nc,0,Aa,4);hi.Dd=te(Dn,142)?te(Dn,114)?te(Dn,183)?1:3:2:0}if(Ei.m.Ka)return Gt(la,7,"Premature end-of-partition0 encountered.");for(;la.ja<la.za;++la.ja){if(Ei=sn,Dn=(Ur=la).rb[Ur.sb-1],bs=Ur.rb[Ur.sb+Ur.ja],Qn=Ur.ya[Ur.aa+Ur.ja],rl=Ur.kc?Qn.Ad:0)Dn.la=bs.la=0,Qn.Za||(Dn.Na=bs.Na=0),Qn.Hc=0,Qn.Gc=0,Qn.ia=0;else{var Ai,Ra;if(Dn=bs,bs=Ei,rl=Ur.Pa.Xc,nc=Ur.ya[Ur.aa+Ur.ja],hi=Ur.pb[nc.$b],ua=nc.ad,Il=0,ac=Ur.rb[Ur.sb-1],Aa=io=0,a(ua,Il,0,384),nc.Za)var nl=0,Md=rl[3];else{Da=s(16);var Si=Dn.Na+ac.Na;if(Si=M1(bs,rl[1],Si,hi.Eb,0,Da,0),Dn.Na=ac.Na=(0<Si)+0,1<Si)WA(Da,0,ua,Il);else{var Tc=Da[0]+3>>3;for(Da=0;256>Da;Da+=16)ua[Il+Da]=Tc}nl=1,Md=rl[0]}var as=15&Dn.la,oo=15&ac.la;for(Da=0;4>Da;++Da){var ou=1&oo;for(Tc=Ra=0;4>Tc;++Tc)as=as>>1|(ou=(Si=M1(bs,Md,Si=ou+(1&as),hi.Sc,nl,ua,Il))>nl)<<7,Ra=Ra<<2|(3<Si?3:1<Si?2:ua[Il+0]!=0),Il+=16;as>>=4,oo=oo>>1|ou<<7,io=(io<<8|Ra)>>>0}for(Md=as,nl=oo>>4,Ai=0;4>Ai;Ai+=2){for(Ra=0,as=Dn.la>>4+Ai,oo=ac.la>>4+Ai,Da=0;2>Da;++Da){for(ou=1&oo,Tc=0;2>Tc;++Tc)Si=ou+(1&as),as=as>>1|(ou=0<(Si=M1(bs,rl[2],Si,hi.Qc,0,ua,Il)))<<3,Ra=Ra<<2|(3<Si?3:1<Si?2:ua[Il+0]!=0),Il+=16;as>>=2,oo=oo>>1|ou<<5}Aa|=Ra<<4*Ai,Md|=as<<4<<Ai,nl|=(240&oo)<<Ai}Dn.la=Md,ac.la=nl,nc.Hc=io,nc.Gc=Aa,nc.ia=43690&Aa?0:hi.ia,rl=!(io|Aa)}if(0<Ur.L&&(Ur.wa[Ur.Y+Ur.ja]=Ur.gd[Qn.$b][Qn.Za],Ur.wa[Ur.Y+Ur.ja].La|=!rl),Ei.Ka)return Gt(la,7,"Premature end-of-file encountered.")}if(mt(la),Ur=so,Ei=1,Qn=(sn=la).D,Dn=0<sn.L&&sn.M>=sn.zb&&sn.M<=sn.Va,sn.Aa==0)t:{if(Qn.M=sn.M,Qn.uc=Dn,tl(sn,Qn),Ei=1,Qn=(Ra=sn.D).Nb,Dn=(Aa=bN[sn.L])*sn.R,bs=Aa/2*sn.B,Da=16*Qn*sn.R,Tc=8*Qn*sn.B,rl=sn.sa,nc=sn.ta-Dn+Da,hi=sn.qa,ua=sn.ra-bs+Tc,Il=sn.Ha,ac=sn.Ia-bs+Tc,oo=(as=Ra.M)==0,io=as>=sn.Va-1,sn.Aa==2&&tl(sn,Ra),Ra.uc)for(ou=(Si=sn).D.M,e(Si.D.uc),Ra=Si.yb;Ra<Si.Hb;++Ra){nl=Ra,Md=ou;var sc=(lu=(al=Si).D).Nb;Ai=al.R;var lu=lu.wa[lu.Y+nl],cu=al.sa,kc=al.ta+16*sc*Ai+16*nl,uu=lu.dd,fs=lu.tc;if(fs!=0)if(e(3<=fs),al.L==1)0<nl&&T8(cu,kc,Ai,fs+4),lu.La&&F8(cu,kc,Ai,fs),0<Md&&B8(cu,kc,Ai,fs+4),lu.La&&k8(cu,kc,Ai,fs);else{var du=al.B,Ld=al.qa,$m=al.ra+8*sc*du+8*nl,xh=al.Ha,al=al.Ia+8*sc*du+8*nl;sc=lu.ld,0<nl&&(ao(cu,kc,Ai,fs+4,uu,sc),D1(Ld,$m,xh,al,du,fs+4,uu,sc)),lu.La&&(fN(cu,kc,Ai,fs,uu,sc),P8(Ld,$m,xh,al,du,fs,uu,sc)),0<Md&&(_i(cu,kc,Ai,fs+4,uu,sc),ph(Ld,$m,xh,al,du,fs+4,uu,sc)),lu.La&&($g(cu,kc,Ai,fs,uu,sc),j8(Ld,$m,xh,al,du,fs,uu,sc))}}if(sn.ia&&alert("todo:DitherRow"),Ur.put!=null){if(Ra=16*as,as=16*(as+1),oo?(Ur.y=sn.sa,Ur.O=sn.ta+Da,Ur.f=sn.qa,Ur.N=sn.ra+Tc,Ur.ea=sn.Ha,Ur.W=sn.Ia+Tc):(Ra-=Aa,Ur.y=rl,Ur.O=nc,Ur.f=hi,Ur.N=ua,Ur.ea=Il,Ur.W=ac),io||(as-=Aa),as>Ur.o&&(as=Ur.o),Ur.F=null,Ur.J=null,sn.Fa!=null&&0<sn.Fa.length&&Ra<as&&(Ur.J=Oa(sn,Ur,Ra,as-Ra),Ur.F=sn.mb,Ur.F==null&&Ur.F.length==0)){Ei=Gt(sn,3,"Could not decode alpha data.");break t}Ra<Ur.j&&(Aa=Ur.j-Ra,Ra=Ur.j,e(!(1&Aa)),Ur.O+=sn.R*Aa,Ur.N+=sn.B*(Aa>>1),Ur.W+=sn.B*(Aa>>1),Ur.F!=null&&(Ur.J+=Ur.width*Aa)),Ra<as&&(Ur.O+=Ur.v,Ur.N+=Ur.v>>1,Ur.W+=Ur.v>>1,Ur.F!=null&&(Ur.J+=Ur.v),Ur.ka=Ra-Ur.j,Ur.U=Ur.va-Ur.v,Ur.T=as-Ra,Ei=Ur.put(Ur))}Qn+1!=sn.Ic||io||(n(sn.sa,sn.ta-Dn,rl,nc+16*sn.R,Dn),n(sn.qa,sn.ra-bs,hi,ua+8*sn.B,bs),n(sn.Ha,sn.Ia-bs,Il,ac+8*sn.B,bs))}if(!Ei)return Gt(la,6,"Output aborted.")}return 1}(ut,Pt)),Pt.bc!=null&&Pt.bc(Pt),Lt&=1}return Lt?(ut.cb=0,Lt):0})(N,se)||(T=N.a)}}else T=N.a}T==0&&Ge.Oa!=null&&Ge.Oa.fd&&(T=P1(Ge.ba))}Ge=T}Me=Ge!=0?null:11>Me?qe.f.RGBA.eb:qe.f.kb.y}else Me=null;return Me};var eL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,F){for(var k="",B=0;B<4;B++)k+=String.fromCharCode(E[F++]);return k}function d(E,F){return E[F+0]|E[F+1]<<8}function f(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16)>>>0}function A(E,F){return(E[F+0]|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24)>>>0}new c;var h=[0],m=[0],p=[],x=new c,v=t,y=function(E,F){var k={},B=0,D=!1,X=0,he=0;if(k.frames=[],!function(O,K){for(var q=0;q<4;q++)if(O[K+q]!="RIFF".charCodeAt(q))return!0;return!1}(E,F)){for(A(E,F+=4),F+=8;F<E.length;){var Ae=u(E,F),fe=A(E,F+=4);F+=4;var me=fe+(1&fe);switch(Ae){case"VP8 ":case"VP8L":k.frames[B]===void 0&&(k.frames[B]={}),(Te=k.frames[B]).src_off=D?he:F-8,Te.src_size=X+fe+8,B++,D&&(D=!1,X=0,he=0);break;case"VP8X":(Te=k.header={}).feature_flags=E[F];var ne=F+4;Te.canvas_width=1+f(E,ne),ne+=3,Te.canvas_height=1+f(E,ne),ne+=3;break;case"ALPH":D=!0,X=me+8,he=F-8;break;case"ANIM":(Te=k.header).bgcolor=A(E,F),ne=F+4,Te.loop_count=d(E,ne),ne+=2;break;case"ANMF":var Pe,Te;(Te=k.frames[B]={}).offset_x=2*f(E,F),F+=3,Te.offset_y=2*f(E,F),F+=3,Te.width=1+f(E,F),F+=3,Te.height=1+f(E,F),F+=3,Te.duration=f(E,F),F+=3,Pe=E[F++],Te.dispose=1&Pe,Te.blend=Pe>>1&1}Ae!="ANMF"&&(F+=me)}return k}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,w=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var j=0;j<w.length&&w[j].blend!=0;j++);}var I=w[0],_=x.WebPDecodeRGBA(v,I.src_off,I.src_size,m,h);I.rgba=_,I.imgwidth=m[0],I.imgheight=h[0];for(var S=0;S<m[0]*h[0]*4;S++)p[S]=_[S];return this.width=m,this.height=h,this.data=p,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=O;Object.defineProperty(this,"pdf",{get:function(){return K}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ee){q=!!ee}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(ee){U=!!ee}});var W=0;Object.defineProperty(this,"posX",{get:function(){return W},set:function(ee){isNaN(ee)||(W=ee)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(ee){isNaN(ee)||(J=ee)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ee){var Fe;typeof ee=="number"?Fe=[ee,ee,ee,ee]:((Fe=new Array(4))[0]=ee[0],Fe[1]=ee.length>=2?ee[1]:Fe[0],Fe[2]=ee.length>=3?ee[2]:Fe[0],Fe[3]=ee.length>=4?ee[3]:Fe[1]),u.margin=Fe}});var M=!1;Object.defineProperty(this,"autoPaging",{get:function(){return M},set:function(ee){M=ee}});var H=0;Object.defineProperty(this,"lastBreak",{get:function(){return H},set:function(ee){H=ee}});var te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return te},set:function(ee){te=ee}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ee){ee instanceof d&&(u=ee)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ee){u.path=ee}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(ee){ve=ee}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ee){var Fe;Fe=A(ee),this.ctx.fillStyle=Fe.style,this.ctx.isFillTransparent=Fe.a===0,this.ctx.fillOpacity=Fe.a,this.pdf.setFillColor(Fe.r,Fe.g,Fe.b,{a:Fe.a}),this.pdf.setTextColor(Fe.r,Fe.g,Fe.b,{a:Fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ee){var Fe=A(ee);this.ctx.strokeStyle=Fe.style,this.ctx.isStrokeTransparent=Fe.a===0,this.ctx.strokeOpacity=Fe.a,Fe.a===0?this.pdf.setDrawColor(255,255,255):(Fe.a,this.pdf.setDrawColor(Fe.r,Fe.g,Fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ee){["butt","round","square"].indexOf(ee)!==-1&&(this.ctx.lineCap=ee,this.pdf.setLineCap(ee))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ee){isNaN(ee)||(this.ctx.lineWidth=ee,this.pdf.setLineWidth(ee))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ee){["bevel","round","miter"].indexOf(ee)!==-1&&(this.ctx.lineJoin=ee,this.pdf.setLineJoin(ee))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ee){isNaN(ee)||(this.ctx.miterLimit=ee,this.pdf.setMiterLimit(ee))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ee){this.ctx.textBaseline=ee}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ee){["right","end","center","left","start"].indexOf(ee)!==-1&&(this.ctx.textAlign=ee)}});var Q=null,Ke=null,ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return ae},set:function(ee){Q=null,Ke=null,ae=ee}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ee){var Fe;if(this.ctx.font=ee,(Fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ee))!==null){var ce=Fe[1];Fe[2];var be=Fe[3],Ve=Fe[4];Fe[5];var We=Fe[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ve)[2];Ve=Math.floor(pt==="px"?parseFloat(Ve)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(Ve)*this.pdf.getFontSize():parseFloat(Ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ve);var wt=function(Z){var Ne,Re,ge=[],Xe=Z.trim();if(Xe==="")return s5;if(Xe in AV)return[AV[Xe]];for(;Xe!=="";){switch(Re=null,Ne=(Xe=pV(Xe)).charAt(0)){case'"':case"'":Re=Oje(Xe.substring(1),Ne);break;default:Re=Dje(Xe)}if(Re===null||(ge.push(Re[0]),(Xe=pV(Re[1]))!==""&&Xe.charAt(0)!==","))return s5;Xe=Xe.replace(/^,/,"")}return ge}(We);if(this.fontFaces){var Ct=function(Z,Ne){var Re=Z.getFontList(),ge=JSON.stringify(Re);if(Q===null||Ke!==ge){var Xe=function(vt){var it=[];return Object.keys(vt).forEach(function(de){vt[de].forEach(function(Ce){var Ye=null;switch(Ce){case"bold":Ye={family:de,weight:"bold"};break;case"italic":Ye={family:de,style:"italic"};break;case"bolditalic":Ye={family:de,weight:"bold",style:"italic"};break;case"":case"normal":Ye={family:de}}Ye!==null&&(Ye.ref={name:de,style:Ce},it.push(Ye))})}),it}(Re);Q=function(vt){for(var it={},de=0;de<vt.length;++de){var Ce=a5(vt[de]),Ye=Ce.family,ft=Ce.stretch,we=Ce.style,Le=Ce.weight;it[Ye]=it[Ye]||{},it[Ye][ft]=it[Ye][ft]||{},it[Ye][ft][we]=it[Ye][ft][we]||{},it[Ye][ft][we][Le]=Ce}return it}(Xe.concat(Ne)),Ke=ge}return Q}(this.pdf,this.fontFaces),St=wt.map(function(Z){return{family:Z,stretch:"normal",weight:be,style:ce}}),Rt=function(Z,Ne,Re){for(var ge=(Re=Re||{}).defaultFontFamily||"times",Xe=Object.assign({},Fje,Re.genericFontFamilies||{}),vt=null,it=null,de=0;de<Ne.length;++de)if(Xe[(vt=a5(Ne[de])).family]&&(vt.family=Xe[vt.family]),Z.hasOwnProperty(vt.family)){it=Z[vt.family];break}if(!(it=it||Z[ge]))throw new Error("Could not find a font-family for the rule '"+mV(vt)+"' and default family '"+ge+"'.");if(it=function(Ce,Ye){if(Ye[Ce])return Ye[Ce];var ft=Tk[Ce],we=ft<=Tk.normal?-1:1,Le=hV(Ye,gre,ft,we);if(!Le)throw new Error("Could not find a matching font-stretch value for "+Ce);return Le}(vt.stretch,it),it=function(Ce,Ye){if(Ye[Ce])return Ye[Ce];for(var ft=pre[Ce],we=0;we<ft.length;++we)if(Ye[ft[we]])return Ye[ft[we]];throw new Error("Could not find a matching font-style for "+Ce)}(vt.style,it),!(it=function(Ce,Ye){if(Ye[Ce])return Ye[Ce];if(Ce===400&&Ye[500])return Ye[500];if(Ce===500&&Ye[400])return Ye[400];var ft=kje[Ce],we=hV(Ye,xre,ft,Ce<400?-1:1);if(!we)throw new Error("Could not find a matching font-weight for value "+Ce);return we}(vt.weight,it)))throw new Error("Failed to resolve a font for the rule '"+mV(vt)+"'.");return it}(Ct,St);this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var jt="";(be==="bold"||parseInt(be,10)>=700||ce==="bold")&&(jt="bold"),ce==="italic"&&(jt+="italic"),jt.length===0&&(jt="normal");for(var Ue="",Be={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<wt.length;ye++){if(this.pdf.internal.getFont(wt[ye],jt,{noFallback:!0,disableWarning:!0})!==void 0){Ue=wt[ye];break}if(jt==="bolditalic"&&this.pdf.internal.getFont(wt[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ue=wt[ye],jt="bold";else if(this.pdf.internal.getFont(wt[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ue=wt[ye],jt="normal";break}}if(Ue===""){for(var oe=0;oe<wt.length;oe++)if(Be[wt[oe]]){Ue=Be[wt[oe]];break}}Ue=Ue===""?"Times":Ue,this.pdf.setFont(Ue,jt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ee){this.ctx.globalCompositeOperation=ee}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ee){this.ctx.globalAlpha=ee}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ee){this.ctx.lineDashOffset=ee,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ee){this.ctx.lineDash=ee,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ee){this.ctx.ignoreClearRect=!!ee}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){w.call(this,"fill",!1)},f.prototype.stroke=function(){w.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,K){if(isNaN(O)||isNaN(K))throw is.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(O,K));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(O,K)},f.prototype.closePath=function(){var O=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&Ka(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){O=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,K){if(isNaN(O)||isNaN(K))throw is.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(O,K));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,K,q,U){if(isNaN(q)||isNaN(U)||isNaN(O)||isNaN(K))throw is.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var W=this.ctx.transform.applyToPoint(new o(q,U)),J=this.ctx.transform.applyToPoint(new o(O,K));this.path.push({type:"qct",x1:J.x,y1:J.y,x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},f.prototype.bezierCurveTo=function(O,K,q,U,W,J){if(isNaN(W)||isNaN(J)||isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U))throw is.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var M=this.ctx.transform.applyToPoint(new o(W,J)),H=this.ctx.transform.applyToPoint(new o(O,K)),te=this.ctx.transform.applyToPoint(new o(q,U));this.path.push({type:"bct",x1:H.x,y1:H.y,x2:te.x,y2:te.y,x:M.x,y:M.y}),this.ctx.lastPoint=new o(M.x,M.y)},f.prototype.arc=function(O,K,q,U,W,J){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U)||isNaN(W))throw is.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var M=this.ctx.transform.applyToPoint(new o(O,K));O=M.x,K=M.y;var H=this.ctx.transform.applyToPoint(new o(0,q)),te=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(H.x-te.x,2)+Math.pow(H.y-te.y,2))}Math.abs(W-U)>=2*Math.PI&&(U=0,W=2*Math.PI),this.path.push({type:"arc",x:O,y:K,radius:q,startAngle:U,endAngle:W,counterclockwise:J})},f.prototype.arcTo=function(O,K,q,U,W){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,K,q,U){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U))throw is.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,K),this.lineTo(O+q,K),this.lineTo(O+q,K+U),this.lineTo(O,K+U),this.lineTo(O,K),this.lineTo(O+q,K),this.lineTo(O,K)},f.prototype.fillRect=function(O,K,q,U){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U))throw is.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var W={};this.lineCap!=="butt"&&(W.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(W.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,K,q,U),this.fill(),W.hasOwnProperty("lineCap")&&(this.lineCap=W.lineCap),W.hasOwnProperty("lineJoin")&&(this.lineJoin=W.lineJoin)}},f.prototype.strokeRect=function(O,K,q,U){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U))throw is.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(O,K,q,U),this.stroke())},f.prototype.clearRect=function(O,K,q,U){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U))throw is.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,K,q,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(K),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(O){var K,q,U,W;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))K=0,q=0,U=0,W=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(J!==null)K=parseInt(J[1]),q=parseInt(J[2]),U=parseInt(J[3]),W=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)K=parseInt(J[1]),q=parseInt(J[2]),U=parseInt(J[3]),W=parseFloat(J[4]);else{if(W=1,typeof O=="string"&&O.charAt(0)!=="#"){var M=new cre(O);O=M.ok?M.toHex():"#000000"}O.length===4?(K=O.substring(1,2),K+=K,q=O.substring(2,3),q+=q,U=O.substring(3,4),U+=U):(K=O.substring(1,3),q=O.substring(3,5),U=O.substring(5,7)),K=parseInt(K,16),q=parseInt(q,16),U=parseInt(U,16)}}return{r:K,g:q,b:U,a:W,style:O}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,K,q,U){if(isNaN(K)||isNaN(q)||typeof O!="string")throw is.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!h.call(this)){var W=me(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;B.call(this,{text:O,x:K,y:q,scale:J,angle:W,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,K,q,U){if(isNaN(K)||isNaN(q)||typeof O!="string")throw is.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){U=isNaN(U)?void 0:U;var W=me(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;B.call(this,{text:O,x:K,y:q,scale:J,renderingMode:"stroke",angle:W,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw is.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,q=this.pdf.internal.scaleFactor,U=K.internal.getFontSize(),W=K.getStringUnitWidth(O)*U/K.internal.scaleFactor;return new function(J){var M=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return M}}),this}({width:W*=Math.round(96*q/72*1e4)/1e4})},f.prototype.scale=function(O,K){if(isNaN(O)||isNaN(K))throw is.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(O,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.rotate=function(O){if(isNaN(O))throw is.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},f.prototype.translate=function(O,K){if(isNaN(O)||isNaN(K))throw is.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,O,K);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.transform=function(O,K,q,U,W,J){if(isNaN(O)||isNaN(K)||isNaN(q)||isNaN(U)||isNaN(W)||isNaN(J))throw is.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var M=new c(O,K,q,U,W,J);this.ctx.transform=this.ctx.transform.multiply(M)},f.prototype.setTransform=function(O,K,q,U,W,J){O=isNaN(O)?1:O,K=isNaN(K)?0:K,q=isNaN(q)?0:q,U=isNaN(U)?1:U,W=isNaN(W)?0:W,J=isNaN(J)?0:J,this.ctx.transform=new c(O,K,q,U,W,J)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,K,q,U,W,J,M,H,te){var ve=this.pdf.getImageProperties(O),Q=1,Ke=1,ae=1,ee=1;U!==void 0&&H!==void 0&&(ae=H/U,ee=te/W,Q=ve.width/U*H/U,Ke=ve.height/W*te/W),J===void 0&&(J=K,M=q,K=0,q=0),U!==void 0&&H===void 0&&(H=U,te=W),U===void 0&&H===void 0&&(H=ve.width,te=ve.height);var Fe=this.ctx.transform.decompose(),ce=me(Fe.rotate.shx),be=new c,Ve=(be=(be=(be=be.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale)).applyToRectangle(new l(J-K*ae,M-q*ee,U*Q,W*Ke));if(this.autoPaging){for(var We,pt=x.call(this,Ve),wt=[],Ct=0;Ct<pt.length;Ct+=1)wt.indexOf(pt[Ct])===-1&&wt.push(pt[Ct]);b(wt);for(var St=wt[0],Rt=wt[wt.length-1],jt=St;jt<Rt+1;jt++){this.pdf.setPage(jt);var Ue=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=jt===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Z=jt===1?0:ye+(jt-2)*oe;if(this.ctx.clip_path.length!==0){var Ne=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(We,this.posX+this.margin[3],-Z+Be+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Ne}var Re=JSON.parse(JSON.stringify(Ve));Re=y([Re],this.posX+this.margin[3],-Z+Be+this.ctx.prevPageLastElemOffset)[0];var ge=(jt>St||jt<Rt)&&p.call(this);ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,oe,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,ce),ge&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(O,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,ce)};var x=function(O,K,q){var U=[];K=K||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var W=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+W)/q)+1);break;case"arc":U.push(Math.floor((O.y+W-O.radius)/q)+1),U.push(Math.floor((O.y+W+O.radius)/q)+1);break;case"qct":var J=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((J.y+W)/q)+1),U.push(Math.floor((J.y+J.h+W)/q)+1);break;case"bct":var M=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((M.y+W)/q)+1),U.push(Math.floor((M.y+M.h+W)/q)+1);break;case"rect":U.push(Math.floor((O.y+W)/q)+1),U.push(Math.floor((O.y+O.h+W)/q)+1)}for(var H=0;H<U.length;H+=1)for(;this.pdf.internal.getNumberOfPages()<U[H];)v.call(this);return U},v=function(){var O=this.fillStyle,K=this.strokeStyle,q=this.font,U=this.lineCap,W=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=K,this.font=q,this.lineCap=U,this.lineWidth=W,this.lineJoin=J},y=function(O,K,q){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=K,O[U].y2+=q;case"qct":O[U].x1+=K,O[U].y1+=q;default:O[U].x+=K,O[U].y+=q}return O},b=function(O){return O.sort(function(K,q){return K-q})},w=function(O,K){var q=this.fillStyle,U=this.strokeStyle,W=this.lineCap,J=this.lineWidth,M=Math.abs(J*this.ctx.transform.scaleX),H=this.lineJoin;if(this.autoPaging){for(var te,ve,Q=JSON.parse(JSON.stringify(this.path)),Ke=JSON.parse(JSON.stringify(this.path)),ae=[],ee=0;ee<Ke.length;ee++)if(Ke[ee].x!==void 0)for(var Fe=x.call(this,Ke[ee]),ce=0;ce<Fe.length;ce+=1)ae.indexOf(Fe[ce])===-1&&ae.push(Fe[ce]);for(var be=0;be<ae.length;be++)for(;this.pdf.internal.getNumberOfPages()<ae[be];)v.call(this);b(ae);for(var Ve=ae[0],We=ae[ae.length-1],pt=Ve;pt<We+1;pt++){this.pdf.setPage(pt),this.fillStyle=q,this.strokeStyle=U,this.lineCap=W,this.lineWidth=M,this.lineJoin=H;var wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=pt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],jt=pt===1?0:St+(pt-2)*Rt;if(this.ctx.clip_path.length!==0){var Ue=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(te,this.posX+this.margin[3],-jt+Ct+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=Ue}if(ve=JSON.parse(JSON.stringify(Q)),this.path=y(ve,this.posX+this.margin[3],-jt+Ct+this.ctx.prevPageLastElemOffset),K===!1||pt===0){var Be=(pt>Ve||pt<We)&&p.call(this);Be&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Rt,null).clip().discardPath()),j.call(this,O,K),Be&&this.pdf.restoreGraphicsState()}this.lineWidth=J}this.path=Q}else this.lineWidth=M,j.call(this,O,K),this.lineWidth=J},j=function(O,K){if((O!=="stroke"||K||!m.call(this))&&(O==="stroke"||K||!h.call(this))){for(var q,U,W=[],J=this.path,M=0;M<J.length;M++){var H=J[M];switch(H.type){case"begin":W.push({begin:!0});break;case"close":W.push({close:!0});break;case"mt":W.push({start:H,deltas:[],abs:[]});break;case"lt":var te=W.length;if(J[M-1]&&!isNaN(J[M-1].x)&&(q=[H.x-J[M-1].x,H.y-J[M-1].y],te>0)){for(;te>=0;te--)if(W[te-1].close!==!0&&W[te-1].begin!==!0){W[te-1].deltas.push(q),W[te-1].abs.push(H);break}}break;case"bct":q=[H.x1-J[M-1].x,H.y1-J[M-1].y,H.x2-J[M-1].x,H.y2-J[M-1].y,H.x-J[M-1].x,H.y-J[M-1].y],W[W.length-1].deltas.push(q);break;case"qct":var ve=J[M-1].x+2/3*(H.x1-J[M-1].x),Q=J[M-1].y+2/3*(H.y1-J[M-1].y),Ke=H.x+2/3*(H.x1-H.x),ae=H.y+2/3*(H.y1-H.y),ee=H.x,Fe=H.y;q=[ve-J[M-1].x,Q-J[M-1].y,Ke-J[M-1].x,ae-J[M-1].y,ee-J[M-1].x,Fe-J[M-1].y],W[W.length-1].deltas.push(q);break;case"arc":W.push({deltas:[],abs:[],arc:!0}),Array.isArray(W[W.length-1].abs)&&W[W.length-1].abs.push(H)}}U=K?null:O==="stroke"?"stroke":"fill";for(var ce=!1,be=0;be<W.length;be++)if(W[be].arc)for(var Ve=W[be].abs,We=0;We<Ve.length;We++){var pt=Ve[We];pt.type==="arc"?S.call(this,pt.x,pt.y,pt.radius,pt.startAngle,pt.endAngle,pt.counterclockwise,void 0,K,!ce):D.call(this,pt.x,pt.y),ce=!0}else if(W[be].close===!0)this.pdf.internal.out("h"),ce=!1;else if(W[be].begin!==!0){var wt=W[be].start.x,Ct=W[be].start.y;X.call(this,W[be].deltas,wt,Ct),ce=!0}U&&E.call(this,U),K&&F.call(this)}},I=function(O){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-q;case"top":return O+K-q;case"hanging":return O+K-2*q;case"middle":return O+K/2-q;default:return O}},_=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(K,q){this.colorStops.push([K,q])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(O,K,q,U,W,J,M,H,te){for(var ve=Ae.call(this,q,U,W,J),Q=0;Q<ve.length;Q++){var Ke=ve[Q];Q===0&&(te?k.call(this,Ke.x1+O,Ke.y1+K):D.call(this,Ke.x1+O,Ke.y1+K)),he.call(this,O,K,Ke.x2,Ke.y2,Ke.x3,Ke.y3,Ke.x4,Ke.y4)}H?F.call(this):E.call(this,M)},E=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(O,K){this.pdf.internal.out(r(O)+" "+n(K)+" m")},B=function(O){var K;switch(O.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var q,U,W,J=this.pdf.getTextDimensions(O.text),M=I.call(this,O.y),H=_.call(this,M)-J.h,te=this.ctx.transform.applyToPoint(new o(O.x,M));if(this.autoPaging){var ve=this.ctx.transform.decompose(),Q=new c;Q=(Q=(Q=Q.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Ke=this.ctx.transform.applyToRectangle(new l(O.x,M,J.w,J.h)),ae=Q.applyToRectangle(new l(O.x,H,J.w,J.h)),ee=x.call(this,ae),Fe=[],ce=0;ce<ee.length;ce+=1)Fe.indexOf(ee[ce])===-1&&Fe.push(ee[ce]);b(Fe);for(var be=Fe[0],Ve=Fe[Fe.length-1],We=be;We<Ve+1;We++){this.pdf.setPage(We);var pt=We===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[2],St=Ct-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],jt=Rt-this.margin[3],Ue=We===1?0:wt+(We-2)*St;if(this.ctx.clip_path.length!==0){var Be=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(q,this.posX+this.margin[3],-1*Ue+pt),j.call(this,"fill",!0),this.path=Be}var ye=y([JSON.parse(JSON.stringify(ae))],this.posX+this.margin[3],-Ue+pt+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),W=this.lineWidth,this.lineWidth=W*O.scale);var oe=this.autoPaging!=="text";if(oe||ye.y+ye.h<=Ct){if(oe||ye.y>=pt&&ye.x<=Rt){var Z=oe?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Rt-ye.x)[0],Ne=y([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-Ue+pt+this.ctx.prevPageLastElemOffset)[0],Re=oe&&(We>be||We<Ve)&&p.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jt,St,null).clip().discardPath()),this.pdf.text(Z,Ne.x,Ne.y,{angle:O.angle,align:K,renderingMode:O.renderingMode}),Re&&this.pdf.restoreGraphicsState()}}else ye.y<Ct&&(this.ctx.prevPageLastElemOffset+=Ct-ye.y);O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=W)}}else O.scale>=.01&&(U=this.pdf.internal.getFontSize(),this.pdf.setFontSize(U*O.scale),W=this.lineWidth,this.lineWidth=W*O.scale),this.pdf.text(O.text,te.x+this.posX,te.y+this.posY,{angle:O.angle,align:K,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(U),this.lineWidth=W)},D=function(O,K,q,U){q=q||0,U=U||0,this.pdf.internal.out(r(O+q)+" "+n(K+U)+" l")},X=function(O,K,q){return this.pdf.lines(O,K,q,null,null)},he=function(O,K,q,U,W,J,M,H){this.pdf.internal.out([e(a(q+O)),e(s(U+K)),e(a(W+O)),e(s(J+K)),e(a(M+O)),e(s(H+K)),"c"].join(" "))},Ae=function(O,K,q,U){for(var W=2*Math.PI,J=Math.PI/2;K>q;)K-=W;var M=Math.abs(q-K);M<W&&U&&(M=W-M);for(var H=[],te=U?-1:1,ve=K;M>1e-5;){var Q=ve+te*Math.min(M,J);H.push(fe.call(this,O,ve,Q)),M-=Math.abs(Q-ve),ve=Q}return H},fe=function(O,K,q){var U=(q-K)/2,W=O*Math.cos(U),J=O*Math.sin(U),M=W,H=-J,te=M*M+H*H,ve=te+M*W+H*J,Q=4/3*(Math.sqrt(2*te*ve)-ve)/(M*J-H*W),Ke=M-Q*H,ae=H+Q*M,ee=Ke,Fe=-ae,ce=U+K,be=Math.cos(ce),Ve=Math.sin(ce);return{x1:O*Math.cos(K),y1:O*Math.sin(K),x2:Ke*be-ae*Ve,y2:Ke*Ve+ae*be,x3:ee*be-Fe*Ve,y3:ee*Ve+Fe*be,x4:O*Math.cos(q),y4:O*Math.sin(q)}},me=function(O){return 180*O/Math.PI},ne=function(O,K,q,U,W,J){var M=O+.5*(q-O),H=K+.5*(U-K),te=W+.5*(q-W),ve=J+.5*(U-J),Q=Math.min(O,W,M,te),Ke=Math.max(O,W,M,te),ae=Math.min(K,J,H,ve),ee=Math.max(K,J,H,ve);return new l(Q,ae,Ke-Q,ee-ae)},Pe=function(O,K,q,U,W,J,M,H){var te,ve,Q,Ke,ae,ee,Fe,ce,be,Ve,We,pt,wt,Ct,St=q-O,Rt=U-K,jt=W-q,Ue=J-U,Be=M-W,ye=H-J;for(ve=0;ve<41;ve++)be=(Fe=(Q=O+(te=ve/40)*St)+te*((ae=q+te*jt)-Q))+te*(ae+te*(W+te*Be-ae)-Fe),Ve=(ce=(Ke=K+te*Rt)+te*((ee=U+te*Ue)-Ke))+te*(ee+te*(J+te*ye-ee)-ce),ve==0?(We=be,pt=Ve,wt=be,Ct=Ve):(We=Math.min(We,be),pt=Math.min(pt,Ve),wt=Math.max(wt,be),Ct=Math.max(Ct,Ve));return new l(Math.round(We),Math.round(pt),Math.round(wt-We),Math.round(Ct-pt))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,K,q=(O=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:K}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(qr.API),function(t){var e=function(o){var l,c,u,d,f,A,h,m,p,x;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(f=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(A=(f=((f=((f=((f=(f-(x=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)%85,c.push(A+33,h+33,m+33,p+33,x+33)):c.push(122);return function(v,y){for(var b=y;b>0;b--)v.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,f,A=String,h="length",m=255,p="charCodeAt",x="slice",v="replace";for(o[x](-2),o=o[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),u=[],d=0,f=(o+=l="uuuuu"[x](o[h]%5||5))[h];f>d;d+=5)c=52200625*(o[p](d)-33)+614125*(o[p](d+1)-33)+7225*(o[p](d+2)-33)+85*(o[p](d+3)-33)+(o[p](d+4)-33),u.push(m&c>>24,m&c>>16,m&c>>8,m&c);return function(y,b){for(var w=b;w>0;w--)y.pop()}(u,l[h]),A.fromCharCode.apply(A,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=_k(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(qr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var f=new XMLHttpRequest,A=0,h=function(m){var p=m.length,x=[],v=String.fromCharCode;for(A=0;A<p;A+=1)x.push(v(255&m.charCodeAt(A)));return x.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(h(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return h(f.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(qr.API),function(t){function e(){return(jn.html2canvas?Promise.resolve(jn.html2canvas):tA(()=>Promise.resolve().then(()=>S6),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(jn.DOMPurify?Promise.resolve(jn.DOMPurify):tA(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Ka(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),f=c.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||d.appendChild(l(f,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var h=0;h<d.length;++h){var m=d[h],p=m.src.find(function(x){return x.format==="truetype"});p&&u.addFont(p.url,m.ref.name,m.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,u.context2d.save(!0),c(this.prop.container,A)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||qr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,f){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(A){return u.updateProgress(null,d),A}).then(d,f).then(function(A){return u.updateProgress(1),A})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),A=u.call(f,l,c);return o.convert(A,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,qr.getPageSize=function(l,c,u){if(Ka(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var f,A=(""+u).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+c}var m,p=0,x=0;if(h.hasOwnProperty(A))p=h[A][1]/f,x=h[A][0]/f;else try{p=u[1],x=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",x>p&&(m=x,x=p,p=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",p>x&&(m=x,x=p,p=m)}return{width:x,height:p,unit:c,k:f,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(a5):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(qr.API),qr.API.addJS=function(t){return xV=t,this.internal.events.subscribe("postPutResources",function(){PC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(PC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){PC!==void 0&&gV!==void 0&&this.internal.out("/Names <</JavaScript "+PC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var A=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(qr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(f){for(var A,h=256*f.charCodeAt(4)+f.charCodeAt(5),m=f.length,p={width:0,height:0,numcomponents:1},x=4;x<m;x+=2){if(x+=h,e.indexOf(f.charCodeAt(x+1))!==-1){A=256*f.charCodeAt(x+5)+f.charCodeAt(x+6),p={width:256*f.charCodeAt(x+7)+f.charCodeAt(x+8),height:A,numcomponents:f.charCodeAt(x+9)};break}h=256*f.charCodeAt(x+2)+f.charCodeAt(x+3)}return p}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(qr.API),qr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=xje(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(S){for(var E=S.width,F=S.height,k=S.data,B=S.palette,D=S.depth,X=!1,he=[],Ae=[],fe=void 0,me=!1,ne=0,Pe=0;Pe<B.length;Pe++){var Te=wQ(B[Pe],4),O=Te[0],K=Te[1],q=Te[2],U=Te[3];he.push(O,K,q),U!=null&&(U===0?(ne++,Ae.length<1&&Ae.push(Pe)):U<255&&(me=!0))}if(me||ne>1){X=!0,Ae=void 0;var W=E*F;fe=new Uint8Array(W);for(var J=new DataView(k.buffer),M=0;M<W;M++){var H=i5(J,M,D),te=wQ(B[H],4)[3];fe[M]=te}}else ne===0&&(Ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:k,alphaBytes:fe,needSMask:X,palette:he,mask:Ae}}(s):c===2||c===4?function(S){for(var E=S.data,F=S.width,k=S.height,B=S.channels,D=S.depth,X=B===2?"DeviceGray":"DeviceRGB",he=B-1,Ae=F*k,fe=he,me=Ae*fe,ne=1*Ae,Pe=Math.ceil(me*D/8),Te=Math.ceil(ne*D/8),O=new Uint8Array(Pe),K=new Uint8Array(Te),q=new DataView(E.buffer),U=new DataView(O.buffer),W=new DataView(K.buffer),J=!1,M=0;M<Ae;M++){for(var H=M*B,te=0;te<fe;te++)SV(U,i5(q,H+te,D),M*fe+te,D);var ve=i5(q,H+fe,D);ve<(1<<D)-1&&(J=!0),SV(W,ve,1*M,D)}return{colorSpace:X,colorsPerPixel:he,sMaskBitsPerComponent:J?D:void 0,colorBytes:O,alphaBytes:K,needSMask:J}}(s):function(S){var E=S.data,F=S.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:F,colorsPerPixel:F==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(k){for(var B=k.length,D=new Uint8Array(2*B),X=new DataView(D.buffer,D.byteOffset,D.byteLength),he=0;he<B;he++)X.setUint16(2*he,k[he],!1);return D}(E):E,needSMask:!1}}(s);var f,A,h,m=a,p=m.colorSpace,x=m.colorsPerPixel,v=m.sMaskBitsPerComponent,y=m.colorBytes,b=m.alphaBytes,w=m.needSMask,j=m.palette,I=m.mask,_=null;return n!==qr.API.image_compression.NONE&&typeof _k=="function"?(_=function(S){var E;switch(S){case qr.API.image_compression.FAST:E=11;break;case qr.API.image_compression.MEDIUM:E=13;break;case qr.API.image_compression.SLOW:E=14;break;default:E=12}return E}(n),f=this.decode.FLATE_DECODE,A="/Predictor ".concat(_," /Colors ").concat(x," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=wV(y,Math.ceil(o*x*d/8),x,d,n),w&&(h=wV(b,Math.ceil(o*v/8),1,v,n))):(f=void 0,A=void 0,t=y,w&&(h=b)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:t,index:e,filter:f,decodeParameters:A,transparency:I,palette:j,sMask:h,predictor:_,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:v,colorSpace:p}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new Uje(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new o5(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(qr.API),Qd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qd.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){is.log("bit decode error:"+r)}},Qd.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Qd.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Qd.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Qd.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},Qd.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Qd.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Qd.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Qd.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Qd(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new o5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(qr.API),jV.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new jV(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new o5(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(qr.API),qr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],A=n[u+2],h=n[u+3];s[l++]=d,s[l++]=f,s[l++]=A,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},qr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ix=qr.API,BC=ix.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=e.doKerning!==!1,A=0,h=t.length,m=0,p=l[0]||c,x=[];for(r=0;r<h;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(A=f&&Ka(u[n])==="object"&&!isNaN(parseInt(u[n][m],10))?u[n][m]/d:0,x.push((l[n]||p)/c+A)),m=n;return x},vV=ix.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return ix.processArabic&&(t=ix.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:BC.apply(this,arguments).reduce(function(s,o){return s+o},0)},yV=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},bV=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],f=[d],A=r.textIndent||0,h=0,m=0,p=t.split(" "),x=BC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?p[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),y=[];p.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(j,I){return(I&&j.length?`
`:"")+j})):y.push(w[0])}),p=y,c=vV.apply(this,[v,r])}for(s=0,o=p.length;s<o;s++){var b=0;if(n=p[s],c&&n[0]==`
`&&(n=n.substr(1),b=1),A+h+(m=(a=BC.apply(this,[n,r])).reduce(function(w,j){return w+j},0))>e||b){if(m>e){for(l=yV.apply(this,[n,a,e-(A+h),e]),d.push(l.shift()),d=[l.pop()];l.length;)f.push([l.shift()]);m=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(w,j){return w+j},0)}else d=[n];f.push(d),A=m+c,h=x}else d.push(n),A+=h+m,h=x}return u=c?function(w,j){return(j?v:"")+w.join(" ")}:function(w){return w.join(" ")},f.map(u)},ix.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle),A="Unicode";return f.metadata[A]?{widths:f.metadata[A].widths||{0:1},kerning:f.metadata[A].kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(bV.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(A){return"0x"+parseInt(A,10).toString(16)},l=t.__fontmetrics__.compress=function(A){var h,m,p,x,v=["{"];for(var y in A){if(h=A[y],isNaN(parseInt(y,10))?m="'"+y+"'":(y=parseInt(y,10),m=(m=o(y).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof h=="number")h<0?(p=o(h).slice(3),x="-"):(p=o(h).slice(2),x=""),p=x+p.slice(0,-1)+a[p.slice(-1)];else{if(Ka(h)!=="object")throw new Error("Don't know what to do with value type "+Ka(h)+".");p=l(h)}v.push(m+p)}return v.push("}"),v.join("")},c=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,m,p,x,v={},y=1,b=v,w=[],j="",I="",_=A.length-1,S=1;S<_;S+=1)(x=A[S])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(w.push([b,p]),b={},p=void 0):x=="}"?((m=w.pop())[0][m[1]]=b,p=void 0,b=m[0]):x=="-"?y=-1:p===void 0?n.hasOwnProperty(x)?(j+=n[x],p=parseInt(j,16)*y,y=1,j=""):j+=x:n.hasOwnProperty(x)?(I+=n[x],b[p]=parseInt(I,16)*y,y=1,p=void 0,I=""):I+=x;return v},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var h=A.font,m=f.Unicode[h.postScriptName];m&&(h.metadata.Unicode={},h.metadata.Unicode.widths=m.widths,h.metadata.Unicode.kerning=m.kerning);var p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(qr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(oE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(qr),qr.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw is.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw is.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return(jn.canvg?Promise.resolve(jn.canvg):tA(()=>import("./index.es-5DkTcpl5.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(d)}).then(function(){f.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},qr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},qr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,f=0;function A(m,p){var x,v=!1;for(x=0;x<m.length;x+=1)m[x]===p&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var h=l.length;for(f=0;f<h;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Ka(t)==="object"){for(a in t)if(s=t[a],A(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&A(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,p=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?p.push("/"+m+" /"+r[m].value):p.push("/"+m+" "+r[m].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(qr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,A=s.length;f<A;++f){if(l=o.metadata.characterToGlyph(s.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,f,A;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,A=(l=Object.keys(s).sort(function(h,m){return h-m})).length;f<A;f++)o=l[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,A=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<A.length;m++)h+=String.fromCharCode(A[m]);var p=u();d({data:h,addLength1:!0,objectId:p}),c("endobj");var x=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Ix(l.fontName)),c("/FontFile2 "+p+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Ix(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+t.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Ix(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,A="",h=0;h<f.length;h++)A+=String.fromCharCode(f[h]);var m=u();d({data:A,addLength1:!0,objectId:m}),c("endobj");var p=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:p}),c("endobj");var x=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Ix(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+Ix(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},A=f.pdfEscape,h=f.activeFontKey,m=f.fonts,p=h,x="",v=0,y="",b=m[p].encoding;if(m[p].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:f};for(y=l,p=h,Array.isArray(l)&&(y=l[0]),v=0;v<y.length;v+=1)m[p].metadata.hasOwnProperty("cmap")&&(o=m[p].metadata.cmap.unicode.codeMap[y[v].charCodeAt(0)]),o||y[v].charCodeAt(0)<256&&m[p].metadata.hasOwnProperty("Unicode")?x+=y[v]:x+="";var w="";return parseInt(p.slice(1))<14||b==="WinAnsiEncoding"?w=A(x,p).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(w=r(x,m[p])),f.isHex=!0,{text:w,x:c,y:u,options:d,mutex:f}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(qr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(qr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,f=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,b=0;this.__bidiEngine__={};var w=function(k){var B=k.charCodeAt(),D=B>>8,X=p[D];return X!==void 0?f[256*X+(255&B)]:D===252||D===253?"AL":v.test(D)?"L":D===8?"R":"N"},j=function(k){for(var B,D=0;D<k.length;D++){if((B=w(k.charAt(D)))==="L")return!1;if(B==="R")return!0}return!1},I=function(k,B,D,X){var he,Ae,fe,me,ne=B[X];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(ne="AN");break;case"AL":y=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":X<1||X+1>=B.length||(he=D[X-1])!=="EN"&&he!=="AN"||(Ae=B[X+1])!=="EN"&&Ae!=="AN"?ne="N":y&&(Ae="AN"),ne=Ae===he?Ae:"N";break;case"ES":ne=(he=X>0?D[X-1]:"B")==="EN"&&X+1<B.length&&B[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&D[X-1]==="EN"){ne="EN";break}if(y){ne="N";break}for(fe=X+1,me=B.length;fe<me&&B[fe]==="ET";)fe++;ne=fe<me&&B[fe]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(me=B.length,fe=X+1;fe<me&&B[fe]==="NSM";)fe++;if(fe<me){var Pe=k[X],Te=Pe>=1425&&Pe<=2303||Pe===64286;if(he=B[fe],Te&&(he==="R"||he==="AL")){ne="R";break}}}ne=X<1||(he=B[X-1])==="B"?"N":D[X-1];break;case"B":y=!1,a=!0,ne=b;break;case"S":s=!0,ne="N"}return ne},_=function(k,B,D){var X=k.split("");return D&&S(X,D,{hiLevel:b}),X.reverse(),B&&B.reverse(),X.join("")},S=function(k,B,D){var X,he,Ae,fe,me,ne=-1,Pe=k.length,Te=0,O=[],K=b?h:A,q=[];for(y=!1,a=!1,s=!1,he=0;he<Pe;he++)q[he]=w(k[he]);for(Ae=0;Ae<Pe;Ae++){if(me=Te,O[Ae]=I(k,q,O,Ae),X=240&(Te=K[me][m[O[Ae]]]),Te&=15,B[Ae]=fe=K[Te][5],X>0)if(X===16){for(he=ne;he<Ae;he++)B[he]=1;ne=-1}else ne=-1;if(K[Te][6])ne===-1&&(ne=Ae);else if(ne>-1){for(he=ne;he<Ae;he++)B[he]=fe;ne=-1}q[Ae]==="B"&&(B[Ae]=0),D.hiLevel|=fe}s&&function(U,W,J){for(var M=0;M<J;M++)if(U[M]==="S"){W[M]=b;for(var H=M-1;H>=0&&U[H]==="WS";H--)W[H]=b}}(q,B,Pe)},E=function(k,B,D,X,he){if(!(he.hiLevel<k)){if(k===1&&b===1&&!a)return B.reverse(),void(D&&D.reverse());for(var Ae,fe,me,ne,Pe=B.length,Te=0;Te<Pe;){if(X[Te]>=k){for(me=Te+1;me<Pe&&X[me]>=k;)me++;for(ne=Te,fe=me-1;ne<fe;ne++,fe--)Ae=B[ne],B[ne]=B[fe],B[fe]=Ae,D&&(Ae=D[ne],D[ne]=D[fe],D[fe]=Ae);Te=me}Te++}}},F=function(k,B,D){var X=k.split(""),he={hiLevel:b};return D||(D=[]),S(X,D,he),function(Ae,fe,me){if(me.hiLevel!==0&&d)for(var ne,Pe=0;Pe<Ae.length;Pe++)fe[Pe]===1&&(ne=x.indexOf(Ae[Pe]))>=0&&(Ae[Pe]=x[ne+1])}(X,D,he),E(2,X,B,D,he),E(1,X,B,D,he),X.join("")};return this.__bidiEngine__.doBidiReorder=function(k,B,D){if(function(he,Ae){if(Ae)for(var fe=0;fe<he.length;fe++)Ae[fe]=fe;l===void 0&&(l=j(he)),u===void 0&&(u=j(he))}(k,B),o||!c||u)if(o&&c&&l^u)b=l?1:0,k=_(k,B,D);else if(!o&&c&&u)b=l?1:0,k=F(k,B,D),k=_(k,B);else if(!o||l||c||u){if(o&&!c&&l^u)k=_(k,B),l?(b=0,k=F(k,B,D)):(b=1,k=F(k,B,D),k=_(k,B));else if(o&&l&&!c&&u)b=1,k=F(k,B,D),k=_(k,B);else if(!o&&!c&&l^u){var X=d;l?(b=1,k=F(k,B,D),b=0,d=!1,k=F(k,B,D),d=X):(b=0,k=F(k,B,D),k=_(k,B),b=1,d=!1,k=F(k,B,D),d=X,k=_(k,B))}}else b=0,k=F(k,B,D);else b=l?1:0,k=F(k,B,D);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,d=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(qr),qr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new bm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new tPe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Qje(this.contents),this.head=new Hje(this),this.name=new zje(this),this.cmap=new yre(this),this.toUnicode={},this.hhea=new $je(this),this.maxp=new Wje(this),this.hmtx=new Xje(this),this.post=new Kje(this),this.os2=new Gje(this),this.loca=new ePe(this),this.glyf=new Yje(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Nf,bm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),Qje=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,f,A,h,m,p;for(p in h=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(h)/c),o=Math.floor(f/c),d=16*h-f,(a=new bm).writeInt(this.scalarType),a.writeShort(h),a.writeShort(f),a.writeShort(o),a.writeShort(d),s=16*h,u=a.pos+s,l=null,m=[],r)for(A=r[p],a.writeString(p),a.writeInt(t(A)),a.writeInt(u),a.writeInt(A.length),m=m.concat(A),p==="head"&&(l=u),u+=A.length;u%4;)m.push(0),u++;return a.write(m),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=bre.call(r);r.length%4;)r.push(0);for(s=new bm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),Vje={}.hasOwnProperty,dh=function(t,e){for(var r in e)Vje.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Nf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Hje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new bm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),PV=function(){function t(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),f=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(h=e.readUInt16(),A=h/2,e.pos+=6,s=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),e.pos+=2,p=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),u=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),d=function(){var w,j;for(j=[],c=w=0;0<=A?w<A:w>A;c=0<=A?++w:--w)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,l=function(){var w,j;for(j=[],c=w=0;0<=a?w<a:w>a;c=0<=a?++w:--w)j.push(e.readUInt16());return j}(),c=v=0,b=s.length;v<b;c=++v)for(x=s[c],n=y=m=p[c];m<=x?y<=x:y>=x;n=m<=x?++y:--y)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-m)-(A-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=f}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E,F,k,B,D,X,he,Ae,fe,me,ne,Pe,Te,O,K,q,U,W,J,M,H,te,ve,Q;switch(X=new bm,o=Object.keys(e).sort(function(Ke,ae){return Ke-ae}),r){case"macroman":for(p=0,x=function(){var Ke=[];for(m=0;m<256;++m)Ke.push(0);return Ke}(),y={0:0},s={},he=0,ne=o.length;he<ne;he++)y[H=e[a=o[he]]]==null&&(y[H]=++p),s[a]={old:e[a],new:y[e[a]]},x[a]=y[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(x),{charMap:s,subtable:X.data,maxGlyphID:p+1};case"unicode":for(B=[],f=[],b=0,y={},n={},v=u=null,Ae=0,Pe=o.length;Ae<Pe;Ae++)y[j=e[a=o[Ae]]]==null&&(y[j]=++b),n[a]={old:j,new:y[j]},l=y[j]-a,v!=null&&l===u||(v&&f.push(v),B.push(a),u=l),v=a;for(v&&f.push(v),f.push(65535),B.push(65535),F=2*(E=B.length),S=2*Math.pow(Math.log(E)/Math.LN2,2),A=Math.log(S/2)/Math.LN2,_=2*E-S,c=[],I=[],h=[],m=fe=0,Te=B.length;fe<Te;m=++fe){if(k=B[m],d=f[m],k===65535){c.push(0),I.push(0);break}if(k-(D=n[k].new)>=32768)for(c.push(0),I.push(2*(h.length+E-m)),a=me=k;k<=d?me<=d:me>=d;a=k<=d?++me:--me)h.push(n[a].new);else c.push(D-k),I.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*E+2*h.length),X.writeUInt16(0),X.writeUInt16(F),X.writeUInt16(S),X.writeUInt16(A),X.writeUInt16(_),J=0,O=f.length;J<O;J++)a=f[J],X.writeUInt16(a);for(X.writeUInt16(0),M=0,K=B.length;M<K;M++)a=B[M],X.writeUInt16(a);for(te=0,q=c.length;te<q;te++)l=c[te],X.writeUInt16(l);for(ve=0,U=I.length;ve<U;ve++)w=I[ve],X.writeUInt16(w);for(Q=0,W=h.length;Q<W;Q++)p=h[Q],X.writeUInt16(p);return{charMap:n,subtable:X.data,maxGlyphID:b+1}}},t}(),yre=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new PV(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=PV.encode(e,r),(a=new bm).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),$je=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Gje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Kje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),qje=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,f,A;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,f=n.length;d<f;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new qje(u,a),c[A=a.nameID]==null&&(c[A]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),Wje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),Xje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,f,A;for(A=[],u=0,d=(f=this.metrics).length;u<d;u++)s=f[u],A.push(s.advance);return A}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),bre=[].slice,Yje=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,f;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new bm(r.read(a))).readShort(),u=l.readShort(),f=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new Zje(l,u,f,c,d):new Jje(l,o,u,f,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),Jje=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Zje=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new bm(bre.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),ePe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return dh(t,Nf),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),tPe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,f,A,h,m,p,x,v;for(a in n=yre.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),h={0:0},v=n.charMap)h[(c=v[a]).old]=c.new;for(m in A=n.maxGlyphID,o)m in h||(h[m]=A++);return d=function(y){var b,w;for(b in w={},y)w[y[b]]=b;return w}(h),f=Object.keys(d).sort(function(y,b){return y-b}),p=function(){var y,b,w;for(w=[],y=0,b=f.length;y<b;y++)l=f[y],w.push(d[l]);return w}(),s=this.font.glyf.encode(o,p,h),u=this.font.loca.encode(s.offsets,p),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},t}();qr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();const kk=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Tje,AcroFormAppearance:Zr,AcroFormButton:mo,AcroFormCheckBox:Cb,AcroFormChoiceField:Bp,AcroFormComboBox:kp,AcroFormEditBox:wb,AcroFormListBox:Tp,AcroFormPasswordField:_b,AcroFormPushButton:Nb,AcroFormRadioButton:Fp,AcroFormTextField:om,GState:C2,ShadingPattern:F0,TilingPattern:yp,default:qr,jsPDF:qr},Symbol.toStringTag,{value:"Module"}));async function BV(t){const e={...t,remaining:t.quantity,status:"PENDIENTE",createdAt:xr.now()};return $n(yt(ke,"inventory_batches"),e)}async function wre(t,e){await _n(Jt(ke,"inventory_batches",t),{status:"PAGADO",paidAmount:null,paidAt:xr.now()})}async function rPe(t,e){const r=ar(yt(ke,"batch_allocations"),mr("saleDate",">=",t),mr("saleDate","<=",e)),n=await Qt(r),a={};return n.forEach(s=>{const o=s.data(),l=o.batchId;a[l]||(a[l]={batchId:o.batchId,batchDate:o.batchDate,productName:o.productName,quantity:0,amountCharged:0}),a[l].quantity+=Number(o.quantity||0),a[l].amountCharged+=Number(o.amountCharged||0)}),Object.values(a)}async function Nre(t){const e=Jt(ke,"salesV2",t),r=await si(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)){for(const l of n.items)if(Array.isArray(l==null?void 0:l.allocations))for(const c of l.allocations){const u=String((c==null?void 0:c.batchId)||"").trim(),d=Number((c==null?void 0:c.qty)||0);u&&d&&a.push({batchId:u,qty:d})}}if(Array.isArray(n.allocations))for(const l of n.allocations){const c=String((l==null?void 0:l.batchId)||"").trim(),u=Number((l==null?void 0:l.qty)||0);c&&u&&a.push({batchId:c,qty:u})}if(a.length===0)return await Mi(ke,async l=>{l.delete(e)}),{restored:0};const s=new Map;for(const l of a)s.set(l.batchId,Number((s.get(l.batchId)||0)+l.qty));let o=0;return await Mi(ke,async l=>{const c=Array.from(s.entries()),u=c.map(([f])=>Jt(ke,"inventory_batches",f)),d=await Promise.all(u.map(f=>l.get(f)));c.forEach(([f,A],h)=>{const m=d[h];if(!m.exists())return;const p=m.data(),x=Number((p==null?void 0:p.remaining)??0),v=Number((x+Number(A||0)).toFixed(3));l.update(u[h],{remaining:v}),o+=Number(A||0)}),l.delete(e)}),{restored:o}}var Cre={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TV=$o.createContext&&$o.createContext(Cre),nPe=["attr","size","title"];function aPe(t,e){if(t==null)return{};var r=sPe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_S.apply(this,arguments)}function kV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ES(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(r),!0).forEach(function(n){iPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iPe(t,e,r){return e=oPe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oPe(t){var e=lPe(t,"string");return typeof e=="symbol"?e:e+""}function lPe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _re(t){return t&&t.map((e,r)=>$o.createElement(e.tag,ES({key:r},e.attr),_re(e.child)))}function cPe(t){return e=>$o.createElement(uPe,_S({attr:ES({},t.attr)},e),_re(t.child))}function uPe(t){var e=r=>{var{attr:n,size:a,title:s}=t,o=aPe(t,nPe),l=a||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),$o.createElement("svg",_S({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:ES(ES({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&$o.createElement("title",null,s),t.children)};return TV!==void 0?$o.createElement(TV.Consumer,null,r=>e(r)):e(Cre)}function dPe(t){return cPe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function _c({onClick:t,loading:e,className:r=""}){return i.jsxs("button",{onClick:t,disabled:e,className:`flex items-center gap-2 px-3 py-1.5 rounded-2xl  border 
        bg-white hover:bg-gray-100 text-sm font-medium shadow-2xl
        disabled:opacity-50 disabled:cursor-not-allowed ${r}`,title:"Refrescar datos",children:[i.jsx(dPe,{className:`w-4 h-4 ${e?"animate-spin text-blue-500":""}`}),e?"Actualizando...":"Refrescar"]})}function Ec(){const[t,e]=g.useState(0),r=g.useCallback(()=>e(n=>n+1),[]);return{refreshKey:t,refresh:r}}const ol=t=>Math.round((Number(t)||0)*100)/100,Ch=t=>Math.round((Number(t)||0)*1e3)/1e3,$u=t=>Number(t??0).toFixed(2),_h=t=>Number(t??0).toFixed(3),FV=(t,e)=>{var o;const r=t.date?String(t.date):"",n=(o=t.timestamp)!=null&&o.toDate?Br(t.timestamp.toDate(),"yyyy-MM-dd"):"";let a=r||n;if(r&&n){const l=new Date(r+"T00:00:00").getTime(),c=new Date(n+"T00:00:00").getTime(),u=Math.abs(l-c)/(1e3*60*60*24);isFinite(u)&&u>30&&(a=n)}if(!a)return[];const s=t.type??"CONTADO";return Array.isArray(t.items)&&t.items.length>0?t.items.map((l,c)=>{const u=Number((l==null?void 0:l.qty)??0),d=Number((l==null?void 0:l.lineFinal)??0)||Math.max(0,Number((l==null?void 0:l.unitPrice)||0)*u-Number((l==null?void 0:l.discount)||0));return{id:`${e}#${c}`,productName:String((l==null?void 0:l.productName)??"(sin nombre)"),quantity:u,amount:ol(d),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String((l==null?void 0:l.measurement)??t.measurement??""),allocations:Array.isArray(l==null?void 0:l.allocations)?l.allocations:t.allocations,avgUnitCost:Number((l==null?void 0:l.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((l==null?void 0:l.cogsAmount)??0)}}):[{id:e,productName:t.productName??"(sin nombre)",quantity:Number(t.quantity??0),amount:Number(t.amount??t.amountCharged??0),amountSuggested:Number(t.amountSuggested??0),date:a,userEmail:t.userEmail??t.vendor??"(sin usuario)",clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",type:s,measurement:String(t.measurement??""),allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount}]};function fPe({role:t,roles:e}){const[r,n]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState(null),[c,u]=g.useState(!0),[d,f]=g.useState(""),[A,h]=g.useState("ALL"),[m,p]=g.useState("ALL"),[x,v]=g.useState({}),[y,b]=g.useState(null),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(""),[F,k]=g.useState(0),[B,D]=g.useState("0"),X=Br(new Date,"yyyy-MM-dd"),[he,Ae]=g.useState(X),[fe,me]=g.useState(X),[ne,Pe]=g.useState(!1),[Te,O]=g.useState(!1),[K,q]=g.useState(!1),[U,W]=g.useState(""),J=g.useRef(null),{refreshKey:M,refresh:H}=Ec(),te=e&&e.length?e:t,ve=Mye(te,"bills","cerrarVentas"),Q=xn(te,"admin"),Ke=({title:we,open:Le,onToggle:gt,right:Ut})=>i.jsxs("button",{type:"button",onClick:gt,className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-xl border bg-gray-50 hover:bg-gray-100 active:bg-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[i.jsx("span",{className:"font-semibold truncate",children:we}),Ut?i.jsx("span",{className:"text-xs text-gray-600",children:Ut}):null]}),i.jsx("div",{className:"shrink-0 text-lg font-bold leading-none",children:Le?"":"+"})]});g.useEffect(()=>{if(!he||!fe)return;u(!0);const we=ar(yt(ke,"salesV2"),mr("date",">=",he),mr("date","<=",fe)),Le=vd(we,gt=>{const Ut=[];gt.forEach(Mt=>{const Yt=FV(Mt.data(),Mt.id);Ut.push(...Yt)}),n(Ut),u(!1)},gt=>{console.error("Error cargando ventas por periodo:",gt),n([]),u(!1)});return()=>Le()},[he,fe,M]),g.useEffect(()=>{if(!he||!fe)return;const we=ar(yt(ke,"salesV2"),mr("status","==","FLOTANTE"),mr("date",">=",he),mr("date","<=",fe)),Le=vd(we,gt=>{const Ut=[];gt.forEach(Mt=>{const Yt=FV(Mt.data(),Mt.id);Ut.push(...Yt)}),s(Ut)});return()=>Le()},[he,fe,M]),g.useEffect(()=>{(async()=>{try{const we=await Qt(yt(ke,"users")),Le={};we.forEach(gt=>{const Ut=gt.data(),Mt=String(Ut.email||"").trim().toLowerCase(),Yt=String(Ut.name||"").trim();Mt&&(Le[Mt]=Yt||Ut.email||"")}),v(Le)}catch(we){console.error("Error cargando usuarios:",we),v({})}})()},[]);const ae=we=>{const Le=String(we||"").trim().toLowerCase();return x[Le]||we||""};g.useEffect(()=>{(async()=>{const Le=ar(yt(ke,"daily_closures"),mr("date","==",X)),gt=await Qt(Le);if(gt.empty)l(null);else{const Ut=gt.docs[0];l({id:Ut.id,...Ut.data()})}})()},[X,M]);const ee=$o.useMemo(()=>{let we=[];if(A==="FLOTANTE"){const gt=[...r,...a],Ut=new Map;for(const Mt of gt)Mt.status==="FLOTANTE"&&Ut.set(Mt.id,Mt);we=Array.from(Ut.values())}else if(A==="ALL"){const gt=[...r,...a],Ut=new Map;for(const Mt of gt)Ut.set(Mt.id,Mt);we=Array.from(Ut.values())}else we=r.filter(gt=>gt.status==="PROCESADA");m!=="ALL"&&(we=we.filter(gt=>gt.type===m));const Le=U.trim().toLowerCase();if(Le){const gt=Mt=>String(Mt||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),Ut=gt(Le);we=we.filter(Mt=>gt(Mt.productName).includes(Ut))}return we},[A,r,a,U,m]),Fe=ol(ee.reduce((we,Le)=>we+(Le.amount||0),0)),ce=ol(ee.reduce((we,Le)=>we+Number(Le.cogsAmount??0),0)),be=we=>String(we||"").trim().toLowerCase()!=="lb",Ve=ee.filter(we=>we.type==="CONTADO"),We=ee.filter(we=>we.type==="CREDITO"),pt=Ch(Ve.filter(we=>be(we.measurement)).reduce((we,Le)=>we+(Le.quantity||0),0)),wt=Ch(Ve.filter(we=>!be(we.measurement)).reduce((we,Le)=>we+(Le.quantity||0),0)),Ct=Ch(We.filter(we=>be(we.measurement)).reduce((we,Le)=>we+(Le.quantity||0),0)),St=Ch(We.filter(we=>!be(we.measurement)).reduce((we,Le)=>we+(Le.quantity||0),0)),Rt=ol(Ve.reduce((we,Le)=>we+(Le.amount||0),0)),jt=ol(We.reduce((we,Le)=>we+(Le.amount||0),0)),Ue=ol(Ve.reduce((we,Le)=>we+Number(Le.cogsAmount??0),0)),Be=ol(We.reduce((we,Le)=>we+Number(Le.cogsAmount??0),0)),ye=ol(Rt-Ue),oe=ol(jt-Be),Z=Ch(pt+Ct),Ne=Ch(wt+St),Re=ol(Rt+jt),ge={};ee.forEach(we=>{const Le=we.productName||"(sin nombre)";ge[Le]||(ge[Le]={totalQuantity:0,totalAmount:0}),ge[Le].totalQuantity=Ch(ge[Le].totalQuantity+(we.quantity||0)),ge[Le].totalAmount=ol(ge[Le].totalAmount+(we.amount||0))});const Xe=Object.entries(ge).map(([we,Le])=>({productName:we,totalQuantity:Le.totalQuantity,totalAmount:Le.totalAmount})),vt=async()=>{try{const we=ee.filter(_e=>_e.status==="FLOTANTE"),Le=we.length>0?we:r.filter(_e=>_e.status!=="PROCESADA");if(Le.length===0){f("No hay ventas para procesar.");return}const gt={totalCharged:ol(Le.reduce((_e,xe)=>_e+(xe.amount||0),0)),totalSuggested:ol(Le.reduce((_e,xe)=>_e+(xe.amountSuggested||0),0)),totalUnits:Ch(Le.reduce((_e,xe)=>_e+(xe.quantity||0),0)),totalCOGS:ol(Le.reduce((_e,xe)=>_e+Number(xe.cogsAmount??0),0))},Ut=ol(gt.totalCharged-gt.totalSuggested),Mt=ol(gt.totalCharged-gt.totalCOGS),Yt=await $n(yt(ke,"daily_closures"),{date:X,createdAt:xr.now(),periodStart:he,periodEnd:fe,totalCharged:gt.totalCharged,totalSuggested:gt.totalSuggested,totalDifference:Ut,totalUnits:gt.totalUnits,totalCOGS:gt.totalCOGS,grossProfit:Mt,products:Le.map(_e=>({productName:_e.productName,quantity:_e.quantity,amount:_e.amount})),salesV2:Le.map(_e=>({id:_e.id,productName:_e.productName,quantity:_e.quantity,amount:_e.amount,amountSuggested:_e.amountSuggested,userEmail:_e.userEmail,clientName:_e.clientName,amountReceived:_e.amountReceived,change:_e.change,status:_e.status,cogsAmount:_e.cogsAmount??0,avgUnitCost:_e.avgUnitCost??null,allocations:_e.allocations??[],date:_e.date})),productSummary:Object.entries(Le.reduce((_e,xe)=>{const ie=xe.productName||"(sin nombre)";return _e[ie]||(_e[ie]={totalQuantity:0,totalAmount:0}),_e[ie].totalQuantity=Ch(_e[ie].totalQuantity+(xe.quantity||0)),_e[ie].totalAmount=ol(_e[ie].totalAmount+(xe.amount||0)),_e},{})).map(([_e,xe])=>({productName:_e,totalQuantity:xe.totalQuantity,totalAmount:xe.totalAmount}))}),st=cf(ke);Le.forEach(_e=>{st.update(Jt(ke,"salesV2",_e.id.split("#")[0]),{status:"PROCESADA",closureId:Yt.id,closureDate:X,date:_e.date})}),await st.commit(),f(` Cierre guardado. Ventas procesadas: ${Le.length}.`)}catch(we){console.error(we),f(" Error al guardar el cierre.")}},it=async we=>{if(!Q){f(" No tienes permisos para revertir esta venta.");return}if(window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await _n(Jt(ke,"salesV2",we.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null}),f(" Venta revertida a FLOTANTE.")}catch(Le){console.error(Le),f(" No se pudo revertir la venta.")}},de=we=>{if(!Q){f(" No tienes permisos para editar esta venta.");return}b(we),j(we.quantity),_(we.amount),E(we.clientName),k(we.amountReceived),D(we.change)},Ce=async()=>{if(!Q){f(" No tienes permisos para guardar cambios.");return}if(y)try{await _n(Jt(ke,"salesV2",y.id.split("#")[0]),{quantity:w,amount:I,amountCharged:I,clientName:S,amountReceived:F,change:B}),b(null),f(" Venta actualizada.")}catch(we){console.error(we),f(" No se pudo actualizar la venta.")}},Ye=async we=>{if(!Q){f(" No tienes permisos para eliminar esta venta.");return}if(window.confirm("Eliminar esta venta? Se restaurar el stock en los lotes asignados."))try{const{restored:Le}=await Nre(we.split("#")[0]);f(` Venta eliminada. Stock restaurado: ${Number(Le).toFixed(2)}.`)}catch(Le){console.error(Le),f(" No se pudo eliminar la venta.")}},ft=async()=>{if(J.current){J.current.classList.add("force-pdf-colors"),J.current.classList.add("pdf-print-mode");try{const Le=(await jg(J.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),gt=new qr;gt.addImage(Le,"PNG",10,10,190,0),gt.save(`cierre_${X}.pdf`)}finally{J.current.classList.remove("pdf-print-mode"),J.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold",children:["Cierre de Ventas - ",he,"  ",fe]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(_c,{onClick:H})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(Ke,{title:"Filtros",open:ne,onToggle:()=>Pe(we=>!we),right:i.jsxs("span",{className:"ml-1",children:[he,"  ",fe,A!=="ALL"?`  ${A}`:"",m!=="ALL"?`  ${m==="CREDITO"?"Crdito":"Cash"}`:"",U.trim()?`  "${U.trim()}"`:""]})}),ne&&i.jsx("div",{className:"mt-3 border rounded-xl p-3 bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Periodo desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:he,onChange:we=>Ae(we.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-2 w-full",value:fe,onChange:we=>me(we.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:A,onChange:we=>h(we.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Tipo Operacin"}),i.jsxs("select",{className:"border rounded px-2 py-2 w-full",value:m,onChange:we=>p(we.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:"CREDITO",children:"Crdito"}),i.jsx("option",{value:"CONTADO",children:"Cash"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsx("input",{type:"text",className:"border rounded px-2 py-2 w-full",placeholder:"Buscar por producto...",value:U,onChange:we=>W(we.target.value)})]})]})})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:J,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras - Unidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[ee.map(we=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${we.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})}),i.jsx("td",{className:"border p-1",children:we.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:we.productName}),i.jsx("td",{className:"border p-1",children:_h(we.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",$u(we.amount)]}),i.jsx("td",{className:"border p-1",children:we.date}),i.jsx("td",{className:"border p-1",children:ae(we.userEmail)}),i.jsx("td",{className:"border p-1",children:we.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>de(we),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Ye(we.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):we.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:Q?i.jsx("button",{onClick:()=>it(we.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},we.id)),ee.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden mb-4",children:[i.jsx(Ke,{title:"Ventas",open:Te,onToggle:()=>O(we=>!we),right:i.jsxs("span",{className:"ml-1",children:[ee.length,"  C$",$u(Fe)]})}),Te&&i.jsxs("div",{className:"mt-3 space-y-3",children:[ee.map(we=>i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:we.productName}),i.jsx("div",{className:"text-xs text-gray-500",children:we.date})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",$u(we.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${we.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:we.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cantidad"}),i.jsx("strong",{children:_h(we.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("strong",{children:we.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:ae(we.userEmail)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("strong",{className:"text-right break-all",children:we.clientName||""})]}),i.jsx("div",{className:"pt-2",children:we.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:Q?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>de(we),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>Ye(we.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):we.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:Q?i.jsx("button",{onClick:()=>it(we.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},we.id)),ee.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Total libras Cash: ",i.jsx("strong",{children:_h(wt)})]}),i.jsxs("div",{children:["Total Unidades cash: ",i.jsx("strong",{children:_h(pt)})]}),i.jsxs("div",{children:["Total libras credito: ",i.jsx("strong",{children:_h(St)})]}),i.jsxs("div",{children:["Total Unidades credito: ",i.jsx("strong",{children:_h(Ct)})]}),i.jsxs("div",{children:["Total facturado Cash: ",i.jsxs("strong",{children:["C$",$u(Ue)]})]}),i.jsxs("div",{children:["Total facturado credito:"," ",i.jsxs("strong",{children:["C$",$u(Be)]})]}),i.jsxs("div",{children:["Total venta Cash: ",i.jsxs("strong",{children:["C$",$u(Rt)]})]}),i.jsxs("div",{children:["Total venta Credito: ",i.jsxs("strong",{children:["C$",$u(jt)]})]}),i.jsxs("div",{children:["Utilidad bruta Cash: ",i.jsxs("strong",{children:["C$",$u(ye)]})]}),i.jsxs("div",{children:["Utilidad bruta credito:"," ",i.jsxs("strong",{children:["C$",$u(oe)]})]}),i.jsxs("div",{children:["Total libras cash y credito: ",i.jsx("strong",{children:_h(Ne)})]}),i.jsxs("div",{children:["Total unidades cash y credito:"," ",i.jsx("strong",{children:_h(Z)})]}),i.jsxs("div",{children:["Total ventas Cash y credito:"," ",i.jsxs("strong",{children:["C$",$u(Re)]})]}),i.jsxs("div",{children:["Total facturado a precio compra:"," ",i.jsxs("strong",{children:["C$",$u(ce)]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(Ke,{title:"Consolidado por producto",open:K,onToggle:()=>q(we=>!we),right:i.jsx("span",{className:"ml-1",children:Xe.length})}),K&&i.jsx("div",{className:"mt-3",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsxs("tbody",{children:[Xe.map(we=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:we.productName}),i.jsx("td",{className:"border p-1",children:_h(we.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",$u(we.totalAmount)]})]},we.productName)),Xe.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{disabled:!ve,onClick:vt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del da"}),i.jsx("button",{onClick:ft,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[y.productName,"  ",ae(y.userEmail)]}),i.jsx("label",{className:"text-sm",children:"Cantidad"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:w,onChange:we=>j(parseFloat(we.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:I,onChange:we=>_(parseFloat(we.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:S,onChange:we=>E(we.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:F,onChange:we=>k(parseFloat(we.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:B,onChange:we=>D(we.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>b(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:Ce,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const Gu=t=>Number(t??0).toFixed(2),ox=t=>Number(t??0).toFixed(3);function hPe(){var y,b,w,j;const t=async I=>{if(!window.confirm(`Eliminar el cierre del ${I.date}?`))return;const _=window.confirm("Tambin quieres reabrir (revertir a FLOTANTE) las ventas vinculadas a este cierre?");try{if(_){const S=await Qt(ar(yt(ke,"salesV2"),mr("closureId","==",I.id)));if(!S.empty){const E=cf(ke);S.forEach(F=>{E.update(Jt(ke,"salesV2",F.id),{status:"FLOTANTE",closureId:null,closureDate:null})}),await E.commit()}}await Mn(Jt(ke,"daily_closures",I.id)),(u==null?void 0:u.id)===I.id&&d(null),await m(),A(` Cierre eliminado${_?" y ventas reabiertas.":"."}`)}catch(S){console.error(S),A(" No se pudo eliminar el cierre.")}},[e,r]=g.useState(Br(See(new Date),"yyyy-MM-dd")),[n,a]=g.useState(Br(new Date,"yyyy-MM-dd")),[s,o]=g.useState(!0),[l,c]=g.useState([]),[u,d]=g.useState(null),[f,A]=g.useState(""),h=g.useRef(null),m=async()=>{try{o(!0);const I=ar(yt(ke,"daily_closures"),mr("date",">=",e),mr("date","<=",n)),_=await Qt(I),S=[];_.forEach(E=>S.push({id:E.id,...E.data()})),S.sort((E,F)=>E.date<F.date?1:E.date>F.date?-1:0),c(S)}catch(I){console.error(I),A(" Error cargando el historial.")}finally{o(!1)}};g.useEffect(()=>{m()},[]);const p=async I=>{I.preventDefault(),m()},x=g.useMemo(()=>{if(!u)return{units:0,sug:0,chg:0,diff:0,cogs:0,profit:0};const I=Number(u.totalUnits??0),_=Number(u.totalSuggested??0),S=Number(u.totalCharged??0),E=Number(u.totalDifference??(isFinite(S-_)?S-_:0)),F=Number(u.totalCOGS??0),k=Number(u.grossProfit??(isFinite(S-F)?S-F:0));return{units:I,sug:_,chg:S,diff:E,cogs:F,profit:k}},[u]),v=async()=>{if(!h.current||!u)return;const I=h.current;I.classList.add("force-pdf-colors");try{const[{default:_},{jsPDF:S}]=await Promise.all([tA(()=>Promise.resolve().then(()=>S6),void 0),tA(()=>Promise.resolve().then(()=>kk),void 0)]),F=(await _(I,{backgroundColor:"#ffffff",onclone:D=>{const X=D.defaultView;D.body.querySelectorAll("*").forEach(Ae=>{const fe=X.getComputedStyle(Ae);fe.color&&(Ae.style.color=fe.color),fe.backgroundColor&&fe.backgroundColor!=="rgba(0, 0, 0, 0)"&&(Ae.style.backgroundColor=fe.backgroundColor),fe.borderColor&&(Ae.style.borderColor=fe.borderColor)})}})).toDataURL("image/png"),{jsPDF:k}=await tA(async()=>{const{jsPDF:D}=await Promise.resolve().then(()=>kk);return{jsPDF:D}},void 0),B=new k;B.addImage(F,"PNG",10,10,190,0),B.save(`cierre_${u.date}.pdf`)}finally{I.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Histrico de cierres"}),i.jsxs("form",{onSubmit:p,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:e,onChange:I=>r(I.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:I=>a(I.target.value)})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),s?i.jsx("p",{children:"Cargando..."}):l.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6  shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Monto de venta"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Ganancia sin gastos"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsx("tbody",{children:l.map(I=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.date}),i.jsx("td",{className:"border p-1",children:ox(I.totalUnits)}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.totalCharged)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.totalCOGS)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.grossProfit??Number(I.totalCharged??0)-Number(I.totalCOGS??0))]}),i.jsx("td",{className:"border p-1",children:i.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>d(I),children:"Ver detalle"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>t(I),children:"Eliminar"})]})})]},I.id))})]}),u&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",u.date]}),i.jsx("button",{onClick:()=>d(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:v,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:h,className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:i.jsxs("div",{children:["Total Libras/Unidades: ",i.jsx("strong",{children:ox(x.units)})]})}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[i.jsxs("div",{children:["Monto al costo:"," ",i.jsxs("strong",{children:["C$",Gu(x.cogs)]})]}),i.jsxs("div",{children:["Ganancia sin gastos:"," ",i.jsxs("strong",{children:["C$",Gu(x.profit)]})]})]}),(y=u.salesV2)!=null&&y.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto de ventas"}),i.jsx("th",{className:"border p-2",children:"Monto al costo"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Vendedor"})]})}),i.jsx("tbody",{children:u.salesV2.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:ox(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.cogsAmount)]}),i.jsx("td",{className:"border p-1",children:I.date??""}),i.jsx("td",{className:"border p-1",children:I.userEmail??""})]},_))})]})]}):(b=u.sales)!=null&&b.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Paga con"}),i.jsx("th",{className:"border p-2",children:"Vuelto"})]})}),i.jsx("tbody",{children:u.sales.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName??"(sin nombre)"}),i.jsx("td",{className:"border p-1",children:ox(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.amount)]}),i.jsx("td",{className:"border p-1",children:I.userEmail??""}),i.jsx("td",{className:"border p-1",children:I.clientName??""}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.amountReceived)]}),i.jsx("td",{className:"border p-1",children:typeof I.change=="number"?Gu(I.change):I.change??"0"})]},_))})]})]}):(w=u.products)!=null&&w.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Productos en el cierre"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Cantidad"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:u.products.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:ox(I.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.amount)]})]},_))})]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"Sin detalle de ventas en este cierre."}),(j=u.productSummary)!=null&&j.length?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total libras/unidades"}),i.jsx("th",{className:"border p-2",children:"Total dinero"})]})}),i.jsx("tbody",{children:u.productSummary.map((I,_)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:I.productName}),i.jsx("td",{className:"border p-1",children:ox(I.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",Gu(I.totalAmount)]})]},_))})]})]}):null]})]}),f&&i.jsx("p",{className:"mt-3 text-sm",children:f})]})}function APe(){const[t,e]=g.useState(""),[r,n]=g.useState(""),[a,s]=g.useState(""),[o,l]=g.useState(!1),[c,u]=g.useState(["vendedor_pollo"]),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState([]),[x,v]=g.useState(!0),[y,b]=g.useState(null),[w,j]=g.useState(["vendedor_pollo"]),[I,_]=g.useState(""),[S,E]=g.useState(""),[F,k]=g.useState(!1),[B,D]=g.useState([]),X=U=>!U||U==="vendedor"?"vendedor_pollo":U==="admin"||U==="supervisor_pollo"||U==="contador"||U==="vendedor_pollo"||U==="vendedor_ropa"||U==="vendedor_dulces"?U:"vendedor_pollo",he=U=>U?Array.isArray(U)?U.map(W=>X(String(W))):[X(String(U))]:["vendedor_pollo"],Ae=async()=>{v(!0);const U=await Qt(yt(ke,"users")),W=[];U.forEach(J=>{const M=J.data();W.push({id:J.id,email:M.email??"",name:M.name??"",roles:he(M.roles??M.role),sellerCandyId:M.sellerCandyId??""})}),p(W),v(!1)},fe=async()=>{try{const U=await Qt(yt(ke,"sellers_candies")),W=[];U.forEach(J=>{const M=J.data();W.push({id:J.id,name:M.name??"(sin nombre)",branchLabel:M.branch??"",commissionPercent:Number(M.commissionPercent??0)})}),D(W)}catch(U){console.error("Error cargando sellers_candies:",U)}};g.useEffect(()=>{Ae(),fe()},[]);const me=()=>{e(""),n(""),s(""),u(["vendedor_pollo"]),h("")},ne=async U=>{if(U.preventDefault(),f(""),y){if(a&&a.length>0&&a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}}else if(a.length<6){f(" La contrasea debe tener al menos 6 caracteres.");return}if(!t.trim()){f(" El nombre es obligatorio.");return}try{if(y){const Q=Jt(ke,"users",y),Ke=w.length?w:["vendedor_pollo"],ae=Ke.includes("vendedor_dulces")&&(I||A)||"";if(await _n(Q,{email:r,name:t.trim(),roles:Ke,role:Ke[0]||"vendedor_pollo",sellerCandyId:ae}),p(ee=>ee.map(Fe=>Fe.id===y?{...Fe,email:r,name:t.trim(),roles:Ke,sellerCandyId:ae}:Fe)),a&&a.length>=6)try{const ee=PT(),Fe=S||r;await tge(ee,Fe),f(` Usuario actualizado. Se envi correo de restablecimiento a ${Fe}`)}catch(ee){console.error("Error sending password reset:",ee),f(" Usuario actualizado. No se pudo enviar correo de restablecimiento.")}else f(" Usuario actualizado correctamente.");Te();return}const W=AD(),J=hD(W.options,"Secondary"),M=PT(J),H=await rge(M,r,a),te=c.length?c:["vendedor_pollo"],ve=te.includes("vendedor_dulces")&&A||"";await lee(Jt(yt(ke,"users"),H.user.uid),{email:r,name:t.trim(),roles:te,role:te[0]||"vendedor_pollo",sellerCandyId:ve}),await wD(M),await zme(J),p(Q=>[{id:H.user.uid,email:r,name:t.trim(),roles:te,sellerCandyId:ve},...Q]),f(" Usuario creado correctamente."),me(),k(!1)}catch(W){console.error(W),f(" Error al crear el usuario: "+W.message)}},Pe=U=>{b(U.id),e(U.name||""),n(U.email||""),E(U.email||""),j(U.roles&&U.roles.length?U.roles:["vendedor_pollo"]),h(U.sellerCandyId||""),_(U.sellerCandyId||""),s(""),k(!0)},Te=()=>{b(null),j(["vendedor_pollo"]),_(""),E(""),me(),k(!1)},O=async U=>{confirm("Eliminar este usuario del listado?")&&(await Mn(Jt(ke,"users",U)),p(J=>J.filter(M=>M.id!==U)))},K=U=>{const W=U==="admin"?"admin":U==="supervisor_pollo"?"supervisor_pollo":U==="vendedor_ropa"?"vendedor_ropa":U==="vendedor_dulces"?"vendedor_dulces":"vendedor_pollo",J=W==="admin"?"bg-blue-100 text-blue-700":W==="supervisor_pollo"?"bg-amber-100 text-amber-700":W==="vendedor_ropa"?"bg-indigo-100 text-indigo-700":W==="vendedor_dulces"?"bg-pink-100 text-pink-700":"bg-green-100 text-green-700";return i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${J}`,children:W})},q=U=>`${U.name}  ${U.branchLabel||"Sin sucursal"}  ${U.commissionPercent.toFixed(2)}%`;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Usuarios"}),i.jsx("button",{className:"px-3 py-2 rounded bg-purple-600 text-white hover:bg-purple-700",onClick:()=>k(!0),type:"button",children:"Crear usuario"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Email"}),i.jsx("th",{className:"p-2 border",children:"Rol"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:x?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center",children:"Sin usuarios"})}):m.map(U=>{const W=y===U.id,J=(W?w:U.roles).includes("vendedor_dulces");return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U.name||""}),i.jsx("td",{className:"p-2 border",children:U.email}),i.jsx("td",{className:"p-2 border",children:W?i.jsxs("div",{className:"space-y-2 text-left",children:[["supervisor_pollo","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(M=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:w.includes(M),onChange:()=>j(H=>H.includes(M)?H.filter(te=>te!==M):[...H,M])}),i.jsx("span",{className:"text-sm",children:M})]},M)),w.includes("vendedor_dulces")&&i.jsxs("select",{className:"w-full border p-1 rounded text-xs mt-1",value:I,onChange:M=>_(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces"}),B.map(M=>i.jsx("option",{value:M.id,children:q(M)},M.id))]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex gap-2 justify-center",children:U.roles.map(M=>i.jsx("span",{children:K(M)},M))}),J&&U.sellerCandyId&&i.jsx("div",{className:"mt-1 text-[11px] text-gray-500",children:"Vendedor asignado"})]})}),i.jsx("td",{className:"p-2 border space-x-2",children:i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Pe(U),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(U.id),children:"Eliminar"})]})})]},U.id)})})]})}),d&&i.jsx("p",{className:"text-sm mt-2",children:d}),F&&i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-lg max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:y?"Editar usuario":"Registrar nuevo usuario"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre completo"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:t,onChange:U=>e(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Correo electrnico"}),i.jsx("input",{type:"email",className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400",value:r,onChange:U=>n(U.target.value),required:!0})]}),i.jsxs("div",{className:"space-y-1 relative",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea (mnimo 6 caracteres)"}),i.jsx("input",{type:o?"text":"password",minLength:6,className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-purple-400 pr-10",value:a,onChange:U=>s(U.target.value),required:!y}),i.jsx("button",{type:"button",className:"absolute right-2 top-8 text-sm text-gray-600 hover:text-gray-800",onClick:()=>l(U=>!U),children:o?"":""})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Roles"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["supervisor_pollo","contador","admin","vendedor_pollo","vendedor_ropa","vendedor_dulces"].map(U=>i.jsxs("label",{className:"inline-flex items-center mr-3",children:[i.jsx("input",{type:"checkbox",className:"mr-2",checked:y?w.includes(U):c.includes(U),onChange:()=>{y?j(W=>W.includes(U)?W.filter(J=>J!==U):[...W,U]):u(W=>W.includes(U)?W.filter(J=>J!==U):[...W,U])}}),i.jsx("span",{className:"text-sm",children:U})]},U))})]}),(y?w.includes("vendedor_dulces"):c.includes("vendedor_dulces"))&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Vendedor (dulces)"}),i.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:A,onChange:U=>h(U.target.value),children:[i.jsx("option",{value:"",children:"Selecciona vendedor de dulces asignado"}),B.map(U=>i.jsx("option",{value:U.id,children:q(U)},U.id))]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Te,children:"Cancelar"}),i.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:y?"Guardar cambios":"Crear usuario"})]})]}),d&&i.jsx("p",{className:"text-sm mt-2",children:d})]})]})]})}const OV=t=>`C$${(Number(t)||0).toFixed(2)}`;function mPe(){const[t,e]=g.useState(""),[r,n]=g.useState(0),[a,s]=g.useState(0),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState([]),[m,p]=g.useState(!0),[x,v]=g.useState(!1),[y,b]=g.useState(null),[w,j]=g.useState(""),[I,_]=g.useState(""),[S,E]=g.useState(""),[F,k]=g.useState(0),[B,D]=g.useState(0),[X,he]=g.useState(!1),Ae=async()=>{p(!0);const q=await Qt(yt(ke,"products")),U=[];q.forEach(W=>{const J=W.data();U.push({id:W.id,name:J.name??"",price:Number(J.price??0),providerPrice:Number(J.providerPrice??0),category:J.category??"",measurement:J.measurement??"",active:J.active!==!1})}),h(U),p(!1)};g.useEffect(()=>{Ae()},[]);const fe=async q=>{if(q.preventDefault(),l(""),!t||r<=0||!d){l(" Completa nombre, precio vlido y unidad de medida");return}try{const U={name:t,price:parseFloat(r.toFixed(2)),providerPrice:parseFloat((a||0).toFixed(2)),category:c,measurement:d,active:!0},W=await $n(yt(ke,"products"),U);h(J=>[{id:W.id,...U},...J]),l(" Producto registrado con exito."),e(""),n(0),s(0),f(""),u(""),he(!1)}catch(U){l(" Error: "+U.message)}},me=q=>{b(q.id),j(q.name),_(q.category),E(q.measurement),k(q.price),D(q.providerPrice||0)},ne=()=>{b(null),j(""),_(""),E(""),k(0)},Pe=async()=>{if(!y)return;const q=Jt(ke,"products",y);await _n(q,{name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}),h(U=>U.map(W=>W.id===y?{...W,name:w,category:I,measurement:S,price:parseFloat((F||0).toFixed(2)),providerPrice:parseFloat((B||0).toFixed(2))}:W)),ne()},Te=async q=>{const U=Jt(ke,"products",q.id),W=q.active===!1;await _n(U,{active:W}),h(J=>J.map(M=>M.id===q.id?{...M,active:W}:M))},O=async q=>{const U=ar(yt(ke,"inventory_batches"),mr("productId","==",q),lS(1));if(!(await Qt(U)).empty){alert(`No se puede eliminar: hay lotes asociados a este producto.
Sugerencia: desactvalo para ocultarlo.`);return}confirm("Eliminar este producto definitivamente?")&&(await Mn(Jt(ke,"products",q)),h(M=>M.filter(H=>H.id!==q)))},K=x?A:A.filter(q=>q.active!==!1);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{l(""),he(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]}),X&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>he(!1)}),i.jsxs("div",{className:"relative z-10 w-[95%] max-w-lg bg-white rounded-lg shadow-2xl border p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"text-lg font-bold text-green-700 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block bg-green-100 text-green-700 rounded-full p-2",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Registrar producto"]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>he(!1),children:"Cerrar"})]}),i.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Categora"}),i.jsxs("select",{value:c,onChange:q=>u(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nombre del producto"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded",value:t,onChange:q=>e(q.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de unidad de medida"}),i.jsxs("select",{value:d,onChange:q=>f(q.target.value),className:"w-full border border-gray-300 p-2 rounded focus:ring-2 focus:ring-green-400",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio proveedor (ej: 40.00)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(a)?"":a,onChange:q=>s(parseFloat(q.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Precio por unidad (ej: 55.50)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded",value:Number.isNaN(r)?"":r,onChange:q=>n(parseFloat(q.target.value)),onFocus:q=>q.target.value==="0"?n(NaN):null})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",children:"Agregar producto"}),o&&i.jsx("p",{className:"text-sm mt-2",children:o})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between mt-6 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold p-2",children:"Productos"}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:x,onChange:q=>v(q.target.checked)}),"Mostrar inactivos"]})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):K.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin productos"})}):K.map(q=>{const U=y===q.id,W=q.active!==!1;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{className:"w-full border p-1 rounded",value:w,onChange:J=>j(J.target.value)}):q.name}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:I,onChange:J=>_(J.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"pollo",children:"Pollo"}),i.jsx("option",{value:"cerdo",children:"Cerdo"}),i.jsx("option",{value:"huevo",children:"Huevos"}),i.jsx("option",{value:"ropa",children:"Ropa"}),i.jsx("option",{value:"otros",children:"Otros"})]}):q.category}),i.jsx("td",{className:"p-2 border",children:U?i.jsxs("select",{className:"w-full border p-1 rounded",value:S,onChange:J=>E(J.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"lb",children:"Libra"}),i.jsx("option",{value:"kg",children:"Kilogramo"}),i.jsx("option",{value:"unidad",children:"Unidad"})]}):q.measurement}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(B)?"":B,onChange:J=>D(parseFloat(J.target.value))}):OV(q.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:U?i.jsx("input",{type:"number",step:"0.01",className:"w-full border p-1 rounded text-right",value:Number.isNaN(F)?"":F,onChange:J=>k(parseFloat(J.target.value))}):OV(q.price)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${W?"bg-green-100 text-green-700":"bg-gray-200 text-gray-700"}`,children:W?"Activo":"Inactivo"})}),i.jsx("td",{className:"p-2 border space-x-2",children:U?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Pe,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:ne,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>me(q),children:"Editar"}),i.jsx("button",{className:`px-2 py-1 rounded ${W?"bg-gray-600 hover:bg-gray-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,onClick:()=>Te(q),children:W?"Desactivar":"Activar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>O(q.id),children:"Eliminar"})]})})]},q.id)})})]})})]})}const ll=[];for(let t=0;t<256;++t)ll.push((t+256).toString(16).slice(1));function pPe(t,e=0){return(ll[t[e+0]]+ll[t[e+1]]+ll[t[e+2]]+ll[t[e+3]]+"-"+ll[t[e+4]]+ll[t[e+5]]+"-"+ll[t[e+6]]+ll[t[e+7]]+"-"+ll[t[e+8]]+ll[t[e+9]]+"-"+ll[t[e+10]]+ll[t[e+11]]+ll[t[e+12]]+ll[t[e+13]]+ll[t[e+14]]+ll[t[e+15]]).toLowerCase()}let l5;const gPe=new Uint8Array(16);function xPe(){if(!l5){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");l5=crypto.getRandomValues.bind(crypto)}return l5(gPe)}const vPe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DV={randomUUID:vPe};function yPe(t,e,r){var a;if(DV.randomUUID&&!t)return DV.randomUUID();t=t||{};const n=t.random??((a=t.rng)==null?void 0:a.call(t))??xPe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,pPe(n)}async function bPe(t,e,r,n=!1){if(r<=0)return{allocations:[],avgUnitCost:0,cogsAmount:0};const a=yt(t,"inventory_batches"),s=ar(a,mr("productName","==",e)),c=(await Qt(s)).docs.map(u=>({id:u.id,data:u.data()})).sort((u,d)=>{var p,x;const f=u.data.date??"",A=d.data.date??"";if(f!==A)return f<A?-1:1;const h=((p=u.data.createdAt)==null?void 0:p.seconds)??0,m=((x=d.data.createdAt)==null?void 0:x.seconds)??0;return h-m}).map(u=>Jt(t,"inventory_batches",u.id));return Mi(t,async u=>{let d=Number(r);const f=[],A=await Promise.all(c.map(x=>u.get(x)));for(let x=0;x<c.length&&d>0;x++){const v=c[x],y=A[x];if(!y.exists())continue;const b=y.data(),w=Number(b.quantity??0),j=Number(b.remaining??w??0),I=Number(b.purchasePrice??0);if(j<=0)continue;const _=Math.min(j,d),S=Number((j-_).toFixed(3));u.update(v,{remaining:S}),f.push({batchId:v.id,qty:_,unitCost:I,lineCost:Number((_*I).toFixed(2))}),d=Number((d-_).toFixed(3))}if(d>0&&!n)throw new Error(`Stock insuficiente para "${e}". Faltan ${d} unidades.`);const h=Number(f.reduce((x,v)=>x+v.lineCost,0).toFixed(2)),m=f.reduce((x,v)=>x+v.qty,0),p=m>0?Number((h/m).toFixed(4)):0;return{allocations:f,avgUnitCost:p,cogsAmount:h}})}const Ere=3,wPe=.5*10**-Ere;function os(t){const e=Number(t??0);return Number(e.toFixed(Ere))}function c5(t,e){return os((t??0)+(e??0))}function TC(t,e){return os(t)+wPe>=os(e)}async function NPe(t,e){const r=await Qt(yt(ke,"inventory_batches")),n=t.trim().toLowerCase();let a=0;for(const s of r.docs){const o=s.data();(o.productName||"").trim().toLowerCase()===n&&o.productId!==e&&(await _n(Jt(ke,"inventory_batches",s.id),{productId:e}),a++)}return a}const c0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RV({user:t,role:e,roles:r}){r&&r.length;const[n,a]=g.useState([]),[s,o]=g.useState([]),[l,c]=g.useState(""),[u,d]=g.useState(Br(new Date,"yyyy-MM-dd")),[f,A]=g.useState(""),[h,m]=g.useState(""),[p,x]=g.useState([]),[v,y]=g.useState(0),[b,w]=g.useState(0),[j,I]=g.useState("0"),[_,S]=g.useState(""),[E,F]=g.useState(!1),[k,B]=g.useState({}),D=Ue=>Math.round(Ue*100)/100,X=Ue=>os(Ue).toFixed(3),[he,Ae]=g.useState("CONTADO"),[fe,me]=g.useState([]),[ne,Pe]=g.useState(""),[Te,O]=g.useState(0),K=Ue=>{Ae(Ue),Ue==="CREDITO"?(A(""),w(0),I("0.00")):(Pe(""),O(0))},q=Ue=>{const Be=Number(Ue.specialPrice||0);return Be>0?Be:Number(Ue.price||0)},U=async Ue=>{if(!Ue)return 0;const Be=ar(yt(ke,"inventory_batches"),mr("productId","==",Ue)),ye=await Qt(Be);let oe=0;return ye.forEach(Z=>{const Ne=Z.data();oe=c5(oe,Number(Ne.remaining||0))}),os(oe)},W=async Ue=>{if(!Ue)return 0;const Be=await Qt(yt(ke,"inventory_batches"));let ye=0;return Be.forEach(oe=>{const Z=oe.data();(Z.productName||"").trim().toLowerCase()===Ue.trim().toLowerCase()&&(ye=c5(ye,Number(Z.remaining||0)))}),os(ye)};g.useEffect(()=>{(async()=>{const Ue=await Qt(yt(ke,"products")),Be=[];Ue.forEach(ye=>{const oe=ye.data();(oe==null?void 0:oe.active)!==!1&&Be.push({id:ye.id,productName:oe.name??oe.productName??"(sin nombre)",price:Number(oe.price??0),measurement:oe.measurement??"(sin unidad)",category:oe.category??"(sin categora)"})}),a(Be)})()},[]),g.useEffect(()=>{(async()=>{const Ue=await Qt(yt(ke,"inventory_batches")),Be={};Ue.forEach(ye=>{const oe=ye.data(),Z=oe.productId,Ne=Number(oe.remaining||0);Z&&(Be[Z]=c5(Be[Z]||0,Ne))}),Object.keys(Be).forEach(ye=>Be[ye]=os(Be[ye])),B(Be)})()},[]),g.useEffect(()=>{(async()=>{const Ue=await Qt(yt(ke,"users")),Be=[];Ue.forEach(ye=>{const oe=ye.data();Be.push({id:ye.id,email:oe.email??"(sin email)",role:oe.role??"USER"})}),o(Be)})()},[]);const J=async()=>{if(!l)return;const Ue=n.find(ye=>ye.id===l);if(!Ue)return;if(p.some(ye=>ye.productId===Ue.id)){c("");return}const Be=await U(Ue.id);x(ye=>[...ye,{productId:Ue.id,productName:Ue.productName,measurement:Ue.measurement,price:Number(Ue.price||0),specialPrice:0,stock:Be,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},M=async Ue=>{if(!Ue)return;const Be=n.find(oe=>oe.id===Ue);if(!Be||p.some(oe=>oe.productId===Be.id))return;const ye=await U(Be.id);x(oe=>[...oe,{productId:Be.id,productName:Be.productName,measurement:Be.measurement,price:Number(Be.price||0),specialPrice:0,stock:ye,qty:0,qtyInput:"",specialPriceInput:"",discount:0,discountInput:""}]),c("")},H=Ue=>{x(Be=>Be.filter(ye=>ye.productId!==Ue))},te=Ue=>{const Be=String(Ue||"").replace(",",".");if(Be==="")return"";const ye=Be.split(".");return ye.length===1?Be:`${ye[0]}.${ye.slice(1).join("")}`},ve=async(Ue,Be)=>{x(ye=>ye.map(oe=>{if(oe.productId!==Ue)return oe;const Z=(oe.measurement||"").toLowerCase()!=="lb",Ne=te(Be);if(Ne.trim()==="")return{...oe,qty:0,qtyInput:""};if(!Z&&Ne===".")return{...oe,qty:0,qtyInput:"0."};const Re=Number(Ne),ge=Number.isFinite(Re)?Re:0;let Xe=Z?Math.max(0,Math.round(ge)):os(ge);const vt=Z?Math.max(0,Math.floor(Number(oe.stock||0))):os(Number(oe.stock||0));if(Xe>vt){Xe=vt,S(` Cantidad limitada a existencias (${vt})`);const de=Z?String(Xe):Xe===0?"":String(Xe);return{...oe,qty:Xe,qtyInput:de}}const it=Z?String(Xe):Ne.endsWith(".")?Ne:String(Xe);return{...oe,qty:Xe,qtyInput:it}}))},Q=(Ue,Be)=>{x(ye=>ye.map(oe=>{if(oe.productId!==Ue)return oe;const Z=te(Be);if(Z.trim()==="")return{...oe,specialPrice:0,specialPriceInput:""};if(Z===".")return{...oe,specialPrice:0,specialPriceInput:"0."};const Ne=Number(Z),Re=Number.isFinite(Ne)?Math.max(0,D(Ne)):0,ge=Z.endsWith(".")?Z:String(Re);return{...oe,specialPrice:Re,specialPriceInput:ge}}))},Ke=(Ue,Be)=>{x(ye=>ye.map(oe=>{if(oe.productId!==Ue)return oe;const Z=te(Be);if(Z.trim()==="")return{...oe,discount:0,discountInput:""};if(Z===".")return{...oe,discount:0,discountInput:"0."};const Ne=Number(Z),Re=Number.isFinite(Ne)?Math.max(0,Math.floor(Ne)):0,ge=Z.endsWith(".")?Z:String(Re);return{...oe,discount:Re,discountInput:ge}}))},ae=g.useMemo(()=>{let Ue=0;for(const Be of p){const ye=q(Be),oe=Number(ye||0)*Number(Be.qty||0),Z=Math.max(0,oe-Math.max(0,Number(Be.discount||0)));Ue+=Z}return D(Ue)},[p]);g.useEffect(()=>{y(ae)},[ae]),g.useEffect(()=>{const Ue=Number(b)||0,Be=Number(v)||0;I((Ue-Be).toFixed(2))},[b,v]);const ee=Ue=>{Ue.key===","&&(Ue.preventDefault(),Ue.target.value+=".")},[Fe,ce]=g.useState(!1);g.useEffect(()=>{var ye;const Ue=window.matchMedia("(max-width: 900px)"),Be=()=>ce(Ue.matches);return Be(),(ye=Ue.addEventListener)==null||ye.call(Ue,"change",Be),()=>{var oe;return(oe=Ue.removeEventListener)==null?void 0:oe.call(Ue,"change",Be)}},[]),g.useEffect(()=>{(async()=>{try{const Ue=await Qt(yt(ke,"customers_pollo")),Be=[];Ue.forEach(ye=>{const oe=ye.data();Be.push({id:ye.id,name:oe.name??"",phone:oe.phone??"",status:oe.status??"ACTIVO",creditLimit:Number(oe.creditLimit??0),vendorId:oe.vendorId??"",vendorName:oe.vendorName??"",balance:0})});for(const ye of Be)try{const oe=ar(yt(ke,"ar_movements_pollo"),mr("customerId","==",ye.id)),Z=await Qt(oe);let Ne=0;Z.forEach(ge=>{Ne+=Number(ge.data().amount||0)});const Re=Number(ye.initialDebt||0);ye.balance=Ne+Re}catch{ye.balance=0}Be.sort((ye,oe)=>(ye.name||"").localeCompare(oe.name||"")),me(Be)}catch(Ue){console.error("Error cargando customers_pollo:",Ue),me([])}})()},[]);const be=g.useMemo(()=>fe.find(Ue=>Ue.id===ne)||null,[fe,ne]),Ve=Number((be==null?void 0:be.balance)||0),We=he==="CREDITO"?Math.max(0,Number(Ve||0)+Math.max(0,Number(v||0))):0;g.useEffect(()=>{he==="CREDITO"&&O(Ue=>Math.min(Math.max(0,Number(Ue||0)),We))},[he,We]),g.useEffect(()=>{he==="CREDITO"&&(w(Number(Te||0)),I("0.00"))},[he,Te]);const pt=he==="CREDITO"?Ve+Math.max(0,Number(v||0))-Math.max(0,Number(Te||0)):0,wt=async()=>{if(p.length===0)return"Agrega al menos un producto.";for(const Ue of p){if(!Ue.qty||Ue.qty<=0)return`Cantidad invlida para "${Ue.productName}".`;const Be=await U(Ue.productId);if(!TC(Be,Ue.qty)){const ye=await W(Ue.productName);if(TC(ye,0)&&!TC(Be,0)){const oe=await NPe(Ue.productName,Ue.productId),Z=await U(Ue.productId);if(!TC(Z,Ue.qty))return`Stock insuficiente tras corregir ${oe} lote(s) para "${Ue.productName}".`}else return`Stock insuficiente para "${Ue.productName}". Disponible: ${Be}`}}return null},Ct=async Ue=>{var ye,oe;Ue.preventDefault(),S("");const Be=await wt();if(Be){S(" "+Be);return}try{F(!0);const Z=[];if(he==="CONTADO"){if(!f.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!ne)return"Selecciona un cliente (crdito).";if(Te<0)return"El pago inicial no puede ser negativo.";if(Te>v)return"El pago inicial no puede superar el total.";if((be==null?void 0:be.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede fiar."}for(const de of p){const Ce=de.qty,{allocations:Ye,avgUnitCost:ft,cogsAmount:we}=await bPe(ke,de.productName,Ce,!1),Le=q(de),gt=Number(Le||0)*Number(Ce||0),Ut=Math.max(0,Number(de.discount||0)),Mt=Math.max(0,gt-Ut);Z.push({productId:de.productId,productName:de.productName,measurement:de.measurement,unitPrice:Number(Le||0),regularPrice:Number(de.price||0),specialPrice:Number(de.specialPrice||0)>0?Number(de.specialPrice):null,qty:Ce,discount:Ut,lineTotal:D(gt),lineFinal:D(Mt),allocations:Ye,avgUnitCost:ft,cogsAmount:we})}const Ne=Z.reduce((de,Ce)=>de+Ce.lineFinal,0),Re=Z.reduce((de,Ce)=>de+Number(Ce.qty||0),0),ge=Number(he==="CREDITO"?Te||0:b||0),Xe=he==="CREDITO"?"0.00":j,vt={id:yPe(),quantity:Re,amount:Ne,amountCharged:Ne,timestamp:xr.now(),date:u,userEmail:(t==null?void 0:t.email)??((ye=s[0])==null?void 0:ye.email)??"sin usuario",vendor:e??((oe=s[0])==null?void 0:oe.role)??"sin usuario",status:"FLOTANTE",items:Z,itemsTotal:Ne,type:he,amountReceived:ge,change:Xe,customerId:he==="CREDITO"?ne:"",customerName:he==="CREDITO"?(be==null?void 0:be.name)||"":f.trim(),clientName:he==="CONTADO"?f.trim():""};if(he==="CONTADO"){if(!f.trim()){S(" Ingresa el nombre del cliente (contado).");return}}else{if(!ne){S(" Selecciona un cliente (crdito).");return}if(Te<0){S(" El pago inicial no puede ser negativo.");return}if(Te>v){S(" El pago inicial no puede superar el total.");return}if((be==null?void 0:be.status)==="BLOQUEADO"){S(" El cliente est BLOQUEADO. No se puede fiar.");return}const de=Number((be==null?void 0:be.creditLimit)||0);if(de>0&&pt>de){S(` Supera el lmite de crdito (C$ ${de.toFixed(2)}).`);return}}const it=await $n(yt(ke,"salesV2"),vt);if(he==="CREDITO"&&ne){const de={customerId:ne,date:u,createdAt:xr.now(),ref:{saleId:it.id}};await $n(yt(ke,"ar_movements_pollo"),{...de,type:"CARGO",amount:Number(Ne)||0}),Number(Te)>0&&await $n(yt(ke,"ar_movements_pollo"),{...de,type:"ABONO",amount:-Number(Te)}),me(Ce=>Ce.map(Ye=>Ye.id===ne?{...Ye,balance:Number(Ye.balance||0)+Number(Ne||0)-Number(Te||0)}:Ye))}S(" Venta registrada y asignada a inventario (FIFO)."),x([]),c(""),y(0),w(0),I("0"),A(""),d(Br(new Date,"yyyy-MM-dd")),Pe(""),O(0),Ae("CONTADO")}catch(Z){console.error(Z),S(` ${(Z==null?void 0:Z.message)||"Error al registrar la venta."}`)}finally{F(!1)}},St=g.useMemo(()=>new Set(p.map(Ue=>Ue.productId)),[p]),Rt=g.useMemo(()=>n.filter(Ue=>(k[Ue.id]||0)>0),[n,k]),jt=g.useMemo(()=>{const Ue=String(h||"").trim().toLowerCase();return Ue?Rt.filter(Be=>`${Be.productName||""}`.toLowerCase().includes(Ue)):Rt},[Rt,h]);return Fe?i.jsx("div",{className:"w-full max-w-lg mx-auto p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"font-bold text-lg text-blue-700",children:"Registrar venta (Pollo)"}),i.jsx("input",{type:"date",className:"text-sm text-gray-700 border rounded px-2 py-1",value:u,onChange:Ue=>d(Ue.target.value),"aria-label":"Fecha de la venta"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:he,onChange:Ue=>K(Ue.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),he==="CONTADO"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:f,onChange:Ue=>A(Ue.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:ne,onChange:Ue=>Pe(Ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(Ue=>i.jsxs("option",{value:Ue.status==="ACTIVO"?Ue.id:"",disabled:Ue.status==="BLOQUEADO",children:[Ue.name,"  Saldo: ",c0(Ue.balance||0)]},Ue.id))]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:c0(Ve)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:c0(pt)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-semibold",children:"Pago inicial"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",type:"number",step:"0.01",inputMode:"decimal",max:We,value:Te===0?"":Te,onChange:Ue=>{const Be=Math.max(0,Number(Ue.target.value||0)),ye=Math.min(Be,We);O(ye)},placeholder:"0.00"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",c0(We)]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 mb-2",placeholder:"Buscar producto por nombre...",value:h,onChange:Ue=>m(Ue.target.value)}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("select",{className:"flex-1 border rounded px-1 py-2 text-sm",value:l,onChange:async Ue=>{const Be=Ue.target.value;c(Be),await M(Be)},children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),jt.map(Ue=>i.jsxs("option",{value:Ue.id,disabled:St.has(Ue.id),children:[Ue.productName," | C$ ",Ue.price," | Disp:"," ",X(k[Ue.id]||0)]},Ue.id))]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Items"}),p.length===0?i.jsx("div",{className:"text-gray-500",children:"Agrega productos al carrito."}):i.jsx("div",{className:"space-y-2",children:p.map(Ue=>{const Be=q(Ue),ye=Number(Be||0)*Number(Ue.qty||0),oe=Math.max(0,ye-Math.max(0,Number(Ue.discount||0))),Z=(Ue.measurement||"").toLowerCase()!=="lb";return i.jsxs("div",{className:"border rounded p-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"font-semibold",children:Ue.productName}),i.jsxs("div",{className:"text-sm",children:["C$ ",D(Be).toFixed(2)]})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2 items-center",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:Z?"numeric":"decimal",step:Z?1:.01,value:Ue.qtyInput??(Ue.qty===0?"":Ue.qty),onKeyDown:ee,onChange:Ne=>ve(Ue.productId,Ne.target.value),placeholder:Z?"Unid":"Libras",title:Z?"Unidades":"Libras"}),i.jsx("input",{className:"border rounded px-1 py-1 text-right",inputMode:"numeric",value:Ue.discountInput??(Ue.discount===0?"":Ue.discount),onChange:Ne=>Ke(Ue.productId,Ne.target.value),placeholder:"Descuento",title:"Descuento (C$)"}),i.jsx("input",{className:"border rounded px-2 py-1 text-right",inputMode:"decimal",value:Ue.specialPriceInput??(Ue.specialPrice===0?"":Ue.specialPrice),onChange:Ne=>Q(Ue.productId,Ne.target.value),placeholder:"Sugerido",title:"Precio sugerido (opcional)"})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Exist:"," ",os(Number(Ue.stock)-Number(Ue.qty||0)).toFixed(3)]}),i.jsxs("div",{className:"font-semibold",children:["C$ ",D(oe).toFixed(2)]})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600",onClick:()=>H(Ue.productId),children:"Quitar"})})]},Ue.productId)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Monto total"}),i.jsxs("div",{className:"text-xl font-bold",children:["C$ ",v.toFixed(2)]})]}),he==="CONTADO"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-2",inputMode:"decimal",value:b===0?"":b,onChange:Ue=>w(Number(Ue.target.value||0)),placeholder:"Monto recibido"}),i.jsxs("div",{className:"border rounded px-2 py-2 bg-gray-100",children:["Cambio: C$ ",j]})]}),i.jsx("button",{onClick:Ct,disabled:p.length===0||E,className:"w-full bg-blue-600 text-white px-4 py-2 rounded",children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("div",{className:`text-sm ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]})}):i.jsxs("div",{className:"relative",children:[i.jsxs("form",{onSubmit:Ct,className:`w-full mx-auto bg-white rounded-2xl shadow-2xl
                 p-4 sm:p-6 md:p-8
                 max-w-5xl space-y-4`,children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-blue-700 whitespace-nowrap",children:"Registrar venta (Pollo)"})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Producto | Precio por Libra/Unidad"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:l,onChange:Ue=>c(Ue.target.value),children:[i.jsx("option",{value:"",disabled:!0,children:"Selecciona un producto"}),Rt.map(Ue=>i.jsxs("option",{value:Ue.id,disabled:St.has(Ue.id),title:St.has(Ue.id)?"Ya est en la lista":`Disponible: ${X(k[Ue.id]||0)}`,children:[Ue.productName,"  ",Ue.measurement,"  C$ ",Ue.price," (disp:"," ",X(k[Ue.id]||0),")"]},Ue.id))]}),i.jsx("button",{type:"button",onClick:J,disabled:!l||St.has(l),className:"px-3 py-2 rounded-2xl shadow-2xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:"Agregar"})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Fecha de la venta"}),i.jsx("input",{type:"date",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl focus:ring-2 focus:ring-blue-400",value:u,onChange:Ue=>d(Ue.target.value)})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:he,onChange:Ue=>K(Ue.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),he==="CONTADO"?i.jsxs("div",{className:"md:col-span-2 space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Contado)"}),i.jsx("input",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:f,onChange:Ue=>A(Ue.target.value),placeholder:"Ej: Cliente Mostrador"})]}):i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cliente (Crdito)"}),i.jsxs("select",{className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:ne,onChange:Ue=>Pe(Ue.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),fe.map(Ue=>i.jsxs("option",{value:Ue.status==="ACTIVO"?Ue.id:"",disabled:Ue.status==="BLOQUEADO",children:[Ue.name,"  Saldo: ",c0(Ue.balance||0)]},Ue.id))]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:c0(Ve)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Pago inicial"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Mximo: ",c0(We)]}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:We,className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:Te===0?"":Te,onChange:Ue=>{const Be=Math.max(0,Number(Ue.target.value||0)),ye=Math.min(Be,We);O(ye)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:c0(pt)})]})]})]})]}),i.jsx("div",{className:"rounded border overflow-x-auto shadow-2xl",children:i.jsxs("table",{className:"min-w-full text-sm r",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"text-center",children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio especial"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Existencias"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cantidad"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descuento"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:""})]})}),i.jsx("tbody",{children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Agrega productos al carrito."})}):p.map(Ue=>{const Be=q(Ue),ye=Number(Be||0)*Number(Ue.qty||0),oe=Math.max(0,ye-Math.max(0,Number(Ue.discount||0))),Z=(Ue.measurement||"").toLowerCase()!=="lb",Ne=os(Number(Ue.stock)-Number(Ue.qty||0));return i.jsxs("tr",{className:"text-center",children:[i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[Ue.productName,"  ",Ue.measurement]}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(Ue.price).toFixed(2)]}),i.jsxs("td",{className:"p-2 border",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:Ue.specialPrice===0?"":Ue.specialPrice,onKeyDown:ee,onChange:Re=>Q(Ue.productId,Re.target.value),placeholder:"",title:"Precio especial (si se deja vaco, se usa el precio normal)"}),i.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Aplicado: C$ ",D(Be).toFixed(2)]})]}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:Ne.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:Z?1:.01,inputMode:Z?"numeric":"decimal",className:"w-28 border p-1 rounded text-right",value:Ue.qtyInput??(Ue.qty===0?"":Ue.qty),onKeyDown:ee,onChange:Re=>ve(Ue.productId,Re.target.value),placeholder:"0",title:"Cantidad"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:1,min:0,className:"w-24 border p-1 rounded text-right",value:Ue.discount===0?"":Ue.discount,onChange:Re=>Ke(Ue.productId,Re.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento (entero C$)"})}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:["C$ ",D(oe).toFixed(2)]}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>H(Ue.productId),title:"Quitar",children:""})})]},Ue.productId)})})]})}),i.jsxs("div",{className:"space-y-1 ",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 ",children:" Monto total"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${v.toFixed(2)}`,readOnly:!0,title:"Suma de (precio aplicado  cantidad  descuento) de cada producto."})]}),he==="CONTADO"&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Monto recibido"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl",value:b===0?"":b,onChange:Ue=>w(Number(Ue.target.value||0))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Cambio"}),i.jsx("input",{type:"text",className:"w-full border border-gray-300 p-2 rounded-2xl shadow-2xl bg-gray-100",value:`C$ ${j}`,readOnly:!0})]})]})}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 sm:py-2 rounded-2xl shadow-2xl font-semibold shadow hover:bg-blue-700 transition disabled:opacity-50",disabled:p.length===0||E,children:E?"Guardando...":"Guardar venta"}),_&&i.jsx("p",{className:`text-sm mt-2 ${_.startsWith("")?"text-green-600":_.startsWith("")?"text-yellow-600":"text-red-600"}`,children:_})]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/40 z-[60] flex items-center justify-center",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl border px-6 py-5",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-semibold",children:"Guardando venta"})]})})})]})}function Sre(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,f="",A=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof t=="string"?t.split(d):t,A=f.length||1),r+=l*(2-s),n.valign==="middle"?r-=A/2*u:n.valign==="bottom"&&(r-=A*u),n.halign==="center"||n.halign==="right"){var h=l;if(n.halign==="center"&&(h*=.5),f&&A>=1){for(var m=0;m<f.length;m++)a.text(f[m],e-a.getStringUnitWidth(f[m])*h,r),r+=u;return a}e-=a.getStringUnitWidth(t)*h}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var MV={},uv=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:MV=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return MV||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),Fk=function(t,e){return Fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},Fk(t,e)};function Ire(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fk(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jre=function(t){Ire(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function CPe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function _Pe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function SS(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function Pre(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=Bre(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function Bre(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function Xj(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function Tre(t,e){var r=Xj(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function EPe(t,e,r,n,a){var s={},o=1.3333333333333333,l=u5(e,function(b){return a.getComputedStyle(b).backgroundColor});l!=null&&(s.fillColor=l);var c=u5(e,function(b){return a.getComputedStyle(b).color});c!=null&&(s.textColor=c);var u=IPe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=o*r,A=n.borderTopWidth;if(n.borderBottomWidth===A&&n.borderRightWidth===A&&n.borderLeftWidth===A){var h=(parseFloat(A)||0)/f;h&&(s.lineWidth=h)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var m=u5(e,function(b){return a.getComputedStyle(b)[d]});m!=null&&(s.lineColor=m);var p=["left","right","center","justify"];p.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),p=["middle","bottom","top"],p.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var x=parseInt(n.fontSize||"");isNaN(x)||(s.fontSize=x/o);var v=SPe(n);v&&(s.fontStyle=v);var y=(n.fontFamily||"").toLowerCase();return t.indexOf(y)!==-1&&(s.font=y),s}function SPe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function u5(t,e){var r=kre(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function kre(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:kre(t.parentElement,e):r}function IPe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=Xj(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function Fre(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],f=[],A=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:f,foot:A};for(var h=0;h<l.rows.length;h++){var m=l.rows[h],p=(o=(s=m==null?void 0:m.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),x=jPe(c,u,r,m,n,a);x&&(p==="thead"?d.push(x):p==="tfoot"?A.push(x):f.push(x))}return{head:d,body:f,foot:A}}function jPe(t,e,r,n,a,s){for(var o=new jre(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=EPe(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:PPe(c)})}}var f=r.getComputedStyle(n);if(o.length>0&&(a||f.display!=="none"))return o}function PPe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function BPe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Gh(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function Ore(t,e){var r=new uv(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();BPe(a,n,e);var s=Gh({},a,n,e),o;typeof window<"u"&&(o=window);var l=TPe(a,n,e),c=kPe(a,n,e),u=FPe(r,s),d=DPe(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function TPe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],f=r[c];n.columnStyles=Gh({},u,d,f)}else{var A=[t,e,r],h=A.map(function(m){return m[c]||{}});n[c]=Gh({},h[0],h[1],h[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function kPe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function FPe(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m=Xj(e.margin,40/t.scaleFactor()),p=(r=OPe(t,e.startY))!==null&&r!==void 0?r:m.top,x;e.showFoot===!0?x="everyPage":e.showFoot===!1?x="never":x=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var v;e.showHead===!0?v="everyPage":e.showHead===!1?v="never":v=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var y=(s=e.useCss)!==null&&s!==void 0?s:!1,b=e.theme||(y?"plain":"striped"),w=!!e.horizontalPageBreak,j=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:b,startY:p,margin:m,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:v,showFoot:x,tableLineWidth:(f=e.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:w,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:(h=e.horizontalPageBreakBehaviour)!==null&&h!==void 0?h:"afterAllRows"}}function OPe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function DPe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=Fre(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||RPe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function RPe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var Ok=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),MPe=function(t){Ire(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(Ok),LPe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new MPe(e,this,n,a,s,o),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new Ok(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new Ok(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Dre=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof jre&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),Rre=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=Xj(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),UPe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function QPe(t,e){VPe(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=Dk(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=Dk(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),$Pe(e),GPe(e,t),HPe(e)}function VPe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=Tre(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=SS(u.text,u.styles,t)+f;var A=SS(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=A+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var h=10/r;u.minWidth=u.styles.minCellWidth||h,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function Dk(t,e,r){for(var n=e,a=t.reduce(function(h,m){return h+m.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),f=u<d?d:u;e-=f-o.width,o.width=f}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(h){return e<0?h.width>r(h):!0});A.length&&(e=Dk(A,e,r))}return e}function HPe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,A=d.rowSpan>f?f:d.rowSpan;e[c.index]={cell:d,left:A,row:s}}}}}function $Pe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function GPe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=LV(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=LV(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<A*u.rowSpan?r={height:A,count:u.rowSpan}:r&&r.count>0&&r.height>A&&(A=r.height),A>s.height&&(s.height=A)}}r.count--}}function LV(t,e,r,n,a){return t.map(function(s){return KPe(s,e,r,n,a)})}function KPe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=SS(t,r,n))return t;for(;e<SS(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function Mre(t,e){var r=new uv(t),n=qPe(e,r.scaleFactor()),a=new LPe(e,n);return QPe(r,a),r.applyStyles(r.userStyles),a}function qPe(t,e){var r=t.content,n=WPe(r.columns);if(r.head.length===0){var a=UV(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=UV(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:d5("head",r.head,n,o,s,e),body:d5("body",r.body,n,o,s,e),foot:d5("foot",r.foot,n,o,s,e)}}function d5(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,f={},A=0,h=0,m=0,p=r;m<p.length;m++){var x=p[m];if(o[x.index]==null||o[x.index].left===0)if(h===0){var v=void 0;Array.isArray(c)?v=c[x.index-A-d]:v=c[x.dataKey];var y={};typeof v=="object"&&!Array.isArray(v)&&(y=(v==null?void 0:v.styles)||{});var b=XPe(t,x,u,a,n,s,y),w=new Rre(v,b,t);f[x.dataKey]=w,f[x.index]=w,h=w.colSpan-1,o[x.index]={left:w.rowSpan-1,times:h}}else h--,A++;else o[x.index].left--,h=o[x.index].times,d++}return new Dre(c,u,t,f)});return l}function UV(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=zPe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function zPe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function WPe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new UPe(a,e,r)})}function XPe(t,e,r,n,a,s,o){var l=_Pe(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Gh({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},f=t==="body"?d:{},A=t==="body"&&r%2===0?Gh({},l.alternateRow,a.alternateRowStyles):{},h=CPe(s),m=Gh({},h,u,A,f);return Gh(m,o)}function YPe(t,e,r){var n;r===void 0&&(r={});var a=Tre(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(A){var h=e.columns.find(function(m){return m.dataKey===A||m.index===A});h&&!s.has(h.index)&&(s.set(h.index,!0),o.push(h.index),l.push(e.columns[h.index]),a-=h.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var f=e.columns[d].wrappedWidth;if(u||a>=f)u=!1,o.push(d),l.push(e.columns[d]),a-=f;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function JPe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=YPe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function Lre(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(A,h){return A+h.height},0);l+=u}var d=new uv(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Qre(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var f=Gh({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?ZPe(d,e,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(A){return mA(d,e,A,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(A,h){var m=h===e.body.length-1;IS(d,e,A,m,f,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(A){return mA(d,e,A,s,e.columns)})),Pre(d,e,f,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function ZPe(t,e,r,n){var a=JPe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?Eb(t,e,r,n,u.columns,!0):QV(t,e,n,u.columns),e4e(t,e,r,n,u.columns),f5(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?Eb(t,e,r,n,d,!0):QV(t,e,n,d),u=VV(t,e,o+1,n,d),f5(t,e,n,d)}var f=u-o;a.slice(1).forEach(function(A){t.applyStyles(t.userStyles),Eb(t,e,r,n,A.columns,!0),VV(t,e,o+1,n,A.columns,f),f5(t,e,n,A.columns)}),o=u};o<e.body.length-1;)c()}function QV(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return mA(t,e,s,r,n)})}function e4e(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;IS(t,e,s,l,r,n,a)})}function VV(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,f=Ure(t,e,d,n);c.canEntireRowFit(f,a)&&(mA(t,e,c,n,a),l=r+u)}),l}function f5(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return mA(t,e,s,r,n)})}function t4e(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function r4e(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Rre(u.raw,u.styles,u.section);d=Gh(d,u),d.text=[];var f=t4e(u,e,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var A=n.scaleFactor(),h=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(A,h),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(A,h),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var m=new Dre(t.raw,-1,t.section,a,!0);m.height=s;for(var p=0,x=r.columns;p<x.length;p++){var c=x[p],d=m.cells[c.index];d&&(d.height=m.height);var u=t.cells[c.index];u&&(u.height=t.height)}return m}function n4e(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),f=e.getMaxCellHeight(n.columns)>l;return f?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function IS(t,e,r,n,a,s,o){var l=Ure(t,e,n,s);if(r.canEntireRowFit(l,o))mA(t,e,r,s,o);else if(n4e(t,r,l,e)){var c=r4e(r,l,e,t);mA(t,e,r,s,o),Eb(t,e,a,s,o),IS(t,e,c,n,a,s,o)}else Eb(t,e,a,s,o),IS(t,e,r,n,a,s,o)}function mA(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}a4e(t,c,n);var d=c.getTextPos();Sre(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function a4e(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Bre(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),s4e(t,e,r,n.lineWidth))}function s4e(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,f,A,h){t.getDocument().setLineWidth(u),t.getDocument().line(d,f,A,h,"S")}}function Ure(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function Eb(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return mA(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;Pre(t,e,r,n),Qre(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return mA(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function Qre(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function i4e(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=Ore(this,n),s=Mre(this,a);return Lre(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){Sre(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return uv.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){uv.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new uv(this),s=Fre(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var h5;function O0(t,e){var r=Ore(t,e),n=Mre(t,r);Lre(t,n)}try{if(typeof window<"u"&&window){var HV=window,$V=HV.jsPDF||((h5=HV.jspdf)===null||h5===void 0?void 0:h5.jsPDF);$V&&i4e($V)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Ma=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function A5(t="LOT"){return`${t}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function o4e({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const[a,s]=g.useState([]),[o,l]=g.useState([]),[c,u]=g.useState(!0),[d,f]=g.useState(""),{refreshKey:A,refresh:h}=Ec(),m=e&&e.length?e:t,p=xn(m,"admin"),x=p||xn(m,"contador"),[v,y]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[b,w]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[j,I]=g.useState(""),[_,S]=g.useState(!1),[E,F]=g.useState(""),[k,B]=g.useState(Br(new Date,"yyyy-MM-dd")),[D,X]=g.useState("lb"),[he,Ae]=g.useState(""),[fe,me]=g.useState(0),[ne,Pe]=g.useState(NaN),[Te,O]=g.useState(0),[K,q]=g.useState([]),[U,W]=g.useState(null),[J,M]=g.useState([]),[H,te]=g.useState(!1),[ve,Q]=g.useState(null),[Ke,ae]=g.useState(!1),[ee,Fe]=g.useState(null),[ce,be]=g.useState(null),Ve=xe=>be(ie=>ie===xe?null:xe),[We,pt]=g.useState(!1),wt=()=>pt(xe=>!xe),[Ct,St]=g.useState("all"),[Rt,jt]=g.useState({}),Ue=xe=>jt(ie=>({...ie,[xe]:!(ie[xe]??!1)})),Be=(xe,ie)=>{const Oe=[];return xe>0&&Oe.push(`${xe.toFixed(3)} lb`),ie>0&&Oe.push(`${ie.toFixed(3)} un`),Oe.length===0?"0":Oe.join("  ")},ye=xe=>{const ie=(xe||"").toLowerCase();return/(^|\s)(lb|lbs|libra|libras)(\s|$)/.test(ie)||ie==="lb"};g.useEffect(()=>{(async()=>{u(!0),f("");const xe=await Qt(yt(ke,"products")),ie=[];xe.forEach(He=>{const P=He.data();P.active===!0&&ie.push({id:He.id,name:P.name??P.productName??"(sin nombre)",category:P.category??"(sin categora)",measurement:P.measurement??"lb",price:Number(P.price??0),providerPrice:Object.prototype.hasOwnProperty.call(P,"providerPrice")?Number(P.providerPrice):void 0})}),s(ie);const Oe=ar(yt(ke,"inventory_batches"),wn("date","desc")),le=await Qt(Oe),De=[];le.forEach(He=>{const P=He.data(),R=os(Number(P.quantity||0)),L=Number(P.purchasePrice||0),G=Number(P.salePrice||0),re=Number((R*L).toFixed(2)),ue=Number((R*G).toFixed(2));De.push({id:He.id,productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:R,remaining:os(Number(P.remaining||0)),purchasePrice:L,salePrice:G,invoiceTotal:P.invoiceTotal!=null?Number(P.invoiceTotal):re,expectedTotal:P.expectedTotal!=null?Number(P.expectedTotal):ue,date:P.date,createdAt:P.createdAt,status:P.status,notes:P.notes,paidAmount:Number(P.paidAmount||0),paidAt:P.paidAt,batchGroupId:P.batchGroupId,orderName:P.orderName})}),l(De),u(!1)})()},[A]);const oe=g.useMemo(()=>o.filter(xe=>!(v&&xe.date<v||b&&xe.date>b||j&&xe.productId!==j)),[o,v,b,j]),Z=g.useMemo(()=>{if(!j)return"Todos";const xe=a.find(ie=>ie.id===j);return xe?`${xe.name}  ${xe.category}`:"Filtro activo"},[j,a]),Ne=g.useMemo(()=>{const xe=oe.reduce((L,G)=>L+Number(G.invoiceTotal||0),0),ie=oe.reduce((L,G)=>L+Number(G.expectedTotal||0),0);let Oe=0,le=0,De=0,He=0;for(const L of oe)ye(L.unit)?(Oe+=L.quantity,le+=L.remaining):(De+=L.quantity,He+=L.remaining);const P=oe.reduce((L,G)=>L+G.quantity,0),R=oe.reduce((L,G)=>L+G.remaining,0);return{lbsIng:Oe,lbsRem:le,udsIng:De,udsRem:He,qty:P,rem:R,totalFacturado:xe,totalEsperado:ie}},[oe]),Re=g.useMemo(()=>{var Oe,le;const xe=new Map;for(const De of oe){const He=De.batchGroupId&&String(De.batchGroupId).trim()||De.id;xe.has(He)||xe.set(He,[]),xe.get(He).push(De)}const ie=[];for(const[De,He]of xe.entries()){const P=[...He].sort((tt,xt)=>{var nr,cr;const kt=((nr=tt.createdAt)==null?void 0:nr.seconds)??0;return(((cr=xt.createdAt)==null?void 0:cr.seconds)??0)-kt}),R=((Oe=P[0])==null?void 0:Oe.date)||"",L=String(((le=P[0])==null?void 0:le.orderName)||"").trim()||`Pedido ${R||""}`.trim()||"Pedido",G=new Set(P.map(tt=>String(tt.category||"").trim()).filter(Boolean)),re=G.size===1?Array.from(G)[0].toUpperCase():"MIXTO",ue=P.some(tt=>tt.status==="PENDIENTE")?"PENDIENTE":"PAGADO",$e=os(P.reduce((tt,xt)=>tt+(ye(xt.unit)?Number(xt.quantity||0):0),0)),rt=os(P.reduce((tt,xt)=>tt+(ye(xt.unit)?Number(xt.remaining||0):0),0)),At=os(P.reduce((tt,xt)=>tt+(ye(xt.unit)?0:Number(xt.quantity||0)),0)),Je=os(P.reduce((tt,xt)=>tt+(ye(xt.unit)?0:Number(xt.remaining||0)),0)),ht=Number(P.reduce((tt,xt)=>tt+Number(xt.invoiceTotal||0),0).toFixed(2)),Ot=Number(P.reduce((tt,xt)=>tt+Number(xt.expectedTotal||0),0).toFixed(2)),Se=Number((Ot-ht).toFixed(2));ie.push({groupId:De,orderName:L,date:R,typeLabel:re,status:ue,lbsIn:$e,lbsRem:rt,udsIn:At,udsRem:Je,totalFacturado:ht,totalEsperado:Ot,utilidadBruta:Se,items:P})}return ie.sort((De,He)=>De.date===He.date?De.groupId<He.groupId?1:-1:De.date<He.date?1:-1),ie},[oe]),ge=g.useMemo(()=>Ct==="all"?Re:Re.filter(xe=>{const ie=xe.lbsRem>0||xe.udsRem>0;return Ct==="with"?ie:!ie}),[Re,Ct]),Xe=g.useMemo(()=>{const xe=new Map;return ge.forEach(ie=>{const Oe=ie.typeLabel||"MIXTO";xe.has(Oe)||xe.set(Oe,[]),xe.get(Oe).push(ie)}),Array.from(xe.entries()).map(([ie,Oe])=>({type:ie,items:Oe}))},[ge]),vt=g.useMemo(()=>{const xe=String(D||"").toLowerCase().trim();return a.filter(Oe=>String(Oe.measurement||"").toLowerCase().trim()===xe).sort((Oe,le)=>Oe.name.localeCompare(le.name,"es"))},[a,D]);g.useEffect(()=>{const xe=K.find(Oe=>Oe.productId===he);if(xe){me(Number(xe.quantity||0)),Pe(Number(xe.purchasePrice||0)),O(Number(xe.salePrice||0));return}const ie=a.find(Oe=>Oe.id===he);ie?(me(0),O(Number(ie.price||0)),ie.providerPrice!=null&&Number.isFinite(Number(ie.providerPrice))?Pe(Number(ie.providerPrice)):Pe(NaN)):(me(0),O(0),Pe(NaN))},[he,a,A,K]);const it=()=>{f("");const xe=a.find(R=>R.id===he);if(!xe)return f("Selecciona un producto.");if(fe<=0||!Number.isFinite(ne)||ne<=0)return f("Completa libras a ingresar y precio proveedor.");const ie=os(fe),Oe=xe.measurement,le=Number((ie*Number(ne||0)).toFixed(2)),De=Number((ie*Number(Te||0)).toFixed(2)),He=Number((De-le).toFixed(2)),P=K.findIndex(R=>R.productId===xe.id);P>=0?q(R=>R.map((L,G)=>G!==P?L:{...L,quantity:ie,remaining:ie,purchasePrice:Number(ne||0),salePrice:Number(Te||0),invoiceTotal:le,expectedTotal:De,utilidadBruta:He})):q(R=>[...R,{tempId:A5("IT"),productId:xe.id,productName:xe.name,category:xe.category,unit:Oe,quantity:ie,remaining:ie,purchasePrice:Number(ne||0),salePrice:Number(Te||0),invoiceTotal:le,expectedTotal:De,utilidadBruta:He}]),Ae(""),me(0),Pe(NaN),O(0)},de=xe=>{q(ie=>ie.filter(Oe=>Oe.tempId!==xe))},Ce=(xe,ie,Oe)=>{q(le=>le.map(De=>{if(De.tempId!==xe)return De;const He={...De};return ie==="quantity"&&(He.quantity=os(Math.max(0,Oe)),U||(He.remaining=He.quantity)),ie==="purchasePrice"&&(He.purchasePrice=Math.max(0,Number(Oe||0))),ie==="salePrice"&&(He.salePrice=Math.max(0,Number(Oe||0))),He.invoiceTotal=Number((He.quantity*He.purchasePrice).toFixed(2)),He.expectedTotal=Number((He.quantity*He.salePrice).toFixed(2)),He.utilidadBruta=Number((He.expectedTotal-He.invoiceTotal).toFixed(2)),He}))},Ye=g.useMemo(()=>{const xe=os(K.reduce((He,P)=>He+(ye(P.unit)?Number(P.quantity||0):0),0)),ie=os(K.reduce((He,P)=>He+(ye(P.unit)?Number(P.remaining||0):0),0)),Oe=Number(K.reduce((He,P)=>He+Number(P.invoiceTotal||0),0).toFixed(2)),le=Number(K.reduce((He,P)=>He+Number(P.expectedTotal||0),0).toFixed(2)),De=Number((le-Oe).toFixed(2));return{lbsIn:xe,lbsRem:ie,totalFacturado:Oe,totalEsperado:le,utilidadBruta:De}},[K]),ft=()=>{W(null),M([]),F(""),B(Br(new Date,"yyyy-MM-dd")),X("lb"),Ae(""),me(0),Pe(NaN),O(0),q([])},we=async()=>{if(f(""),!K.length)return f("Agrega al menos un producto al pedido.");const xe=k||Br(new Date,"yyyy-MM-dd"),ie=String(E||"").trim()||`Pedido ${xe}`,Oe=U||A5("BATCH");try{if(!U){for(const P of K)await BV({productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:os(P.quantity),purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),date:xe,notes:"",batchGroupId:Oe,orderName:ie});f(" Pedido creado"),S(!1),ft(),h();return}const le=J,De=new Map;for(const P of le)De.set(P.productId,P);const He=new Set(K.map(P=>P.productId));for(const P of K){const R=De.get(P.productId),L=os(P.quantity);if(R){const G=os(R.quantity-R.remaining),re=Math.max(0,os(L-G));await _n(Jt(ke,"inventory_batches",R.id),{date:xe,orderName:ie,batchGroupId:Oe,quantity:L,purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),remaining:re})}else await BV({productId:P.productId,productName:P.productName,category:P.category,unit:P.unit,quantity:L,purchasePrice:Number(P.purchasePrice||0),salePrice:Number(P.salePrice||0),invoiceTotal:Number(P.invoiceTotal||0),expectedTotal:Number(P.expectedTotal||0),date:xe,notes:"",batchGroupId:Oe,orderName:ie})}for(const P of le)He.has(P.productId)||await Mn(Jt(ke,"inventory_batches",P.id));f(" Pedido actualizado"),S(!1),ft(),h()}catch(le){console.error(le),f(" Error al guardar pedido")}},Le=xe=>{Q(xe),te(!0)},gt=xe=>{W(xe.groupId),M(xe.items),F(xe.orderName),B(xe.date||Br(new Date,"yyyy-MM-dd"));const ie=xe.items.map(Oe=>{const le=Number(Oe.invoiceTotal||0),De=Number(Oe.expectedTotal||0);return{tempId:A5("IT"),productId:Oe.productId,productName:Oe.productName,category:Oe.category,unit:Oe.unit,quantity:os(Oe.quantity),remaining:os(Oe.remaining),purchasePrice:Number(Oe.purchasePrice||0),salePrice:Number(Oe.salePrice||0),invoiceTotal:le,expectedTotal:De,utilidadBruta:Number((De-le).toFixed(2))}});q(ie),S(!0)},Ut=async xe=>{if(confirm(`Eliminar el pedido "${xe.orderName}" del ${xe.date}?`))try{for(const Oe of xe.items)await Mn(Jt(ke,"inventory_batches",Oe.id));f(" Pedido eliminado"),h()}catch(Oe){console.error(Oe),f(" Error al eliminar pedido")}},Mt=xe=>{Fe(xe),ae(!0)},Yt=async()=>{if(ee)try{for(const xe of ee.items){if(xe.status!=="PENDIENTE")continue;await wre(xe.id),await _n(Jt(ke,"inventory_batches",xe.id),{remaining:0});const ie={date:xe.date,productName:xe.productName,quantity:xe.quantity,amount:Number((xe.expectedTotal??xe.salePrice*xe.quantity).toFixed(2)),allocations:[{batchId:xe.id,qty:xe.quantity,unitCost:xe.purchasePrice,lineCost:Number((xe.purchasePrice*xe.quantity).toFixed(2))}],avgUnitCost:xe.purchasePrice,measurement:xe.unit,createdAt:xr.now(),autoGeneratedFromInventory:!0};await $n(yt(ke,"salesV2"),ie)}f(" Pedido pagado y reflejado como venta"),h()}catch(xe){console.error(xe),f(" Error al pagar pedido")}finally{ae(!1),Fe(null)}},st=()=>{ae(!1),Fe(null)},_e=()=>{const xe=new qr({unit:"pt",format:"a4",orientation:"landscape"}),ie="Inventario de Pollo",Oe=`Rango: ${v||"(sin inicio)"} a ${b||"(sin fin)"}`,le=`Producto: ${Z}`,De=R=>Number(R||0).toFixed(3);let He=40;xe.setFontSize(16),xe.text(ie,40,He),He+=16,xe.setFontSize(10),xe.text(Oe,40,He),He+=12,xe.text(le,40,He),He+=14;const P=()=>{var R;He=(R=xe.lastAutoTable)!=null&&R.finalY?xe.lastAutoTable.finalY+18:He+18};O0(xe,{startY:He,head:[["KPI","Valor"]],body:[["Libras ingresadas",De(Ne.lbsIng)],["Libras restantes",De(Ne.lbsRem)],["Unidades ingresadas",De(Ne.udsIng)],["Unidades restantes",De(Ne.udsRem)],["Total esperado",Ma(Ne.totalEsperado)],["Total facturado",Ma(Ne.totalFacturado)],["Ganancia sin gastos",Ma(Ne.totalEsperado-Ne.totalFacturado)],["Cantidad de lotes",oe.length.toString()]],styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),P(),O0(xe,{startY:He,head:[["Fecha","Pedido","Tipo","Lb In","Lb Rem","Ud In","Ud Rem","Facturado","Esperado","Utilidad","Estado"]],body:Re.map(R=>[R.date,R.orderName,R.typeLabel,De(R.lbsIn),De(R.lbsRem),De(R.udsIn),De(R.udsRem),Ma(R.totalFacturado),Ma(R.totalEsperado),Ma(R.utilidadBruta),R.status]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),P(),Re.forEach(R=>{xe.setFontSize(11),xe.text(`Pedido: ${R.orderName} (${R.date})  ${R.typeLabel}`,40,He),He+=12,O0(xe,{startY:He,head:[["Producto","Unidad","Ingresado","Restante","Precio compra","Precio venta","Total facturado","Total esperado","Utilidad","Estado"]],body:R.items.map(L=>[L.productName,(L.unit||"").toUpperCase(),De(L.quantity),De(L.remaining),Ma(L.purchasePrice),Ma(L.salePrice),Ma(L.invoiceTotal||L.purchasePrice*L.quantity),Ma(L.expectedTotal||L.salePrice*L.quantity),Ma((L.expectedTotal||L.salePrice*L.quantity)-(L.invoiceTotal||L.purchasePrice*L.quantity)),L.status]),styles:{fontSize:8},headStyles:{fillColor:[230,230,230],textColor:[0,0,0]}}),P()}),xe.save(`inventario_pollo_${v||"sin_desde"}_a_${b||"sin_hasta"}.pdf`)};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-gray-900 text-white hover:bg-black",type:"button",onClick:_e,disabled:c,children:"Exportar PDF"}),x&&i.jsx("button",{className:"px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",type:"button",onClick:()=>{ft(),S(!0)},children:"Crear Lote"})]})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow-2xl border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:xe=>y(xe.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:b,onChange:xe=>w(xe.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:j,onChange:xe=>I(xe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),a.map(xe=>i.jsxs("option",{value:xe.id,children:[xe.name,"  ",xe.category]},xe.id))]})]}),i.jsx("button",{className:"px-3 rounded-2xl shadow-2xl py-1 bg-gray-200 hover:bg-gray-300",onClick:()=>{y(""),w(""),I("")},children:"Quitar filtro"}),i.jsx("div",{className:"ml-auto",children:i.jsx(_c,{onClick:()=>h(),loading:c})})]}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:wt,role:"button","aria-expanded":We,children:[i.jsxs("div",{className:"flex gap-6 items-center",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ne.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ne.lbsRem.toFixed(3)]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:We?"Cerrar":"Ver ms"})]}),We&&i.jsx("div",{className:"mt-3",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Ne.lbsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Ne.lbsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Ne.udsIng.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Ne.udsRem.toFixed(3)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ","C$ ",Ne.totalEsperado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," C$"," ",Ne.totalFacturado.toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," C$"," ",(Ne.totalEsperado-Ne.totalFacturado).toFixed(2)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes (por filtro):"})," ",oe.length.toLocaleString()]})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"Todos"},{key:"with",label:"Con disponibilidad"},{key:"without",label:"Sin disponibilidad"}].map(xe=>{const ie=Ct===xe.key;return i.jsx("button",{type:"button",onClick:()=>St(xe.key),className:`flex-1 px-3 py-2 rounded-xl text-sm font-semibold shadow ${ie?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:xe.label},xe.key)})}),c?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow",children:"Cargando"}):ge.length===0?i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow text-center",children:Ct==="with"?"Sin lotes con disponibilidad.":Ct==="without"?"Sin lotes sin disponibilidad.":"Sin lotes"}):Xe.map(({type:xe,items:ie})=>{const Oe=Rt[xe]??!1;return i.jsxs("div",{className:"bg-white border rounded-2xl",children:[i.jsxs("button",{type:"button",onClick:()=>Ue(xe),className:"w-full px-4 py-3 flex items-center justify-between text-left",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:xe}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ie.length," ",ie.length===1?"lote":"lotes"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:Oe?"Cerrar":"Ver"})]}),Oe&&i.jsx("div",{className:"space-y-3 px-2 pb-4",children:ie.map(le=>{const De=ce===le.groupId,He=le.lbsRem>0||le.udsRem>0;return i.jsxs("div",{className:"bg-gray-50 border rounded-2xl",children:[i.jsxs("div",{className:"p-4 flex items-start justify-between gap-3 cursor-pointer",onClick:()=>Ve(le.groupId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"font-semibold text-lg",children:[le.date,i.jsxs("div",{className:"text-sm text-gray-500",children:["Producto: ",le.typeLabel]})]}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["Nombre: ",le.orderName]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${le.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:le.status})})]}),i.jsxs("div",{className:"pb-4 p-4 flex items-start justify-between gap-1 cursor-pointer",children:[i.jsxs("div",{className:"px-2 py-1 rounded text-xs shrink-0 bg-green-100 font-semibold text-gray-700",children:["Ingresado: ",Be(le.lbsIn,le.udsIn)]}),i.jsxs("span",{className:`px-2 py-1 rounded text-xs shrink-0 ${He?"bg-green-100 font-semibold text-gray-700":"bg-red-100 font-semibold text-red-700"}`,children:["Disponible: ",Be(le.lbsRem,le.udsRem)]})]}),De&&i.jsxs("div",{className:"p-4 pt-0",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Tipo"}),i.jsx("div",{className:"font-semibold",children:le.typeLabel})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Utilidad bruta"}),i.jsx("div",{className:"font-semibold",children:Ma(le.utilidadBruta)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs ingresadas"}),i.jsx("div",{className:"font-semibold",children:le.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lbs restantes"}),i.jsx("div",{className:"font-semibold",children:le.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"bg-white rounded-xl p-2 col-span-2",children:[i.jsxs("div",{className:"flex justify-between text-[11px] text-gray-500",children:[i.jsx("span",{children:"Total facturado"}),i.jsx("span",{children:"Total esperado"})]}),i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{children:Ma(le.totalFacturado)}),i.jsx("span",{children:Ma(le.totalEsperado)})]})]}),le.items.length>0&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 col-span-2 border border-gray-100",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-2",children:"Productos asociados"}),i.jsx("div",{className:"space-y-1",children:le.items.map(P=>i.jsxs("div",{className:"flex items-center text-xs justify-between gap-2",children:[i.jsx("div",{className:"font-semibold text-gray-800 truncate",children:P.productName}),i.jsxs("div",{className:"text-gray-600 text-right",children:[i.jsxs("div",{children:["Ingresado:"," ",P.quantity.toFixed(3)]}),i.jsxs("div",{children:["Restante:"," ",P.remaining.toFixed(3)]})]})]},P.id))})]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>Le(le),children:"Ver detalle"}),p?i.jsxs(i.Fragment,{children:[le.status==="PENDIENTE"&&i.jsx("button",{className:"px-3 py-2 rounded-xl bg-green-600 hover:bg-green-700 text-white text-sm",onClick:()=>Mt(le),children:"Pagar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-yellow-600 hover:bg-yellow-700 text-white text-sm",onClick:()=>gt(le),children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-red-600 hover:bg-red-700 text-white text-sm",onClick:()=>Ut(le),children:"Borrar"})]}):null]})]})]},le.groupId)})})]},xe)})]}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Unidades ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Unidades restantes"}),i.jsx("th",{className:"p-2 border",children:"Total Facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):Re.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin lotes"})}):Re.map(xe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border",children:[i.jsx("button",{className:"underline text-blue-700 hover:text-blue-900",onClick:()=>Le(xe),title:xe.orderName,children:xe.date}),i.jsx("div",{className:"text-[11px] text-gray-500",children:xe.orderName})]}),i.jsx("td",{className:"p-2 border",children:xe.typeLabel}),i.jsx("td",{className:"p-2 border",children:xe.lbsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:xe.lbsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:xe.udsIn.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:xe.udsRem.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.totalFacturado)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.totalEsperado)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${xe.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:xe.status})}),i.jsx("td",{className:"p-2 border",children:p?i.jsxs("div",{className:"flex gap-2 justify-center",children:[xe.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>Mt(xe),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(xe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ut(xe),children:"Borrar"})]}):i.jsx("span",{className:"text-xs text-gray-500",children:"Solo vista"})})]},xe.groupId))})]})}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),_&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>S(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:U?"Editar pedido":"Crear pedido"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de pedido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:E,onChange:xe=>F(xe.target.value),placeholder:"Ej: Pedido Pollo - Semana 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:k,onChange:xe=>B(xe.target.value)})]})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidad"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:D,onChange:xe=>{X(xe.target.value),Ae(""),me(0),Pe(NaN),O(0)},children:[i.jsx("option",{value:"lb",children:"lb"}),i.jsx("option",{value:"unidad",children:"unidad"}),i.jsx("option",{value:"kg",children:"kg"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (solo activos)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:he,onChange:xe=>Ae(xe.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),vt.map(xe=>i.jsxs("option",{value:xe.id,children:[xe.name,"  ",xe.category,"  ",xe.measurement]},xe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Libras a ingresar"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:fe===0?"":fe,onChange:xe=>{const ie=xe.target.value.replace(",","."),Oe=parseFloat(ie),le=Number.isFinite(Oe)?parseFloat(Oe.toFixed(3)):0;me(Math.max(0,le));const De=K.find(He=>He.productId===he);De&&Ce(De.tempId,"quantity",le)},disabled:!he})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Number.isNaN(ne)?"":ne,onChange:xe=>{const ie=xe.target.value.replace(",",".");if(ie==="")return Pe(NaN);const Oe=parseFloat(ie),le=Number.isFinite(Oe)?parseFloat(Oe.toFixed(2)):NaN;Pe(Number.isFinite(le)?Math.max(0,le):NaN);const De=K.find(He=>He.productId===he);De&&Number.isFinite(le)&&Ce(De.tempId,"purchasePrice",le)},disabled:!he})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Te===0?"":Te,onChange:xe=>{const ie=xe.target.value.replace(",","."),Oe=parseFloat(ie),le=Number.isFinite(Oe)?parseFloat(Oe.toFixed(2)):0;O(Math.max(0,le));const De=K.find(He=>He.productId===he);De&&Ce(De.tempId,"salePrice",le)},disabled:!he})]})]}),i.jsx("div",{className:"flex justify-end mt-3",children:i.jsx("button",{type:"button",onClick:it,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto al pedido"})})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Libras ingresadas"}),i.jsx("th",{className:"p-2 border",children:"Libras restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:K.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center text-gray-500",children:"No hay productos agregados."})}):K.map(xe=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsxs("td",{className:"p-2 border text-left",children:[xe.productName,i.jsxs("div",{className:"text-[11px] text-gray-500",children:[xe.category,"  ",xe.unit]})]}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:xe.quantity,onChange:ie=>{const Oe=ie.target.value.replace(",","."),le=parseFloat(Oe),De=Number.isFinite(le)?parseFloat(le.toFixed(3)):0;Ce(xe.tempId,"quantity",De)}})}),i.jsx("td",{className:"p-2 border",children:Number(xe.remaining||0).toFixed(3)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:xe.purchasePrice,onChange:ie=>{const Oe=ie.target.value.replace(",","."),le=parseFloat(Oe),De=Number.isFinite(le)?parseFloat(le.toFixed(2)):0;Ce(xe.tempId,"purchasePrice",De)}})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border p-1 rounded text-right",value:xe.salePrice,onChange:ie=>{const Oe=ie.target.value.replace(",","."),le=parseFloat(Oe),De=Number.isFinite(le)?parseFloat(le.toFixed(2)):0;Ce(xe.tempId,"salePrice",De)}})}),i.jsx("td",{className:"p-2 border",children:Ma(xe.invoiceTotal)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.expectedTotal)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.utilidadBruta)}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>de(xe.tempId),children:"Quitar"})})]},xe.tempId))})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:Ye.lbsIn.toFixed(3)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:Ye.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ma(Ye.totalFacturado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:Ma(Ye.totalEsperado)}),i.jsx("div",{className:"text-xs text-gray-600 mt-2",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ma(Ye.utilidadBruta)})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>S(!1),children:"Cancelar"}),i.jsx("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:we,disabled:K.length===0,children:U?"Editar pedido":"Crear pedido"})]})]})]}),document.body),H&&ve&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[75] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{te(!1),Q(null)}}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-6xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del pedido"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:ve.orderName})," "," ",ve.date]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te(!1),Q(null)},type:"button",children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:ve.items.map(xe=>{const ie=Number(xe.invoiceTotal||0),Oe=Number(xe.expectedTotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border text-left",children:xe.productName}),i.jsx("td",{className:"p-2 border",children:(xe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:xe.quantity.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:xe.remaining.toFixed(3)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:Ma(xe.salePrice)}),i.jsx("td",{className:"p-2 border",children:Ma(ie)}),i.jsx("td",{className:"p-2 border",children:Ma(Oe)}),i.jsx("td",{className:"p-2 border",children:Ma(Oe-ie)}),i.jsx("td",{className:"p-2 border",children:xe.status})]},xe.id)})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras ingresadas"}),i.jsx("div",{className:"text-lg font-semibold",children:ve.lbsIn.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras restantes"}),i.jsx("div",{className:"text-lg font-semibold",children:ve.lbsRem.toFixed(3)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Ma(ve.utilidadBruta)})]})]})]})]}),document.body),Ke&&ee&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[80] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:st}),i.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl border w-[90%] max-w-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"Confirmar pago de inventario"}),i.jsxs("p",{className:"text-sm text-gray-700 mb-5 text-center",children:["Seguro que quieres pagar este pedido?",i.jsx("br",{}),i.jsx("strong",{children:ee.orderName})," "," ",ee.date,i.jsx("br",{}),"Ya no habrn libras disponibles al pagar este inventario."]}),i.jsxs("div",{className:"flex justify-center gap-4",children:[i.jsx("button",{onClick:Yt,className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700",children:"Confirmar"}),i.jsx("button",{onClick:st,className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400",children:"Cancelar"})]})]})]}),document.body)]})}const Eh=t=>`C$${(Number(t)||0).toFixed(2)}`;function l4e(){const t=U2e(new Date),[e,r]=g.useState(Br(t,"yyyy-MM")),[n,a]=g.useState([]),[s,o]=g.useState(!1),[l,c]=g.useState(""),u=g.useRef(null),d=g.useMemo(()=>{const[x,v]=e.split("-").map(w=>parseInt(w,10)),y=Br(Pd(new Date(x,v-1,1)),"yyyy-MM-dd"),b=Br(jd(new Date(x,v-1,1)),"yyyy-MM-dd");return{from:y,to:b}},[e]),f=async()=>{o(!0);try{const x=await rPe(d.from,d.to),v=[];for(const y of x){const b=Jt(ke,"inventory_batches",y.batchId),w=await si(b);if(!w.exists())continue;const j=w.data();v.push({batchId:y.batchId,batchDate:y.batchDate,productName:y.productName,soldQty:Number(y.quantity||0),soldAmount:Number(y.amountCharged||0),status:j.status??"PENDIENTE",purchasePrice:Number(j.purchasePrice||0),salePrice:Number(j.salePrice||0),supplier:j.supplier})}a(v)}catch(x){console.error(x),c(" Error al cargar liquidaciones")}finally{o(!1)}};g.useEffect(()=>{f()},[e]);const A=async x=>{confirm("Marcar este lote como PAGADO?")&&(await wre(x),a(y=>y.map(b=>b.batchId===x?{...b,status:"PAGADO"}:b)))},h=g.useMemo(()=>{const x=n.reduce((w,j)=>w+j.soldQty,0),v=n.reduce((w,j)=>w+j.soldAmount,0),y=n.reduce((w,j)=>w+j.soldQty*j.purchasePrice,0),b=v-y;return{q:x,amt:v,cogs:y,profit:b}},[n]),m=g.useMemo(()=>{const x=new Map;for(const v of n){const y=v.productName||"(sin nombre)";x.has(y)||x.set(y,{productName:y,qty:0,revenue:0,cogs:0,profit:0});const b=x.get(y);b.qty+=v.soldQty,b.revenue+=v.soldAmount;const w=v.soldQty*v.purchasePrice;b.cogs+=w,b.profit=b.revenue-b.cogs}return Array.from(x.values()).sort((v,y)=>v.productName.localeCompare(y.productName))},[n]),p=async()=>{if(!u.current)return;const x=u.current;x.classList.add("force-pdf-colors");try{const[{default:v},{jsPDF:y}]=await Promise.all([tA(()=>Promise.resolve().then(()=>S6),void 0),tA(()=>Promise.resolve().then(()=>kk),void 0)]),w=(await v(x,{backgroundColor:"#ffffff",scale:2})).toDataURL("image/png"),j=new y("p","mm","a4"),I=190,_=j.getImageProperties(w),S=I,E=_.height*S/_.width;j.addImage(w,"PNG",10,10,S,E),j.save(`liquidaciones_${e}.pdf`)}catch(v){console.error(v),alert("No se pudo generar el PDF")}finally{x.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Liquidaciones por lote"}),i.jsx("button",{onClick:p,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:"Descargar PDF"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-center gap-3",children:[i.jsx("label",{className:"text-sm font-semibold",children:"Mes:"}),i.jsx("input",{type:"month",className:"border rounded px-2 py-1",value:e,onChange:x=>r(x.target.value)}),i.jsx("button",{onClick:f,className:"bg-gray-800 text-white px-3 py-1 rounded",children:"Aplicar"})]}),i.jsxs("div",{ref:u,children:[i.jsx("div",{className:"bg-white p-3 rounded shadow border mb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total vendido (cantidad):"})," ",h.q]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Monto vendido:"})," ",Eh(h.amt)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Costo (COGS):"})," ",Eh(h.cogs)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Utilidad:"})," ",Eh(h.profit)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Lote (fecha)"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Vendido"}),i.jsx("th",{className:"p-2 border",children:"Monto vendido"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:s?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Cargando"})}):n.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-4 text-center",children:"Sin datos"})}):n.map(x=>{const v=x.soldQty*x.purchasePrice,y=x.soldAmount-v;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:x.batchDate}),i.jsx("td",{className:"p-2 border",children:x.productName}),i.jsx("td",{className:"p-2 border",children:x.supplier||"-"}),i.jsx("td",{className:"p-2 border",children:x.soldQty}),i.jsx("td",{className:"p-2 border",children:Eh(x.soldAmount)}),i.jsx("td",{className:"p-2 border",children:Eh(v)}),i.jsx("td",{className:`p-2 border ${y>=0?"text-green-700":"text-red-700"}`,children:Eh(y)}),i.jsx("td",{className:"p-2 border",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${x.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:x.status})}),i.jsx("td",{className:"p-2 border",children:x.status==="PENDIENTE"&&i.jsx("button",{onClick:()=>A(x.batchId),className:"px-2 py-1 rounded text-white bg-green-600 hover:bg-green-700",children:"Marcar pagado"})})]},x.batchId)})})]})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Utilidad por producto"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad vendida"}),i.jsx("th",{className:"p-2 border",children:"Ingreso"}),i.jsx("th",{className:"p-2 border",children:"COGS"}),i.jsx("th",{className:"p-2 border",children:"Utilidad"})]})}),i.jsx("tbody",{children:m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin datos"})}):m.map(x=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:x.productName}),i.jsx("td",{className:"p-2 border",children:x.qty}),i.jsx("td",{className:"p-2 border",children:Eh(x.revenue)}),i.jsx("td",{className:"p-2 border",children:Eh(x.cogs)}),i.jsx("td",{className:`p-2 border ${x.profit>=0?"text-green-700":"text-red-700"}`,children:Eh(x.profit)})]},x.productName))})]})})]}),l&&i.jsx("p",{className:"mt-2 text-sm",children:l})]})}const $r=t=>`C$${Number(t??0).toFixed(2)}`,c4e=()=>Br(new Date,"yyyy-MM-dd"),ea=t=>Number(t||0).toFixed(3);function u4e(){const[t,e]=g.useState(()=>{const le=new Date,De=new Date(le.getFullYear(),le.getMonth(),1);return Br(De,"yyyy-MM-dd")}),[r,n]=g.useState(c4e()),[a,s]=g.useState(!0),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState(!1),[m,p]=g.useState(null),[x,v]=g.useState(0),[y,b]=g.useState(0),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState({}),[F,k]=g.useState({}),{refreshKey:B,refresh:D}=Ec(),[X,he]=g.useState({}),[Ae,fe]=g.useState({}),[me,ne]=g.useState(!1),Pe=()=>ne(le=>!le),[Te,O]=g.useState(!1),K=()=>O(le=>!le),[q,U]=g.useState(!1),[W,J]=g.useState(!1),[M,H]=g.useState(!1),[te,ve]=g.useState(!1),[Q,Ke]=g.useState(!1),[ae,ee]=g.useState(!1),Fe=()=>U(le=>!le),ce=()=>J(le=>!le),be=()=>H(le=>!le),Ve=()=>ve(le=>!le),We=()=>Ke(le=>!le),pt=()=>ee(le=>!le),[wt,Ct]=g.useState("");g.useEffect(()=>{(async()=>{s(!0);const De=ar(yt(ke,"salesV2"),mr("date",">=",t),mr("date","<=",r)),He=await Qt(De),P=[];He.forEach(re=>{const ue=re.data(),$e=ue.date??"";if(Array.isArray(ue.items)&&ue.items.length>0){ue.items.forEach((rt,At)=>{const Je=String(rt.productName??"(sin nombre)"),ht=Number(rt.qty??0),Ot=Number(rt.lineFinal??0)||Math.max(0,Number(rt.unitPrice||0)*ht-Number(rt.discount||0));P.push({id:`${re.id}#${At}`,date:$e,productName:Je,quantity:ht,amount:Ot,allocations:Array.isArray(rt.allocations)?rt.allocations:ue.allocations,avgUnitCost:Number(rt.avgUnitCost??ue.avgUnitCost??0),measurement:rt.measurement??ue.measurement??"",type:ue.type??"CONTADO"})});return}P.push({id:re.id,date:$e,productName:ue.productName??"(sin nombre)",quantity:Number(ue.quantity??0),amount:Number(ue.amount??ue.amountCharged??0),allocations:Array.isArray(ue.allocations)?ue.allocations:[],avgUnitCost:Number(ue.avgUnitCost??0),measurement:ue.measurement??"",type:ue.type??"CONTADO"})}),l(P);const R=ar(yt(ke,"expenses"),mr("date",">=",t),mr("date","<=",r)),L=await Qt(R),G=[];L.forEach(re=>{const ue=re.data();G.push({id:re.id,date:ue.date??"",category:ue.category??"(sin categora)",description:ue.description??"",amount:Number(ue.amount??0),status:ue.status??"PAGADO",createdAt:ue.createdAt})}),u(G),s(!1)})()},[t,r,B]),g.useMemo(()=>{const le=o.reduce((L,G)=>L+(G.amount||0),0);let De=0;o.forEach(L=>{var G;(G=L.allocations)!=null&&G.length?De+=L.allocations.reduce((re,ue)=>re+Number(ue.lineCost||0),0):L.avgUnitCost&&L.quantity&&(De+=Number(L.avgUnitCost)*Number(L.quantity))});const He=le-De,P=c.reduce((L,G)=>L+(G.amount||0),0),R=He-P;return{revenue:le,cogsReal:De,grossProfit:He,expensesSum:P,netProfit:R}},[o,c]);const St=g.useMemo(()=>wt?o.filter(le=>(le.productName||"")===wt):o,[o,wt]),Rt=g.useMemo(()=>{const le=St.reduce((L,G)=>L+(G.amount||0),0);let De=0;St.forEach(L=>{var G;(G=L.allocations)!=null&&G.length?De+=L.allocations.reduce((re,ue)=>re+Number(ue.lineCost||0),0):L.avgUnitCost&&L.quantity&&(De+=Number(L.avgUnitCost)*Number(L.quantity))});const He=le-De,P=c.reduce((L,G)=>L+(G.amount||0),0),R=He-P;return{revenue:le,cogsReal:De,grossProfit:He,expensesSum:P,netProfit:R}},[St,c]),jt=g.useMemo(()=>{const le=St.filter(G=>G.type==="CONTADO"),De=le.reduce((G,re)=>G+(re.amount||0),0);let He=0;le.forEach(G=>{var re;(re=G.allocations)!=null&&re.length?He+=G.allocations.reduce((ue,$e)=>ue+Number($e.lineCost||0),0):G.avgUnitCost&&G.quantity&&(He+=Number(G.avgUnitCost)*Number(G.quantity))});const P=De-He,R=c.reduce((G,re)=>G+(re.amount||0),0),L=P-R;return{revenue:De,cogsReal:He,grossProfit:P,expensesSum:R,netProfit:L}},[St,c]),Ue=g.useMemo(()=>{const le=St.filter(R=>R.type==="CREDITO"),De=le.reduce((R,L)=>R+(L.amount||0),0);let He=0;le.forEach(R=>{var L;(L=R.allocations)!=null&&L.length?He+=R.allocations.reduce((G,re)=>G+Number(re.lineCost||0),0):R.avgUnitCost&&R.quantity&&(He+=Number(R.avgUnitCost)*Number(R.quantity))});const P=De-He;return{revenue:De,cogsReal:He,grossProfit:P}},[St]),Be=le=>String(le??"").toLowerCase().trim(),ye=le=>Number(le.qty??le.quantity??0),oe=le=>["lb","lbs","libra","libras"].includes(Be(le)),Z=le=>["unidad","unidades","ud","uds","pieza","piezas"].includes(Be(le)),Ne=le=>le?typeof le=="string"?le:le!=null&&le.toDate?Br(le.toDate(),"yyyy-MM-dd"):"":"";g.useEffect(()=>{(async()=>{h(!0);try{const De=await Qt(yt(ke,"customers_pollo")),He={};De.forEach(zt=>{const pr=zt.data();He[zt.id]=String(pr.name??"(sin nombre)")});const P=await Qt(yt(ke,"ar_movements_pollo")),R={},L={},G={},re={},ue={},$e=new Set,rt={},At={},Je={},ht={};let Ot=0,Se=0;const tt=zt=>{var pr;return zt!=null&&zt.date?String(zt.date):(pr=zt==null?void 0:zt.createdAt)!=null&&pr.toDate?Br(zt.createdAt.toDate(),"yyyy-MM-dd"):""};P.forEach(zt=>{var je,nt,dt;const pr=zt.data(),Gt=String(pr.customerId??"").trim();if(!Gt)return;const Qr=Number(pr.amount??0);R[Gt]=(R[Gt]||0)+Qr;const ln=String(pr.type??"").toUpperCase(),tn=String(pr.debtStatus??pr.creditStatus??pr.cycleStatus??pr.status??"").toUpperCase().trim(),mt=["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"].includes(tn),ur=pr.createdAt??null;if(ln==="ABONO"){Ot+=Math.abs(Qr);const Nt=tt(pr);Nt&&Nt>=t&&Nt<=r&&(Se+=Math.abs(Qr));const Qe=(je=pr==null?void 0:pr.ref)!=null&&je.saleId?String(pr.ref.saleId):"";Qe?(rt[Qe]=(rt[Qe]||0)+Math.abs(Qr),Nt&&Nt>=t&&Nt<=r&&(Je[Qe]=(Je[Qe]||0)+Math.abs(Qr)),$e.add(Qe)):(At[Gt]=(At[Gt]||0)+Math.abs(Qr),Nt&&Nt>=t&&Nt<=r&&(ht[Gt]=(ht[Gt]||0)+Math.abs(Qr)));const ot=G[Gt],_t=!(ot!=null&&ot.ts)||(ur!=null&&ur.toDate&&((nt=ot.ts)!=null&&nt.toDate)?ur.toDate()>ot.ts.toDate():!1);(!ot||_t)&&(G[Gt]={amount:Math.abs(Qr),date:pr.date??"",ts:ur})}if(ln==="CARGO"){const Nt=(dt=pr==null?void 0:pr.ref)!=null&&dt.saleId?String(pr.ref.saleId):"";Nt&&(re[Gt]||(re[Gt]=new Set),re[Gt].add(Nt),mt||(ue[Gt]||(ue[Gt]=new Set),ue[Gt].add(Nt)),$e.add(Nt)),mt||(L[Gt]=(L[Gt]||0)+Math.abs(Qr))}});const xt=new Map;await Promise.all(Array.from($e).map(async zt=>{const pr=await si(Jt(ke,"salesV2",zt));pr.exists()&&xt.set(zt,pr.data())}));let kt=0,tr=0;const nr=zt=>{const pr=Number(zt.qty??zt.quantity??0);return Number(zt.lineFinal??0)||Math.max(0,Number(zt.unitPrice||0)*pr-Number(zt.discount||0))},cr=zt=>{if(Array.isArray(zt.items)&&zt.items.length>0){let ln=0,tn=0;return zt.items.forEach(mt=>{const ur=Number(mt.qty??mt.quantity??0);if(ln+=nr(mt),Array.isArray(mt.allocations)&&mt.allocations.length>0)tn+=mt.allocations.reduce((je,nt)=>je+Number(nt.lineCost||0),0);else{const je=Number(mt.avgUnitCost??zt.avgUnitCost??0);tn+=je*ur}}),{total:ln,cogs:tn}}const pr=Number(zt.quantity??0),Gt=Number(zt.amount??zt.amountCharged??0)||0;let Qr=0;return Array.isArray(zt.allocations)&&zt.allocations.length>0?Qr=zt.allocations.reduce((ln,tn)=>ln+Number(tn.lineCost||0),0):zt.avgUnitCost&&(Qr=Number(zt.avgUnitCost)*pr),{total:Gt,cogs:Qr}},Nr=new Map;xt.forEach((zt,pr)=>{const{total:Gt,cogs:Qr}=cr(zt);Nr.set(pr,{total:Gt,cogs:Qr,grossProfit:Gt-Qr})});const mn={},Mr={},Vr={},fn={};Object.keys(rt).forEach(zt=>{const pr=Nr.get(zt);if(!(pr!=null&&pr.total))return;const Gt=Number(rt[zt]||0);Mr[zt]=Gt;const Qr=Math.min(1,Gt/pr.total),ln=pr.grossProfit*Qr;mn[zt]=ln,kt+=ln}),Object.keys(Je).forEach(zt=>{const pr=Nr.get(zt);if(!(pr!=null&&pr.total))return;const Gt=Number(Je[zt]||0);fn[zt]=Gt;const Qr=Math.min(1,Gt/pr.total),ln=pr.grossProfit*Qr;Vr[zt]=ln,tr+=ln}),Object.keys(At).forEach(zt=>{const pr=re[zt];if(!pr||pr.size===0)return;let Gt=0,Qr=0,ln=0,tn=0;pr.forEach(dt=>{const Nt=Nr.get(dt);Nt&&(Gt+=Nt.total,Qr+=Nt.grossProfit,Mr[dt]&&(ln+=Math.min(Nt.total,Mr[dt])),tn+=mn[dt]||0)});const mt=Math.max(0,Gt-ln),ur=Math.max(0,Qr-tn);if(!mt||!ur)return;const je=Number(At[zt]||0),nt=Math.min(1,je/mt);kt+=ur*nt}),Object.keys(ht).forEach(zt=>{const pr=re[zt];if(!pr||pr.size===0)return;let Gt=0,Qr=0,ln=0,tn=0;pr.forEach(dt=>{const Nt=Nr.get(dt);Nt&&(Gt+=Nt.total,Qr+=Nt.grossProfit,fn[dt]&&(ln+=Math.min(Nt.total,fn[dt])),tn+=Vr[dt]||0)});const mt=Math.max(0,Gt-ln),ur=Math.max(0,Qr-tn);if(!mt||!ur)return;const je=Number(ht[zt]||0),nt=Math.min(1,je/mt);tr+=ur*nt});const Zn=[];Object.keys(R).forEach(zt=>{const pr=Number(R[zt]||0);if(pr<=0)return;const Gt=new Map;let Qr=0,ln=0,tn="";(ue[zt]||new Set).forEach(nt=>{const dt=xt.get(nt);if(!dt)return;const Nt=String(dt.date??"");Nt&&(!tn||Nt>tn)&&(tn=Nt),(Array.isArray(dt.items)&&dt.items.length>0?dt.items:[{productName:dt.productName,qty:dt.quantity,unitPrice:dt.unitPrice,discount:dt.discount,lineFinal:dt.amount??dt.amountCharged,measurement:dt.measurement}]).forEach(ot=>{const _t=String(ot.productName??"(sin nombre)"),et=Number(ot.qty??ot.quantity??0),It=String(ot.measurement??""),Vt=Number(ot.lineFinal??0)||Math.max(0,Number(ot.unitPrice||0)*et-Number(ot.discount||0));oe(It)?Qr+=et:ln+=et;const rr=`${_t}||${It}`,er=Gt.get(rr)||{productName:_t,qty:0,amount:0,measurement:It};er.qty+=et,er.amount+=Vt,Gt.set(rr,er)})});const ur=G[zt],je=Number(L[zt]||0);Zn.push({customerId:zt,name:He[zt]||"(sin nombre)",balance:pr,globalBalance:je>0?je:pr,lbs:Qr,units:ln,lastPaymentAmount:Number((ur==null?void 0:ur.amount)||0),lastSaleDate:tn||"",lastPaymentDate:Ne((ur==null?void 0:ur.ts)||(ur==null?void 0:ur.date)),products:Array.from(Gt.values()).sort((nt,dt)=>nt.productName.localeCompare(dt.productName))})});const Bn=Zn.filter(zt=>zt.products.length);Bn.sort((zt,pr)=>pr.balance-zt.balance),f(Bn),v(Ot),b(Se),j(kt),_(tr)}catch(De){console.error("Error cargando saldos pendientes:",De),f([]),v(0),b(0),_(0)}finally{h(!1)}})()},[B,t,r]),g.useEffect(()=>{(async()=>{try{const De=await Qt(ar(yt(ke,"inventory_batches"))),He=dS(t,"yyyy-MM-dd",new Date),P=dS(r,"yyyy-MM-dd",new Date),R=Br(Pd(He),"yyyy-MM-dd"),L=Br(jd(P),"yyyy-MM-dd"),G={};De.forEach(re=>{var Ot;const ue=re.data(),$e=String(ue.productName??"(sin nombre)"),rt=Number(ue.quantity??0),At=Number(ue.remaining??0),Je=(Ot=ue==null?void 0:ue.date)!=null&&Ot.toDate?Br(ue.date.toDate(),"yyyy-MM-dd"):String((ue==null?void 0:ue.date)??(ue==null?void 0:ue.createdAt)??""),ht=Je&&Je>=R&&Je<=L;G[$e]||(G[$e]={incomingQty:0,remainingQty:0}),ht&&(G[$e].incomingQty+=rt),G[$e].remainingQty+=At}),E(G)}catch(De){console.error("Error cargando inventario:",De),E({})}})()},[B,t,r]),g.useMemo(()=>o.reduce((le,De)=>oe(De.measurement)?le+ye(De):le,0),[o]),g.useMemo(()=>St.reduce((le,De)=>oe(De.measurement)?le+ye(De):le,0),[St]);const Re=g.useMemo(()=>St.filter(le=>le.type==="CONTADO"),[St]),ge=g.useMemo(()=>St.filter(le=>le.type==="CREDITO"),[St]),Xe=g.useMemo(()=>Re.reduce((le,De)=>le+(De.amount||0),0),[Re]),vt=g.useMemo(()=>ge.reduce((le,De)=>le+(De.amount||0),0),[ge]),it=g.useMemo(()=>d.reduce((le,De)=>le+Number(De.balance||0),0),[d]),de=g.useMemo(()=>jt.revenue,[jt.revenue]),Ce=g.useMemo(()=>Xe,[Xe]),Ye=g.useMemo(()=>Xe+y,[Xe,y]),ft=g.useMemo(()=>jt.grossProfit+I,[jt.grossProfit,I]),we=g.useMemo(()=>jt.netProfit+I,[jt.netProfit,I]),Le=g.useMemo(()=>Re.reduce((le,De)=>oe(De.measurement)?le+ye(De):le,0),[Re]),gt=g.useMemo(()=>ge.reduce((le,De)=>oe(De.measurement)?le+ye(De):le,0),[ge]);g.useMemo(()=>o.reduce((le,De)=>Z(De.measurement)?le+ye(De):le,0),[o]),g.useMemo(()=>St.reduce((le,De)=>Z(De.measurement)?le+ye(De):le,0),[St]);const Ut=g.useMemo(()=>Re.reduce((le,De)=>Z(De.measurement)?le+ye(De):le,0),[Re]),Mt=g.useMemo(()=>ge.reduce((le,De)=>Z(De.measurement)?le+ye(De):le,0),[ge]),Yt=g.useMemo(()=>Array.from(new Set(o.map(le=>le.productName||"(sin nombre)"))).sort(),[o]),st=g.useMemo(()=>{var De;const le=new Map;for(const He of St){const P=He.productName||"(sin nombre)";le.has(P)||le.set(P,{productName:P,units:0,revenue:0,cogs:0,profit:0,firstDate:He.date||"",lastDate:He.date||""});const R=le.get(P);R.units+=Number(He.quantity||0),R.revenue+=Number(He.amount||0),(!R.firstDate||He.date<(R.firstDate||He.date))&&(R.firstDate=He.date),(!R.lastDate||He.date>(R.lastDate||He.date))&&(R.lastDate=He.date);let L=0;(De=He.allocations)!=null&&De.length?L=He.allocations.reduce((G,re)=>G+Number(re.lineCost||0),0):He.avgUnitCost&&(L=Number(He.avgUnitCost)*Number(He.quantity||0)),R.cogs+=L,R.profit=R.revenue-R.cogs}return Array.from(le.values()).sort((He,P)=>He.productName.localeCompare(P.productName))},[St]),_e=g.useMemo(()=>[...st].sort((le,De)=>De.units-le.units).slice(0,3).map((le,De)=>({idx:De+1,name:le.productName,units:le.units})),[st]),xe=le=>he(De=>({...De,[le]:!De[le]})),ie=le=>fe(De=>({...De,[le]:!De[le]})),Oe=()=>{const le=new qr({unit:"pt",format:"a4"}),De="Dashboard Financiero",He=`Rango: ${t} a ${r}`,P=wt?`Producto: ${wt}`:"Producto: Todos";le.setFontSize(16),le.text(De,40,40),le.setFontSize(10),le.text(He,40,58),le.text(P,40,72);let R=90;const L=()=>{var re;R=(re=le.lastAutoTable)!=null&&re.finalY?le.lastAutoTable.finalY+18:R+18},G=(re,ue)=>{ue.length&&(le.setFontSize(11),le.text(re,40,R),R+=12,O0(le,{startY:R,head:[["KPI","Valor"]],body:ue,styles:{fontSize:9},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L())};G("KPIs Generales",[["Ventas (rango)",$r(Rt.revenue)],["Costo",$r(Rt.cogsReal)],["Utilidad Bruta",$r(Rt.grossProfit)],["Gastos",$r(Rt.expensesSum)],["Utilidad Neta",$r(Rt.netProfit)]]),G("KPIs Cash",[["Ventas Cash",$r(de)],["Costo Cash",$r(jt.cogsReal)],["Utilidad Bruta Cash",$r(jt.grossProfit)]]),G("KPIs Crdito",[["Ventas Crdito",$r(Ue.revenue)],["Costo Crdito",$r(Ue.cogsReal)],["Utilidad Bruta Crdito",$r(Ue.grossProfit)]]),G("Fondos y Utilidades",[["CxC",$r(it)],["Recaudacin (Abonos)",$r(x)],["Recaudacin a la fecha",$r(y)],["Recolectado Cash + Abonos",$r(Ye)],["Utilidad Neta Crdito (Caja)",$r(I)],["Utilidad Bruta Cash + Crdito",$r(ft)],["Gastos",$r(jt.expensesSum)],["Utilidad Neta Cash + Crdito",$r(we)]]),G("KPIs de Volumen y Ventas",[["Ventas Cash",$r(Ce)],["Ventas Crdito",$r(vt)],["Libras Cash",ea(Le)],["Libras Crdito",ea(gt)],["Libras Cash + Crdito",ea(Le+gt)],["Unidades Cash",ea(Ut)],["Unidades Crdito",ea(Mt)],["Unidades Cash + Crdito",ea(Ut+Mt)]]),_e.length>0&&(le.setFontSize(11),le.text("Top productos por unidades",40,R),R+=12,O0(le,{startY:R,head:[["#","Producto","Cantidad"]],body:_e.map(re=>[String(re.idx),re.name,ea(re.units)]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L()),O0(le,{startY:R,head:[["Cliente","Libras","Unidades","Saldo Global","ltimo abono","Saldo pendiente","Fecha ult. abono"]],body:d.map(re=>[re.name,ea(re.lbs),ea(re.units),$r(re.globalBalance),$r(re.lastPaymentAmount),$r(re.balance),re.lastPaymentDate||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]},didDrawPage:re=>{re.pageNumber>1&&(le.setFontSize(10),le.text(De,40,30))}}),L(),O0(le,{startY:R,head:[["Producto","Ingresado","Disponibilidad","Fechas","Cantidad","Venta","Costo","Utilidad"]],body:st.map(re=>{var ue,$e;return[re.productName,ea(((ue=S[re.productName])==null?void 0:ue.incomingQty)||0),ea((($e=S[re.productName])==null?void 0:$e.remainingQty)||0),re.firstDate&&re.lastDate?re.firstDate===re.lastDate?re.firstDate:`${re.firstDate}  ${re.lastDate}`:"",ea(re.units),$r(re.revenue),$r(re.cogs),$r(re.profit)]}),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),L(),O0(le,{startY:R,head:[["Fecha","Categora","Descripcin","Monto","Estado"]],body:c.map(re=>[re.date,re.category,re.description||"",$r(re.amount),re.status||""]),styles:{fontSize:8},headStyles:{fillColor:[245,245,245],textColor:[0,0,0]}}),le.save(`dashboard_${t}_a_${r}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-4 sm:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-2",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Dashboard Financiero"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:Oe,className:"px-3 py-2 rounded-lg text-sm bg-gray-900 text-white hover:bg-black",children:"Exportar PDF"}),i.jsx(_c,{onClick:D,loading:a})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:t,onChange:le=>e(le.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:r,onChange:le=>n(le.target.value)})]})]}),a?i.jsx("p",{children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:Fe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Kpi Financiero"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Ventas: ",i.jsx("b",{children:$r(Rt.revenue)}),"  Utilidad Neta:"," ",i.jsx("b",{children:$r(Rt.netProfit)})]})]}),i.jsx("div",{className:"text-gray-500",children:q?"Cerrar":"Ver"})]}),q&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"flex gap-2 mb-2 items-center",children:i.jsxs("select",{className:"w-full border rounded px-2 py-2 text-sm",value:wt,onChange:le=>Ct(le.target.value),children:[i.jsx("option",{value:"",children:"Todos los productos"}),Yt.map(le=>i.jsx("option",{value:le,children:le},le))]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:Ve,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Ventas cash - Credito"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Resumen"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:te?"Cerrar":"Ver"})]}),te&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(Ya,{title:"Ventas",subtitle:"Ventas cash",value:$r(de),valueClass:"text-[#1E4D2B]"}),i.jsx(Ya,{title:"Costo",value:$r(jt.cogsReal)}),i.jsx(Ya,{title:"Utilidad Bruta Cash",value:$r(jt.grossProfit),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx(Ya,{title:"Ventas Crdito",value:$r(Ue.revenue)}),i.jsx(Ya,{title:"Costo",value:$r(Ue.cogsReal),negative:!0}),i.jsx(Ya,{title:"Utilidad Bruta Crdito",value:$r(Ue.grossProfit),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:We,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Fondos"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Liquidez"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:Q?"Cerrar":"Ver"})]}),Q&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[i.jsx(Ya,{title:"CxC",value:$r(it)}),i.jsx(Ya,{title:"Recaudacin Global(Abonos)",value:$r(x)}),i.jsx(Ya,{title:"Recaudacin a la fecha",value:$r(y)}),i.jsx(Ya,{title:"Recolectado Cash + Abonos",value:$r(Ye),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(Ya,{title:"Utilidad Neta Crdito (Caja)",value:$r(I),valueClass:"text-[#BF5700]"}),i.jsx(Ya,{title:"Utilidad Bruta Cash + Crdito",value:$r(ft),positive:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(Ya,{title:"Gastos",value:$r(jt.expensesSum),negative:!0}),i.jsx(Ya,{title:"Utilidad Neta Cash + Crdito",value:$r(we),positive:!0})]})]})]}),i.jsxs("div",{className:"rounded-3xl bg-white shadow-xl border border-gray-100 p-3 sm:p-4 space-y-3",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between text-left",onClick:pt,children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800",children:"Detalles"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Mtricas adicionales"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:ae?"Cerrar":"Ver"})]}),ae&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Dl,{title:"Ventas Cash",value:$r(Ce)}),i.jsx(Dl,{title:"Ventas Crdito",value:$r(vt)}),i.jsx(Dl,{title:"Libras Cash",value:ea(Le)}),i.jsx(Dl,{title:"Libras Crdito",value:ea(gt)}),i.jsx(Dl,{title:"Unidades Cash",value:ea(Ut)}),i.jsx(Dl,{title:"Unidades Crdito",value:ea(Mt)})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(Dl,{title:"Libras Cash + Credito",value:ea(Le+gt)}),i.jsx(Dl,{title:"Unidades Cash + Credito",value:ea(Ut+Mt)}),i.jsx(GV,{title:"Productos ms vendidos",items:_e.map(le=>({key:`${le.idx}`,label:`${le.idx}. ${le.name}`,value:`(${ea(le.units)})`}))})]})]})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Ya,{title:"Ventas Cash",value:$r(de),positive:!0}),i.jsx(Ya,{title:"Costo",value:$r(jt.cogsReal),negative:!0}),i.jsx(Ya,{title:"Utilidad Bruta Cash",value:$r(jt.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Ya,{title:"Ventas Crdito",value:$r(Ue.revenue),positive:!0}),i.jsx(Ya,{title:"Costo",value:$r(Ue.cogsReal),negative:!0}),i.jsx(Ya,{title:"Utilidad Bruta Crdito",value:$r(Ue.grossProfit),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Ya,{title:"CxC",value:$r(it),negative:!0}),i.jsx(Ya,{title:"Recaudacin Global(Abonos)",value:$r(x),positive:!0}),i.jsx(Ya,{title:"Recaudacin a la fecha",value:$r(y),positive:!0}),i.jsx(Ya,{title:"Recolectado Cash + Abonos",value:$r(Ye),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-4 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Ya,{title:"Utilidad Neta Crdito (Caja)",value:$r(I),valueClass:"text-[#BF5700]"}),i.jsx(Ya,{title:"Utilidad Bruta Cash + Crdito",value:$r(ft),positive:!0}),i.jsx(Ya,{title:"Gastos",value:$r(jt.expensesSum),negative:!0}),i.jsx(Ya,{title:"Utilidad Neta Cash + Crdito",value:$r(we),positive:!0})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3 rounded-2xl shadow-lg p-3 sm:p-4 bg-gray-50",children:[i.jsx(Dl,{title:"Ventas Cash",value:$r(Ce)}),i.jsx(Dl,{title:"Ventas Crdito",value:$r(vt)}),i.jsx(Dl,{title:"Libras Cash",value:ea(Le)}),i.jsx(Dl,{title:"Libras Crdito",value:ea(gt)}),i.jsx(Dl,{title:"Unidades Cash",value:ea(Ut)}),i.jsx(Dl,{title:"Unidades Crdito",value:ea(Mt)})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6 rounded-lg shadow-2xl p-3 sm:p-4 bg-gray-50",children:[i.jsx(Dl,{title:"Libras Cash + Credito",value:ea(Le+gt)}),i.jsx(Dl,{title:"Unidades Cash + Credito",value:ea(Ut+Mt)}),i.jsx(GV,{title:"Productos ms vendidos",items:_e.map(le=>({key:`${le.idx}`,label:`${le.idx}. ${le.name}`,value:`(${ea(le.units)})`}))})]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:ce,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Saldos pendientes"}),i.jsx("div",{className:"text-gray-500",children:W?"Cerrar":"Ver"})]}),W&&i.jsx("div",{className:"border rounded-2xl p-3 sm:p-4 bg-gray-50 mt-3",children:A?i.jsx("div",{className:"text-sm text-gray-600",children:"Cargando saldos"}):d.length===0?i.jsx("div",{className:"text-sm text-gray-600",children:"Sin saldos pendientes."}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Libras"}),i.jsx("th",{className:"border p-2",children:"Unidades"}),i.jsx("th",{className:"border p-2",children:"Saldo Global"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:d.map(le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1 text-left",children:le.name}),i.jsx("td",{className:"border p-1",children:ea(le.lbs)}),i.jsx("td",{className:"border p-1",children:ea(le.units)}),i.jsx("td",{className:"border p-1",children:$r(le.globalBalance)}),i.jsx("td",{className:"border p-1",children:$r(le.lastPaymentAmount)}),i.jsx("td",{className:"border p-1",children:$r(le.balance)}),i.jsx("td",{className:"border p-1",children:le.lastPaymentDate||""}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",onClick:()=>p(le),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},le.customerId))})]})})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{type:"button",onClick:be,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsx("div",{className:"font-semibold",children:"Ventas y Gastos"}),i.jsx("div",{className:"text-gray-500",children:M?"Cerrar":"Ver"})]}),M&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Ventas"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-6",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Ingresado Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Disponibilidad"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"}),i.jsx("th",{className:"border p-2",children:"Cantidad Lb/Un"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Costo"}),i.jsx("th",{className:"border p-2",children:"Utilidad"})]})}),i.jsxs("tbody",{children:[st.map(le=>{var De,He;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:le.productName}),i.jsx("td",{className:"border p-1",children:ea(((De=S[le.productName])==null?void 0:De.incomingQty)||0)}),i.jsx("td",{className:"border p-1",children:ea(((He=S[le.productName])==null?void 0:He.remainingQty)||0)}),i.jsx("td",{className:"border p-1",children:le.firstDate&&le.lastDate?le.firstDate===le.lastDate?le.firstDate:`${le.firstDate}  ${le.lastDate}`:""}),i.jsx("td",{className:"border p-1",children:ea(le.units)}),i.jsx("td",{className:"border p-1",children:$r(le.revenue)}),i.jsx("td",{className:"border p-1",children:$r(le.cogs)}),i.jsx("td",{className:`border p-1 ${le.profit>=0?"text-green-700":"text-red-700"}`,children:$r(le.profit)})]},le.productName)}),st.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin datos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:Pe,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Ventas por producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[st.length," productos"]})]}),i.jsx("div",{className:"text-gray-500",children:me?"Cerrar":"Ver"})]}),me&&i.jsx("div",{className:"space-y-2 mt-3",children:st.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin datos en el rango seleccionado."}):st.map(le=>{var P,R,L,G;const De=!!X[le.productName],He=le.firstDate&&le.lastDate?le.firstDate===le.lastDate?le.firstDate:`${le.firstDate}  ${le.lastDate}`:"";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>xe(le.productName),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:le.productName}),i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Libras/Unidades"}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendidas: ",i.jsx("b",{children:ea(le.units)}),"  Disponible:"," ",i.jsx("b",{className:((P=S[le.productName])==null?void 0:P.remainingQty)>0?"text-green-700":"text-red-700",children:ea(((R=S[le.productName])==null?void 0:R.remainingQty)||0)})]})]}),i.jsx("div",{className:"text-gray-500 text-xs pt-0.10",children:De?"Cerrar":"Ver"})]}),De&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(Ku,{label:"Lb/Un Ingresadas",value:ea(((L=S[le.productName])==null?void 0:L.incomingQty)||0)}),i.jsx(Ku,{label:"Lb/Un Disponibles",value:ea(((G=S[le.productName])==null?void 0:G.remainingQty)||0)}),i.jsx(Ku,{label:"Fechas Venta",value:He}),i.jsx(Ku,{label:"Lb/Un Vendidas",value:ea(le.units)}),i.jsx(Ku,{label:"Facturado al costo",value:$r(le.cogs)}),i.jsx(Ku,{label:"Monto Venta",value:$r(le.revenue)}),i.jsx(Ku,{label:"Utilidad bruta",value:$r(le.profit),valueClass:le.profit>=0?"text-green-700 font-semibold":"text-red-700 font-semibold"})]})})]},le.productName)})})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Categora"}),i.jsx("th",{className:"border p-2",children:"Descripcin"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Estado"})]})}),i.jsxs("tbody",{children:[c.map(le=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:le.date}),i.jsx("td",{className:"border p-1",children:le.category}),i.jsx("td",{className:"border p-1",children:le.description}),i.jsx("td",{className:"border p-1",children:$r(le.amount)}),i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${le.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:le.status})})]},le.id)),c.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-3 text-center text-gray-500",children:"Sin gastos en el rango seleccionado."})})]})]})}),i.jsxs("div",{className:"md:hidden mb-6",children:[i.jsxs("button",{type:"button",onClick:K,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Gastos del periodo"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[c.length," registros"]})]}),i.jsx("div",{className:"text-gray-500",children:Te?"Cerrar":"Abrir"})]}),Te&&i.jsx("div",{className:"space-y-2 mt-3",children:c.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-sm text-gray-500 bg-gray-50",children:"Sin gastos en el rango seleccionado."}):c.map(le=>{const De=!!Ae[le.id],He=le.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"border rounded-2xl bg-white shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>ie(le.id),className:"w-full text-left px-3 py-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:le.category}),i.jsx("span",{className:`px-2 py-0.5 rounded text-[11px] ${He}`,children:le.status})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[le.date,"  ",i.jsx("b",{children:$r(le.amount)})]})]}),i.jsx("div",{className:"text-gray-500 text-sm pt-0.5",children:De?"Cerrar":"Ver"})]}),De&&i.jsx("div",{className:"px-3 pb-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsx(Ku,{label:"Fecha",value:le.date}),i.jsx(Ku,{label:"Categora",value:le.category}),i.jsx(Ku,{label:"Descripcin",value:le.description||""}),i.jsx(Ku,{label:"Monto",value:$r(le.amount)}),i.jsx(Ku,{label:"Estado",value:le.status||""})]})})]},le.id)})})]})]})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:m.name}),i.jsx("button",{type:"button",onClick:()=>p(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Libras/Unidades"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Fecha Venta"})]})}),i.jsx("tbody",{children:m.products.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin productos asociados."})}):m.products.map(le=>i.jsxs("tr",{children:[i.jsx("td",{className:"border p-1",children:le.productName}),i.jsx("td",{className:"border p-1 text-center",children:ea(le.qty)}),i.jsx("td",{className:"border p-1 text-center",children:$r(le.amount)}),i.jsx("td",{className:"border p-1 text-center",children:m.lastSaleDate||""})]},`${le.productName}-${le.measurement}`))})]})})]})})]})}function Ya({title:t,value:e,positive:r,negative:n,valueClass:a,subtitle:s}){const o=a||(r?"text-[#568203]":n?"text-[#AB274F]":"");return i.jsxs("div",{className:"border rounded-2xl p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),s?i.jsx("div",{className:"text-[11px] sm:text-[12px] text-gray-400",children:s}):null,i.jsx("div",{className:`text-[26px] sm:text-[30px] font-bold ${o}`,children:e})]})}function Dl({title:t,value:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[13px] sm:text-[17px] text-gray-500",children:t}),i.jsx("div",{className:"text-[18px] sm:text-[20px] font-semibold",children:e})]})}function GV({title:t,items:e}){return i.jsxs("div",{className:"border rounded-lg p-3 bg-white",children:[i.jsx("div",{className:"text-[11px] text-gray-500 mb-1",children:t}),i.jsx("ul",{className:"text-sm leading-snug list-none pl-0 m-0 space-y-0.5",children:e.length===0?i.jsx("li",{className:"text-gray-500",children:""}):e.map(r=>i.jsxs("li",{children:[r.label," ",r.value??""]},r.key))})]})}function Ku({label:t,value:e,valueClass:r}){return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:t}),i.jsx("div",{className:`text-sm mt-0.5 ${r||""}`,children:e})]})}const kC=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal","Varios"],lx=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function d4e(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[o,l]=g.useState(Br(new Date,"yyyy-MM-dd")),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(0),[m,p]=g.useState("PENDIENTE"),[x,v]=g.useState(""),[y,b]=g.useState([]),[w,j]=g.useState(!0),[I,_]=g.useState(""),[S,E]=g.useState(null),[F,k]=g.useState(""),[B,D]=g.useState(""),[X,he]=g.useState(""),[Ae,fe]=g.useState(0),[me,ne]=g.useState("PENDIENTE"),[Pe,Te]=g.useState(""),[O,K]=g.useState(!1),q=()=>K(ce=>!ce),[U,W]=g.useState(null),J=ce=>W(be=>be===ce?null:ce);g.useEffect(()=>{(async()=>{j(!0),_("");try{const ce=ar(yt(ke,"expenses"),wn("date","desc")),be=await Qt(ce),Ve=[];be.forEach(We=>{const pt=We.data();Ve.push({id:We.id,date:pt.date||Br(new Date,"yyyy-MM-dd"),category:pt.category||"",description:pt.description||"",amount:Number(pt.amount||0),status:pt.status||"PENDIENTE",notes:pt.notes||"",createdAt:pt.createdAt??xr.now()})}),b(Ve)}catch(ce){console.error(ce),_(" Error al cargar gastos")}finally{j(!1)}})()},[t]);const M=g.useMemo(()=>y.filter(ce=>!(r&&ce.date<r||a&&ce.date>a)),[y,r,a]),H=g.useMemo(()=>{const ce=M.reduce((We,pt)=>We+(pt.amount||0),0),be=M.filter(We=>We.status==="PAGADO").reduce((We,pt)=>We+(pt.amount||0),0),Ve=ce-be;return{total:ce,pagado:be,pendiente:Ve}},[M]),te=()=>{l(Br(new Date,"yyyy-MM-dd")),u(""),f(""),h(0),p("PENDIENTE"),v("")},ve=async ce=>{if(ce.preventDefault(),_(""),!c)return _("Selecciona una categora.");if(!d.trim())return _("Ingresa una descripcin.");if(!A||A<=0)return _("Ingresa un monto vlido.");try{const be={date:o,category:c,description:d.trim(),amount:Number(Number(A||0).toFixed(2)),status:m,notes:x||"",createdAt:xr.now()},Ve=await $n(yt(ke,"expenses"),be);b(We=>[{id:Ve.id,...be},...We]),te(),_(" Gasto registrado")}catch(be){console.error(be),_(" Error al guardar gasto")}},Q=ce=>{_(""),E(ce.id),k(ce.date),D(ce.category||""),he(ce.description||""),fe(Number(ce.amount||0)),ne(ce.status||"PENDIENTE"),Te(ce.notes||"")},Ke=()=>{E(null),k(""),D(""),he(""),fe(0),ne("PENDIENTE"),Te("")},ae=async()=>{if(S){if(!B)return _("Selecciona una categora.");if(!X.trim())return _("Ingresa una descripcin.");if(!Ae||Ae<=0)return _("Ingresa un monto vlido.");try{const ce={date:F,category:B,description:X.trim(),amount:Number(Number(Ae||0).toFixed(2)),status:me,notes:Pe||""};await _n(Jt(ke,"expenses",S),ce),b(be=>be.map(Ve=>Ve.id===S?{...Ve,...ce}:Ve)),Ke(),_(" Gasto actualizado")}catch(ce){console.error(ce),_(" Error al actualizar gasto")}}},ee=async ce=>{if(confirm(`Eliminar el gasto "${ce.description}"?`))try{await Mn(Jt(ke,"expenses",ce.id)),b(Ve=>Ve.filter(We=>We.id!==ce.id)),_(" Gasto borrado")}catch(Ve){console.error(Ve),_(" Error al borrar gasto")}},Fe=ce=>ce==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700";return i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Gastos (Pollo)"}),i.jsx(_c,{onClick:e,loading:w})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ce=>n(ce.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ce=>s(ce.target.value)})]})]}),i.jsxs("div",{className:"sm:ml-auto text-sm bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",lx(H.total)]}),i.jsxs("div",{children:["Pagado: ",lx(H.pagado)]}),i.jsxs("div",{children:["Pendiente: ",lx(H.pendiente)]})]})]}),i.jsxs("div",{className:"md:hidden mb-4",children:[i.jsxs("button",{type:"button",onClick:q,className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white border rounded-2xl",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Crear gasto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha: ",o,"  Monto: ",A===0?"":lx(A)]})]}),i.jsx("div",{className:"text-gray-500",children:O?"":""})]}),O&&i.jsxs("form",{onSubmit:ve,className:"mt-3 bg-white p-4 rounded-2xl shadow-2xl border grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ce=>l(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ce=>u(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ce=>f(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ce=>{const be=String(ce.target.value||"").replace(",","."),Ve=parseFloat(be);h(Number.isFinite(Ve)?Math.max(0,Ve):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ce=>p(ce.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:x,onChange:ce=>v(ce.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[x.length,"/500"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})]}),i.jsx("div",{className:"hidden md:block",children:i.jsxs("form",{onSubmit:ve,className:"bg-white p-4 rounded-2xl shadow-2xl border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:o,onChange:ce=>l(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:c,onChange:ce=>u(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:d,onChange:ce=>f(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:A===0?"":A,onChange:ce=>{const be=String(ce.target.value||"").replace(",","."),Ve=parseFloat(be);h(Number.isFinite(Ve)?Math.max(0,Ve):0)},placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:ce=>p(ce.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:x,onChange:ce=>v(ce.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[x.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"}),i.jsx("button",{type:"button",className:"bg-gray-200 px-4 py-2 rounded hover:bg-gray-300",onClick:te,children:"Limpiar"})]})]})}),i.jsx("div",{className:"block md:hidden space-y-3",children:w?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):M.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin gastos en el rango seleccionado."}):M.map(ce=>{const be=U===ce.id,Ve=S===ce.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full text-left px-3 py-3 flex items-start justify-between bg-white",onClick:()=>J(ce.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:ce.description}),i.jsxs("div",{className:"text-xs text-gray-500",children:[ce.category||"","  ",ce.date]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold",children:lx(ce.amount)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Fe(ce.status)}`,children:ce.status})]})]}),be&&i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:ce.notes?ce.notes:""}),Ve?i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 text-sm",children:[i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:F,onChange:We=>k(We.target.value)}),i.jsxs("select",{className:"w-full border p-2 rounded",value:B,onChange:We=>D(We.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(We=>i.jsx("option",{value:We,children:We},We))]}),i.jsx("input",{className:"w-full border p-2 rounded",value:X,onChange:We=>he(We.target.value)}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:Number.isNaN(Ae)?"":Ae,onChange:We=>{const pt=String(We.target.value||"").replace(",","."),wt=parseFloat(pt);fe(Number.isFinite(wt)?Math.max(0,wt):0)}}),i.jsxs("select",{className:"w-full border p-2 rounded",value:me,onChange:We=>ne(We.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Pe,onChange:We=>Te(We.target.value),maxLength:500}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ae,children:"Guardar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Ke,children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Q(ce),children:"Editar"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(ce),children:"Borrar"})]})]})]},ce.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded-2xl shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:w?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):M.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):M.map(ce=>{const be=S===ce.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:be?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:F,onChange:Ve=>k(Ve.target.value)}):ce.date}),i.jsx("td",{className:"p-2 border",children:be?i.jsxs("select",{className:"w-full border p-1 rounded",value:B,onChange:Ve=>D(Ve.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),kC.map(Ve=>i.jsx("option",{value:Ve,children:Ve},Ve))]}):ce.category||""}),i.jsx("td",{className:"p-2 border",children:be?i.jsx("input",{className:"w-full border p-1 rounded",value:X,onChange:Ve=>he(Ve.target.value)}):i.jsx("span",{title:ce.description,children:ce.description.length>45?ce.description.slice(0,45)+"":ce.description})}),i.jsx("td",{className:"p-2 border",children:be?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ae)?"":Ae,onChange:Ve=>{const We=String(Ve.target.value||"").replace(",","."),pt=parseFloat(We);fe(Number.isFinite(pt)?Math.max(0,pt):0)}}):lx(ce.amount)}),i.jsx("td",{className:"p-2 border",children:be?i.jsxs("select",{className:"w-full border p-1 rounded",value:me,onChange:Ve=>ne(Ve.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Fe(ce.status)}`,children:ce.status})}),i.jsx("td",{className:"p-2 border",children:be?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:Pe,onChange:Ve=>Te(Ve.target.value),maxLength:500}):i.jsx("span",{title:ce.notes||"",children:(ce.notes||"").length>45?(ce.notes||"").slice(0,45)+"":ce.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:be?i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:ae,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ke,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Q(ce),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>ee(ce),children:"Borrar"})]})})})]},ce.id)})})]})}),I&&i.jsx("p",{className:"mt-2 text-sm",children:I})]})}function jS(t){return(t||"").trim().toLowerCase()}async function Vre(){const t=await Qt(yt(ke,"products")),e=new Map;return t.forEach(r=>{const n=r.data(),a=jS(n.name??n.productName);a&&e.set(a,r.id)}),e}async function f4e(t=!1){const e=await Vre(),r=await Qt(yt(ke,"inventory_batches")),n={checked:0,fixed:0,alreadyOk:0,missingName:0,withoutMatch:0,details:[]};for(const a of r.docs){n.checked++;const s=a.data(),o=jS(s.productName);if(!o){n.missingName++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"missingName"});continue}const l=e.get(o);if(!l){n.withoutMatch++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,status:"withoutMatch"});continue}if(s.productId===l){n.alreadyOk++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"alreadyOk"});continue}t||await _n(Jt(ke,"inventory_batches",a.id),{productId:l}),n.fixed++,n.details.push({batchId:a.id,productName:s.productName??"",oldProductId:s.productId,newProductId:l,status:"fixed"})}return console.group("[fixAllBatchProductIds] Resultado"),console.log("checked:",n.checked),console.log("fixed:",n.fixed),console.log("alreadyOk:",n.alreadyOk),console.log("missingName:",n.missingName),console.log("withoutMatch:",n.withoutMatch),console.groupEnd(),n}async function h4e(t,e=!1){const r=jS(t),a=(await Vre()).get(r);if(!a)throw new Error(`No existe un producto activo con nombre "${t}".`);const s=await Qt(yt(ke,"inventory_batches"));let o=0;for(const l of s.docs){const c=l.data();jS(c.productName)===r&&c.productId!==a&&(e||await _n(Jt(ke,"inventory_batches",l.id),{productId:a}),o++)}return console.log(`[fixBatchesByProductName] "${t}" fixed: ${o} lote(s)`),o}function A4e(){const[t,e]=g.useState(!1),[r,n]=g.useState(""),a=async()=>{try{e(!0),n("");const c=await f4e(!1);n(` Hecho. Revisados: ${c.checked}, Corregidos: ${c.fixed}, Ok: ${c.alreadyOk}, Sin nombre: ${c.missingName}, Sin match: ${c.withoutMatch}. (Mira consola para detalles)`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}},[s,o]=g.useState(""),l=async()=>{if(!s.trim()){n(" Escribe el nombre del producto.");return}try{e(!0),n("");const c=await h4e(s.trim(),!1);n(` Hecho. Corregidos ${c} lote(s) para "${s}".`)}catch(c){n(" Error: "+((c==null?void 0:c.message)||c))}finally{e(!1)}};return i.jsxs("div",{className:"max-w-xl mx-auto bg-white p-6 rounded shadow border space-y-4",children:[i.jsx("h1",{className:"text-xl font-bold",children:"Herramienta de Migracin de Lotes"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Corrige los ",i.jsx("code",{children:"inventory_batches.productId"})," basndose en el nombre del producto. salo una sola vez para limpiar datos viejos. Revisa la consola para un log detallado."]}),i.jsx("div",{className:"space-y-2",children:i.jsx("button",{onClick:a,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir TODOS los lotes"})}),i.jsx("hr",{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Corregir por nombre:"}),i.jsx("input",{className:"border p-2 rounded w-full",placeholder:'Ej: "Pierna Entera"',value:s,onChange:c=>o(c.target.value)}),i.jsx("button",{onClick:l,disabled:t,className:"bg-indigo-600 text-white px-4 py-2 rounded disabled:opacity-60",children:t?"Corriendo":"Corregir lotes de ese producto"})]}),r&&i.jsx("p",{className:"text-sm",children:r})]})}const hu=t=>`C$${Number(t||0).toFixed(2)}`,cx=t=>Number(t||0).toFixed(3),m4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase()),m5=()=>{const t=new Date;return Br(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},FC=()=>Br(new Date,"yyyy-MM-dd");function p4e({paidBatches:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=g.useState(m5()),[o,l]=g.useState(FC()),[c,u]=g.useState(""),d=g.useMemo(()=>{const oe=new Map;return n.forEach(Z=>oe.set(Z.productId,{id:Z.productId,name:Z.productName})),Array.from(oe.values()).sort((Z,Ne)=>Z.name.localeCompare(Ne.name))},[n]),f=g.useMemo(()=>n.filter(oe=>!(a&&oe.date<a||o&&oe.date>o||c&&oe.productId!==c)),[n,a,o,c]),[A,h]=g.useState(FC()),[m,p]=g.useState(()=>`FAC-${Date.now().toString().slice(-6)}`),[x,v]=g.useState(""),[y,b]=g.useState([]);g.useEffect(()=>{b(oe=>{const Z=oe.filter(Ne=>f.some(Re=>Re.id===Ne));return Z.length===0&&f.length>0?f.map(Ne=>Ne.id):Z})},[f]);const[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState(!1),[F,k]=g.useState(m5()),[B,D]=g.useState(FC());g.useEffect(()=>{(async()=>{try{E(!0);const oe=ar(yt(ke,"expenses"),wn("date","desc")),Z=await Qt(oe),Ne=[];Z.forEach(Re=>{const ge=Re.data();Ne.push({id:Re.id,date:ge.date,description:ge.description,amount:Number(ge.amount||0)})}),j(Ne)}catch(oe){console.error(oe)}finally{E(!1)}})()},[]);const X=g.useMemo(()=>w.filter(oe=>!(!oe.date||F&&oe.date<F||B&&oe.date>B)),[w,F,B]),[he,Ae]=g.useState([]),[fe,me]=g.useState(!1),[ne,Pe]=g.useState(""),[Te,O]=g.useState("DEBITO"),[K,q]=g.useState(""),U=()=>{const oe=Number(K);!ne.trim()||!isFinite(oe)||oe<=0||(Ae(Z=>[...Z,{id:`${Date.now()}_${Z.length+1}`,description:ne.trim(),type:Te,amount:Number(oe.toFixed(2))}]),Pe(""),q(""))},[W,J]=g.useState(null),[M,H]=g.useState(""),[te,ve]=g.useState("DEBITO"),[Q,Ke]=g.useState(""),ae=oe=>{J(oe.id),H(oe.description),ve(oe.type),Ke(oe.amount.toFixed(2))},ee=()=>{J(null),H(""),ve("DEBITO"),Ke("")},Fe=()=>{if(!W)return;const oe=Number(Q);!isFinite(oe)||oe<=0||(Ae(Z=>Z.map(Ne=>Ne.id===W?{...Ne,description:M.trim(),type:te,amount:Number(oe.toFixed(2))}:Ne)),ee())},ce=oe=>{Ae(Z=>Z.filter(Ne=>Ne.id!==oe)),W===oe&&ee()},be=(oe,Z)=>{b(Ne=>Z?[...new Set([...Ne,oe])]:Ne.filter(Re=>Re!==oe))},Ve=oe=>{b(oe?f.map(Z=>Z.id):[])},We=(oe,Z)=>{_(Ne=>Z?[...new Set([...Ne,oe])]:Ne.filter(Re=>Re!==oe))},pt=g.useMemo(()=>f.filter(oe=>y.includes(oe.id)),[f,y]),wt=g.useMemo(()=>he.filter(oe=>oe.type==="DEBITO").reduce((oe,Z)=>oe+Z.amount,0),[he]),Ct=g.useMemo(()=>he.filter(oe=>oe.type==="CREDITO").reduce((oe,Z)=>oe+Z.amount,0),[he]),St=g.useMemo(()=>{let oe=0,Z=0,Ne=0,Re=0;for(const vt of pt){m4e(vt.unit)?oe+=Number(vt.quantity||0):Z+=Number(vt.quantity||0);const it=vt.expectedTotal??Number((Number(vt.quantity||0)*Number(vt.salePrice||0)).toFixed(2)),de=vt.invoiceTotal!==void 0&&vt.invoiceTotal!==null?Number(vt.invoiceTotal):Number((Number(vt.quantity||0)*Number(vt.purchasePrice||0)).toFixed(2));Ne+=Number(it||0),Re+=Number(de||0)}const ge=X.filter(vt=>I.includes(vt.id)).reduce((vt,it)=>vt+Number(it.amount||0),0),Xe=Ne-ge-wt+Ct;return{totalLbs:oe,totalUnits:Z,totalExpected:Number(Ne.toFixed(2)),totalInvoiced:Number(Re.toFixed(2)),totalGastos:Number(ge.toFixed(2)),debits:Number(wt.toFixed(2)),credits:Number(Ct.toFixed(2)),finalAmount:Number(Xe.toFixed(2)),grossProfit:Number((Ne-Re).toFixed(2))}},[pt,X,I,wt,Ct]),[Rt,jt]=g.useState(!1),[Ue,Be]=g.useState(""),ye=async()=>{if(Be(""),pt.length===0){Be("Selecciona al menos 1 lote pagado.");return}try{jt(!0);const oe={number:m.trim(),date:A,description:x.trim(),status:"PENDIENTE",createdAt:xr.now(),totalLbs:Number(cx(St.totalLbs)),totalUnits:Number(cx(St.totalUnits)),totalAmount:St.totalExpected,invoiceTotal:St.totalInvoiced,totalExpenses:St.totalGastos,totalDebits:St.debits,totalCredits:St.credits,finalAmount:St.finalAmount,batches:pt.map(Z=>{var Ne;return{id:Z.id,productId:Z.productId,productName:Z.productName,unit:Z.unit,quantity:Number(cx(Z.quantity)),salePrice:Number(Number(Z.salePrice||0).toFixed(2)),purchasePrice:Number(Number(Z.purchasePrice||0).toFixed(2)),expectedTotal:Number((Number(Z.quantity||0)*Number(Z.salePrice||0)).toFixed(2)),invoiceTotal:Z.invoiceTotal!==void 0&&Z.invoiceTotal!==null?Number(Z.invoiceTotal):Number((Number(Z.quantity||0)*Number(Z.purchasePrice||0)).toFixed(2)),batchDate:Z.date,paidAt:(Ne=Z.paidAt)!=null&&Ne.toDate?Br(Z.paidAt.toDate(),"yyyy-MM-dd"):null}}),expenses:X.filter(Z=>I.includes(Z.id)).map(Z=>({id:Z.id,date:Z.date||null,description:Z.description||"",amount:Number(Number(Z.amount||0).toFixed(2))})),adjustments:he.map(Z=>({id:Z.id,description:Z.description,type:Z.type,amount:Number(Z.amount.toFixed(2))}))};await $n(yt(ke,"invoices"),oe),Be(" Factura creada."),r()}catch(oe){console.error(oe),Be(` Error al crear factura: ${(oe==null?void 0:oe.message)||"desconocido"}`)}finally{jt(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:A,onChange:oe=>h(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:m,onChange:oe=>p(oe.target.value),placeholder:"FAC-001"})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:x,onChange:oe=>v(oe.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:oe=>s(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (lote)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:o,onChange:oe=>l(oe.target.value)})]}),i.jsxs("div",{className:"min-w-[220px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:c,onChange:oe=>u(oe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),d.map(oe=>i.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{s(m5()),l(FC()),u("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Lotes pagados"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:f.length>0&&y.length===f.length,onChange:oe=>Ve(oe.target.checked)}),"Seleccionar todos (sobre el filtro)"]})]}),f.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay lotes pagados disponibles en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha lote"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Cantidad"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total facturado"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Ganancia bruta"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"})]})}),i.jsx("tbody",{children:f.map(oe=>{var Xe;const Z=y.includes(oe.id),Ne=oe.expectedTotal??Number((Number(oe.quantity||0)*Number(oe.salePrice||0)).toFixed(2)),Re=oe.invoiceTotal!==void 0&&oe.invoiceTotal!==null?Number(oe.invoiceTotal):Number((Number(oe.quantity||0)*Number(oe.purchasePrice||0)).toFixed(2)),ge=Ne-Re;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Z,onChange:vt=>be(oe.id,vt.target.checked)})}),i.jsx("td",{className:"p-2 border",children:oe.date}),i.jsx("td",{className:"p-2 border",children:oe.productName}),i.jsx("td",{className:"p-2 border",children:(oe.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:cx(oe.quantity)}),i.jsx("td",{className:"p-2 border",children:hu(oe.salePrice)}),i.jsx("td",{className:"p-2 border",children:hu(Re)}),i.jsx("td",{className:"p-2 border",children:hu(Ne)}),i.jsx("td",{className:"p-2 border",children:hu(ge)}),i.jsx("td",{className:"p-2 border",children:(Xe=oe.paidAt)!=null&&Xe.toDate?Br(oe.paidAt.toDate(),"yyyy-MM-dd"):""})]},oe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),S&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:F,onChange:oe=>k(oe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:B,onChange:oe=>D(oe.target.value)})]})]})]}),X.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:X.map(oe=>{const Z=I.includes(oe.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Z,onChange:Ne=>We(oe.id,Ne.target.checked)})}),i.jsx("td",{className:"p-2 border",children:oe.date||""}),i.jsx("td",{className:"p-2 border",children:oe.description||""}),i.jsx("td",{className:"p-2 border",children:hu(Number(oe.amount||0))})]},oe.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{type:"button",className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>me(!0),children:"Crear Cargo"})]}),he.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:he.map(oe=>{const Z=W===oe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Z?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:M,onChange:Ne=>H(Ne.target.value)}):i.jsx("span",{title:oe.description,children:oe.description.length>60?`${oe.description.slice(0,60)}`:oe.description})}),i.jsx("td",{className:"p-2 border",children:Z?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:te,onChange:Ne=>ve(Ne.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${oe.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:oe.type})}),i.jsx("td",{className:"p-2 border",children:Z?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:Q,onChange:Ne=>Ke(Ne.target.value)}):hu(oe.amount)}),i.jsx("td",{className:"p-2 border",children:Z?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:Fe,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:ee,children:"Cancelar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ce(oe.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>ae(oe),children:"Editar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ce(oe.id),children:"Eliminar"})]})})]},oe.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total libras: ",i.jsx("strong",{children:cx(St.totalLbs)})]}),i.jsxs("div",{children:["Total unidades: ",i.jsx("strong",{children:cx(St.totalUnits)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total facturado (costo):"," ",i.jsx("strong",{children:hu(St.totalInvoiced)})]}),i.jsxs("div",{children:["Total esperado (ventas):"," ",i.jsx("strong",{children:hu(St.totalExpected)})]}),i.jsxs("div",{children:["Ganancia bruta (esperado  facturado):"," ",i.jsx("strong",{children:hu(St.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:hu(St.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:hu(St.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:hu(St.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (esperado  gastos  dbitos + crditos):"," ",i.jsx("span",{className:"text-blue-700",children:hu(St.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:Rt,onClick:ye,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Rt?"Creando":"Crear factura"}),i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Ue&&i.jsx("span",{className:"text-sm ml-2",children:Ue})]}),Rt&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),fe&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>me(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:ne,onChange:oe=>Pe(oe.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Te,onChange:oe=>O(oe.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:K,onChange:oe=>q(oe.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:U,children:"Agregar"})})]})]})})]})}const qu=t=>`C$ ${Number(t||0).toFixed(2)}`,Fc=t=>Number(t||0).toFixed(3),g4e=t=>(t||"").toLowerCase()==="lb"||/libra/.test((t||"").toLowerCase());function x4e(){const[t,e]=g.useState([]),[r,n]=g.useState(!0),[a,s]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(Br(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[d,f]=g.useState(Br(new Date,"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(!1),{refreshKey:x,refresh:v}=Ec(),[y,b]=g.useState(!1),w=()=>b(D=>!D),[j,I]=g.useState(null),_=D=>I(X=>X===D?null:D);g.useEffect(()=>{(async()=>{n(!0);const D=ar(yt(ke,"inventory_batches"),mr("status","==","PAGADO"),wn("date","desc")),X=await Qt(D),he=[];X.forEach(Ae=>{const fe=Ae.data(),me=Number(fe.quantity||0),ne=Number(fe.remaining||0),Pe=Number(fe.purchasePrice||0),Te=Number(fe.salePrice||0),O=Number((me*Pe).toFixed(2)),K=Number((me*Te).toFixed(2));he.push({id:Ae.id,productId:fe.productId,productName:fe.productName,category:fe.category,unit:fe.unit,quantity:me,remaining:ne,purchasePrice:Pe,salePrice:Te,invoiceTotal:fe.invoiceTotal!=null?Number(fe.invoiceTotal):O,expectedTotal:fe.expectedTotal!=null?Number(fe.expectedTotal):K,date:fe.date,status:fe.status,paidAt:fe.paidAt})}),e(he),n(!1)})()},[x]);const S=g.useMemo(()=>t.filter(D=>!(c&&D.date<c||d&&D.date>d||A&&D.productId!==A)),[t,c,d,A]),E=g.useMemo(()=>{let D=0,X=0,he=0,Ae=0,fe=0,me=0;for(const ne of S)g4e(ne.unit)?(D+=ne.quantity,X+=ne.remaining):(he+=ne.quantity,Ae+=ne.remaining),fe+=Number(ne.expectedTotal||0),me+=Number(ne.invoiceTotal||0);return{lbsIng:D,lbsRem:X,udsIng:he,udsRem:Ae,totalEsperado:fe,totalFact:me,gross:fe-me}},[S]),F=D=>{l(D),s(!0)},k=async()=>{if(o)try{const D=Jt(ke,"inventory_batches",o.id);await _n(D,{status:"PENDIENTE",remaining:o.quantity});const X=yt(ke,"salesV2"),he=await Qt(ar(X,mr("batchId","==",o.id))),Ae=await Qt(ar(X,mr("productName","==",o.productName),mr("date","==",o.date))),fe=[...he.docs,...Ae.docs];for(const me of fe)await Mn(Jt(ke,"salesV2",me.id));s(!1),l(null),v()}catch(D){console.error("Error al marcar pendiente:",D)}},B=g.useMemo(()=>{const D=new Map;return t.forEach(X=>D.set(X.productId,{id:X.productId,name:X.productName})),Array.from(D.values()).sort((X,he)=>X.name.localeCompare(he.name))},[t]);return i.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Pagados"}),i.jsx(_c,{onClick:v,loading:r})]}),i.jsxs("div",{className:"bg-white p-3 rounded-2xl shadow-2xl border mb-4 flex flex-col sm:flex-row sm:items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:D=>u(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:D=>f(D.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:D=>h(D.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),B.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded-2xl bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"})]}),i.jsx("button",{type:"button",className:"sm:ml-auto px-3 py-2 rounded-2xl bg-blue-600 text-white hover:bg-blue-700",onClick:()=>p(!0),children:"Crear factura"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"md:hidden",children:[i.jsxs("button",{type:"button",onClick:w,className:"w-full text-left px-3 py-3 flex items-center justify-between border rounded-2xl bg-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Totales"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Libras: ",i.jsx("b",{children:Fc(E.lbsIng)}),"  Restantes:"," ",i.jsx("b",{children:Fc(E.lbsRem)})]})]}),i.jsx("div",{className:"text-gray-500",children:y?"":""})]}),y&&i.jsx("div",{className:"mt-3 bg-gray-50 p-3 rounded-2xl shadow-2xl border text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Fc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Fc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",qu(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Fc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Fc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",qu(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",qu(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"hidden md:block bg-gray-50 p-3 rounded-2xl shadow-2xl border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras ingresadas:"})," ",Fc(E.lbsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",Fc(E.udsIng)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",qu(E.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Libras restantes:"})," ",Fc(E.lbsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",Fc(E.udsRem)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",qu(E.totalFact)]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",qu(E.gross)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Cantidad de Lotes:"})," ",S.length.toLocaleString()]})]})})]}),i.jsx("div",{className:"block md:hidden space-y-3",children:r?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Cargando"}):S.length===0?i.jsx("div",{className:"p-4 text-center bg-white rounded-xl border shadow",children:"Sin lotes pagados"}):S.map(D=>{var he;const X=j===D.id;return i.jsxs("div",{className:"bg-white border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",onClick:()=>_(D.id),className:"w-full text-left px-3 py-3 flex items-center justify-between bg-white",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:D.productName}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(D.category||"").toUpperCase(),"  ",D.date," "," ",(D.unit||"").toUpperCase()]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm font-bold",children:qu(D.expectedTotal||0)}),i.jsx("div",{className:"text-[11px] text-gray-500",children:X?"Detalles":"Esperado"})]})]}),X&&i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ingresado"}),i.jsx("div",{className:"font-semibold",children:Fc(D.quantity)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Fc(D.remaining)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Costo"}),i.jsx("div",{className:"font-semibold",children:qu(D.invoiceTotal||0)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Fecha pago"}),i.jsx("div",{className:"font-semibold",children:(he=D.paidAt)!=null&&he.toDate?Br(D.paidAt.toDate(),"yyyy-MM-dd"):""})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]})]},D.id)})}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow-2xl border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Unidad"}),i.jsx("th",{className:"p-2 border",children:"Ingresado"}),i.jsx("th",{className:"p-2 border",children:"Restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Compra"}),i.jsx("th",{className:"p-2 border",children:"Precio Venta"}),i.jsx("th",{className:"p-2 border",children:"Total factura"}),i.jsx("th",{className:"p-2 border",children:"Total esperado"}),i.jsx("th",{className:"p-2 border",children:"Fecha pago"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):S.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin lotes pagados"})}):S.map(D=>{var X;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:D.date}),i.jsx("td",{className:"p-2 border",children:(D.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:D.productName}),i.jsx("td",{className:"p-2 border",children:(D.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 border",children:Fc(D.quantity)}),i.jsx("td",{className:"p-2 border",children:Fc(D.remaining)}),i.jsx("td",{className:"p-2 border",children:qu(D.purchasePrice)}),i.jsx("td",{className:"p-2 border",children:qu(D.salePrice)}),i.jsx("td",{className:"p-2 border",children:qu(D.invoiceTotal||0)}),i.jsx("td",{className:"p-2 border",children:qu(D.expectedTotal||0)}),i.jsx("td",{className:"p-2 border",children:(X=D.paidAt)!=null&&X.toDate?Br(D.paidAt.toDate(),"yyyy-MM-dd"):""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>F(D),children:"Marcar PENDIENTE"})})]},D.id)})})]})}),m&&i.jsx(p4e,{paidBatches:t,onClose:()=>p(!1),onCreated:()=>p(!1)}),a&&o&&i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 p-3",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Confirmar accin"}),i.jsxs("p",{className:"text-gray-700 mb-4",children:["Seguro que quieres marcar pendiente este inventario?",i.jsx("br",{}),"Al hacerlo, las libras se restaurarn y se eliminarn las ventas generadas."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-xl",children:"Cancelar"}),i.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-yellow-600 text-white hover:bg-yellow-700 rounded-xl",children:"Confirmar"})]})]})})]})}const ko=t=>`C$ ${(Number(t)||0).toFixed(2)}`,v4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function OC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function y4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function b4e(t){const e="ROP",r=OC(t.subcat).slice(0,3)||"GEN",n=y4e(t.gender),a=OC(t.color).slice(0,3)||"COL",s=OC(t.size)||"TLL",o=OC(t.brand).slice(0,4)||"BRD",l=Date.now().toString(36).toUpperCase().slice(-4);return`${e}-${r}-${n}-${a}-${s}-${o}-${l}`}const fy=/^[A-Za-z0-9._-]{0,32}$/;function w4e(){const[t,e]=g.useState([]),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(Br(new Date,"yyyy-MM-dd")),[y,b]=g.useState(0),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(0),[F,k]=g.useState(0),[B,D]=g.useState(""),[X,he]=g.useState(""),[Ae,fe]=g.useState(""),[me,ne]=g.useState(""),[Pe,Te]=g.useState(""),[O,K]=g.useState(""),[q,U]=g.useState(""),[W,J]=g.useState(!1),[M,H]=g.useState(""),[te,ve]=g.useState("Camisa"),[Q,Ke]=g.useState(null),[ae,ee]=g.useState(""),[Fe,ce]=g.useState(0),[be,Ve]=g.useState(0),[We,pt]=g.useState(0),[wt,Ct]=g.useState(0),[St,Rt]=g.useState(0),[jt,Ue]=g.useState(""),[Be,ye]=g.useState(""),[oe,Z]=g.useState(""),[Ne,Re]=g.useState(""),[ge,Xe]=g.useState(""),[vt,it]=g.useState(""),[de,Ce]=g.useState(""),[Ye,ft]=g.useState(null),[we,Le]=g.useState({x:0,y:0}),[gt,Ut]=g.useState(!1);g.useEffect(()=>{const R=()=>ft(null),L=G=>G.key==="Escape"&&ft(null);return document.addEventListener("click",R),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",L)}},[]);const Mt=(R,L,G=192,re=160)=>{let $e=R;R+G+8>window.innerWidth&&($e=R-G),$e=Math.max(8,Math.min($e,window.innerWidth-G-8));let rt=L;return L+re+8>window.innerHeight&&(rt=window.innerHeight-re-8),rt=Math.max(8,Math.min(rt,window.innerHeight-re-8)),{x:$e,y:rt}},Yt=(R,L)=>{R.stopPropagation();const G=R.currentTarget.getBoundingClientRect(),re=G.right,ue=G.bottom,$e=Mt(re,ue);Le($e),ft(rt=>rt===L?null:L)};g.useEffect(()=>{const R=()=>ft(null),L=G=>{G.key==="Escape"&&ft(null)};return document.addEventListener("click",R),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",R),document.removeEventListener("keydown",L)}},[]),g.useEffect(()=>{if(!Ye)return;const R=()=>ft(null);return window.addEventListener("scroll",R,!0),window.addEventListener("resize",R),()=>{window.removeEventListener("scroll",R,!0),window.removeEventListener("resize",R)}},[Ye]),g.useEffect(()=>{(async()=>{const R=await Qt(yt(ke,"products_clothes")),L=[];R.forEach($e=>{const rt=$e.data();L.push({id:$e.id,name:rt.name??"(sin nombre)",category:rt.category??"(sin categora)",measurement:rt.measurement??"unidad",price:Number(rt.price??0),sku:rt.sku||"",size:rt.size||"",color:rt.color||"",gender:rt.gender||"",brand:rt.brand||""})}),e(L);const G=ar(yt(ke,"inventory_clothes_batches"),wn("date","desc")),re=await Qt(G),ue=[];re.forEach($e=>{const rt=$e.data();ue.push({id:$e.id,productId:rt.productId,productName:rt.productName,category:rt.category,unit:rt.unit,quantity:Number(rt.quantity||0),remaining:Number(rt.remaining??rt.quantity??0),purchasePrice:Number(rt.purchasePrice||0),salePrice:Number(rt.salePrice||0),invoiceTotal:Number(rt.invoiceTotal??Number(rt.quantity||0)*Number(rt.purchasePrice||0)),expectedTotal:Number(rt.expectedTotal??Number(rt.quantity||0)*Number(rt.salePrice||0)),date:rt.date,createdAt:rt.createdAt,status:rt.status,notes:rt.notes||"",sku:rt.sku||"",size:rt.size||"",color:rt.color||"",gender:rt.gender||"",brand:rt.brand||"",clientCode:rt.clientCode||""})}),n(ue),s(!1)})()},[]),g.useEffect(()=>{const R=t.find(L=>L.id===m);R&&(_(Number(R.price||0)),R.sku&&he(R.sku),R.size&&fe(L=>L||R.size),R.color&&ne(L=>L||R.color),R.gender&&Te(L=>L||R.gender),R.brand&&K(L=>L||R.brand))},[m,t]),g.useEffect(()=>{E(Math.floor(y*w*100)/100)},[y,w]),g.useEffect(()=>{k(Math.floor(y*I*100)/100)},[y,I]),g.useEffect(()=>{const R=t.find(re=>re.id===m);if(R!=null&&R.sku){he(R.sku);return}const L=W&&te?te:(R==null?void 0:R.category)||"";if(!L&&!Pe&&!me&&!Ae&&!O){he("");return}const G=b4e({subcat:L,gender:Pe||"",color:me||"",size:Ae||"",brand:O||""});he(G)},[W,te,m,Pe,me,Ae,O,t]);const st=g.useMemo(()=>r.filter(R=>!(c&&R.date<c||d&&R.date>d||A&&R.productId!==A)),[r,c,d,A]),_e=g.useMemo(()=>{const R=st.reduce((ue,$e)=>ue+($e.invoiceTotal||0),0),L=st.reduce((ue,$e)=>ue+($e.expectedTotal||0),0),G=st.reduce((ue,$e)=>ue+$e.quantity,0),re=st.reduce((ue,$e)=>ue+$e.remaining,0);return{udsIng:G,udsRem:re,totalFacturado:R,totalEsperado:L}},[st]),xe=async R=>{R.preventDefault(),l("");const L=!!m&&!W,G=t.find(rt=>rt.id===m),re=L?(G==null?void 0:G.name)||"":M||"",ue=L?(G==null?void 0:G.category)||"":te||"General",$e=L&&(G==null?void 0:G.measurement)||"unidad";if(!re||y<=0||w<=0){l("Completa nombre/cantidad/costo.");return}if(q&&!fy.test(q)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}try{const rt=await $n(yt(ke,"inventory_clothes_batches"),{productId:L?G.id:"",productName:re,category:ue,unit:$e,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:x,createdAt:xr.now(),status:"PENDIENTE",notes:B||"",sku:X||"",size:Ae||"",color:me||"",gender:Pe||"",brand:O||"",clientCode:q||""});n(At=>[{id:rt.id,productId:L?G.id:"",productName:re,category:ue,unit:$e,quantity:y,remaining:y,purchasePrice:w,salePrice:I,invoiceTotal:S,expectedTotal:F,date:x,createdAt:xr.now(),status:"PENDIENTE",notes:B||"",sku:X||"",size:Ae||"",color:me||"",gender:Pe||"",brand:O||"",clientCode:q||""},...At]),l(" Lote de ropa creado"),p(""),v(Br(new Date,"yyyy-MM-dd")),b(0),j(0),_(0),E(0),k(0),D(""),he(""),fe(""),ne(""),Te(""),K(""),U(""),J(!1),H(""),ve("Camisa")}catch(rt){console.error(rt),l(" Error al crear lote")}},ie=async R=>{confirm(`Marcar PAGADO el lote del ${R.date} (${R.productName})?`)&&(await _n(Jt(ke,"inventory_clothes_batches",R.id),{status:"PAGADO"}),n(G=>G.map(re=>re.id===R.id?{...re,status:"PAGADO"}:re)))},Oe=R=>{Ke(R.id),ee(R.date),ce(R.quantity),Ve(R.purchasePrice),pt(R.salePrice),Ct(Number((R.quantity*R.purchasePrice).toFixed(2))),Rt(Number((R.quantity*R.salePrice).toFixed(2))),Ue(R.notes||""),ye(R.sku||""),Z(R.size||""),Re(R.color||""),Xe(R.gender||""),it(R.brand||""),Ce(R.clientCode||"")},le=()=>{Ke(null),ee(""),ce(0),Ve(0),pt(0),Ct(0),Rt(0),Ue(""),ye(""),Z(""),Re(""),Xe(""),it(""),Ce("")};g.useEffect(()=>{Q&&Ct(Math.floor(Fe*be*100)/100)},[Q,Fe,be]),g.useEffect(()=>{Q&&Rt(Math.floor(Fe*We*100)/100)},[Q,Fe,We]);const De=async()=>{if(!Q)return;const R=r.find(ue=>ue.id===Q);if(!R)return;const L=Math.max(0,R.quantity-R.remaining),G=Math.max(0,Fe-L);if(de&&!fy.test(de)){l("Cdigo del cliente invlido (solo A-Z, 0-9, . _ - , mx 32).");return}const re=Jt(ke,"inventory_clothes_batches",Q);await _n(re,{date:ae,quantity:Fe,purchasePrice:be,salePrice:We,invoiceTotal:wt,expectedTotal:St,notes:jt,remaining:G,sku:Be,size:oe,color:Ne,gender:ge||"",brand:vt||"",clientCode:de||""}),n(ue=>ue.map($e=>$e.id===Q?{...$e,date:ae,quantity:Fe,purchasePrice:be,salePrice:We,invoiceTotal:wt,expectedTotal:St,notes:jt,remaining:G,sku:Be,size:oe,color:Ne,gender:ge||"",brand:vt||"",clientCode:de||""}:$e)),le(),l(" Lote actualizado")},He=async R=>{confirm(`Eliminar el lote del ${R.date} (${R.productName})?`)&&(await Mn(Jt(ke,"inventory_clothes_batches",R.id)),n(G=>G.filter(re=>re.id!==R.id)),l(" Lote eliminado"))},P=()=>{const R=(c?`Desde ${c}`:"Desde inicio")+"  "+(d?`Hasta ${d}`:"Hasta hoy"),L=$e=>($e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G=st.map($e=>`
      <tr>
        <td>${$e.date}</td>
        <td>${($e.category||"").toUpperCase()}</td>
        <td>${L($e.productName)}</td>
        <td>${L($e.sku||"")}</td>
        <td>${L($e.size||"")}</td>
        <td>${L($e.color||"")}</td>
        <td>${L($e.clientCode||"")}</td>
        <td>${L($e.gender||"")}</td>
        <td>${($e.unit||"").toUpperCase()}</td>
        <td style="text-align:right">${$e.quantity.toFixed(0)}</td>
        <td style="text-align:right">${$e.remaining.toFixed(0)}</td>
        <td style="text-align:right">${ko($e.purchasePrice)}</td>
        <td style="text-align:right">${ko($e.salePrice)}</td>
        <td style="text-align:right">${ko($e.invoiceTotal||0)}</td>
        <td style="text-align:right">${ko($e.expectedTotal||0)}</td>
        <td>${L(($e.notes||"").slice(0,120))}</td>
        <td>${$e.status}</td>
      </tr>`).join(""),re=`
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Inventario de Ropa por Lotes</title>
  <style>
    * { font-family: Arial, sans-serif; }
    h1 { margin: 0 0 4px; }
    .muted { color: #555; font-size: 12px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { border: 1px solid #ddd; padding: 6px; }
    th { background: #f5f5f5; text-align: left; }
    .totals { margin: 10px 0 16px; font-size: 12px; display: grid; grid-template-columns: repeat(2, max-content); column-gap: 32px; row-gap: 6px; align-items: center; }
    @media print { @page { size: A4 landscape; margin: 12mm; } button { display: none; } }
  </style>
</head>
<body>
  <button onclick="window.print()">Imprimir</button>
  <h1>Inventario de Ropa por Lotes</h1>
  <div class="muted">${R}</div>
  <div class="totals">
    <span><strong>Unidades ingresadas:</strong> ${_e.udsIng.toFixed(0)}</span>
    <span><strong>Unidades restantes:</strong> ${_e.udsRem.toFixed(0)}</span>
    <span><strong>Total esperado a ganar:</strong> ${ko(_e.totalEsperado)}</span>
    <span><strong>Total facturado:</strong> ${ko(_e.totalFacturado)}</span>
    <span><strong>Ganancia sin gastos:</strong> ${ko(Number((_e.totalEsperado-_e.totalFacturado).toFixed(2)))}</span>
  </div>
  <table>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Subcat.</th>
        <th>Producto</th>
        <th>SKU</th>
        <th>Talla</th>
        <th>Color</th>
        <th>Cdigo Cliente</th>
        <th>Gnero</th>
        <th>Unidad</th>
        <th>Ingresado</th>
        <th>Restantes</th>
        <th>Precio Compra</th>
        <th>Precio Venta</th>
        <th>Total factura</th>
        <th>Total esperado</th>
        <th>Comentario</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>${G||'<tr><td colspan="17" style="text-align:center">Sin lotes</td></tr>'}</tbody>
  </table>
</body>
</html>`,ue=window.open("","_blank");ue&&(ue.document.open(),ue.document.write(re),ue.document.close())};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario de Ropa"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>Ut(!0),type:"button",children:"Crear Inventario"})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:R=>u(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:R=>f(R.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:R=>h(R.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(R=>i.jsxs("option",{value:R.id,children:[R.name,"  ",R.category]},R.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h("")},children:"Quitar filtro"}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:P,children:"Imprimir PDF"})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-base",children:i.jsxs("div",{className:"grid grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades ingresadas:"})," ",_e.udsIng.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Unidades restantes:"})," ",_e.udsRem.toFixed(0)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado en ventas:"})," ",ko(_e.totalEsperado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total facturado:"})," ",ko(_e.totalFacturado)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia sin gastos:"})," ",ko(Number((_e.totalEsperado-_e.totalFacturado).toFixed(2)))]})]})}),i.jsx("div",{className:"bg-white rounded shadow border",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden sm:table-cell",children:"Subcat."}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"SKU"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Talla"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden md:table-cell",children:"Color"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Gnero"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden lg:table-cell",children:"Unidad"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Ingresado"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums",children:"Restantes"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Compra"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden md:table-cell",children:"Precio Venta"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total factura"}),i.jsx("th",{className:"p-2 md:p-3 border text-right tabular-nums hidden lg:table-cell",children:"Total esperado"}),i.jsx("th",{className:"p-2 md:p-3 border text-left hidden xl:table-cell",children:"Comentario"}),i.jsx("th",{className:"p-2 md:p-3 border text-left",children:"Estado"}),i.jsx("th",{className:"p-2 md:p-3 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Cargando"})}):st.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center",children:"Sin lotes"})}):st.map(R=>{const L=Q===R.id;return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:ae,onChange:G=>ee(G.target.value)}):R.date}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden sm:table-cell",children:(R.category||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top max-w-[220px] md:max-w-[320px]",children:i.jsx("span",{className:"block truncate",title:R.productName,children:R.productName})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell max-w-[220px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:Be,onChange:G=>ye(G.target.value)}):i.jsx("span",{className:"block truncate",title:R.sku||"",children:R.sku||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:oe,onChange:G=>Z(G.target.value)}):R.size||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden md:table-cell",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:Ne,onChange:G=>Re(G.target.value)}):R.color||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[200px]",children:L?i.jsx("input",{className:"w-full border p-1 rounded",value:de,onChange:G=>{const re=G.target.value;fy.test(re)&&Ce(re)},placeholder:"Ej: LOTE-SHEIN-SEP-01",title:"AZ 09 . _ - (mx 32)"}):i.jsx("span",{className:"block truncate",title:R.clientCode||"",children:R.clientCode||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:L?i.jsx("select",{className:"w-full border p-1 rounded",value:ge,onChange:G=>Xe(G.target.value),children:v4e.map(G=>i.jsx("option",{value:G,children:G||""},G))}):R.gender||""}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden lg:table-cell",children:(R.unit||"").toUpperCase()}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-20 border p-1 rounded text-right",value:Number.isNaN(Fe)?"":Fe,onChange:G=>ce(Math.max(0,parseInt(G.target.value||"0",10)))}):R.quantity.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums",children:L?R.remaining:R.remaining.toFixed(0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(be)?"":be,onChange:G=>Ve(Math.max(0,parseFloat(G.target.value||"0")))}):ko(R.purchasePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden md:table-cell",children:L?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(We)?"":We,onChange:G=>pt(Math.max(0,parseFloat(G.target.value||"0")))}):ko(R.salePrice)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ko(L?wt:R.invoiceTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top text-right tabular-nums hidden lg:table-cell",children:ko(L?St:R.expectedTotal||0)}),i.jsx("td",{className:"p-2 md:p-3 border align-top hidden xl:table-cell max-w-[280px]",children:L?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:jt,onChange:G=>Ue(G.target.value),maxLength:500}):i.jsx("span",{className:"block truncate",title:R.notes||"",children:R.notes||""})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${R.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:R.status})}),i.jsx("td",{className:"p-2 md:p-3 border align-top",children:L?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:De,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:le,children:"Cancelar"})]}):i.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded border border-gray-200 hover:bg-gray-100",title:"Acciones",onClick:G=>Yt(G,R.id),children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("circle",{cx:"12",cy:"5",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.6"}),i.jsx("circle",{cx:"12",cy:"19",r:"1.6"})]})})})]},R.id)})})]})})}),Ye&&Iu.createPortal(i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:()=>ft(null),className:"fixed inset-0 z-[60]"}),i.jsx("div",{className:"fixed z-[61] w-44 rounded-md border border-gray-200 bg-white shadow-xl",style:{left:we.x,top:we.y},onClick:R=>R.stopPropagation(),role:"menu","aria-orientation":"vertical",children:i.jsxs("div",{className:"py-1 text-sm",children:[(()=>{const R=st.find(L=>L.id===Ye);return(R==null?void 0:R.status)==="PENDIENTE"?i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-green-50",onClick:()=>{ft(null),ie(R)},children:" Pagar"}):null})(),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-yellow-50",onClick:()=>{const R=st.find(L=>L.id===Ye);R&&(ft(null),Oe(R))},children:" Editar"}),i.jsx("button",{className:"w-full text-left px-3 py-2 hover:bg-red-50 text-red-600",onClick:()=>{const R=st.find(L=>L.id===Ye);R&&(ft(null),He(R))},children:" Borrar"})]})})]}),document.body),gt&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ut(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-4xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Inventario (Lote)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ut(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:xe,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto de ropa"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:R=>p(R.target.value),children:[i.jsx("option",{value:"",children:"(Opcional) Selecciona un producto"}),t.map(R=>i.jsxs("option",{value:R.id,children:[R.name,"  ",R.category,"  ",R.sku?`SKU: ${R.sku}`:""]},R.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del lote"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:x,onChange:R=>v(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (pzas)"}),i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full border p-2 rounded",value:y===0?"":y,onChange:R=>b(Math.max(0,parseInt(R.target.value||"0",10))),placeholder:""})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de compra (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:w===0?"":w,onChange:R=>j(Math.max(0,parseFloat(R.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:I===0?"":I,onChange:R=>_(Math.max(0,parseFloat(R.target.value||"0")))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:X,readOnly:!0,placeholder:"Se genera automticamente o se carga del producto",title:"Si el producto tiene SKU, se usa tal cual; si no, se genera por subcat/gnero/talla/color/marca."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Ae,readOnly:!0,onChange:R=>fe(R.target.value),placeholder:"XS/S/M/L/XL/10/12"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:me,readOnly:!0,onChange:R=>ne(R.target.value),placeholder:"Negro, Azul, Rojo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:Pe,readOnly:!0,onChange:R=>Te(R.target.value),placeholder:"Masculino, Femenino, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca / Origen (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:O,onChange:R=>K(R.target.value),placeholder:"Shein, Usado, Otro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo del cliente (opcional)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: LOTE-SHEIN-SEP-01",value:q,onChange:R=>{const L=R.target.value;fy.test(L)&&U(L)},title:"Solo letras, nmeros, punto, guion y guion_bajo (mx 32)"}),!fy.test(q)&&q.length>0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:"Formato invlido"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:B,onChange:R=>D(R.target.value),maxLength:500,placeholder:"Ej: Camisita veranera, tela delgada, tirantes"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[B.length,"/500"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total factura (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ko(S),readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Total esperado (auto)"}),i.jsx("input",{type:"text",className:"w-full border p-2 rounded bg-gray-100",value:ko(F),readOnly:!0})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ut(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar lote"})]})]})]})]}),document.body),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const N4e=["Camisa","Blusa","Vestido","Jean","Pantaln","Short","Falda","Conjunto","Abrigo","Suter","Accesorio"],C4e=["Negro","Blanco","Azul","Rojo","Verde","Gris","Beige","Rosa","Amarillo","Marrn","Morado","Naranja"],_4e=["XS","S","M","L","XL","2XL"],E4e=["2","4","6","8","10","12","14"],S4e=["26","28","30","32","34","36","38"],I4e=["Shein","Usado","Otro"],j4e=["","HOMBRE","MUJER","NINO","NINA","UNISEX"];function DC(t){return(t||"").trim().toUpperCase().replace(/\s+/g,"-").replace(/[^A-Z0-9-]/g,"")}function P4e(t){switch((t||"").toUpperCase()){case"HOMBRE":return"HOM";case"MUJER":return"MUJ";case"NINO":return"NIN";case"NINA":return"NIA";case"UNISEX":return"UNI";default:return"GEN"}}function B4e(t){const e="ROP",r=DC(t.subcat).slice(0,3)||"GEN",n=P4e(t.gender),a=DC(t.color).slice(0,3)||"COL",s=DC(t.size)||"TLL",o=DC(t.brand).slice(0,4)||"BRD";return`${e}-${r}-${n}-${a}-${s}-${o}`}const T4e=/^[A-Za-z0-9._-]{0,32}$/;function k4e(){const[t,e]=g.useState(""),[r,n]=g.useState("Camisa"),[a,s]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState("Shein"),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState("0"),[I,_]=g.useState(""),[S,E]=g.useState(""),F=g.useMemo(()=>{const U=Number(w||0),W=Number(y||0);return Math.floor(U*W*100)/100},[w,y]),[k,B]=g.useState([]),[D,X]=g.useState(!0),[he,Ae]=g.useState(""),{refreshKey:fe,refresh:me}=Ec(),[ne,Pe]=g.useState(!1),Te=g.useMemo(()=>r.toLowerCase()==="jean"?S4e:d==="NINO"||d==="NINA"?E4e:_4e,[r,d]);g.useEffect(()=>{p(B4e({subcat:r,gender:d,color:o,size:a,brand:c}))},[r,d,o,a,c]),g.useEffect(()=>{(async()=>{X(!0);const U=ar(yt(ke,"products_clothes"),wn("createdAt","desc")),W=await Qt(U),J=[];W.forEach(M=>{const H=M.data();J.push({id:M.id,name:H.name??"(sin nombre)",category:H.category??"",measurement:H.measurement??"unidad",sku:H.sku??"",size:H.size||"",color:H.color||"",brand:H.brand||"",gender:H.gender||"",clientCode:H.clientCode||"",notes:H.notes||"",createdAt:H.createdAt??xr.now()})}),B(J),X(!1)})()},[fe]);const O=()=>{e(""),n("Camisa"),s(""),l(""),u("Shein"),f(""),h(""),v(""),b(""),j("0"),_(""),E("")},K=async U=>{if(U.preventDefault(),Ae(""),!t.trim()){Ae("Ingresa el nombre del producto.");return}if(A&&!T4e.test(A)){Ae("Cdigo del cliente invlido");return}const W=Number(w||0),J=Number(y||0);if(W<0){Ae("La cantidad de piezas debe ser 0 o mayor.");return}if(J<0){Ae("El precio de venta no puede ser negativo.");return}try{const M=await $n(yt(ke,"products_clothes"),{name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:x||"",createdAt:xr.now(),price:J||0});if(B(H=>[{id:M.id,name:t.trim(),category:r,measurement:"unidad",sku:m,size:a||"",color:o||"",brand:c||"",gender:d||"",clientCode:A||"",notes:x||"",createdAt:xr.now()},...H]),W>0){const H=new Date().toISOString().slice(0,10),te=I||H;await $n(yt(ke,"inventory_clothes_batches"),{productId:M.id,productName:t.trim(),category:r,unit:"unidad",quantity:W,remaining:W,purchasePrice:0,salePrice:J||0,invoiceTotal:0,expectedTotal:F||0,date:te,createdAt:xr.now(),status:"PENDIENTE",notes:S||"",sku:m||"",size:a||"",color:o||"",gender:d||"",brand:c||"",clientCode:A||""})}Ae(W>0?" Producto creado y lote de inventario registrado":" Producto de ropa creado"),O()}catch(M){console.error(M),Ae(" Error al crear producto")}},q=async U=>{confirm(`Eliminar el producto "${U.name}"?`)&&(await Mn(Jt(ke,"products_clothes",U.id)),B(J=>J.filter(M=>M.id!==U.id)))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Productos de Ropa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_c,{onClick:me,loading:D}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>{Pe(!0)},children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo producto"]})]})]}),ne&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo producto de ropa"}),i.jsxs("form",{onSubmit:K,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:t,onChange:U=>e(U.target.value),placeholder:"Ej: Blusa floral"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Subcategora"}),i.jsx("select",{className:"w-full border p-2 rounded",value:r,onChange:U=>n(U.target.value),children:N4e.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border p-2 rounded",value:d,onChange:U=>f(U.target.value),children:j4e.map(U=>i.jsx("option",{value:U,children:U||""},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Talla"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:a,onChange:U=>s(U.target.value),children:[i.jsx("option",{value:"",children:""}),Te.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Color"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:U=>l(U.target.value),children:[i.jsx("option",{value:"",children:""}),C4e.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Marca"}),i.jsx("select",{className:"w-full border p-2 rounded",value:c,onChange:U=>u(U.target.value),children:I4e.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"SKU (auto)"}),i.jsx("input",{className:"w-full border p-2 rounded bg-gray-100",value:m,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cdigo cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:U=>h(U.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio de venta (pza)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",step:"0.01",min:0,value:y,onChange:U=>b(U.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad de piezas (crea lote si > 0)"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"number",min:0,value:w,onChange:U=>j(U.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de lote"}),i.jsx("input",{className:"w-full border p-2 rounded",type:"date",value:I,onChange:U=>_(U.target.value)})]}),i.jsxs("div",{className:"md:col-span-2 flex items-center justify-between border-t pt-3 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Medicin:"})," unidad"]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total esperado (auto): "}),isNaN(F)?"":F.toFixed(2)]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar"}),i.jsx("button",{type:"button",onClick:()=>Pe(!1),className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Subcat."}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Talla"}),i.jsx("th",{className:"p-2 border",children:"Color"}),i.jsx("th",{className:"p-2 border",children:"Marca"}),i.jsx("th",{className:"p-2 border",children:"Gnero"}),i.jsx("th",{className:"p-2 border",children:"Cdigo Cliente"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:D?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):k.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin productos"})}):k.map(U=>{var W;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(W=U.createdAt)!=null&&W.toDate?U.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:U.category}),i.jsx("td",{className:"p-2 border",children:U.name}),i.jsx("td",{className:"p-2 border",children:U.sku}),i.jsx("td",{className:"p-2 border",children:U.size||""}),i.jsx("td",{className:"p-2 border",children:U.color||""}),i.jsx("td",{className:"p-2 border",children:U.brand||""}),i.jsx("td",{className:"p-2 border",children:U.gender||""}),i.jsx("td",{className:"p-2 border",children:U.clientCode||""}),i.jsx("td",{className:"p-2 border",children:U.notes||""}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>q(U),children:"Borrar"})})]},U.id)})})]})}),he&&i.jsx("p",{className:"mt-2 text-sm",children:he})]})}async function F4e(t){const{productId:e,quantity:r,saleDate:n,saleId:a}=t,s=Math.max(0,Math.floor(Number(r||0)));if(!e||s<=0)throw new Error("Parmetros invlidos para allocateSaleFIFOClothes");const o=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",e)),u=(await Qt(o)).docs.map(f=>({id:f.id,data:f.data()})).sort((f,A)=>{var v,y;const h=String(f.data.date||""),m=String(A.data.date||"");if(h!==m)return h<m?-1:1;const p=((v=f.data.createdAt)==null?void 0:v.seconds)??0,x=((y=A.data.createdAt)==null?void 0:y.seconds)??0;return p-x}).map(f=>Jt(ke,"inventory_clothes_batches",f.id)),d=[];return await Mi(ke,async f=>{const A=await Promise.all(u.map(m=>f.get(m)));let h=s;for(let m=0;m<u.length&&h>0;m++){const p=u[m],x=A[m];if(!x.exists())continue;const v=x.data(),y=Math.max(0,Math.floor(Number(v.quantity||0))),b=Number.isFinite(Number(v.remaining))?Math.max(0,Math.floor(Number(v.remaining||0))):y;if(b<=0)continue;const w=Math.min(b,h),j=Math.max(0,b-w);f.update(p,{remaining:j}),d.push({batchId:p.id,qty:w,batchDate:String(v.date||""),productName:String(v.productName||"")}),h-=w}if(h>0)throw new Error(`Inventario insuficiente. Faltan ${h} unidades.`);if(a)for(const m of d)await $n(yt(ke,"batch_clothes_allocations"),{saleId:a,saleDate:n,productId:e,productName:m.productName??"",batchId:m.batchId,batchDate:m.batchDate??"",quantity:m.qty,createdAt:xr.now()})}),{allocations:d}}async function Rk(t){const e=Jt(ke,"sales_clothes",t),r=await si(e);if(!r.exists())throw new Error("La venta no existe.");const n=r.data(),a=[];if(Array.isArray(n.items)&&n.items.length>0){const l={};if(n.allocationsByItem&&typeof n.allocationsByItem=="object")for(const c of Object.keys(n.allocationsByItem)){const u=n.allocationsByItem[c],d=String((u==null?void 0:u.productId)||c||"");if(!d)continue;const f=Array.isArray(u==null?void 0:u.allocations)?u.allocations:[];l[d]=f.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))}))}if(Array.isArray(n.allocationsByItem))for(const c of n.allocationsByItem){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Array.isArray(c==null?void 0:c.allocations)?c.allocations:[];l[u]=d.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))}))}for(const c of n.items){const u=String((c==null?void 0:c.productId)||"");if(!u)continue;const d=Math.max(0,Math.floor(Number((c==null?void 0:c.qty)||(c==null?void 0:c.quantity)||0))),f=Array.isArray(c==null?void 0:c.allocations)?c.allocations.map(A=>({batchId:String(A.batchId),qty:Math.max(0,Math.floor(Number(A.qty||A.quantity||0)))})):l[u]||[];a.push({productId:u,productName:String((c==null?void 0:c.productName)||""),qty:d,allocations:f.length?f:void 0})}}else{const l=n.item||{},c=String(l.productId||n.productId||""),u=Math.max(0,Math.floor(Number(l.qty??n.quantity??0))),d=Array.isArray(n.allocations)?n.allocations.map(f=>({batchId:String(f.batchId),qty:Math.max(0,Math.floor(Number(f.qty||f.quantity||0)))})):[];c&&u>0&&a.push({productId:c,productName:String(l.productName||n.productName||""),qty:u,allocations:d.length?d:void 0})}return a.length===0?(await Mi(ke,async l=>{l.delete(e)}),{restored:0}):a.every(l=>Array.isArray(l.allocations)&&l.allocations.length>0)?(await Mi(ke,async c=>{const u=[];for(const f of a)for(const A of f.allocations||[])u.push({ref:Jt(ke,"inventory_clothes_batches",A.batchId),addBack:Math.max(0,Math.floor(Number(A.qty||0)))});const d=await Promise.all(u.map(f=>c.get(f.ref)));for(let f=0;f<u.length;f++){const A=d[f];if(!A.exists())continue;const h=A.data(),m=Math.max(0,Math.floor(Number(h.remaining||0)));c.update(u[f].ref,{remaining:m+u[f].addBack})}c.delete(e)}),{restored:a.reduce((c,u)=>c+(u.allocations||[]).reduce((d,f)=>d+f.qty,0),0)}):(await Mi(ke,async l=>{const c={};for(const h of a){if(!h.productId||h.qty<=0)continue;const m=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",h.productId)),x=(await Qt(m)).docs.map(v=>{const y=v.data(),b=Math.max(0,Math.floor(Number(y.quantity||0))),w=Number.isFinite(Number(y.remaining))?Math.max(0,Math.floor(Number(y.remaining||0))):b;return{id:v.id,date:String(y.date||""),quantity:b,remaining:w}}).sort((v,y)=>v.date.localeCompare(y.date));c[h.productId]=x}const u=[];for(const h of a){if(!h.productId||h.qty<=0)continue;if(Array.isArray(h.allocations)&&h.allocations.length>0){for(const x of h.allocations)u.push({id:x.batchId,addBack:Math.max(0,Math.floor(Number(x.qty||0)))});continue}const m=c[h.productId]||[];let p=h.qty;for(const x of m){if(p<=0)break;const v=Math.max(0,x.quantity-x.remaining);if(v<=0)continue;const y=Math.min(v,p);u.push({id:x.id,addBack:y}),p-=y}for(const x of m){if(p<=0)break;const v=Math.min(p,h.qty);u.push({id:x.id,addBack:v}),p-=v}}const d={};for(const h of u)d[h.id]=(d[h.id]||0)+Math.max(0,Math.floor(Number(h.addBack||0)));const f=Object.keys(d).map(h=>Jt(ke,"inventory_clothes_batches",h)),A=await Promise.all(f.map(h=>l.get(h)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),x=Math.max(0,Math.floor(Number(p.remaining||0))),v=Math.max(0,Math.floor(Number(d[f[h].id]||0)));l.update(f[h],{remaining:x+v})}l.delete(e)}),{restored:a.reduce((l,c)=>l+c.qty,0)})}const KV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Sh=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function RC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function qV(t){const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}function O4e(){const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[a,s]=g.useState(null),[o,l]=g.useState([]),c=async _e=>{e(!0),n(!0),s(_e),l([]);try{const ie=(await Qt(ar(yt(ke,"sales_clothes"),mr("__name__","==",_e)))).docs[0],Oe=ie==null?void 0:ie.data(),De=(Array.isArray(Oe==null?void 0:Oe.items)?Oe.items:Oe!=null&&Oe.item?[Oe.item]:[]).map(He=>({productName:String(He.productName||""),qty:Number(He.qty||0),unitPrice:Number(He.unitPrice||0),discount:Number(He.discount||0),total:Number(He.total||0)}));l(De)}catch(xe){console.error(xe)}finally{n(!1)}},[u,d]=g.useState(""),[f,A]=g.useState("+505 "),[h,m]=g.useState(""),[p,x]=g.useState(""),[v,y]=g.useState("ACTIVO"),[b,w]=g.useState(0),[j,I]=g.useState([]),[_,S]=g.useState(!0),[E,F]=g.useState(""),[k,B]=g.useState(null),[D,X]=g.useState(""),[he,Ae]=g.useState("+505 "),[fe,me]=g.useState(""),[ne,Pe]=g.useState(""),[Te,O]=g.useState("ACTIVO"),[K,q]=g.useState(0),[U,W]=g.useState(!1),[J,M]=g.useState(null),[H,te]=g.useState(!1),[ve,Q]=g.useState([]),[Ke,ae]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0}),[ee,Fe]=g.useState(!1),[ce,be]=g.useState(0),[Ve,We]=g.useState(new Date().toISOString().slice(0,10)),[pt,wt]=g.useState(""),[Ct,St]=g.useState(!1),[Rt,jt]=g.useState(null),[Ue,Be]=g.useState(""),[ye,oe]=g.useState(0),[Z,Ne]=g.useState(""),[Re,ge]=g.useState(!1);g.useEffect(()=>{(async()=>{const _e=ar(yt(ke,"customers_clothes"),wn("createdAt","desc")),xe=await Qt(_e),ie=[];xe.forEach(Oe=>{const le=Oe.data();ie.push({id:Oe.id,name:le.name??"",phone:le.phone??"+505 ",place:le.place??"",notes:le.notes??"",status:le.status??"ACTIVO",creditLimit:Number(le.creditLimit??0),createdAt:le.createdAt??xr.now(),balance:0})});for(const Oe of ie)try{const le=ar(yt(ke,"ar_movements"),mr("customerId","==",Oe.id)),De=await Qt(le);let He=0;De.forEach(P=>He+=Number(P.data().amount||0)),Oe.balance=He}catch{Oe.balance=0}I(ie),S(!1)})()},[]);const Xe=()=>{d(""),A("+505 "),m(""),x(""),y("ACTIVO"),w(0)},vt=async _e=>{if(_e.preventDefault(),F(""),!u.trim()){F("Ingresa el nombre.");return}const xe=RC(f);if(xe.length<6){F("Telfono incompleto.");return}try{const ie=await $n(yt(ke,"customers_clothes"),{name:u.trim(),phone:xe,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:xr.now()});I(Oe=>[{id:ie.id,name:u.trim(),phone:xe,place:h||"",notes:p||"",status:v,creditLimit:Number(b||0),createdAt:xr.now(),balance:0},...Oe]),Xe(),ge(!1),F(" Cliente creado")}catch(ie){console.error(ie),F(" Error al crear cliente")}},it=_e=>{B(_e.id),X(_e.name),Ae(_e.phone||"+505 "),me(_e.place||""),Pe(_e.notes||""),O(_e.status||"ACTIVO"),q(Number(_e.creditLimit||0))},de=()=>{B(null),X(""),Ae("+505 "),me(""),Pe(""),O("ACTIVO"),q(0)},Ce=async()=>{if(!k)return;const _e=RC(he);if(!D.trim()){F("Ingresa el nombre.");return}try{await _n(Jt(ke,"customers_clothes",k),{name:D.trim(),phone:_e,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0)}),I(xe=>xe.map(ie=>ie.id===k?{...ie,name:D.trim(),phone:_e,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0)}:ie)),de(),F(" Cliente actualizado")}catch(xe){console.error(xe),F(" Error al actualizar")}},Ye=async _e=>{if(confirm(`Eliminar al cliente "${_e.name}"?
Se devolvern al inventario todas las prendas de sus compras y se borrarn sus movimientos.`))try{S(!0);const ie=ar(yt(ke,"sales_clothes"),mr("customerId","==",_e.id)),Oe=await Qt(ie);for(const He of Oe.docs){const P=He.id;try{await Rk(P)}catch(R){console.warn("restoreSaleAndDeleteClothes error",R);try{await Mn(Jt(ke,"sales_clothes",P))}catch{}}await qV(P)}const le=ar(yt(ke,"ar_movements"),mr("customerId","==",_e.id)),De=await Qt(le);await Promise.all(De.docs.map(He=>Mn(Jt(ke,"ar_movements",He.id)))),await Mn(Jt(ke,"customers_clothes",_e.id)),I(He=>He.filter(P=>P.id!==_e.id)),F(" Cliente eliminado y prendas devueltas al inventario")}catch(ie){console.error(ie),F(" No se pudo eliminar el cliente.")}finally{S(!1)}},ft=async _e=>{M(_e),Q([]),ae({saldoActual:0,totalAbonado:0,totalCargos:0}),W(!0),Fe(!1),be(0),We(new Date().toISOString().slice(0,10)),wt(""),jt(null),te(!0);try{const xe=ar(yt(ke,"ar_movements"),mr("customerId","==",_e.id)),ie=await Qt(xe),Oe=[];ie.forEach(le=>{var He,P;const De=le.data();Oe.push({id:le.id,date:De.date??((P=(He=De.createdAt)==null?void 0:He.toDate)!=null&&P.call(He)?De.createdAt.toDate().toISOString().slice(0,10):""),type:De.type??"CARGO",amount:Number(De.amount||0),ref:De.ref||{},comment:De.comment||"",createdAt:De.createdAt})}),Oe.sort((le,De)=>{var R,L;if(le.date!==De.date)return le.date.localeCompare(De.date);const He=((R=le.createdAt)==null?void 0:R.seconds)||0,P=((L=De.createdAt)==null?void 0:L.seconds)||0;return He-P}),Q(Oe),we(Oe)}catch(xe){console.error(xe),F(" No se pudo cargar el estado de cuenta")}finally{te(!1)}},we=_e=>{const xe=_e.reduce((le,De)=>le+(Number(De.amount)||0),0),ie=_e.filter(le=>Number(le.amount)<0).reduce((le,De)=>le+Math.abs(Number(De.amount)||0),0),Oe=_e.filter(le=>Number(le.amount)>0).reduce((le,De)=>le+Number(De.amount)||0,0);ae({saldoActual:xe,totalAbonado:ie,totalCargos:Oe})},Le=async()=>{if(!J)return;F("");const _e=Number(ce||0);if(!(_e>0)){F("Ingresa un monto de abono mayor a 0.");return}const xe=parseFloat(_e.toFixed(2));if(!Ve){F("Selecciona la fecha del abono.");return}try{St(!0);const ie={customerId:J.id,type:"ABONO",amount:-xe,date:Ve,comment:pt||"",createdAt:xr.now()},le={id:(await $n(yt(ke,"ar_movements"),ie)).id,date:Ve,type:"ABONO",amount:-xe,comment:pt||"",createdAt:xr.now()},De=[...ve,le].sort((He,P)=>{var G,re;if(He.date!==P.date)return He.date.localeCompare(P.date);const R=((G=He.createdAt)==null?void 0:G.seconds)||0,L=((re=P.createdAt)==null?void 0:re.seconds)||0;return R-L});Q(De),we(De),I(He=>He.map(P=>P.id===J.id?{...P,balance:(P.balance||0)-xe}:P)),M(He=>He&&{...He,balance:(He.balance||0)-xe}),be(0),wt(""),We(new Date().toISOString().slice(0,10)),Fe(!1),F(" Abono registrado")}catch(ie){console.error(ie),F(" Error al registrar el abono")}finally{St(!1)}},gt=_e=>{jt(_e.id),Be(_e.date||new Date().toISOString().slice(0,10)),oe(Math.abs(Number(_e.amount||0))),Ne(_e.comment||"")},Ut=()=>{jt(null),Be(""),oe(0),Ne("")},Mt=async()=>{if(!Rt)return;const _e=ve.findIndex(le=>le.id===Rt);if(_e===-1)return;const xe=ve[_e],ie=Number(ye||0);if(!(ie>0)){F("El monto debe ser mayor a 0.");return}const Oe=xe.type==="ABONO"?-parseFloat(ie.toFixed(2)):+parseFloat(ie.toFixed(2));try{await _n(Jt(ke,"ar_movements",Rt),{date:Ue,amount:Oe,comment:Z||""});const le=[...ve];le[_e]={...xe,date:Ue,amount:Oe,comment:Z||""},le.sort((He,P)=>{var G,re;if(He.date!==P.date)return He.date.localeCompare(P.date);const R=((G=He.createdAt)==null?void 0:G.seconds)||0,L=((re=P.createdAt)==null?void 0:re.seconds)||0;return R-L}),Q(le),we(le);const De=le.reduce((He,P)=>He+(Number(P.amount)||0),0);I(He=>He.map(P=>P.id===(J==null?void 0:J.id)?{...P,balance:De}:P)),M(He=>He&&{...He,balance:De}),Ut(),F(" Movimiento actualizado")}catch(le){console.error(le),F(" Error al actualizar movimiento")}},Yt=async _e=>{var ie,Oe;if(confirm(`Eliminar este movimiento (${_e.type==="ABONO"?"Abono":"Compra"}) del ${_e.date}?${_e.type==="CARGO"&&((ie=_e.ref)!=null&&ie.saleId)?`
Se devolvern al inventario las prendas de esa venta.`:""}`))try{if(S(!0),_e.type==="CARGO"&&((Oe=_e.ref)!=null&&Oe.saleId)){try{await Rk(_e.ref.saleId)}catch(He){console.warn("restoreSaleAndDeleteClothes error",He),S(!1),F(" No se pudo devolver inventario de la venta.");return}await qV(_e.ref.saleId)}else await Mn(Jt(ke,"ar_movements",_e.id));const le=ve.filter(He=>{var P,R;return _e.type==="CARGO"&&((P=_e.ref)!=null&&P.saleId)?((R=He.ref)==null?void 0:R.saleId)!==_e.ref.saleId:He.id!==_e.id});Q(le),we(le);const De=le.reduce((He,P)=>He+(Number(P.amount)||0),0);I(He=>He.map(P=>P.id===(J==null?void 0:J.id)?{...P,balance:De}:P)),M(He=>He&&{...He,balance:De}),F(" Movimiento eliminado")}catch(le){console.error(le),F(" Error al eliminar movimiento")}finally{S(!1)}},st=g.useMemo(()=>[...j].sort((_e,xe)=>{var ie,Oe;return _e.status!==xe.status?_e.status==="BLOQUEADO"?1:-1:(((ie=xe.createdAt)==null?void 0:ie.seconds)||0)-(((Oe=_e.createdAt)==null?void 0:Oe.seconds)||0)}),[j]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Ropa)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>ge(!0),type:"button",children:"Crear Cliente"})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:_?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):st.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin clientes"})}):st.map(_e=>{var ie;const xe=k===_e.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(ie=_e.createdAt)!=null&&ie.toDate?_e.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border",children:xe?i.jsx("input",{className:"w-full border p-1 rounded",value:D,onChange:Oe=>X(Oe.target.value)}):_e.name}),i.jsx("td",{className:"p-2 border",children:xe?i.jsx("input",{className:"w-full border p-1 rounded",value:he,onChange:Oe=>Ae(RC(Oe.target.value))}):_e.phone}),i.jsx("td",{className:"p-2 border",children:xe?i.jsxs("select",{className:"w-full border p-1 rounded",value:fe,onChange:Oe=>me(Oe.target.value),children:[i.jsx("option",{value:"",children:""}),KV.map(Oe=>i.jsx("option",{value:Oe,children:Oe},Oe))]}):_e.place||""}),i.jsx("td",{className:"p-2 border",children:xe?i.jsxs("select",{className:"w-full border p-1 rounded",value:Te,onChange:Oe=>O(Oe.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_e.status==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_e.status})}),i.jsx("td",{className:"p-2 border",children:xe?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(K)?"":K,onChange:Oe=>q(Math.max(0,Number(Oe.target.value||0)))}):Sh(_e.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Sh(_e.balance||0)}),i.jsx("td",{className:"p-2 border",children:xe?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:ne,onChange:Oe=>Pe(Oe.target.value),maxLength:500}):i.jsx("span",{title:_e.notes||"",children:(_e.notes||"").length>40?(_e.notes||"").slice(0,40)+"":_e.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:xe?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Ce,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:de,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>it(_e),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Ye(_e),children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>ft(_e),title:"Ver compras y abonos",children:"Estado de cuenta"})]})})})]},_e.id)})})]})}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),Re&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>ge(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:vt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:u,onChange:_e=>d(_e.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:f,onChange:_e=>A(RC(_e.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:_e=>m(_e.target.value),children:[i.jsx("option",{value:"",children:""}),KV.map(_e=>i.jsx("option",{value:_e,children:_e},_e))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:_e=>y(_e.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:b===0?"":b,onChange:_e=>w(Math.max(0,Number(_e.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:p,onChange:_e=>x(_e.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[p.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ge(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),U&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(J==null?void 0:J.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{be(0),We(new Date().toISOString().slice(0,10)),wt(""),Fe(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>W(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Sh(Ke.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Sh(Ke.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Sh(Ke.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:H?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):ve.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):ve.map(_e=>{var ie,Oe;const xe=Rt===_e.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:xe?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:Ue,onChange:le=>Be(le.target.value)}):_e.date||""}),i.jsx("td",{className:"p-2 border",children:_e.amount>=0?(ie=_e.ref)!=null&&ie.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver piezas de esta compra",onClick:()=>c(_e.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(Oe=_e.ref)!=null&&Oe.saleId?`Venta #${_e.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:xe?i.jsx("input",{className:"w-full border p-1 rounded",value:Z,onChange:le=>Ne(le.target.value),placeholder:"Comentario"}):i.jsx("span",{title:_e.comment||"",children:(_e.comment||"").length>40?(_e.comment||"").slice(0,40)+"":_e.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:xe?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(ye)?"":ye,onChange:le=>{const De=Number(le.target.value||0),He=Number.isFinite(De)?Math.max(0,parseFloat(De.toFixed(2))):0;oe(He)},placeholder:"0.00",title:_e.type==="ABONO"?"Se guardar como negativo":"Se guardar como positivo"}):Sh(_e.amount)}),i.jsx("td",{className:"p-2 border",children:xe?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Mt,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ut,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>gt(_e),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Yt(_e),children:"Borrar"})]})})]},_e.id)})})]})})]})}),ee&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(J==null?void 0:J.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ve,onChange:_e=>We(_e.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto del abono"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:ce===0?"":ce,onChange:_e=>{const xe=Number(_e.target.value||0),ie=Number.isFinite(xe)?Math.max(0,parseFloat(xe.toFixed(2))):0;be(ie)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se guarda con 2 decimales (se registrar como ABONO negativo)."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:pt,onChange:_e=>wt(_e.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[pt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Fe(!1),disabled:Ct,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Le,disabled:Ct,children:Ct?"Guardando...":"Guardar abono"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((_e,xe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:_e.productName}),i.jsx("td",{className:"p-2 border text-right",children:_e.qty}),i.jsx("td",{className:"p-2 border text-right",children:Sh(_e.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Sh(_e.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Sh(_e.total)})]},xe))})]})})]})})]})}const ux=t=>`C$ ${(Number(t)||0).toFixed(2)}`,D4e=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"];async function R4e(t){if(!t)return 0;const e=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",t)),r=await Qt(e);let n="0000-00-00",a=-1,s=0;return r.forEach(o=>{const l=o.data(),c=String(l.date||"0000-00-00"),u=Number(l.salePrice||0),d=l.createdAt,f=((d==null?void 0:d.seconds)??0)*1e3+((d==null?void 0:d.nanoseconds)??0)/1e6;c>n?(n=c,a=f,s=u):c===n&&f>a&&(a=f,s=u)}),Number(s||0)}async function zV(t){if(!t)return 0;const e=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",t)),r=await Qt(e);let n=0;return r.forEach(a=>n+=Number(a.data().remaining||0)),n}function WV(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function M4e({role:t="",roles:e}={role:""}){const r=e&&e.length?e:t;xn(r,"admin"),xn(r,"vendedor_ropa");const[n,a]=g.useState([]),[s,o]=g.useState([]),[l,c]=g.useState({}),[u,d]=g.useState("CONTADO"),[f,A]=g.useState(""),[h,m]=g.useState(""),[p,x]=g.useState(new Date().toISOString().slice(0,10)),[v,y]=g.useState(""),[b,w]=g.useState([]),j=g.useMemo(()=>b.reduce((ce,be)=>ce+(be.qty||0),0),[b]),I=g.useMemo(()=>{const ce=b.reduce((be,Ve)=>{const We=Math.max(0,(Number(Ve.unitPrice)||0)*(Ve.qty||0)-(Number(Ve.discount)||0));return be+We},0);return Math.floor(ce*100)/100},[b]),[_,S]=g.useState(0),[E,F]=g.useState(""),[k,B]=g.useState(!1),[D,X]=g.useState(!1),[he,Ae]=g.useState(""),[fe,me]=g.useState("+505 "),[ne,Pe]=g.useState(""),[Te,O]=g.useState(""),[K,q]=g.useState("ACTIVO"),[U,W]=g.useState(0),J=()=>{Ae(""),me("+505 "),Pe(""),O(""),q("ACTIVO"),W(0)};g.useEffect(()=>{(async()=>{const ce=ar(yt(ke,"customers_clothes"),wn("createdAt","desc")),be=await Qt(ce),Ve=[];be.forEach(jt=>{const Ue=jt.data();Ve.push({id:jt.id,name:Ue.name??"",phone:Ue.phone??"+505 ",place:Ue.place??"",status:Ue.status??"ACTIVO",creditLimit:Number(Ue.creditLimit??0),balance:0})});for(const jt of Ve)try{const Ue=ar(yt(ke,"ar_movements"),mr("customerId","==",jt.id)),Be=await Qt(Ue);let ye=0;Be.forEach(oe=>ye+=Number(oe.data().amount||0)),jt.balance=ye}catch{jt.balance=0}a(Ve);const We=ar(yt(ke,"products_clothes"),wn("createdAt","desc")),pt=await Qt(We),wt=[];pt.forEach(jt=>{const Ue=jt.data();wt.push({id:jt.id,name:Ue.name??"(sin nombre)",sku:Ue.sku??""})}),o(wt);const Ct=ar(yt(ke,"inventory_clothes_batches"),mr("remaining",">",0)),St=await Qt(Ct),Rt={};St.forEach(jt=>{const Ue=jt.data(),Be=Ue.productId||"",ye=Number(Ue.remaining||0);Be&&(Rt[Be]=(Rt[Be]||0)+ye)}),c(Rt)})()},[]);const M=g.useMemo(()=>n.find(ce=>ce.id===f),[n,f]),H=(M==null?void 0:M.balance)||0,te=u==="CREDITO"?H+Math.max(0,Number(I||0))-Math.max(0,Number(_||0)):0,ve=async ce=>{if(!ce)return;if(b.some(wt=>wt.productId===ce)){y("");return}const be=s.find(wt=>wt.id===ce);if(!be){y("");return}let Ve=await R4e(ce);Ve||(Ve=Number((be==null?void 0:be.price)||0));const We=await zV(ce),pt={productId:ce,productName:be.name||"",sku:be.sku||"",unitPrice:Number(Ve)||0,available:Number(We)||0,qty:0,discount:0};w(wt=>[...wt,pt]),y("")},Q=(ce,be)=>{w(Ve=>Ve.map(We=>{if(We.productId!==ce)return We;if(be==="")return{...We,qty:0};const pt=Math.max(0,Math.floor(Number(be)));return{...We,qty:pt}}))},Ke=(ce,be)=>{w(Ve=>Ve.map(We=>{if(We.productId!==ce)return We;if(be==="")return{...We,discount:0};const pt=Math.max(0,Math.floor(Number(be)));return{...We,discount:pt}}))},ae=ce=>w(be=>be.filter(Ve=>Ve.productId!==ce)),ee=async()=>{if(!p)return"Selecciona la fecha.";if(b.length===0)return"Agrega al menos un producto.";const ce=b.filter(be=>(be.qty||0)>0);if(ce.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(I>0))return"El total debe ser mayor a cero.";if(u==="CONTADO"){if(!h.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!f)return"Selecciona un cliente (crdito).";if(_<0)return"El pago inicial no puede ser negativo.";if(_>I)return"El pago inicial no puede superar el total.";if((M==null?void 0:M.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const be of ce){const Ve=await zV(be.productId);if(be.qty>Ve)return`Inventario insuficiente para "${be.productName}". Disponible: ${Ve} unidades.`;const We=(Number(be.unitPrice)||0)*(be.qty||0),pt=Number(be.discount)||0;if(!Number.isInteger(pt)||pt<0)return`El descuento en "${be.productName}" debe ser entero y  0.`;if(pt>We)return`El descuento en "${be.productName}" no puede exceder C$ ${We.toFixed(2)}.`}return null},Fe=async ce=>{ce.preventDefault(),F("");const be=await ee();if(be){F(" "+be);return}try{B(!0);const Ve=b.filter(Ct=>(Ct.qty||0)>0).map(Ct=>{const St=(Number(Ct.unitPrice)||0)*(Ct.qty||0),Rt=Math.max(0,Math.floor(Number(Ct.discount)||0)),jt=Math.max(0,St-Rt);return{productId:Ct.productId,productName:Ct.productName,sku:Ct.sku||"",qty:Ct.qty,unitPrice:Number(Ct.unitPrice)||0,discount:Rt,total:Math.floor(jt*100)/100}}),We={type:u,date:p,createdAt:xr.now(),itemsTotal:Number(I)||0,total:Number(I)||0,quantity:Number(j)||0,items:Ve};u==="CONTADO"?We.customerName=h.trim():(We.customerId=f,We.downPayment=Number(_)||0);const pt=await $n(yt(ke,"sales_clothes"),We);if(u==="CREDITO"&&f){const Ct={customerId:f,date:p,createdAt:xr.now(),ref:{saleId:pt.id}};await $n(yt(ke,"ar_movements"),{...Ct,type:"CARGO",amount:Number(I)||0}),Number(_)>0&&await $n(yt(ke,"ar_movements"),{...Ct,type:"ABONO",amount:-Number(_)})}const wt={};for(const Ct of Ve)if(Ct.qty>0){const{allocations:St}=await F4e({productId:Ct.productId,quantity:Ct.qty,saleDate:p,saleId:pt.id});wt[Ct.productId]={productId:Ct.productId,allocations:St}}await _n(Jt(ke,"sales_clothes",pt.id),{allocationsByItem:wt}),d("CONTADO"),A(""),m(""),x(new Date().toISOString().slice(0,10)),w([]),S(0),u==="CREDITO"&&f&&a(Ct=>Ct.map(St=>St.id===f?{...St,balance:(St.balance||0)+(Number(I)||0)-(Number(_)||0)}:St)),F(" Venta registrada"),(async()=>{const Ct=ar(yt(ke,"inventory_clothes_batches"),mr("remaining",">",0)),St=await Qt(Ct),Rt={};St.forEach(jt=>{const Ue=jt.data(),Be=Ue.productId||"",ye=Number(Ue.remaining||0);Be&&(Rt[Be]=(Rt[Be]||0)+ye)}),c(Rt)})()}catch(Ve){console.error(Ve),F(" Error al guardar la venta")}finally{B(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas (Ropa)"}),i.jsxs("form",{onSubmit:Fe,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:u,onChange:ce=>d(ce.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),u==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:h,onChange:ce=>m(ce.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{className:"flex-1 border p-2 rounded",value:f,onChange:ce=>A(ce.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),n.map(ce=>i.jsxs("option",{value:ce.status==="ACTIVO"?ce.id:"",disabled:ce.status==="BLOQUEADO",children:[ce.name," | ",ce.phone," | Saldo: ",ux(ce.balance||0)]},ce.id))]}),i.jsx("button",{type:"button",className:"px-20 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>X(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:ux(H)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:_===0?"":_,onChange:ce=>S(Math.max(0,Number(ce.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:ux(te)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:p,onChange:ce=>x(ce.target.value)})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:async ce=>{const be=ce.target.value;y(be),await ve(be)},children:[i.jsx("option",{value:"",children:"Selecciona un producto"}),s.map(ce=>{const be=b.some(pt=>pt.productId===ce.id),Ve=l[ce.id]||0,We=be||Ve<=0;return i.jsxs("option",{value:We?"":ce.id,disabled:We,children:[ce.name," ",ce.sku?` ${ce.sku}`:""," ",Ve>0?`(disp: ${Ve})`:"(sin stock)",be?" (seleccionado)":""]},ce.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Productos sin existencias se muestran en gris y no se pueden seleccionar."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"border rounded overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),b.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):b.map(ce=>{const be=Math.max(0,(ce.available||0)-(ce.qty||0)),Ve=(Number(ce.unitPrice)||0)*(ce.qty||0),We=Math.max(0,Ve-(Number(ce.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[ce.productName,ce.sku?`  ${ce.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:ux(ce.unitPrice)}),i.jsx("div",{className:"col-span-2 text-right",children:be}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.qty)||ce.qty===0?"":ce.qty,onChange:pt=>Q(ce.productId,pt.target.value),inputMode:"numeric",placeholder:"0",title:"Cantidad de piezas"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ce.discount)||ce.discount===0?"":ce.discount,onChange:pt=>Ke(ce.productId,pt.target.value),inputMode:"numeric",placeholder:"0",title:"Descuento entero (C$)"})}),i.jsx("div",{className:"col-span-1 text-right",children:ux(We)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>ae(ce.productId),title:"Quitar producto",children:""})})]},ce.productId)})]}),b.length>0&&i.jsxs("div",{className:"flex justify-end gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Piezas totales: "}),i.jsx("span",{className:"font-semibold",children:j})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:ux(I)})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:k,children:k?"Guardando...":"Registrar venta"})})]}),E&&i.jsx("p",{className:"mt-2 text-sm",children:E}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-xl p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:ce=>Ae(ce.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:fe,onChange:ce=>me(WV(ce.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ne,onChange:ce=>Pe(ce.target.value),children:[i.jsx("option",{value:"",children:""}),D4e.map(ce=>i.jsx("option",{value:ce,children:ce},ce))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:K,onChange:ce=>q(ce.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:U===0?"":U,onChange:ce=>W(Math.max(0,Number(ce.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Te,onChange:ce=>O(ce.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{J(),X(!1)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{if(F(""),!he.trim()){F("Ingresa el nombre del nuevo cliente.");return}const ce=WV(fe);try{const be=await $n(yt(ke,"customers_clothes"),{name:he.trim(),phone:ce,place:ne||"",notes:Te||"",status:K,creditLimit:Number(U||0),createdAt:xr.now()}),Ve={id:be.id,name:he.trim(),phone:ce,place:ne||"",status:K,creditLimit:Number(U||0),balance:0};a(We=>[Ve,...We]),A(be.id),J(),X(!1),F(" Cliente creado")}catch(be){console.error(be),F(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),k&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const lo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function lE(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Br(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function L4e(t,e){const r=lE(t);if(!r)return null;if(Array.isArray(t.items))return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??0),items:t.items.map(o=>({productId:String(o.productId||""),productName:String(o.productName||""),sku:o.sku||"",qty:Number(o.qty||0),unitPrice:Number(o.unitPrice??(Number(o.total||0)/Math.max(1,Number(o.qty||0))||0)),discount:Number(o.discount||0)})),customerId:t.customerId||void 0,customerName:t.customerName||void 0};const n=t.item||{},a=Number(t.quantity??n.qty??0),s=Number(t.total??t.itemsTotal??n.total??0);return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total??t.itemsTotal??s??0),items:[{productId:String(n.productId||t.productId||""),productName:String(n.productName||t.productName||""),sku:n.sku||t.sku||"",qty:a,unitPrice:Number(n.unitPrice??(s&&a?s/a:0)),discount:Number(n.discount||0)}],customerId:t.customerId||void 0,customerName:t.customerName||void 0}}function U4e(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}function Q4e(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(!1),[S,E]=g.useState(null),[F,k]=g.useState([]),[B,D]=g.useState(!1),[X,he]=g.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});g.useEffect(()=>{(async()=>{b(!0),j("");try{const O=await Qt(yt(ke,"sales_clothes")),K=[],q=[];O.forEach(ae=>{const ee=ae.data(),Fe=L4e(ee,ae.id);Fe&&(Fe.date<=a&&K.push(Fe),Fe.date>=r&&Fe.date<=a&&q.push(Fe))}),u(K),l(q);const U=await Qt(yt(ke,"inventory_clothes_batches")),W=[];U.forEach(ae=>{const ee=ae.data(),Fe=lE(ee);!Fe||Fe>a||W.push({id:ae.id,productId:ee.productId,productName:ee.productName||"",date:Fe,quantity:Number(ee.quantity||0),remaining:Number(ee.remaining||0),purchasePrice:Number(ee.purchasePrice||0)})}),f(W);const J=await Qt(yt(ke,"expenses_clothes")),M=[];J.forEach(ae=>{const ee=ae.data(),Fe=lE(ee);Fe&&Fe>=r&&Fe<=a&&M.push({id:ae.id,date:Fe,category:ee.category||"",description:ee.description||"",amount:Number(ee.amount||0),status:ee.status||""})}),h(M);const H=await Qt(yt(ke,"ar_movements")),te=[],ve={};H.forEach(ae=>{const ee=ae.data(),Fe=lE(ee);if(!Fe)return;const ce=ee.customerId,be=Number(ee.amount||0);ce&&(ve[ce]=(ve[ce]||0)+be),ee.type==="ABONO"&&Fe>=r&&Fe<=a&&te.push({id:ae.id,customerId:ce,type:"ABONO",amount:be,date:Fe})}),p(te);const Q=await Qt(yt(ke,"customers_clothes")),Ke=[];Q.forEach(ae=>{const ee=ae.data();Ke.push({id:ae.id,name:ee.name||"",balance:ve[ae.id]||0})}),v(Ke)}catch(O){console.error(O),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const Ae=g.useMemo(()=>{try{return U4e(d,c,r,a)}catch(O){return console.error(O),0}},[d,c,r,a]),fe=g.useMemo(()=>{const O=o.reduce((ve,Q)=>ve+(Q.total||0),0),K=A.reduce((ve,Q)=>ve+(Q.amount||0),0),q=O-Ae,U=q-K,W=m.reduce((ve,Q)=>ve+Math.abs(Q.amount||0),0),J=x.filter(ve=>(ve.balance||0)>0),M=J.reduce((ve,Q)=>ve+(Q.balance||0),0);let H=0,te=0;for(const ve of o){const Q=(ve.items||[]).reduce((Ke,ae)=>Ke+(Number(ae.qty)||0),0);ve.type==="CONTADO"?H+=Q:te+=Q}return{ventasTotales:O,costoMercaderia:Ae,gastosPeriodo:K,gananciaAntes:q,gananciaDespues:U,abonosRecibidos:W,saldosPendientes:M,clientesConSaldo:J.length,prendasCash:H,prendasCredito:te}},[o,A,m,x,Ae]),me=g.useMemo(()=>{const O={};for(const K of o){if(K.type!=="CREDITO"||!K.customerId)continue;const q=(K.items||[]).reduce((U,W)=>U+(Number(W.qty)||0),0);O[K.customerId]=(O[K.customerId]||0)+q}return x.filter(K=>(K.balance||0)>0).map(K=>({customerId:K.id,name:K.name,prendasCredito:O[K.id]||0,saldo:K.balance||0})).sort((K,q)=>q.saldo-K.saldo)},[x,o]),ne=g.useMemo(()=>{const O={};return x.forEach(K=>O[K.id]=K.name),O},[x]),Pe=g.useMemo(()=>[...o].sort((O,K)=>K.date.localeCompare(O.date)).map(O=>{var U;const K=(O.items||[]).reduce((W,J)=>W+(Number(J.qty)||0),0);let q="Cash";return O.type==="CREDITO"&&O.customerId?q=ne[O.customerId]||"":O.type==="CONTADO"&&(q=((U=O.customerName)==null?void 0:U.trim())||"Cash"),{id:O.id,date:O.date,type:O.type==="CREDITO"?"Crdito":"Cash",customer:q,piezas:K,total:Number(O.total||0)}}),[o,ne]),Te=async O=>{_(!0),E({id:O.customerId,name:O.name}),k([]),D(!0),he({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const K=[];let q=0,U=0,W=0;for(const te of o)if(!(te.type!=="CREDITO"||te.customerId!==O.customerId))for(const ve of te.items||[]){const Q=Number(ve.qty||0),Ke=Number(ve.unitPrice||0),ae=Q*Ke,ee=Math.max(0,Number(ve.discount||0)),Fe=Math.max(0,ae-ee);K.push({saleId:te.id,date:te.date,productName:ve.productName,sku:ve.sku||"",qty:Q,unitPrice:Ke,lineTotal:ae,discount:ee,lineFinal:Fe}),q+=ae,U+=ee,W+=Fe}let J=0;for(const te of m)te.customerId===O.customerId&&(J+=Math.abs(te.amount||0));const M=x.find(te=>te.id===O.customerId),H=(M==null?void 0:M.balance)||0;k(K),he({totalBruto:q,totalDescuento:U,totalFiado:W,saldoActual:H,abonadoPeriodo:J})}catch(K){console.error(K),j(" No se pudo cargar el detalle del cliente.")}finally{D(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Ropa)"}),i.jsx(_c,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:O=>n(O.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:O=>s(O.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(fe.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Cash + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(fe.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia antes de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:lo(fe.gananciaAntes)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos del Negocio"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(fe.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia despus de Gastos"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:lo(fe.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(fe.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(fe.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:fe.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prendas Crdito (vendidas)"}),i.jsx("div",{className:"text-xl font-semibold",children:fe.prendasCredito})]})]}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Consolidado por cliente"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Prendas Crdito (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo actual"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:3,children:"Sin clientes con saldo"})}):me.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Te({customerId:O.customerId,name:O.name}),title:"Ver piezas fiadas del periodo",children:O.prendasCredito})}),i.jsx("td",{className:"p-2 border font-semibold",children:lo(O.saldo)})]},O.customerId))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin transacciones en el rango seleccionado."})}):Pe.map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.customer}),i.jsx("td",{className:"p-2 border",children:O.type}),i.jsx("td",{className:"p-2 border",children:O.piezas}),i.jsx("td",{className:"p-2 border",children:lo(O.total)})]},O.id))})]})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((O,K)=>O.date.localeCompare(K.date)).map(O=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.category||""}),i.jsx("td",{className:"p-2 border",children:O.description?i.jsx("span",{title:O.description,children:O.description.length>40?O.description.slice(0,40)+"":O.description}):""}),i.jsx("td",{className:"p-2 border",children:lo(O.amount)}),i.jsx("td",{className:"p-2 border",children:O.status||""})]},O.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle del cliente  ",(S==null?void 0:S.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>_(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total Bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(X.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(X.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Total Fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(X.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(X.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:lo(X.abonadoPeriodo)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Pieza"}),i.jsx("th",{className:"p-2 border",children:"SKU"}),i.jsx("th",{className:"p-2 border",children:"Cant."}),i.jsx("th",{className:"p-2 border",children:"P. Unit"}),i.jsx("th",{className:"p-2 border",children:"Monto"})," ",i.jsx("th",{className:"p-2 border",children:"Descuento"})," ",i.jsx("th",{className:"p-2 border",children:"Monto final"})," "]})}),i.jsx("tbody",{children:B?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin piezas fiadas en el periodo."})}):F.sort((O,K)=>O.date.localeCompare(K.date)).map((O,K)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:O.date}),i.jsx("td",{className:"p-2 border",children:O.productName}),i.jsx("td",{className:"p-2 border",children:O.sku||""}),i.jsx("td",{className:"p-2 border",children:O.qty}),i.jsx("td",{className:"p-2 border",children:lo(O.unitPrice)}),i.jsx("td",{className:"p-2 border",children:lo(O.lineTotal)}),i.jsx("td",{className:"p-2 border",children:lo(O.discount)}),i.jsx("td",{className:"p-2 border",children:lo(O.lineFinal)})]},`${O.saleId}-${K}`))})]})})]})})]})}const XV=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],MC=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function V4e(){const[t,e]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[r,n]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Br(new Date,"yyyy-MM-dd")),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(0),[A,h]=g.useState("PENDIENTE"),[m,p]=g.useState(""),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState(""),[F,k]=g.useState(""),[B,D]=g.useState(""),[X,he]=g.useState(0),[Ae,fe]=g.useState("PENDIENTE"),[me,ne]=g.useState("");g.useEffect(()=>{(async()=>{b(!0);try{const M=ar(yt(ke,"expenses_clothes"),wn("date","desc")),H=await Qt(M),te=[];H.forEach(ve=>{const Q=ve.data();te.push({id:ve.id,date:Q.date||Br(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??xr.now()})}),v(te)}catch(M){console.error(M),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=g.useMemo(()=>x.filter(M=>!(t&&M.date<t||r&&M.date>r)),[x,t,r]),Te=g.useMemo(()=>{const M=Pe.reduce((ve,Q)=>ve+(Q.amount||0),0),H=Pe.filter(ve=>ve.status==="PAGADO").reduce((ve,Q)=>ve+(Q.amount||0),0),te=M-H;return{total:M,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Br(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},K=async M=>{if(M.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await $n(yt(ke,"expenses_clothes"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:xr.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:xr.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},q=M=>{_(M.id),E(M.date),k(M.category||""),D(M.description||""),he(Number(M.amount||0)),fe(M.status||"PENDIENTE"),ne(M.notes||"")},U=()=>{_(null),E(""),k(""),D(""),he(0),fe("PENDIENTE"),ne("")},W=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!B.trim()){j("Ingresa una descripcin.");return}if(!X||X<=0){j("Ingresa un monto vlido.");return}try{await _n(Jt(ke,"expenses_clothes",I),{date:S,category:F,description:B.trim(),amount:Number(X.toFixed(2)),status:Ae,notes:me||""}),v(M=>M.map(H=>H.id===I?{...H,date:S,category:F,description:B.trim(),amount:Number(X.toFixed(2)),status:Ae,notes:me||""}:H)),U(),j(" Gasto actualizado")}catch(M){console.error(M),j(" Error al actualizar gasto")}}},J=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Mn(Jt(ke,"expenses_clothes",M.id)),v(te=>te.filter(ve=>ve.id!==M.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",MC(Te.total)]}),i.jsxs("div",{children:["Pagado: ",MC(Te.pagado)]}),i.jsxs("div",{children:["Pendiente: ",MC(Te.pendiente)]})]})]}),i.jsxs("form",{onSubmit:K,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),XV.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((M,H)=>M.date.localeCompare(H.date)).map(M=>{const H=I===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:te=>k(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),XV.map(te=>i.jsx("option",{value:te,children:te},te))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:te=>D(te.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:te=>he(Math.max(0,Number(te.target.value||0)))}):MC(M.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ae,onChange:te=>fe(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:te=>ne(te.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:W,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>q(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Vd=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function H4e(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Br(t.createdAt.toDate(),"yyyy-MM-dd"):""}function $4e(t,e){const r=H4e(t);if(!r)return null;const n=t.item||{},a=Number((n==null?void 0:n.qty)??t.quantity??0)||0,s=Number((n==null?void 0:n.total)??t.total??0)||0,o=Number((n==null?void 0:n.unitPrice)??(a>0?s/a:0))||0;return{id:e,date:r,type:t.type||"CONTADO",total:Number(t.total||0),quantity:Number(t.quantity||a||0),customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),item:{productId:String((n==null?void 0:n.productId)||t.productId||""),productName:String((n==null?void 0:n.productName)||t.productName||""),sku:(n==null?void 0:n.sku)||t.sku||"",qty:a,unitPrice:o,total:a*o}}}async function G4e(t,e){if(e<=0)return;const r=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",t)),n=await Qt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;if(o.remaining<=0)continue;const l=Math.min(o.remaining,s);s-=l,await _n(Jt(ke,"inventory_clothes_batches",o.id),{remaining:Math.max(0,Number((o.remaining-l).toFixed(0)))})}s>0&&console.warn("consumeFIFO: falt inventario",s)}async function K4e(t,e){if(e<=0)return;const r=ar(yt(ke,"inventory_clothes_batches"),mr("productId","==",t)),n=await Qt(r),a=[];n.forEach(o=>{const l=o.data();a.push({id:o.id,productId:l.productId,date:l.date||"",quantity:Number(l.quantity||0),remaining:Number(l.remaining||0)})}),a.sort((o,l)=>o.date.localeCompare(l.date));let s=e;for(const o of a){if(s<=0)break;const l=Math.max(0,o.quantity-o.remaining);if(l<=0)continue;const c=Math.min(l,s);s-=c,await _n(Jt(ke,"inventory_clothes_batches",o.id),{remaining:Number((o.remaining+c).toFixed(0))})}s>0&&console.warn("restoreFIFO: no se devolvi todo",s)}async function Hre(t){const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}async function q4e(t,e,r){if(await Hre(t.id),t.type!=="CREDITO"||!t.customerId)return;const n={customerId:t.customerId,date:t.date,createdAt:xr.now(),ref:{saleId:t.id}},{addDoc:a}=await tA(async()=>{const{addDoc:o}=await Promise.resolve().then(()=>Tye);return{addDoc:o}},void 0);await a(yt(ke,"ar_movements"),{...n,type:"CARGO",amount:Number(e)||0});const s=Math.max(0,Number(r??t.downPayment??0));s>0&&await a(yt(ke,"ar_movements"),{...n,type:"ABONO",amount:-s})}function z4e(){const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[a,s]=g.useState(null),[o,l]=g.useState([]),c=async ae=>{e(!0),n(!0),s(ae),l([]);try{const Fe=(await Qt(ar(yt(ke,"sales_clothes"),mr("__name__","==",ae)))).docs[0],ce=Fe==null?void 0:Fe.data(),Ve=(Array.isArray(ce==null?void 0:ce.items)?ce.items:ce!=null&&ce.item?[ce.item]:[]).map(We=>({productName:String(We.productName||""),qty:Number(We.qty||0),unitPrice:Number(We.unitPrice||0),discount:Number(We.discount||0),total:Number(We.total||0)}));l(Ve)}catch(ee){console.error(ee)}finally{n(!1)}},[u,d]=g.useState(Br(new Date,"yyyy-MM-01")),[f,A]=g.useState(Br(new Date,"yyyy-MM-dd")),[h,m]=g.useState([]),[p,x]=g.useState([]),[v,y]=g.useState(!0),[b,w]=g.useState(""),[j,I]=g.useState(""),[_,S]=g.useState(""),[E,F]=g.useState(null),[k,B]=g.useState(!1),[D,X]=g.useState(null),[he,Ae]=g.useState(0),fe=15,[me,ne]=g.useState(1),Pe=g.useMemo(()=>{const ae={};return h.forEach(ee=>ae[ee.id]=ee.name),ae},[h]);g.useEffect(()=>{(async()=>{y(!0),w("");try{const ae=await Qt(yt(ke,"customers_clothes")),ee=[];ae.forEach(be=>ee.push({id:be.id,name:be.data().name||""})),m(ee);const Fe=await Qt(ar(yt(ke,"sales_clothes"),wn("createdAt","desc"))),ce=[];Fe.forEach(be=>{const Ve=$4e(be.data(),be.id);Ve&&Ve.date>=u&&Ve.date<=f&&ce.push(Ve)}),x(ce.sort((be,Ve)=>Ve.date.localeCompare(be.date))),ne(1)}catch(ae){console.error(ae),w(" Error cargando transacciones.")}finally{y(!1)}})()},[u,f]);const Te=g.useMemo(()=>p.filter(ae=>!(j&&ae.customerId!==j||_&&ae.type!==_)),[p,j,_]),O=g.useMemo(()=>{let ae=0,ee=0,Fe=0,ce=0;for(const be of Te)be.type==="CONTADO"?(ae+=be.item.qty,Fe+=be.total):(ee+=be.item.qty,ce+=be.total);return{piezasCash:ae,piezasCredito:ee,montoCash:Fe,montoCredito:ce}},[Te]),K=Math.max(1,Math.ceil(Te.length/fe)),q=g.useMemo(()=>{const ae=(me-1)*fe;return Te.slice(ae,ae+fe)},[Te,me]),U=ae=>{F(null),X(ae),Ae(ae.item.qty||0),B(!0)},W=async ae=>{if(F(null),!!window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{y(!0),await Rk(ae.id),await Hre(ae.id),x(ee=>ee.filter(Fe=>Fe.id!==ae.id)),w(" Venta eliminada")}catch(ee){console.error(ee),w(" No se pudo eliminar la venta.")}finally{y(!1)}},J=async()=>{if(!D)return;const ae=Number(D.item.qty||0),ee=Math.max(1,Math.floor(Number(he)||0));if(ee===ae){B(!1);return}const Fe=Number(D.item.unitPrice||0),ce=Number((Fe*ee).toFixed(2));try{y(!0);const be=ee-ae;be>0?await G4e(D.item.productId,be):be<0&&await K4e(D.item.productId,-be);const Ve=Jt(ke,"sales_clothes",D.id);await _n(Ve,{quantity:ee,total:ce,itemsTotal:ce,"item.qty":ee,"item.total":ce,updatedAt:xr.now()});const We=Math.min(Number(D.downPayment||0),ce);await q4e(D,ce,We),x(pt=>pt.map(wt=>wt.id===D.id?{...wt,quantity:ee,total:ce,item:{...wt.item,qty:ee,total:ce},downPayment:We}:wt)),w(" Venta actualizada"),B(!1)}catch(be){console.error(be),w(" No se pudo actualizar la venta.")}finally{y(!1)}},M=()=>{const ae=`Reporte de transacciones (Ropa)  ${u} a ${f}`,ee=Ve=>(Ve||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fe=Te.map(Ve=>{const We=Ve.customerName||(Ve.customerId?Pe[Ve.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ve.date}</td>
          <td>${ee(We)}</td>
          <td>${Ve.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ve.item.qty}</td>
          <td style="text-align:right">${Vd(Ve.total)}</td>
        </tr>`}).join(""),ce=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${ee(ae)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${ee(ae)}</h1>
      <div class="kpis">
        <div><b>Piezas Cash:</b> ${O.piezasCash}</div>
        <div><b>Piezas Crdito:</b> ${O.piezasCredito}</div>
        <div><b>Monto Cash:</b> ${Vd(O.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Vd(O.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Piezas</th><th>Monto</th>
      </tr></thead><tbody>
      ${Fe||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,be=window.open("","_blank");be&&(be.document.open(),be.document.write(ce),be.document.close())},H=()=>ne(1),te=()=>ne(ae=>Math.max(1,ae-1)),ve=()=>ne(ae=>Math.min(K,ae+1)),Q=()=>ne(K),Ke=()=>{const ae=[];if(K<=7)for(let Fe=1;Fe<=K;Fe++)ae.push(Fe);else{const Fe=Math.max(1,me-2),ce=Math.min(K,me+2);ae.push(1),Fe>2&&ae.push(-1);for(let be=Fe;be<=ce;be++)be!==1&&be!==K&&ae.push(be);ce<K-1&&ae.push(-2),ae.push(K)}return i.jsxs("div",{className:"flex items-center gap-1 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:H,disabled:me===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:te,disabled:me===1,children:" Anterior"}),ae.map((Fe,ce)=>typeof Fe=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Fe===me?"bg-blue-600 text-white":""}`,onClick:()=>ne(Fe),children:Fe},ce):i.jsx("span",{className:"px-2",children:""},ce)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ve,disabled:me===K,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Q,disabled:me===K,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",me," de ",K,"  ",Te.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Reporte de transacciones (Ropa)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:ae=>{d(ae.target.value),ne(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:ae=>{A(ae.target.value),ne(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[220px]",value:j,onChange:ae=>{I(ae.target.value),ne(1)},children:[i.jsx("option",{value:"",children:"Todos"}),h.map(ae=>i.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:_,onChange:ae=>{S(ae.target.value),ne(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"ml-auto px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:M,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Piezas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:O.piezasCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Vd(O.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Vd(O.montoCredito)})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Piezas"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:v?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):q.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin transacciones en el rango."})}):q.map(ae=>{const ee=ae.customerName||(ae.customerId?Pe[ae.customerId]:"")||"Nombre cliente";return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ae.date}),i.jsx("td",{className:"p-2 border",children:ee}),i.jsx("td",{className:"p-2 border",children:ae.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver piezas de esta transaccin",onClick:()=>c(ae.id),children:ae.item.qty})}),i.jsx("td",{className:"p-2 border",children:Vd(ae.total)}),i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>F(Fe=>Fe===ae.id?null:ae.id),title:"Acciones",children:""}),E===ae.id&&i.jsxs("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:[i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100",onClick:()=>U(ae),children:"Editar"}),i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>W(ae),children:"Eliminar"})]})]})]},ae.id)})})]}),Ke()]}),b&&i.jsx("p",{className:"mt-2 text-sm",children:b}),k&&D&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-md p-4",children:[i.jsx("h3",{className:"text-lg font-bold mb-2",children:"Editar venta"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("div",{className:"font-semibold",children:[D.item.productName," ",D.item.sku?` ${D.item.sku}`:""]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad (piezas)"}),i.jsx("input",{type:"number",step:"1",min:1,className:"w-full border p-2 rounded",value:he,onChange:ae=>Ae(Math.max(1,Math.floor(Number(ae.target.value||0))))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Unit"}),i.jsx("div",{className:"text-lg font-semibold",children:Vd(D.item.unitPrice)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Nuevo total"}),i.jsx("div",{className:"text-lg font-semibold",children:Vd(Number(D.item.unitPrice)*Number(he||0))})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{B(!1),X(null)},children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:J,children:"Guardar cambios"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Piezas vendidas"," ",a?` #${a}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>e(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):o.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):o.map((ae,ee)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ae.productName}),i.jsx("td",{className:"p-2 border text-right",children:ae.qty}),i.jsx("td",{className:"p-2 border text-right",children:Vd(ae.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Vd(ae.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Vd(ae.total)})]},ee))})]})})]})})]})}const YV=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Oc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,u0=t=>Math.round((Number(t)||0)*100)/100,W4e=new Set(["PAGADA","PAGADO","CERRADA","CERRADO","LIQUIDADA","LIQUIDADO"]),hy=t=>{const e=String(t||"").trim().toUpperCase();return W4e.has(e)?"PAGADA":"PENDIENTE"};function LC(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function JV(t){const e=ar(yt(ke,"ar_movements_pollo"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements_pollo",n.id))))}function X4e({role:t="",roles:e,sellerPolloId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=xn(a,"vendedor_pollo"),l=xn(a,"admin"),[c,u]=g.useState([]),[d,f]=g.useState(!1),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(!1),[I,_]=g.useState(!1),[S,E]=g.useState(null),[F,k]=g.useState([]),B=async Qe=>{var ot;j(!0),_(!0),E(Qe),k([]);try{const _t=await si(Jt(ke,"salesV2",Qe));let et=null;if(_t.exists()?et=_t.data():et=(ot=(await Qt(ar(yt(ke,"salesV2"),mr("name","==",Qe)))).docs[0])==null?void 0:ot.data(),!et){k([]);return}let It=[];if(Array.isArray(et.items)&&et.items.length>0)It=et.items;else if(et.items&&typeof et.items=="object")try{It=Object.values(et.items)}catch{It=[]}else et.item?It=[et.item]:Array.isArray(et.products)&&et.products.length>0?It=et.products:Array.isArray(et.lines)&&et.lines.length>0?It=et.lines:Array.isArray(et.detalles)&&et.detalles.length>0?It=et.detalles:(et.productName||et.product)&&(It=[{productName:et.productName||et.product||"",qty:et.qty??et.quantity??et.lbs??0,unitPrice:et.unitPrice??et.price??0,discount:et.discount??0,total:et.total??et.amount??0}]);const Vt=Ft=>{if(Ft==null)return NaN;if(typeof Ft=="number")return Ft;let Zt=String(Ft).trim();if(!Zt)return NaN;if(Zt=Zt.replace(/[^0-9.,-]/g,""),!Zt)return NaN;Zt.indexOf(".")>-1&&Zt.indexOf(",")>-1?Zt=Zt.replace(/,/g,""):Zt.indexOf(",")>-1&&Zt.indexOf(".")===-1&&(Zt=Zt.replace(/,/g,"."));const dr=Number(Zt);return Number.isNaN(dr)?NaN:dr},rr=new Set;for(const Ft of It)if(Array.isArray(Ft==null?void 0:Ft.allocations))for(const Zt of Ft.allocations){const dr=String((Zt==null?void 0:Zt.batchId)||"").trim();dr&&rr.add(dr)}else if(Ft!=null&&Ft.allocations&&typeof Ft.allocations=="object")try{for(const Zt of Object.values(Ft.allocations)){const dr=String((Zt==null?void 0:Zt.batchId)||"").trim();dr&&rr.add(dr)}}catch{}if(Array.isArray(et==null?void 0:et.allocations))for(const Ft of et.allocations){const Zt=String((Ft==null?void 0:Ft.batchId)||"").trim();Zt&&rr.add(Zt)}const er={};rr.size>0&&await Promise.all(Array.from(rr).map(async Ft=>{try{const Zt=await si(Jt(ke,"inventory_batches",Ft));if(Zt.exists()){const dr=Zt.data();er[Ft]=Number(dr.salePrice??dr.sale_price??dr.price??0)}}catch{}}));const Bt=new Set;for(const Ft of It){const Zt=String(Ft.productId||"").trim();Zt&&Bt.add(Zt)}const br={};Bt.size>0&&await Promise.all(Array.from(Bt).map(async Ft=>{try{const Zt=await si(Jt(ke,"products",Ft));if(Zt.exists()){const dr=Zt.data();br[Ft]=Number(dr.salePrice??dr.price??0)}}catch{}}));const wr=It.map(Ft=>{const Zt=String(Ft.productName||Ft.product||Ft.name||"(sin nombre)"),dr=Number(Ft.qty??Ft.quantity??Ft.lbs??Ft.weight??0)||0,Rr=Vt(Ft.total??Ft.lineFinal??Ft.amount??Ft.monto??Ft.line_total)||0;let Wr=0;const Sr=[Ft.unitPrice,Ft.unitPricePackage,Ft.salePrice,Ft.sale_price,Ft.price,Ft.unit_price,Ft.pricePerUnit,Ft.price_per_unit];for(const ha of Sr){const En=Vt(ha);if(!Number.isNaN(En)&&En!==0){Wr=En;break}}if(!Wr){const ha=(et==null?void 0:et.salePrice)??(et==null?void 0:et.sale_price)??(et==null?void 0:et.unitPrice)??(et==null?void 0:et.unit_price)??(et==null?void 0:et.price)??(et==null?void 0:et.pricePerUnit),En=Vt(ha);!Number.isNaN(En)&&En!==0&&(Wr=En)}if(!Wr){const ha=Array.isArray(Ft.allocations)?Ft.allocations[0]:Ft.allocations&&typeof Ft.allocations=="object"?Object.values(Ft.allocations)[0]:null,En=ha?String(ha.batchId||"").trim():"";En&&er[En]&&(Wr=er[En]||0)}!Wr&&Ft.productId&&(Wr=br[String(Ft.productId)]||0),(!Wr||Wr===0)&&Rr>0&&dr>0&&(Wr=Rr/dr);const ia=Vt(Ft.discount??Ft.desc??0)||0;let _a=Rr;return(!_a||_a===0)&&(_a=Number(Wr*dr||0)),_a=Number(_a)||0,{productName:Zt,qty:dr,unitPrice:Wr,discount:ia,total:_a}});k(wr)}catch(_t){console.error(_t)}finally{_(!1)}},[D,X]=g.useState(""),[he,Ae]=g.useState("+505 "),[fe,me]=g.useState(""),[ne,Pe]=g.useState(""),[Te,O]=g.useState("ACTIVO"),[K,q]=g.useState(0),[U,W]=g.useState(""),[J,M]=g.useState(0),[H,te]=g.useState([]),[ve,Q]=g.useState(!0),[Ke,ae]=g.useState(""),[ee,Fe]=g.useState(null),[ce,be]=g.useState(""),[Ve,We]=g.useState("+505 "),[pt,wt]=g.useState(""),[Ct,St]=g.useState(""),[Rt,jt]=g.useState("ACTIVO"),[Ue,Be]=g.useState(0),[ye,oe]=g.useState(""),[Z,Ne]=g.useState(!1),[Re,ge]=g.useState(null),[Xe,vt]=g.useState(!1),[it,de]=g.useState([]),[Ce,Ye]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ft,we]=g.useState(!1),[Le,gt]=g.useState(0),[Ut,Mt]=g.useState(new Date().toISOString().slice(0,10)),[Yt,st]=g.useState(""),[_e,xe]=g.useState(!1),[ie,Oe]=g.useState(null),[le,De]=g.useState(""),[He,P]=g.useState(0),[R,L]=g.useState(""),[G,re]=g.useState(null),[ue,$e]=g.useState(!1),[rt,At]=g.useState(null),[Je,ht]=g.useState(!1),[Ot,Se]=g.useState(!1),[tt,xt]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(Q(!0),o&&!s){te([]),ae(" Este usuario no tiene vendedor asociado (sellerPolloId vaco).");return}const Qe=await Qt(yt(ke,"sellers_candies")),ot=[];Qe.forEach(Vt=>{const rr=Vt.data();ot.push({id:Vt.id,name:String(rr.name||"")})}),u(ot);const _t=o?ar(yt(ke,"customers_pollo"),mr("vendorId","==",s),wn("createdAt","desc")):ar(yt(ke,"customers_pollo"),wn("createdAt","desc")),et=await Qt(_t),It=[];et.forEach(Vt=>{const rr=Vt.data();It.push({id:Vt.id,name:rr.name??"",phone:rr.phone??"+505 ",place:rr.place??"",notes:rr.notes??"",status:rr.status??"ACTIVO",creditLimit:Number(rr.creditLimit??0),createdAt:rr.createdAt??xr.now(),balance:0,vendorId:rr.vendorId||"",vendorName:rr.vendorName||"",initialDebt:Number(rr.initialDebt||0),lastAbonoDate:"",lastAbonoAmount:0})});for(const Vt of It)try{const rr=ar(yt(ke,"ar_movements_pollo"),mr("customerId","==",Vt.id)),er=await Qt(rr);let Bt=0,br=null,wr=!1;er.forEach(Rr=>{var ia,_a,ha;const Wr=Rr.data(),Sr=Number(Wr.amount||0);if(Bt+=Sr,Sr>0&&hy(Wr.debtStatus??Wr.creditStatus??Wr.cycleStatus??Wr.status)==="PENDIENTE"&&(wr=!0),Sr<0){const En=Wr.date??((_a=(ia=Wr.createdAt)==null?void 0:ia.toDate)!=null&&_a.call(ia)?Wr.createdAt.toDate().toISOString().slice(0,10):""),vs=(ha=Wr.createdAt)!=null&&ha.seconds?Number(Wr.createdAt.seconds):0;(!br||vs>=br.ts)&&(br={date:En,amount:Math.abs(Sr),ts:vs})}});const Ft=Number(Vt.initialDebt||0),Zt=u0(Ft+Bt);Vt.balance=Zt,(wr||Zt>0)&&br?(Vt.lastAbonoDate=br.date,Vt.lastAbonoAmount=br.amount):(Vt.lastAbonoDate="",Vt.lastAbonoAmount=0)}catch{Vt.balance=Number(Vt.initialDebt||0),Vt.lastAbonoDate="",Vt.lastAbonoAmount=0}te(It)}catch(Qe){console.error(Qe),ae(" Error cargando clientes.")}finally{Q(!1)}})()},[o,s]);const kt=()=>{X(""),Ae("+505 "),me(""),Pe(""),O("ACTIVO"),q(0),W(""),M(0)},tr=async Qe=>{var It;if(Qe.preventDefault(),ae(""),!D.trim()){ae("Ingresa el nombre.");return}const ot=LC(he);if(ot.length<6){ae("Telfono incompleto.");return}const _t=o?s:String(U||""),et=_t&&((It=c.find(Vt=>Vt.id===_t))==null?void 0:It.name)||"";try{const Vt=Number(J||0),rr=await $n(yt(ke,"customers_pollo"),{name:D.trim(),phone:ot,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0),vendorId:_t,vendorName:et,initialDebt:Vt,createdAt:xr.now()});te(er=>[{id:rr.id,name:D.trim(),phone:ot,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0),vendorId:_t,vendorName:et,initialDebt:Vt,createdAt:xr.now(),balance:Vt,lastAbonoDate:"",lastAbonoAmount:0},...er]),kt(),$e(!1),ae(" Cliente creado")}catch(Vt){console.error(Vt),ae(" Error al crear cliente")}},nr=Qe=>{if(o){ae(" No permitido: vendedores no editan clientes desde el listado.");return}Fe(Qe.id),be(Qe.name),We(Qe.phone||"+505 "),wt(Qe.place||""),St(Qe.notes||""),jt(Qe.status||"ACTIVO"),Be(Number(Qe.creditLimit||0)),oe(String(Qe.vendorId||""))},cr=()=>{Fe(null),be(""),We("+505 "),wt(""),St(""),jt("ACTIVO"),Be(0),oe("")},Nr=async()=>{var rr;if(o){ae(" No permitido.");return}if(!ee)return;const Qe=LC(Ve);if(!ce.trim()){ae("Ingresa el nombre.");return}const ot=H.find(er=>er.id===ee),_t=String((ot==null?void 0:ot.vendorId)||""),et=o?s:String(ye||"");if(o&&_t&&_t!==s){ae(" Este cliente pertenece a otro vendedor.");return}if(l&&_t&&et&&_t!==et){ae(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const It=o?s:String(ye||""),Vt=It&&((rr=c.find(er=>er.id===It))==null?void 0:rr.name)||"";try{await _n(Jt(ke,"customers_pollo",ee),{name:ce.trim(),phone:Qe,place:pt||"",notes:Ct||"",status:Rt,creditLimit:Number(Ue||0),vendorId:It,vendorName:Vt}),te(er=>er.map(Bt=>Bt.id===ee?{...Bt,name:ce.trim(),phone:Qe,place:pt||"",notes:Ct||"",status:Rt,creditLimit:Number(Ue||0),vendorId:It,vendorName:Vt}:Bt)),cr(),ae(" Cliente actualizado")}catch(er){console.error(er),ae(" Error al actualizar")}},mn=async Qe=>{if(confirm(`Eliminar al cliente "${Qe.name}"?
Se borrarn todas sus ventas y movimientos.`))try{Q(!0);const _t=ar(yt(ke,"salesV2"),mr("customerId","==",Qe.id)),et=await Qt(_t);for(const rr of et.docs){const er=rr.id;try{await Mn(Jt(ke,"salesV2",er))}catch(Bt){console.warn("delete sale error",Bt)}await JV(er)}const It=ar(yt(ke,"ar_movements_pollo"),mr("customerId","==",Qe.id)),Vt=await Qt(It);await Promise.all(Vt.docs.map(rr=>Mn(Jt(ke,"ar_movements_pollo",rr.id)))),await Mn(Jt(ke,"customers_pollo",Qe.id)),te(rr=>rr.filter(er=>er.id!==Qe.id)),ae(" Cliente eliminado y registros borrados")}catch(_t){console.error(_t),ae(" No se pudo eliminar el cliente.")}finally{Q(!1)}},Mr=(Qe,ot)=>{const _t=Qe.reduce((rr,er)=>rr+(Number(er.amount)||0),0),et=Qe.filter(rr=>Number(rr.amount)<0).reduce((rr,er)=>rr+Math.abs(Number(er.amount)||0),0),It=Qe.filter(rr=>Number(rr.amount)>0).reduce((rr,er)=>rr+(Number(er.amount)||0),0),Vt=Number(ot||0)+_t;Ye({saldoActual:Vt,totalAbonado:et,totalCargos:Number(ot||0)+It,saldoRestante:Vt})},Vr=async Qe=>{ge(Qe),de([]),Ye({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ne(!0),ht(!1),Se(!1),xt(null),we(!1),gt(0),Mt(new Date().toISOString().slice(0,10)),st(""),Oe(null),vt(!0);try{const ot=ar(yt(ke,"ar_movements_pollo"),mr("customerId","==",Qe.id)),_t=await Qt(ot),et=[];_t.forEach(It=>{var Bt,br;const Vt=It.data(),rr=Vt.date??((br=(Bt=Vt.createdAt)==null?void 0:Bt.toDate)!=null&&br.call(Bt)?Vt.createdAt.toDate().toISOString().slice(0,10):""),er=Number(Vt.amount||0);et.push({id:It.id,date:rr,type:Vt.type??(er<0?"ABONO":"CARGO"),amount:er,ref:Vt.ref||{},comment:Vt.comment||"",createdAt:Vt.createdAt,debtStatus:hy(Vt.debtStatus??Vt.creditStatus??Vt.cycleStatus??Vt.status)})}),et.sort((It,Vt)=>{var Bt,br;if(It.date!==Vt.date)return It.date.localeCompare(Vt.date);const rr=((Bt=It.createdAt)==null?void 0:Bt.seconds)||0,er=((br=Vt.createdAt)==null?void 0:br.seconds)||0;return rr-er}),de(et),Mr(et,Number(Qe.initialDebt||0))}catch(ot){console.error(ot),ae(" No se pudo cargar el estado de cuenta")}finally{vt(!1)}},fn=(Qe,ot)=>u0(ot||0)>0?!0:Qe.some(_t=>_t.type==="CARGO"&&hy(_t.debtStatus)==="PENDIENTE"),Zn=Qe=>{const ot=Qe.filter(_t=>Number(_t.amount)<0).map(_t=>{var et;return{date:_t.date,amount:Math.abs(Number(_t.amount||0)),ts:((et=_t.createdAt)==null?void 0:et.seconds)||0}}).sort((_t,et)=>(_t.ts||0)-(et.ts||0));return ot.length?ot[ot.length-1]:null},Bn=async()=>{if(!Re)return;ae("");const Qe=Number(Le||0);if(!(Qe>0)){ae("Ingresa un monto de abono mayor a 0.");return}const ot=parseFloat(Qe.toFixed(2));if(!Ut){ae("Selecciona la fecha del abono.");return}try{xe(!0);const _t={customerId:Re.id,type:"ABONO",amount:-ot,date:Ut,comment:Yt||"",createdAt:xr.now()},It={id:(await $n(yt(ke,"ar_movements_pollo"),_t)).id,date:Ut,type:"ABONO",amount:-ot,comment:Yt||"",createdAt:xr.now()},Vt=[...it,It].sort((br,wr)=>{var dr,Rr;if(br.date!==wr.date)return br.date.localeCompare(wr.date);const Ft=((dr=br.createdAt)==null?void 0:dr.seconds)||0,Zt=((Rr=wr.createdAt)==null?void 0:Rr.seconds)||0;return Ft-Zt});de(Vt),Mr(Vt,Number(Re.initialDebt||0));const rr=Vt.reduce((br,wr)=>br+(Number(wr.amount)||0),0),er=u0(Number(Re.initialDebt||0)+rr),Bt=fn(Vt,er);te(br=>br.map(wr=>{if(wr.id!==Re.id)return wr;const Ft=u0((wr.balance||0)-ot);return{...wr,balance:Ft,lastAbonoDate:Bt?Ut:"",lastAbonoAmount:Bt?ot:0}})),ge(br=>br&&{...br,balance:u0((br.balance||0)-ot),lastAbonoDate:Bt?Ut:"",lastAbonoAmount:Bt?ot:0}),gt(0),st(""),Mt(new Date().toISOString().slice(0,10)),we(!1),ae(" Abono registrado")}catch(_t){console.error(_t),ae(" Error al registrar el abono")}finally{xe(!1)}},zt=Qe=>{Oe(Qe.id),De(Qe.date||new Date().toISOString().slice(0,10)),P(Math.abs(Number(Qe.amount||0))),L(Qe.comment||"")},pr=()=>{Oe(null),De(""),P(0),L("")},Gt=async()=>{if(!ie||!Re)return;const Qe=it.findIndex(It=>It.id===ie);if(Qe===-1)return;const ot=it[Qe],_t=Number(He||0);if(!(_t>0)){ae("El monto debe ser mayor a 0.");return}const et=ot.type==="ABONO"?-parseFloat(_t.toFixed(2)):+parseFloat(_t.toFixed(2));try{await _n(Jt(ke,"ar_movements_pollo",ie),{date:le,amount:et,comment:R||""});const It=[...it];It[Qe]={...ot,date:le,amount:et,comment:R||""},It.sort((br,wr)=>{var dr,Rr;if(br.date!==wr.date)return br.date.localeCompare(wr.date);const Ft=((dr=br.createdAt)==null?void 0:dr.seconds)||0,Zt=((Rr=wr.createdAt)==null?void 0:Rr.seconds)||0;return Ft-Zt}),de(It),Mr(It,Number(Re.initialDebt||0));const Vt=It.reduce((br,wr)=>br+(Number(wr.amount)||0),0),rr=u0(Number(Re.initialDebt||0)+Vt),er=fn(It,rr),Bt=er?Zn(It):null;te(br=>br.map(wr=>wr.id===Re.id?{...wr,balance:rr,lastAbonoDate:er&&Bt?Bt.date:"",lastAbonoAmount:er&&Bt?Bt.amount:0}:wr)),ge(br=>br&&{...br,balance:rr,lastAbonoDate:er&&Bt?Bt.date:"",lastAbonoAmount:er&&Bt?Bt.amount:0}),pr(),ae(" Movimiento actualizado")}catch(It){console.error(It),ae(" Error al actualizar movimiento")}},Qr=async Qe=>{var _t,et;if(confirm(`Eliminar este movimiento (${Qe.type==="ABONO"?"Abono":"Compra"}) del ${Qe.date}?${Qe.type==="CARGO"&&((_t=Qe.ref)!=null&&_t.saleId)?`
Se borrarn los registros de esa venta.`:""}`)&&Re)try{if(Q(!0),Qe.type==="CARGO"&&((et=Qe.ref)!=null&&et.saleId)){try{await Mn(Jt(ke,"salesV2",Qe.ref.saleId))}catch(br){console.warn("delete sale error",br),Q(!1),ae(" No se pudo borrar la venta asociada.");return}await JV(Qe.ref.saleId)}else await Mn(Jt(ke,"ar_movements_pollo",Qe.id));const It=it.filter(br=>{var wr,Ft;return Qe.type==="CARGO"&&((wr=Qe.ref)!=null&&wr.saleId)?((Ft=br.ref)==null?void 0:Ft.saleId)!==Qe.ref.saleId:br.id!==Qe.id});de(It),Mr(It,Number(Re.initialDebt||0));const Vt=It.reduce((br,wr)=>br+(Number(wr.amount)||0),0),rr=u0(Number(Re.initialDebt||0)+Vt),er=fn(It,rr),Bt=er?Zn(It):null;te(br=>br.map(wr=>wr.id===Re.id?{...wr,balance:rr,lastAbonoDate:er&&Bt?Bt.date:"",lastAbonoAmount:er&&Bt?Bt.amount:0}:wr)),ge(br=>br&&{...br,balance:rr,lastAbonoDate:er&&Bt?Bt.date:"",lastAbonoAmount:er&&Bt?Bt.amount:0}),xt(null),ae(" Movimiento eliminado")}catch(It){console.error(It),ae(" Error al eliminar movimiento")}finally{Q(!1)}},ln=async Qe=>{if(Qe.type!=="CARGO")return;const ot=hy(Qe.debtStatus)==="PAGADA"?"PENDIENTE":"PAGADA";try{re(Qe.id),await _n(Jt(ke,"ar_movements_pollo",Qe.id),{debtStatus:ot});const _t=it.map(et=>et.id===Qe.id?{...et,debtStatus:ot}:et);if(de(_t),Re){Mr(_t,Number(Re.initialDebt||0));const et=_t.reduce((er,Bt)=>er+(Number(Bt.amount)||0),0),It=u0(Number(Re.initialDebt||0)+et),Vt=fn(_t,It),rr=Vt?Zn(_t):null;te(er=>er.map(Bt=>Bt.id===Re.id?{...Bt,balance:It,lastAbonoDate:Vt&&rr?rr.date:"",lastAbonoAmount:Vt&&rr?rr.amount:0}:Bt)),ge(er=>er&&{...er,balance:It,lastAbonoDate:Vt&&rr?rr.date:"",lastAbonoAmount:Vt&&rr?rr.amount:0})}ae(ot==="PAGADA"?" Compra marcada como pagada":" Compra marcada como pendiente")}catch(_t){console.error(_t),ae(" No se pudo actualizar el estado de la compra")}finally{re(null)}},tn=g.useMemo(()=>[...H].sort((Qe,ot)=>{var _t,et;return Qe.status!==ot.status?Qe.status==="BLOQUEADO"?1:-1:(((_t=ot.createdAt)==null?void 0:_t.seconds)||0)-(((et=Qe.createdAt)==null?void 0:et.seconds)||0)}),[H]),mt=Qe=>Qe==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",ur=g.useMemo(()=>{const Qe=A.trim().toLowerCase(),ot=x.trim()===""?null:Number(x),_t=y.trim()===""?null:Number(y);return tn.filter(et=>{const It=!Qe||String(et.name||"").toLowerCase().includes(Qe),Vt=!m||et.status===m,rr=Number(et.balance||0),er=ot===null||!Number.isNaN(ot)&&rr>=ot,Bt=_t===null||!Number.isNaN(_t)&&rr<=_t;return It&&Vt&&er&&Bt})},[tn,A,m,x,y]),je=g.useMemo(()=>ur.reduce((Qe,ot)=>Qe+Number(ot.balance||0),0),[ur]),nt=g.useMemo(()=>ur.filter(Qe=>Qe.status==="ACTIVO").length,[ur]),dt=ur.length,Nt=()=>{h(""),p(""),v(""),b("")};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Pollo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{$e(!0),o&&W(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Saldo pendiente"}),i.jsx("div",{className:"text-2xl font-semibold",children:Oc(je)}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Calculado sobre los clientes filtrados"})]}),i.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm",children:[i.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-600",children:"Clientes activos"}),i.jsx("div",{className:"text-2xl font-semibold",children:nt}),i.jsxs("p",{className:"text-[11px] text-gray-500 mt-1",children:["De un total de ",dt]})]})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm p-4 mb-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Filtrar cliente"}),i.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Nombre, telfono o nota",value:A,onChange:Qe=>h(Qe.target.value)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-gray-50 hover:bg-gray-100",onClick:()=>f(Qe=>!Qe),children:d?"Ocultar filtros":"Ms filtros"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded border bg-white hover:bg-gray-50",onClick:Nt,children:"Limpiar"})]})]}),d&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2",value:m,onChange:Qe=>p(Qe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"Activo"}),i.jsx("option",{value:"BLOQUEADO",children:"Bloqueado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mnimo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:x,onChange:Qe=>v(Qe.target.value),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Saldo mximo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:y,onChange:Qe=>b(Qe.target.value),placeholder:"0.00"})]})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ve?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):ur.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):ur.map(Qe=>{var _t;const ot=ee===Qe.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(_t=Qe.createdAt)!=null&&_t.toDate?Qe.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:ot?i.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:et=>be(et.target.value)}):i.jsx("div",{className:"font-medium",children:Qe.name})}),i.jsx("td",{className:"p-2 border",children:ot?i.jsx("input",{className:"w-full border p-1 rounded",value:Ve,onChange:et=>We(LC(et.target.value))}):Qe.phone}),i.jsx("td",{className:"p-2 border",children:ot?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:ye,onChange:et=>oe(et.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(et=>i.jsx("option",{value:et.id,children:et.name},et.id))]}):Qe.vendorName||""}),i.jsx("td",{className:"p-2 border",children:ot?i.jsxs("select",{className:"w-full border p-1 rounded",value:pt,onChange:et=>wt(et.target.value),children:[i.jsx("option",{value:"",children:""}),YV.map(et=>i.jsx("option",{value:et,children:et},et))]}):Qe.place||""}),i.jsx("td",{className:"p-2 border",children:ot?i.jsxs("select",{className:"w-full border p-1 rounded",value:Rt,onChange:et=>jt(et.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${mt(Qe.status)}`,children:Qe.status})}),i.jsx("td",{className:"p-2 border",children:ot?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ue)?"":Ue,onChange:et=>Be(Math.max(0,Number(et.target.value||0)))}):Oc(Qe.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Oc(Qe.balance||0)}),i.jsx("td",{className:"p-2 border",children:ot?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Ct,onChange:et=>St(et.target.value),maxLength:500}):i.jsx("span",{title:Qe.notes||"",children:(Qe.notes||"").length>40?(Qe.notes||"").slice(0,40)+"":Qe.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:ot?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Nr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:cr,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>nr(Qe),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>mn(Qe),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Vr(Qe),children:"Estado de cuenta"})]})})})]},Qe.id)})})]})}),i.jsx("div",{className:"md:hidden space-y-2",children:ve?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Cargando"}):ur.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-gray-600",children:"Sin clientes"}):ur.map(Qe=>i.jsxs("div",{className:"border rounded-lg bg-white p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-base",children:Qe.name}),i.jsx("div",{className:"text-xs text-gray-600",children:Qe.phone||""}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:Qe.vendorName||""})]})]}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${mt(Qe.status)}`,children:Qe.status})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Saldo"}),i.jsx("div",{className:"font-semibold",children:Oc(Qe.balance||0)})]}),i.jsxs("div",{className:"border rounded p-2 bg-gray-50",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Lmite"}),i.jsx("div",{className:"font-semibold",children:Oc(Qe.creditLimit||0)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["ltimo abono:"," ",i.jsx("span",{className:"font-medium",children:Qe.lastAbonoDate?`${Qe.lastAbonoDate} (${Oc(Qe.lastAbonoAmount||0)})`:""})]}),Qe.notes?i.jsxs("div",{className:"mt-2 text-xs text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:"Nota:"})," ",(Qe.notes||"").length>80?(Qe.notes||"").slice(0,80)+"":Qe.notes]}):null,i.jsxs("div",{className:"mt-3 flex gap-2 flex-wrap",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white text-sm",onClick:()=>Vr(Qe),children:"Estado de cuenta"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-yellow-600 text-white text-sm",onClick:()=>nr(Qe),disabled:o,title:o?"Vendedor no edita":"Editar",children:"Editar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-red-600 text-white text-sm disabled:opacity-50",onClick:()=>mn(Qe),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"})]})]},Qe.id))})]}),Ke&&i.jsx("p",{className:"mt-2 text-sm",children:Ke}),ue&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>$e(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$e(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:tr,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:Qe=>X(Qe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:Qe=>Ae(LC(Qe.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:Qe=>me(Qe.target.value),children:[i.jsx("option",{value:"",children:""}),YV.map(Qe=>i.jsx("option",{value:Qe,children:Qe},Qe))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Te,onChange:Qe=>O(Qe.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:Qe=>W(Qe.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(Qe=>i.jsx("option",{value:Qe.id,children:Qe.name},Qe.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:Qe=>M(Math.max(0,Number(Qe.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:K===0?"":K,onChange:Qe=>q(Math.max(0,Number(Qe.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:Qe=>Pe(Qe.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>$e(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Z&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[50]",style:{zIndex:50},children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>Ne(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-full max-w-5xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 gap-3",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"flex gap-2 shrink-0",children:[i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{gt(0),Mt(new Date().toISOString().slice(0,10)),st(""),we(!0)},children:"Abonar"}),i.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Oc(Number((Re==null?void 0:Re.initialDebt)||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Oc(Ce.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Oc(Ce.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Oc(Ce.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Estado compra"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Xe?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):it.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):it.map(Qe=>{var et;const ot=ie===Qe.id,_t=hy(Qe.debtStatus);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ot?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:le,onChange:It=>De(It.target.value)}):Qe.date||""}),i.jsx("td",{className:"p-2 border",children:Qe.amount>=0?(et=Qe.ref)!=null&&et.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",onClick:()=>B(Qe.ref.saleId),children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (Ver detalle)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:Qe.type==="CARGO"?i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${_t==="PAGADA"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:_t==="PAGADA"?"Pagada":"Pendiente"}):""}),i.jsx("td",{className:"p-2 border",children:ot?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:It=>L(It.target.value)}):i.jsx("span",{title:Qe.comment||"",children:(Qe.comment||"").length>40?(Qe.comment||"").slice(0,40)+"":Qe.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:ot?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(He)?"":He,onChange:It=>P(Number(It.target.value||0))}):Oc(Qe.amount)}),i.jsx("td",{className:"p-2 border",children:ot?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Gt,children:"Guardar"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:pr,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>zt(Qe),children:"Editar"}),Qe.type==="CARGO"&&i.jsx("button",{type:"button",className:`px-2 py-1 rounded text-white ${_t==="PAGADA"?"bg-gray-600 hover:bg-gray-700":"bg-emerald-600 hover:bg-emerald-700"} disabled:opacity-50`,onClick:()=>ln(Qe),disabled:G===Qe.id,children:_t==="PAGADA"?"Marcar pendiente":"Marcar pagada"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Qr(Qe),children:"Borrar"})]})})]},Qe.id)})})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",style:{zIndex:60},children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," "]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((Qe,ot)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:Qe.productName}),i.jsx("td",{className:"p-2 border text-right",children:Qe.qty}),i.jsx("td",{className:"p-2 border text-right",children:Oc(Qe.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Oc(Qe.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Oc(Qe.total)})]},ot))})]})})]})})]}),document.body),ft&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[90]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ut,onChange:Qe=>Mt(Qe.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Le===0?"":Le,onChange:Qe=>{const ot=Number(Qe.target.value||0),_t=Number.isFinite(ot)?Math.max(0,parseFloat(ot.toFixed(2))):0;gt(_t)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Yt,onChange:Qe=>st(Qe.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Yt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>we(!1),disabled:_e,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Bn,disabled:_e,children:_e?"Guardando...":"Guardar abono"})]})]})})]})}function Y4e(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function J4e(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var Z4e=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(a[o]=s[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e3e=function(t){Z4e(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),Y4e(s,a.prototype),J4e(s),s}return e}(Error),t3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eu=function(t){t3e(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(e3e),r3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(t){r3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(eu),n3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yn=function(t){n3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(eu),$re=function(){function t(e){if(this.binarizer=e,e===null)throw new yn("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),a3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eo=function(t){a3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(eu),s3e=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ps=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),i3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k6=function(t){i3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(eu),o3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZV=function(t){o3e(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(k6),l3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bo=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new yn("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new ZV(r);if(n>e)throw new ZV(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=l3e(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return ps.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var o=s+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)s=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),Yn=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ko=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);ps.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=n[a]}var l=a*32+Yn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var o=n.length;s===0;){if(++a===o)return r;s=~n[a]}var l=a*32+Yn.numberOfTrailingZeros(s);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new yn;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);s[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new yn;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),o=this.bits,l=a;l<=s;l++){var c=l>a?0:e&31,u=l<s?31:r&31,d=(2<<u)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new yn("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new yn("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+s]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var o=a[s];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-s]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,s=1;s<n;s++){var u=e[s];c|=u<<32-l,e[s-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&bo.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+bo.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Mk;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Mk||(Mk={}));const gs=Mk;var c3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dr=function(t){c3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(eu),u3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ua;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Ua||(Ua={}));var yo=function(){function t(e,r,n){for(var a,s,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,d=c.length;u!==d;u++){var f=c[u];t.VALUES_TO_ECI.set(f,this)}try{for(var A=u3e(o),h=A.next();!h.done;h=A.next()){var m=h.value;t.NAME_TO_ECI.set(m,this)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Dr("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Dr("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Dr("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Ua.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Ua.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Ua.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Ua.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Ua.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Ua.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Ua.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Ua.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Ua.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Ua.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Ua.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Ua.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Ua.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Ua.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Ua.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Ua.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Ua.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Ua.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Ua.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Ua.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Ua.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Ua.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Ua.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Ua.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Ua.Big5,28,"Big5"),t.GB18030=new t(Ua.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Ua.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),d3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cE=function(t){d3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(eu),yd=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof yo?e:yo.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,o=e.length;s<o;s++){var l=e[s].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(yo.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new cE("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(yo.UTF8)||e.equals(yo.ISO8859_1)||e.equals(yo.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),fa=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return yd.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(gs.CHARACTER_SET)!==void 0)return r.get(gs.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,o=!0,l=0,c=0,u=0,d=0,f=0,A=0,h=0,m=0,p=0,x=0,v=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<n&&(a||s||o);b++){var w=e[b]&255;o&&(l>0?w&128?l--:o=!1:w&128&&(w&64?(l++,w&32?(l++,w&16?(l++,w&8?o=!1:d++):u++):c++):o=!1)),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&v++),s&&(f>0?w<64||w===127||w>252?s=!1:f--:w===128||w===160||w>239?s=!1:w>160&&w<224?(A++,m=0,h++,h>p&&(p=h)):w>127?(f++,h=0,m++,m>x&&(x=m)):(h=0,m=0))}return o&&l>0&&(o=!1),s&&f>0&&(s=!1),o&&(y||c+u+d>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||p>=3||x>=3)?t.SHIFT_JIS:a&&s?p===2&&A===2||v*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(l,c,u,d,f,A){if(l==="%%")return"%";if(r[++a]!==void 0){l=d?parseInt(d.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,m;switch(A){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(l);break;case"p":m=parseFloat(r[a]).toPrecision(l);break;case"e":m=parseFloat(r[a]).toExponential(l);break;case"x":m=parseInt(r[a]).toString(h||16);break;case"d":m=parseFloat(parseInt(r[a],h||10).toPrecision(l)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var p=parseInt(u),x=u&&u[0]+""=="0"?"0":" ";m.length<p;)m=c!==void 0?m+x:x+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,s)},t.getBytes=function(e,r){return yd.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=yo.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=yo.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=yo.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Gn=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=fa.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),nh=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new yn("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var o=e[s],l=0;l<n;l++)o[l]&&a.set(l,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new yn("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new yn("row lengths do not match");o=s,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[s]=!0,s++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[s]=!1,s++;else throw new yn("illegal character encountered: "+e.substring(u));if(s>o){if(l===-1)l=s-o;else if(s-o!==l)throw new yn("row lengths do not match");c++}for(var d=new t(l,c),f=0;f<s;f++)a[f]&&d.set(Math.floor(f%l),Math.floor(f/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new yn("input matrix dimensions do not match");for(var r=new Ko(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,o=this.height;s<o;s++)for(var l=s*n,c=e.getRow(s,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new yn("Left and top must be nonnegative");if(a<1||n<1)throw new yn("Height and width must be at least 1");var s=e+n,o=r+a;if(o>this.height||s>this.width)throw new yn("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var d=u*l,f=e;f<s;f++)c[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Ko(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,o=0;o<n;o++)r.setBulk(o*32,a[s+o]);return r},t.prototype.setRow=function(e,r){ps.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Ko(e),a=new Ko(e),s=0,o=Math.floor((r+1)/2);s<o;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=a[u*n+d];if(f!==0){if(u<o&&(o=u),u>c&&(c=u),d*32<s){for(var A=0;!(f<<31-A&4294967295);)A++;d*32+A<s&&(s=d*32+A)}if(d*32+31>l){for(var A=31;!(f>>>A);)A--;d*32+A>l&&(l=d*32+A)}}}return l<s||c<o?null:Int32Array.from([s,o,l-s+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,o=r[n],l=0;!(o<<31-l&4294967295);)l++;return s+=l,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return s+=l,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&bo.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+bo.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Gn,s=0,o=this.height;s<o;s++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),f3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sr=function(t){f3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(eu),h3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A3e=function(t){h3e(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new Ko(s):n.clear(),this.initArrays(s);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<s;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(s<3)for(var c=0;c<s;c++)(o[c]&255)<u&&n.set(c);else for(var d=o[0]&255,f=o[1]&255,c=1;c<s-1;c++){var A=o[c+1]&255;(f*4-d-A)/2<u&&n.set(c),d=f,f=A}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new nh(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var A=u[f]&255;o[A>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),m=r.getMatrix(),l=0;l<a;l++)for(var p=l*n,f=0;f<n;f++){var A=m[p+f]&255;A<h&&s.set(f,l)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,o=0,l=0;l<n;l++)r[l]>o&&(s=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var d=l-s,f=r[l]*d*d;f>u&&(c=l,u=f)}if(s>c){var A=s;s=c,c=A}if(c-s<=n/16)throw new sr;for(var h=c-1,m=-1,l=c-1;l>s;l--){var p=l-s,f=p*p*(c-l)*(a-r[l]);f>m&&(h=l,m=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(s3e),m3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gre=function(t){m3e(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var l=a>>e.BLOCK_SIZE_POWER;a&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(s,o,l,n,a),u=new nh(n,a);e.calculateThresholdForBlock(s,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,o,l,c){for(var u=o-e.BLOCK_SIZE,d=s-e.BLOCK_SIZE,f=0;f<a;f++){var A=f<<e.BLOCK_SIZE_POWER;A>u&&(A=u);for(var h=e.cap(f,2,a-3),m=0;m<n;m++){var p=m<<e.BLOCK_SIZE_POWER;p>d&&(p=d);for(var x=e.cap(m,2,n-3),v=0,y=-2;y<=2;y++){var b=l[h+y];v+=b[x-2]+b[x-1]+b[x]+b[x+1]+b[x+2]}var w=v/25;e.thresholdBlock(r,p,A,w,s,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=s&&l.set(n+d,a+c)},e.calculateBlackPoints=function(r,n,a,s,o){for(var l=o-e.BLOCK_SIZE,c=s-e.BLOCK_SIZE,u=new Array(a),d=0;d<a;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>l&&(f=l);for(var A=0;A<n;A++){var h=A<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var m=0,p=255,x=0,v=0,y=f*s+h;v<e.BLOCK_SIZE;v++,y+=s){for(var b=0;b<e.BLOCK_SIZE;b++){var w=r[y+b]&255;m+=w,w<p&&(p=w),w>x&&(x=w)}if(x-p>e.MIN_DYNAMIC_RANGE)for(v++,y+=s;v<e.BLOCK_SIZE;v++,y+=s)for(var b=0;b<e.BLOCK_SIZE;b++)m+=r[y+b]&255}var j=m>>e.BLOCK_SIZE_POWER*2;if(x-p<=e.MIN_DYNAMIC_RANGE&&(j=p/2,d>0&&A>0)){var I=(u[d-1][A]+2*u[d][A-1]+u[d-1][A-1])/4;p<I&&(j=I)}u[d][A]=j}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(A3e),Bw=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new cE("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new cE("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new cE("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Gn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var o=a[s]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t}(),p3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yj=function(t){p3e(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),o=0;o<s;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Bw),g3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x3e=function(t){g3e(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var l=0,c=0,u=r.length;l<u;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=d}else for(var l=0,c=0,p=r.length;l<p;l+=4,c++){var d=void 0,f=r[l+3];if(f===0)d=255;else{var A=r[l],h=r[l+1],m=r[l+2];d=306*A+601*h+117*m+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new yn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(s))*o+Math.abs(Math.sin(s))*l),u=Math.ceil(Math.abs(Math.sin(s))*o+Math.abs(Math.cos(s))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(s),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new Yj(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Bw),v3e=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),ic=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},oc=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},y3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A1=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return ic(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return oc(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=y3e(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device "+(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return ic(this,void 0,void 0,function(){var e;return oc(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new v3e(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return ic(this,void 0,void 0,function(){var r;return oc(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return ic(this,void 0,void 0,function(){return oc(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ic(this,void 0,void 0,function(){var n,a;return oc(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ic(this,void 0,void 0,function(){var n;return oc(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ic(this,void 0,void 0,function(){var n,a;return oc(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return ic(this,void 0,void 0,function(){return oc(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ic(this,void 0,void 0,function(){var a,s;return oc(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ic(this,void 0,void 0,function(){var a;return oc(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return ic(this,void 0,void 0,function(){var a;return oc(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return ic(this,void 0,void 0,function(){var n;return oc(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return ic(this,void 0,void 0,function(){return oc(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ki("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ki("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new ki("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new ki("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new ki("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ki("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ki("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ki("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ki("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new ki("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return ic(this,void 0,void 0,function(){return oc(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return ic(this,void 0,void 0,function(){return oc(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(o,l){if(a._stopAsyncDecode){l(new sr("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(A){var u=r&&A instanceof sr,d=A instanceof eo||A instanceof Dr,f=d&&n;if(u||f)return setTimeout(s,a._timeBetweenDecodingAttempts,o,l);l(A)}};return new Promise(function(o,l){return s(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof eo||c instanceof Dr,l=c instanceof sr;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new x3e(n,r),s=new Gre(a);return new $re(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),ec=function(){function t(e,r,n,a,s,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=ps.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,o==null?this.timestamp=ps.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);ps.arraycopy(r,0,n,0,r.length),ps.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Lk;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Lk||(Lk={}));const vn=Lk;var Uk;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Uk||(Uk={}));const wl=Uk;var Jj=function(){function t(e,r,n,a,s,o){s===void 0&&(s=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),$y=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new yn;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),lm=function(){function t(e,r){if(r.length===0)throw new yn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),ps.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var o=r[a];n=$y.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=$y.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ps.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=$y.addOrSubtract(r[l-o],n[l]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=this.field,c=0;c<n;c++)for(var u=r[c],d=0;d<s;d++)o[c+d]=$y.addOrSubtract(o[c+d],l.multiply(u,a[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(s[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new yn;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),o=this.field,l=0;l<a;l++)s[l]=o.multiply(n[l],r);return new t(o,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new yn("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new yn("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),o=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),b3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kre=function(t){b3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(eu),w3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$c=function(t){w3e(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);s.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return s.logTable=u,s.zero=new lm(s,Int32Array.from([0])),s.one=new lm(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new yn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new lm(this,a)},e.prototype.inverse=function(r){if(r===0)throw new Kre;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Yn.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}($y),N3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UC=function(t){N3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(eu),C3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tw=function(t){C3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(eu),Zj=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new lm(n,e),s=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));s[s.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new lm(n,s),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],A=d[1],h=this.findErrorLocations(f),m=this.findErrorMagnitudes(A,h),l=0;l<h.length;l++){var p=e.length-1-n.log(h[l]);if(p<0)throw new UC("Bad error location");e[p]=$c.addOrSubtract(e[p],m[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,o=e,l=r,c=s.getZero(),u=s.getOne();l.getDegree()>=(n/2|0);){var d=o,f=c;if(o=l,c=u,o.isZero())throw new UC("r_{i-1} was zero");l=d;for(var A=s.getZero(),h=o.getCoefficient(o.getDegree()),m=s.inverse(h);l.getDegree()>=o.getDegree()&&!l.isZero();){var p=l.getDegree()-o.getDegree(),x=s.multiply(l.getCoefficient(l.getDegree()),m);A=A.addOrSubtract(s.buildMonomial(p,x)),l=l.addOrSubtract(o.multiplyByMonomial(p,x))}if(u=A.multiply(c).addOrSubtract(f),l.getDegree()>=o.getDegree())throw new Tw("Division algorithm failed to reduce polynomial?")}var v=u.getCoefficient(0);if(v===0)throw new UC("sigmaTilde(0) was zero");var y=s.inverse(v),b=u.multiplyScalar(y),w=l.multiplyScalar(y);return[b,w]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,o=1;o<s.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=s.inverse(o),a++);if(a!==r)throw new UC("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,o=0;o<n;o++){for(var l=s.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var d=s.multiply(r[u],l),f=d&1?d&-2:d|1;c=s.multiply(c,f)}a[o]=s.multiply(e.evaluateAt(l),s.inverse(c)),s.getGeneratorBase()!==0&&(a[o]=s.multiply(a[o],l))}return a},t}(),cl;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(cl||(cl={}));var eH=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new Jj(s,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=cl.UPPER,a=cl.UPPER,s="",o=0;o<r;)if(a===cl.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);s+=fa.castAsNonUtf8Char(u),o+=8}a=n}else{var d=a===cl.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(a,u);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(s+=f,a=n)}return s},t.getTable=function(e){switch(e){case"L":return cl.LOWER;case"P":return cl.PUNCT;case"M":return cl.MIXED;case"D":return cl.DIGIT;case"B":return cl.BINARY;case"U":default:return cl.UPPER}},t.getCharacter=function(e,r){switch(e){case cl.UPPER:return t.UPPER_TABLE[r];case cl.LOWER:return t.LOWER_TABLE[r];case cl.MIXED:return t.MIXED_TABLE[r];case cl.PUNCT:return t.PUNCT_TABLE[r];case cl.DIGIT:return t.DIGIT_TABLE[r];default:throw new Tw("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=$c.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=$c.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=$c.AZTEC_DATA_10):(n=12,r=$c.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new Dr;for(var o=e.length%n,l=new Int32Array(s),c=0;c<s;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new Zj(r);u.decode(l,s-a)}catch(x){throw new Dr(x)}for(var d=(1<<n)-1,f=0,c=0;c<a;c++){var A=l[c];if(A===0||A===d)throw new Dr;(A===1||A===d-1)&&f++}for(var h=new Array(a*n-f),m=0,c=0;c<a;c++){var A=l[c];if(A===1||A===d-1)h.fill(A>1,m,m+n-1),m+=n-1;else for(var p=n-1;p>=0;--p)h[m++]=(A&1<<p)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<s.length;l++)s[l]=l;else for(var c=a+1+2*Yn.truncDivision(Yn.truncDivision(a,2)-1,15),u=a/2,d=Yn.truncDivision(c,2),l=0;l<u;l++){var f=l+Yn.truncDivision(l,15);s[u-l-1]=d-f-1,s[u+l]=d+f+1}for(var l=0,A=0;l<n;l++){for(var h=(n-l)*4+(r?9:12),m=l*2,p=a-1-m,x=0;x<h;x++)for(var v=x*2,y=0;y<2;y++)o[A+v+y]=e.get(s[m+y],s[m+x]),o[A+2*h+v+y]=e.get(s[m+x],s[p-y]),o[A+4*h+v+y]=e.get(s[p-y],s[p-x]),o[A+6*h+v+y]=e.get(s[p-x],s[m+y]);A+=h*8}return o},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),ba=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,o=r-a;return Math.sqrt(s*s+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Qk=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),nn=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Qk.floatToIntBits(this.x)+Qk.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,o,l;if(n>=r&&n>=a?(o=e[0],s=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],s=e[0],l=e[2]):(o=e[2],s=e[0],l=e[1]),this.crossProductZ(s,o,l)<0){var c=s;s=l,l=c}e[0]=s,e[1]=o,e[2]=l},t.distance=function(e,r){return ba.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),F6=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),_3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E3e=function(t){_3e(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=s,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(F6),Vk=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new sr}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,o=!0,l=!1,c=!1,u=!1,d=!1,f=!1,A=this.width,h=this.height;o;){o=!1;for(var m=!0;(m||!c)&&r<A;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,c=!0):c||r++;if(r>=A){s=!0;break}for(var p=!0;(p||!u)&&a<h;)p=this.containsBlackPoint(e,r,a,!0),p?(a++,o=!0,u=!0):u||a++;if(a>=h){s=!0;break}for(var x=!0;(x||!d)&&e>=0;)x=this.containsBlackPoint(n,a,e,!1),x?(e--,o=!0,d=!0):d||e--;if(e<0){s=!0;break}for(var v=!0;(v||!f)&&n>=0;)v=this.containsBlackPoint(e,r,n,!0),v?(n--,o=!0,f=!0):f||n--;if(n<0){s=!0;break}o&&(l=!0)}if(!s&&l){for(var y=r-e,b=null,w=1;b===null&&w<y;w++)b=this.getBlackPointOnSegment(e,a-w,e+w,a);if(b==null)throw new sr;for(var j=null,w=1;j===null&&w<y;w++)j=this.getBlackPointOnSegment(e,n+w,e+w,n);if(j==null)throw new sr;for(var I=null,w=1;I===null&&w<y;w++)I=this.getBlackPointOnSegment(r,n+w,r-w,n);if(I==null)throw new sr;for(var _=null,w=1;_===null&&w<y;w++)_=this.getBlackPointOnSegment(r,a-w,r-w,a);if(_==null)throw new sr;return this.centerEdges(_,b,I,j)}else throw new sr},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=ba.round(ba.distance(e,r,n,a)),o=(n-e)/s,l=(a-r)/s,c=this.image,u=0;u<s;u++){var d=ba.round(e+u*o),f=ba.round(r+u*l);if(c.get(d,f))return new nn(d,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),f=a.getX(),A=a.getY(),h=t.CORR;return s<this.width/2?[new nn(f-h,A+h),new nn(l+h,c+h),new nn(u-h,d-h),new nn(s+h,o-h)]:[new nn(f+h,A+h),new nn(l+h,c-h),new nn(u-h,d+h),new nn(s-h,o-h)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var o=e;o<=r;o++)if(s.get(o,n))return!0}else for(var l=e;l<=r;l++)if(s.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),tH=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,o=0;o<r.length&&s;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new sr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}s=!0;for(var o=r.length-2;o>=0&&s;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new sr;s=!1,l===-1?(r[o]=0,s=!0):l===n&&(r[o]=n-1,s=!0),c===-1?(r[o+1]=0,s=!0):c===a&&(r[o+1]=a-1,s=!0)}},t}(),qre=function(){function t(e,r,n,a,s,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,o,l,c,u,d,f,A,h,m,p,x){var v=t.quadrilateralToSquare(e,r,n,a,s,o,l,c),y=t.squareToQuadrilateral(u,d,f,A,h,m,p,x);return y.times(v)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=0;A<r;A+=2){var h=e[A],m=e[A+1],p=s*h+c*m+f;e[A]=(n*h+o*m+u)/p,e[A+1]=(a*h+l*m+d)/p}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,d=this.a32,f=this.a33,A=e.length,h=0;h<A;h++){var m=e[h],p=r[h],x=s*m+c*p+f;e[h]=(n*m+o*p+u)/x,r[h]=(a*m+l*p+d)/x}},t.squareToQuadrilateral=function(e,r,n,a,s,o,l,c){var u=e-n+s-l,d=r-a+o-c;if(u===0&&d===0)return new t(n-e,s-n,e,a-r,o-a,r,0,0,1);var f=n-s,A=l-s,h=a-o,m=c-o,p=f*m-A*h,x=(u*m-A*d)/p,v=(f*d-u*h)/p;return new t(n-e+x*n,l-e+v*l,e,a-r+x*a,c-r+v*c,r,x,v,1)},t.quadrilateralToSquare=function(e,r,n,a,s,o,l,c){return t.squareToQuadrilateral(e,r,n,a,s,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),S3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I3e=function(t){S3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w){var j=qre.quadrilateralToQuadrilateral(s,o,l,c,u,d,f,A,h,m,p,x,v,y,b,w);return this.sampleGridWithTransform(r,n,a,j)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new sr;for(var o=new nh(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,d=c+.5,f=0;f<u;f+=2)l[f]=f/2+.5,l[f+1]=d;s.transformPoints(l),tH.checkAndNudgePoints(r,l);try{for(var f=0;f<u;f+=2)r.get(Math.floor(l[f]),Math.floor(l[f+1]))&&o.set(f/2,c)}catch{throw new sr}}return o},e}(tH),O6=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new I3e,t}(),Dc=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new nn(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),j3e=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new E3e(s,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new sr;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var o=n[(this.shift+s)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,o,l){var c=(s>>r-2<<1)+(s&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Yn.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new sr},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new Zj($c.AZTEC_PARAM);c.decode(o,s)}catch{throw new sr}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),d=this.getFirstDifferent(s,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(l,c,u,d))break}r=l,n=c,a=u,s=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new sr;this.compact=this.nbCenterLayers===5;var A=new nn(r.getX()+.5,r.getY()-.5),h=new nn(n.getX()+.5,n.getY()+.5),m=new nn(a.getX()-.5,a.getY()+.5),p=new nn(s.getX()-.5,s.getY()-.5);return this.expandSquare([A,h,m,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Vk(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Dc(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Dc(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Dc(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Dc(o-7,l-7),!1,-1,-1).toResultPoint()}var c=ba.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ba.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Vk(this.image,15,c,u).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new Dc(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Dc(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Dc(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Dc(c-7,u-7),!1,-1,-1).toResultPoint()}return c=ba.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=ba.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Dc(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var o=O6.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),o=s/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/s,d=o*(r.getY()-e.getY())/s,f=0;f<n;f++)this.image.get(ba.round(l+f*u),ba.round(c+f*d))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new Dc(e.getX()-s,e.getY()+s),r=new Dc(r.getX()-s,r.getY()-s),n=new Dc(n.getX()+s,n.getY()-s),a=new Dc(a.getX()+s,a.getY()+s);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)l+=a,c+=s,this.image.get(ba.round(l),ba.round(c))!==u&&o++;var A=o/n;return A>.1&&A<.9?0:A<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,o=e.getY()+a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n,o+=a;for(s-=n,o-=a;this.isValid(s,o)&&this.image.get(s,o)===r;)s+=n;for(s-=n;this.isValid(s,o)&&this.image.get(s,o)===r;)o+=a;return o-=a,new Dc(s,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new nn(l+a*s,c+a*o),d=new nn(l-a*s,c-a*o);s=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new nn(l+a*s,c+a*o),A=new nn(l-a*s,c-a*o),h=[u,f,d,A];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ba.round(e.getX()),n=ba.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ba.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ba.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Yn.truncDivision(this.nbLayers-4,8)+1)+15},t}(),PS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new j3e(e.getBlackMatrix()),s=null,o=null;try{var l=a.detectMirror(!1);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new eH().decode(l)}catch(f){n=f}if(o==null)try{var l=a.detectMirror(!0);s=l.getPoints(),this.reportFoundResultPoints(r,s),o=new eH().decode(l)}catch(f){throw n??f}var c=new ec(o.getText(),o.getRawBytes(),o.getNumBits(),s,vn.AZTEC,ps.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(wl.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&c.putMetadata(wl.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(gs.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),P3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){P3e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new PS,r)||this}return e})(A1);var Co=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(gs.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),o=s.getResultMetadata(),l=270;o!==null&&o.get(wl.ORIENTATION)===!0&&(l=l+o.get(wl.ORIENTATION)%360),s.putMetadata(wl.ORIENTATION,l);var c=s.getResultPoints();if(c!==null)for(var u=a.getHeight(),d=0;d<c.length;d++)c[d]=new nn(u-c[d].getY()-1,c[d].getX());return s}else throw new sr}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new Ko(n),o=r&&r.get(gs.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),d=0;d<c;d++){var f=Math.trunc((d+1)/2),A=(d&1)===0,h=u+l*(A?f:-f);if(h<0||h>=a)break;try{s=e.getBlackRow(h,s)}catch{continue}for(var m=function(y){if(y===1&&(s.reverse(),r&&r.get(gs.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;r.forEach(function(I,_){return b.set(_,I)}),b.delete(gs.NEED_RESULT_POINT_CALLBACK),r=b}try{var w=p.decodeRow(h,s,r);if(y===1){w.putMetadata(wl.ORIENTATION,180);var j=w.getResultPoints();j!==null&&(j[0]=new nn(n-j[0].getX()-1,j[0].getY()),j[1]=new nn(n-j[1].getX()-1,j[1].getY()))}return{value:w}}catch{}},p=this,x=0;x<2;x++){var v=m(x);if(typeof v=="object")return v.value}}throw new sr},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var o=e.getSize();if(r>=o)throw new sr;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new sr},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new sr;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return Number.POSITIVE_INFINITY;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return Number.POSITIVE_INFINITY;u+=h}return u/s},t}(),B3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rH=function(t){B3e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,d=a;d<n;d++)if(r.get(d)!==c)o[s]++;else{if(s===u-1){for(var f=e.MAX_AVG_VARIANCE,A=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var m=Co.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,A=h)}if(A>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,A]);l+=o[0]+o[1],o=o.slice(2,o.length),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,c=!c}throw new sr},e.decodeCode=function(r,n,a){Co.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<s&&(s=u,o=l)}if(o>=0)return o;throw new sr},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(gs.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Dr}for(var f=!1,A=!1,h="",m=o[0],p=o[1],x=Int32Array.from([0,0,0,0,0,0]),v=0,y=0,b=l,w=0,j=!0,I=!1,_=!1;!f;){var S=A;switch(A=!1,v=y,y=e.decodeCode(n,x,p),u[c++]=y,y!==e.CODE_STOP&&(j=!0),y!==e.CODE_STOP&&(w++,b+=w*y),m=p,p+=x.reduce(function(fe,me){return fe+me},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Dr}switch(d){case e.CODE_CODE_A:if(y<64)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else if(y<96)_===I?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)_===I?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),_=!1;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!I&&_?(I=!0,_=!1):I&&_?(I=!1,_=!1):_=!0;break;case e.CODE_SHIFT:A=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(j=!1),y){case e.CODE_FNC_1:s&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var E=p-m;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-m)/2),!1))throw new sr;if(b-=w*v,b%103!==v)throw new eo;var F=h.length;if(F===0)throw new sr;F>0&&j&&(d===e.CODE_CODE_C?h=h.substring(0,F-2):h=h.substring(0,F-1));for(var k=(o[1]+o[0])/2,B=m+E/2,D=u.length,X=new Uint8Array(D),he=0;he<D;he++)X[he]=u[he];var Ae=[new nn(k,r),new nn(B,r)];return new ec(h,X,0,Ae,vn.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Co),T3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nH=function(t){T3e(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),A=n.getSize(),h,m;do{e.recordPattern(n,f,u);var p=e.toNarrowWidePattern(u);if(p<0)throw new sr;h=e.patternToChar(p),this.decodeRowResult+=h,m=f;try{for(var x=(s=void 0,p5(u)),v=x.next();!v.done;v=x.next()){var y=v.value;f+=y}}catch(D){s={error:D}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=p5(u),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(D){l={error:D}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}var I=f-m-b;if(f!==A&&I*2<b)throw new sr;if(this.usingCheckDigit){for(var _=this.decodeRowResult.length-1,S=0,E=0;E<_;E++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(_)!==e.ALPHABET_STRING.charAt(S%43))throw new eo;this.decodeRowResult=this.decodeRowResult.substring(0,_)}if(this.decodeRowResult.length===0)throw new sr;var F;this.extendedMode?F=e.decodeExtended(this.decodeRowResult):F=this.decodeRowResult;var k=(d[1]+d[0])/2,B=m+b/2;return new ec(F,null,0,[new nn(k,r),new nn(B,r)],vn.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),o=0,l=s,c=!1,u=n.length,d=s;d<a;d++)if(r.get(d)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new sr},e.toNarrowWidePattern=function(r){var n,a,s=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,p5(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<c&&f>o&&(c=f)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var A=0,h=0,m=0;m<s;m++){var f=r[m];f>o&&(h|=1<<s-1-m,l++,A+=f)}if(l===3){for(var m=0;m<s&&l>0;m++){var f=r[m];if(f>o&&(l--,f*2>=A))return-1}return h}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new sr},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(s+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Dr;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Dr;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new Dr;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Dr;break}a+=c,s++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Co),k3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aH=function(t){k3e(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),A=this.counters;A.fill(0),this.decodeRowResult="";var h,m;do{e.recordPattern(n,d,A);var p=this.toPattern(A);if(p<0)throw new sr;h=this.patternToChar(p),this.decodeRowResult+=h,m=d;try{for(var x=(s=void 0,g5(A)),v=x.next();!v.done;v=x.next()){var y=v.value;d+=y}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}d=n.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var w=g5(A),j=w.next();!j.done;j=w.next()){var y=j.value;b+=y}}catch(E){l={error:E}}finally{try{j&&!j.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}if(d===f||!n.get(d))throw new sr;if(this.decodeRowResult.length<2)throw new sr;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var I=this.decodeExtended(this.decodeRowResult),_=(u[1]+u[0])/2,S=m+b/2;return new ec(I,null,0,[new nn(_,r),new nn(S,r)],vn.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,o=a,l=!1,c=s.length,u=0,d=a;d<n;d++)if(r.get(d)!==l)s[u]++;else{if(u===c-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new sr},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var o=g5(r),l=o.next();!l.done;l=o.next()){var c=l.value;s+=c}}catch(m){n={error:m}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var A=Math.round(r[f]*9/s);if(A<1||A>4)return-1;if(f&1)u<<=A;else for(var h=0;h<A;h++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new sr},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var o=r.charAt(s);if(o>="a"&&o<="d"){if(s>=n-1)throw new Dr;var l=r.charAt(s+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new Dr;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new Dr;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new Dr;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new Dr;break}a+=c,s++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,o=0,l=n-1;l>=0;l--)o+=s*e.ALPHABET_STRING.indexOf(r.charAt(l)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new eo},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Co),F3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sH=function(t){F3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new Gn;e.decodeMiddle(n,l[1],c[0],u);var d=u.toString(),f=null;a!=null&&(f=a.get(gs.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var A=d.length,h=!1,m=0;try{for(var p=O3e(f),x=p.next();!x.done;x=p.next()){var v=x.value;if(A===v){h=!0;break}v>m&&(m=v)}}catch(w){s={error:w}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}if(!h&&A>m&&(h=!0),!h)throw new Dr;var y=[new nn(l[1],r),new nn(c[0],r)],b=new ec(d,null,0,y,vn.ITF,new Date().getTime());return b},e.decodeMiddle=function(r,n,a,s){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){Co.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;l[u]=o[d],c[u]=o[d+1]}var f=e.decodeDigit(l);s.append(f.toString()),f=this.decodeDigit(c),s.append(f.toString()),o.forEach(function(A){n+=A})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new sr},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new sr;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof sr&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,o=new Int32Array(s),l=r.getSize(),c=!1,u=0,d=n;o.fill(0);for(var f=n;f<l;f++)if(r.get(f)!==c)o[u]++;else{if(u===s-1){if(Co.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],ps.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new sr},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,o=0;o<s;o++){var l=e.PATTERNS[o],c=Co.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new sr},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Co),D3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ov=function(t){D3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,o);var l=a[0];s=a[1];var c=l-(s-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Dr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Dr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,d=s.length,f=a,A=n;A<l;A++)if(r.get(A)!==f)o[c]++;else{if(c===d-1){if(Co.patternMatchVariance(o,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,A]);u+=o[0]+o[1];for(var h=o.slice(2,o.length),m=0;m<c-1;m++)o[m]=h[m];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,f=!f}throw new sr},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=s.length,u=0;u<c;u++){var d=s[u],f=Co.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,l=u)}if(l>=0)return l;throw new sr},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Co),R3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M3e=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new nn((n[0]+n[1])/2,e),new nn(s,e)],u=new ec(o,null,0,c,vn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<5&&c<l;d++){var f=Ov.decodeDigit(e,o,c,Ov.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,R3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(x){a={error:x}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new sr;var p=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==p)throw new sr;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new sr},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[wl.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,o=s<10?"0"+s:s.toString();return r+a+"."+o},t}(),L3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U3e=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new nn((n[0]+n[1])/2,e),new nn(s,e)],u=new ec(o,null,0,c,vn.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,s,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,d=0;d<2&&c<l;d++){var f=Ov.decodeDigit(e,o,c,Ov.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var A=(a=void 0,L3e(o)),h=A.next();!h.done;h=A.next()){var m=h.value;c+=m}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}f>=10&&(u|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new sr;if(parseInt(n.toString())%4!==u)throw new sr;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[wl.ISSUE_NUMBER,parseInt(e)]])},t}(),Q3e=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Ov.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new M3e;return s.decodeRow(e,r,a)}catch{var o=new U3e;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),V3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),po=function(t){V3e(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),o=0;o<a.length;o++)s[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),o=a==null?null:a.get(gs.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new nn((s[0]+s[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,s,this.decodeRowStringBuffer),u=c.rowOffset,d=c.resultString;if(o!=null){var f=new nn(u,r);o.foundPossibleResultPoint(f)}var A=e.decodeEnd(n,u);if(o!=null){var h=new nn((A[0]+A[1])/2,r);o.foundPossibleResultPoint(h)}var m=A[1],p=m+(m-A[0]);if(p>=n.getSize()||!n.isRange(m,p,!1))throw new sr;var x=d.toString();if(x.length<8)throw new Dr;if(!e.checkChecksum(x))throw new eo;var v=(s[1]+s[0])/2,y=(A[1]+A[0])/2,b=this.getBarcodeFormat(),w=[new nn(v,r),new nn(y,r)],j=new ec(x,null,0,w,b,new Date().getTime()),I=0;try{var _=Q3e.decodeRow(r,n,A[1]);j.putMetadata(wl.UPC_EAN_EXTENSION,_.getText()),j.putAllMetadata(_.getResultMetadata()),j.addResultPoints(_.getResultPoints()),I=_.getText().length}catch{}var S=a==null?null:a.get(gs.ALLOWED_EAN_EXTENSIONS);if(S!=null){var E=!1;for(var F in S)if(I.toString()===F){E=!0;break}if(!E)throw new sr}return b===vn.EAN_13||vn.UPC_A,j},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Dr;a+=o}a*=3;for(var s=n-2;s>=0;s-=2){var o=r.charAt(s).charCodeAt(0)-48;if(o<0||o>9)throw new Dr;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Ov),H3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hk=function(t){H3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0,h=0;h<6&&f<d;h++){var m=po.decodeDigit(r,u,f,po.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var p=(s=void 0,iH(u)),x=p.next();!x.done;x=p.next()){var v=x.value;f+=v}}catch(j){s={error:j}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}m>=10&&(A|=1<<5-h)}a=e.determineFirstDigit(a,A);var y=po.findGuardPattern(r,f,!0,po.MIDDLE_PATTERN,new Int32Array(po.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<d;h++){var m=po.decodeDigit(r,u,f,po.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var b=(l=void 0,iH(u)),w=b.next();!w.done;w=b.next()){var v=w.value;f+=v}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return vn.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new sr},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(po),$3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lH=function(t){$3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],A=0;A<4&&f<d;A++){var h=po.decodeDigit(r,u,f,po.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var m=(s=void 0,oH(u)),p=m.next();!p.done;p=m.next()){var x=p.value;f+=x}}catch(w){s={error:w}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(s)throw s.error}}}var v=po.findGuardPattern(r,f,!0,po.MIDDLE_PATTERN,new Int32Array(po.MIDDLE_PATTERN.length).fill(0));f=v[1];for(var A=0;A<4&&f<d;A++){var h=po.decodeDigit(r,u,f,po.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(l=void 0,oH(u)),b=y.next();!b.done;b=y.next()){var x=b.value;f+=x}}catch(I){l={error:I}}finally{try{b&&!b.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return vn.EAN_8},e}(po),G3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cH=function(t){G3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Hk,r}return e.prototype.getBarcodeFormat=function(){return vn.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new ec(n.substring(1),null,null,r.getResultPoints(),vn.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new sr},e.prototype.reset=function(){this.ean13Reader.reset()},e}(po),K3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uH=function(t){K3e(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,o,l=this.decodeMiddleCounters.map(function(x){return x});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],d=0,f=0;f<6&&u<c;f++){var A=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);try{for(var h=(s=void 0,q3e(l)),m=h.next();!m.done;m=h.next()){var p=m.value;u+=p}}catch(x){s={error:x}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}A>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new Gn(a),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return po.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw sr.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return vn.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new Gn;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(po),z3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x5=function(t){z3e(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(gs.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(vn.EAN_13)>-1&&s.push(new Hk),a.indexOf(vn.UPC_A)>-1&&s.push(new cH),a.indexOf(vn.EAN_8)>-1&&s.push(new lH),a.indexOf(vn.UPC_E)>-1&&s.push(new uH)),s.length===0&&(s.push(new Hk),s.push(new cH),s.push(new lH),s.push(new uH)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,o;try{for(var l=dH(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var d=u.decodeRow(r,n,a),f=d.getBarcodeFormat()===vn.EAN_13&&d.getText().charAt(0)==="0",A=a==null?null:a.get(gs.POSSIBLE_FORMATS),h=A==null||A.includes(vn.UPC_A);if(f&&h){var m=d.getRawBytes(),p=new ec(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),vn.UPC_A);return p.putAllMetadata(d.getResultMetadata()),p}return d}catch{}}}catch(x){s={error:x}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}throw new sr},e.prototype.reset=function(){var r,n;try{for(var a=dH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;o.reset()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Co),W3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X3e=function(t){W3e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new sr;var o=this.codaBarDecodeRow(s.row);if(!o)throw new sr;return new ec(o,null,0,[new nn(s.left,r),new nn(s.right,r)],vn.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var o=[],l=n[0],c=1,u=1;u<n.length;u++)n[u]===l?c++:(l=n[u],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(c,u){return(c+u)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),o=s.map(function(c){return c<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Co),Y3e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sp=function(t){Y3e(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Co.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new sr},e.count=function(r){return ba.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]>s&&(s=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],o=1;o<r.length;o++)n[o]<s&&(s=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=J3e(r),f=d.next();!f.done;f=d.next()){var A=f.value;A>u&&(u=A),A<c&&(c=A)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Co),BS=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),zre=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new nn(n,s)),this.resultPoints.push(new nn(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),Z3e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gx=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,o=0;try{for(var l=Z3e(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(y){a={error:y}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}for(var d=0,f=0,A=e.length,h=0;h<A-1;h++){var m=void 0;for(m=1,f|=1<<h;m<e[h];m++,f&=~(1<<h)){var p=t.combins(o-m-1,A-h-2);if(n&&f===0&&o-m-(A-h-1)>=A-h-1&&(p-=t.combins(o-m-(A-h),A-h-2)),A-h-1>1){for(var x=0,v=o-m-(A-h-2);v>r;v--)x+=t.combins(o-m-v-1,A-h-3);p-=x*(A-1-h)}else o-m>r&&p--;d+=p}o-=m}return d},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,o=1,l=e;l>n;l--)s*=l,o<=a&&(s/=o,o++);for(;o<=a;)s/=o,o++;return s},t}(),e5e=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Ko(n),s=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&a.set(s),s++;for(var c=1;c<e.length;++c){for(var u=e[c],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&a.set(s),s++;if(u.getRightChar()!==null)for(var A=u.getRightChar().getValue(),f=11;f>=0;--f)A&1<<f&&a.set(s),s++}return a},t}(),qm=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),D6=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),t5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hd=function(t){t5e(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(D6),r5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zm=function(t){r5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(D6),n5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dx=function(t){n5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new Dr;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(D6),QC=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a5e=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,o,l,c,u;if(!e)return null;if(e.length<2)throw new sr;var d=e.substring(0,2);try{for(var f=QC(t.TWO_DIGIT_DATA_LENGTH),A=f.next();!A.done;A=f.next()){var h=A.value;if(h[0]===d)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new sr;var m=e.substring(0,3);try{for(var p=QC(t.THREE_DIGIT_DATA_LENGTH),x=p.next();!x.done;x=p.next()){var h=x.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(I){a={error:I}}finally{try{x&&!x.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}try{for(var v=QC(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var h=y.value;if(h[0]===m)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){o={error:I}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(o)throw o.error}}if(e.length<4)throw new sr;var b=e.substring(0,4);try{for(var w=QC(t.FOUR_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var h=j.value;if(h[0]===b)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(I){c={error:I}}finally{try{j&&!j.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}throw new sr},t.processFixedAI=function(e,r,n){if(n.length<e)throw new sr;var a=n.substring(0,e);if(n.length<e+r)throw new sr;var s=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+s,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var o=n.substring(e,s),l=n.substring(s),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),uE=function(){function t(e){this.buffer=new Gn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),o=a5e.parseFieldsInGeneralPurpose(s.getNewString());if(o!=null&&e.append(o),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new dx(this.information.getSize(),dx.FNC1,dx.FNC1):new dx(this.information.getSize(),r-1,dx.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new dx(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new zm(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new zm(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new zm(this.current.getPosition(),this.buffer.toString()):r=new zm(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new qm(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new zm(this.current.getPosition(),this.buffer.toString());return new qm(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new qm(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new zm(this.current.getPosition(),this.buffer.toString());return new qm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new qm(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new zm(this.current.getPosition(),this.buffer.toString());return new qm(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new qm(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Hd(e+5,Hd.FNC1);if(r>=5&&r<15)return new Hd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Hd(e+7,""+(n+1));if(n>=90&&n<116)return new Hd(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new Dr}return new Hd(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Hd(e+5,Hd.FNC1);if(r>=5&&r<15)return new Hd(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Hd(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Tw("Decoding invalid alphanumeric value: "+n)}return new Hd(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Wre=function(){function t(e){this.information=e,this.generalDecoder=new uE(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),s5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jd=function(t){s5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var o=r.charAt(s+n).charCodeAt(0)-48;a+=s&1?o:3*o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(Wre),i5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o5e=function(t){i5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Gn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Jd),l5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c5e=function(t){l5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Gn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Wre),u5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dE=function(t){u5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var o=this.checkWeight(s),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e}(Jd),d5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xre=function(t){d5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+dE.GTIN_SIZE+e.WEIGHT_SIZE)throw new sr;var r=new Gn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+dE.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(dE),f5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h5e=function(t){f5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Xre),A5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m5e=function(t){A5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Xre),p5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g5e=function(t){p5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Jd.GTIN_SIZE)throw new sr;var r=new Gn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Jd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Jd.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Jd),x5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v5e=function(t){x5e(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Jd.GTIN_SIZE)throw new sr;var r=new Gn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Jd.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Jd.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Jd.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Jd),y5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d0=function(t){y5e(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new sr;var r=new Gn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(dE);function b5e(t){try{if(t.get(1))return new o5e(t);if(!t.get(2))return new c5e(t);var e=uE.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new h5e(t);case 5:return new m5e(t)}var r=uE.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new g5e(t);case 13:return new v5e(t)}var n=uE.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new d0(t,"310","11");case 57:return new d0(t,"320","11");case 58:return new d0(t,"310","13");case 59:return new d0(t,"320","13");case 60:return new d0(t,"310","15");case 61:return new d0(t,"320","15");case 62:return new d0(t,"310","17");case 63:return new d0(t,"320","17")}}catch(a){throw console.log(a),new Tw("unknown decoder: "+t)}}var fH=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),w5e=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),N5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C5e=function(t){N5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof sr){if(!this.pairs.length)throw new sr;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new sr},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,f0(r)),u=c.next();!u.done;u=c.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(A){a={error:A}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(l);try{return this.checkRows(f,o+1)}catch(A){console.log(A)}}}throw new sr},e.isValidSequence=function(r){var n,a;try{for(var s=f0(e.FINDER_PATTERN_SEQUENCES),o=s.next();!o.done;o=s.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==l[u]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}s=l.isEquivalent(this.pairs),a++}o||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new w5e(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,o,l,c,u;try{for(var d=f0(n),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.getPairs().length!==r.length){var h=!0;try{for(var m=(o=void 0,f0(A.getPairs())),p=m.next();!p.done;p=m.next()){var x=p.value,v=!1;try{for(var y=(c=void 0,f0(r)),b=y.next();!b.done;b=y.next()){var w=b.value;if(fH.equals(x,w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}v||(h=!1)}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}}}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,o,l,c,u;try{for(var d=f0(n),f=d.next();!f.done;f=d.next()){var A=f.value,h=!0;try{for(var m=(o=void 0,f0(r)),p=m.next();!p.done;p=m.next()){var x=p.value,v=!1;try{for(var y=(c=void 0,f0(A.getPairs())),b=y.next();!b.done;b=y.next()){var w=b.value;if(x.equals(w)){v=!0;break}}}catch(j){c={error:j}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}if(!v){h=!1;break}}}catch(j){o={error:j}}finally{try{p&&!p.done&&(l=m.return)&&l.call(m)}finally{if(o)throw o.error}}if(h)return!0}}catch(j){a={error:j}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=e5e.buildBitArray(r),a=b5e(n),s=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new ec(s,null,null,c,vn.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);s+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(s+=u.getChecksumPortion(),o++)}s%=211;var d=211*(o-4)+s;return d===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,s),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new sr;var d;try{d=this.decodeDataCharacter(r,o,s,!1)}catch(f){d=null,console.log(f)}return new fH(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var f=0,A=l,h=l;h<o;h++)if(r.get(h)!==d)s[f]++;else{if(f===3){if(u&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=A,this.startEnd[1]=h;return}u&&e.reverseCounters(s),A+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,d=!d}throw new sr},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,s=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),s=l-this.startEnd[1];var u=this.getDecodeFinderCounters();ps.arraycopy(u,0,u,1,u.length-1),u[0]=s;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new zre(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var d=o[c];o[c]=o[u],o[u]=d}}var f=17,A=ba.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(A-h)/h>.3)throw new sr;for(var m=this.getOddCounts(),p=this.getEvenCounts(),x=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var y=1*o[c]/A,b=y+.5;if(b<1){if(y<.3)throw new sr;b=1}else if(b>8){if(y>8.7)throw new sr;b=8}var w=c/2;c&1?(p[w]=b,v[w]=y-b):(m[w]=b,x[w]=y-b)}this.adjustOddEvenCounts(f);for(var j=4*n.getValue()+(a?0:2)+(s?0:1)-1,I=0,_=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c];_+=m[c]*S}I+=m[c]}for(var E=0,c=p.length-1;c>=0;c--)if(e.isNotA1left(n,a,s)){var S=e.WEIGHTS[j][2*c+1];E+=p[c]*S}var F=_+E;if(I&1||I>13||I<4)throw new sr;var k=(13-I)/2,B=e.SYMBOL_WIDEST[k],D=9-B,X=Gx.getRSSvalue(m,B,!0),he=Gx.getRSSvalue(p,D,!1),Ae=e.EVEN_TOTAL_SUBSET[k],fe=e.GSUM[k],me=X*Ae+he+fe;return new BS(me,F)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=ba.sum(new Int32Array(this.getOddCounts())),a=ba.sum(new Int32Array(this.getEvenCounts())),s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,d=(n&1)===1,f=(a&1)===0;if(u===1)if(d){if(f)throw new sr;o=!0}else{if(!f)throw new sr;c=!0}else if(u===-1)if(d){if(f)throw new sr;s=!0}else{if(!f)throw new sr;l=!0}else if(u===0){if(d){if(!f)throw new sr;n<a?(s=!0,c=!0):(o=!0,l=!0)}else if(f)throw new sr}else throw new sr;if(s){if(o)throw new sr;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new sr;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(sp),_5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E5e=function(t){_5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(BS),S5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hH=function(t){S5e(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=v5(this.possibleLeftPairs),A=f.next();!A.done;A=f.next()){var h=A.value;if(h.getCount()>1)try{for(var m=(l=void 0,v5(this.possibleRightPairs)),p=m.next();!p.done;p=m.next()){var x=p.value;if(x.getCount()>1&&e.checkChecksum(h,x))return e.constructResult(h,x)}}catch(v){l={error:v}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}}}catch(v){s={error:v}}finally{try{A&&!A.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}throw new sr},e.addOrTally=function(r,n){var a,s;if(n!=null){var o=!1;try{for(var l=v5(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),o=new Gn,l=13-s.length;l>0;l--)o.append("0");o.append(s);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=l&1?u:3*u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new ec(o.toString(),null,0,[d[0],d[1],f[0],f[1]],vn.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=s==null?null:s.get(gs.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new nn(u,a))}var d=this.decodeDataCharacter(r,l,!0),f=this.decodeDataCharacter(r,l,!1);return new E5e(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),o=0;o<s.length;o++)s[o]=0;if(a)Co.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Co.recordPattern(r,n.getStartEnd()[1]+1,s);for(var l=0,c=s.length-1;l<c;l++,c--){var u=s[l];s[l]=s[c],s[c]=u}}for(var d=a?16:15,f=ba.sum(new Int32Array(s))/d,A=this.getOddCounts(),h=this.getEvenCounts(),m=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var x=s[l]/f,v=Math.floor(x+.5);v<1?v=1:v>8&&(v=8);var y=Math.floor(l/2);l&1?(h[y]=v,p[y]=x-v):(A[y]=v,m[y]=x-v)}this.adjustOddEvenCounts(a,d);for(var b=0,w=0,l=A.length-1;l>=0;l--)w*=9,w+=A[l],b+=A[l];for(var j=0,I=0,l=h.length-1;l>=0;l--)j*=9,j+=h[l],I+=h[l];var _=w+3*j;if(a){if(b&1||b>12||b<4)throw new sr;var S=(12-b)/2,E=e.OUTSIDE_ODD_WIDEST[S],F=9-E,k=Gx.getRSSvalue(A,E,!1),B=Gx.getRSSvalue(h,F,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],X=e.OUTSIDE_GSUM[S];return new BS(k*D+B+X,_)}else{if(I&1||I>10||I<4)throw new sr;var S=(10-I)/2,E=e.INSIDE_ODD_WIDEST[S],F=9-E,k=Gx.getRSSvalue(A,E,!0),B=Gx.getRSSvalue(h,F,!1),he=e.INSIDE_ODD_TOTAL_SUBSET[S],X=e.INSIDE_GSUM[S];return new BS(B*he+k+X,_)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),o=!1,l=0;l<s&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,d=l;d<s;d++)if(r.get(d)!==o)a[c]++;else{if(c===3){if(sp.isFinderPattern(a))return[u,d];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new sr},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var o=r.get(s[0]),l=s[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=s[0]-l,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ps.arraycopy(u,0,d,1,u.length-1),d[0]=c;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),A=l,h=s[1];return a&&(A=r.getSize()-1-A,h=r.getSize()-1-h),new zre(f,[l,s[1]],A,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=ba.sum(new Int32Array(this.getOddCounts())),s=ba.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),s>12?u=!0:s<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),s>10?u=!0:s<4&&(c=!0));var d=a+s-n,f=(a&1)===(r?1:0),A=(s&1)===1;if(d===1)if(f){if(A)throw new sr;l=!0}else{if(!A)throw new sr;u=!0}else if(d===-1)if(f){if(A)throw new sr;o=!0}else{if(!A)throw new sr;c=!0}else if(d===0){if(f){if(!A)throw new sr;a<s?(o=!0,u=!0):(l=!0,c=!0)}else if(A)throw new sr}else throw new sr;if(o){if(l)throw new sr;sp.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&sp.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new sr;sp.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&sp.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(sp),I5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kx=function(t){I5e(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(gs.POSSIBLE_FORMATS):null,s=r&&r.get(gs.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(gs.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(vn.EAN_13)||a.includes(vn.UPC_A)||a.includes(vn.EAN_8)||a.includes(vn.UPC_E))&&n.readers.push(new x5(r)),a.includes(vn.CODE_39)&&n.readers.push(new nH(s,o)),a.includes(vn.CODE_93)&&n.readers.push(new aH),a.includes(vn.CODE_128)&&n.readers.push(new rH),a.includes(vn.ITF)&&n.readers.push(new sH),a.includes(vn.CODABAR)&&n.readers.push(new X3e),a.includes(vn.RSS_14)&&n.readers.push(new hH),a.includes(vn.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new C5e))),n.readers.length===0&&(n.readers.push(new x5(r)),n.readers.push(new nH),n.readers.push(new aH),n.readers.push(new x5(r)),n.readers.push(new rH),n.readers.push(new sH),n.readers.push(new hH)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new sr},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Co),j5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){j5e(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Kx(n),r,n)||this}return e})(A1);var AH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ka=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Sa=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),P5e=function(){function t(e,r,n,a,s,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var A=AH(f),h=A.next();!h.done;h=A.next()){var m=h.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(p){l={error:p}}finally{try{h&&!h.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if(e&1||r&1)throw new Dr;try{for(var s=AH(t.VERSIONS),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new Dr},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new ka(5,new Sa(1,3))),new t(2,12,12,10,10,new ka(7,new Sa(1,5))),new t(3,14,14,12,12,new ka(10,new Sa(1,8))),new t(4,16,16,14,14,new ka(12,new Sa(1,12))),new t(5,18,18,16,16,new ka(14,new Sa(1,18))),new t(6,20,20,18,18,new ka(18,new Sa(1,22))),new t(7,22,22,20,20,new ka(20,new Sa(1,30))),new t(8,24,24,22,22,new ka(24,new Sa(1,36))),new t(9,26,26,24,24,new ka(28,new Sa(1,44))),new t(10,32,32,14,14,new ka(36,new Sa(1,62))),new t(11,36,36,16,16,new ka(42,new Sa(1,86))),new t(12,40,40,18,18,new ka(48,new Sa(1,114))),new t(13,44,44,20,20,new ka(56,new Sa(1,144))),new t(14,48,48,22,22,new ka(68,new Sa(1,174))),new t(15,52,52,24,24,new ka(42,new Sa(2,102))),new t(16,64,64,14,14,new ka(56,new Sa(2,140))),new t(17,72,72,16,16,new ka(36,new Sa(4,92))),new t(18,80,80,18,18,new ka(48,new Sa(4,114))),new t(19,88,88,20,20,new ka(56,new Sa(4,144))),new t(20,96,96,22,22,new ka(68,new Sa(4,174))),new t(21,104,104,24,24,new ka(56,new Sa(6,136))),new t(22,120,120,18,18,new ka(68,new Sa(6,175))),new t(23,132,132,20,20,new ka(62,new Sa(8,163))),new t(24,144,144,22,22,new ka(62,new Sa(8,156),new Sa(2,155))),new t(25,8,18,6,16,new ka(7,new Sa(1,5))),new t(26,8,32,6,14,new ka(11,new Sa(1,10))),new t(27,12,26,10,24,new ka(14,new Sa(1,16))),new t(28,12,36,10,16,new ka(18,new Sa(1,22))),new t(29,16,36,14,16,new ka(24,new Sa(1,32))),new t(30,16,48,14,22,new ka(28,new Sa(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),B5e=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Dr;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new nh(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return P5e.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,d=!1;do if(n===s&&a===0&&!l)e[r++]=this.readCorner1(s,o)&255,n-=2,a+=2,l=!0;else if(n===s-2&&a===0&&o&3&&!c)e[r++]=this.readCorner2(s,o)&255,n-=2,a+=2,c=!0;else if(n===s+4&&a===2&&!(o&7)&&!u)e[r++]=this.readCorner3(s,o)&255,n-=2,a+=2,u=!0;else if(n===s-2&&a===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(s,o)&255,n-=2,a+=2,d=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,o)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<o);if(r!==this.version.getTotalCodewords())throw new Dr;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new yn("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/s|0,c=o*a,u=l*s,d=new nh(u,c),f=0;f<o;++f)for(var A=f*a,h=0;h<l;++h)for(var m=h*s,p=0;p<a;++p)for(var x=f*(a+2)+1+p,v=A+p,y=0;y<s;++y){var b=h*(s+2)+1+y;if(e.get(b,x)){var w=m+y;d.set(w,v)}}return d},t}(),mH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var d=mH(u),f=d.next();!f.done;f=d.next()){var A=f.value;c+=A.getCount()}}catch(X){n={error:X}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var h=new Array(c),m=0;try{for(var p=mH(u),x=p.next();!x.done;x=p.next())for(var A=x.value,v=0;v<A.getCount();v++){var y=A.getDataCodewords(),b=l.getECCodewords()+y;h[m++]=new t(y,new Uint8Array(b))}}catch(X){s={error:X}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}for(var w=h[0].codewords.length,j=w-l.getECCodewords(),I=j-1,_=0,v=0;v<I;v++)for(var S=0;S<m;S++)h[S].codewords[v]=e[_++];for(var E=r.getVersionNumber()===24,F=E?8:m,S=0;S<F;S++)h[S].codewords[j-1]=e[_++];for(var k=h[0].codewords.length,v=j;v<k;v++)for(var S=0;S<m;S++){var B=E?(S+8)%m:S,D=E&&B>7?v-1:v;h[B].codewords[D]=e[_++]}if(_!==e.length)throw new yn;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Yre=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new yn(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(s[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(s[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),uo;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(uo||(uo={}));var k5e=function(){function t(){}return t.decode=function(e){var r=new Yre(e),n=new Gn,a=new Gn,s=new Array,o=uo.ASCII_ENCODE;do if(o===uo.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case uo.C40_ENCODE:this.decodeC40Segment(r,n);break;case uo.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case uo.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case uo.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case uo.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new Dr}o=uo.ASCII_ENCODE}while(o!==uo.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new Jj(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new Dr;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),uo.ASCII_ENCODE;if(s===129)return uo.PAD_ENCODE;if(s<=229){var o=s-130;o<10&&r.append("0"),r.append(""+o)}else switch(s){case 230:return uo.C40_ENCODE;case 231:return uo.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return uo.ANSIX12_ENCODE;case 239:return uo.TEXT_ENCODE;case 240:return uo.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new Dr;break}}while(e.available()>0);return uo.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Dr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Dr}s=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),s=0;break;default:throw new Dr}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(s){case 0:if(c<3)s=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Dr;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),s=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new Dr}s=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),s=0}else throw new Dr;break;default:throw new Dr}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var o=n[s];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Dr;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}a&32||(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),o;if(s===0?o=e.available()/8|0:s<250?o=s:o=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new Dr;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new Dr;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(yd.decode(l,fa.ISO88591))}catch(u){throw new Tw("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),F5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O5e=function(){function t(){this.rsDecoder=new Zj($c.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new B5e(e),s=a.getVersion(),o=a.readCodewords(),l=T5e.getDataBlocks(o,s),c=0;try{for(var u=F5e(l),d=u.next();!d.done;d=u.next()){var f=d.value;c+=f.getNumDataCodewords()}}catch(b){r={error:b}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var A=new Uint8Array(c),h=l.length,m=0;m<h;m++){var p=l[m],x=p.getCodewords(),v=p.getNumDataCodewords();this.correctErrors(x,v);for(var y=0;y<v;y++)A[y*h+m]=x[y]}return k5e.decode(A)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new eo}for(var a=0;a<r;a++)e[a]=n[a]},t}(),D5e=function(){function t(e){this.image=e,this.rectangleDetector=new Vk(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new sr;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(s,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,s,o,l,c);return new F6(u,[n,a,s,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new nn(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new nn(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,s),u=this.transitionsBetween(s,r),d=o,f=[s,r,n,a];return d>l&&(d=l,f[0]=r,f[1]=n,f[2]=a,f[3]=s),d>c&&(d=c,f[0]=n,f[1]=a,f[2]=s,f[3]=r),d>u&&(f[0]=a,f[1]=s,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),d=this.transitionsBetween(c,s);return u<d?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s),l=this.transitionsBetween(n,s),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,s),l=this.transitionsBetween(u,s);var d=new nn(s.getX()+(a.getX()-n.getX())/(o+1),s.getY()+(a.getY()-n.getY())/(o+1)),f=new nn(s.getX()+(r.getX()-n.getX())/(l+1),s.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var A=this.transitionsBetween(c,d)+this.transitionsBetween(u,d),h=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return A>h?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(a,s)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,s)+1,l=this.transitionsBetween(u,s)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+a.getX()+s.getX())/4,f=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),a=t.moveAway(a,d,f),s=t.moveAway(s,d,f);var A,h;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,s,o*4),A=t.shiftPoint(n,r,l*4),A=t.shiftPoint(A,a,o*4),u=t.shiftPoint(a,s,l*4),u=t.shiftPoint(u,n,o*4),h=t.shiftPoint(s,a,l*4),h=t.shiftPoint(h,r,o*4),[c,A,u,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,o,l){var c=O6.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(s-n);if(l){var c=n;n=a,a=c,c=s,s=o,o=c}for(var u=Math.abs(s-n),d=Math.abs(o-a),f=-u/2,A=a<o?1:-1,h=n<s?1:-1,m=0,p=this.image.get(l?a:n,l?n:a),x=n,v=a;x!==s;x+=h){var y=this.image.get(l?v:x,l?x:v);if(y!==p&&(m++,p=y),f+=d,f>0){if(v===o)break;v+=A,f-=u}}return m},t}(),TS=function(){function t(){this.decoder=new O5e}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(gs.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var o=new D5e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new ec(n.getText(),l,8*l.length,a,vn.DATA_MATRIX,ps.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(wl.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&c.putMetadata(wl.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new sr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,d=(o-s+1)/a;if(u<=0||d<=0)throw new sr;var f=a/2;s+=f,l+=f;for(var A=new nh(u,d),h=0;h<d;h++)for(var m=s+h*a,p=0;p<u;p++)e.get(l+p*a,m)&&A.set(p,h);return A},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new sr;var o=a-e[0];if(o===0)throw new sr;return o},t.NO_POINTS=[],t}(),R5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){R5e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new TS,r)||this}return e})(A1);var qx;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(qx||(qx={}));var M5e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ki(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new yn;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(qx.L,"L",1),t.M=new t(qx.M,"M",0),t.Q=new t(qx.Q,"Q",3),t.H=new t(qx.H,"H",2),t}(),L5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jre=function(){function t(e){this.errorCorrectionLevel=M5e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Yn.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=L5e(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<s&&(o=u[1],s=f),e!==r&&(f=t.numBitsDiffering(r,d),f<s&&(o=u[1],s=f))}}catch(A){n={error:A}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return s<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),U5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=U5e(a),o=s.next();!o.done;o=s.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),at=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Q5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Op=function(){function t(e,r){for(var n,a,s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var l=0,c=s[0].getECCodewordsPerBlock(),u=s[0].getECBlocks();try{for(var d=Q5e(u),f=d.next();!f.done;f=d.next()){var A=f.value;l+=A.getCount()*(A.getDataCodewords()+c)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Dr;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Dr}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new yn;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var o=Jre.numBitsDiffering(e,s);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new nh(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Ht(7,new at(1,19)),new Ht(10,new at(1,16)),new Ht(13,new at(1,13)),new Ht(17,new at(1,9))),new t(2,Int32Array.from([6,18]),new Ht(10,new at(1,34)),new Ht(16,new at(1,28)),new Ht(22,new at(1,22)),new Ht(28,new at(1,16))),new t(3,Int32Array.from([6,22]),new Ht(15,new at(1,55)),new Ht(26,new at(1,44)),new Ht(18,new at(2,17)),new Ht(22,new at(2,13))),new t(4,Int32Array.from([6,26]),new Ht(20,new at(1,80)),new Ht(18,new at(2,32)),new Ht(26,new at(2,24)),new Ht(16,new at(4,9))),new t(5,Int32Array.from([6,30]),new Ht(26,new at(1,108)),new Ht(24,new at(2,43)),new Ht(18,new at(2,15),new at(2,16)),new Ht(22,new at(2,11),new at(2,12))),new t(6,Int32Array.from([6,34]),new Ht(18,new at(2,68)),new Ht(16,new at(4,27)),new Ht(24,new at(4,19)),new Ht(28,new at(4,15))),new t(7,Int32Array.from([6,22,38]),new Ht(20,new at(2,78)),new Ht(18,new at(4,31)),new Ht(18,new at(2,14),new at(4,15)),new Ht(26,new at(4,13),new at(1,14))),new t(8,Int32Array.from([6,24,42]),new Ht(24,new at(2,97)),new Ht(22,new at(2,38),new at(2,39)),new Ht(22,new at(4,18),new at(2,19)),new Ht(26,new at(4,14),new at(2,15))),new t(9,Int32Array.from([6,26,46]),new Ht(30,new at(2,116)),new Ht(22,new at(3,36),new at(2,37)),new Ht(20,new at(4,16),new at(4,17)),new Ht(24,new at(4,12),new at(4,13))),new t(10,Int32Array.from([6,28,50]),new Ht(18,new at(2,68),new at(2,69)),new Ht(26,new at(4,43),new at(1,44)),new Ht(24,new at(6,19),new at(2,20)),new Ht(28,new at(6,15),new at(2,16))),new t(11,Int32Array.from([6,30,54]),new Ht(20,new at(4,81)),new Ht(30,new at(1,50),new at(4,51)),new Ht(28,new at(4,22),new at(4,23)),new Ht(24,new at(3,12),new at(8,13))),new t(12,Int32Array.from([6,32,58]),new Ht(24,new at(2,92),new at(2,93)),new Ht(22,new at(6,36),new at(2,37)),new Ht(26,new at(4,20),new at(6,21)),new Ht(28,new at(7,14),new at(4,15))),new t(13,Int32Array.from([6,34,62]),new Ht(26,new at(4,107)),new Ht(22,new at(8,37),new at(1,38)),new Ht(24,new at(8,20),new at(4,21)),new Ht(22,new at(12,11),new at(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Ht(30,new at(3,115),new at(1,116)),new Ht(24,new at(4,40),new at(5,41)),new Ht(20,new at(11,16),new at(5,17)),new Ht(24,new at(11,12),new at(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Ht(22,new at(5,87),new at(1,88)),new Ht(24,new at(5,41),new at(5,42)),new Ht(30,new at(5,24),new at(7,25)),new Ht(24,new at(11,12),new at(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Ht(24,new at(5,98),new at(1,99)),new Ht(28,new at(7,45),new at(3,46)),new Ht(24,new at(15,19),new at(2,20)),new Ht(30,new at(3,15),new at(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Ht(28,new at(1,107),new at(5,108)),new Ht(28,new at(10,46),new at(1,47)),new Ht(28,new at(1,22),new at(15,23)),new Ht(28,new at(2,14),new at(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Ht(30,new at(5,120),new at(1,121)),new Ht(26,new at(9,43),new at(4,44)),new Ht(28,new at(17,22),new at(1,23)),new Ht(28,new at(2,14),new at(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Ht(28,new at(3,113),new at(4,114)),new Ht(26,new at(3,44),new at(11,45)),new Ht(26,new at(17,21),new at(4,22)),new Ht(26,new at(9,13),new at(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Ht(28,new at(3,107),new at(5,108)),new Ht(26,new at(3,41),new at(13,42)),new Ht(30,new at(15,24),new at(5,25)),new Ht(28,new at(15,15),new at(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Ht(28,new at(4,116),new at(4,117)),new Ht(26,new at(17,42)),new Ht(28,new at(17,22),new at(6,23)),new Ht(30,new at(19,16),new at(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Ht(28,new at(2,111),new at(7,112)),new Ht(28,new at(17,46)),new Ht(30,new at(7,24),new at(16,25)),new Ht(24,new at(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Ht(30,new at(4,121),new at(5,122)),new Ht(28,new at(4,47),new at(14,48)),new Ht(30,new at(11,24),new at(14,25)),new Ht(30,new at(16,15),new at(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Ht(30,new at(6,117),new at(4,118)),new Ht(28,new at(6,45),new at(14,46)),new Ht(30,new at(11,24),new at(16,25)),new Ht(30,new at(30,16),new at(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Ht(26,new at(8,106),new at(4,107)),new Ht(28,new at(8,47),new at(13,48)),new Ht(30,new at(7,24),new at(22,25)),new Ht(30,new at(22,15),new at(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Ht(28,new at(10,114),new at(2,115)),new Ht(28,new at(19,46),new at(4,47)),new Ht(28,new at(28,22),new at(6,23)),new Ht(30,new at(33,16),new at(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Ht(30,new at(8,122),new at(4,123)),new Ht(28,new at(22,45),new at(3,46)),new Ht(30,new at(8,23),new at(26,24)),new Ht(30,new at(12,15),new at(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Ht(30,new at(3,117),new at(10,118)),new Ht(28,new at(3,45),new at(23,46)),new Ht(30,new at(4,24),new at(31,25)),new Ht(30,new at(11,15),new at(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Ht(30,new at(7,116),new at(7,117)),new Ht(28,new at(21,45),new at(7,46)),new Ht(30,new at(1,23),new at(37,24)),new Ht(30,new at(19,15),new at(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Ht(30,new at(5,115),new at(10,116)),new Ht(28,new at(19,47),new at(10,48)),new Ht(30,new at(15,24),new at(25,25)),new Ht(30,new at(23,15),new at(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Ht(30,new at(13,115),new at(3,116)),new Ht(28,new at(2,46),new at(29,47)),new Ht(30,new at(42,24),new at(1,25)),new Ht(30,new at(23,15),new at(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Ht(30,new at(17,115)),new Ht(28,new at(10,46),new at(23,47)),new Ht(30,new at(10,24),new at(35,25)),new Ht(30,new at(19,15),new at(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Ht(30,new at(17,115),new at(1,116)),new Ht(28,new at(14,46),new at(21,47)),new Ht(30,new at(29,24),new at(19,25)),new Ht(30,new at(11,15),new at(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Ht(30,new at(13,115),new at(6,116)),new Ht(28,new at(14,46),new at(23,47)),new Ht(30,new at(44,24),new at(7,25)),new Ht(30,new at(59,16),new at(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Ht(30,new at(12,121),new at(7,122)),new Ht(28,new at(12,47),new at(26,48)),new Ht(30,new at(39,24),new at(14,25)),new Ht(30,new at(22,15),new at(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Ht(30,new at(6,121),new at(14,122)),new Ht(28,new at(6,47),new at(34,48)),new Ht(30,new at(46,24),new at(10,25)),new Ht(30,new at(2,15),new at(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Ht(30,new at(17,122),new at(4,123)),new Ht(28,new at(29,46),new at(14,47)),new Ht(30,new at(49,24),new at(10,25)),new Ht(30,new at(24,15),new at(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Ht(30,new at(4,122),new at(18,123)),new Ht(28,new at(13,46),new at(32,47)),new Ht(30,new at(48,24),new at(14,25)),new Ht(30,new at(42,15),new at(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Ht(30,new at(20,117),new at(4,118)),new Ht(28,new at(40,47),new at(7,48)),new Ht(30,new at(43,24),new at(22,25)),new Ht(30,new at(10,15),new at(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Ht(30,new at(19,118),new at(6,119)),new Ht(28,new at(18,47),new at(31,48)),new Ht(30,new at(34,24),new at(34,25)),new Ht(30,new at(20,15),new at(61,16)))],t}(),Do;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Do||(Do={}));var pH=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Do.DATA_MASK_000,new t(Do.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Do.DATA_MASK_001,new t(Do.DATA_MASK_001,function(e,r){return(e&1)===0})],[Do.DATA_MASK_010,new t(Do.DATA_MASK_010,function(e,r){return r%3===0})],[Do.DATA_MASK_011,new t(Do.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Do.DATA_MASK_100,new t(Do.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Do.DATA_MASK_101,new t(Do.DATA_MASK_101,function(e,r){return e*r%6===0})],[Do.DATA_MASK_110,new t(Do.DATA_MASK_110,function(e,r){return e*r%6<3})],[Do.DATA_MASK_111,new t(Do.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),V5e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Dr;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,o=a-7,n=a-1;n>=o;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=Jre.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Dr},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Op.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,s,n);var l=Op.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var s=e-9;s>=a;s--)n=this.copyBit(o,s,n);if(l=Op.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Dr},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=pH.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,d=0,f=a-1;f>0;f-=2){f===6&&f--;for(var A=0;A<a;A++)for(var h=o?a-1-A:A,m=0;m<2;m++)s.get(f-m,h)||(d++,u<<=1,this.bitMatrix.get(f-m,h)&&(u|=1),d===8&&(l[c++]=u,d=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new Dr;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=pH.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),gH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H5e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,o,l;if(e.length!==r.getTotalCodewords())throw new yn;var c=r.getECBlocksForLevel(n),u=0,d=c.getECBlocks();try{for(var f=gH(d),A=f.next();!A.done;A=f.next()){var h=A.value;u+=h.getCount()}}catch(D){a={error:D}}finally{try{A&&!A.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=new Array(u),p=0;try{for(var x=gH(d),v=x.next();!v.done;v=x.next())for(var h=v.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=c.getECCodewordsPerBlock()+b;m[p++]=new t(b,new Uint8Array(w))}}catch(D){o={error:D}}finally{try{v&&!v.done&&(l=x.return)&&l.call(x)}finally{if(o)throw o.error}}for(var j=m[0].codewords.length,I=m.length-1;I>=0;){var _=m[I].codewords.length;if(_===j)break;I--}I++;for(var S=j-c.getECCodewordsPerBlock(),E=0,y=0;y<S;y++)for(var F=0;F<p;F++)m[F].codewords[y]=e[E++];for(var F=I;F<p;F++)m[F].codewords[S]=e[E++];for(var k=m[0].codewords.length,y=S;y<k;y++)for(var F=0;F<p;F++){var B=F<I?y:y+1;m[F].codewords[B]=e[E++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),nd;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(nd||(nd={}));var Cs=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new yn;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(nd.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(nd.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(nd.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(nd.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(nd.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(nd.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(nd.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(nd.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(nd.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(nd.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),$5e=function(){function t(){}return t.decode=function(e,r,n,a){var s=new Yre(e),o=new Gn,l=new Array,c=-1,u=-1;try{var d=null,f=!1,A=void 0;do{if(s.available()<4)A=Cs.TERMINATOR;else{var h=s.readBits(4);A=Cs.forBits(h)}switch(A){case Cs.TERMINATOR:break;case Cs.FNC1_FIRST_POSITION:case Cs.FNC1_SECOND_POSITION:f=!0;break;case Cs.STRUCTURED_APPEND:if(s.available()<16)throw new Dr;c=s.readBits(8),u=s.readBits(8);break;case Cs.ECI:var m=t.parseECIValue(s);if(d=yo.getCharacterSetECIByValue(m),d===null)throw new Dr;break;case Cs.HANZI:var p=s.readBits(4),x=s.readBits(A.getCharacterCountBits(r));p===t.GB2312_SUBSET&&t.decodeHanziSegment(s,o,x);break;default:var v=s.readBits(A.getCharacterCountBits(r));switch(A){case Cs.NUMERIC:t.decodeNumericSegment(s,o,v);break;case Cs.ALPHANUMERIC:t.decodeAlphanumericSegment(s,o,v,f);break;case Cs.BYTE:t.decodeByteSegment(s,o,v,d,l,a);break;case Cs.KANJI:t.decodeKanjiSegment(s,o,v);break;default:throw new Dr}break}}while(A!==Cs.TERMINATOR)}catch{throw new Dr}return new Jj(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Dr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[s]=l>>8&255,a[s+1]=l&255,s+=2,n--}try{r.append(yd.decode(a,fa.GB2312))}catch(c){throw new Dr(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Dr;for(var a=new Uint8Array(2*n),s=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[s]=l>>8,a[s+1]=l,s+=2,n--}try{r.append(yd.decode(a,fa.SHIFT_JIS))}catch(c){throw new Dr(c)}},t.decodeByteSegment=function(e,r,n,a,s,o){if(8*n>e.available())throw new Dr;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=fa.guessEncoding(l,o):u=a.getName();try{r.append(yd.decode(l,u))}catch(d){throw new Dr(d)}s.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Dr;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new Dr;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Dr;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=s;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Dr;var a=e.readBits(10);if(a>=1e3)throw new Dr;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Dr;var s=e.readBits(7);if(s>=100)throw new Dr;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new Dr;var o=e.readBits(4);if(o>=10)throw new Dr;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new Dr},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Zre=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),xH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G5e=function(){function t(){this.rsDecoder=new Zj($c.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(nh.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new V5e(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new Zre(!0)),s}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=H5e.getDataBlocks(u,l,c),f=0;try{for(var A=xH(d),h=A.next();!h.done;h=A.next()){var m=h.value;f+=m.getNumDataCodewords()}}catch(I){n={error:I}}finally{try{h&&!h.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}var p=new Uint8Array(f),x=0;try{for(var v=xH(d),y=v.next();!y.done;y=v.next()){var m=y.value,b=m.getCodewords(),w=m.getNumDataCodewords();this.correctErrors(b,w);for(var j=0;j<w;j++)p[x++]=b[j]}}catch(I){s={error:I}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}return $5e.decode(p,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new eo}for(var a=0;a<r;a++)e[a]=n[a]},t}(),K5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q5e=function(t){K5e(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(s,o,l)},e}(nn),z5e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W5e=function(){function t(e,r,n,a,s,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=s+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<a&&!l.get(d,u);)d++;for(var f=0;d<a;){if(l.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,d);if(A!==null)return A}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var A=this.handlePossibleCenter(o,u,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new sr},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,o=s.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!s.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=z5e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value;if(A.aboutEquals(u,c,l))return A.combineEstimate(c,l,u)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var h=new q5e(l,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),X5e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y5e=function(t){X5e(e,t);function e(r,n,a,s){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=s,s===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,o=(this.count*this.getX()+n)/s,l=(this.count*this.getY()+r)/s,c=(this.count*this.estimatedModuleSize+a)/s;return new e(o,l,c,s)},e}(nn),J5e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Ay=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z5e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(gs.TRY_HARDER)!==void 0,n=e!=null&&e.get(gs.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),o=a.getWidth(),l=Math.floor(3*s/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),d=l-1;d<s&&!c;d+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,A=0;A<o;A++)if(a.get(A,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,A,n);if(h===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-l,A=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var h=this.handlePossibleCenter(u,d,o,n);h===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var p=this.selectBestPatterns();return nn.orderBestPatterns(p),new J5e(p)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,o=s/2;return Math.abs(s-e[0])<o&&Math.abs(s-e[1])<o&&Math.abs(3*s-e[2])<3*o&&Math.abs(s-e[3])<o&&Math.abs(s-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)s[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&s[1]<=n;)s[1]++,o++;if(e<o||r<o||s[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&s[0]<=n;)s[0]++,o++;if(s[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)s[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&s[3]<n;)s[3]++,o++;if(e+o>=c||r+o>=u||s[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&s[4]<n;)s[4]++,o++;if(s[4]>=n)return!1;var d=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(d-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,o=s.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,o=s.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&s.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!s.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&s.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&s.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!s.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&s.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],s);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],s),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],s)))){for(var c=s/7,u=!1,d=this.possibleCenters,f=0,A=d.length;f<A;f++){var h=d[f];if(h.aboutEquals(c,l,o)){d[f]=h.combineEstimate(l,o,c),u=!0;break}}if(!u){var m=new Y5e(o,l,c);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=Ay(this.possibleCenters),o=s.next();!o.done;o=s.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,o=0,l=this.possibleCenters.length;try{for(var c=Ay(this.possibleCenters),u=c.next();!u.done;u=c.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(s++,o+=d.getEstimatedModuleSize())}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(s<3)return!1;var f=o/l,A=0;try{for(var h=Ay(this.possibleCenters),m=h.next();!m.done;m=h.next()){var d=m.value;A+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return A<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new sr;var o=this.possibleCenters,l;if(s>3){var c=0,u=0;try{for(var d=Ay(this.possibleCenters),f=d.next();!f.done;f=d.next()){var A=f.value,h=A.getEstimatedModuleSize();c+=h,u+=h*h}}catch(j){e={error:j}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/s;var m=Math.sqrt(u/s-l*l);o.sort(function(j,I){var _=Math.abs(I.getEstimatedModuleSize()-l),S=Math.abs(j.getEstimatedModuleSize()-l);return _<S?-1:_>S?1:0});for(var p=Math.max(.2*l,m),x=0;x<o.length&&o.length>3;x++){var v=o[x];Math.abs(v.getEstimatedModuleSize()-l)>p&&(o.splice(x,1),x--)}}if(o.length>3){var c=0;try{for(var y=Ay(o),b=y.next();!b.done;b=y.next()){var w=b.value;c+=w.getEstimatedModuleSize()}}catch(I){n={error:I}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(I,_){if(_.getCount()===I.getCount()){var S=Math.abs(_.getEstimatedModuleSize()-l),E=Math.abs(I.getEstimatedModuleSize()-l);return S<E?1:S>E?-1:0}else return _.getCount()-I.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),eBe=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(gs.NEED_RESULT_POINT_CALLBACK);var r=new Z5e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new sr("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,s),l=Op.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),A=1-3/c,h=Math.floor(r.getX()+A*(d-r.getX())),m=Math.floor(r.getY()+A*(f-r.getY())),p=4;p<=16;p<<=1)try{u=this.findAlignmentInRegion(s,h,m,p);break}catch(b){if(!(b instanceof sr))throw b}var x=t.createTransform(r,n,a,u,o),v=t.sampleGrid(this.image,x,o),y;return u===null?y=[a,r,n]:y=[a,r,n,u],new F6(v,y)},t.createTransform=function(e,r,n,a,s){var o=s-3.5,l,c,u,d;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,d=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,d=o),qre.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=O6.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=ba.round(nn.distance(e,r)/a),o=ba.round(nn.distance(e,n)/a),l=Math.floor((s+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new sr("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),s+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,d=e<n?1:-1,f=r<a?1:-1,A=0,h=n+d,m=e,p=r;m!==h;m+=d){var x=s?p:m,v=s?m:p;if(A===1===this.image.get(x,v)){if(A===2)return ba.distance(m,p,e,r);A++}if(u+=c,u>0){if(p===a)break;p+=f,u-=l}}return A===2?ba.distance(n+d,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),o=Math.max(0,r-s),l=Math.min(this.image.getWidth()-1,r+s);if(l-o<e*3)throw new sr("Alignment top exceeds estimated module size.");var c=Math.max(0,n-s),u=Math.min(this.image.getHeight()-1,n+s);if(u-c<e*3)throw new sr("Alignment bottom exceeds estimated module size.");var d=new W5e(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return d.find()},t}(),kS=function(){function t(){this.decoder=new G5e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(gs.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var o=new eBe(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof Zre&&n.getOther().applyMirroredCorrection(a);var l=new ec(n.getText(),n.getRawBytes(),void 0,a,vn.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(wl.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(wl.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(wl.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(wl.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new sr;var a=this.moduleSize(r,e),s=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||s>=o)throw new sr;if(o-s!==c-l&&(c=l+(o-s),c>=e.getWidth()))throw new sr;var u=Math.round((c-l+1)/a),d=Math.round((o-s+1)/a);if(u<=0||d<=0)throw new sr;if(d!==u)throw new sr;var f=Math.floor(a/2);s+=f,l+=f;var A=l+Math.floor((u-1)*a)-c;if(A>0){if(A>f)throw new sr;l-=A}var h=s+Math.floor((d-1)*a)-o;if(h>0){if(h>f)throw new sr;s-=h}for(var m=new nh(u,d),p=0;p<d;p++)for(var x=s+Math.floor(p*a),v=0;v<u;v++)e.get(l+Math.floor(v*a),x)&&m.set(v,p);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],o=e[1],l=!0,c=0;s<a&&o<n;){if(l!==r.get(s,o)){if(++c===5)break;l=!l}s++,o++}if(s===a||o===n)throw new sr;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),tBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ma=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ba.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var o=tBe(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[s++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=bo.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),rBe=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),nBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aBe=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new rBe(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,nBe(s)),f=d.next();!f.done;f=d.next()){var A=f.value;A[1]!=null&&(o=Math.trunc(Math.max(o,A[1].getY()))),A[3]!=null&&(o=Math.max(o,Math.trunc(A[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,s.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var d=t.findGuardPattern(e,s,a,n,!1,o,u);if(d!=null){for(;a>0;){var f=t.findGuardPattern(e,s,--a,n,!1,o,u);if(f!=null)d=f;else{a++;break}}l[0]=new nn(d[0],a),l[1]=new nn(d[1],a),c=!0;break}}var A=a+1;if(c){for(var h=0,f=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);A<r;A++){var d=t.findGuardPattern(e,f[0],A,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}A-=h+1,l[2]=new nn(f[0],A),l[3]=new nn(f[1],A)}return A-a<t.BARCODE_MIN_HEIGHT&&bo.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,s,o,l){bo.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,f=0,A=o.length,h=s;d<a;d++){var m=e.get(d,n);if(m!==h)l[f]++;else{if(f===A-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],ps.arraycopy(l,2,l,0,f-1),l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,h=!h}}return f===A-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,o=0,l=0;l<a;l++)s+=e[l],o+=r[l];if(s<o)return 1/0;var c=s/o;n*=c;for(var u=0,d=0;d<a;d++){var f=e[d],A=r[d]*c,h=f>A?f-A:A-f;if(h>n)return 1/0;u+=h}return u/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),sBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bp=function(){function t(e,r){if(r.length===0)throw new yn;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),ps.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=sBe(this.coefficients),o=s.next();!o.done;o=s.next()){var l=o.value;a=this.field.add(a,l)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),o=n.length-r.length;ps.arraycopy(n,0,s,0,o);for(var l=o;l<n.length;l++)s[l]=this.field.add(r[l-o],n[l]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new yn("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,o=new Int32Array(n+s-1),l=0;l<n;l++)for(var c=r[l],u=0;u<s;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new yn;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Gn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),iBe=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new yn;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Kre;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),oBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lBe=function(t){oBe(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,o=0;o<r;o++)a.expTable[o]=s,s=s*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new bp(a,new Int32Array([0])),a.one=new bp(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new yn;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new bp(this,a)},e.PDF417_GF=new e(ma.NUMBER_OF_CODEWORDS,3),e}(iBe),cBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uBe=function(){function t(){this.field=lBe.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,o=new bp(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));l[r-u]=d,d!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(n!=null)try{for(var A=cBe(n),h=A.next();!h.done;h=A.next()){var m=h.value,p=this.field.exp(e.length-1-m),x=new bp(this.field,new Int32Array([this.field.subtract(0,p),1]));f=f.multiply(x)}}catch(S){a={error:S}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}for(var v=new bp(this.field,l),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),v,r),b=y[0],w=y[1],j=this.findErrorLocations(b),I=this.findErrorMagnitudes(w,b,j),u=0;u<j.length;u++){var _=e.length-1-this.field.log(j[u]);if(_<0)throw eo.getChecksumInstance();e[_]=this.field.subtract(e[_],I[u])}return j.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=s,d=l;if(s=o,l=c,s.isZero())throw eo.getChecksumInstance();o=u;for(var f=this.field.getZero(),A=s.getCoefficient(s.getDegree()),h=this.field.inverse(A);o.getDegree()>=s.getDegree()&&!o.isZero();){var m=o.getDegree()-s.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(m,p)),o=o.subtract(s.multiplyByMonomial(m,p))}c=f.multiply(l).subtract(d).negative()}var x=c.getCoefficient(0);if(x===0)throw eo.getChecksumInstance();var v=this.field.inverse(x),y=c.multiply(v),b=o.multiply(v);return[y,b]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw eo.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),o=1;o<=a;o++)s[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new bp(this.field,s),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),A=this.field.inverse(l.evaluateAt(d));u[o]=this.field.multiply(f,A)}return u},t}(),$k=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var o=r==null||n==null,l=a==null||s==null;if(o&&l)throw new sr;o?(r=new nn(0,a.getY()),n=new nn(0,s.getY())):l&&(a=new nn(e.getWidth()-1,r.getY()),s=new nn(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var d=new nn(c.getX(),u);n?a=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,A=Math.trunc(f.getY()+r);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);var h=new nn(f.getX(),A);n?s=h:l=h}return new t(this.image,a,s,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),dBe=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),R6=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var A=d?parseInt(d.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(o);break;case"p":h=parseFloat(r[n]).toPrecision(o);break;case"e":h=parseFloat(r[n]).toExponential(o);break;case"x":h=parseInt(r[n]).toString(A||16);break;case"d":h=parseFloat(parseInt(r[n],A||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(A);for(var m=parseInt(c),p=c&&c[0]+""=="0"?"0":" ";h.length<m;)h=l!==void 0?h+p:p+h;return h}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),fBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ene=function(){function t(e){this.boundingBox=new $k(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new R6,a=0;try{for(var s=fBe(this.codewords),o=s.next();!o.done;o=s.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),hBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ABe=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Gy=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(f,A){var h={getKey:function(){return f},getValue:function(){return A}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=hBe(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=ABe(l.value,2),u=c[0],d=c[1];s(u,d)}}catch(f){e={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return ma.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),mBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vH=function(t){mBe(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=y5(this.getCodewords()),s=a.next();!s.done;s=a.next()){var o=s.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,A=l;A<c;A++)if(n[A]!=null){var h=n[A],m=h.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=h.getRowNumber();else if(m<0||h.getRowNumber()>=r.getRowCount()||m>A)n[A]=null;else{var p=void 0;d>2?p=(d-2)*m:p=m;for(var x=p>=A,v=1;v<=p&&!x;v++)x=n[A-v]!=null;x?n[A]=null:(u=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var o=y5(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=s.length)continue;s[u]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.getCodewords(),u=-1,d=o;d<l;d++)if(c[d]!=null){var f=c[d];f.setRowNumberAsRowIndicatorColumn();var A=f.getRowNumber()-u;A===0||(A===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?c[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new Gy,o=new Gy,l=new Gy,c=new Gy;try{for(var u=y5(a),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var A=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(A*3+1);break;case 1:c.setValue(A/3),l.setValue(A%3);break;case 2:s.setValue(A+1);break}}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ma.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ma.MAX_ROWS_IN_BARCODE)return null;var m=new dBe(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var o=s.getValue()%30,l=s.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(ene),pBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gBe=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ma.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=this.barcodeColumnCount+1;o>0&&s<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,o=1;o<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(s=t.adjustRowNumberIfValid(a,s,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var d=pBe(u),f=d.next();!f.done;f=d.next()){var A=f.value;if(t.adjustRowNumber(o,A))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new R6,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),xBe=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),vBe=function(){function t(){}return t.initialize=function(){for(var e=0;e<ma.SYMBOL_TABLE.length;e++)for(var r=ma.SYMBOL_TABLE[e],n=r&1,a=0;a<ma.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ma.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ma.BARS_IN_MODULE-a-1]=Math.fround(s/ma.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ba.sum(e),n=new Int32Array(ma.BARS_IN_MODULE),a=0,s=0,o=0;o<ma.MODULES_IN_CODEWORD;o++){var l=r/(2*ma.MODULES_IN_CODEWORD)+o*r/ma.MODULES_IN_CODEWORD;s+e[a]<=l&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return ma.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ba.sum(e),n=new Array(ma.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Qk.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],d=0;d<ma.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(c+=Math.fround(f*f),c>=s)break}c<s&&(s=c,o=ma.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ma.SYMBOL_TABLE.length).map(function(e){return new Array(ma.BARS_IN_MODULE)}),t}(),yBe=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),yH=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),bBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wBe=function(t){bBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(eu),NBe=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new wBe;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new k6;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),CBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_Be=function(t){CBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(eu),EBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SBe=function(t){EBe(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new yn("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new _Be;a=Yn.MAX_VALUE}this.buf=bo.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new k6;this.ensureCapacity(this.count+a),ps.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return bo.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(NBe),Ja;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ja||(Ja={}));function tne(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var VC;function N0(t){if(typeof VC>"u"&&(VC=tne()),VC===null)throw new Error("BigInt is not supported!");return VC(t)}function IBe(){var t=[];t[0]=N0(1);var e=N0(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var jBe=function(){function t(){}return t.decode=function(e,r){var n=new Gn(""),a=yo.ISO8859_1;n.enableDecoding(a);for(var s=1,o=e[s++],l=new yBe;s<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(o,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:yo.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Dr;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)o=e[s++];else throw Dr.getFormatInstance()}if(n.length()===0)throw Dr.getFormatInstance();var c=new Jj(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Dr.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(Yn.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Gn;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Gn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Gn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Gn;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new Gn;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(Yn.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var A=new Gn;r=t.numericCompaction(e,r+1,A),n.setTimestamp(yH.parseLong(A.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new Gn;r=t.numericCompaction(e,r+1,h),n.setChecksum(Yn.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new Gn;r=t.numericCompaction(e,r+1,m),n.setFileSize(yH.parseLong(m.toString()));break;default:throw Dr.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Dr.getFormatInstance()}if(l!==-1){var p=r-l;n.isLastSegment()&&p--,n.setOptionalData(bo.copyOfRange(e,l,l+p))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],s[o]=c,o++;break}}return t.decodeTextCompaction(a,s,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=Ja.ALPHA,o=Ja.ALPHA,l=0;l<n;){var c=e[l],u="";switch(s){case Ja.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:s=Ja.LOWER;break;case t.ML:s=Ja.MIXED;break;case t.PS:o=s,s=Ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break;case Ja.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=s,s=Ja.ALPHA_SHIFT;break;case t.ML:s=Ja.MIXED;break;case t.PS:o=s,s=Ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break;case Ja.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:s=Ja.PUNCT;break;case 26:u=" ";break;case t.LL:s=Ja.LOWER;break;case t.AL:s=Ja.ALPHA;break;case t.PS:o=s,s=Ja.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break;case Ja.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ja.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break;case Ja.ALPHA_SHIFT:if(s=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break;case Ja.PUNCT_SHIFT:if(s=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:s=Ja.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=Ja.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,s){var o=new SBe,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[a++];a<r[0]&&!u;)switch(d[l++]=f,c=900*c+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(N0(c)>>N0(8*(5-A))));c=0,l=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=f);for(var h=0;h<l;h++)o.write(d[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var m=r[a++];if(m<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var A=0;A<6;++A)o.write(Number(N0(c)>>N0(8*(5-A))));c=0,l=0}}break}return s.append(yd.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var l=e[r++];if(r===e[0]&&(s=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=N0(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*N0(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new Dr;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=tne()?IBe():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),my=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PBe=function(){function t(){}return t.decode=function(e,r,n,a,s,o,l){for(var c=new $k(e,r,n,a,s),u=null,d=null,f,A=!0;;A=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(d=t.getRowIndicatorColumn(e,c,a,!1,o,l)),f=t.merge(u,d),f==null)throw sr.getNotFoundInstance();var h=f.getBoundingBox();if(A&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var p=u!=null,x=1;x<=m;x++){var v=p?x:m-x;if(f.getDetectionResultColumn(v)===void 0){var y=void 0;v===0||v===m?y=new vH(c,v===0):y=new ene(c),f.setDetectionResultColumn(v,y);for(var b=-1,w=b,j=c.getMinY();j<=c.getMaxY();j++){if(b=t.getStartColumn(f,v,j,p),b<0||b>c.getMaxX()){if(w===-1)continue;b=w}var I=t.detectCodeword(e,c.getMinX(),c.getMaxX(),p,b,j,o,l);I!=null&&(y.setCodeword(j,I),w=b,o=Math.min(o,I.getWidth()),l=Math.max(l,I.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=$k.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new gBe(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),o=0;try{for(var l=my(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=s-u,u>0)break}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var A=0,f=a.length-1;f>=0&&(A+=s-a[f],!(a[f]>0));f--);for(var f=d.length-1;A>0&&d[f]==null;f--)A--;return e.getBoundingBox().addMissingRows(o,A,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=my(e),o=s.next();!o.done;o=s.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,o){for(var l=new vH(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var A=t.detectCodeword(e,0,e.getWidth(),a,d,f,s,o);A!=null&&(l.setCodeword(f,A),a?d=A.getStartX():d=A.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>ma.MAX_CODEWORDS_IN_BARCODE)throw sr.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(d):u.length===1?a[d]=u[0]:(o.push(d),s.push(u))}for(var f=new Array(s.length),A=0;A<f.length;A++)f[A]=s[A];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,ma.toIntArray(n),ma.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=s[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof eo;if(!u)throw d}if(o.length===0)throw eo.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<s[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw eo.getChecksumInstance()}throw eo.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Gy;var u=0;try{for(var d=my(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)try{for(var h=(a=void 0,my(A.getCodewords())),m=h.next();!m.done;m=h.next()){var p=m.value;if(p!=null){var x=p.getRowNumber();if(x>=0){if(x>=o.length)continue;o[x][u].setValue(p.getValue())}}}}catch(v){a={error:v}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}u++}}catch(v){r={error:v}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(s=void 0,my(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var A=f.value;if(A!=null)return(a?A.getEndX():A.getStartX())+l*u*(A.getEndX()-A.getStartX())}}catch(h){s={error:h}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,o,l,c){s=t.adjustCodewordStartColumn(e,r,n,a,s,o);var u=t.getModuleBitCount(e,r,n,a,s,o);if(u==null)return null;var d,f=ba.sum(u);if(a)d=s+f;else{for(var A=0;A<u.length/2;A++){var h=u[A];u[A]=u[u.length-1-A],u[u.length-1-A]=h}d=s,s=d-f}if(!t.checkCodewordSkew(f,l,c))return null;var m=vBe.getDecodedValue(u),p=ma.getCodeword(m);return p===-1?null:new xBe(s,d,t.getCodewordBucketNumber(m),p)},t.getModuleBitCount=function(e,r,n,a,s,o){for(var l=s,c=new Int32Array(8),u=0,d=a?1:-1,f=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===f?(c[u]++,l+=d):(u++,f=!f);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,o){for(var l=s,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(s-l)>t.CODEWORD_SKEW_SIZE)return s;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Dr.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=jBe.decode(e,""+r);return o.setErrorsCorrected(s),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw eo.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Dr.getFormatInstance();var n=e[0];if(n>e.length)throw Dr.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Dr.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new R6,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new uBe,t}(),BBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FS=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw sr.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Dr||n instanceof eo?sr.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,o=new Array,l=aBe.detectMultiple(e,r,n);try{for(var c=BBe(l.getPoints()),u=c.next();!u.done;u=c.next()){var d=u.value,f=PBe.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),A=new ec(f.getText(),f.getRawBytes(),void 0,d,vn.PDF_417);A.putMetadata(wl.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&A.putMetadata(wl.PDF417_EXTRA_METADATA,h),o.push(A)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Yn.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ma.MODULES_IN_CODEWORD/ma.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ma.MODULES_IN_CODEWORD/ma.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ma.MODULES_IN_CODEWORD/ma.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ma.MODULES_IN_CODEWORD/ma.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),TBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bH=function(t){TBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(eu),wH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rne=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(gs.TRY_HARDER)!==void 0,n=e==null?null:e.get(gs.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(o){return o===vn.UPC_A||o===vn.UPC_E||o===vn.EAN_13||o===vn.EAN_8||o===vn.CODABAR||o===vn.CODE_39||o===vn.CODE_93||o===vn.CODE_128||o===vn.ITF||o===vn.RSS_14||o===vn.RSS_EXPANDED});s&&!r&&a.push(new Kx(e)),n.includes(vn.QR_CODE)&&a.push(new kS),n.includes(vn.DATA_MATRIX)&&a.push(new TS),n.includes(vn.AZTEC)&&a.push(new PS),n.includes(vn.PDF_417)&&a.push(new FS),s&&r&&a.push(new Kx(e))}a.length===0&&(r||a.push(new Kx(e)),a.push(new kS),a.push(new TS),a.push(new PS),a.push(new FS),r&&a.push(new Kx(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=wH(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new bH("No readers where selected, nothing can be read.");try{for(var a=wH(this.readers),s=a.next();!s.done;s=a.next()){var o=s.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof bH)continue}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new sr("No MultiFormat Readers were able to detect the code.")},t}(),kBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){kBe(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new rne;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(A1);var FBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){FBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new FS,r)||this}return e})(A1);var OBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){OBe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new kS,r)||this}return e})(A1);var Gk;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Gk||(Gk={}));const HC=Gk;var nne=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new lm(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var o=n.multiply(new lm(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new yn("No error correction bytes");var n=e.length-r;if(n<=0)throw new yn("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);ps.arraycopy(e,0,s,0,n);var o=new lm(this.field,s);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,d=0;d<u;d++)e[n+d]=0;ps.arraycopy(c,0,e,n+u,c.length)},t}(),Ky=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<s&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),o=0;o<s;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new yn("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,d=0;d<s;d++){var f=r?o[l][d]:o[d][l];f===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=f)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),DBe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RBe=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=DBe(this.bytes),s=a.next();!s.done;s=a.next()){var o=s.value;bo.fill(o,e)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(s[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Gn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,o=this.width;s<o;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Kk=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Gn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),MBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ns=function(t){MBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(eu),NH=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Ko;t.makeTypeInfoBits(e,r,a);for(var s=0,o=a.getSize();s<o;++s){var l=a.get(a.getSize()-1-s),c=t.TYPE_INFO_COORDINATES[s],u=c[0],d=c[1];if(n.setBoolean(u,d,l),s<8){var f=n.getWidth()-s-1,A=8;n.setBoolean(f,A,l)}else{var f=8,A=n.getHeight()-7+(s-8);n.setBoolean(f,A,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Ko;t.makeVersionInfoBits(e,n);for(var a=6*3-1,s=0;s<6;++s)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,s,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var d=void 0;a<e.getSize()?(d=e.get(a),++a):d=!1,r!==255&&Ky.getDataMaskBit(r,u,l)&&(d=!d),n.setBoolean(u,l,d)}}l+=s}s=-s,l+=s,o-=2}if(a!==e.getSize())throw new Ns("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Yn.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new yn("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Kk.isValidMaskPattern(r))throw new Ns("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var o=new Ko;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ns("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ns("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Ns;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new Ns;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new Ns;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,s[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,o=a.length;s!==o;s++){var l=a[s];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),LBe=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),CH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Ky.applyMaskPenaltyRule1(e)+Ky.applyMaskPenaltyRule2(e)+Ky.applyMaskPenaltyRule3(e)+Ky.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(HC.CHARACTER_SET)!==void 0;s&&(a=n.get(HC.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new Ko;if(o===Cs.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=yo.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new Ko;this.appendBytes(e,o,u,a);var d;if(n!==null&&n.get(HC.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(HC.QR_VERSION).toString(),10);d=Op.getVersionForNumber(f);var A=this.calculateBitsNeeded(o,l,u,d);if(!this.willFit(A,d,r))throw new Ns("Data too big for requested version")}else d=this.recommendVersion(r,o,l,u);var h=new Ko;h.appendBitArray(l);var m=o===Cs.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,h),h.appendBitArray(u);var p=d.getECBlocksForLevel(r),x=d.getTotalCodewords()-p.getTotalECCodewords();this.terminateBits(x,h);var v=this.interleaveWithECBytes(h,d.getTotalCodewords(),x,p.getNumBlocks()),y=new Kk;y.setECLevel(r),y.setMode(o),y.setVersion(d);var b=d.getDimensionForVersion(),w=new RBe(b,b),j=this.chooseMaskPattern(v,r,d,w);return y.setMaskPattern(j),NH.buildMatrix(v,r,d,j,w),y.setMatrix(w),y},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Op.getVersionForNumber(1)),o=this.chooseVersion(s,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),yo.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Cs.KANJI;for(var n=!1,a=!1,s=0,o=e.length;s<o;++s){var l=e.charAt(s);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return Cs.BYTE}return a?Cs.ALPHANUMERIC:n?Cs.NUMERIC:Cs.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=yd.encode(e,yo.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Kk.NUM_MASK_PATTERNS;l++){NH.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<s&&(s=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Op.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new Ns("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),o=s.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Ns("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits(a&1?17:236,8);if(r.getSize()!==n)throw new Ns("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,o){if(a>=n)throw new Ns("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),A=f+1,h=u-f,m=d-A;if(h!==m)throw new Ns("EC bytes mismatch");if(n!==c+l)throw new Ns("RS blocks mismatch");if(e!==(f+h)*c+(A+m)*l)throw new Ns("Total bytes mismatch");a<c?(s[0]=f,o[0]=h):(s[0]=A,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,a){var s,o,l,c;if(e.getSizeInBytes()!==n)throw new Ns("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,A=new Array,h=0;h<a;++h){var m=new Int32Array(1),p=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,h,m,p);var x=m[0],v=new Uint8Array(x);e.toBytes(8*u,v,0,x);var y=t.generateECBytes(v,p[0]);A.push(new LBe(v,y)),d=Math.max(d,x),f=Math.max(f,y.length),u+=m[0]}if(n!==u)throw new Ns("Data bytes does not match offset");for(var b=new Ko,h=0;h<d;++h)try{for(var w=(s=void 0,CH(A)),j=w.next();!j.done;j=w.next()){var I=j.value,v=I.getDataBytes();h<v.length&&b.appendBits(v[h],8)}}catch(F){s={error:F}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(s)throw s.error}}for(var h=0;h<f;++h)try{for(var _=(l=void 0,CH(A)),S=_.next();!S.done;S=_.next()){var I=S.value,y=I.getErrorCorrectionBytes();h<y.length&&b.appendBits(y[h],8)}}catch(F){l={error:F}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}if(r!==b.getSizeInBytes())throw new Ns("Interleaving error: "+r+" and "+b.getSizeInBytes()+" differ.");return b},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new nne($c.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),s=0;s<r;s++)o[s]=a[n+s];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new Ns(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case Cs.NUMERIC:t.appendNumericBytes(e,n);break;case Cs.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Cs.BYTE:t.append8BitBytes(e,n,a);break;case Cs.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Ns("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(s*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(s*10+o,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new Ns;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new Ns;r.appendBits(s*45+o,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=yd.encode(e,n)}catch(c){throw new Ns(c)}for(var s=0,o=a.length;s!==o;s++){var l=a[s];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=yd.encode(e,yo.SJIS)}catch(f){throw new Ns(f)}for(var a=n.length,s=0;s<a;s+=2){var o=n[s]&255,l=n[s+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new Ns("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(Cs.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=yo.UTF8.getName(),t})();var UBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){UBe(e,t);function e(r,n,a,s,o,l,c,u){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=a,d.left=s,d.top=o,s+l>n||o+c>a)throw new yn("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new yn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ps.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ps.arraycopy(this.yuvData,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ps.arraycopy(this.yuvData,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var d=s[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,o=this.top*this.dataWidth+this.left;s<n;s++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var d=a[c];a[c]=a[u],a[u]=d}},e.prototype.invert=function(){return new Yj(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Bw);var QBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){QBe(e,t);function e(r,n,a,s,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=s,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*a,f=new Uint8ClampedArray(d),A=0;A<d;A++){var h=r[A],m=h>>16&255,p=h>>7&510,x=h&255;f[A]=(m+p+x)/4&255}u.luminances=f}else u.luminances=r;if(s===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new yn("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new yn("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return ps.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return ps.arraycopy(this.luminances,o,s,0,a),s;for(var l=0;l<n;l++){var c=l*r;ps.arraycopy(this.luminances,o,s,c,r),o+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new Yj(this)},e})(Bw);var VBe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HBe=function(t){VBe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(yo),$Be=function(){function t(){}return t.ISO_8859_1=yo.ISO8859_1,t}(),qk,GBe=301,KBe=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=GBe);return{LOG:t,ALOG:e}};qk=KBe([],[]),qk.LOG;qk.ALOG;var _H;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(_H||(_H={}));var EH=129,ane=230,qBe=231,zBe=235,WBe=236,XBe=237,YBe=238,JBe=239,ZBe=240,b5=254,eTe=254,SH="[)>05",IH="[)>06",jH="",Qa=0,dl=1,cc=2,fo=3,Lo=4,Ul=5,tTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Qa},t.prototype.encode=function(e){var r=Zd.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Zd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Ul:e.writeCodeword(qBe),e.signalEncoderChange(Ul);return;case dl:e.writeCodeword(ane),e.signalEncoderChange(dl);return;case fo:e.writeCodeword(YBe),e.signalEncoderChange(fo);break;case cc:e.writeCodeword(JBe),e.signalEncoderChange(cc);break;case Lo:e.writeCodeword(ZBe),e.signalEncoderChange(Lo);break;default:throw new Error("Illegal mode: "+a)}else Zd.isExtendedASCII(n)?(e.writeCodeword(zBe),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Zd.isDigit(e)&&Zd.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),rTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ul},t.prototype.encode=function(e){var r=new Gn;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=Zd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Qa);break}}var s=r.length()-1,o=1,l=e.getCodewordCount()+s+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(s<=249)r.setCharAt(0,fa.getCharAt(s));else if(s<=1555)r.setCharAt(0,fa.getCharAt(Math.floor(s/250)+249)),r.insert(1,fa.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),M6=function(){function t(){}return t.prototype.getEncodingMode=function(){return dl},t.prototype.encodeMaximal=function(e){for(var r=new Gn,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(ane),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Gn;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+s;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Gn;for(r.length()%3===2&&l!==2&&(a=this.backtrackOneCharacter(e,r,c,a));r.length()%3===1&&(a>3||l!==1);)a=this.backtrackOneCharacter(e,r,c,a);break}var u=r.length();if(u%3===0){var d=Zd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Qa);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),o=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return a=this.encodeChar(l,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var o=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(b5)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(b5),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(b5)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Qa)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new Gn;return s.append(n),s.append(a),s.toString()},t}(),nTe=function(){function t(){}return t.prototype.getEncodingMode=function(){return Lo},t.prototype.encode=function(e){for(var r=new Gn;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var o=Zd.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Qa);break}}}r.append(fa.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),u=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Qa)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(fa.getCharAt(e-64)):Zd.illegalCharacter(fa.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(a<<12)+(s<<6)+o,c=l>>16&255,u=l>>8&255,d=l&255,f=new Gn;return f.append(c),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),aTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ja=function(){function t(e,r,n,a,s,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,a,s){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var c=sTe(oTe),u=c.next();!u.done;u=c.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(d.getSymbolWidth()>a.getWidth()||d.getSymbolHeight()>a.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),iTe=function(t){aTe(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(ja),oTe=[new ja(!1,3,5,8,8,1),new ja(!1,5,7,10,10,1),new ja(!0,5,7,16,6,1),new ja(!1,8,10,12,12,1),new ja(!0,10,11,14,6,2),new ja(!1,12,12,14,14,1),new ja(!0,16,14,24,10,1),new ja(!1,18,14,16,16,1),new ja(!1,22,18,18,18,1),new ja(!0,22,18,16,10,2),new ja(!1,30,20,20,20,1),new ja(!0,32,24,16,14,2),new ja(!1,36,24,22,22,1),new ja(!1,44,28,24,24,1),new ja(!0,49,28,22,14,2),new ja(!1,62,36,14,14,4),new ja(!1,86,42,16,16,4),new ja(!1,114,48,18,18,4),new ja(!1,144,56,20,20,4),new ja(!1,174,68,22,22,4),new ja(!1,204,84,24,24,4,102,42),new ja(!1,280,112,14,14,16,140,56),new ja(!1,368,144,16,16,16,92,36),new ja(!1,456,192,18,18,16,114,48),new ja(!1,576,224,20,20,16,144,56),new ja(!1,696,272,22,22,16,174,68),new ja(!1,816,336,24,24,16,136,56),new ja(!1,1050,408,18,18,36,175,68),new ja(!1,1304,496,20,20,36,163,62),new iTe],lTe=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Gn,a=0,s=r.length;a<s;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Gn,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ja.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),cTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uTe=function(t){cTe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return fo},e.prototype.encode=function(r){for(var n=new Gn;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var o=Zd.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Qa);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Zd.illegalCharacter(fa.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(eTe),r.getNewEncoding()<0&&r.signalEncoderChange(Qa)},e}(M6),dTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fTe=function(t){dTe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return cc},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(M6),Zd=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=EH+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var o=new M6,l=[new tTe,o,new fTe,new uTe,new nTe,new rTe],c=new lTe(e);c.setSymbolShape(r),c.setSizeConstraints(n,a),e.startsWith(SH)&&e.endsWith(jH)?(c.writeCodeword(WBe),c.setSkipAtEnd(2),c.pos+=SH.length):e.startsWith(IH)&&e.endsWith(jH)&&(c.writeCodeword(XBe),c.setSkipAtEnd(2),c.pos+=IH.length);var u=Qa;for(s&&(o.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();d<f&&u!==Qa&&u!==Ul&&u!==Lo&&c.writeCodeword("");var A=c.getCodewords();for(A.length()<f&&A.append(EH);A.length()<f;)A.append(this.randomize253State(A.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===fo&&a===fo){for(var s=Math.min(r+3,e.length),o=r;o<s;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Qa}else if(n===Lo&&a===Lo){for(var s=Math.min(r+4,e.length),o=r;o<s;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Qa}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===Qa?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,o=new Uint8Array(6),l=[];;){if(r+s===e.length){bo.fill(o,0),bo.fill(l,0);var c=this.findMinimums(a,l,Yn.MAX_VALUE,o),u=this.getMinimumCount(o);if(l[Qa]===c)return Qa;if(u===1){if(o[Ul]>0)return Ul;if(o[Lo]>0)return Lo;if(o[cc]>0)return cc;if(o[fo]>0)return fo}return dl}var d=e.charCodeAt(r+s);if(s++,this.isDigit(d)?a[Qa]+=.5:this.isExtendedASCII(d)?(a[Qa]=Math.ceil(a[Qa]),a[Qa]+=2):(a[Qa]=Math.ceil(a[Qa]),a[Qa]++),this.isNativeC40(d)?a[dl]+=2/3:this.isExtendedASCII(d)?a[dl]+=8/3:a[dl]+=4/3,this.isNativeText(d)?a[cc]+=2/3:this.isExtendedASCII(d)?a[cc]+=8/3:a[cc]+=4/3,this.isNativeX12(d)?a[fo]+=2/3:this.isExtendedASCII(d)?a[fo]+=13/3:a[fo]+=10/3,this.isNativeEDIFACT(d)?a[Lo]+=3/4:this.isExtendedASCII(d)?a[Lo]+=17/4:a[Lo]+=13/4,this.isSpecialB256(d)?a[Ul]+=4:a[Ul]++,s>=4){if(bo.fill(o,0),bo.fill(l,0),this.findMinimums(a,l,Yn.MAX_VALUE,o),l[Qa]<this.min(l[Ul],l[dl],l[cc],l[fo],l[Lo]))return Qa;if(l[Ul]<l[Qa]||l[Ul]+1<this.min(l[dl],l[cc],l[fo],l[Lo]))return Ul;if(l[Lo]+1<this.min(l[Ul],l[dl],l[cc],l[fo],l[Qa]))return Lo;if(l[cc]+1<this.min(l[Ul],l[dl],l[Lo],l[fo],l[Qa]))return cc;if(l[fo]+1<this.min(l[Ul],l[dl],l[Lo],l[cc],l[Qa]))return fo;if(l[dl]+1<this.min(l[Qa],l[Ul],l[Lo],l[cc])){if(l[dl]<l[fo])return dl;if(l[dl]===l[fo]){for(var f=r+s+1;f<e.length;){var A=e.charCodeAt(f);if(this.isX12TermSep(A))return fo;if(!this.isNativeX12(A))break;f++}return dl}}}}},t.min=function(e,r,n,a,s){var o=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?o:Math.min(o,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var o=r[s]=Math.ceil(e[s]);n>o&&(n=o,bo.fill(a,0)),n===o&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=Yn.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),w5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PH=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return yd.encode(e,this.charset)!=null}catch{return!1}},t}(),hTe=function(){function t(e,r,n){var a,s,o,l,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(E){return new PH(HBe.forName(E))}),this.encoders=[];var d=[];d.push(new PH($Be.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),A=0;A<e.length;A++){var h=!1;try{for(var m=(a=void 0,w5(d)),p=m.next();!p.done;p=m.next()){var x=p.value,v=e.charAt(A),y=v.charCodeAt(0);if(y===n||x.canEncode(v)){h=!0;break}}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!h)try{for(var b=(o=void 0,w5(this.ENCODERS)),w=b.next();!w.done;w=b.next()){var x=w.value;if(x.canEncode(e.charAt(A))){d.push(x),h=!0;break}}}catch(E){o={error:E}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}h||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var j=0;try{for(var I=w5(d),_=I.next();!_.done;_=I.next()){var x=_.value;this.encoders[j++]=x}}catch(E){c={error:E}}finally{try{_&&!_.done&&(u=I.return)&&u.call(I)}finally{if(c)throw c.error}}}var S=-1;if(r!=null){for(var A=0;A<this.encoders.length;A++)if(this.encoders[A]!=null&&r.name===this.encoders[A].name){S=A;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return yd.encode(fa.getCharAt(e),this.encoders[r].name)},t}(),ATe=3,mTe=function(){function t(e,r,n){this.fnc1=n;var a=new hTe(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var o=e.charAt(s).charCodeAt(0);this.bytes[s]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Gn,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,o){var l=e.charAt(a).charCodeAt(0),c=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),u=c+1);for(var d=c;d<u;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,a+1,new BH(l,r,d,s,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new BH[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var o=1;o<=a;o++){for(var l=0;l<r.length();l++)s[o][l]!=null&&o<a&&this.addEdges(e,r,s,o,s[o][l],n);for(var l=0;l<r.length();l++)s[o-1][l]=null}for(var c=-1,u=Yn.MAX_VALUE,l=0;l<r.length();l++)if(s[a][l]!=null){var d=s[a][l];d.cachedTotalSize<u&&(u=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],A=s[a][c];A!=null;){if(A.isFNC1())f.unshift(1e3);else for(var h=r.encode(A.c,A.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var m=A.previous===null?0:A.previous.encoderIndex;m!==A.encoderIndex&&f.unshift(256+r.getECIValue(A.encoderIndex)),A=A.previous}for(var p=[],o=0;o<p.length;o++)p[o]=f[o];return p},t}(),BH=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=a===null?0:a.encoderIndex;l!==n&&(o+=ATe),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),pTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var TH;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(TH||(TH={}));(function(t){pTe(e,t);function e(r,n,a,s,o){var l=t.call(this,r,n,a)||this;return l.shape=s,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(mTe);var gTe=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),kH=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),xTe=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),vTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L6=function(t){vTe(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Yn.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(xTe),yTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bTe=function(t){yTe(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(L6);function wTe(t,e,r){return new bTe(t,e,r)}function py(t,e,r){return new L6(t,e,r)}var NTe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],cm=0,OS=1,md=2,sne=3,zf=4,CTe=new L6(null,0,0),N5=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],_Te=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ETe(t){var e,r;try{for(var n=_Te(t),a=n.next();!a.done;a=n.next()){var s=a.value;bo.fill(s,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[cm][zf]=0,t[OS][zf]=0,t[OS][cm]=28,t[sne][zf]=0,t[md][zf]=0,t[md][cm]=15,t}var ine=ETe(bo.createInt32Array(6,6)),STe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ITe=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=N5[this.mode][e];a=py(a,s&65535,s>>16),n+=s>>16}var o=e===md?4:5;return a=py(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===md?4:5;return n=py(n,ine[this.mode][e],a),n=py(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===zf||this.mode===md){var s=N5[n][cm];r=py(r,s&65535,s>>16),a+=s>>16,n=cm}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=wTe(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(N5[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var o=new Ko;try{for(var l=STe(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return fa.format("%s bits=%d bytes=%d",NTe[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(CTe,cm,0,0),t}();function jTe(t){var e=fa.getCharCode(" "),r=fa.getCharCode("."),n=fa.getCharCode(",");t[cm][e]=1;for(var a=fa.getCharCode("Z"),s=fa.getCharCode("A"),o=s;o<=a;o++)t[cm][o]=o-s+2;t[OS][e]=1;for(var l=fa.getCharCode("z"),c=fa.getCharCode("a"),o=c;o<=l;o++)t[OS][o]=o-c+2;t[md][e]=1;for(var u=fa.getCharCode("9"),d=fa.getCharCode("0"),o=d;o<=u;o++)t[md][o]=o-d+2;t[md][n]=12,t[md][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],A=0;A<f.length;A++)t[sne][fa.getCharCode(f[A])]=A;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],A=0;A<h.length;A++)fa.getCharCode(h[A])>0&&(t[zf][fa.getCharCode(h[A])]=A);return t}var C5=jTe(bo.createInt32Array(5,256)),$C=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PTe=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=fa.getCharCode(" "),r=fa.getCharCode(`
`),n=kH.singletonList(ITe.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case fa.getCharCode("\r"):s=o===r?2:0;break;case fa.getCharCode("."):s=o===e?3:0;break;case fa.getCharCode(","):s=o===e?4:0;break;case fa.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var l=kH.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var o=$C(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,s)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=C5[e.getMode()][a]>0,o=null,l=0;l<=zf;l++){var c=C5[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!s||l===e.getMode()||l===md){var u=o.latchAndAppend(l,c);n.push(u)}if(!s&&ine[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||C5[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,s,o=[];try{for(var l=$C(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(zf,n)),e.getMode()!==zf&&a.push(s.shiftAndAppend(zf,n)),n===3||n===4){var o=s.latchAndAppend(md,16-n).latchAndAppend(md,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,s,o=[];try{for(var l=$C(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=!0,f=function(x){if(x.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(x)&&(o=o.filter(function(v){return v!==x}))};try{for(var A=(a=void 0,$C(o)),h=A.next();!h.done;h=A.next()){var m=h.value,p=f(m);if(p==="break")break}}catch(x){a={error:x}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}d&&o.push(u)}}catch(x){r={error:x}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t}(),BTe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new PTe(e).encode(),s=Yn.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+s,l,c,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new yn(fa.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var A=u-u%d;if(f=t.stuffBits(a,d),f.getSize()+s>A)throw new yn("Data to large for user specified layer");if(l&&f.getSize()>d*64)throw new yn("Data to large for user specified layer")}else{d=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new yn("Data too large for an Aztec code");if(l=h<=3,c=l?h+1:h,u=t.totalBitsInLayer(c,l),!(o>u)){(f==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],f=t.stuffBits(a,d));var A=u-u%d;if(!(l&&f.getSize()>d*64)&&f.getSize()+s<=A)break}}}var m=t.generateCheckWords(f,u,d),p=f.getSize()/d,x=t.generateModeMessage(l,c,p),v=(l?11:14)+c*4,y=new Int32Array(v),b;if(l){b=v;for(var h=0;h<y.length;h++)y[h]=h}else{b=v+1+2*Yn.truncDivision(Yn.truncDivision(v,2)-1,15);for(var w=Yn.truncDivision(v,2),j=Yn.truncDivision(b,2),h=0;h<w;h++){var I=h+Yn.truncDivision(h,15);y[w-h-1]=j-I-1,y[w+h]=j+I+1}}for(var _=new nh(b),h=0,S=0;h<c;h++){for(var E=(c-h)*4+(l?9:12),F=0;F<E;F++)for(var k=F*2,B=0;B<2;B++)m.get(S+k+B)&&_.set(y[h*2+B],y[h*2+F]),m.get(S+E*2+k+B)&&_.set(y[h*2+F],y[v-1-h*2-B]),m.get(S+E*4+k+B)&&_.set(y[v-1-h*2-B],y[v-1-h*2-F]),m.get(S+E*6+k+B)&&_.set(y[v-1-h*2-F],y[h*2+B]);S+=E*8}if(t.drawModeMessage(_,l,b,x),l)t.drawBullsEye(_,Yn.truncDivision(b,2),5);else{t.drawBullsEye(_,Yn.truncDivision(b,2),7);for(var h=0,F=0;h<Yn.truncDivision(v,2)-1;h+=15,F+=16)for(var B=Yn.truncDivision(b,2)&1;B<b;B+=2)_.set(Yn.truncDivision(b,2)-F,B),_.set(Yn.truncDivision(b,2)+F,B),_.set(B,Yn.truncDivision(b,2)-F),_.set(B,Yn.truncDivision(b,2)+F)}var D=new gTe;return D.setCompact(l),D.setSize(b),D.setLayers(c),D.setCodeWords(p),D.setMatrix(_),D},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Ko;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=Yn.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=s-3+o;a.get(o)&&e.set(l,s-5),a.get(o+7)&&e.set(s+5,l),a.get(20-o)&&e.set(l,s+5),a.get(27-o)&&e.set(s-5,l)}else for(var o=0;o<10;o++){var l=s-5+o+Yn.truncDivision(o,5);a.get(o)&&e.set(l,s-7),a.get(o+10)&&e.set(s+7,l),a.get(29-o)&&e.set(l,s+7),a.get(39-o)&&e.set(s-7,l)}},t.generateCheckWords=function(e,r,n){var a,s,o=e.getSize()/n,l=new nne(t.getGF(n)),c=Yn.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var d=r%n,f=new Ko;f.appendBits(0,d);try{for(var A=BTe(Array.from(u)),h=A.next();!h.done;h=A.next()){var m=h.value;f.appendBits(m,n)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=A.return)&&s.call(A)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,o;for(s=0,o=e.getSize()/r;s<o;s++){for(var l=0,c=0;c<r;c++)l|=e.get(s*r+c)?1<<r-c-1:0;a[s]=l}return a},t.getGF=function(e){switch(e){case 4:return $c.AZTEC_PARAM;case 6:return $c.AZTEC_DATA_6;case 8:return $c.AZTEC_DATA_8;case 10:return $c.AZTEC_DATA_10;case 12:return $c.AZTEC_DATA_12;default:throw new yn("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Ko,a=e.getSize(),s=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&s)===s?(n.appendBits(l&s,r),o--):l&s?n.appendBits(l,r):(n.appendBits(l|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var TTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kTe=function(t){TTe(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var s=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,d=r[o+3];if(d===0)u=255;else{var f=r[o],A=r[o+1],h=r[o+2];u=306*f+601*A+117*h+512>>10}s[l]=u}return s},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new yn("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Yj(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,s=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*o),c=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*o);n.width=l,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(l/2,c/2),u.rotate(a),u.drawImage(this.canvas,s/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Bw);function one(){return typeof navigator<"u"}function FTe(){return one()&&!!navigator.mediaDevices}function OTe(){return!!(FTe()&&navigator.mediaDevices.enumerateDevices)}var zx=function(){return zx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},zx.apply(this,arguments)},Xs=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},Ys=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DTe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},m1=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=zx(zx({},DTe),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(gs.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Xs(this,void 0,void 0,function(){return Ys(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var s=_5(a),o=s.next();!o.done;o=s.next()){var l=o.value;if(t.mediaStreamIsTorchCompatibleTrack(l))return!0}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ki("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ki("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new kTe(e),n=new Gre(r);return new $re(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new ki("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,s=n.height;return r.style.width=a+"px",r.style.height=s+"px",r.width=a,r.height=s,r},t.tryPlayVideo=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:if(e!=null&&e.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Xs(this,void 0,void 0,function(){var e,r,n,a,s,o,l,c,u,d,f,A;return Ys(this,function(h){switch(h.label){case 0:if(!one())throw new Error("Can't enumerate devices, navigator is not present.");if(!OTe())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=_5(e),a=n.next();!a.done;a=n.next())s=a.value,o=s.kind==="video"?"videoinput":s.kind,o==="videoinput"&&(l=s.deviceId||s.id,c=s.label||"Video device ".concat(r.length+1),u=s.groupId,d={deviceId:l,label:c,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{a&&!a.done&&(A=n.return)&&A.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Xs(this,void 0,void 0,function(){var n;return Ys(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(s,o){var l=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",c))},r),c=function(){t.tryPlayVideo(e).then(function(u){clearTimeout(l),e.removeEventListener("canplay",c),s(u)})};e.addEventListener("canplay",c)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Xs(this,void 0,void 0,function(){var a;return Ys(this,function(s){switch(s.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return s.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,s=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(s),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new ki("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:if(!e)throw new ki("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:if(!e)throw new ki("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Xs(this,void 0,void 0,function(){var a,s;return Ys(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw s=o.sent(),t.disposeMediaStream(a),s;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Xs(this,void 0,void 0,function(){var a,s,o,l,c,u,d,f,A,h=this;return Ys(this,function(m){switch(m.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return s=m.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(s)},l=this.scan(s,n,o),c=e.getVideoTracks(),u=zx(zx({},l),{stop:function(){l.stop()},streamVideoConstraintsApply:function(p,x){return Xs(this,void 0,void 0,function(){var v,y,b,w,j,I,_;return Ys(this,function(S){switch(S.label){case 0:v=x?c.filter(x):c,S.label=1;case 1:S.trys.push([1,6,7,8]),y=_5(v),b=y.next(),S.label=2;case 2:return b.done?[3,5]:(w=b.value,[4,w.applyConstraints(p)]);case 3:S.sent(),S.label=4;case 4:return b=y.next(),[3,2];case 5:return[3,8];case 6:return j=S.sent(),I={error:j},[3,8];case 7:try{b&&!b.done&&(_=y.return)&&_.call(y)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(p){return c.find(p).getConstraints()},streamVideoSettingsGet:function(p){return c.find(p).getSettings()},streamVideoCapabilitiesGet:function(p){return c.find(p).getCapabilities()}}),d=t.mediaStreamIsTorchCompatible(e),d&&(f=c==null?void 0:c.find(function(p){return t.mediaStreamIsTorchCompatibleTrack(p)}),A=function(p){return Xs(h,void 0,void 0,function(){return Ys(this,function(x){switch(x.label){case 0:return[4,t.mediaStreamSetTorch(f,p)];case 1:return x.sent(),[2]}})})},u.switchTorch=A,u.stop=function(){return Xs(h,void 0,void 0,function(){return Ys(this,function(p){switch(p.label){case 0:return l.stop(),[4,A(!1)];case 1:return p.sent(),[2]}})})}),[2,u]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Xs(this,void 0,void 0,function(){var a,s;return Ys(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Xs(this,void 0,void 0,function(){var n,a;return Ys(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ki("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Xs(this,void 0,void 0,function(){var n,a,s,o;return Ys(this,function(l){switch(l.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ki("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},s=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,s)];case 1:return l.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Xs(this,void 0,void 0,function(){var n;return Ys(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Xs(this,void 0,void 0,function(){var n,a,s;return Ys(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return s=o.sent(),[2,s];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Xs(this,void 0,void 0,function(){var n,a;return Ys(this,function(s){switch(s.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Xs(this,void 0,void 0,function(){var r,n;return Ys(this,function(a){switch(a.label){case 0:if(!e)throw new ki("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Xs(this,void 0,void 0,function(){var r,n;return Ys(this,function(a){switch(a.label){case 0:if(!e)throw new ki("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var s=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,l){s.scan(e,function(c,u,d){if(c){o(c),d.stop();return}if(u){if(u instanceof sr&&r||u instanceof eo&&n||u instanceof Dr&&a)return;d.stop(),l(u)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var s=t.createCaptureCanvas(e),o;try{o=s.getContext("2d",{willReadFrequently:!0})}catch{o=s.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var l=function(){o=void 0,s=void 0},c=!1,u,d=function(){c=!0,clearTimeout(u),l(),n&&n()},f={stop:d},A=function(){if(!c)try{t.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(s);r(h,void 0,f),u=setTimeout(A,a.options.delayBetweenScanSuccess)}catch(v){r(void 0,v,f);var m=v instanceof eo,p=v instanceof Dr,x=v instanceof sr;if(m||p||x){u=setTimeout(A,a.options.delayBetweenScanAttempts);return}l(),n&&n(v)}};return A(),f},t.prototype._decodeOnLoadImage=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Xs(this,void 0,void 0,function(){var r;return Ys(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}(),RTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){RTe(e,t);function e(r,n){return t.call(this,new PS,r,n)||this}return e})(m1);var MTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){MTe(e,t);function e(r,n){return t.call(this,new Kx(r),r,n)||this}return e})(m1);var LTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){LTe(e,t);function e(r,n){return t.call(this,new TS,r,n)||this}return e})(m1);var UTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_2=function(t){UTe(e,t);function e(r,n){var a=this,s=new rne;return s.setHints(r),a=t.call(this,s,r,n)||this,a.reader=s,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(gs.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(m1),QTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){QTe(e,t);function e(r,n){return t.call(this,new FS,r,n)||this}return e})(m1);var VTe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){VTe(e,t);function e(r,n){return t.call(this,new kS,r,n)||this}return e})(m1);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var DS={};DS.version="0.18.5";var lne=1252,HTe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],U6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Q6=function(t){HTe.indexOf(t)!=-1&&(lne=U6[0]=t)};function $Te(){Q6(1252)}var nf=function(t){Q6(t)};function V6(){nf(1200),$Te()}function FH(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function GTe(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function cne(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var qy=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?GTe(t.slice(2)):e==254&&r==255?cne(t.slice(2)):e==65279?t.slice(1):t},GC=function(e){return String.fromCharCode(e)},OH=function(e){return String.fromCharCode(e)},E2,$0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function S2(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=$0.charAt(s)+$0.charAt(o)+$0.charAt(l)+$0.charAt(c);return e}function ku(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=$0.indexOf(t.charAt(u++)),o=$0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=$0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=$0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var Kn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),BA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function wm(t){return Kn?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DH(t){return Kn?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var yu=function(e){return Kn?BA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function eP(t){if(typeof ArrayBuffer>"u")return yu(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Om(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function KTe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function H6(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return H6(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Go=Kn?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:BA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function qTe(t){for(var e=[],r=0,n=t.length+250,a=wm(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=wm(65535),n=65530)}return e.push(a.slice(0,r)),Go(e)}var yc=/\u0000/g,zy=/[\u0001-\u0006]/g;function dv(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function af(t,e){var r=""+t;return r.length>=e?r:xi("0",e-r.length)+r}function $6(t,e){var r=""+t;return r.length>=e?r:xi(" ",e-r.length)+r}function RS(t,e){var r=""+t;return r.length>=e?r:r+xi(" ",e-r.length)}function zTe(t,e){var r=""+Math.round(t);return r.length>=e?r:xi("0",e-r.length)+r}function WTe(t,e){var r=""+t;return r.length>=e?r:xi("0",e-r.length)+r}var RH=Math.pow(2,32);function fx(t,e){if(t>RH||t<-RH)return zTe(t,e);var r=Math.round(t);return WTe(r,e)}function MS(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var MH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],E5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function XTe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Nn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},LH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},YTe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function LS(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,f=Math.floor(a);u<e&&(f=Math.floor(a),l=f*o+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var A=Math.floor(n*l/d);return[A,n*l-A*d,d]}function wp(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=nke(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var une=new Date(1899,11,31,0,0,0),JTe=une.getTime(),ZTe=new Date(1900,2,1,0,0,0);function dne(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=ZTe&&(r+=24*60*60*1e3),(r-(JTe+(t.getTimezoneOffset()-une.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function G6(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function eke(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function tke(t){var e=t<0?12:11,r=G6(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function rke(t){var e=G6(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function I2(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=tke(t):e===10?r=t.toFixed(10).substr(0,12):r=rke(t),G6(eke(r.toUpperCase()))}function og(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):I2(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return _d(14,dne(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function nke(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function ake(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return E5[r.m-1][1];case 5:return E5[r.m-1][0];default:return E5[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return MH[r.q][0];default:return MH[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?af(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=af(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?af(c,u):"";return d}function G0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var fne=/%/g;function ske(t,e,r){var n=e.replace(fne,""),a=e.length-n.length;return rA(t,n,r*Math.pow(10,2*a))+xi("%",a)}function ike(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return rA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function hne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+hne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Ane=/# (\?+)( ?)\/( ?)(\d+)/;function oke(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?xi(" ",t[1].length+1+t[4].length):$6(o,t[1].length)+t[2]+"/"+t[3]+af(l,t[4].length))}function lke(t,e,r){return r+(e===0?"":""+e)+xi(" ",t[1].length+2+t[4].length)}var mne=/^#*0*\.([0#]+)/,pne=/\).*[0#]/,gne=/\(###\) ###\\?-####/;function hc(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function UH(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function QH(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function cke(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function uke(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Zu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(pne)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Zu("n",n,r):"("+Zu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return ike(t,e,r);if(e.indexOf("%")!==-1)return ske(t,e,r);if(e.indexOf("E")!==-1)return hne(e,r);if(e.charCodeAt(0)===36)return"$"+Zu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+fx(c,e.length);if(e.match(/^[#?]+$/))return a=fx(r,0),a==="0"&&(a=""),a.length>e.length?a:hc(e.substr(0,e.length-a.length))+a;if(s=e.match(Ane))return oke(s,c,u);if(e.match(/^#+0+$/))return u+fx(c,e.length-e.indexOf("0"));if(s=e.match(mne))return a=UH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+hc(s[1])).replace(/\.$/,"."+hc(s[1])).replace(/\.(\d*)$/,function(m,p){return"."+p+xi("0",hc(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+UH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+G0(fx(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Zu(t,e,-r):G0(""+(Math.floor(r)+cke(r,s[1].length)))+"."+af(QH(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Zu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dv(Zu(t,e.replace(/[\\-]/g,""),r)),o=0,dv(dv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(gne))return a=Zu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=LS(c,Math.pow(10,o)-1,!1),a=""+u,d=rA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=RS(l[2],o),d.length<s[4].length&&(d=hc(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=LS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$6(l[1],o)+s[2]+"/"+s[3]+RS(l[2],o):xi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=fx(r,0),e.length<=a.length?a:hc(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return hc(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=QH(r,s[1].length),r<0?"-"+Zu(t,e,-r):G0(uke(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?af(0,3-m.length):"")+m})+"."+af(o,s[1].length);switch(e){case"###,##0.00":return Zu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=G0(fx(c,0));return h!=="0"?u+h:"";case"###,###.00":return Zu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Zu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function dke(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return rA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function fke(t,e,r){var n=e.replace(fne,""),a=e.length-n.length;return rA(t,n,r*Math.pow(10,2*a))+xi("%",a)}function xne(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+xne(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Mf(t,e,r){if(t.charCodeAt(0)===40&&!e.match(pne)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mf("n",n,r):"("+Mf("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return dke(t,e,r);if(e.indexOf("%")!==-1)return fke(t,e,r);if(e.indexOf("E")!==-1)return xne(e,r);if(e.charCodeAt(0)===36)return"$"+Mf(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+af(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:hc(e.substr(0,e.length-a.length))+a;if(s=e.match(Ane))return lke(s,c,u);if(e.match(/^#+0+$/))return u+af(c,e.length-e.indexOf("0"));if(s=e.match(mne))return a=(""+r).replace(/^([^\.]+)$/,"$1."+hc(s[1])).replace(/\.$/,"."+hc(s[1])),a=a.replace(/\.(\d*)$/,function(m,p){return"."+p+xi("0",hc(s[1]).length-p.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+G0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mf(t,e,-r):G0(""+r)+"."+xi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Mf(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=dv(Mf(t,e.replace(/[\\-]/g,""),r)),o=0,dv(dv(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<a.length?a.charAt(o++):m==="0"?"0":""}));if(e.match(gne))return a=Mf(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=LS(c,Math.pow(10,o)-1,!1),a=""+u,d=rA("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=RS(l[2],o),d.length<s[4].length&&(d=hc(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=LS(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?$6(l[1],o)+s[2]+"/"+s[3]+RS(l[2],o):xi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:hc(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var f=e.indexOf(".")-o,A=e.length-a.length-f;return hc(e.substr(0,f)+a+e.substr(e.length-A))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Mf(t,e,-r):G0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?af(0,3-m.length):"")+m})+"."+af(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var h=G0(""+c);return h!=="0"?u+h:"";default:if(e.match(/\.[0#?]*$/))return Mf(t,e.slice(0,e.lastIndexOf(".")),r)+hc(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function rA(t,e,r){return(r|0)===r?Mf(t,e,r):Zu(t,e,r)}function hke(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var vne=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function p1(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":MS(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(vne))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Ake(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,f,A="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!MS(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(f=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++o;break;case"\\":var h=t.charAt(++o),m=h==="("||h===")"?h:"t";a[a.length]={t:m,v:h},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=wp(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=wp(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=A),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var p={t:l,v:l};if(u==null&&(u=wp(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(p.v=u.H>=12?"P":"A"),p.t="T",A="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(p.v=u.H>=12?"PM":"AM"),p.t="T",o+=5,A="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(p.v=u.H>=12?"":""),p.t="T",o+=5,A="h"):(p.t="t",++o),u==null&&p.t==="T")return"";a[a.length]=p,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(vne)){if(u==null&&(u=wp(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",p1(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var x=0,v=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=A,c="h",x<1&&(x=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(v=Math.max(v,y[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[o].v.match(/[Hh]/)&&(x=1),x<2&&a[o].v.match(/[Mm]/)&&(x=2),x<3&&a[o].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",w;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=ake(a[o].t.charCodeAt(0),a[o].v,u,v),a[o].t="t";break;case"n":case"?":for(w=o+1;a[w]!=null&&((l=a[w].t)==="?"||l==="D"||(l===" "||l==="t")&&a[w+1]!=null&&(a[w+1].t==="?"||a[w+1].t==="t"&&a[w+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[w].v==="/"||a[w].v===" "&&a[w+1]!=null&&a[w+1].t=="?"));)a[o].v+=a[w].v,a[w]={v:"",t:";"},++w;b+=a[o].v,o=w-1;break;case"G":a[o].t="t",a[o].v=og(e,r);break}var j="",I,_;if(b.length>0){b.charCodeAt(0)==40?(I=e<0&&b.charCodeAt(0)===45?-e:e,_=rA("n",b,I)):(I=e<0&&n>1?-e:e,_=rA("n",b,I),I<0&&a[0]&&a[0].t=="t"&&(_=_.substr(1),a[0].v="-"+a[0].v)),w=_.length-1;var S=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){S=o;break}var E=a.length;if(S===a.length&&_.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(w>=a[o].v.length-1?(w-=a[o].v.length,a[o].v=_.substr(w+1,a[o].v.length)):w<0?a[o].v="":(a[o].v=_.substr(0,w+1),w=-1),a[o].t="t",E=o);w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v)}else if(S!==a.length&&_.indexOf("E")===-1){for(w=_.indexOf(".")-1,o=S;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)w>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=_.charAt(w--)+j);a[o].v=j,a[o].t="t",E=o}for(w>=0&&E<a.length&&(a[E].v=_.substr(0,w+1)+a[E].v),w=_.indexOf(".")+1,o=S;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==S)){for(d=a[o].v.indexOf(".")>-1&&o===S?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)w<_.length&&(j+=_.charAt(w++));a[o].v=j,a[o].t="t",E=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(I=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=rA(a[o].t,a[o].v,I),a[o].t="t");var F="";for(o=0;o!==a.length;++o)a[o]!=null&&(F+=a[o].v);return F}var VH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function HH(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function mke(t,e){var r=hke(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(VH),l=r[1].match(VH);return HH(e,o)?[n,r[0]]:HH(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function _d(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Nn)[t],n==null&&(n=r.table&&r.table[LH[t]]||Nn[LH[t]]),n==null&&(n=YTe[t]||"General");break}if(MS(n,0))return og(e,r);e instanceof Date&&(e=dne(e,r.date1904));var a=mke(n,e);if(MS(a[1]))return og(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Ake(a[1],e,r,a[0])}function nA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Nn[r]==null){e<0&&(e=r);continue}if(Nn[r]==t){e=r;break}}e<0&&(e=391)}return Nn[e]=t,e}function tP(t){for(var e=0;e!=392;++e)t[e]!==void 0&&nA(t[e],e)}function g1(){Nn=XTe()}var pke={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},yne=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function gke(t){var e=typeof t=="number"?Nn[t]:t;return e=e.replace(yne,"(\\d+)"),new RegExp("^"+e+"$")}function xke(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(yne)||[]).forEach(function(f,A){var h=parseInt(r[A+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=h;break;case"d":s=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:a=h;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var vke=function(){var t={};t.version="1.2.0";function e(){for(var _=0,S=new Array(256),E=0;E!=256;++E)_=E,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,_=_&1?-306674912^_>>>1:_>>>1,S[E]=_;return typeof Int32Array<"u"?new Int32Array(S):S}var r=e();function n(_){var S=0,E=0,F=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)k[F]=_[F];for(F=0;F!=256;++F)for(E=_[F],S=256+F;S<4096;S+=256)E=k[S]=E>>>8^_[E&255];var B=[];for(F=1;F!=16;++F)B[F-1]=typeof Int32Array<"u"?k.subarray(F*256,F*256+256):k.slice(F*256,F*256+256);return B}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],A=a[7],h=a[8],m=a[9],p=a[10],x=a[11],v=a[12],y=a[13],b=a[14];function w(_,S){for(var E=S^-1,F=0,k=_.length;F<k;)E=E>>>8^r[(E^_.charCodeAt(F++))&255];return~E}function j(_,S){for(var E=S^-1,F=_.length-15,k=0;k<F;)E=b[_[k++]^E&255]^y[_[k++]^E>>8&255]^v[_[k++]^E>>16&255]^x[_[k++]^E>>>24]^p[_[k++]]^m[_[k++]]^h[_[k++]]^A[_[k++]]^f[_[k++]]^d[_[k++]]^u[_[k++]]^c[_[k++]]^l[_[k++]]^o[_[k++]]^s[_[k++]]^r[_[k++]];for(F+=15;k<F;)E=E>>>8^r[(E^_[k++])&255];return~E}function I(_,S){for(var E=S^-1,F=0,k=_.length,B=0,D=0;F<k;)B=_.charCodeAt(F++),B<128?E=E>>>8^r[(E^B)&255]:B<2048?(E=E>>>8^r[(E^(192|B>>6&31))&255],E=E>>>8^r[(E^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,D=_.charCodeAt(F++)&1023,E=E>>>8^r[(E^(240|B>>8&7))&255],E=E>>>8^r[(E^(128|B>>2&63))&255],E=E>>>8^r[(E^(128|D>>6&15|(B&3)<<4))&255],E=E>>>8^r[(E^(128|D&63))&255]):(E=E>>>8^r[(E^(224|B>>12&15))&255],E=E>>>8^r[(E^(128|B>>6&63))&255],E=E>>>8^r[(E^(128|B&63))&255]);return~E}return t.table=r,t.bstr=w,t.buf=j,t.str=I,t}(),gn=function(){var e={};e.version="1.2.1";function r(P,R){for(var L=P.split("/"),G=R.split("/"),re=0,ue=0,$e=Math.min(L.length,G.length);re<$e;++re){if(ue=L[re].length-G[re].length)return ue;if(L[re]!=G[re])return L[re]<G[re]?-1:1}return L.length-G.length}function n(P){if(P.charAt(P.length-1)=="/")return P.slice(0,-1).indexOf("/")===-1?P:n(P.slice(0,-1));var R=P.lastIndexOf("/");return R===-1?P:P.slice(0,R+1)}function a(P){if(P.charAt(P.length-1)=="/")return a(P.slice(0,-1));var R=P.lastIndexOf("/");return R===-1?P:P.slice(R+1)}function s(P,R){typeof R=="string"&&(R=new Date(R));var L=R.getHours();L=L<<6|R.getMinutes(),L=L<<5|R.getSeconds()>>>1,P.write_shift(2,L);var G=R.getFullYear()-1980;G=G<<4|R.getMonth()+1,G=G<<5|R.getDate(),P.write_shift(2,G)}function o(P){var R=P.read_shift(2)&65535,L=P.read_shift(2)&65535,G=new Date,re=L&31;L>>>=5;var ue=L&15;L>>>=4,G.setMilliseconds(0),G.setFullYear(L+1980),G.setMonth(ue-1),G.setDate(re);var $e=R&31;R>>>=5;var rt=R&63;return R>>>=6,G.setHours(R),G.setMinutes(rt),G.setSeconds($e<<1),G}function l(P){xl(P,0);for(var R={},L=0;P.l<=P.length-4;){var G=P.read_shift(2),re=P.read_shift(2),ue=P.l+re,$e={};switch(G){case 21589:L=P.read_shift(1),L&1&&($e.mtime=P.read_shift(4)),re>5&&(L&2&&($e.atime=P.read_shift(4)),L&4&&($e.ctime=P.read_shift(4))),$e.mtime&&($e.mt=new Date($e.mtime*1e3));break}P.l=ue,R[G]=$e}return R}var c;function u(){return c||(c={})}function d(P,R){if(P[0]==80&&P[1]==75)return Ye(P,R);if((P[0]|32)==109&&(P[1]|32)==105)return _e(P,R);if(P.length<512)throw new Error("CFB file size "+P.length+" < 512");var L=3,G=512,re=0,ue=0,$e=0,rt=0,At=0,Je=[],ht=P.slice(0,512);xl(ht,0);var Ot=f(ht);switch(L=Ot[0],L){case 3:G=512;break;case 4:G=4096;break;case 0:if(Ot[1]==0)return Ye(P,R);default:throw new Error("Major Version: Expected 3 or 4 saw "+L)}G!==512&&(ht=P.slice(0,G),xl(ht,28));var Se=P.slice(0,G);A(ht,L);var tt=ht.read_shift(4,"i");if(L===3&&tt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+tt);ht.l+=4,$e=ht.read_shift(4,"i"),ht.l+=4,ht.chk("00100000","Mini Stream Cutoff Size: "),rt=ht.read_shift(4,"i"),re=ht.read_shift(4,"i"),At=ht.read_shift(4,"i"),ue=ht.read_shift(4,"i");for(var xt=-1,kt=0;kt<109&&(xt=ht.read_shift(4,"i"),!(xt<0));++kt)Je[kt]=xt;var tr=h(P,G);x(At,ue,tr,G,Je);var nr=y(tr,$e,Je,G);nr[$e].name="!Directory",re>0&&rt!==D&&(nr[rt].name="!MiniFAT"),nr[Je[0]].name="!FAT",nr.fat_addrs=Je,nr.ssz=G;var cr={},Nr=[],mn=[],Mr=[];b($e,nr,tr,Nr,re,cr,mn,rt),m(mn,Mr,Nr),Nr.shift();var Vr={FileIndex:mn,FullPaths:Mr};return R&&R.raw&&(Vr.raw={header:Se,sectors:tr}),Vr}function f(P){if(P[P.l]==80&&P[P.l+1]==75)return[0,0];P.chk(X,"Header Signature: "),P.l+=16;var R=P.read_shift(2,"u");return[P.read_shift(2,"u"),R]}function A(P,R){var L=9;switch(P.l+=2,L=P.read_shift(2)){case 9:if(R!=3)throw new Error("Sector Shift: Expected 9 saw "+L);break;case 12:if(R!=4)throw new Error("Sector Shift: Expected 12 saw "+L);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+L)}P.chk("0600","Mini Sector Shift: "),P.chk("000000000000","Reserved: ")}function h(P,R){for(var L=Math.ceil(P.length/R)-1,G=[],re=1;re<L;++re)G[re-1]=P.slice(re*R,(re+1)*R);return G[L-1]=P.slice(L*R),G}function m(P,R,L){for(var G=0,re=0,ue=0,$e=0,rt=0,At=L.length,Je=[],ht=[];G<At;++G)Je[G]=ht[G]=G,R[G]=L[G];for(;rt<ht.length;++rt)G=ht[rt],re=P[G].L,ue=P[G].R,$e=P[G].C,Je[G]===G&&(re!==-1&&Je[re]!==re&&(Je[G]=Je[re]),ue!==-1&&Je[ue]!==ue&&(Je[G]=Je[ue])),$e!==-1&&(Je[$e]=G),re!==-1&&G!=Je[G]&&(Je[re]=Je[G],ht.lastIndexOf(re)<rt&&ht.push(re)),ue!==-1&&G!=Je[G]&&(Je[ue]=Je[G],ht.lastIndexOf(ue)<rt&&ht.push(ue));for(G=1;G<At;++G)Je[G]===G&&(ue!==-1&&Je[ue]!==ue?Je[G]=Je[ue]:re!==-1&&Je[re]!==re&&(Je[G]=Je[re]));for(G=1;G<At;++G)if(P[G].type!==0){if(rt=G,rt!=Je[rt])do rt=Je[rt],R[G]=R[rt]+"/"+R[G];while(rt!==0&&Je[rt]!==-1&&rt!=Je[rt]);Je[G]=-1}for(R[0]+="/",G=1;G<At;++G)P[G].type!==2&&(R[G]+="/")}function p(P,R,L){for(var G=P.start,re=P.size,ue=[],$e=G;L&&re>0&&$e>=0;)ue.push(R.slice($e*B,$e*B+B)),re-=B,$e=Ap(L,$e*4);return ue.length===0?ir(0):Go(ue).slice(0,P.size)}function x(P,R,L,G,re){var ue=D;if(P===D){if(R!==0)throw new Error("DIFAT chain shorter than expected")}else if(P!==-1){var $e=L[P],rt=(G>>>2)-1;if(!$e)return;for(var At=0;At<rt&&(ue=Ap($e,At*4))!==D;++At)re.push(ue);x(Ap($e,G-4),R-1,L,G,re)}}function v(P,R,L,G,re){var ue=[],$e=[];re||(re=[]);var rt=G-1,At=0,Je=0;for(At=R;At>=0;){re[At]=!0,ue[ue.length]=At,$e.push(P[At]);var ht=L[Math.floor(At*4/G)];if(Je=At*4&rt,G<4+Je)throw new Error("FAT boundary crossed: "+At+" 4 "+G);if(!P[ht])break;At=Ap(P[ht],Je)}return{nodes:ue,data:t$([$e])}}function y(P,R,L,G){var re=P.length,ue=[],$e=[],rt=[],At=[],Je=G-1,ht=0,Ot=0,Se=0,tt=0;for(ht=0;ht<re;++ht)if(rt=[],Se=ht+R,Se>=re&&(Se-=re),!$e[Se]){At=[];var xt=[];for(Ot=Se;Ot>=0;){xt[Ot]=!0,$e[Ot]=!0,rt[rt.length]=Ot,At.push(P[Ot]);var kt=L[Math.floor(Ot*4/G)];if(tt=Ot*4&Je,G<4+tt)throw new Error("FAT boundary crossed: "+Ot+" 4 "+G);if(!P[kt]||(Ot=Ap(P[kt],tt),xt[Ot]))break}ue[Se]={nodes:rt,data:t$([At])}}return ue}function b(P,R,L,G,re,ue,$e,rt){for(var At=0,Je=G.length?2:0,ht=R[P].data,Ot=0,Se=0,tt;Ot<ht.length;Ot+=128){var xt=ht.slice(Ot,Ot+128);xl(xt,64),Se=xt.read_shift(2),tt=J6(xt,0,Se-Je),G.push(tt);var kt={name:tt,type:xt.read_shift(1),color:xt.read_shift(1),L:xt.read_shift(4,"i"),R:xt.read_shift(4,"i"),C:xt.read_shift(4,"i"),clsid:xt.read_shift(16),state:xt.read_shift(4,"i"),start:0,size:0},tr=xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2);tr!==0&&(kt.ct=w(xt,xt.l-8));var nr=xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2)+xt.read_shift(2);nr!==0&&(kt.mt=w(xt,xt.l-8)),kt.start=xt.read_shift(4,"i"),kt.size=xt.read_shift(4,"i"),kt.size<0&&kt.start<0&&(kt.size=kt.type=0,kt.start=D,kt.name=""),kt.type===5?(At=kt.start,re>0&&At!==D&&(R[At].name="!StreamData")):kt.size>=4096?(kt.storage="fat",R[kt.start]===void 0&&(R[kt.start]=v(L,kt.start,R.fat_addrs,R.ssz)),R[kt.start].name=kt.name,kt.content=R[kt.start].data.slice(0,kt.size)):(kt.storage="minifat",kt.size<0?kt.size=0:At!==D&&kt.start!==D&&R[At]&&(kt.content=p(kt,R[At].data,(R[rt]||{}).data))),kt.content&&xl(kt.content,0),ue[tt]=kt,$e.push(kt)}}function w(P,R){return new Date((vu(P,R+4)/1e7*Math.pow(2,32)+vu(P,R)/1e7-11644473600)*1e3)}function j(P,R){return u(),d(c.readFileSync(P),R)}function I(P,R){var L=R&&R.type;switch(L||Kn&&Buffer.isBuffer(P)&&(L="buffer"),L||"base64"){case"file":return j(P,R);case"base64":return d(yu(ku(P)),R);case"binary":return d(yu(P),R)}return d(P,R)}function _(P,R){var L=R||{},G=L.root||"Root Entry";if(P.FullPaths||(P.FullPaths=[]),P.FileIndex||(P.FileIndex=[]),P.FullPaths.length!==P.FileIndex.length)throw new Error("inconsistent CFB structure");P.FullPaths.length===0&&(P.FullPaths[0]=G+"/",P.FileIndex[0]={name:G,type:5}),L.CLSID&&(P.FileIndex[0].clsid=L.CLSID),S(P)}function S(P){var R="Sh33tJ5";if(!gn.find(P,"/"+R)){var L=ir(4);L[0]=55,L[1]=L[3]=50,L[2]=54,P.FileIndex.push({name:R,type:2,content:L,size:4,L:69,R:69,C:69}),P.FullPaths.push(P.FullPaths[0]+R),E(P)}}function E(P,R){_(P);for(var L=!1,G=!1,re=P.FullPaths.length-1;re>=0;--re){var ue=P.FileIndex[re];switch(ue.type){case 0:G?L=!0:(P.FileIndex.pop(),P.FullPaths.pop());break;case 1:case 2:case 5:G=!0,isNaN(ue.R*ue.L*ue.C)&&(L=!0),ue.R>-1&&ue.L>-1&&ue.R==ue.L&&(L=!0);break;default:L=!0;break}}if(!(!L&&!R)){var $e=new Date(1987,1,19),rt=0,At=Object.create?Object.create(null):{},Je=[];for(re=0;re<P.FullPaths.length;++re)At[P.FullPaths[re]]=!0,P.FileIndex[re].type!==0&&Je.push([P.FullPaths[re],P.FileIndex[re]]);for(re=0;re<Je.length;++re){var ht=n(Je[re][0]);G=At[ht],G||(Je.push([ht,{name:a(ht).replace("/",""),type:1,clsid:Ae,ct:$e,mt:$e,content:null}]),At[ht]=!0)}for(Je.sort(function(tt,xt){return r(tt[0],xt[0])}),P.FullPaths=[],P.FileIndex=[],re=0;re<Je.length;++re)P.FullPaths[re]=Je[re][0],P.FileIndex[re]=Je[re][1];for(re=0;re<Je.length;++re){var Ot=P.FileIndex[re],Se=P.FullPaths[re];if(Ot.name=a(Se).replace("/",""),Ot.L=Ot.R=Ot.C=-(Ot.color=1),Ot.size=Ot.content?Ot.content.length:0,Ot.start=0,Ot.clsid=Ot.clsid||Ae,re===0)Ot.C=Je.length>1?1:-1,Ot.size=0,Ot.type=5;else if(Se.slice(-1)=="/"){for(rt=re+1;rt<Je.length&&n(P.FullPaths[rt])!=Se;++rt);for(Ot.C=rt>=Je.length?-1:rt,rt=re+1;rt<Je.length&&n(P.FullPaths[rt])!=n(Se);++rt);Ot.R=rt>=Je.length?-1:rt,Ot.type=1}else n(P.FullPaths[re+1]||"")==n(Se)&&(Ot.R=re+1),Ot.type=2}}}function F(P,R){var L=R||{};if(L.fileType=="mad")return xe(P,L);switch(E(P),L.fileType){case"zip":return we(P,L)}var G=function(tt){for(var xt=0,kt=0,tr=0;tr<tt.FileIndex.length;++tr){var nr=tt.FileIndex[tr];if(nr.content){var cr=nr.content.length;cr>0&&(cr<4096?xt+=cr+63>>6:kt+=cr+511>>9)}}for(var Nr=tt.FullPaths.length+3>>2,mn=xt+7>>3,Mr=xt+127>>7,Vr=mn+kt+Nr+Mr,fn=Vr+127>>7,Zn=fn<=109?0:Math.ceil((fn-109)/127);Vr+fn+Zn+127>>7>fn;)Zn=++fn<=109?0:Math.ceil((fn-109)/127);var Bn=[1,Zn,fn,Mr,Nr,kt,xt,0];return tt.FileIndex[0].size=xt<<6,Bn[7]=(tt.FileIndex[0].start=Bn[0]+Bn[1]+Bn[2]+Bn[3]+Bn[4]+Bn[5])+(Bn[6]+7>>3),Bn}(P),re=ir(G[7]<<9),ue=0,$e=0;{for(ue=0;ue<8;++ue)re.write_shift(1,he[ue]);for(ue=0;ue<8;++ue)re.write_shift(2,0);for(re.write_shift(2,62),re.write_shift(2,3),re.write_shift(2,65534),re.write_shift(2,9),re.write_shift(2,6),ue=0;ue<3;++ue)re.write_shift(2,0);for(re.write_shift(4,0),re.write_shift(4,G[2]),re.write_shift(4,G[0]+G[1]+G[2]+G[3]-1),re.write_shift(4,0),re.write_shift(4,4096),re.write_shift(4,G[3]?G[0]+G[1]+G[2]-1:D),re.write_shift(4,G[3]),re.write_shift(-4,G[1]?G[0]-1:D),re.write_shift(4,G[1]),ue=0;ue<109;++ue)re.write_shift(-4,ue<G[2]?G[1]+ue:-1)}if(G[1])for($e=0;$e<G[1];++$e){for(;ue<236+$e*127;++ue)re.write_shift(-4,ue<G[2]?G[1]+ue:-1);re.write_shift(-4,$e===G[1]-1?D:$e+1)}var rt=function(tt){for($e+=tt;ue<$e-1;++ue)re.write_shift(-4,ue+1);tt&&(++ue,re.write_shift(-4,D))};for($e=ue=0,$e+=G[1];ue<$e;++ue)re.write_shift(-4,fe.DIFSECT);for($e+=G[2];ue<$e;++ue)re.write_shift(-4,fe.FATSECT);rt(G[3]),rt(G[4]);for(var At=0,Je=0,ht=P.FileIndex[0];At<P.FileIndex.length;++At)ht=P.FileIndex[At],ht.content&&(Je=ht.content.length,!(Je<4096)&&(ht.start=$e,rt(Je+511>>9)));for(rt(G[6]+7>>3);re.l&511;)re.write_shift(-4,fe.ENDOFCHAIN);for($e=ue=0,At=0;At<P.FileIndex.length;++At)ht=P.FileIndex[At],ht.content&&(Je=ht.content.length,!(!Je||Je>=4096)&&(ht.start=$e,rt(Je+63>>6)));for(;re.l&511;)re.write_shift(-4,fe.ENDOFCHAIN);for(ue=0;ue<G[4]<<2;++ue){var Ot=P.FullPaths[ue];if(!Ot||Ot.length===0){for(At=0;At<17;++At)re.write_shift(4,0);for(At=0;At<3;++At)re.write_shift(4,-1);for(At=0;At<12;++At)re.write_shift(4,0);continue}ht=P.FileIndex[ue],ue===0&&(ht.start=ht.size?ht.start-1:D);var Se=ue===0&&L.root||ht.name;if(Je=2*(Se.length+1),re.write_shift(64,Se,"utf16le"),re.write_shift(2,Je),re.write_shift(1,ht.type),re.write_shift(1,ht.color),re.write_shift(-4,ht.L),re.write_shift(-4,ht.R),re.write_shift(-4,ht.C),ht.clsid)re.write_shift(16,ht.clsid,"hex");else for(At=0;At<4;++At)re.write_shift(4,0);re.write_shift(4,ht.state||0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,0),re.write_shift(4,ht.start),re.write_shift(4,ht.size),re.write_shift(4,0)}for(ue=1;ue<P.FileIndex.length;++ue)if(ht=P.FileIndex[ue],ht.size>=4096)if(re.l=ht.start+1<<9,Kn&&Buffer.isBuffer(ht.content))ht.content.copy(re,re.l,0,ht.size),re.l+=ht.size+511&-512;else{for(At=0;At<ht.size;++At)re.write_shift(1,ht.content[At]);for(;At&511;++At)re.write_shift(1,0)}for(ue=1;ue<P.FileIndex.length;++ue)if(ht=P.FileIndex[ue],ht.size>0&&ht.size<4096)if(Kn&&Buffer.isBuffer(ht.content))ht.content.copy(re,re.l,0,ht.size),re.l+=ht.size+63&-64;else{for(At=0;At<ht.size;++At)re.write_shift(1,ht.content[At]);for(;At&63;++At)re.write_shift(1,0)}if(Kn)re.l=re.length;else for(;re.l<re.length;)re.write_shift(1,0);return re}function k(P,R){var L=P.FullPaths.map(function(At){return At.toUpperCase()}),G=L.map(function(At){var Je=At.split("/");return Je[Je.length-(At.slice(-1)=="/"?2:1)]}),re=!1;R.charCodeAt(0)===47?(re=!0,R=L[0].slice(0,-1)+R):re=R.indexOf("/")!==-1;var ue=R.toUpperCase(),$e=re===!0?L.indexOf(ue):G.indexOf(ue);if($e!==-1)return P.FileIndex[$e];var rt=!ue.match(zy);for(ue=ue.replace(yc,""),rt&&(ue=ue.replace(zy,"!")),$e=0;$e<L.length;++$e)if((rt?L[$e].replace(zy,"!"):L[$e]).replace(yc,"")==ue||(rt?G[$e].replace(zy,"!"):G[$e]).replace(yc,"")==ue)return P.FileIndex[$e];return null}var B=64,D=-2,X="d0cf11e0a1b11ae1",he=[208,207,17,224,161,177,26,225],Ae="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:X,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ae,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function me(P,R,L){u();var G=F(P,L);c.writeFileSync(R,G)}function ne(P){for(var R=new Array(P.length),L=0;L<P.length;++L)R[L]=String.fromCharCode(P[L]);return R.join("")}function Pe(P,R){var L=F(P,R);switch(R&&R.type||"buffer"){case"file":return u(),c.writeFileSync(R.filename,L),L;case"binary":return typeof L=="string"?L:ne(L);case"base64":return S2(typeof L=="string"?L:ne(L));case"buffer":if(Kn)return Buffer.isBuffer(L)?L:BA(L);case"array":return typeof L=="string"?yu(L):L}return L}var Te;function O(P){try{var R=P.InflateRaw,L=new R;if(L._processChunk(new Uint8Array([3,0]),L._finishFlushFlag),L.bytesRead)Te=P;else throw new Error("zlib does not expose bytesRead")}catch(G){console.error("cannot use native zlib: "+(G.message||G))}}function K(P,R){if(!Te)return de(P,R);var L=Te.InflateRaw,G=new L,re=G._processChunk(P.slice(P.l),G._finishFlushFlag);return P.l+=G.bytesRead,re}function q(P){return Te?Te.deflateRawSync(P):oe(P)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function M(P){var R=(P<<1|P<<11)&139536|(P<<5|P<<15)&558144;return(R>>16|R>>8|R)&255}for(var H=typeof Uint8Array<"u",te=H?new Uint8Array(256):[],ve=0;ve<256;++ve)te[ve]=M(ve);function Q(P,R){var L=te[P&255];return R<=8?L>>>8-R:(L=L<<8|te[P>>8&255],R<=16?L>>>16-R:(L=L<<8|te[P>>16&255],L>>>24-R))}function Ke(P,R){var L=R&7,G=R>>>3;return(P[G]|(L<=6?0:P[G+1]<<8))>>>L&3}function ae(P,R){var L=R&7,G=R>>>3;return(P[G]|(L<=5?0:P[G+1]<<8))>>>L&7}function ee(P,R){var L=R&7,G=R>>>3;return(P[G]|(L<=4?0:P[G+1]<<8))>>>L&15}function Fe(P,R){var L=R&7,G=R>>>3;return(P[G]|(L<=3?0:P[G+1]<<8))>>>L&31}function ce(P,R){var L=R&7,G=R>>>3;return(P[G]|(L<=1?0:P[G+1]<<8))>>>L&127}function be(P,R,L){var G=R&7,re=R>>>3,ue=(1<<L)-1,$e=P[re]>>>G;return L<8-G||($e|=P[re+1]<<8-G,L<16-G)||($e|=P[re+2]<<16-G,L<24-G)||($e|=P[re+3]<<24-G),$e&ue}function Ve(P,R,L){var G=R&7,re=R>>>3;return G<=5?P[re]|=(L&7)<<G:(P[re]|=L<<G&255,P[re+1]=(L&7)>>8-G),R+3}function We(P,R,L){var G=R&7,re=R>>>3;return L=(L&1)<<G,P[re]|=L,R+1}function pt(P,R,L){var G=R&7,re=R>>>3;return L<<=G,P[re]|=L&255,L>>>=8,P[re+1]=L,R+8}function wt(P,R,L){var G=R&7,re=R>>>3;return L<<=G,P[re]|=L&255,L>>>=8,P[re+1]=L&255,P[re+2]=L>>>8,R+16}function Ct(P,R){var L=P.length,G=2*L>R?2*L:R+5,re=0;if(L>=R)return P;if(Kn){var ue=DH(G);if(P.copy)P.copy(ue);else for(;re<P.length;++re)ue[re]=P[re];return ue}else if(H){var $e=new Uint8Array(G);if($e.set)$e.set(P);else for(;re<L;++re)$e[re]=P[re];return $e}return P.length=G,P}function St(P){for(var R=new Array(P),L=0;L<P;++L)R[L]=0;return R}function Rt(P,R,L){var G=1,re=0,ue=0,$e=0,rt=0,At=P.length,Je=H?new Uint16Array(32):St(32);for(ue=0;ue<32;++ue)Je[ue]=0;for(ue=At;ue<L;++ue)P[ue]=0;At=P.length;var ht=H?new Uint16Array(At):St(At);for(ue=0;ue<At;++ue)Je[re=P[ue]]++,G<re&&(G=re),ht[ue]=0;for(Je[0]=0,ue=1;ue<=G;++ue)Je[ue+16]=rt=rt+Je[ue-1]<<1;for(ue=0;ue<At;++ue)rt=P[ue],rt!=0&&(ht[ue]=Je[rt+16]++);var Ot=0;for(ue=0;ue<At;++ue)if(Ot=P[ue],Ot!=0)for(rt=Q(ht[ue],G)>>G-Ot,$e=(1<<G+4-Ot)-1;$e>=0;--$e)R[rt|$e<<Ot]=Ot&15|ue<<4;return G}var jt=H?new Uint16Array(512):St(512),Ue=H?new Uint16Array(32):St(32);if(!H){for(var Be=0;Be<512;++Be)jt[Be]=0;for(Be=0;Be<32;++Be)Ue[Be]=0}(function(){for(var P=[],R=0;R<32;R++)P.push(5);Rt(P,Ue,32);var L=[];for(R=0;R<=143;R++)L.push(8);for(;R<=255;R++)L.push(9);for(;R<=279;R++)L.push(7);for(;R<=287;R++)L.push(8);Rt(L,jt,288)})();var ye=function(){for(var R=H?new Uint8Array(32768):[],L=0,G=0;L<J.length-1;++L)for(;G<J[L+1];++G)R[G]=L;for(;G<32768;++G)R[G]=29;var re=H?new Uint8Array(259):[];for(L=0,G=0;L<W.length-1;++L)for(;G<W[L+1];++G)re[G]=L;function ue(rt,At){for(var Je=0;Je<rt.length;){var ht=Math.min(65535,rt.length-Je),Ot=Je+ht==rt.length;for(At.write_shift(1,+Ot),At.write_shift(2,ht),At.write_shift(2,~ht&65535);ht-- >0;)At[At.l++]=rt[Je++]}return At.l}function $e(rt,At){for(var Je=0,ht=0,Ot=H?new Uint16Array(32768):[];ht<rt.length;){var Se=Math.min(65535,rt.length-ht);if(Se<10){for(Je=Ve(At,Je,+(ht+Se==rt.length)),Je&7&&(Je+=8-(Je&7)),At.l=Je/8|0,At.write_shift(2,Se),At.write_shift(2,~Se&65535);Se-- >0;)At[At.l++]=rt[ht++];Je=At.l*8;continue}Je=Ve(At,Je,+(ht+Se==rt.length)+2);for(var tt=0;Se-- >0;){var xt=rt[ht];tt=(tt<<5^xt)&32767;var kt=-1,tr=0;if((kt=Ot[tt])&&(kt|=ht&-32768,kt>ht&&(kt-=32768),kt<ht))for(;rt[kt+tr]==rt[ht+tr]&&tr<250;)++tr;if(tr>2){xt=re[tr],xt<=22?Je=pt(At,Je,te[xt+1]>>1)-1:(pt(At,Je,3),Je+=5,pt(At,Je,te[xt-23]>>5),Je+=3);var nr=xt<8?0:xt-4>>2;nr>0&&(wt(At,Je,tr-W[xt]),Je+=nr),xt=R[ht-kt],Je=pt(At,Je,te[xt]>>3),Je-=3;var cr=xt<4?0:xt-2>>1;cr>0&&(wt(At,Je,ht-kt-J[xt]),Je+=cr);for(var Nr=0;Nr<tr;++Nr)Ot[tt]=ht&32767,tt=(tt<<5^rt[ht])&32767,++ht;Se-=tr-1}else xt<=143?xt=xt+48:Je=We(At,Je,1),Je=pt(At,Je,te[xt]),Ot[tt]=ht&32767,++ht}Je=pt(At,Je,0)-1}return At.l=(Je+7)/8|0,At.l}return function(At,Je){return At.length<8?ue(At,Je):$e(At,Je)}}();function oe(P){var R=ir(50+Math.floor(P.length*1.1)),L=ye(P,R);return R.slice(0,L)}var Z=H?new Uint16Array(32768):St(32768),Ne=H?new Uint16Array(32768):St(32768),Re=H?new Uint16Array(128):St(128),ge=1,Xe=1;function vt(P,R){var L=Fe(P,R)+257;R+=5;var G=Fe(P,R)+1;R+=5;var re=ee(P,R)+4;R+=4;for(var ue=0,$e=H?new Uint8Array(19):St(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],At=1,Je=H?new Uint8Array(8):St(8),ht=H?new Uint8Array(8):St(8),Ot=$e.length,Se=0;Se<re;++Se)$e[U[Se]]=ue=ae(P,R),At<ue&&(At=ue),Je[ue]++,R+=3;var tt=0;for(Je[0]=0,Se=1;Se<=At;++Se)ht[Se]=tt=tt+Je[Se-1]<<1;for(Se=0;Se<Ot;++Se)(tt=$e[Se])!=0&&(rt[Se]=ht[tt]++);var xt=0;for(Se=0;Se<Ot;++Se)if(xt=$e[Se],xt!=0){tt=te[rt[Se]]>>8-xt;for(var kt=(1<<7-xt)-1;kt>=0;--kt)Re[tt|kt<<xt]=xt&7|Se<<3}var tr=[];for(At=1;tr.length<L+G;)switch(tt=Re[ce(P,R)],R+=tt&7,tt>>>=3){case 16:for(ue=3+Ke(P,R),R+=2,tt=tr[tr.length-1];ue-- >0;)tr.push(tt);break;case 17:for(ue=3+ae(P,R),R+=3;ue-- >0;)tr.push(0);break;case 18:for(ue=11+ce(P,R),R+=7;ue-- >0;)tr.push(0);break;default:tr.push(tt),At<tt&&(At=tt);break}var nr=tr.slice(0,L),cr=tr.slice(L);for(Se=L;Se<286;++Se)nr[Se]=0;for(Se=G;Se<30;++Se)cr[Se]=0;return ge=Rt(nr,Z,286),Xe=Rt(cr,Ne,30),R}function it(P,R){if(P[0]==3&&!(P[1]&3))return[wm(R),2];for(var L=0,G=0,re=DH(R||1<<18),ue=0,$e=re.length>>>0,rt=0,At=0;!(G&1);){if(G=ae(P,L),L+=3,G>>>1)G>>1==1?(rt=9,At=5):(L=vt(P,L),rt=ge,At=Xe);else{L&7&&(L+=8-(L&7));var Je=P[L>>>3]|P[(L>>>3)+1]<<8;if(L+=32,Je>0)for(!R&&$e<ue+Je&&(re=Ct(re,ue+Je),$e=re.length);Je-- >0;)re[ue++]=P[L>>>3],L+=8;continue}for(;;){!R&&$e<ue+32767&&(re=Ct(re,ue+32767),$e=re.length);var ht=be(P,L,rt),Ot=G>>>1==1?jt[ht]:Z[ht];if(L+=Ot&15,Ot>>>=4,!(Ot>>>8&255))re[ue++]=Ot;else{if(Ot==256)break;Ot-=257;var Se=Ot<8?0:Ot-4>>2;Se>5&&(Se=0);var tt=ue+W[Ot];Se>0&&(tt+=be(P,L,Se),L+=Se),ht=be(P,L,At),Ot=G>>>1==1?Ue[ht]:Ne[ht],L+=Ot&15,Ot>>>=4;var xt=Ot<4?0:Ot-2>>1,kt=J[Ot];for(xt>0&&(kt+=be(P,L,xt),L+=xt),!R&&$e<tt&&(re=Ct(re,tt+100),$e=re.length);ue<tt;)re[ue]=re[ue-kt],++ue}}}return R?[re,L+7>>>3]:[re.slice(0,ue),L+7>>>3]}function de(P,R){var L=P.slice(P.l||0),G=it(L,R);return P.l+=G[1],G[0]}function Ce(P,R){if(P)typeof console<"u"&&console.error(R);else throw new Error(R)}function Ye(P,R){var L=P;xl(L,0);var G=[],re=[],ue={FileIndex:G,FullPaths:re};_(ue,{root:R.root});for(var $e=L.length-4;(L[$e]!=80||L[$e+1]!=75||L[$e+2]!=5||L[$e+3]!=6)&&$e>=0;)--$e;L.l=$e+4,L.l+=4;var rt=L.read_shift(2);L.l+=6;var At=L.read_shift(4);for(L.l=At,$e=0;$e<rt;++$e){L.l+=20;var Je=L.read_shift(4),ht=L.read_shift(4),Ot=L.read_shift(2),Se=L.read_shift(2),tt=L.read_shift(2);L.l+=8;var xt=L.read_shift(4),kt=l(L.slice(L.l+Ot,L.l+Ot+Se));L.l+=Ot+Se+tt;var tr=L.l;L.l=xt+4,ft(L,Je,ht,ue,kt),L.l=tr}return ue}function ft(P,R,L,G,re){P.l+=2;var ue=P.read_shift(2),$e=P.read_shift(2),rt=o(P);if(ue&8257)throw new Error("Unsupported ZIP encryption");for(var At=P.read_shift(4),Je=P.read_shift(4),ht=P.read_shift(4),Ot=P.read_shift(2),Se=P.read_shift(2),tt="",xt=0;xt<Ot;++xt)tt+=String.fromCharCode(P[P.l++]);if(Se){var kt=l(P.slice(P.l,P.l+Se));(kt[21589]||{}).mt&&(rt=kt[21589].mt),((re||{})[21589]||{}).mt&&(rt=re[21589].mt)}P.l+=Se;var tr=P.slice(P.l,P.l+Je);switch($e){case 8:tr=K(P,ht);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+$e)}var nr=!1;ue&8&&(At=P.read_shift(4),At==134695760&&(At=P.read_shift(4),nr=!0),Je=P.read_shift(4),ht=P.read_shift(4)),Je!=R&&Ce(nr,"Bad compressed size: "+R+" != "+Je),ht!=L&&Ce(nr,"Bad uncompressed size: "+L+" != "+ht),Oe(G,tt,tr,{unsafe:!0,mt:rt})}function we(P,R){var L=R||{},G=[],re=[],ue=ir(1),$e=L.compression?8:0,rt=0,At=0,Je=0,ht=0,Ot=0,Se=P.FullPaths[0],tt=Se,xt=P.FileIndex[0],kt=[],tr=0;for(At=1;At<P.FullPaths.length;++At)if(tt=P.FullPaths[At].slice(Se.length),xt=P.FileIndex[At],!(!xt.size||!xt.content||tt=="Sh33tJ5")){var nr=ht,cr=ir(tt.length);for(Je=0;Je<tt.length;++Je)cr.write_shift(1,tt.charCodeAt(Je)&127);cr=cr.slice(0,cr.l),kt[Ot]=vke.buf(xt.content,0);var Nr=xt.content;$e==8&&(Nr=q(Nr)),ue=ir(30),ue.write_shift(4,67324752),ue.write_shift(2,20),ue.write_shift(2,rt),ue.write_shift(2,$e),xt.mt?s(ue,xt.mt):ue.write_shift(4,0),ue.write_shift(-4,kt[Ot]),ue.write_shift(4,Nr.length),ue.write_shift(4,xt.content.length),ue.write_shift(2,cr.length),ue.write_shift(2,0),ht+=ue.length,G.push(ue),ht+=cr.length,G.push(cr),ht+=Nr.length,G.push(Nr),ue=ir(46),ue.write_shift(4,33639248),ue.write_shift(2,0),ue.write_shift(2,20),ue.write_shift(2,rt),ue.write_shift(2,$e),ue.write_shift(4,0),ue.write_shift(-4,kt[Ot]),ue.write_shift(4,Nr.length),ue.write_shift(4,xt.content.length),ue.write_shift(2,cr.length),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(4,0),ue.write_shift(4,nr),tr+=ue.l,re.push(ue),tr+=cr.length,re.push(cr),++Ot}return ue=ir(22),ue.write_shift(4,101010256),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(2,Ot),ue.write_shift(2,Ot),ue.write_shift(4,tr),ue.write_shift(4,ht),ue.write_shift(2,0),Go([Go(G),Go(re),ue])}var Le={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function gt(P,R){if(P.ctype)return P.ctype;var L=P.name||"",G=L.match(/\.([^\.]+)$/);return G&&Le[G[1]]||R&&(G=(L=R).match(/[\.\\]([^\.\\])+$/),G&&Le[G[1]])?Le[G[1]]:"application/octet-stream"}function Ut(P){for(var R=S2(P),L=[],G=0;G<R.length;G+=76)L.push(R.slice(G,G+76));return L.join(`\r
`)+`\r
`}function Mt(P){var R=P.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Je){var ht=Je.charCodeAt(0).toString(16).toUpperCase();return"="+(ht.length==1?"0"+ht:ht)});R=R.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),R.charAt(0)==`
`&&(R="=0D"+R.slice(1)),R=R.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var L=[],G=R.split(`\r
`),re=0;re<G.length;++re){var ue=G[re];if(ue.length==0){L.push("");continue}for(var $e=0;$e<ue.length;){var rt=76,At=ue.slice($e,$e+rt);At.charAt(rt-1)=="="?rt--:At.charAt(rt-2)=="="?rt-=2:At.charAt(rt-3)=="="&&(rt-=3),At=ue.slice($e,$e+rt),$e+=rt,$e<ue.length&&(At+="="),L.push(At)}}return L.join(`\r
`)}function Yt(P){for(var R=[],L=0;L<P.length;++L){for(var G=P[L];L<=P.length&&G.charAt(G.length-1)=="=";)G=G.slice(0,G.length-1)+P[++L];R.push(G)}for(var re=0;re<R.length;++re)R[re]=R[re].replace(/[=][0-9A-Fa-f]{2}/g,function(ue){return String.fromCharCode(parseInt(ue.slice(1),16))});return yu(R.join(`\r
`))}function st(P,R,L){for(var G="",re="",ue="",$e,rt=0;rt<10;++rt){var At=R[rt];if(!At||At.match(/^\s*$/))break;var Je=At.match(/^(.*?):\s*([^\s].*)$/);if(Je)switch(Je[1].toLowerCase()){case"content-location":G=Je[2].trim();break;case"content-type":ue=Je[2].trim();break;case"content-transfer-encoding":re=Je[2].trim();break}}switch(++rt,re.toLowerCase()){case"base64":$e=yu(ku(R.slice(rt).join("")));break;case"quoted-printable":$e=Yt(R.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+re)}var ht=Oe(P,G.slice(L.length),$e,{unsafe:!0});ue&&(ht.ctype=ue)}function _e(P,R){if(ne(P.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var L=R&&R.root||"",G=(Kn&&Buffer.isBuffer(P)?P.toString("binary"):ne(P)).split(`\r
`),re=0,ue="";for(re=0;re<G.length;++re)if(ue=G[re],!!/^Content-Location:/i.test(ue)&&(ue=ue.slice(ue.indexOf("file")),L||(L=ue.slice(0,ue.lastIndexOf("/")+1)),ue.slice(0,L.length)!=L))for(;L.length>0&&(L=L.slice(0,L.length-1),L=L.slice(0,L.lastIndexOf("/")+1),ue.slice(0,L.length)!=L););var $e=(G[1]||"").match(/boundary="(.*?)"/);if(!$e)throw new Error("MAD cannot find boundary");var rt="--"+($e[1]||""),At=[],Je=[],ht={FileIndex:At,FullPaths:Je};_(ht);var Ot,Se=0;for(re=0;re<G.length;++re){var tt=G[re];tt!==rt&&tt!==rt+"--"||(Se++&&st(ht,G.slice(Ot,re),L),Ot=re)}return ht}function xe(P,R){var L=R||{},G=L.boundary||"SheetJS";G="------="+G;for(var re=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+G.slice(2)+'"',"","",""],ue=P.FullPaths[0],$e=ue,rt=P.FileIndex[0],At=1;At<P.FullPaths.length;++At)if($e=P.FullPaths[At].slice(ue.length),rt=P.FileIndex[At],!(!rt.size||!rt.content||$e=="Sh33tJ5")){$e=$e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(tr){return"_x"+tr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(tr){return"_u"+tr.charCodeAt(0).toString(16)+"_"});for(var Je=rt.content,ht=Kn&&Buffer.isBuffer(Je)?Je.toString("binary"):ne(Je),Ot=0,Se=Math.min(1024,ht.length),tt=0,xt=0;xt<=Se;++xt)(tt=ht.charCodeAt(xt))>=32&&tt<128&&++Ot;var kt=Ot>=Se*4/5;re.push(G),re.push("Content-Location: "+(L.root||"file:///C:/SheetJS/")+$e),re.push("Content-Transfer-Encoding: "+(kt?"quoted-printable":"base64")),re.push("Content-Type: "+gt(rt,$e)),re.push(""),re.push(kt?Mt(ht):Ut(ht))}return re.push(G+`--\r
`),re.join(`\r
`)}function ie(P){var R={};return _(R,P),R}function Oe(P,R,L,G){var re=G&&G.unsafe;re||_(P);var ue=!re&&gn.find(P,R);if(!ue){var $e=P.FullPaths[0];R.slice(0,$e.length)==$e?$e=R:($e.slice(-1)!="/"&&($e+="/"),$e=($e+R).replace("//","/")),ue={name:a(R),type:2},P.FileIndex.push(ue),P.FullPaths.push($e),re||gn.utils.cfb_gc(P)}return ue.content=L,ue.size=L?L.length:0,G&&(G.CLSID&&(ue.clsid=G.CLSID),G.mt&&(ue.mt=G.mt),G.ct&&(ue.ct=G.ct)),ue}function le(P,R){_(P);var L=gn.find(P,R);if(L){for(var G=0;G<P.FileIndex.length;++G)if(P.FileIndex[G]==L)return P.FileIndex.splice(G,1),P.FullPaths.splice(G,1),!0}return!1}function De(P,R,L){_(P);var G=gn.find(P,R);if(G){for(var re=0;re<P.FileIndex.length;++re)if(P.FileIndex[re]==G)return P.FileIndex[re].name=a(L),P.FullPaths[re]=L,!0}return!1}function He(P){E(P,!0)}return e.find=k,e.read=I,e.parse=d,e.write=Pe,e.writeFile=me,e.utils={cfb_new:ie,cfb_add:Oe,cfb_del:le,cfb_mov:De,cfb_gc:He,ReadShift:Sb,CheckField:Vne,prep_blob:xl,bconcat:Go,use_zlib:O,_deflateRaw:oe,_inflateRaw:de,consts:fe},e}();function yke(t){return typeof t=="string"?eP(t):Array.isArray(t)?KTe(t):t}function kw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=eP(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Wf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([yke(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Om(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function bke(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function wi(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function $H(t,e){for(var r=[],n=wi(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function rP(t){for(var e=[],r=wi(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function nP(t){for(var e=[],r=wi(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function wke(t){for(var e=[],r=wi(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var US=new Date(1899,11,30,0,0,0);function Eo(t,e){var r=t.getTime(),n=US.getTime()+(t.getTimezoneOffset()-US.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var bne=new Date,Nke=US.getTime()+(bne.getTimezoneOffset()-US.getTimezoneOffset())*6e4,GH=bne.getTimezoneOffset();function aP(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Nke),e.getTimezoneOffset()!==GH&&e.setTime(e.getTime()+(e.getTimezoneOffset()-GH)*6e4),e}function Cke(t){var e=0,r=0,n=!1,a=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(a[s],10)}return e}var KH=new Date("2017-02-19T19:06:09.000Z"),wne=isNaN(KH.getFullYear())?new Date("2/19/17"):KH,_ke=wne.getFullYear()==2017;function Ps(t,e){var r=new Date(t);if(_ke)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(wne.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function lg(t,e){if(Kn&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return Wf(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Wf(cne(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return Wf(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Wf(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Bs(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Bs(t[r]));return e}function xi(t,e){for(var r="";r.length<e;)r+=t;return r}function df(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var Eke=["january","february","march","april","may","june","july","august","september","october","november","december"];function Dv(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Eke.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Ske=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(t||typeof n=="string")return r.split(n);for(var s=r.split(n),o=[s[0]],l=1;l<s.length;++l)o.push(a),o.push(s[l]);return o}}();function Nne(t){return t?t.content&&t.type?lg(t.content,!0):t.data?qy(t.data):t.asNodeBuffer&&Kn?qy(t.asNodeBuffer().toString("binary")):t.asBinary?qy(t.asBinary()):t._data&&t._data.getContent?qy(lg(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Cne(t){if(!t)return null;if(t.data)return FH(t.data);if(t.asNodeBuffer&&Kn)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?FH(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function Ike(t){return t&&t.name.slice(-4)===".bin"?Cne(t):Nne(t)}function id(t,e){for(var r=t.FullPaths||wi(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var o=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return t.files?t.files[r[s]]:t.FileIndex[s]}return null}function K6(t,e){var r=id(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Wi(t,e,r){if(!r)return Ike(K6(t,e));if(!e)return null;try{return Wi(t,e)}catch{return null}}function bu(t,e,r){if(!r)return Nne(K6(t,e));if(!e)return null;try{return bu(t,e)}catch{return null}}function jke(t,e,r){return Cne(K6(t,e))}function qH(t){for(var e=t.FullPaths||wi(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Hn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Kn?n=BA(r):n=qTe(r),gn.utils.cfb_add(t,e,n)}gn.utils.cfb_add(t,e,r)}else t.file(e,r)}function q6(){return gn.utils.cfb_new()}function _ne(t,e){switch(e.type){case"base64":return gn.read(t,{type:"base64"});case"binary":return gn.read(t,{type:"binary"});case"buffer":case"array":return gn.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Wy(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Hi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Pke=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,zH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Bke=/<[^>]*>/g,tc=Hi.match(zH)?zH:Bke,Tke=/<\w*:/,kke=/<(\/?)\w+:/;function Sn(t,e,r){for(var n={},a=0,s=0;a!==t.length&&!((s=t.charCodeAt(a))===32||s===10||s===13);++a);if(e||(n[0]=t.slice(0,a)),a===t.length)return n;var o=t.match(Pke),l=0,c="",u=0,d="",f="",A=1;if(o)for(u=0;u!=o.length;++u){for(f=o[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(A=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+A,f.length-A),l=0;l!=d.length&&d.charCodeAt(l)!==58;++l);if(l===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var h=(l===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(l+1);if(n[h]&&d.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function fh(t){return t.replace(kke,"<$1")}var Ene={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},z6=rP(Ene),ga=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(t,function(l,c){return Ene[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,o)+r(a.slice(o+3))}}(),W6=/[&<>'"]/g,Fke=/[\u0000-\u0008\u000b-\u001f]/g;function za(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(Fke,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function WH(t){return za(t).replace(/ /g,"_x0020_")}var Sne=/[\u0000-\u001f]/g;function X6(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(/\n/g,"<br/>").replace(Sne,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Oke(t){var e=t+"";return e.replace(W6,function(r){return z6[r]}).replace(Sne,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var XH=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Dke(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Es(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function S5(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function YH(t){var e=wm(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function JH(t){return BA(t,"binary").toString("utf8")}var KC="foo bar baz",ts=Kn&&(JH(KC)==S5(KC)&&JH||YH(KC)==S5(KC)&&YH)||S5,Wf=Kn?function(t){return BA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},j2=function(){var t={};return function(r,n){var a=r+"|"+(n||"");return t[a]?t[a]:t[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Ine=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Rke=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Mke=/<\/?(?:vt:)?variant>/g,Lke=/<(?:vt:)([^>]*)>([\s\S]*)</;function ZH(t,e){var r=Sn(t),n=t.match(Rke(r.baseType))||[],a=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var o=s.replace(Mke,"").match(Lke);o&&a.push({v:ts(o[2]),t:o[1]})}),a}var jne=/(^\s|\s$|\n)/;function yl(t,e){return"<"+t+(e.match(jne)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function P2(t){return wi(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Fr(t,e,r){return"<"+t+(r!=null?P2(r):"")+(e!=null?(e.match(jne)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function zk(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Uke(t,e){switch(typeof t){case"string":var r=Fr("vt:lpwstr",za(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Fr((t|0)==t?"vt:i4":"vt:r8",za(String(t)));case"boolean":return Fr("vt:bool",t?"true":"false")}if(t instanceof Date)return Fr("vt:filetime",zk(t));throw new Error("Unable to serialize "+t)}function Y6(t){if(Kn&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return ts(Om(H6(t)));throw new Error("Bad input format: expected Buffer or string")}var B2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,wo={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Tg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],xu={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Qke(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function Vke(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var e$=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},t$=Kn?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:BA(e)})):e$(t)}:e$,r$=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(Kh(t,a)));return n.join("").replace(yc,"")},J6=Kn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(yc,""):r$(t,e,r)}:r$,n$=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Pne=Kn?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):n$(t,e,r)}:n$,a$=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(jx(t,a)));return n.join("")},Fw=Kn?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):a$(e,r,n)}:a$,Bne=function(t,e){var r=vu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},Tne=Bne,kne=function(t,e){var r=vu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},Fne=kne,One=function(t,e){var r=2*vu(t,e);return r>0?Fw(t,e+4,e+4+r-1):""},Dne=One,Rne=function(e,r){var n=vu(e,r);return n>0?J6(e,r+4,r+4+n):""},Mne=Rne,Lne=function(t,e){var r=vu(t,e);return r>0?Fw(t,e+4,e+4+r):""},Une=Lne,Qne=function(t,e){return Qke(t,e)},QS=Qne,Z6=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Kn&&(Tne=function(e,r){if(!Buffer.isBuffer(e))return Bne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Fne=function(e,r){if(!Buffer.isBuffer(e))return kne(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Dne=function(e,r){if(!Buffer.isBuffer(e))return One(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Mne=function(e,r){if(!Buffer.isBuffer(e))return Rne(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Une=function(e,r){if(!Buffer.isBuffer(e))return Lne(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},QS=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Qne(e,r)},Z6=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var jx=function(t,e){return t[e]},Kh=function(t,e){return t[e+1]*256+t[e]},Hke=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},vu=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Ap=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},$ke=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Sb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,Kn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Kh(this,u)),u+=2;t*=2;break;case"utf8":r=Fw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=J6(this,this.l,this.l+t);break;case"wstr":return Sb.call(this,t,"dbcs");case"lpstr-ansi":r=Tne(this,this.l),t=4+vu(this,this.l);break;case"lpstr-cp":r=Fne(this,this.l),t=4+vu(this,this.l);break;case"lpwstr":r=Dne(this,this.l),t=4+2*vu(this,this.l);break;case"lpp4":t=4+vu(this,this.l),r=Mne(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+vu(this,this.l),r=Une(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=jx(this,this.l+t++))!==0;)s.push(GC(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=Kh(this,this.l+t))!==0;)s.push(GC(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jx(this,u),this.l=u+1,l=Sb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(GC(Kh(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=jx(this,u),this.l=u+1,l=Sb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(GC(jx(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=jx(this,this.l),this.l++,n;case 2:return n=(e==="i"?Hke:Kh)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Ap:$ke)(this,this.l),this.l+=4,n):(a=vu(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=QS(this,this.l):a=QS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Pne(this,this.l,t);break}}return this.l+=t,r}var Gke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},Kke=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},qke=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function zke(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)qke(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,Gke(this,e,this.l);break;case 8:if(n=8,r==="f"){Vke(this,e,this.l);break}case 16:break;case-4:n=4,Kke(this,e,this.l);break}return this.l+=n,this}function Vne(t,e){var r=Pne(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function xl(t,e){t.l=e,t.read_shift=Sb,t.chk=Vne,t.write_shift=zke}function Zl(t,e){t.l+=e}function ir(t){var e=wm(t);return xl(e,0),e}function TA(t,e,r){if(t){var n,a,s;xl(t,t.l||0);for(var o=t.length,l=0,c=0;t.l<o;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var u=R2[l]||R2[65535];for(n=t.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=t.read_shift(1))&127)<<7*a;c=t.l+s;var d=u.f&&u.f(t,s,r);if(t.l=c,e(d,u,l))return}}}function Yc(){var t=[],e=Kn?256:2048,r=function(u){var d=ir(u);return xl(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Go(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function vr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=R2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&Z6(r)&&t.push(r)}}function Ib(t,e,r){var n=Bs(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function s$(t,e,r){var n=Bs(t);return n.s=Ib(n.s,e.s,r),n.e=Ib(n.e,e.s,r),n}function jb(t,e){if(t.cRel&&t.c<0)for(t=Bs(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Bs(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Cn(t);return!t.cRel&&t.cRel!=null&&(r=Yke(r)),!t.rRel&&t.rRel!=null&&(r=Wke(r)),r}function I5(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ri(t.s.c)+":"+(t.e.cRel?"":"$")+ri(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Qi(t.s.r)+":"+(t.e.rRel?"":"$")+Qi(t.e.r):jb(t.s,e.biff)+":"+jb(t.e,e.biff)}function eR(t){return parseInt(Xke(t),10)-1}function Qi(t){return""+(t+1)}function Wke(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Xke(t){return t.replace(/\$(\d+)$/,"$1")}function tR(t){for(var e=Jke(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function ri(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Yke(t){return t.replace(/^([A-Z])/,"$$$1")}function Jke(t){return t.replace(/^\$([A-Z])/,"$1")}function Zke(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ni(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Cn(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Jc(t){var e=t.indexOf(":");return e==-1?{s:ni(t),e:ni(t)}:{s:ni(t.slice(0,e)),e:ni(t.slice(e+1))}}function Ln(t,e){return typeof e>"u"||typeof e=="number"?Ln(t.s,t.e):(typeof t!="string"&&(t=Cn(t)),typeof e!="string"&&(e=Cn(e)),t==e?t:t+":"+e)}function xa(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function i$(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=_d(t.z,r?Eo(e):e)}catch{}try{return t.w=_d((t.XF||{}).numFmtId||(r?14:0),r?Eo(e):e)}catch{return""+e}}function pA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?kA[t.v]||t.v:e==null?i$(t,t.v):i$(t,e))}function Dm(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Hne(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ni(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=xa(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=e[f].length;++A)if(!(typeof e[f][A]>"u")){var h={v:e[f][A]},m=o+f,p=l+A;if(u.s.r>m&&(u.s.r=m),u.s.c>p&&(u.s.c=p),u.e.r<m&&(u.e.r=m),u.e.c<p&&(u.e.c=p),e[f][A]&&typeof e[f][A]=="object"&&!Array.isArray(e[f][A])&&!(e[f][A]instanceof Date))h=e[f][A];else if(Array.isArray(h.v)&&(h.f=e[f][A][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Nn[14],n.cellDates?(h.t="d",h.w=_d(h.z,Eo(h.v))):(h.t="n",h.v=Eo(h.v),h.w=_d(h.z,h.v))):h.t="s";if(a)s[m]||(s[m]=[]),s[m][p]&&s[m][p].z&&(h.z=s[m][p].z),s[m][p]=h;else{var x=Cn({c:p,r:m});s[x]&&s[x].z&&(h.z=s[x].z),s[x]=h}}}return u.s.c<1e7&&(s["!ref"]=Ln(u)),s}function x1(t,e){return Hne(null,t,e)}function eFe(t){return t.read_shift(4,"i")}function ff(t,e){return e||(e=ir(4)),e.write_shift(4,t),e}function Xl(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function qo(t,e){var r=!1;return e==null&&(r=!0,e=ir(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function tFe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function rFe(t,e){return e||(e=ir(4)),e.write_shift(2,0),e.write_shift(2,0),e}function rR(t,e){var r=t.l,n=t.read_shift(1),a=Xl(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(tFe(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function nFe(t,e){var r=!1;return e==null&&(r=!0,e=ir(15+4*t.t.length)),e.write_shift(1,0),qo(t.t,e),r?e.slice(0,e.l):e}var aFe=rR;function sFe(t,e){var r=!1;return e==null&&(r=!0,e=ir(23+4*t.t.length)),e.write_shift(1,1),qo(t.t,e),e.write_shift(4,1),rFe({},e),r?e.slice(0,e.l):e}function Bd(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function kg(t,e){return e==null&&(e=ir(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Fg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Og(t,e){return e==null&&(e=ir(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var iFe=Xl,$ne=qo;function nR(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function VS(t,e){var r=!1;return e==null&&(r=!0,e=ir(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var oFe=Xl,Wk=nR,aR=VS;function sR(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?QS([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ap(e,0)>>2;return r?a/100:a}function Gne(t,e){e==null&&(e=ir(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Kne(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function lFe(t,e){return e||(e=ir(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Dg=Kne,v1=lFe;function zl(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function cg(t,e){return(e||ir(8)).write_shift(8,t,"f")}function cFe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=Dp[a];u&&(e.rgb=k2(u));break;case 2:e.rgb=k2([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function HS(t,e){if(e||(e=ir(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function uFe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function dFe(t,e){e||(e=ir(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function qne(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function fFe(t){return qne(t,1)}function hFe(t){return qne(t,2)}var iR=2,Uc=3,qC=11,o$=12,$S=19,zC=64,AFe=65,mFe=71,pFe=4108,gFe=4126,Qo=80,zne=81,xFe=[Qo,zne],Xk={1:{n:"CodePage",t:iR},2:{n:"Category",t:Qo},3:{n:"PresentationFormat",t:Qo},4:{n:"ByteCount",t:Uc},5:{n:"LineCount",t:Uc},6:{n:"ParagraphCount",t:Uc},7:{n:"SlideCount",t:Uc},8:{n:"NoteCount",t:Uc},9:{n:"HiddenCount",t:Uc},10:{n:"MultimediaClipCount",t:Uc},11:{n:"ScaleCrop",t:qC},12:{n:"HeadingPairs",t:pFe},13:{n:"TitlesOfParts",t:gFe},14:{n:"Manager",t:Qo},15:{n:"Company",t:Qo},16:{n:"LinksUpToDate",t:qC},17:{n:"CharacterCount",t:Uc},19:{n:"SharedDoc",t:qC},22:{n:"HyperlinksChanged",t:qC},23:{n:"AppVersion",t:Uc,p:"version"},24:{n:"DigSig",t:AFe},26:{n:"ContentType",t:Qo},27:{n:"ContentStatus",t:Qo},28:{n:"Language",t:Qo},29:{n:"Version",t:Qo},255:{},2147483648:{n:"Locale",t:$S},2147483651:{n:"Behavior",t:$S},1919054434:{}},Yk={1:{n:"CodePage",t:iR},2:{n:"Title",t:Qo},3:{n:"Subject",t:Qo},4:{n:"Author",t:Qo},5:{n:"Keywords",t:Qo},6:{n:"Comments",t:Qo},7:{n:"Template",t:Qo},8:{n:"LastAuthor",t:Qo},9:{n:"RevNumber",t:Qo},10:{n:"EditTime",t:zC},11:{n:"LastPrinted",t:zC},12:{n:"CreatedDate",t:zC},13:{n:"ModifiedDate",t:zC},14:{n:"PageCount",t:Uc},15:{n:"WordCount",t:Uc},16:{n:"CharCount",t:Uc},17:{n:"Thumbnail",t:mFe},18:{n:"Application",t:Qo},19:{n:"DocSecurity",t:Uc},255:{},2147483648:{n:"Locale",t:$S},2147483651:{n:"Behavior",t:$S},1919054434:{}},l$={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},vFe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function yFe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var bFe=yFe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Dp=Bs(bFe),kA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Wne={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Jk={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},WC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function oR(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function wFe(t){var e=oR();if(!t||!t.match)return e;var r={};if((t.match(tc)||[]).forEach(function(n){var a=Sn(n);switch(a[0].replace(Tke,"<")){case"<?xml":break;case"<Types":e.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":e[Jk[a.ContentType]]!==void 0&&e[Jk[a.ContentType]].push(a.PartName);break}}),e.xmlns!==wo.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Xne(t,e){var r=wke(Jk),n=[],a;n[n.length]=Hi,n[n.length]=Fr("Types",null,{xmlns:wo.CT,"xmlns:xsd":wo.xsd,"xmlns:xsi":wo.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Fr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=Fr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:WC[c][e.bookType]||WC[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Fr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:WC[c][e.bookType]||WC[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=Fr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Jn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function T2(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Pb(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(tc)||[]).forEach(function(a){var s=Sn(a);if(s[0]==="<Relationship"){var o={};o.Type=s.Type,o.Target=s.Target,o.Id=s.Id,s.TargetMode&&(o.TargetMode=s.TargetMode);var l=s.TargetMode==="External"?s.Target:Wy(s.Target,e);r[l]=o,n[s.Id]=o}}),r["!id"]=n,r}function fv(t){var e=[Hi,Fr("Relationships",null,{xmlns:wo.RELS})];return wi(t["!id"]).forEach(function(r){e[e.length]=Fr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function $a(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Jn.HLINK,Jn.XPATH,Jn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}var NFe="application/vnd.oasis.opendocument.spreadsheet";function CFe(t,e){for(var r=Y6(t),n,a;n=B2.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Sn(n[0],!1),a.path=="/"&&a.type!==NFe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function _Fe(t){var e=[Hi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function c$(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function EFe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function SFe(t){var e=[Hi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(c$(t[r][0],t[r][1])),e.push(EFe("",t[r][0]));return e.push(c$("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Yne(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+DS.version+"</meta:generator></office:meta></office:document-meta>"}var bd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],IFe=function(){for(var t=new Array(bd.length),e=0;e<bd.length;++e){var r=bd[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Jne(t){var e={};t=ts(t);for(var r=0;r<bd.length;++r){var n=bd[r],a=t.match(IFe[r]);a!=null&&a.length>0&&(e[n[1]]=ga(a[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=Ps(e[n[1]]))}return e}function j5(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=za(e),n[n.length]=r?Fr(t,e,r):yl(t,e))}function Zne(t,e){var r=e||{},n=[Hi,Fr("cp:coreProperties",null,{"xmlns:cp":wo.CORE_PROPS,"xmlns:dc":wo.dc,"xmlns:dcterms":wo.dcterms,"xmlns:dcmitype":wo.dcmitype,"xmlns:xsi":wo.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&j5("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:zk(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&j5("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:zk(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=bd.length;++s){var o=bd[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&j5(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Rp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],eae=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function tae(t,e,r,n){var a=[];if(typeof t=="string")a=ZH(t,n);else for(var s=0;s<t.length;++s)a=a.concat(t[s].map(function(d){return{v:d}}));var o=typeof e=="string"?ZH(e,n).map(function(d){return d.v}):e,l=0,c=0;if(o.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function jFe(t,e,r){var n={};return e||(e={}),t=ts(t),Rp.forEach(function(a){var s=(t.match(j2(a[0]))||[])[1];switch(a[2]){case"string":s&&(e[a[1]]=ga(s));break;case"bool":e[a[1]]=s==="true";break;case"raw":var o=t.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&tae(n.HeadingPairs,n.TitlesOfParts,e,r),e}function rae(t){var e=[],r=Fr;return t||(t={}),t.Application="SheetJS",e[e.length]=Hi,e[e.length]=Fr("Properties",null,{xmlns:wo.EXT_PROPS,"xmlns:vt":wo.vt}),Rp.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=za(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+za(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var PFe=/<[^>]+>[^<]*/g;function BFe(t,e){var r={},n="",a=t.match(PFe);if(a)for(var s=0;s!=a.length;++s){var o=a[s],l=Sn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=ga(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=ga(d);break;case"bool":r[n]=Es(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ps(d);break;case"cy":case"error":r[n]=ga(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(e.WTF)throw new Error(o)}}}return r}function nae(t){var e=[Hi,Fr("Properties",null,{xmlns:wo.CUST_PROPS,"xmlns:vt":wo.vt})];if(!t)return e.join("");var r=1;return wi(t).forEach(function(a){++r,e[e.length]=Fr("property",Uke(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:za(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Zk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},P5;function TFe(t,e,r){P5||(P5=rP(Zk)),e=P5[e]||e,t[e]=r}function kFe(t,e){var r=[];return wi(Zk).map(function(n){for(var a=0;a<bd.length;++a)if(bd[a][1]==n)return bd[a];for(a=0;a<Rp.length;++a)if(Rp[a][1]==n)return Rp[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(yl(Zk[n[1]]||n[1],a))}}),Fr("DocumentProperties",r.join(""),{xmlns:xu.o})}function FFe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&wi(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<bd.length;++o)if(s==bd[o][1])return;for(o=0;o<Rp.length;++o)if(s==Rp[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Fr(WH(s),l,{"dt:dt":c}))}}),e&&wi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Fr(WH(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+xu.o+'">'+a.join("")+"</"+n+">"}function lR(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function OFe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=ir(8);return o.write_shift(4,n),o.write_shift(4,a),o}function aae(t,e,r){var n=t.l,a=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return a}function sae(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function iae(t,e,r){return e===31?sae(t):aae(t,e,r)}function eF(t,e,r){return iae(t,e,r===!1?0:4)}function DFe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return iae(t,e,0)}function RFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var a=t.l;r[n]=t.read_shift(0,"lpwstr").replace(yc,""),t.l-a&2&&(t.l+=2)}return r}function MFe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(yc,"");return r}function LFe(t){var e=t.l,r=GS(t,zne);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=GS(t,Uc);return[r,n]}function UFe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(LFe(t));return r}function u$(t,e){for(var r=t.read_shift(4),n={},a=0;a!=r;++a){var s=t.read_shift(4),o=t.read_shift(4);n[s]=t.read_shift(o,e===1200?"utf16le":"utf8").replace(yc,"").replace(zy,"!"),e===1200&&o%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function oae(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function QFe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function GS(t,e,r){var n=t.read_shift(2),a,s=r||{};if(t.l+=2,e!==o$&&n!==e&&xFe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===o$?n:e){case 2:return a=t.read_shift(2,"i"),s.raw||(t.l+=2),a;case 3:return a=t.read_shift(4,"i"),a;case 11:return t.read_shift(4)!==0;case 19:return a=t.read_shift(4),a;case 30:return aae(t,n,4).replace(yc,"");case 31:return sae(t);case 64:return lR(t);case 65:return oae(t);case 71:return QFe(t);case 80:return eF(t,n,!s.raw).replace(yc,"");case 81:return DFe(t,n).replace(yc,"");case 4108:return UFe(t);case 4126:case 4127:return n==4127?RFe(t):MFe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function d$(t,e){var r=ir(4),n=ir(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ir(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=OFe(e);break;case 31:case 80:for(n=ir(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Go([r,n])}function f$(t,e){var r=t.l,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0,l=0,c=-1,u={};for(o=0;o!=a;++o){var d=t.read_shift(4),f=t.read_shift(4);s[o]=[d,f+r]}s.sort(function(y,b){return y[1]-b[1]});var A={};for(o=0;o!=a;++o){if(t.l!==s[o][1]){var h=!0;if(o>0&&e)switch(e[s[o-1][0]].t){case 2:t.l+2===s[o][1]&&(t.l+=2,h=!1);break;case 80:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break;case 4108:t.l<=s[o][1]&&(t.l=s[o][1],h=!1);break}if((!e||o==0)&&t.l<=s[o][1]&&(h=!1,t.l=s[o][1]),h)throw new Error("Read Error: Expected address "+s[o][1]+" at "+t.l+" :"+o)}if(e){var m=e[s[o][0]];if(A[m.n]=GS(t,m.t,{raw:!0}),m.p==="version"&&(A[m.n]=String(A[m.n]>>16)+"."+("0000"+String(A[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(A[m.n]){case 0:A[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:nf(l=A[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+A[m.n])}}else if(s[o][0]===1){if(l=A.CodePage=GS(t,iR),nf(l),c!==-1){var p=t.l;t.l=s[c][1],u=u$(t,l),t.l=p}}else if(s[o][0]===0){if(l===0){c=o,t.l=s[o+1][1];continue}u=u$(t,l)}else{var x=u[s[o][0]],v;switch(t[t.l]){case 65:t.l+=4,v=oae(t);break;case 30:t.l+=4,v=eF(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=eF(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=Pi(t,4);break;case 64:t.l+=4,v=Ps(lR(t));break;default:throw new Error("unparsed value: "+t[t.l])}A[x]=v}}return t.l=r+n,A}var lae=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function VFe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function h$(t,e,r){var n=ir(8),a=[],s=[],o=8,l=0,c=ir(8),u=ir(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=ir(8),u.write_shift(4,0),a.unshift(u);var d=[ir(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var f=t[l][0];for(c=ir(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Go(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(lae.indexOf(t[l][0])>-1||eae.indexOf(t[l][0])>-1)&&t[l][1]!=null){var A=t[l][1],h=0;if(e){h=+e[t[l][0]];var m=r[h];if(m.p=="version"&&typeof A=="string"){var p=A.split(".");A=(+p[0]<<16)+(+p[1]||0)}c=d$(m.t,A)}else{var x=VFe(A);x==-1&&(x=31,A=String(A)),c=d$(x,A)}s.push(c),u=ir(8),u.write_shift(4,e?h:2+l),a.push(u),o+=8+c.length}var v=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,v),v+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Go([n].concat(a).concat(s))}function A$(t,e,r){var n=t.content;if(!n)return{};xl(n,0);var a,s,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==gn.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),c=n.read_shift(4));var f=f$(n,e),A={SystemIdentifier:u};for(var h in f)A[h]=f[h];if(A.FMTID=s,a===1)return A;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=f$(n,null)}catch{}for(h in m)A[h]=m[h];return A.FMTID=[s,o],A}function m$(t,e,r,n,a,s){var o=ir(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,gn.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=h$(t,r,n);if(l.push(c),a){var u=h$(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Go(l)}function h0(t,e){return t.read_shift(e),null}function HFe(t,e){e||(e=ir(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function $Fe(t,e,r){for(var n=[],a=t.l+e;t.l<a;)n.push(r(t,a-t.l));if(a!==t.l)throw new Error("Slurp error");return n}function Pi(t,e){return t.read_shift(e)===1}function Ac(t,e){return e||(e=ir(2)),e.write_shift(2,+!!t),e}function Xi(t){return t.read_shift(2,"u")}function od(t,e){return e||(e=ir(2)),e.write_shift(2,t),e}function cae(t,e){return $Fe(t,e,Xi)}function GFe(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function uae(t,e,r){return r||(r=ir(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Ow(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function KFe(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,a=r&8,s=1+(r&1),o=0,l,c={};a&&(o=t.read_shift(2)),n&&(l=t.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return a&&(t.l+=4*o),n&&(t.l+=l),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function qFe(t){var e=t.t||"",r=ir(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ir(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Go(a)}function ug(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function Dw(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):ug(t,n,r)}function Rg(t,e,r){if(r.biff>5)return Dw(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function dae(t,e,r){return r||(r=ir(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function zFe(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function WFe(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var a=t.read_shift((n?e-24:e)>>1,"utf16le").replace(yc,"");return n&&(t.l+=24),a}function XFe(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=t.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=t.read_shift(s>>1,"utf16le").replace(yc,"");return r+o}function YFe(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return WFe(t);case"0303000000000000c000000000000046":return XFe(t);default:throw new Error("Unsupported Moniker "+r)}}function XC(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(yc,""):"";return r}function p$(t,e){e||(e=ir(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function JFe(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=t.read_shift(2);t.l+=2;var s,o,l,c,u="",d,f;a&16&&(s=XC(t,r-t.l)),a&128&&(o=XC(t,r-t.l)),(a&257)===257&&(l=XC(t,r-t.l)),(a&257)===1&&(c=YFe(t,r-t.l)),a&8&&(u=XC(t,r-t.l)),a&32&&(d=t.read_shift(16)),a&64&&(f=lR(t)),t.l=r;var A=o||l||c||"";A&&u&&(A+="#"+u),A||(A="#"+u),a&2&&A.charAt(0)=="/"&&A.charAt(1)!="/"&&(A="file://"+A);var h={Target:A};return d&&(h.guid=d),f&&(h.time=f),s&&(h.Tooltip=s),h}function ZFe(t){var e=ir(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),p$(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&p$(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function fae(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1);return[e,r,n,a]}function hae(t,e){var r=fae(t);return r[3]=0,r}function hh(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function dg(t,e,r,n){return n||(n=ir(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function eOe(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function tOe(t,e,r){return e===0?"":Rg(t,e,r)}function rOe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function Aae(t){var e=t.read_shift(2),r=sR(t);return[e,r]}function nOe(t,e,r){t.l+=4,e-=4;var n=t.l+e,a=Ow(t,e,r),s=t.read_shift(2);if(n-=t.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return t.l+=s,a}function sP(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function mae(t,e){return e||(e=ir(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function pae(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),a=t.read_shift(1);return{s:{c:n,r:e},e:{c:a,r}}}var aOe=pae;function gae(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function sOe(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function iOe(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Rl(t){t.l+=2,t.l+=t.read_shift(2)}var oOe={0:Rl,4:Rl,5:Rl,6:Rl,7:iOe,8:Rl,9:Rl,10:Rl,11:Rl,12:Rl,13:sOe,14:Rl,15:Rl,16:Rl,17:Rl,18:Rl,19:Rl,20:Rl,21:gae};function lOe(t,e){for(var r=t.l+e,n=[];t.l<r;){var a=t.read_shift(2);t.l-=2;try{n.push(oOe[a](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function YC(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function cR(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=ir(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function cOe(t,e){return e===0||t.read_shift(2),1200}function uOe(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,a=Rg(t,0,r);return t.read_shift(e+n-t.l),a}function dOe(t,e){var r=!e||e.biff==8,n=ir(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function fOe(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function hOe(t,e,r){var n=t.read_shift(4),a=t.read_shift(1)&3,s=t.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var o=Ow(t,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:s,name:o}}function AOe(t,e){var r=!e||e.biff>=8?2:1,n=ir(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function mOe(t,e){for(var r=t.l+e,n=t.read_shift(4),a=t.read_shift(4),s=[],o=0;o!=a&&t.l<r;++o)s.push(KFe(t));return s.Count=n,s.Unique=a,s}function pOe(t,e){var r=ir(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=qFe(t[a]);var s=Go([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function gOe(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function xOe(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function vOe(t){var e=eOe(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function yOe(t){return t.read_shift(2),t.read_shift(4)}function g$(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var a=t.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function bOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,a],Flags:s,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function wOe(){var t=ir(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function NOe(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function COe(t){var e=ir(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function _Oe(){}function EOe(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=Ow(t,0,r),n}function SOe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=ir(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function IOe(t){var e=hh(t);return e.isst=t.read_shift(4),e}function jOe(t,e,r,n){var a=ir(10);return dg(t,e,n,a),a.write_shift(4,r),a}function POe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,a=hh(t);r.biff==2&&t.l++;var s=Dw(t,n-t.l,r);return a.val=s,a}function BOe(t,e,r,n,a){var s=!a||a.biff==8,o=ir(8+ +s+(1+s)*r.length);return dg(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function TOe(t,e,r){var n=t.read_shift(2),a=Rg(t,0,r);return[n,a]}function kOe(t,e,r,n){var a=r&&r.biff==5;n||(n=ir(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var FOe=Rg;function x$(t,e,r){var n=t.l+e,a=r.biff==8||!r.biff?4:2,s=t.read_shift(a),o=t.read_shift(a),l=t.read_shift(2),c=t.read_shift(2);return t.l=n,{s:{r:s,c:l},e:{r:o,c}}}function OOe(t,e){var r=e.biff==8||!e.biff?4:2,n=ir(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function DOe(t){var e=t.read_shift(2),r=t.read_shift(2),n=Aae(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function ROe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(Aae(t));if(t.l!==r)throw new Error("MulRK read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:s}}function MOe(t,e){for(var r=t.l+e-2,n=t.read_shift(2),a=t.read_shift(2),s=[];t.l<r;)s.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var o=t.read_shift(2);if(s.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:s}}function LOe(t,e,r,n){var a={},s=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return a.patternType=vFe[l>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function UOe(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=LOe(t,e,n.fStyle,r),n}function v$(t,e,r,n){var a=r&&r.biff==5;n||(n=ir(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function QOe(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function VOe(t){var e=ir(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function y$(t,e,r){var n=hh(t);(r.biff==2||e==9)&&++t.l;var a=GFe(t);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function HOe(t,e,r,n,a,s){var o=ir(8);return dg(t,e,n,o),uae(r,s,o),o}function $Oe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=hh(t),a=zl(t);return n.val=a,n}function GOe(t,e,r,n){var a=ir(14);return dg(t,e,n,a),cg(r,a),a}var b$=tOe;function KOe(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var o=ug(t,s),l=[];n>t.l;)l.push(Dw(t));return[s,a,o,l]}function w$(t,e,r){var n=t.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=nOe(t,e-2,r)),s.body=a||t.read_shift(e-2),typeof a=="string"&&(s.Name=a),s}var qOe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function N$(t,e,r){var n=t.l+e,a=t.read_shift(2),s=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=ug(t,o,r);a&32&&(u=qOe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var f=n==t.l||l===0||!(d>0)?[]:l8e(t,d,r,l);return{chKey:s,Name:u,itab:c,rgce:f}}function xae(t,e,r){if(r.biff<8)return zOe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(rOe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function zOe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Ow(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function WOe(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),a=t.read_shift(2),s=ug(t,n,r),o=ug(t,a,r);return[s,o]}function XOe(t,e,r){var n=pae(t);t.l++;var a=t.read_shift(1);return e-=8,[c8e(t,e,r),a,n]}function C$(t,e,r){var n=aOe(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,i8e(t,e,r)]}function YOe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function JOe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2),o=t.read_shift(2),l=Rg(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:a},l,o,s]}}function ZOe(t,e,r){return JOe(t,e,r)}function eDe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(sP(t));return r}function tDe(t){var e=ir(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)mae(t[r],e);return e}function rDe(t,e,r){if(r&&r.biff<8)return aDe(t,e,r);var n=gae(t),a=lOe(t,e-22,n[1]);return{cmo:n,ft:a}}var nDe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var a=t.read_shift(1);return t.l+=a,t.l=r,{fmt:n}}};function aDe(t,e,r){t.l+=4;var n=t.read_shift(2),a=t.read_shift(2),s=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var o=[];return o.push((nDe[n]||Zl)(t,e,r)),{cmo:[a,n,s],ft:o}}function sDe(t,e,r){var n=t.l,a="";try{t.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(s)==-1?t.l+=6:o=zFe(t,6,r);var l=t.read_shift(2);t.read_shift(2),Xi(t,2);var c=t.read_shift(2);t.l+=c;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],f=ug(t,t.lens[u+1]-t.lens[u]-1);if(a+=f,a.length>=(d?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return t.l=n+e,{t:a}}catch{return t.l=n+e,{t:a}}}function iDe(t,e){var r=sP(t);t.l+=16;var n=JFe(t,e-24);return[r,n]}function oDe(t){var e=ir(24),r=ni(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Go([e,ZFe(t[1])])}function lDe(t,e){t.read_shift(2);var r=sP(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(yc,""),[r,n]}function cDe(t){var e=t[1].Tooltip,r=ir(10+2*(e.length+1));r.write_shift(2,2048);var n=ni(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function uDe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=l$[r]||r,r=t.read_shift(2),e[1]=l$[r]||r,e}function dDe(t){return t||(t=ir(4)),t.write_shift(2,1),t.write_shift(2,1),t}function fDe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(hae(t));return r}function hDe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(hae(t));return r}function ADe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function vae(t,e,r){if(!r.cellStyles)return Zl(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function mDe(t,e){var r=ir(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function pDe(t,e){var r={};return e<32||(t.l+=16,r.header=zl(t),r.footer=zl(t),t.l+=2),r}function gDe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var a=t.read_shift(1);return t.l+=3,a&16&&(n.area=!0),n}function xDe(t){for(var e=ir(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var vDe=hh,yDe=cae,bDe=Dw;function wDe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,a}function NDe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=hh(t);++t.l;var a=Rg(t,e-7,r);return n.t="str",n.val=a,n}function CDe(t){var e=hh(t);++t.l;var r=zl(t);return e.t="n",e.val=r,e}function _De(t,e,r){var n=ir(15);return Uw(n,t,e),n.write_shift(8,r,"f"),n}function EDe(t){var e=hh(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function SDe(t,e,r){var n=ir(9);return Uw(n,t,e),n.write_shift(2,r),n}function IDe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function jDe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function PDe(t,e,r){var n=t.l+e,a=hh(t),s=t.read_shift(2),o=ug(t,s,r);return t.l=n,a.t="str",a.val=o,a}var BDe=[2,3,48,49,131,139,140,245],tF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=rP({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=wm(1);switch(c.type){case"base64":d=yu(ku(l));break;case"binary":d=yu(l);break;case"buffer":case"array":d=l;break}xl(d,0);var f=d.read_shift(1),A=!!(f&136),h=!1,m=!1;switch(f){case 2:break;case 3:break;case 48:h=!0,A=!0;break;case 49:h=!0,A=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var p=0,x=521;f==2&&(p=d.read_shift(2)),d.l+=3,f!=2&&(p=d.read_shift(4)),p>1048576&&(p=1e6),f!=2&&(x=d.read_shift(2));var v=d.read_shift(2),y=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(y=t[d[d.l]]),d.l+=1,d.l+=2),m&&(d.l+=36);for(var b=[],w={},j=Math.min(d.length,f==2?521:x-10-(h?264:0)),I=m?32:11;d.l<j&&d[d.l]!=13;)switch(w={},w.name=E2.utils.decode(y,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,w.type=String.fromCharCode(d.read_shift(1)),f!=2&&!m&&(w.offset=d.read_shift(4)),w.len=d.read_shift(1),f==2&&(w.offset=d.read_shift(2)),w.dec=d.read_shift(1),w.name.length&&b.push(w),f!=2&&(d.l+=m?13:14),w.type){case"B":(!h||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(d[d.l]!==13&&(d.l=x-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=x;var _=0,S=0;for(u[0]=[],S=0;S!=b.length;++S)u[0][S]=b[S].name;for(;p-- >0;){if(d[d.l]===42){d.l+=v;continue}for(++d.l,u[++_]=[],S=0,S=0;S!=b.length;++S){var E=d.slice(d.l,d.l+b[S].len);d.l+=b[S].len,xl(E,0);var F=E2.utils.decode(y,E);switch(b[S].type){case"C":F.trim().length&&(u[_][S]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[_][S]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[_][S]=F;break;case"F":u[_][S]=parseFloat(F.trim());break;case"+":case"I":u[_][S]=m?E.read_shift(-4,"i")^2147483648:E.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[_][S]=!0;break;case"N":case"F":u[_][S]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[_][S]="##MEMO##"+(m?parseInt(F.trim(),10):E.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[_][S]=+F||0);break;case"@":u[_][S]=new Date(E.read_shift(-8,"f")-621356832e5);break;case"T":u[_][S]=new Date((E.read_shift(4)-2440588)*864e5+E.read_shift(4));break;case"Y":u[_][S]=E.read_shift(4,"i")/1e4+E.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[_][S]=-E.read_shift(-8,"f");break;case"B":if(h&&b[S].len==8){u[_][S]=E.read_shift(8,"f");break}case"G":case"P":E.l+=b[S].len;break;case"0":if(b[S].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[S].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=x1(r(l,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(l,c){try{return Dm(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&nf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Yc(),f=WS(l,{header:1,raw:!0,cellDates:!0}),A=f[0],h=f.slice(1),m=l["!cols"]||[],p=0,x=0,v=0,y=1;for(p=0;p<A.length;++p){if(((m[p]||{}).DBF||{}).name){A[p]=m[p].DBF.name,++v;continue}if(A[p]!=null){if(++v,typeof A[p]=="number"&&(A[p]=A[p].toString(10)),typeof A[p]!="string")throw new Error("DBF Invalid column name "+A[p]+" |"+typeof A[p]+"|");if(A.indexOf(A[p])!==p){for(x=0;x<1024;++x)if(A.indexOf(A[p]+"_"+x)==-1){A[p]+="_"+x;break}}}}var b=xa(l["!ref"]),w=[],j=[],I=[];for(p=0;p<=b.e.c-b.s.c;++p){var _="",S="",E=0,F=[];for(x=0;x<h.length;++x)h[x][p]!=null&&F.push(h[x][p]);if(F.length==0||A[p]==null){w[p]="?";continue}for(x=0;x<F.length;++x){switch(typeof F[x]){case"number":S="B";break;case"string":S="C";break;case"boolean":S="L";break;case"object":S=F[x]instanceof Date?"D":"C";break;default:S="C"}E=Math.max(E,String(F[x]).length),_=_&&_!=S?"C":S}E>250&&(E=250),S=((m[p]||{}).DBF||{}).type,S=="C"&&m[p].DBF.len>E&&(E=m[p].DBF.len),_=="B"&&S=="N"&&(_="N",I[p]=m[p].DBF.dec,E=m[p].DBF.len),j[p]=_=="C"||S=="N"?E:s[_]||0,y+=j[p],w[p]=_}var k=d.next(32);for(k.write_shift(4,318902576),k.write_shift(4,h.length),k.write_shift(2,296+32*v),k.write_shift(2,y),p=0;p<4;++p)k.write_shift(4,0);for(k.write_shift(4,0|(+e[lne]||3)<<8),p=0,x=0;p<A.length;++p)if(A[p]!=null){var B=d.next(32),D=(A[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,D,"sbcs"),B.write_shift(1,w[p]=="?"?"C":w[p],"sbcs"),B.write_shift(4,x),B.write_shift(1,j[p]||s[w[p]]||0),B.write_shift(1,I[p]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),x+=j[p]||s[w[p]]||0}var X=d.next(264);for(X.write_shift(4,13),p=0;p<65;++p)X.write_shift(4,0);for(p=0;p<h.length;++p){var he=d.next(y);for(he.write_shift(1,0),x=0;x<A.length;++x)if(A[x]!=null)switch(w[x]){case"L":he.write_shift(1,h[p][x]==null?63:h[p][x]?84:70);break;case"B":he.write_shift(8,h[p][x]||0,"f");break;case"N":var Ae="0";for(typeof h[p][x]=="number"&&(Ae=h[p][x].toFixed(I[x]||0)),v=0;v<j[x]-Ae.length;++v)he.write_shift(1,32);he.write_shift(1,Ae,"sbcs");break;case"D":h[p][x]?(he.write_shift(4,("0000"+h[p][x].getFullYear()).slice(-4),"sbcs"),he.write_shift(2,("00"+(h[p][x].getMonth()+1)).slice(-2),"sbcs"),he.write_shift(2,("00"+h[p][x].getDate()).slice(-2),"sbcs")):he.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(h[p][x]!=null?h[p][x]:"").slice(0,j[x]);for(he.write_shift(1,fe,"sbcs"),v=0;v<j[x]-fe.length;++v)he.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),yae=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+wi(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(A,h){var m=t[h];return typeof m=="number"?OH(m):m},n=function(A,h,m){var p=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return p==59?A:OH(p)};t["|"]=254;function a(A,h){switch(h.type){case"base64":return s(ku(A),h);case"binary":return s(A,h);case"buffer":return s(Kn&&Buffer.isBuffer(A)?A.toString("binary"):Om(A),h);case"array":return s(lg(A),h)}throw new Error("Unrecognized type "+h.type)}function s(A,h){var m=A.split(/[\n\r]+/),p=-1,x=-1,v=0,y=0,b=[],w=[],j=null,I={},_=[],S=[],E=[],F=0,k;for(+h.codepage>=0&&nf(+h.codepage);v!==m.length;++v){F=0;var B=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),D=B.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),X=D[0],he;if(B.length>0)switch(X){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&w.push(B.slice(3).replace(/;;/g,";"));break;case"C":var Ae=!1,fe=!1,me=!1,ne=!1,Pe=-1,Te=-1;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"A":break;case"X":x=parseInt(D[y].slice(1))-1,fe=!0;break;case"Y":for(p=parseInt(D[y].slice(1))-1,fe||(x=0),k=b.length;k<=p;++k)b[k]=[];break;case"K":he=D[y].slice(1),he.charAt(0)==='"'?he=he.slice(1,he.length-1):he==="TRUE"?he=!0:he==="FALSE"?he=!1:isNaN(df(he))?isNaN(Dv(he).getDate())||(he=Ps(he)):(he=df(he),j!==null&&p1(j)&&(he=aP(he))),Ae=!0;break;case"E":ne=!0;var O=hv(D[y].slice(1),{r:p,c:x});b[p][x]=[b[p][x],O];break;case"S":me=!0,b[p][x]=[b[p][x],"S5S"];break;case"G":break;case"R":Pe=parseInt(D[y].slice(1))-1;break;case"C":Te=parseInt(D[y].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}if(Ae&&(b[p][x]&&b[p][x].length==2?b[p][x][0]=he:b[p][x]=he,j=null),me){if(ne)throw new Error("SYLK shared formula cannot have own formula");var K=Pe>-1&&b[Pe][Te];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");b[p][x][1]=Mae(K[1],{r:p-Pe,c:x-Te})}break;case"F":var q=0;for(y=1;y<D.length;++y)switch(D[y].charAt(0)){case"X":x=parseInt(D[y].slice(1))-1,++q;break;case"Y":for(p=parseInt(D[y].slice(1))-1,k=b.length;k<=p;++k)b[k]=[];break;case"M":F=parseInt(D[y].slice(1))/20;break;case"F":break;case"G":break;case"P":j=w[parseInt(D[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(E=D[y].slice(1).split(" "),k=parseInt(E[0],10);k<=parseInt(E[1],10);++k)F=parseInt(E[2],10),S[k-1]=F===0?{hidden:!0}:{wch:F},Nm(S[k-1]);break;case"C":x=parseInt(D[y].slice(1))-1,S[x]||(S[x]={});break;case"R":p=parseInt(D[y].slice(1))-1,_[p]||(_[p]={}),F>0?(_[p].hpt=F,_[p].hpx=Mv(F)):F===0&&(_[p].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}q<1&&(j=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+B)}}return _.length>0&&(I["!rows"]=_),S.length>0&&(I["!cols"]=S),h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),[b,I]}function o(A,h){var m=a(A,h),p=m[0],x=m[1],v=x1(p,h);return wi(x).forEach(function(y){v[y]=x[y]}),v}function l(A,h){return Dm(o(A,h),h)}function c(A,h,m,p){var x="C;Y"+(m+1)+";X"+(p+1)+";K";switch(A.t){case"n":x+=A.v||0,A.f&&!A.F&&(x+=";E"+mR(A.f,{r:m,c:p}));break;case"b":x+=A.v?"TRUE":"FALSE";break;case"e":x+=A.w||A.v;break;case"d":x+='"'+(A.w||A.v)+'"';break;case"s":x+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function u(A,h){h.forEach(function(m,p){var x="F;W"+(p+1)+" "+(p+1)+" ";m.hidden?x+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=F2(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=O2(m.wpx)),typeof m.wch=="number"&&(x+=Math.round(m.wch))),x.charAt(x.length-1)!=" "&&A.push(x)})}function d(A,h){h.forEach(function(m,p){var x="F;";m.hidden?x+="M0;":m.hpt?x+="M"+20*m.hpt+";":m.hpx&&(x+="M"+20*D2(m.hpx)+";"),x.length>2&&A.push(x+"R"+(p+1))})}function f(A,h){var m=["ID;PWXL;N;E"],p=[],x=xa(A["!ref"]),v,y=Array.isArray(A),b=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),A["!cols"]&&u(m,A["!cols"]),A["!rows"]&&d(m,A["!rows"]),m.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var w=x.s.r;w<=x.e.r;++w)for(var j=x.s.c;j<=x.e.c;++j){var I=Cn({r:w,c:j});v=y?(A[w]||[])[j]:A[I],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,A,w,j))}return m.join(b)+b+p.join(b)+b+"E"+b}return{to_workbook:l,to_sheet:o,from_sheet:f}}(),bae=function(){function t(s,o){switch(o.type){case"base64":return e(ku(s),o);case"binary":return e(s,o);case"buffer":return e(Kn&&Buffer.isBuffer(s)?s.toString("binary"):Om(s),o);case"array":return e(lg(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==l.length;++d){if(l[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var A=l[d].trim().split(","),h=A[0],m=A[1];++d;for(var p=l[d]||"";(p.match(/["]/g)||[]).length&1&&d<l.length-1;)p+=`
`+l[++d];switch(p=p.trim(),+h){case-1:if(p==="BOT"){f[++c]=[],u=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?f[c][u]=!0:p==="FALSE"?f[c][u]=!1:isNaN(df(m))?isNaN(Dv(m).getDate())?f[c][u]=m:f[c][u]=Ps(m):f[c][u]=df(m),++u;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),f[c][u++]=p!==""?p:null;break}if(p==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(s,o){return x1(t(s,o),o)}function n(s,o){return Dm(r(s,o),o)}var a=function(){var s=function(c,u,d,f,A){c.push(u),c.push(d+","+f),c.push('"'+A.replace(/"/g,'""')+'"')},o=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=xa(c["!ref"]),f,A=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var h=d.s.r;h<=d.e.r;++h){o(u,-1,0,"BOT");for(var m=d.s.c;m<=d.e.c;++m){var p=Cn({r:h,c:m});if(f=A?(c[h]||[])[m]:c[p],!f){o(u,1,0,"");continue}switch(f.t){case"n":var x=f.w;!x&&f.v!=null&&(x=f.v),x==null?f.f&&!f.F?o(u,1,0,"="+f.f):o(u,1,0,""):o(u,0,x,"V");break;case"b":o(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=_d(f.z||Nn[14],Eo(Ps(f.v)))),o(u,0,f.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var v=`\r
`,y=u.join(v);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),wae=function(){function t(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,A){for(var h=f.split(`
`),m=-1,p=-1,x=0,v=[];x!==h.length;++x){var y=h[x].trim().split(":");if(y[0]==="cell"){var b=ni(y[1]);if(v.length<=b.r)for(m=v.length;m<=b.r;++m)v[m]||(v[m]=[]);switch(m=b.r,p=b.c,y[2]){case"t":v[m][p]=t(y[3]);break;case"v":v[m][p]=+y[3];break;case"vtf":var w=y[y.length-1];case"vtc":switch(y[3]){case"nl":v[m][p]=!!+y[4];break;default:v[m][p]=+y[4];break}y[2]=="vtf"&&(v[m][p]=[v[m][p],w])}}}return A&&A.sheetRows&&(v=v.slice(0,A.sheetRows)),v}function n(f,A){return x1(r(f,A),A)}function a(f,A){return Dm(n(f,A),A)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var A=[],h=[],m,p="",x=Jc(f["!ref"]),v=Array.isArray(f),y=x.s.r;y<=x.e.r;++y)for(var b=x.s.c;b<=x.e.c;++b)if(p=Cn({r:y,c:b}),m=v?(f[y]||[])[b]:f[p],!(!m||m.v==null||m.t==="z")){switch(h=["cell",p,"t"],m.t){case"s":case"str":h.push(e(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=e(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Eo(Ps(m.v));h[2]="vtc",h[3]="nd",h[4]=""+w,h[5]=m.w||_d(m.z||Nn[14],w);break;case"e":continue}A.push(h.join(":"))}return A.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join(`
`)}function d(f){return[s,o,l,o,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Rv=function(){function t(d,f,A,h,m){m.raw?f[A][h]=d:d===""||(d==="TRUE"?f[A][h]=!0:d==="FALSE"?f[A][h]=!1:isNaN(df(d))?isNaN(Dv(d).getDate())?f[A][h]=d:f[A][h]=Ps(d):f[A][h]=df(d))}function e(d,f){var A=f||{},h=[];if(!d||d.length===0)return h;for(var m=d.split(/[\r\n]/),p=m.length-1;p>=0&&m[p].length===0;)--p;for(var x=10,v=0,y=0;y<=p;++y)v=m[y].indexOf(" "),v==-1?v=m[y].length:v++,x=Math.max(x,v);for(y=0;y<=p;++y){h[y]=[];var b=0;for(t(m[y].slice(0,x).trim(),h,y,b,A),b=1;b<=(m[y].length-x)/10+1;++b)t(m[y].slice(x+(b-1)*10,x+b*10).trim(),h,y,b,A)}return A.sheetRows&&(h=h.slice(0,A.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},A=!1,h=0,m=0;h<d.length;++h)(m=d.charCodeAt(h))==34?A=!A:!A&&m in r&&(f[m]=(f[m]||0)+1);m=[];for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h]);if(!m.length){f=n;for(h in f)Object.prototype.hasOwnProperty.call(f,h)&&m.push([f[h],h])}return m.sort(function(p,x){return p[0]-x[0]||n[p[1]]-n[x[1]]}),r[m.pop()[1]]||44}function s(d,f){var A=f||{},h="",m=A.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(h=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(h=d.charAt(4),d=d.slice(6)):h=a(d.slice(0,1024)):A&&A.FS?h=A.FS:h=a(d.slice(0,1024));var x=0,v=0,y=0,b=0,w=0,j=h.charCodeAt(0),I=!1,_=0,S=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var E=A.dateNF!=null?gke(A.dateNF):null;function F(){var k=d.slice(b,w),B={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)B.t="z";else if(A.raw)B.t="s",B.v=k;else if(k.trim().length===0)B.t="s",B.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(B.t="s",B.v=k.slice(2,-1).replace(/""/g,'"')):KRe(k)?(B.t="n",B.f=k.slice(1)):(B.t="s",B.v=k);else if(k=="TRUE")B.t="b",B.v=!0;else if(k=="FALSE")B.t="b",B.v=!1;else if(!isNaN(y=df(k)))B.t="n",A.cellText!==!1&&(B.w=k),B.v=y;else if(!isNaN(Dv(k).getDate())||E&&k.match(E)){B.z=A.dateNF||Nn[14];var D=0;E&&k.match(E)&&(k=xke(k,A.dateNF,k.match(E)||[]),D=1),A.cellDates?(B.t="d",B.v=Ps(k,D)):(B.t="n",B.v=Eo(Ps(k,D))),A.cellText!==!1&&(B.w=_d(B.z,B.v instanceof Date?Eo(B.v):B.v)),A.cellNF||delete B.z}else B.t="s",B.v=k;if(B.t=="z"||(A.dense?(m[x]||(m[x]=[]),m[x][v]=B):m[Cn({c:v,r:x})]=B),b=w+1,S=d.charCodeAt(b),p.e.c<v&&(p.e.c=v),p.e.r<x&&(p.e.r=x),_==j)++v;else if(v=0,++x,A.sheetRows&&A.sheetRows<=x)return!0}e:for(;w<d.length;++w)switch(_=d.charCodeAt(w)){case 34:S===34&&(I=!I);break;case j:case 10:case 13:if(!I&&F())break e;break}return w-b>0&&F(),m["!ref"]=Ln(p),m}function o(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):x1(e(d,f),f)}function l(d,f){var A="",h=f.type=="string"?[0,0,0,0]:NR(d,f);switch(f.type){case"base64":A=ku(d);break;case"binary":A=d;break;case"buffer":f.codepage==65001?A=d.toString("utf8"):f.codepage&&typeof E2<"u"||(A=Kn&&Buffer.isBuffer(d)?d.toString("binary"):Om(d));break;case"array":A=lg(d);break;case"string":A=d;break;default:throw new Error("Unrecognized type "+f.type)}return h[0]==239&&h[1]==187&&h[2]==191?A=ts(A.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?A=ts(A):f.type=="binary"&&typeof E2<"u",A.slice(0,19)=="socialcalc:version:"?wae.to_sheet(f.type=="string"?A:ts(A),f):o(A,f)}function c(d,f){return Dm(l(d,f),f)}function u(d){for(var f=[],A=xa(d["!ref"]),h,m=Array.isArray(d),p=A.s.r;p<=A.e.r;++p){for(var x=[],v=A.s.c;v<=A.e.c;++v){var y=Cn({r:p,c:v});if(h=m?(d[p]||[])[v]:d[y],!h||h.v==null){x.push("          ");continue}for(var b=(h.w||(pA(h),h.w)||"").slice(0,10);b.length<10;)b+=" ";x.push(b+(v===0?" ":""))}f.push(x.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}();function TDe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var a=yae.to_workbook(t,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Rv.to_workbook(t,e)}}var Mp=function(){function t(O,K,q){if(O){xl(O,O.l||0);for(var U=q.Enum||Pe;O.l<O.length;){var W=O.read_shift(2),J=U[W]||U[65535],M=O.read_shift(2),H=O.l+M,te=J.f&&J.f(O,M,q);if(O.l=H,K(te,J,W))return}}}function e(O,K){switch(K.type){case"base64":return r(yu(ku(O)),K);case"binary":return r(yu(O),K);case"buffer":case"array":return r(O,K)}throw"Unsupported type "+K.type}function r(O,K){if(!O)return O;var q=K||{},U=q.dense?[]:{},W="Sheet1",J="",M=0,H={},te=[],ve=[],Q={s:{r:0,c:0},e:{r:0,c:0}},Ke=q.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)q.Enum=Pe,t(O,function(ce,be,Ve){switch(Ve){case 0:q.vers=ce,ce>=4096&&(q.qpro=!0);break;case 6:Q=ce;break;case 204:ce&&(J=ce);break;case 222:J=ce;break;case 15:case 51:q.qpro||(ce[1].v=ce[1].v.slice(1));case 13:case 14:case 16:Ve==14&&(ce[2]&112)==112&&(ce[2]&15)>1&&(ce[2]&15)<15&&(ce[1].z=q.dateNF||Nn[14],q.cellDates&&(ce[1].t="d",ce[1].v=aP(ce[1].v))),q.qpro&&ce[3]>M&&(U["!ref"]=Ln(Q),H[W]=U,te.push(W),U=q.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},M=ce[3],W=J||"Sheet"+(M+1),J="");var We=q.dense?(U[ce[0].r]||[])[ce[0].c]:U[Cn(ce[0])];if(We){We.t=ce[1].t,We.v=ce[1].v,ce[1].z!=null&&(We.z=ce[1].z),ce[1].f!=null&&(We.f=ce[1].f);break}q.dense?(U[ce[0].r]||(U[ce[0].r]=[]),U[ce[0].r][ce[0].c]=ce[1]):U[Cn(ce[0])]=ce[1];break}},q);else if(O[2]==26||O[2]==14)q.Enum=Te,O[2]==14&&(q.qpro=!0,O.l=0),t(O,function(ce,be,Ve){switch(Ve){case 204:W=ce;break;case 22:ce[1].v=ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ce[3]>M&&(U["!ref"]=Ln(Q),H[W]=U,te.push(W),U=q.dense?[]:{},Q={s:{r:0,c:0},e:{r:0,c:0}},M=ce[3],W="Sheet"+(M+1)),Ke>0&&ce[0].r>=Ke)break;q.dense?(U[ce[0].r]||(U[ce[0].r]=[]),U[ce[0].r][ce[0].c]=ce[1]):U[Cn(ce[0])]=ce[1],Q.e.c<ce[0].c&&(Q.e.c=ce[0].c),Q.e.r<ce[0].r&&(Q.e.r=ce[0].r);break;case 27:ce[14e3]&&(ve[ce[14e3][0]]=ce[14e3][1]);break;case 1537:ve[ce[0]]=ce[1],ce[0]==M&&(W=ce[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=Ln(Q),H[J||W]=U,te.push(J||W),!ve.length)return{SheetNames:te,Sheets:H};for(var ae={},ee=[],Fe=0;Fe<ve.length;++Fe)H[te[Fe]]?(ee.push(ve[Fe]||te[Fe]),ae[ve[Fe]]=H[ve[Fe]]||H[te[Fe]]):(ee.push(ve[Fe]),ae[ve[Fe]]={"!ref":"A1"});return{SheetNames:ee,Sheets:ae}}function n(O,K){var q=K||{};if(+q.codepage>=0&&nf(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Yc(),W=xa(O["!ref"]),J=Array.isArray(O),M=[];Or(U,0,s(1030)),Or(U,6,c(W));for(var H=Math.min(W.e.r,8191),te=W.s.r;te<=H;++te)for(var ve=Qi(te),Q=W.s.c;Q<=W.e.c;++Q){te===W.s.r&&(M[Q]=ri(Q));var Ke=M[Q]+ve,ae=J?(O[te]||[])[Q]:O[Ke];if(!(!ae||ae.t=="z"))if(ae.t=="n")(ae.v|0)==ae.v&&ae.v>=-32768&&ae.v<=32767?Or(U,13,h(te,Q,ae.v)):Or(U,14,p(te,Q,ae.v));else{var ee=pA(ae);Or(U,15,f(te,Q,ee.slice(0,239)))}}return Or(U,1),U.end()}function a(O,K){var q=K||{};if(+q.codepage>=0&&nf(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Yc();Or(U,0,o(O));for(var W=0,J=0;W<O.SheetNames.length;++W)(O.Sheets[O.SheetNames[W]]||{})["!ref"]&&Or(U,27,ne(O.SheetNames[W],J++));var M=0;for(W=0;W<O.SheetNames.length;++W){var H=O.Sheets[O.SheetNames[W]];if(!(!H||!H["!ref"])){for(var te=xa(H["!ref"]),ve=Array.isArray(H),Q=[],Ke=Math.min(te.e.r,8191),ae=te.s.r;ae<=Ke;++ae)for(var ee=Qi(ae),Fe=te.s.c;Fe<=te.e.c;++Fe){ae===te.s.r&&(Q[Fe]=ri(Fe));var ce=Q[Fe]+ee,be=ve?(H[ae]||[])[Fe]:H[ce];if(!(!be||be.t=="z"))if(be.t=="n")Or(U,23,F(ae,Fe,M,be.v));else{var Ve=pA(be);Or(U,22,_(ae,Fe,M,Ve.slice(0,239)))}}++M}}return Or(U,1),U.end()}function s(O){var K=ir(2);return K.write_shift(2,O),K}function o(O){var K=ir(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var q=0,U=0,W=0,J=0;J<O.SheetNames.length;++J){var M=O.SheetNames[J],H=O.Sheets[M];if(!(!H||!H["!ref"])){++W;var te=Jc(H["!ref"]);q<te.e.r&&(q=te.e.r),U<te.e.c&&(U=te.e.c)}}return q>8191&&(q=8191),K.write_shift(2,q),K.write_shift(1,W),K.write_shift(1,U),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function l(O,K,q){var U={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&q.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),K==12&&q.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),K==12&&q.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var K=ir(8);return K.write_shift(2,O.s.c),K.write_shift(2,O.s.r),K.write_shift(2,O.e.c),K.write_shift(2,O.e.r),K}function u(O,K,q){var U=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function d(O,K,q){var U=O.l+K,W=u(O,K,q);if(W[1].t="s",q.vers==20768){O.l++;var J=O.read_shift(1);return W[1].v=O.read_shift(J,"utf8"),W}return q.qpro&&O.l++,W[1].v=O.read_shift(U-O.l,"cstr"),W}function f(O,K,q){var U=ir(7+q.length);U.write_shift(1,255),U.write_shift(2,K),U.write_shift(2,O),U.write_shift(1,39);for(var W=0;W<U.length;++W){var J=q.charCodeAt(W);U.write_shift(1,J>=128?95:J)}return U.write_shift(1,0),U}function A(O,K,q){var U=u(O,K,q);return U[1].v=O.read_shift(2,"i"),U}function h(O,K,q){var U=ir(7);return U.write_shift(1,255),U.write_shift(2,K),U.write_shift(2,O),U.write_shift(2,q,"i"),U}function m(O,K,q){var U=u(O,K,q);return U[1].v=O.read_shift(8,"f"),U}function p(O,K,q){var U=ir(13);return U.write_shift(1,255),U.write_shift(2,K),U.write_shift(2,O),U.write_shift(8,q,"f"),U}function x(O,K,q){var U=O.l+K,W=u(O,K,q);if(W[1].v=O.read_shift(8,"f"),q.qpro)O.l=U;else{var J=O.read_shift(2);w(O.slice(O.l,O.l+J),W),O.l+=J}return W}function v(O,K,q){var U=K&32768;return K&=-32769,K=(U?O:0)+(K>=8192?K-16384:K),(U?"":"$")+(q?ri(K):Qi(K))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,K){xl(O,0);for(var q=[],U=0,W="",J="",M="",H="";O.l<O.length;){var te=O[O.l++];switch(te){case 0:q.push(O.read_shift(8,"f"));break;case 1:J=v(K[0].c,O.read_shift(2),!0),W=v(K[0].r,O.read_shift(2),!1),q.push(J+W);break;case 2:{var ve=v(K[0].c,O.read_shift(2),!0),Q=v(K[0].r,O.read_shift(2),!1);J=v(K[0].c,O.read_shift(2),!0),W=v(K[0].r,O.read_shift(2),!1),q.push(ve+Q+":"+J+W)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(O.read_shift(2));break;case 6:{for(var Ke="";te=O[O.l++];)Ke+=String.fromCharCode(te);q.push('"'+Ke.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:H=q.pop(),M=q.pop(),q.push(["AND","OR"][te-20]+"("+M+","+H+")");break;default:if(te<32&&b[te])H=q.pop(),M=q.pop(),q.push(M+b[te]+H);else if(y[te]){if(U=y[te][1],U==69&&(U=O[O.l++]),U>q.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+q.join("|")+"|");return}var ae=q.slice(-U);q.length-=U,q.push(y[te][0]+"("+ae.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}q.length==1?K[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function j(O){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=O.read_shift(2),K[3]=O[O.l++],K[0].c=O[O.l++],K}function I(O,K){var q=j(O);return q[1].t="s",q[1].v=O.read_shift(K-4,"cstr"),q}function _(O,K,q,U){var W=ir(6+U.length);W.write_shift(2,O),W.write_shift(1,q),W.write_shift(1,K),W.write_shift(1,39);for(var J=0;J<U.length;++J){var M=U.charCodeAt(J);W.write_shift(1,M>=128?95:M)}return W.write_shift(1,0),W}function S(O,K){var q=j(O);q[1].v=O.read_shift(2);var U=q[1].v>>1;if(q[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return q[1].v=U,q}function E(O,K){var q=j(O),U=O.read_shift(4),W=O.read_shift(4),J=O.read_shift(2);if(J==65535)return U===0&&W===3221225472?(q[1].t="e",q[1].v=15):U===0&&W===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var M=J&32768;return J=(J&32767)-16446,q[1].v=(1-M*2)*(W*Math.pow(2,J+32)+U*Math.pow(2,J)),q}function F(O,K,q,U){var W=ir(14);if(W.write_shift(2,O),W.write_shift(1,q),W.write_shift(1,K),U==0)return W.write_shift(4,0),W.write_shift(4,0),W.write_shift(2,65535),W;var J=0,M=0,H=0,te=0;return U<0&&(J=1,U=-U),M=Math.log2(U)|0,U/=Math.pow(2,M-31),te=U>>>0,te&2147483648||(U/=2,++M,te=U>>>0),U-=te,te|=2147483648,te>>>=0,U*=Math.pow(2,32),H=U>>>0,W.write_shift(4,H),W.write_shift(4,te),M+=16383+(J?32768:0),W.write_shift(2,M),W}function k(O,K){var q=E(O);return O.l+=K-14,q}function B(O,K){var q=j(O),U=O.read_shift(4);return q[1].v=U>>6,q}function D(O,K){var q=j(O),U=O.read_shift(8,"f");return q[1].v=U,q}function X(O,K){var q=D(O);return O.l+=K-10,q}function he(O,K){return O[O.l+K-1]==0?O.read_shift(K,"cstr"):""}function Ae(O,K){var q=O[O.l++];q>K-1&&(q=K-1);for(var U="";U.length<q;)U+=String.fromCharCode(O[O.l++]);return U}function fe(O,K,q){if(!(!q.qpro||K<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var W=O.read_shift(K-21,"cstr");return[U,W]}}function me(O,K){for(var q={},U=O.l+K;O.l<U;){var W=O.read_shift(2);if(W==14e3){for(q[W]=[0,""],q[W][0]=O.read_shift(2);O[O.l];)q[W][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return q}function ne(O,K){var q=ir(5+O.length);q.write_shift(2,14e3),q.write_shift(2,K);for(var U=0;U<O.length;++U){var W=O.charCodeAt(U);q[q.l++]=W>127?95:W}return q[q.l++]=0,q}var Pe={0:{n:"BOF",f:Xi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:A},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:he},222:{n:"SHEETNAMELP",f:Ae},65535:{n:""}},Te={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:E},24:{n:"NUMBER18",f:S},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:me},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:X},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:he},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}();function kDe(t){var e={},r=t.match(tc),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Sn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=U6[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return e}var FDe=function(){var t=j2("t"),e=j2("rPr");function r(s){var o=s.match(t);if(!o)return{t:"s",v:""};var l={t:"s",v:ga(o[1])},c=s.match(e);return c&&(l.s=kDe(c[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}}(),ODe=function(){var e=/(\r\n|\n)/g;function r(a,s,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),a.b&&(s.push("<b>"),o.push("</b>")),a.i&&(s.push("<i>"),o.push("</i>")),a.strike&&(s.push("<s>"),o.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),DDe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,RDe=/<(?:\w+:)?r>/,MDe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function uR(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=ga(ts(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ts(t),r&&(n.h=X6(n.t))):t.match(RDe)&&(n.r=ts(t),n.t=ga(ts((t.replace(MDe,"").match(DDe)||[]).join("").replace(tc,""))),r&&(n.h=ODe(FDe(n.r)))),n):{t:""}}var LDe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,UDe=/<(?:\w+:)?(?:si|sstItem)>/g,QDe=/<\/(?:\w+:)?(?:si|sstItem)>/;function VDe(t,e){var r=[],n="";if(!t)return r;var a=t.match(LDe);if(a){n=a[2].replace(UDe,"").split(QDe);for(var s=0;s!=n.length;++s){var o=uR(n[s].trim(),e);o!=null&&(r[r.length]=o)}a=Sn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var HDe=/^\s|\s$|[\t\n\r]/;function Nae(t,e){if(!e.bookSST)return"";var r=[Hi];r[r.length]=Fr("sst",null,{xmlns:Tg[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(HDe)&&(s+=' xml:space="preserve"'),s+=">"+za(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function $De(t){return[t.read_shift(4),t.read_shift(4)]}function GDe(t,e){var r=[],n=!1;return TA(t,function(s,o,l){switch(l){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function KDe(t,e){return e||(e=ir(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var qDe=nFe;function zDe(t){var e=Yc();vr(e,159,KDe(t));for(var r=0;r<t.length;++r)vr(e,19,qDe(t[r]));return vr(e,160),e.end()}function Cae(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function aA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function WDe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=aA(t,4),e.U=aA(t,4),e.W=aA(t,4),e}function XDe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},a=t.read_shift(4),s=[];a-- >0;)s.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=s,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function YDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(XDe(t));return e}function JDe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function ZDe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=aA(t,4),e.U=aA(t,4),e.W=aA(t,4),e}function e6e(t){var e=ZDe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function _ae(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function Eae(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function t6e(t){var e=aA(t);switch(e.Minor){case 2:return[e.Minor,r6e(t)];case 3:return[e.Minor,n6e()];case 4:return[e.Minor,a6e(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function r6e(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=_ae(t,r),a=Eae(t,t.length-t.l);return{t:"Std",h:n,v:a}}function n6e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function a6e(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(tc,function(s){var o=Sn(s);switch(fh(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function s6e(t,e){var r={},n=r.EncryptionVersionInfo=aA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var a=t.read_shift(4);return e-=4,r.EncryptionHeader=_ae(t,a),e-=a,r.EncryptionVerifier=Eae(t,e),r}function i6e(t){var e={},r=e.EncryptionVersionInfo=aA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function dR(t){var e=0,r,n=Cae(t),a=n.length+1,s,o,l,c,u;for(r=wm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var Sae=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},s=function(o){for(var l=e[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var d=o[u],f=0;f!=7;++f)d&64&&(l^=r[c]),d*=2,--c;return l};return function(o){for(var l=Cae(o),c=s(l),u=l.length,d=wm(16),f=0;f!=16;++f)d[f]=0;var A,h,m;for((u&1)===1&&(A=c>>8,d[u]=a(t[0],A),--u,A=c&255,h=l[l.length-1],d[u]=a(h,A));u>0;)--u,A=c>>8,d[u]=a(l[u],A),--u,A=c&255,d[u]=a(l[u],A);for(u=15,m=15-l.length;m>0;)A=c>>8,d[u]=a(t[m],A),--u,--m,A=c&255,d[u]=a(l[u],A),--u,--m;return d}}(),o6e=function(t,e,r,n,a){a||(a=e),n||(n=Sae(t));var s,o;for(s=0;s!=e.length;++s)o=e[s],o^=n[r],o=(o>>5|o<<3)&255,a[s]=o,++r;return[a,r,n]},l6e=function(t){var e=0,r=Sae(t);return function(n){var a=o6e("",n,e,r);return e=a[1],a[0]}};function c6e(t,e,r,n){var a={key:Xi(t),verificationBytes:Xi(t)};return r.password&&(a.verifier=dR(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=l6e(r.password)),a}function u6e(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=i6e(t):n.Data=s6e(t,e),n}function d6e(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?u6e(t,e-2,n):c6e(t,r.biff>=8?e:e-2,r,n),n}var Iae=function(){function t(a,s){switch(s.type){case"base64":return e(ku(a),s);case"binary":return e(a,s);case"buffer":return e(Kn&&Buffer.isBuffer(a)?a.toString("binary"):Om(a),s);case"array":return e(lg(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(l)&&(l[f]=[]);for(var A=/\\\w+\b/g,h=0,m,p=-1;m=A.exec(d);){switch(m[0]){case"\\cell":var x=d.slice(h,A.lastIndex-m[0].length);if(x[0]==" "&&(x=x.slice(1)),++p,x.length){var v={v:x,t:"s"};Array.isArray(l)?l[f][p]=v:l[Cn({r:f,c:p})]=v}break}h=A.lastIndex}p>u.e.c&&(u.e.c=p)}),l["!ref"]=Ln(u),l}function r(a,s){return Dm(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=xa(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var f=Cn({r:u,c:d});l=c?(a[u]||[])[d]:a[f],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(pA(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function f6e(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function k2(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function h6e(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,a=Math.max(e,r,n),s=Math.min(e,r,n),o=a-s;if(o===0)return[0,0,e];var l=0,c=0,u=a+s;switch(c=o/(u>1?2-u:u),a){case e:l=((r-n)/o+6)%6;break;case r:l=(n-e)/o+2;break;case n:l=(e-r)/o+4;break}return[l/6,c,u/2]}function A6e(t){var e=t[0],r=t[1],n=t[2],a=r*2*(n<.5?n:1-n),s=n-a/2,o=[s,s,s],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=a*l,o[0]+=a,o[1]+=c;break;case 1:c=a*(2-l),o[0]+=c,o[1]+=a;break;case 2:c=a*(l-2),o[1]+=a,o[2]+=c;break;case 3:c=a*(4-l),o[1]+=c,o[2]+=a;break;case 4:c=a*(l-4),o[2]+=a,o[0]+=c;break;case 5:c=a*(6-l),o[2]+=c,o[0]+=a;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function KS(t,e){if(e===0)return t;var r=h6e(f6e(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),k2(A6e(r))}var jae=6,m6e=15,p6e=1,ql=jae;function F2(t){return Math.floor((t+Math.round(128/ql)/256)*ql)}function O2(t){return Math.floor((t-5)/ql*100+.5)/100}function qS(t){return Math.round((t*ql+5)/ql*256)/256}function B5(t){return qS(O2(F2(t)))}function fR(t){var e=Math.abs(t-B5(t)),r=ql;if(e>.005)for(ql=p6e;ql<m6e;++ql)Math.abs(t-B5(t))<=e&&(e=Math.abs(t-B5(t)),r=ql);ql=r}function Nm(t){t.width?(t.wpx=F2(t.width),t.wch=O2(t.wpx),t.MDW=ql):t.wpx?(t.wch=O2(t.wpx),t.width=qS(t.wch),t.MDW=ql):typeof t.wch=="number"&&(t.width=qS(t.wch),t.wpx=F2(t.width),t.MDW=ql),t.customWidth&&delete t.customWidth}var g6e=96,Pae=g6e;function D2(t){return t*96/Pae}function Mv(t){return t*Pae/96}var x6e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function v6e(t,e,r,n){e.Borders=[];var a={},s=!1;(t[0].match(tc)||[]).forEach(function(o){var l=Sn(o);switch(fh(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Es(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Es(l.diagonalDown)),e.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}function y6e(t,e,r,n){e.Fills=[];var a={},s=!1;(t[0].match(tc)||[]).forEach(function(o){var l=Sn(o);switch(fh(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},e.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}function b6e(t,e,r,n){e.Fonts=[];var a={},s=!1;(t[0].match(tc)||[]).forEach(function(o){var l=Sn(o);switch(fh(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ts(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Es(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Es(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Es(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Es(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Es(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Es(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Es(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=U6[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Es(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var c=Dp[a.color.index];a.color.index==81&&(c=Dp[1]),c||(c=Dp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=KS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}function w6e(t,e,r){e.NumberFmt=[];for(var n=wi(Nn),a=0;a<n.length;++a)e.NumberFmt[n[a]]=Nn[n[a]];var s=t[0].match(tc);if(s)for(a=0;a<s.length;++a){var o=Sn(s[a]);switch(fh(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=ga(ts(o.formatCode)),c=parseInt(o.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}nA(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function N6e(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Fr("numFmt",null,{numFmtId:n,formatCode:za(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Fr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var JC=["numFmtId","fillId","fontId","borderId","xfId"],ZC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function C6e(t,e,r){e.CellXf=[];var n,a=!1;(t[0].match(tc)||[]).forEach(function(s){var o=Sn(s),l=0;switch(fh(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<JC.length;++l)n[JC[l]]&&(n[JC[l]]=parseInt(n[JC[l]],10));for(l=0;l<ZC.length;++l)n[ZC[l]]&&(n[ZC[l]]=Es(n[ZC[l]]));if(e.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[l]){n.numFmtId=l;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Es(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function _6e(t){var e=[];return e[e.length]=Fr("cellXfs",null),t.forEach(function(r){e[e.length]=Fr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Fr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var E6e=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var d={};if(!l)return d;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(e))&&w6e(f,d,u),(f=l.match(a))&&b6e(f,d,c,u),(f=l.match(n))&&y6e(f,d,c,u),(f=l.match(s))&&v6e(f,d,c,u),(f=l.match(r))&&C6e(f,d,u),d}}();function Bae(t,e){var r=[Hi,Fr("styleSheet",null,{xmlns:Tg[0],"xmlns:vt":wo.vt})],n;return t.SSF&&(n=N6e(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=_6e(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function S6e(t,e){var r=t.read_shift(2),n=Xl(t);return[r,n]}function I6e(t,e,r){r||(r=ir(6+4*e.length)),r.write_shift(2,t),qo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function j6e(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=uFe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=cFe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Xl(t),n}function P6e(t,e){e||(e=ir(25+4*32)),e.write_shift(2,t.sz*20),dFe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),HS(t.color,e);var n=0;return n=2,e.write_shift(1,n),qo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var B6e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],T5,T6e=Zl;function _$(t,e){e||(e=ir(4*3+8*7+16*1)),T5||(T5=rP(B6e));var r=T5[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(HS({auto:1},e),HS({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function k6e(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Tae(t,e,r){r||(r=ir(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function gy(t,e){return e||(e=ir(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var F6e=Zl;function O6e(t,e){return e||(e=ir(51)),e.write_shift(1,0),gy(null,e),gy(null,e),gy(null,e),gy(null,e),gy(null,e),e.length>e.l?e.slice(0,e.l):e}function D6e(t,e){return e||(e=ir(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),VS(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function R6e(t,e,r){var n=ir(2052);return n.write_shift(4,t),VS(e,n),VS(r,n),n.length>n.l?n.slice(0,n.l):n}function M6e(t,e,r){var n={};n.NumberFmt=[];for(var a in Nn)n.NumberFmt[a]=Nn[a];n.CellXf=[],n.Fonts=[];var s=[],o=!1;return TA(t,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],nA(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=KS(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:s.push(d),o=!0;break;case 38:s.pop(),o=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!o||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function L6e(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(vr(t,615,ff(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&vr(t,44,I6e(a,e[a]))}),vr(t,616))}}function U6e(t){var e=1;vr(t,611,ff(e)),vr(t,43,P6e({sz:12,color:{theme:1},name:"Calibri",family:2})),vr(t,612)}function Q6e(t){var e=2;vr(t,603,ff(e)),vr(t,45,_$({patternType:"none"})),vr(t,45,_$({patternType:"gray125"})),vr(t,604)}function V6e(t){var e=1;vr(t,613,ff(e)),vr(t,46,O6e()),vr(t,614)}function H6e(t){var e=1;vr(t,626,ff(e)),vr(t,47,Tae({numFmtId:0},65535)),vr(t,627)}function $6e(t,e){vr(t,617,ff(e.length)),e.forEach(function(r){vr(t,47,Tae(r,0))}),vr(t,618)}function G6e(t){var e=1;vr(t,619,ff(e)),vr(t,48,D6e({xfId:0,name:"Normal"})),vr(t,620)}function K6e(t){var e=0;vr(t,505,ff(e)),vr(t,506)}function q6e(t){var e=0;vr(t,508,R6e(e,"TableStyleMedium9","PivotStyleMedium4")),vr(t,509)}function z6e(t,e){var r=Yc();return vr(r,278),L6e(r,t.SSF),U6e(r),Q6e(r),V6e(r),H6e(r),$6e(r,e.cellXfs),G6e(r),K6e(r),q6e(r),vr(r,279),r.end()}var W6e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function X6e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(tc)||[]).forEach(function(a){var s=Sn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[W6e.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function Y6e(){}function J6e(){}var Z6e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,eRe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,tRe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function rRe(t,e,r){e.themeElements={};var n;[["clrScheme",Z6e,X6e],["fontScheme",eRe,Y6e],["fmtScheme",tRe,J6e]].forEach(function(a){if(!(n=t.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,e,r)})}var nRe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function kae(t,e){(!t||t.length===0)&&(t=hR());var r,n={};if(!(r=t.match(nRe)))throw new Error("themeElements not found in theme");return rRe(r[0],n,e),n.raw=t,n}function hR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Hi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function aRe(t,e,r){var n=t.l+e,a=t.read_shift(4);if(a!==124226){if(!r.cellStyles){t.l=n;return}var s=t.slice(t.l);t.l=n;var o;try{o=_ne(s,{type:"array"})}catch{return}var l=bu(o,"theme/theme/theme1.xml",!0);if(l)return kae(l,r)}}function sRe(t){return t.read_shift(4)}function iRe(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=oRe(t,4);break;case 2:e.xclrValue=fae(t);break;case 3:e.xclrValue=sRe(t);break;case 4:t.l+=4;break}return t.l+=8,e}function oRe(t,e){return Zl(t,e)}function lRe(t,e){return Zl(t,e)}function cRe(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=iRe(t);break;case 6:n[1]=lRe(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function uRe(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var a=t.read_shift(2),s=[];a-- >0;)s.push(cRe(t,r-t.l));return{ixfe:n,ext:s}}function dRe(t,e){e.forEach(function(r){switch(r[0]){}})}function fRe(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Xl(t)}}function hRe(t){var e=ir(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),qo(t.name,e),e.slice(0,e.l)}function ARe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function mRe(t){var e=ir(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function pRe(t,e){var r=ir(8+2*e.length);return r.write_shift(4,t),qo(e,r),r.slice(0,r.l)}function gRe(t){return t.l+=4,t.read_shift(4)!=0}function xRe(t,e){var r=ir(8);return r.write_shift(4,t),r.write_shift(4,1),r}function vRe(t,e,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],o=!1,l=2;return TA(t,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):l==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:s.push(d),o=!0;break;case 36:s.pop(),o=!1;break;default:if(!u.T){if(!o||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function yRe(){var t=Yc();return vr(t,332),vr(t,334,ff(1)),vr(t,335,hRe({name:"XLDAPR",version:12e4,flags:3496657072})),vr(t,336),vr(t,339,pRe(1,"XLDAPR")),vr(t,52),vr(t,35,ff(514)),vr(t,4096,ff(0)),vr(t,4097,od(1)),vr(t,36),vr(t,53),vr(t,340),vr(t,337,xRe(1)),vr(t,51,mRe([[1,0]])),vr(t,338),vr(t,333),t.end()}function bRe(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var a=!1,s=2,o;return t.replace(tc,function(l){var c=Sn(l);switch(fh(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function Fae(){var t=[Hi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function wRe(t){var e=[];if(!t)return e;var r=1;return(t.match(tc)||[]).forEach(function(n){var a=Sn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,e.push(a);break}}),e}function NRe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Cn(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function CRe(t,e,r){var n=[];return TA(t,function(s,o,l){switch(l){case 63:n.push(s);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function _Re(t,e,r,n){if(!t)return t;var a=n||{},s=!1;TA(t,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function ERe(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var Wx=1024;function Oae(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Fr("xml",null,{"xmlns:v":xu.v,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:mv":xu.mv}).replace(/\/>/,">"),Fr("o:shapelayout",Fr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Fr("v:shapetype",[Fr("v:stroke",null,{joinstyle:"miter"}),Fr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Wx<t*1e3;)Wx+=1e3;return e.forEach(function(s){var o=ni(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Fr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Fr("v:fill",c,l),d={on:"t",obscured:"t"};++Wx,a=a.concat(["<v:shape"+P2({id:"_x0000_s"+Wx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Fr("v:shadow",null,d),Fr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",yl("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),yl("x:AutoFill","False"),yl("x:Row",String(o.r)),yl("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function E$(t,e,r,n){var a=Array.isArray(t),s;e.forEach(function(o){var l=ni(o.ref);if(a?(t[l.r]||(t[l.r]=[]),s=t[l.r][l.c]):s=t[o.ref],!s){s={t:"z"},a?t[l.r][l.c]=s:t[o.ref]=s;var c=xa(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=Ln(c);u!==t["!ref"]&&(t["!ref"]=u)}s.c||(s.c=[]);var d={a:o.author,t:o.t,r:o.r,T:r};o.h&&(d.h=o.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function SRe(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var s=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Sn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ni(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),A=!!f&&!!f[1]&&uR(f[1])||{r:"",t:"",h:""};u.r=A.r,A.r=="<t></t>"&&(A.t=A.h=""),u.t=(A.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=A.h),n.push(u)}}}}),n}function Dae(t){var e=[Hi,Fr("comments",null,{xmlns:Tg[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=za(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(za(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(yl("t",za(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(yl("t",za(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function IRe(t,e){var r=[],n=!1,a={},s=0;return t.replace(tc,function(l,c){var u=Sn(l);switch(fh(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+l.length;break;case"</text>":a.t=t.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function jRe(t,e,r){var n=[Hi,Fr("ThreadedComments",null,{xmlns:wo.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(Fr("threadedComment",yl("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function PRe(t,e){var r=[],n=!1;return t.replace(tc,function(s){var o=Sn(s);switch(fh(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return s}),r}function BRe(t){var e=[Hi,Fr("personList",null,{xmlns:wo.TCMNT,"xmlns:x":Tg[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Fr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function TRe(t){var e={};e.iauthor=t.read_shift(4);var r=Dg(t);return e.rfx=r.s,e.ref=Cn(r.s),t.l+=16,e}function kRe(t,e){return e==null&&(e=ir(36)),e.write_shift(4,t[1].iauthor),v1(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var FRe=Xl;function ORe(t){return qo(t.slice(0,54))}function DRe(t,e){var r=[],n=[],a={},s=!1;return TA(t,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,e.sheetRows&&a.rfx&&e.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function RRe(t){var e=Yc(),r=[];return vr(e,628),vr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),vr(e,632,ORe(a.a)))})}),vr(e,631),vr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:ni(n[0]),e:ni(n[0])};vr(e,635,kRe([s,a])),a.t&&a.t.length>0&&vr(e,637,sFe(a)),vr(e,636),delete a.iauthor})}),vr(e,634),vr(e,629),e.end()}var MRe="application/vnd.ms-office.vbaProject";function LRe(t){var e=gn.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");gn.utils.cfb_add(e,a,t.FileIndex[n].content)}}),gn.write(e)}function URe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&gn.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Rae=["xlsb","xlsm","xlam","biff8","xla"];function QRe(){return{"!type":"dialog"}}function VRe(){return{"!type":"dialog"}}function HRe(){return{"!type":"macro"}}function $Re(){return{"!type":"macro"}}var hv=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+ri(d)+(c?"":"$")+Qi(u)}return function(a,s){return e=s,a.replace(t,r)}}(),AR=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,mR=function(){return function(e,r){return e.replace(AR,function(n,a,s,o,l,c){var u=tR(o)-(s?0:r.c),d=eR(c)-(l?0:r.r),f=d==0?"":l?d+1:"["+d+"]",A=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+A})}}();function Mae(t,e){return t.replace(AR,function(r,n,a,s,o,l){return n+(a=="$"?a+s:ri(tR(s)+e.c))+(o=="$"?o+l:Qi(eR(l)+e.r))})}function GRe(t,e,r){var n=Jc(e),a=n.s,s=ni(r),o={r:s.r-a.r,c:s.c-a.c};return Mae(t,o)}function KRe(t){return t.length!=1}function S$(t){return t.replace(/_xlfn\./g,"")}function Ki(t){t.l+=1}function Cm(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Lae(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Uae(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=Cm(t),l=Cm(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Uae(t){var e=Cm(t),r=Cm(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function qRe(t,e,r){if(r.biff<8)return Uae(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=Cm(t),o=Cm(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Qae(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return zRe(t);var n=t.read_shift(r&&r.biff==12?4:2),a=Cm(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function zRe(t){var e=Cm(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function WRe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function XRe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return YRe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function YRe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function JRe(t,e,r){var n=(t[t.l++]&96)>>5,a=Lae(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function ZRe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Lae(t,s,r);return[n,a,o]}function eMe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function tMe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function rMe(t,e,r){var n=(t[t.l++]&96)>>5,a=qRe(t,e-1,r);return[n,a]}function nMe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function I$(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function aMe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function sMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function iMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function oMe(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function lMe(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Vae(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function cMe(t){return t.read_shift(2),Vae(t)}function uMe(t){return t.read_shift(2),Vae(t)}function dMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Qae(t,0,r);return[n,a]}function fMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=XRe(t,0,r);return[n,a]}function hMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Qae(t,0,r);return[n,a,s]}function AMe(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[g8e[a],Gae[a],n]}function mMe(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:pMe(t);return[a,(s[0]===0?Gae:p8e)[s[1]]]}function pMe(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function gMe(t,e,r){t.l+=r&&r.biff==2?3:4}function xMe(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function vMe(t){return t.l++,kA[t.read_shift(1)]}function yMe(t){return t.l++,t.read_shift(2)}function bMe(t){return t.l++,t.read_shift(1)!==0}function wMe(t){return t.l++,zl(t)}function NMe(t,e,r){return t.l++,Ow(t,e-1,r)}function CMe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Pi(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=kA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=zl(t);break;case 2:r[1]=Rg(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function _Me(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Dg:sP)(t));return a}function EMe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=CMe(t,r.biff);return o}function SMe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function IMe(t,e,r){if(r.biff==5)return jMe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function jMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function PMe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function BMe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function TMe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function kMe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var FMe=Zl,OMe=Zl,DMe=Zl;function Rw(t,e,r){return t.l+=2,[WRe(t)]}function pR(t){return t.l+=6,[]}var RMe=Rw,MMe=pR,LMe=pR,UMe=Rw;function Hae(t){return t.l+=2,[Xi(t),t.read_shift(2)&1]}var QMe=Rw,VMe=Hae,HMe=pR,$Me=Rw,GMe=Rw,KMe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function qMe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=KMe[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function zMe(t){return t.l+=2,[t.read_shift(4)]}function WMe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function XMe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function YMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function JMe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function ZMe(t){return t.l+=4,[0,0]}var j$={1:{n:"PtgExp",f:xMe},2:{n:"PtgTbl",f:DMe},3:{n:"PtgAdd",f:Ki},4:{n:"PtgSub",f:Ki},5:{n:"PtgMul",f:Ki},6:{n:"PtgDiv",f:Ki},7:{n:"PtgPower",f:Ki},8:{n:"PtgConcat",f:Ki},9:{n:"PtgLt",f:Ki},10:{n:"PtgLe",f:Ki},11:{n:"PtgEq",f:Ki},12:{n:"PtgGe",f:Ki},13:{n:"PtgGt",f:Ki},14:{n:"PtgNe",f:Ki},15:{n:"PtgIsect",f:Ki},16:{n:"PtgUnion",f:Ki},17:{n:"PtgRange",f:Ki},18:{n:"PtgUplus",f:Ki},19:{n:"PtgUminus",f:Ki},20:{n:"PtgPercent",f:Ki},21:{n:"PtgParen",f:Ki},22:{n:"PtgMissArg",f:Ki},23:{n:"PtgStr",f:NMe},26:{n:"PtgSheet",f:WMe},27:{n:"PtgEndSheet",f:XMe},28:{n:"PtgErr",f:vMe},29:{n:"PtgBool",f:bMe},30:{n:"PtgInt",f:yMe},31:{n:"PtgNum",f:wMe},32:{n:"PtgArray",f:nMe},33:{n:"PtgFunc",f:AMe},34:{n:"PtgFuncVar",f:mMe},35:{n:"PtgName",f:SMe},36:{n:"PtgRef",f:dMe},37:{n:"PtgArea",f:JRe},38:{n:"PtgMemArea",f:PMe},39:{n:"PtgMemErr",f:FMe},40:{n:"PtgMemNoMem",f:OMe},41:{n:"PtgMemFunc",f:BMe},42:{n:"PtgRefErr",f:TMe},43:{n:"PtgAreaErr",f:eMe},44:{n:"PtgRefN",f:fMe},45:{n:"PtgAreaN",f:rMe},46:{n:"PtgMemAreaN",f:YMe},47:{n:"PtgMemNoMemN",f:JMe},57:{n:"PtgNameX",f:IMe},58:{n:"PtgRef3d",f:hMe},59:{n:"PtgArea3d",f:ZRe},60:{n:"PtgRefErr3d",f:kMe},61:{n:"PtgAreaErr3d",f:tMe},255:{}},e8e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},t8e={1:{n:"PtgElfLel",f:Hae},2:{n:"PtgElfRw",f:$Me},3:{n:"PtgElfCol",f:RMe},6:{n:"PtgElfRwV",f:GMe},7:{n:"PtgElfColV",f:UMe},10:{n:"PtgElfRadical",f:QMe},11:{n:"PtgElfRadicalS",f:HMe},13:{n:"PtgElfColS",f:MMe},15:{n:"PtgElfColSV",f:LMe},16:{n:"PtgElfRadicalLel",f:VMe},25:{n:"PtgList",f:qMe},29:{n:"PtgSxName",f:zMe},255:{}},r8e={0:{n:"PtgAttrNoop",f:ZMe},1:{n:"PtgAttrSemi",f:lMe},2:{n:"PtgAttrIf",f:iMe},4:{n:"PtgAttrChoose",f:aMe},8:{n:"PtgAttrGoto",f:sMe},16:{n:"PtgAttrSum",f:gMe},32:{n:"PtgAttrBaxcel",f:I$},33:{n:"PtgAttrBaxcel",f:I$},64:{n:"PtgAttrSpace",f:cMe},65:{n:"PtgAttrSpaceSemi",f:uMe},128:{n:"PtgAttrIfError",f:oMe},255:{}};function Mw(t,e,r,n){if(n.biff<8)return Zl(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=EMe(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=_Me(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Zl(t,e)),s}function Lw(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=j$[s]||j$[e8e[s]],(s===24||s===25)&&(a=(s===24?t8e:r8e)[t[t.l+1]]),!a||!a.f?Zl(t,e):o.push([a.n,a.f(t,e,r)]);return o}function n8e(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var a8e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function s8e(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function $ae(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function P$(t,e,r){var n=$ae(t,e,r);return n=="#REF"?n:s8e(n,r)}function Gl(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,f=0,A=0,h,m="";if(!t[0]||!t[0][0])return"";for(var p=-1,x="",v=0,y=t[0].length;v<y;++v){var b=t[0][v];switch(b[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:x=xi(" ",t[0][p][1][1]);break;case 1:x=xi("\r",t[0][p][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}u=u+x,p=-1}l.push(u+a8e[b[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Ib(b[1][1],o,a),l.push(jb(d,s));break;case"PtgRefN":d=r?Ib(b[1][1],r,a):b[1][1],l.push(jb(d,s));break;case"PtgRef3d":f=b[1][1],d=Ib(b[1][2],o,a),m=P$(n,f,a),l.push(m+"!"+jb(d,s));break;case"PtgFunc":case"PtgFuncVar":var w=b[1][0],j=b[1][1];w||(w=0),w&=127;var I=w==0?[]:l.slice(-w);l.length-=w,j==="User"&&(j=I.shift()),l.push(j+"("+I.join(",")+")");break;case"PtgBool":l.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(b[1]);break;case"PtgNum":l.push(String(b[1]));break;case"PtgStr":l.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(b[1]);break;case"PtgAreaN":h=s$(b[1][1],r?{s:r}:o,a),l.push(I5(h,a));break;case"PtgArea":h=s$(b[1][1],o,a),l.push(I5(h,a));break;case"PtgArea3d":f=b[1][1],h=b[1][2],m=P$(n,f,a),l.push(m+"!"+I5(h,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":A=b[1][2];var _=(n.names||[])[A-1]||(n[0]||[])[A],S=_?_.Name:"SH33TJSNAME"+String(A);S&&S.slice(0,6)=="_xlfn."&&!a.xlfn&&(S=S.slice(6)),l.push(S);break;case"PtgNameX":var E=b[1][1];A=b[1][2];var F;if(a.biff<=5)E<0&&(E=-E),n[E]&&(F=n[E][A]);else{var k="";if(((n[E]||[])[0]||[])[0]==14849||(((n[E]||[])[0]||[])[0]==1025?n[E][A]&&n[E][A].itab>0&&(k=n.SheetNames[n[E][A].itab-1]+"!"):k=n.SheetNames[A-1]+"!"),n[E]&&n[E][A])k+=n[E][A].Name;else if(n[0]&&n[0][A])k+=n[0][A].Name;else{var B=($ae(n,E,a)||"").split(";;");B[A-1]?k=B[A-1]:k+="SH33TJSERRX"}l.push(k);break}F||(F={Name:"SH33TJSERRY"}),l.push(F.Name);break;case"PtgParen":var D="(",X=")";if(p>=0){switch(x="",t[0][p][1][0]){case 2:D=xi(" ",t[0][p][1][1])+D;break;case 3:D=xi("\r",t[0][p][1][1])+D;break;case 4:X=xi(" ",t[0][p][1][1])+X;break;case 5:X=xi("\r",t[0][p][1][1])+X;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(D+l.pop()+X);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var he={c:r.c,r:r.r};if(n.sharedf[Cn(d)]){var Ae=n.sharedf[Cn(d)];l.push(Gl(Ae,o,he,n,a))}else{var fe=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Gl(u[1],o,he,n,a)),fe=!0;break}fe||l.push(b[1])}break;case"PtgArray":l.push("{"+n8e(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var me=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&p>=0&&me.indexOf(t[0][v][0])==-1){b=t[0][p];var ne=!0;switch(b[1][0]){case 4:ne=!1;case 0:x=xi(" ",b[1][1]);break;case 5:ne=!1;case 1:x=xi("\r",b[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}l.push((ne?x:"")+l.pop()+(ne?"":x)),p=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function i8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Zl(t,e-2)];var l=Lw(t,o,r);return e!==o+a&&(s=Mw(t,e-o-a,l,r)),t.l=n,[l,s]}function o8e(t,e,r){var n=t.l+e,a=r.biff==2?1:2,s,o=t.read_shift(a);if(o==65535)return[[],Zl(t,e-2)];var l=Lw(t,o,r);return e!==o+a&&(s=Mw(t,e-o-a,l,r)),t.l=n,[l,s]}function l8e(t,e,r,n){var a=t.l+e,s=Lw(t,n,r),o;return a!==t.l&&(o=Mw(t,a-t.l,s,r)),[s,o]}function c8e(t,e,r){var n=t.l+e,a,s=t.read_shift(2),o=Lw(t,s,r);return s==65535?[[],Zl(t,e-2)]:(e!==s+2&&(a=Mw(t,n-s-2,o,r)),[o,a])}function u8e(t){var e;if(Kh(t,t.l+6)!==65535)return[zl(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function d8e(t){if(t==null){var e=ir(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return cg(t);return cg(0)}function k5(t,e,r){var n=t.l+e,a=hh(t);r.biff==2&&++t.l;var s=u8e(t),o=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=o8e(t,n-t.l,r);return{cell:a,val:s[0],formula:l,shared:o>>3&1,tt:s[1]}}function f8e(t,e,r,n,a){var s=dg(e,r,a),o=d8e(t.v),l=ir(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=ir(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var f=Go([s,o,l,u]);return f}function iP(t,e,r){var n=t.read_shift(4),a=Lw(t,n,r),s=t.read_shift(4),o=s>0?Mw(t,s,a,r):null;return[a,o]}var h8e=iP,oP=iP,A8e=iP,m8e=iP,p8e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Gae={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},g8e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function B$(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function x8e(t){var e="of:="+t.replace(AR,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function F5(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function v8e(t){return t.replace(/\./,"!")}var Bb={},Av={},Tb=typeof Map<"u";function gR(t,e,r){var n=0,a=t.length;if(r){if(Tb?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=Tb?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(Tb?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function lP(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(ql=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=O2(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=qS(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Lp(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Rm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){nA(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Kae(t,e,r,n,a,s){try{n.cellNF&&(t.z=Nn[e])}catch(l){if(n.WTF)throw l}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Ps(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(Nn[e]==null&&nA(pke[e]||"General",e),t.t==="e")t.w=t.w||kA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=I2(t.v);else if(t.t==="d"){var o=Eo(t.v);(o|0)===o?t.w=o.toString(10):t.w=I2(o)}else{if(t.v===void 0)return"";t.w=og(t.v,Av)}else t.t==="d"?t.w=_d(e,Eo(t.v),Av):t.w=_d(e,t.v,Av)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{t.s=s.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=KS(a.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=a.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=KS(a.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=a.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&s.Fills)throw l}}}function y8e(t,e,r){if(t&&t["!ref"]){var n=xa(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function b8e(t,e){var r=xa(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Ln(r))}var w8e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,N8e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,C8e=/<(?:\w:)?hyperlink [^>]*>/mg,_8e=/"(\w*:\w*)"/,E8e=/<(?:\w:)?col\b[^>]*[\/]?>/g,S8e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,I8e=/<(?:\w:)?pageMargins[^>]*\/>/g,qae=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,j8e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,P8e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function B8e(t,e,r,n,a,s,o){if(!t)return t;n||(n={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=t.match(N8e);f?(u=t.slice(0,f.index),d=t.slice(f.index+f[0].length)):u=d=t;var A=u.match(qae);A?xR(A[0],l,a,r):(A=u.match(j8e))&&k8e(A[0],A[1]||"",l,a,r);var h=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=u.slice(h,h+50).match(_8e);m&&b8e(l,m[1])}var p=u.match(P8e);p&&p[1]&&K8e(p[1],a);var x=[];if(e.cellStyles){var v=u.match(E8e);v&&Q8e(x,v)}f&&W8e(f[1],l,e,c,s,o);var y=d.match(S8e);y&&(l["!autofilter"]=H8e(y[0]));var b=[],w=d.match(w8e);if(w)for(h=0;h!=w.length;++h)b[h]=xa(w[h].slice(w[h].indexOf('"')+1));var j=d.match(C8e);j&&M8e(l,j,n);var I=d.match(I8e);if(I&&(l["!margins"]=L8e(Sn(I[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=Ln(c)),e.sheetRows>0&&l["!ref"]){var _=xa(l["!ref"]);e.sheetRows<=+_.e.r&&(_.e.r=e.sheetRows-1,_.e.r>c.e.r&&(_.e.r=c.e.r),_.e.r<_.s.r&&(_.s.r=_.e.r),_.e.c>c.e.c&&(_.e.c=c.e.c),_.e.c<_.s.c&&(_.s.c=_.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Ln(_))}return x.length>0&&(l["!cols"]=x),b.length>0&&(l["!merges"]=b),l}function T8e(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Ln(t[r])+'"/>';return e+"</mergeCells>"}function xR(t,e,r,n){var a=Sn(t);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=ga(ts(a.codeName)))}function k8e(t,e,r,n,a){xR(t.slice(0,t.indexOf(">")),r,n,a)}function F8e(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=Wf(za(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+Fr("outlinePr",null,u)}!s&&!l||(a[a.length]=Fr("sheetPr",l,o))}var O8e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],D8e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function R8e(t){var e={sheet:1};return O8e.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),D8e.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=dR(t.password).toString(16).toUpperCase()),Fr("sheetProtection",null,e)}function M8e(t,e,r){for(var n=Array.isArray(t),a=0;a!=e.length;++a){var s=Sn(ts(e[a]),!0);if(!s.ref)return;var o=((r||{})["!id"]||[])[s.id];o?(s.Target=o.Target,s.location&&(s.Target+="#"+ga(s.location))):(s.Target="#"+ga(s.location),o={Target:s.Target,TargetMode:"Internal"}),s.Rel=o,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=xa(s.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var d=Cn({c:u,r:c});n?(t[c]||(t[c]=[]),t[c][u]||(t[c][u]={t:"z",v:void 0}),t[c][u].l=s):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=s)}}}function L8e(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function U8e(t){return Lp(t),Fr("pageMargins",null,t)}function Q8e(t,e){for(var r=!1,n=0;n!=e.length;++n){var a=Sn(e[n],!0);a.hidden&&(a.hidden=Es(a.hidden));var s=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,fR(a.width)),Nm(a);s<=o;)t[s++]=Bs(a)}}function V8e(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=Fr("col",null,lP(a,n)));return r[r.length]="</cols>",r.join("")}function H8e(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function $8e(t,e,r,n){var a=typeof t.ref=="string"?t.ref:Ln(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Jc(a);o.s.r==o.e.r&&(o.e.r=Jc(e["!ref"]).e.r,a=Ln(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Fr("autoFilter",null,{ref:a})}var G8e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function K8e(t,e){e.Views||(e.Views=[{}]),(t.match(G8e)||[]).forEach(function(r,n){var a=Sn(r);e.Views[n]||(e.Views[n]={}),+a.zoomScale&&(e.Views[n].zoom=+a.zoomScale),Es(a.rightToLeft)&&(e.Views[n].RTL=!0)})}function q8e(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Fr("sheetViews",Fr("sheetView",null,a),{})}function z8e(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=kA[t.v];break;case"d":n&&n.cellDates?a=Ps(t.v,-1).toISOString():(t=Bs(t),t.t="n",a=""+(t.v=Eo(Ps(t.v)))),typeof t.z>"u"&&(t.z=Nn[14]);break;default:a=t.v;break}var l=yl("v",za(a)),c={r:e},u=Rm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=yl("v",""+gR(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=Fr("f",za(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),Fr("c",l,c)}var W8e=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=j2("v"),o=j2("f");return function(c,u,d,f,A,h){for(var m=0,p="",x=[],v=[],y=0,b=0,w=0,j="",I,_,S=0,E=0,F,k,B=0,D=0,X=Array.isArray(h.CellXf),he,Ae=[],fe=[],me=Array.isArray(u),ne=[],Pe={},Te=!1,O=!!d.sheetStubs,K=c.split(e),q=0,U=K.length;q!=U;++q){p=K[q].trim();var W=p.length;if(W!==0){var J=0;e:for(m=0;m<W;++m)switch(p[m]){case">":if(p[m-1]!="/"){++m;break e}if(d&&d.cellStyles){if(_=Sn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,d.sheetRows&&d.sheetRows<S)continue;Pe={},Te=!1,_.ht&&(Te=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Mv(Pe.hpt)),_.hidden=="1"&&(Te=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Te=!0,Pe.level=+_.outlineLevel),Te&&(ne[S-1]=Pe)}break;case"<":J=m;break}if(J>=m)break;if(_=Sn(p.slice(J,m),!0),S=_.r!=null?parseInt(_.r,10):S+1,E=-1,!(d.sheetRows&&d.sheetRows<S)){f.s.r>S-1&&(f.s.r=S-1),f.e.r<S-1&&(f.e.r=S-1),d&&d.cellStyles&&(Pe={},Te=!1,_.ht&&(Te=!0,Pe.hpt=parseFloat(_.ht),Pe.hpx=Mv(Pe.hpt)),_.hidden=="1"&&(Te=!0,Pe.hidden=!0),_.outlineLevel!=null&&(Te=!0,Pe.level=+_.outlineLevel),Te&&(ne[S-1]=Pe)),x=p.slice(m).split(t);for(var M=0;M!=x.length&&x[M].trim().charAt(0)=="<";++M);for(x=x.slice(M),m=0;m!=x.length;++m)if(p=x[m].trim(),p.length!==0){if(v=p.match(r),y=m,b=0,w=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(y=0,j=v[1],b=0;b!=j.length&&!((w=j.charCodeAt(b)-64)<1||w>26);++b)y=26*y+w;--y,E=y}else++E;for(b=0;b!=p.length&&p.charCodeAt(b)!==62;++b);if(++b,_=Sn(p.slice(0,b),!0),_.r||(_.r=Cn({r:S-1,c:E})),j=p.slice(b),I={t:""},(v=j.match(s))!=null&&v[1]!==""&&(I.v=ga(v[1])),d.cellFormula){if((v=j.match(o))!=null&&v[1]!==""){if(I.f=ga(ts(v[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=S$(I.f)),v[0].indexOf('t="array"')>-1)I.F=(j.match(a)||[])[1],I.F.indexOf(":")>-1&&Ae.push([xa(I.F),I.F]);else if(v[0].indexOf('t="shared"')>-1){k=Sn(v[0]);var H=ga(ts(v[1]));d.xlfn||(H=S$(H)),fe[parseInt(k.si,10)]=[k,H,_.r]}}else(v=j.match(/<f[^>]*\/>/))&&(k=Sn(v[0]),fe[k.si]&&(I.f=GRe(fe[k.si][1],fe[k.si][2],_.r)));var te=ni(_.r);for(b=0;b<Ae.length;++b)te.r>=Ae[b][0].s.r&&te.r<=Ae[b][0].e.r&&te.c>=Ae[b][0].s.c&&te.c<=Ae[b][0].e.c&&(I.F=Ae[b][1])}if(_.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(O)I.t="z";else continue;else I.t=_.t||"n";switch(f.s.c>E&&(f.s.c=E),f.e.c<E&&(f.e.c=E),I.t){case"n":if(I.v==""||I.v==null){if(!O)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!O)continue;I.t="z"}else F=Bb[parseInt(I.v,10)],I.v=F.t,I.r=F.r,d.cellHTML&&(I.h=F.h);break;case"str":I.t="s",I.v=I.v!=null?ts(I.v):"",d.cellHTML&&(I.h=X6(I.v));break;case"inlineStr":v=j.match(n),I.t="s",v!=null&&(F=uR(v[1]))?(I.v=F.t,d.cellHTML&&(I.h=F.h)):I.v="";break;case"b":I.v=Es(I.v);break;case"d":d.cellDates?I.v=Ps(I.v,1):(I.v=Eo(Ps(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=Wne[I.v];break}if(B=D=0,he=null,X&&_.s!==void 0&&(he=h.CellXf[_.s],he!=null&&(he.numFmtId!=null&&(B=he.numFmtId),d.cellStyles&&he.fillId!=null&&(D=he.fillId))),Kae(I,B,D,d,A,h),d.cellDates&&X&&I.t=="n"&&p1(Nn[B])&&(I.t="d",I.v=aP(I.v)),_.cm&&d.xlmeta){var ve=(d.xlmeta.Cell||[])[+_.cm-1];ve&&ve.type=="XLDAPR"&&(I.D=!0)}if(me){var Q=ni(_.r);u[Q.r]||(u[Q.r]=[]),u[Q.r][Q.c]=I}else u[_.r]=I}}}}ne.length>0&&(u["!rows"]=ne)}}();function X8e(t,e,r,n){var a=[],s=[],o=xa(t["!ref"]),l="",c,u="",d=[],f=0,A=0,h=t["!rows"],m=Array.isArray(t),p={r:u},x,v=-1;for(A=o.s.c;A<=o.e.c;++A)d[A]=ri(A);for(f=o.s.r;f<=o.e.r;++f){for(s=[],u=Qi(f),A=o.s.c;A<=o.e.c;++A){c=d[A]+u;var y=m?(t[f]||[])[A]:t[c];y!==void 0&&(l=z8e(y,c,t,e))!=null&&s.push(l)}(s.length>0||h&&h[f])&&(p={r:u},h&&h[f]&&(x=h[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=D2(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level)),a[a.length]=Fr("row",s.join(""),p))}if(h)for(;f<h.length;++f)h&&h[f]&&(p={r:f+1},x=h[f],x.hidden&&(p.hidden=1),v=-1,x.hpx?v=D2(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(p.ht=v,p.customHeight=1),x.level&&(p.outlineLevel=x.level),a[a.length]=Fr("row","",p));return a.join("")}function zae(t,e,r,n){var a=[Hi,Fr("worksheet",null,{xmlns:Tg[0],"xmlns:r":wo.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=xa(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Ln(d)}n||(n={}),c["!comments"]=[];var f=[];F8e(c,r,t,e,a),a[a.length]=Fr("dimension",null,{ref:u}),a[a.length]=q8e(c,e,t,r),e.sheetFormat&&(a[a.length]=Fr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=V8e(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=X8e(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=R8e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=$8e(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=T8e(c["!merges"]));var A=-1,h,m=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(p){p[1].Target&&(h={ref:p[0]},p[1].Target.charAt(0)!="#"&&(m=$a(n,-1,za(p[1].Target).replace(/#.*$/,""),Jn.HLINK),h["r:id"]="rId"+m),(A=p[1].Target.indexOf("#"))>-1&&(h.location=za(p[1].Target.slice(A+1))),p[1].Tooltip&&(h.tooltip=za(p[1].Tooltip)),a[a.length]=Fr("hyperlink",null,h))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=U8e(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=yl("ignoredErrors",Fr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(m=$a(n,-1,"../drawings/drawing"+(t+1)+".xml",Jn.DRAW),a[a.length]=Fr("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=f),c["!comments"].length>0&&(m=$a(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jn.VML),a[a.length]=Fr("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function Y8e(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function J8e(t,e,r){var n=ir(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=D2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var f=-1,A=-1,h=d<<10;h<d+1<<10;++h){u.c=h;var m=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Cn(u)];m&&(f<0&&(f=h),A=h)}f<0||(++l,n.write_shift(4,f),n.write_shift(4,A))}var p=n.l;return n.l=c,n.write_shift(4,l),n.l=p,n.length>n.l?n.slice(0,n.l):n}function Z8e(t,e,r,n){var a=J8e(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&vr(t,0,a)}var eLe=Dg,tLe=v1;function rLe(){}function nLe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=iFe(t),r}function aLe(t,e,r){r==null&&(r=ir(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return HS({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),$ne(t,r),r.slice(0,r.l)}function sLe(t){var e=Bd(t);return[e]}function iLe(t,e,r){return r==null&&(r=ir(8)),kg(e,r)}function oLe(t){var e=Fg(t);return[e]}function lLe(t,e,r){return r==null&&(r=ir(4)),Og(e,r)}function cLe(t){var e=Bd(t),r=t.read_shift(1);return[e,r,"b"]}function uLe(t,e,r){return r==null&&(r=ir(9)),kg(e,r),r.write_shift(1,t.v?1:0),r}function dLe(t){var e=Fg(t),r=t.read_shift(1);return[e,r,"b"]}function fLe(t,e,r){return r==null&&(r=ir(5)),Og(e,r),r.write_shift(1,t.v?1:0),r}function hLe(t){var e=Bd(t),r=t.read_shift(1);return[e,r,"e"]}function ALe(t,e,r){return r==null&&(r=ir(9)),kg(e,r),r.write_shift(1,t.v),r}function mLe(t){var e=Fg(t),r=t.read_shift(1);return[e,r,"e"]}function pLe(t,e,r){return r==null&&(r=ir(8)),Og(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function gLe(t){var e=Bd(t),r=t.read_shift(4);return[e,r,"s"]}function xLe(t,e,r){return r==null&&(r=ir(12)),kg(e,r),r.write_shift(4,e.v),r}function vLe(t){var e=Fg(t),r=t.read_shift(4);return[e,r,"s"]}function yLe(t,e,r){return r==null&&(r=ir(8)),Og(e,r),r.write_shift(4,e.v),r}function bLe(t){var e=Bd(t),r=zl(t);return[e,r,"n"]}function wLe(t,e,r){return r==null&&(r=ir(16)),kg(e,r),cg(t.v,r),r}function Wae(t){var e=Fg(t),r=zl(t);return[e,r,"n"]}function NLe(t,e,r){return r==null&&(r=ir(12)),Og(e,r),cg(t.v,r),r}function CLe(t){var e=Bd(t),r=sR(t);return[e,r,"n"]}function _Le(t,e,r){return r==null&&(r=ir(12)),kg(e,r),Gne(t.v,r),r}function ELe(t){var e=Fg(t),r=sR(t);return[e,r,"n"]}function SLe(t,e,r){return r==null&&(r=ir(8)),Og(e,r),Gne(t.v,r),r}function ILe(t){var e=Bd(t),r=rR(t);return[e,r,"is"]}function jLe(t){var e=Bd(t),r=Xl(t);return[e,r,"str"]}function PLe(t,e,r){return r==null&&(r=ir(12+4*t.v.length)),kg(e,r),qo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function BLe(t){var e=Fg(t),r=Xl(t);return[e,r,"str"]}function TLe(t,e,r){return r==null&&(r=ir(8+4*t.v.length)),Og(e,r),qo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function kLe(t,e,r){var n=t.l+e,a=Bd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=oP(t,n-t.l,r);o[3]=Gl(l,null,a,r.supbooks,r)}else t.l=n;return o}function FLe(t,e,r){var n=t.l+e,a=Bd(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=oP(t,n-t.l,r);o[3]=Gl(l,null,a,r.supbooks,r)}else t.l=n;return o}function OLe(t,e,r){var n=t.l+e,a=Bd(t);a.r=r["!row"];var s=zl(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=oP(t,n-t.l,r);o[3]=Gl(l,null,a,r.supbooks,r)}else t.l=n;return o}function DLe(t,e,r){var n=t.l+e,a=Bd(t);a.r=r["!row"];var s=Xl(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=oP(t,n-t.l,r);o[3]=Gl(l,null,a,r.supbooks,r)}else t.l=n;return o}var RLe=Dg,MLe=v1;function LLe(t,e){return e==null&&(e=ir(4)),e.write_shift(4,t),e}function ULe(t,e){var r=t.l+e,n=Dg(t),a=nR(t),s=Xl(t),o=Xl(t),l=Xl(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function QLe(t,e){var r=ir(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));v1({s:ni(t[0]),e:ni(t[0])},r),aR("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return qo(a||"",r),qo(t[1].Tooltip||"",r),qo("",r),r.slice(0,r.l)}function VLe(){}function HLe(t,e,r){var n=t.l+e,a=Kne(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=h8e(t,n-t.l,r);o[1]=l}else t.l=n;return o}function $Le(t,e,r){var n=t.l+e,a=Dg(t),s=[a];if(r.cellFormula){var o=m8e(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function GLe(t,e,r){r==null&&(r=ir(18));var n=lP(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Xae=["left","right","top","bottom","header","footer"];function KLe(t){var e={};return Xae.forEach(function(r){e[r]=zl(t)}),e}function qLe(t,e){return e==null&&(e=ir(6*8)),Lp(t),Xae.forEach(function(r){cg(t[r],e)}),e}function zLe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function WLe(t,e,r){r==null&&(r=ir(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function XLe(t){var e=ir(24);return e.write_shift(4,4),e.write_shift(4,1),v1(t,e),e}function YLe(t,e){return e==null&&(e=ir(16*4+2)),e.write_shift(2,t.password?dR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function JLe(){}function ZLe(){}function eUe(t,e,r,n,a,s,o){if(!t)return t;var l=e||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,A=!1,h,m,p,x,v,y,b,w,j,I=[];l.biff=12,l["!row"]=0;var _=0,S=!1,E=[],F={},k=l.supbooks||a.supbooks||[[]];if(k.sharedf=F,k.arrayf=E,k.SheetNames=a.SheetNames||a.Sheets.map(function(me){return me.name}),!l.supbooks&&(l.supbooks=k,a.Names))for(var B=0;B<a.Names.length;++B)k[0][B+1]=a.Names[B];var D=[],X=[],he=!1;R2[16]={n:"BrtShortReal",f:Wae};var Ae;if(TA(t,function(ne,Pe,Te){if(!A)switch(Te){case 148:u=ne;break;case 0:h=ne,l.sheetRows&&l.sheetRows<=h.r&&(A=!0),w=Qi(x=h.r),l["!row"]=h.r,(ne.hidden||ne.hpt||ne.level!=null)&&(ne.hpt&&(ne.hpx=Mv(ne.hpt)),X[ne.r]=ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:ne[2]},ne[2]){case"n":m.v=ne[1];break;case"s":b=Bb[ne[1]],m.v=b.t,m.r=b.r;break;case"b":m.v=!!ne[1];break;case"e":m.v=ne[1],l.cellText!==!1&&(m.w=kA[m.v]);break;case"str":m.t="s",m.v=ne[1];break;case"is":m.t="s",m.v=ne[1].t;break}if((p=o.CellXf[ne[0].iStyleRef])&&Kae(m,p.numFmtId,null,l,s,o),v=ne[0].c==-1?v+1:ne[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[ri(v)+w]=m,l.cellFormula){for(S=!1,_=0;_<E.length;++_){var O=E[_];h.r>=O[0].s.r&&h.r<=O[0].e.r&&v>=O[0].s.c&&v<=O[0].e.c&&(m.F=Ln(O[0]),S=!0)}!S&&ne.length>3&&(m.f=ne[3])}if(d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),l.cellDates&&p&&m.t=="n"&&p1(Nn[p.numFmtId])){var K=wp(m.v);K&&(m.t="d",m.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}Ae&&(Ae.type=="XLDAPR"&&(m.D=!0),Ae=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;m={t:"z",v:void 0},v=ne[0].c==-1?v+1:ne[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[ri(v)+w]=m,d.s.r>h.r&&(d.s.r=h.r),d.s.c>v&&(d.s.c=v),d.e.r<h.r&&(d.e.r=h.r),d.e.c<v&&(d.e.c=v),Ae&&(Ae.type=="XLDAPR"&&(m.D=!0),Ae=void 0);break;case 176:I.push(ne);break;case 49:Ae=((l.xlmeta||{}).Cell||[])[ne-1];break;case 494:var q=n["!id"][ne.relId];for(q?(ne.Target=q.Target,ne.loc&&(ne.Target+="#"+ne.loc),ne.Rel=q):ne.relId==""&&(ne.Target="#"+ne.loc),x=ne.rfx.s.r;x<=ne.rfx.e.r;++x)for(v=ne.rfx.s.c;v<=ne.rfx.e.c;++v)l.dense?(c[x]||(c[x]=[]),c[x][v]||(c[x][v]={t:"z",v:void 0}),c[x][v].l=ne):(y=Cn({c:v,r:x}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=ne);break;case 426:if(!l.cellFormula)break;E.push(ne),j=l.dense?c[x][v]:c[ri(v)+w],j.f=Gl(ne[1],d,{r:h.r,c:v},k,l),j.F=Ln(ne[0]);break;case 427:if(!l.cellFormula)break;F[Cn(ne[0].s)]=ne[1],j=l.dense?c[x][v]:c[ri(v)+w],j.f=Gl(ne[1],d,{r:h.r,c:v},k,l);break;case 60:if(!l.cellStyles)break;for(;ne.e>=ne.s;)D[ne.e--]={width:ne.w/256,hidden:!!(ne.flags&1),level:ne.level},he||(he=!0,fR(ne.w/256)),Nm(D[ne.e+1]);break;case 161:c["!autofilter"]={ref:Ln(ne)};break;case 476:c["!margins"]=ne;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ne.name&&(a.Sheets[r].CodeName=ne.name),(ne.above||ne.left)&&(c["!outline"]={above:ne.above,left:ne.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ne.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!Pe.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+Te.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Ln(u||d)),l.sheetRows&&c["!ref"]){var fe=xa(c["!ref"]);l.sheetRows<=+fe.e.r&&(fe.e.r=l.sheetRows-1,fe.e.r>d.e.r&&(fe.e.r=d.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>d.e.c&&(fe.e.c=d.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Ln(fe))}return I.length>0&&(c["!merges"]=I),D.length>0&&(c["!cols"]=D),X.length>0&&(c["!rows"]=X),c}function tUe(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Bs(e),e.z=e.z||Nn[14],e.v=Eo(Ps(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=Rm(a.cellXfs,e,a),e.l&&s["!links"].push([Cn(c),e.l]),e.c&&s["!comments"].push([Cn(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=gR(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?vr(t,18,yLe(e,c)):vr(t,7,xLe(e,c))):(c.t="str",o?vr(t,17,TLe(e,c)):vr(t,6,PLe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?vr(t,13,SLe(e,c)):vr(t,2,_Le(e,c)):o?vr(t,16,NLe(e,c)):vr(t,5,wLe(e,c)),!0;case"b":return c.t="b",o?vr(t,15,fLe(e,c)):vr(t,4,uLe(e,c)),!0;case"e":return c.t="e",o?vr(t,14,pLe(e,c)):vr(t,3,ALe(e,c)),!0}return o?vr(t,12,lLe(e,c)):vr(t,1,iLe(e,c)),!0}function rUe(t,e,r,n){var a=xa(e["!ref"]||"A1"),s,o="",l=[];vr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=Qi(d),Z8e(t,e,a,d);var f=!1;if(d<=a.e.r)for(var A=a.s.c;A<=a.e.c;++A){d===a.s.r&&(l[A]=ri(A)),s=l[A]+o;var h=c?(e[d]||[])[A]:e[s];if(!h){f=!1;continue}f=tUe(t,h,d,A,n,e,f)}}vr(t,146)}function nUe(t,e){!e||!e["!merges"]||(vr(t,177,LLe(e["!merges"].length)),e["!merges"].forEach(function(r){vr(t,176,MLe(r))}),vr(t,178))}function aUe(t,e){!e||!e["!cols"]||(vr(t,390),e["!cols"].forEach(function(r,n){r&&vr(t,60,GLe(n,r))}),vr(t,391))}function sUe(t,e){!e||!e["!ref"]||(vr(t,648),vr(t,649,XLe(xa(e["!ref"]))),vr(t,650))}function iUe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=$a(r,-1,n[1].Target.replace(/#.*$/,""),Jn.HLINK);vr(t,494,QLe(n,a))}}),delete e["!links"]}function oUe(t,e,r,n){if(e["!comments"].length>0){var a=$a(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Jn.VML);vr(t,551,aR("rId"+a)),e["!legacy"]=a}}function lUe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Ln(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Jc(s);l.s.r==l.e.r&&(l.e.r=Jc(e["!ref"]).e.r,s=Ln(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),vr(t,161,v1(xa(s))),vr(t,162)}}function cUe(t,e,r){vr(t,133),vr(t,137,WLe(e,r)),vr(t,138),vr(t,134)}function uUe(t,e){e["!protect"]&&vr(t,535,YLe(e["!protect"]))}function dUe(t,e,r,n){var a=Yc(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=xa(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],vr(a,129),(r.vbaraw||o["!outline"])&&vr(a,147,aLe(l,o["!outline"])),vr(a,148,tLe(c)),cUe(a,o,r.Workbook),aUe(a,o),rUe(a,o,t,e),uUe(a,o),lUe(a,o,r,t),nUe(a,o),iUe(a,o,n),o["!margins"]&&vr(a,476,qLe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&sUe(a,o),oUe(a,o,t,n),vr(a,130),a.end()}function fUe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var o=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(e[+o[1]]=r?+o[2]:o[2])});var a=ga((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[e,a,n]}function hUe(t,e,r,n,a,s){var o=s||{"!type":"chart"};if(!t)return s;var l=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var A=fUe(f);d.s.r=d.s.c=0,d.e.c=l,u=ri(l),A[0].forEach(function(h,m){o[u+Qi(m)]={t:"n",v:h,z:A[1]},c=m}),d.e.r<c&&(d.e.r=c),++l}),l>0&&(o["!ref"]=Ln(d)),o}function AUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o,l=t.match(qae);return l&&xR(l[0],s,a,r),(o=t.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=o[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function mUe(t,e){t.l+=10;var r=Xl(t);return{name:r}}function pUe(t,e,r,n,a){if(!t)return t;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},o=!1;return TA(t,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var vR=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],gUe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],xUe=[],vUe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function T$(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],a=0;a!=e.length;++a){var s=e[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Es(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function k$(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Es(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Yae(t){k$(t.WBProps,vR),k$(t.CalcPr,vUe),T$(t.WBView,gUe),T$(t.Sheets,xUe),Av.date1904=Es(t.WBProps.date1904)}function yUe(t){return!t.Workbook||!t.Workbook.WBProps?"false":Es(t.Workbook.WBProps.date1904)?"true":"false"}var bUe="][*?/\\".split("");function Jae(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return bUe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function wUe(t,e,r){t.forEach(function(n,a){Jae(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function NUe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];wUe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)y8e(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var CUe=/<\w+:workbook/;function _Ue(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},o=0;if(t.replace(tc,function(c,u){var d=Sn(c);switch(fh(d[0])){case"<?xml":break;case"<workbook":c.match(CUe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":vR.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Es(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ts(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=ga(ts(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ts(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Es(d.hidden||"0")&&(s.Hidden=!0),o=u+c.length;break;case"</definedName>":s.Ref=ga(ts(t.slice(o,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Tg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Yae(r),r}function Zae(t){var e=[Hi];e[e.length]=Fr("workbook",null,{xmlns:Tg[0],"xmlns:r":wo.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(vR.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Fr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:za(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Fr("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=Fr("definedName",za(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function EUe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Wk(t),r.name=Xl(t),r}function SUe(t,e){return e||(e=ir(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),aR(t.strRelID,e),qo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function IUe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Xl(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function jUe(t,e){e||(e=ir(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),$ne(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function PUe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function BUe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=oFe(t),o=A8e(t,0,r),l=nR(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function TUe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;e||(e={}),e.biff=12;var s=[],o=[[]];return o.SheetNames=[],o.XTI=[],R2[16]={n:"BrtFRTArchID$",f:PUe},TA(t,function(c,u,d){switch(d){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Gl(c.Ptg,null,null,o,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([d,c]):o[0]=[d,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),Yae(r),r.Names=s,r.supbooks=o,r}function kUe(t,e){vr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};vr(t,156,SUe(a))}vr(t,144)}function FUe(t,e){e||(e=ir(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return qo("SheetJS",e),qo(DS.version,e),qo(DS.version,e),qo("7262",e),e.length>e.l?e.slice(0,e.l):e}function OUe(t,e){e||(e=ir(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function DUe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(vr(t,135),vr(t,158,OUe(a)),vr(t,136))}}function RUe(t,e){var r=Yc();return vr(r,131),vr(r,128,FUe()),vr(r,153,jUe(t.Workbook&&t.Workbook.WBProps||null)),DUe(r,t),kUe(r,t),vr(r,132),r.end()}function MUe(t,e,r){return e.slice(-4)===".bin"?TUe(t,r):_Ue(t,r)}function LUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?eUe(t,n,r,a,s,o,l):B8e(t,n,r,a,s,o,l)}function UUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?pUe(t,n,r,a,s):AUe(t,n,r,a,s)}function QUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?HRe():$Re()}function VUe(t,e,r,n,a,s,o,l){return e.slice(-4)===".bin"?QRe():VRe()}function HUe(t,e,r,n){return e.slice(-4)===".bin"?M6e(t,r,n):E6e(t,r,n)}function $Ue(t,e,r){return kae(t,r)}function GUe(t,e,r){return e.slice(-4)===".bin"?GDe(t,r):VDe(t,r)}function KUe(t,e,r){return e.slice(-4)===".bin"?DRe(t,r):SRe(t,r)}function qUe(t,e,r){return e.slice(-4)===".bin"?CRe(t):wRe(t)}function zUe(t,e,r,n){return r.slice(-4)===".bin"?_Re(t,e,r,n):void 0}function WUe(t,e,r){return e.slice(-4)===".bin"?vRe(t,e,r):bRe(t,e,r)}function XUe(t,e,r){return(e.slice(-4)===".bin"?RUe:Zae)(t)}function YUe(t,e,r,n,a){return(e.slice(-4)===".bin"?dUe:zae)(t,r,n,a)}function JUe(t,e,r){return(e.slice(-4)===".bin"?z6e:Bae)(t,r)}function ZUe(t,e,r){return(e.slice(-4)===".bin"?zDe:Nae)(t,r)}function e7e(t,e,r){return(e.slice(-4)===".bin"?RRe:Dae)(t)}function t7e(t){return(t.slice(-4)===".bin"?yRe:Fae)()}var ese=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,tse=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function $d(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=t.match(ese),s,o,l,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(tse),(o=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?l="xmlns"+s[1].slice(6):l=s[1].slice(o+1),n[l]=s[2].slice(1,s[2].length-1));return n}function r7e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(ese),a,s,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(tse),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(s+1),r[o]=a[2].slice(1,a[2].length-1));return r}var kb;function n7e(t,e){var r=kb[t]||ga(t);return r==="General"?og(e):_d(r,e)}function a7e(t,e,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Es(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ps(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[ga(e)]=a}function s7e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||kA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=I2(t.v):t.w=og(t.v):t.w=n7e(e||"General",t.v)}catch(s){if(r.WTF)throw s}try{var n=kb[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&p1(n)){var a=wp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function i7e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=x6e[n.Pattern]||n.Pattern)}t[e.ID]=e}function o7e(t,e,r,n,a,s,o,l,c,u){var d="General",f=n.StyleID,A={};u=u||{};var h=[],m=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&h.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Es(t);break;case"String":n.t="s",n.r=XH(ga(t)),n.v=t.indexOf("<")>-1?ga(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Ps(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=ga(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Wne[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=XH(e||t));break}if(s7e(n,d,u),u.cellFormula!==!1)if(n.Formula){var p=ga(n.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),n.f=hv(p,a),delete n.Formula,n.ArrayRange=="RC"?n.F=hv("RC:RC",a):n.ArrayRange&&(n.F=hv(n.ArrayRange,a),c.push([xa(n.F),n.F]))}else for(m=0;m<c.length;++m)a.r>=c[m][0].s.r&&a.r<=c[m][0].e.r&&a.c>=c[m][0].s.c&&a.c<=c[m][0].e.c&&(n.F=c[m][1]);u.cellStyles&&(h.forEach(function(x){!A.patternType&&x.patternType&&(A.patternType=x.patternType)}),n.s=A),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function l7e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function O5(t,e){var r=e||{};g1();var n=qy(Y6(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ts(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Bs(r);return o.type="string",Rv.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(be){a.indexOf("<"+be)>=0&&(s=!0)}),s)return q7e(n,r);kb={"General Number":"General","General Date":Nn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Nn[15],"Short Date":Nn[14],"Long Time":Nn[19],"Medium Time":Nn[18],"Short Time":Nn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Nn[2],Standard:Nn[4],Percent:Nn[10],Scientific:Nn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,d={},f=[],A=r.dense?[]:{},h="",m={},p={},x=$d('<Data ss:Type="String">'),v=0,y=0,b=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j={},I={},_="",S=0,E=[],F={},k={},B=0,D=[],X=[],he={},Ae=[],fe,me=!1,ne=[],Pe=[],Te={},O=0,K=0,q={Sheets:[],WBProps:{date1904:!1}},U={};B2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var W="";l=B2.exec(n);)switch(l[3]=(W=l[3]).toLowerCase()){case"data":if(W=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?o7e(n.slice(v,l.index),_,x,c[c.length-1][0]=="comment"?he:m,{c:y,r:b},j,Ae[y],p,ne,r):(_="",x=$d(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(X.length>0&&(m.c=X),(!r.sheetRows||r.sheetRows>b)&&m.v!==void 0&&(r.dense?(A[b]||(A[b]=[]),A[b][y]=m):A[ri(y)+Qi(b)]=m),m.HRef&&(m.l={Target:ga(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(O=y+(parseInt(m.MergeAcross,10)|0),K=b+(parseInt(m.MergeDown,10)|0),E.push({s:{c:y,r:b},e:{c:O,r:K}})),!r.sheetStubs)m.MergeAcross?y=O+1:++y;else if(m.MergeAcross||m.MergeDown){for(var J=y;J<=O;++J)for(var M=b;M<=K;++M)(J>y||M>b)&&(r.dense?(A[M]||(A[M]=[]),A[M][J]={t:"z"}):A[ri(J)+Qi(M)]={t:"z"});y=O+1}else++y;else m=r7e(l[0]),m.Index&&(y=+m.Index-1),y<w.s.c&&(w.s.c=y),y>w.e.c&&(w.e.c=y),l[0].slice(-2)==="/>"&&++y,X=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(b<w.s.r&&(w.s.r=b),b>w.e.r&&(w.e.r=b),l[0].slice(-2)==="/>"&&(p=$d(l[0]),p.Index&&(b=+p.Index-1)),y=0,++b):(p=$d(l[0]),p.Index&&(b=+p.Index-1),Te={},(p.AutoFitHeight=="0"||p.Height)&&(Te.hpx=parseInt(p.Height,10),Te.hpt=D2(Te.hpx),Pe[b]=Te),p.Hidden=="1"&&(Te.hidden=!0,Pe[b]=Te));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));f.push(h),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(A["!ref"]=Ln(w),r.sheetRows&&r.sheetRows<=w.e.r&&(A["!fullref"]=A["!ref"],w.e.r=r.sheetRows-1,A["!ref"]=Ln(w))),E.length&&(A["!merges"]=E),Ae.length>0&&(A["!cols"]=Ae),Pe.length>0&&(A["!rows"]=Pe),d[h]=A}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=y=0,c.push([l[3],!1]),u=$d(l[0]),h=ga(u.Name),A=r.dense?[]:{},E=[],ne=[],Pe=[],U={name:h,Hidden:0},q.Sheets.push(U);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Ae=[],me=!1}break;case"style":l[1]==="/"?i7e(j,I,r):I=$d(l[0]);break;case"numberformat":I.nf=ga($d(l[0]).Format||"General"),kb[I.nf]&&(I.nf=kb[I.nf]);for(var H=0;H!=392&&Nn[H]!=I.nf;++H);if(H==392){for(H=57;H!=392;++H)if(Nn[H]==null){nA(I.nf,H);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(fe=$d(l[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!me&&fe.wpx>10){me=!0,ql=jae;for(var te=0;te<Ae.length;++te)Ae[te]&&Nm(Ae[te])}me&&Nm(fe),Ae[fe.Index-1||Ae.length]=fe;for(var ve=0;ve<+fe.Span;++ve)Ae[Ae.length]=Bs(fe);break;case"namedrange":if(l[1]==="/")break;q.Names||(q.Names=[]);var Q=Sn(l[0]),Ke={Name:Q.Name,Ref:hv(Q.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(Ke.Sheet=q.Sheets.length-1),q.Names.push(Ke);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?_+=n.slice(S,l.index):S=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=$d(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?TFe(F,W,n.slice(B,l.index)):B=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));l7e(he),X.push(he)}else c.push([l[3],!1]),u=$d(l[0]),he={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var ae=$d(l[0]);A["!autofilter"]={ref:hv(ae.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return M$(n,r);var ee=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ee=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ee=!1}break;case"excelworkbook":switch(l[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ee=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ee=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(B,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else B=l.index+l[0].length;break;case"header":A["!margins"]||Lp(A["!margins"]={},"xlml"),isNaN(+Sn(l[0]).Margin)||(A["!margins"].header=+Sn(l[0]).Margin);break;case"footer":A["!margins"]||Lp(A["!margins"]={},"xlml"),isNaN(+Sn(l[0]).Margin)||(A["!margins"].footer=+Sn(l[0]).Margin);break;case"pagemargins":var Fe=Sn(l[0]);A["!margins"]||Lp(A["!margins"]={},"xlml"),isNaN(+Fe.Top)||(A["!margins"].top=+Fe.Top),isNaN(+Fe.Left)||(A["!margins"].left=+Fe.Left),isNaN(+Fe.Right)||(A["!margins"].right=+Fe.Right),isNaN(+Fe.Bottom)||(A["!margins"].bottom=+Fe.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":A["!outline"]||(A["!outline"]={}),A["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ee=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ee=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ee=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ee=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ee=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ee=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ee=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ee=!1}break;case"smarttags":break;default:ee=!1;break}if(ee||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?a7e(k,W,D,n.slice(B,l.index)):(D=l,B=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ce={};return!r.bookSheets&&!r.bookProps&&(ce.Sheets=d),ce.SheetNames=f,ce.Workbook=q,ce.SSF=Bs(Nn),ce.Props=F,ce.Custprops=k,ce}function rF(t,e){switch(bR(e=e||{}),e.type||"base64"){case"base64":return O5(ku(t),e);case"binary":case"buffer":case"file":return O5(t,e);case"array":return O5(Om(t),e)}}function c7e(t,e){var r=[];return t.Props&&r.push(kFe(t.Props,e)),t.Custprops&&r.push(FFe(t.Props,t.Custprops)),r.join("")}function u7e(){return""}function d7e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(Fr("NumberFormat",null,{"ss:Format":za(Nn[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Fr("Style",s.join(""),o))}),Fr("Styles",r.join(""))}function rse(t){return Fr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+mR(t.Ref,{r:0,c:0})})}function f7e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(rse(a)))}return Fr("Names",r.join(""))}function h7e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(rse(l)))}return s.join("")}function A7e(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(Fr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(Fr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(Fr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Fr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(yl("ProtectContents","True")),t["!protect"].objects&&a.push(yl("ProtectObjects","True")),t["!protect"].scenarios&&a.push(yl("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(yl("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(yl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Fr("WorksheetOptions",a.join(""),{xmlns:xu.x})}function m7e(t){return t.map(function(e){var r=Dke(e.t||""),n=Fr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Fr("Comment",n,{"ss:Author":e.a})}).join("")}function p7e(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+za(mR(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=ni(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=za(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=za(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",A="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",A=String(t.v);break;case"b":f="Boolean",A=t.v?"1":"0";break;case"e":f="Error",A=kA[t.v];break;case"d":f="DateTime",A=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Nn[14]);break;case"s":f="String",A=Oke(t.v||"");break}var h=Rm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=t.v!=null?A:"",p=t.t=="z"?"":'<Data ss:Type="'+f+'">'+m+"</Data>";return(t.c||[]).length>0&&(p+=m7e(t.c)),Fr("Cell",p,l)}function g7e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Mv(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function x7e(t,e,r,n){if(!t["!ref"])return"";var a=xa(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(x,v){Nm(x);var y=!!x.width,b=lP(v,x),w={"ss:Index":v+1};y&&(w["ss:Width"]=F2(b.width)),x.hidden&&(w["ss:Hidden"]="1"),l.push(Fr("Column",null,w))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[g7e(u,(t["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var A=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>f)&&!(s[o].s.r>u)&&!(s[o].e.c<f)&&!(s[o].e.r<u)){(s[o].s.c!=f||s[o].s.r!=u)&&(A=!0);break}if(!A){var h={r:u,c:f},m=Cn(h),p=c?(t[u]||[])[f]:t[m];d.push(p7e(p,m,t,e,r,n,h))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function v7e(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?h7e(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?x7e(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(A7e(s,e,t,r)),n.join("")}function y7e(t,e){e||(e={}),t.SSF||(t.SSF=Bs(Nn)),t.SSF&&(g1(),tP(t.SSF),e.revssf=nP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Rm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(c7e(t,e)),r.push(u7e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Fr("Worksheet",v7e(n,e,t),{"ss:Name":za(t.SheetNames[n])}));return r[2]=d7e(t,e),r[3]=f7e(t),Hi+Fr("Workbook",r.join(""),{xmlns:xu.ss,"xmlns:o":xu.o,"xmlns:x":xu.x,"xmlns:ss":xu.ss,"xmlns:dt":xu.dt,"xmlns:html":xu.html})}function b7e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=fFe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=hFe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var w7e=[60,1084,2066,2165,2175];function N7e(t,e,r,n,a){var s=n,o=[],l=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=s;for(var c=Kh(r,r.l),u=nF[c],d=0;u!=null&&w7e.indexOf(c)>-1;)s=Kh(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),l=r.slice(d,r.l+4+s),o.push(l),r.l+=4+s,u=nF[c=Kh(r,r.l)];var f=Go(o);xl(f,0);var A=0;f.lens=[];for(var h=0;h<o.length;++h)f.lens.push(A),A+=o[h].length;if(f.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+f.length+" < "+n;return e.f(f,f.length,a)}function Ff(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=Nn[n])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||kA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=I2(t.v):t.w=og(t.v):t.w=_d(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&n&&t.t=="n"&&p1(Nn[n]||String(n))){var a=wp(t.v);a&&(t.t="d",t.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function e_(t,e,r){return{v:t,ixfe:e,t:r}}function C7e(t,e){var r={opts:{}},n={},a=e.dense?[]:{},s={},o={},l=null,c=[],u="",d={},f,A="",h,m,p,x,v={},y=[],b,w,j=[],I=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},S={},E=function(oe){return oe<8?Dp[oe]:oe<64&&I[oe-8]||Dp[oe]},F=function(oe,Z,Ne){var Re=Z.XF.data;if(!(!Re||!Re.patternType||!Ne||!Ne.cellStyles)){Z.s={},Z.s.patternType=Re.patternType;var ge;(ge=k2(E(Re.icvFore)))&&(Z.s.fgColor={rgb:ge}),(ge=k2(E(Re.icvBack)))&&(Z.s.bgColor={rgb:ge})}},k=function(oe,Z,Ne){if(!(Te>1)&&!(Ne.sheetRows&&oe.r>=Ne.sheetRows)){if(Ne.cellStyles&&Z.XF&&Z.XF.data&&F(oe,Z,Ne),delete Z.ixfe,delete Z.XF,f=oe,A=Cn(oe),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),oe.r<o.s.r&&(o.s.r=oe.r),oe.c<o.s.c&&(o.s.c=oe.c),oe.r+1>o.e.r&&(o.e.r=oe.r+1),oe.c+1>o.e.c&&(o.e.c=oe.c+1),Ne.cellFormula&&Z.f){for(var Re=0;Re<y.length;++Re)if(!(y[Re][0].s.c>oe.c||y[Re][0].s.r>oe.r)&&!(y[Re][0].e.c<oe.c||y[Re][0].e.r<oe.r)){Z.F=Ln(y[Re][0]),(y[Re][0].s.c!=oe.c||y[Re][0].s.r!=oe.r)&&delete Z.f,Z.f&&(Z.f=""+Gl(y[Re][1],o,oe,ne,B));break}}Ne.dense?(a[oe.r]||(a[oe.r]=[]),a[oe.r][oe.c]=Z):a[A]=Z}},B={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(B.password=e.password);var D,X=[],he=[],Ae=[],fe=[],me=!1,ne=[];ne.SheetNames=B.snames,ne.sharedf=B.sharedf,ne.arrayf=B.arrayf,ne.names=[],ne.XTI=[];var Pe=0,Te=0,O=0,K=[],q=[],U;B.codepage=1200,nf(1200);for(var W=!1;t.l<t.length-1;){var J=t.l,M=t.read_shift(2);if(M===0&&Pe===10)break;var H=t.l===t.length?0:t.read_shift(2),te=nF[M];if(te&&te.f){if(e.bookSheets&&Pe===133&&M!==133)break;if(Pe=M,te.r===2||te.r==12){var ve=t.read_shift(2);if(H-=2,!B.enc&&ve!==M&&((ve&255)<<8|ve>>8)!==M)throw new Error("rt mismatch: "+ve+"!="+M);te.r==12&&(t.l+=10,H-=10)}var Q={};if(M===10?Q=te.f(t,H,B):Q=N7e(M,te,t,H,B),Te==0&&[9,521,1033,2057].indexOf(Pe)===-1)continue;switch(M){case 34:r.opts.Date1904=_.WBProps.date1904=Q;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(B.enc||(t.l=0),B.enc=Q,!e.password)throw new Error("File is password-protected");if(Q.valid==null)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case 92:B.lastuser=Q;break;case 66:var Ke=Number(Q);switch(Ke){case 21010:Ke=1200;break;case 32768:Ke=1e4;break;case 32769:Ke=1252;break}nf(B.codepage=Ke),W=!0;break;case 317:B.rrtabid=Q;break;case 25:B.winlocked=Q;break;case 439:r.opts.RefreshAll=Q;break;case 12:r.opts.CalcCount=Q;break;case 16:r.opts.CalcDelta=Q;break;case 17:r.opts.CalcIter=Q;break;case 13:r.opts.CalcMode=Q;break;case 14:r.opts.CalcPrecision=Q;break;case 95:r.opts.CalcSaveRecalc=Q;break;case 15:B.CalcRefMode=Q;break;case 2211:r.opts.FullCalc=Q;break;case 129:Q.fDialog&&(a["!type"]="dialog"),Q.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),Q.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:j.push(Q);break;case 430:ne.push([Q]),ne[ne.length-1].XTI=[];break;case 35:case 547:ne[ne.length-1].push(Q);break;case 24:case 536:U={Name:Q.Name,Ref:Gl(Q.rgce,o,null,ne,B)},Q.itab>0&&(U.Sheet=Q.itab-1),ne.names.push(U),ne[0]||(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].push(Q),Q.Name=="_xlnm._FilterDatabase"&&Q.itab>0&&Q.rgce&&Q.rgce[0]&&Q.rgce[0][0]&&Q.rgce[0][0][0]=="PtgArea3d"&&(q[Q.itab-1]={ref:Ln(Q.rgce[0][0][1][2])});break;case 22:B.ExternCount=Q;break;case 23:ne.length==0&&(ne[0]=[],ne[0].XTI=[]),ne[ne.length-1].XTI=ne[ne.length-1].XTI.concat(Q),ne.XTI=ne.XTI.concat(Q);break;case 2196:if(B.biff<8)break;U!=null&&(U.Comment=Q[1]);break;case 18:a["!protect"]=Q;break;case 19:Q!==0&&B.WTF&&console.error("Password verifier: "+Q);break;case 133:s[Q.pos]=Q,B.snames.push(Q.name);break;case 10:{if(--Te)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=Ln(o),e.sheetRows&&e.sheetRows<=o.e.r){var ae=o.e.r;o.e.r=e.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Ln(o),o.e.r=ae}o.e.r++,o.e.c++}X.length>0&&(a["!merges"]=X),he.length>0&&(a["!objects"]=he),Ae.length>0&&(a["!cols"]=Ae),fe.length>0&&(a["!rows"]=fe),_.Sheets.push(S)}u===""?d=a:n[u]=a,a=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(B.biff===8&&(B.biff={9:2,521:3,1033:4}[M]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Q.BIFFVer]||8),B.biffguess=Q.BIFFVer==0,Q.BIFFVer==0&&Q.dt==4096&&(B.biff=5,W=!0,nf(B.codepage=28591)),B.biff==8&&Q.BIFFVer==0&&Q.dt==16&&(B.biff=2),Te++)break;if(a=e.dense?[]:{},B.biff<8&&!W&&(W=!0,nf(B.codepage=e.codepage||1252)),B.biff<5||Q.BIFFVer==0&&Q.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ee={pos:t.l-H,name:u};s[ee.pos]=ee,B.snames.push(u)}else u=(s[J]||{name:""}).name;Q.dt==32&&(a["!type"]="chart"),Q.dt==64&&(a["!type"]="macro"),X=[],he=[],B.arrayf=y=[],Ae=[],fe=[],me=!1,S={Hidden:(s[J]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(e.dense?(a[Q.r]||[])[Q.c]:a[Cn({c:Q.c,r:Q.r})])&&++Q.c,b={ixfe:Q.ixfe,XF:j[Q.ixfe]||{},v:Q.val,t:"n"},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e);break;case 5:case 517:b={ixfe:Q.ixfe,XF:j[Q.ixfe],v:Q.val,t:Q.t},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e);break;case 638:b={ixfe:Q.ixfe,XF:j[Q.ixfe],v:Q.rknum,t:"n"},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e);break;case 189:for(var Fe=Q.c;Fe<=Q.C;++Fe){var ce=Q.rkrec[Fe-Q.c][0];b={ixfe:ce,XF:j[ce],v:Q.rkrec[Fe-Q.c][1],t:"n"},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Fe,r:Q.r},b,e)}break;case 6:case 518:case 1030:{if(Q.val=="String"){l=Q;break}if(b=e_(Q.val,Q.cell.ixfe,Q.tt),b.XF=j[b.ixfe],e.cellFormula){var be=Q.formula;if(be&&be[0]&&be[0][0]&&be[0][0][0]=="PtgExp"){var Ve=be[0][0][1][0],We=be[0][0][1][1],pt=Cn({r:Ve,c:We});v[pt]?b.f=""+Gl(Q.formula,o,Q.cell,ne,B):b.F=((e.dense?(a[Ve]||[])[We]:a[pt])||{}).F}else b.f=""+Gl(Q.formula,o,Q.cell,ne,B)}O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k(Q.cell,b,e),l=Q}break;case 7:case 519:if(l)l.val=Q,b=e_(Q,l.cell.ixfe,"s"),b.XF=j[b.ixfe],e.cellFormula&&(b.f=""+Gl(l.formula,o,l.cell,ne,B)),O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k(l.cell,b,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(Q);var wt=Cn(Q[0].s);if(h=e.dense?(a[Q[0].s.r]||[])[Q[0].s.c]:a[wt],e.cellFormula&&h){if(!l||!wt||!h)break;h.f=""+Gl(Q[1],o,Q[0],ne,B),h.F=Ln(Q[0])}}break;case 1212:{if(!e.cellFormula)break;if(A){if(!l)break;v[Cn(l.cell)]=Q[0],h=e.dense?(a[l.cell.r]||[])[l.cell.c]:a[Cn(l.cell)],(h||{}).f=""+Gl(Q[0],o,f,ne,B)}}break;case 253:b=e_(c[Q.isst].t,Q.ixfe,"s"),c[Q.isst].h&&(b.h=c[Q.isst].h),b.XF=j[b.ixfe],O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e);break;case 513:e.sheetStubs&&(b={ixfe:Q.ixfe,XF:j[Q.ixfe],t:"z"},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e));break;case 190:if(e.sheetStubs)for(var Ct=Q.c;Ct<=Q.C;++Ct){var St=Q.ixfe[Ct-Q.c];b={ixfe:St,XF:j[St],t:"z"},O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Ct,r:Q.r},b,e)}break;case 214:case 516:case 4:b=e_(Q.val,Q.ixfe,"s"),b.XF=j[b.ixfe],O>0&&(b.z=K[b.ixfe>>8&63]),Ff(b,e,r.opts.Date1904),k({c:Q.c,r:Q.r},b,e);break;case 0:case 512:Te===1&&(o=Q);break;case 252:c=Q;break;case 1054:if(B.biff==4){K[O++]=Q[1];for(var Rt=0;Rt<O+163&&Nn[Rt]!=Q[1];++Rt);Rt>=163&&nA(Q[1],O+163)}else nA(Q[1],Q[0]);break;case 30:{K[O++]=Q;for(var jt=0;jt<O+163&&Nn[jt]!=Q;++jt);jt>=163&&nA(Q,O+163)}break;case 229:X=X.concat(Q);break;case 93:he[Q.cmo[0]]=B.lastobj=Q;break;case 438:B.lastobj.TxO=Q;break;case 127:B.lastobj.ImData=Q;break;case 440:for(x=Q[0].s.r;x<=Q[0].e.r;++x)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=e.dense?(a[x]||[])[p]:a[Cn({c:p,r:x})],h&&(h.l=Q[1]);break;case 2048:for(x=Q[0].s.r;x<=Q[0].e.r;++x)for(p=Q[0].s.c;p<=Q[0].e.c;++p)h=e.dense?(a[x]||[])[p]:a[Cn({c:p,r:x})],h&&h.l&&(h.l.Tooltip=Q[1]);break;case 28:{if(B.biff<=5&&B.biff>=2)break;h=e.dense?(a[Q[0].r]||[])[Q[0].c]:a[Cn(Q[0])];var Ue=he[Q[2]];h||(e.dense?(a[Q[0].r]||(a[Q[0].r]=[]),h=a[Q[0].r][Q[0].c]={t:"z"}):h=a[Cn(Q[0])]={t:"z"},o.e.r=Math.max(o.e.r,Q[0].r),o.s.r=Math.min(o.s.r,Q[0].r),o.e.c=Math.max(o.e.c,Q[0].c),o.s.c=Math.min(o.s.c,Q[0].c)),h.c||(h.c=[]),m={a:Q[1],t:Ue.TxO.t},h.c.push(m)}break;case 2173:dRe(j[Q.ixfe],Q.ext);break;case 125:{if(!B.cellStyles)break;for(;Q.e>=Q.s;)Ae[Q.e--]={width:Q.w/256,level:Q.level||0,hidden:!!(Q.flags&1)},me||(me=!0,fR(Q.w/256)),Nm(Ae[Q.e+1])}break;case 520:{var Be={};Q.level!=null&&(fe[Q.r]=Be,Be.level=Q.level),Q.hidden&&(fe[Q.r]=Be,Be.hidden=!0),Q.hpt&&(fe[Q.r]=Be,Be.hpt=Q.hpt,Be.hpx=Mv(Q.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Lp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[M]]=Q;break;case 161:a["!margins"]||Lp(a["!margins"]={}),a["!margins"].header=Q.header,a["!margins"].footer=Q.footer;break;case 574:Q.RTL&&(_.Views[0].RTL=!0);break;case 146:I=Q;break;case 2198:D=Q;break;case 140:w=Q;break;case 442:u?S.CodeName=Q||S.name:_.WBProps.CodeName=Q||"ThisWorkbook";break}}else te||console.error("Missing Info for XLS Record 0x"+M.toString(16)),t.l+=H}return r.SheetNames=wi(s).sort(function(ye,oe){return Number(ye)-Number(oe)}).map(function(ye){return s[ye].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&q.forEach(function(ye,oe){r.Sheets[r.SheetNames[oe]]["!autofilter"]=ye}),r.Strings=c,r.SSF=Bs(Nn),B.enc&&(r.Encryption=B.enc),D&&(r.Themes=D),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),ne.names.length>0&&(_.Names=ne.names),r.Workbook=_,r}var Fb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function _7e(t,e,r){var n=gn.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=A$(n,Xk,Fb.DSI);for(var s in a)e[s]=a[s]}catch(u){if(r.WTF)throw u}var o=gn.find(t,"/!SummaryInformation");if(o&&o.size>0)try{var l=A$(o,Yk,Fb.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(tae(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function E7e(t,e){var r=[],n=[],a=[],s=0,o,l=$H(Xk,"n"),c=$H(Yk,"n");if(t.Props)for(o=wi(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=wi(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)lae.indexOf(a[s][0])>-1||eae.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&gn.utils.cfb_add(e,"/SummaryInformation",m$(n,Fb.SI,c,Yk)),(r.length||u.length)&&gn.utils.cfb_add(e,"/DocumentSummaryInformation",m$(r,Fb.DSI,l,Xk,u.length?u:null,Fb.UDI))}function nse(t,e){e||(e={}),bR(e),V6(),e.codepage&&Q6(e.codepage);var r,n;if(t.FullPaths){if(gn.find(t,"/encryption"))throw new Error("File is password-protected");r=gn.find(t,"!CompObj"),n=gn.find(t,"/Workbook")||gn.find(t,"/Book")}else{switch(e.type){case"base64":t=yu(ku(t));break;case"binary":t=yu(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}xl(t,0),n={content:t}}var a,s;if(r&&b7e(r),e.bookProps&&!e.bookSheets)a={};else{var o=Kn?"buffer":"array";if(n&&n.content)a=C7e(n.content,e);else if((s=gn.find(t,"PerfectOffice_MAIN"))&&s.content)a=Mp.to_workbook(s.content,(e.type=o,e));else if((s=gn.find(t,"NativeContent_MAIN"))&&s.content)a=Mp.to_workbook(s.content,(e.type=o,e));else throw(s=gn.find(t,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&gn.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=LRe(t))}var l={};return t.FullPaths&&_7e(t,l,e),a.Props=a.Custprops=l,e.bookFiles&&(a.cfb=t),a}function S7e(t,e){var r=e||{},n=gn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return gn.utils.cfb_add(n,a,ase(t,r)),r.biff==8&&(t.Props||t.Custprops)&&E7e(t,n),r.biff==8&&t.vbaraw&&URe(n,gn.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var R2={0:{f:Y8e},1:{f:sLe},2:{f:CLe},3:{f:hLe},4:{f:cLe},5:{f:bLe},6:{f:jLe},7:{f:gLe},8:{f:DLe},9:{f:OLe},10:{f:kLe},11:{f:FLe},12:{f:oLe},13:{f:ELe},14:{f:mLe},15:{f:dLe},16:{f:Wae},17:{f:BLe},18:{f:vLe},19:{f:rR},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:BUe},40:{},42:{},43:{f:j6e},44:{f:S6e},45:{f:T6e},46:{f:F6e},47:{f:k6e},48:{},49:{f:eFe},50:{},51:{f:ARe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:vae},62:{f:ILe},63:{f:NRe},64:{f:JLe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Zl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:zLe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:nLe},148:{f:eLe,p:16},151:{f:VLe},152:{},153:{f:IUe},154:{},155:{},156:{f:EUe},157:{},158:{},159:{T:1,f:$De},160:{T:-1},161:{T:1,f:Dg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:RLe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:fRe},336:{T:-1},337:{f:gRe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Wk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:xae},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:HLe},427:{f:$Le},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:KLe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:rLe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ULe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Wk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:FRe},633:{T:1},634:{T:-1},635:{T:1,f:TRe},636:{T:-1},637:{f:aFe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:mUe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ZLe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},nF={6:{f:k5},10:{f:h0},12:{f:Xi},13:{f:Xi},14:{f:Pi},15:{f:Pi},16:{f:zl},17:{f:Pi},18:{f:Pi},19:{f:Xi},20:{f:b$},21:{f:b$},23:{f:xae},24:{f:N$},25:{f:Pi},26:{},27:{},28:{f:ZOe},29:{},34:{f:Pi},35:{f:w$},38:{f:zl},39:{f:zl},40:{f:zl},41:{f:zl},42:{f:Pi},43:{f:Pi},47:{f:d6e},49:{f:EOe},51:{f:Xi},60:{},61:{f:bOe},64:{f:Pi},65:{f:_Oe},66:{f:Xi},77:{},80:{},81:{},82:{},85:{f:Xi},89:{},90:{},91:{},92:{f:uOe},93:{f:rDe},94:{},95:{f:Pi},96:{},97:{},99:{f:Pi},125:{f:vae},128:{f:QOe},129:{f:fOe},130:{f:Xi},131:{f:Pi},132:{f:Pi},133:{f:hOe},134:{},140:{f:uDe},141:{f:Xi},144:{},146:{f:hDe},151:{},152:{},153:{},154:{},155:{},156:{f:Xi},157:{},158:{},160:{f:yDe},161:{f:pDe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:ROe},190:{f:MOe},193:{f:h0},197:{},198:{},199:{},200:{},201:{},202:{f:Pi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Xi},220:{},221:{f:Pi},222:{},224:{f:UOe},225:{f:cOe},226:{f:h0},227:{},229:{f:eDe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:mOe},253:{f:IOe},255:{f:gOe},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:cae},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Pi},353:{f:h0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:KOe},431:{f:Pi},432:{},433:{},434:{},437:{},438:{f:sDe},439:{f:Pi},440:{f:iDe},441:{},442:{f:Dw},443:{},444:{f:Xi},445:{},446:{},448:{f:h0},449:{f:yOe,r:2},450:{f:h0},512:{f:x$},513:{f:vDe},515:{f:$Oe},516:{f:POe},517:{f:y$},519:{f:bDe},520:{f:xOe},523:{},545:{f:C$},549:{f:g$},566:{},574:{f:NOe},638:{f:DOe},659:{},1048:{},1054:{f:TOe},1084:{},1212:{f:XOe},2048:{f:lDe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:YC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:h0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ADe,r:12},2173:{f:uRe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Pi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:WOe,r:12},2197:{},2198:{f:aRe,r:12},2199:{},2200:{},2201:{},2202:{f:YOe,r:12},2203:{f:h0},2204:{},2205:{},2206:{},2207:{},2211:{f:vOe},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Xi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:gDe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:fDe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:x$},1:{},2:{f:EDe},3:{f:CDe},4:{f:NDe},5:{f:y$},7:{f:IDe},8:{},9:{f:YC},11:{},22:{f:Xi},30:{f:FOe},31:{},32:{},33:{f:C$},36:{},37:{f:g$},50:{f:jDe},62:{},52:{},67:{},68:{f:Xi},69:{},86:{},126:{},127:{f:wDe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:PDe},223:{},234:{},354:{},421:{},518:{f:k5},521:{f:YC},536:{f:N$},547:{f:w$},561:{},579:{},1030:{f:k5},1033:{f:YC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Or(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&Z6(r)&&t.push(r)}}function I7e(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return Or(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Uw(t,e,r){return t||(t=ir(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function j7e(t,e,r,n){var a=ir(9);return Uw(a,t,e),uae(r,n||"b",a),a}function P7e(t,e,r){var n=ir(8+2*r.length);return Uw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function B7e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Eo(Ps(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?Or(t,2,SDe(r,n,a)):Or(t,3,_De(r,n,a));return;case"b":case"e":Or(t,5,j7e(r,n,e.v,e.t));return;case"s":case"str":Or(t,4,P7e(r,n,(e.v||"").slice(0,255)));return}Or(t,1,Uw(null,r,n))}function T7e(t,e,r,n){var a=Array.isArray(e),s=xa(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Ln(s)}for(var u=s.s.r;u<=s.e.r;++u){l=Qi(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=ri(d)),o=c[d]+l;var f=a?(e[u]||[])[d]:e[o];f&&B7e(t,f,u,d)}}}function k7e(t,e){for(var r=e||{},n=Yc(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Or(n,r.biff==4?1033:r.biff==3?521:9,cR(t,16,r)),T7e(n,t.Sheets[t.SheetNames[a]],a,r),Or(n,10),n.end()}function F7e(t,e,r){Or(t,49,SOe({sz:12,name:"Arial"},r))}function O7e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&Or(t,1054,kOe(a,e[a],r))})}function D7e(t,e){var r=ir(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Or(t,2151,r),r=ir(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),mae(xa(e["!ref"]||"A1"),r),r.write_shift(4,4),Or(t,2152,r)}function R7e(t,e){for(var r=0;r<16;++r)Or(t,224,v$({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Or(t,224,v$(n,0,e))})}function M7e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Or(t,440,oDe(n)),n[1].Tooltip&&Or(t,2048,cDe(n))}delete e["!links"]}function L7e(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&Or(t,125,mDe(lP(a,n),a))})}}function U7e(t,e,r,n,a){var s=16+Rm(a.cellXfs,e,a);if(e.v==null&&!e.bf){Or(t,513,dg(r,n,s));return}if(e.bf)Or(t,6,f8e(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Eo(Ps(e.v)):e.v;Or(t,515,GOe(r,n,o,s));break;case"b":case"e":Or(t,517,HOe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=gR(a.Strings,e.v,a.revStrings);Or(t,253,jOe(r,n,l,s))}else Or(t,516,BOe(r,n,(e.v||"").slice(0,255),s,a));break;default:Or(t,513,dg(r,n,s))}}function Q7e(t,e,r){var n=Yc(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,f="",A=[],h=xa(s["!ref"]||"A1"),m=u?65536:16384;if(h.e.c>255||h.e.r>=m){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}Or(n,2057,cR(r,16,e)),Or(n,13,od(1)),Or(n,12,od(100)),Or(n,15,Ac(!0)),Or(n,17,Ac(!1)),Or(n,16,cg(.001)),Or(n,95,Ac(!0)),Or(n,42,Ac(!1)),Or(n,43,Ac(!1)),Or(n,130,od(1)),Or(n,128,VOe()),Or(n,131,Ac(!1)),Or(n,132,Ac(!1)),u&&L7e(n,s["!cols"]),Or(n,512,OOe(h,e)),u&&(s["!links"]=[]);for(var p=h.s.r;p<=h.e.r;++p){f=Qi(p);for(var x=h.s.c;x<=h.e.c;++x){p===h.s.r&&(A[x]=ri(x)),d=A[x]+f;var v=c?(s[p]||[])[x]:s[d];v&&(U7e(n,v,p,x,e),u&&v.l&&s["!links"].push([d,v.l]))}}var y=l.CodeName||l.name||a;return u&&Or(n,574,COe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&Or(n,229,tDe(s["!merges"])),u&&M7e(n,s),Or(n,442,dae(y)),u&&D7e(n,s),Or(n,10),n.end()}function V7e(t,e,r){var n=Yc(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Or(n,2057,cR(t,5,r)),r.bookType=="xla"&&Or(n,135),Or(n,225,l?od(1200):null),Or(n,193,HFe(2)),c&&Or(n,191),c&&Or(n,192),Or(n,226),Or(n,92,dOe("SheetJS",r)),Or(n,66,od(l?1200:1252)),l&&Or(n,353,od(0)),l&&Or(n,448),Or(n,317,xDe(t.SheetNames.length)),l&&t.vbaraw&&Or(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";Or(n,442,dae(u))}Or(n,156,od(17)),Or(n,25,Ac(!1)),Or(n,18,Ac(!1)),Or(n,19,od(0)),l&&Or(n,431,Ac(!1)),l&&Or(n,444,od(0)),Or(n,61,wOe()),Or(n,64,Ac(!1)),Or(n,141,od(0)),Or(n,34,Ac(yUe(t)=="true")),Or(n,14,Ac(!0)),l&&Or(n,439,Ac(!1)),Or(n,218,od(0)),F7e(n,t,r),O7e(n,t.SSF,r),R7e(n,r),l&&Or(n,352,Ac(!1));var d=n.end(),f=Yc();l&&Or(f,140,dDe()),l&&r.Strings&&I7e(f,252,pOe(r.Strings)),Or(f,10);var A=f.end(),h=Yc(),m=0,p=0;for(p=0;p<t.SheetNames.length;++p)m+=(l?12:11)+(l?2:1)*t.SheetNames[p].length;var x=d.length+m+A.length;for(p=0;p<t.SheetNames.length;++p){var v=s[p]||{};Or(h,133,AOe({pos:x,hs:v.Hidden||0,dt:0,name:t.SheetNames[p]},r)),x+=e[p].length}var y=h.end();if(m!=y.length)throw new Error("BS8 "+m+" != "+y.length);var b=[];return d.length&&b.push(d),y.length&&b.push(y),A.length&&b.push(A),Go(b)}function H7e(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Bs(Nn)),t&&t.SSF&&(g1(),tP(t.SSF),r.revssf=nP(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,wR(r),r.cellXfs=[],Rm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=Q7e(a,r,t);return n.unshift(V7e(t,n,r)),Go(n)}function ase(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Jc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return H7e(t,e);case 4:case 3:case 2:return k7e(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function F$(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var a=t.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=t.match(/<\/table/i),o=a.index,l=s&&s.index||t.length,c=Ske(t.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,A=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var p=c[o].trim(),x=p.slice(0,3).toLowerCase();if(x=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(x!="<td"&&x!="<th")){var v=p.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var y=v[l].trim();if(y.match(/<t[dh]/i)){for(var b=y,w=0;b.charAt(0)=="<"&&(w=b.indexOf(">"))>-1;)b=b.slice(w+1);for(var j=0;j<m.length;++j){var I=m[j];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,j=-1)}var _=Sn(y.slice(0,y.indexOf(">")));A=_.colspan?+_.colspan:1,((f=+_.rowspan)>1||A>1)&&m.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+A-1}});var S=_.t||_["data-t"]||"";if(!b.length){d+=A;continue}if(b=Ine(b),h.s.r>u&&(h.s.r=u),h.e.r<u&&(h.e.r=u),h.s.c>d&&(h.s.c=d),h.e.c<d&&(h.e.c=d),!b.length){d+=A;continue}var E={t:"s",v:b};r.raw||!b.trim().length||S=="s"||(b==="TRUE"?E={t:"b",v:!0}:b==="FALSE"?E={t:"b",v:!1}:isNaN(df(b))?isNaN(Dv(b).getDate())||(E={t:"d",v:Ps(b)},r.cellDates||(E={t:"n",v:Eo(E.v)}),E.z=r.dateNF||Nn[14]):E={t:"n",v:df(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=E):n[Cn({r:u,c:d})]=E,d+=A}}}}return n["!ref"]=Ln(h),m.length&&(n["!merges"]=m),n}function $7e(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Cn({r,c:o}),f=n.dense?(t[r]||[])[o]:t[d],A=f&&f.v!=null&&(f.h||X6(f.w||(pA(f),f.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?A='<span contenteditable="true">'+A+"</span>":f&&(h["data-t"]=f&&f.t||"z",f.v!=null&&(h["data-v"]=f.v),f.z!=null&&(h["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+f.l.Target+'">'+A+"</a>")),h.id=(n.id||"sjs")+"-"+d,s.push(Fr("td",A,h))}}var m="<tr>";return m+s.join("")+"</tr>"}var G7e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',K7e="</body></html>";function q7e(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Dm(F$(r[0],e),e);var n=_R();return r.forEach(function(a,s){ER(n,F$(a,e),"Sheet"+(s+1))}),n}function z7e(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function sse(t,e){var r=e||{},n=r.header!=null?r.header:G7e,a=r.footer!=null?r.footer:K7e,s=[n],o=Jc(t["!ref"]);r.dense=Array.isArray(t),s.push(z7e(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push($7e(t,o,l,r));return s.push("</table>"+a),s.join("")}function ise(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?ni(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Jc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],A=0,h=t["!rows"]||(t["!rows"]=[]),m=0,p=0,x=0,v=0,y=0,b=0;for(t["!cols"]||(t["!cols"]=[]);m<l.length&&p<c;++m){var w=l[m];if(O$(w)){if(n.display)continue;h[p]={hidden:!0}}var j=w.children;for(x=v=0;x<j.length;++x){var I=j[x];if(!(n.display&&O$(I))){var _=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Ine(I.innerHTML),S=I.getAttribute("data-z")||I.getAttribute("z");for(A=0;A<f.length;++A){var E=f[A];E.s.c==v+s&&E.s.r<p+a&&p+a<=E.e.r&&(v=E.e.c+1-s,A=-1)}b=+I.getAttribute("colspan")||1,((y=+I.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:p+a,c:v+s},e:{r:p+a+(y||1)-1,c:v+s+(b||1)-1}});var F={t:"s",v:_},k=I.getAttribute("data-t")||I.getAttribute("t")||"";_!=null&&(_.length==0?F.t=k||"z":n.raw||_.trim().length==0||k=="s"||(_==="TRUE"?F={t:"b",v:!0}:_==="FALSE"?F={t:"b",v:!1}:isNaN(df(_))?isNaN(Dv(_).getDate())||(F={t:"d",v:Ps(_)},n.cellDates||(F={t:"n",v:Eo(F.v)}),F.z=n.dateNF||Nn[14]):F={t:"n",v:df(_)})),F.z===void 0&&S!=null&&(F.z=S);var B="",D=I.getElementsByTagName("A");if(D&&D.length)for(var X=0;X<D.length&&!(D[X].hasAttribute("href")&&(B=D[X].getAttribute("href"),B.charAt(0)!="#"));++X);B&&B.charAt(0)!="#"&&(F.l={Target:B}),n.dense?(t[p+a]||(t[p+a]=[]),t[p+a][v+s]=F):t[Cn({c:v+s,r:p+a})]=F,u.e.c<v+s&&(u.e.c=v+s),v+=b}}++p}return f.length&&(t["!merges"]=(t["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,p-1+a),t["!ref"]=Ln(u),p>=c&&(t["!fullref"]=Ln((u.e.r=l.length-m+p-1+a,u))),t}function ose(t,e){var r=e||{},n=r.dense?[]:{};return ise(n,t,e)}function W7e(t,e){return Dm(ose(t,e),e)}function O$(t){var e="",r=X7e(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function X7e(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Y7e(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ga(e.replace(/<[^>]*>/g,""));return[r]}var D$={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function lse(t,e){var r=e||{},n=Y6(t),a=[],s,o,l={name:""},c="",u=0,d,f,A={},h=[],m=r.dense?[]:{},p,x,v={value:""},y="",b=0,w=[],j=-1,I=-1,_={s:{r:1e6,c:1e7},e:{r:0,c:0}},S=0,E={},F=[],k={},B=0,D=0,X=[],he=1,Ae=1,fe=[],me={Names:[]},ne={},Pe=["",""],Te=[],O={},K="",q=0,U=!1,W=!1,J=0;for(B2.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=B2.exec(n);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"":p[1]==="/"?(_.e.c>=_.s.c&&_.e.r>=_.s.r?m["!ref"]=Ln(_):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=_.e.r&&(m["!fullref"]=m["!ref"],_.e.r=r.sheetRows-1,m["!ref"]=Ln(_)),F.length&&(m["!merges"]=F),X.length&&(m["!rows"]=X),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),h.push(d.name),A[d.name]=m,W=!1):p[0].charAt(p[0].length-2)!=="/"&&(d=Sn(p[0],!1),j=I=-1,_.s.r=_.s.c=1e7,_.e.r=_.e.c=0,m=r.dense?[]:{},F=[],X=[],W=!0);break;case"table-row-group":p[1]==="/"?--S:++S;break;case"table-row":case"":if(p[1]==="/"){j+=he,he=1;break}if(f=Sn(p[0],!1),f.?j=f.-1:j==-1&&(j=0),he=+f["number-rows-repeated"]||1,he<10)for(J=0;J<he;++J)S>0&&(X[j+J]={level:S});I=-1;break;case"covered-table-cell":p[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(m[j]||(m[j]=[]),m[j][I]={t:"z"}):m[Cn({r:j,c:I})]={t:"z"}),y="",w=[];break;case"table-cell":case"":if(p[0].charAt(p[0].length-2)==="/")++I,v=Sn(p[0],!1),Ae=parseInt(v["number-columns-repeated"]||"1",10),x={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(x.f=B$(ga(v.formula))),(v.||v["value-type"])=="string"&&(x.t="s",x.v=ga(v["string-value"]||""),r.dense?(m[j]||(m[j]=[]),m[j][I]=x):m[Cn({r:j,c:I})]=x),I+=Ae-1;else if(p[1]!=="/"){++I,y="",b=0,w=[],Ae=1;var M=he?j+he-1:j;if(I>_.e.c&&(_.e.c=I),I<_.s.c&&(_.s.c=I),j<_.s.r&&(_.s.r=j),M>_.e.r&&(_.e.r=M),v=Sn(p[0],!1),Te=[],O={},x={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=ga(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(B=parseInt(v["number-matrix-rows-spanned"],10)||0,D=parseInt(v["number-matrix-columns-spanned"],10)||0,k={s:{r:j,c:I},e:{r:j+B-1,c:I+D-1}},x.F=Ln(k),fe.push([k,x.F])),v.formula)x.f=B$(v.formula);else for(J=0;J<fe.length;++J)j>=fe[J][0].s.r&&j<=fe[J][0].e.r&&I>=fe[J][0].s.c&&I<=fe[J][0].e.c&&(x.F=fe[J][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(B=parseInt(v["number-rows-spanned"],10)||0,D=parseInt(v["number-columns-spanned"],10)||0,k={s:{r:j,c:I},e:{r:j+B-1,c:I+D-1}},F.push(k)),v["number-columns-repeated"]&&(Ae=parseInt(v["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Es(v["boolean-value"]);break;case"float":x.t="n",x.v=parseFloat(v.value);break;case"percentage":x.t="n",x.v=parseFloat(v.value);break;case"currency":x.t="n",x.v=parseFloat(v.value);break;case"date":x.t="d",x.v=Ps(v["date-value"]),r.cellDates||(x.t="n",x.v=Eo(x.v)),x.z="m/d/yy";break;case"time":x.t="n",x.v=Cke(v["time-value"])/86400,r.cellDates&&(x.t="d",x.v=aP(x.v)),x.z="HH:MM:SS";break;case"number":x.t="n",x.v=parseFloat(v.);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",v["string-value"]!=null&&(y=ga(v["string-value"]),w=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(U=!1,x.t==="s"&&(x.v=y||"",w.length&&(x.R=w),U=b==0),ne.Target&&(x.l=ne),Te.length>0&&(x.c=Te,Te=[]),y&&r.cellText!==!1&&(x.w=y),U&&(x.t="z",delete x.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=j))for(var H=0;H<he;++H){if(Ae=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(m[j+H]||(m[j+H]=[]),m[j+H][I]=H==0?x:Bs(x);--Ae>0;)m[j+H][I+Ae]=Bs(x);else for(m[Cn({r:j+H,c:I})]=x;--Ae>0;)m[Cn({r:j+H,c:I+Ae})]=Bs(x);_.e.c<=I&&(_.e.c=I)}Ae=parseInt(v["number-columns-repeated"]||"1",10),I+=Ae-1,Ae=0,x={},y="",w=[]}ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s;O.t=y,w.length&&(O.R=w),O.a=K,Te.push(O)}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);K="",q=0,y="",b=0,w=[];break;case"creator":p[1]==="/"?K=n.slice(q,p.index):q=p.index+p[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&a.push([p[3],!1]);y="",b=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(E[l.name]=c,(s=a.pop())[0]!==p[3])throw"Bad state: "+s}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=Sn(p[0],!1),a.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Sn(p[0],!1),c+=D$[p[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=Sn(p[0],!1),c+=D$[p[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,p.index);break}else u=p.index+p[0].length;break;case"named-range":o=Sn(p[0],!1),Pe=F5(o["cell-range-address"]);var te={Name:o.name,Ref:Pe[0]+"!"+Pe[1]};W&&(te.Sheet=h.length),me.Names.push(te);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var ve=Y7e(n.slice(b,p.index));y=(y.length>0?y+`
`:"")+ve[0]}else Sn(p[0],!1),b=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{Pe=F5(Sn(p[0])["target-range-address"]),A[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(ne=Sn(p[0],!1),!ne.href)break;ne.Target=ga(ne.href),delete ne.href,ne.Target.charAt(0)=="#"&&ne.Target.indexOf(".")>-1?(Pe=F5(ne.Target.slice(1)),ne.Target="#"+Pe[0]+"!"+Pe[1]):ne.Target.match(/^\.\.[\\\/]/)&&(ne.Target=ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(p)}}var Q={Sheets:A,SheetNames:h,Workbook:me};return r.bookSheets&&delete Q.Sheets,Q}function R$(t,e){e=e||{},id(t,"META-INF/manifest.xml")&&CFe(Wi(t,"META-INF/manifest.xml"),e);var r=bu(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=lse(ts(r),e);return id(t,"meta.xml")&&(n.Props=Jne(Wi(t,"meta.xml"))),n}function M$(t,e){return lse(t,e)}var J7e=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+P2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Hi+e}}(),L$=function(){var t=function(s){return za(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+za(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,f=Jc(s["!ref"]||"A1"),A=s["!merges"]||[],h=0,m=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var p="",x=s["!rows"]||[];for(u=0;u<f.s.r;++u)p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+p+`></table:table-row>
`);for(;u<=f.e.r;++u){for(p=x[u]?' table:style-name="ro'+x[u].ods+'"':"",c.push("        <table:table-row"+p+`>
`),d=0;d<f.s.c;++d)c.push(e);for(;d<=f.e.c;++d){var v=!1,y={},b="";for(h=0;h!=A.length;++h)if(!(A[h].s.c>d)&&!(A[h].s.r>u)&&!(A[h].e.c<d)&&!(A[h].e.r<u)){(A[h].s.c!=d||A[h].s.r!=u)&&(v=!0),y["table:number-columns-spanned"]=A[h].e.c-A[h].s.c+1,y["table:number-rows-spanned"]=A[h].e.r-A[h].s.r+1;break}if(v){c.push(r);continue}var w=Cn({r:u,c:d}),j=m?(s[u]||[])[d]:s[w];if(j&&j.f&&(y["table:formula"]=za(x8e(j.f)),j.F&&j.F.slice(0,w.length)==w)){var I=Jc(j.F);y["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,y["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!j){c.push(e);continue}switch(j.t){case"b":b=j.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=j.v?"true":"false";break;case"n":b=j.w||String(j.v||0),y["office:value-type"]="float",y["office:value"]=j.v||0;break;case"s":case"str":b=j.v==null?"":j.v,y["office:value-type"]="string";break;case"d":b=j.w||Ps(j.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=Ps(j.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(e);continue}var _=t(b);if(j.l&&j.l.Target){var S=j.l.Target;S=S.charAt(0)=="#"?"#"+v8e(S.slice(1)):S,S.charAt(0)!="#"&&!S.match(/^\w+:/)&&(S="../"+S),_=Fr("text:a",_,{"xlink:href":S.replace(/&/g,"&amp;")})}c.push("          "+Fr("table:table-cell",Fr("text:p",_,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Nm(f),f.ods=l;var A=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Hi],u=P2({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=P2({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Yne().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(n(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function cse(t,e){if(e.bookType=="fods")return L$(t,e);var r=q6(),n="",a=[],s=[];return n="mimetype",Hn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Hn(r,n,L$(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Hn(r,n,J7e(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Hn(r,n,Hi+Yne()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Hn(r,n,SFe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Hn(r,n,_Fe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function fg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function aF(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):ts(Om(t))}function Z7e(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):yu(Wf(t))}function e9e(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function _m(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function U$(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function t9e(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,a=e+13;a>=e;--a)n=n*256+t[a];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function r9e(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function M2(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function Va(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function yi(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function ya(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=M2(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=M2(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function ul(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(Va(n*8+a.type)),a.type==2&&e.push(Va(a.data.length)),e.push(a.data))})}),_m(e)}function yR(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function ed(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=M2(t,n),s=ya(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:yi(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=ya(l.data),u=yi(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=yi(s[3][0].data)>>>0>0),r.push(o)}return r}function hx(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:Va(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Va(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Va(o.data.length)}],n[2].push({data:ul(o.meta),type:2})});var s=ul(n);e.push(Va(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),_m(e)}function n9e(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=M2(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[_m(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=_m(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function td(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(n9e(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return _m(e)}function Ax(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=Va(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return _m(e)}function a9e(t,e,r,n){var a=fg(t),s=a.getUint32(4,!0),o=(n>1?12:8)+U$(s&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(l=a.getUint32(o,!0),o+=4),o+=U$(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(o,!0),o+=4),s&32&&(u=a.getFloat64(o,!0),o+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var f;switch(t[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:e[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:e[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return f}function s9e(t,e,r){var n=fg(t),a=n.getUint32(8,!0),s=12,o=-1,l=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=t9e(t,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(l=n.getUint32(s,!0),s+=4),a&16&&(o=n.getUint32(s,!0),s+=4);var f;switch(t[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:e[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t.slice(0,4)))}return f}function D5(t,e){var r=new Uint8Array(32),n=fg(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,r9e(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function R5(t,e){var r=new Uint8Array(32),n=fg(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function i9e(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return a9e(t,e,r,t[0]);case 5:return s9e(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Hl(t){var e=ya(t);return M2(e[1][0].data)}function Q$(t,e){var r=ya(e.data),n=yi(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(o){var l=ya(o.data),c=yi(l[1][0].data)>>>0;switch(n){case 1:s[c]=aF(l[3][0].data);break;case 8:{var u=t[Hl(l[9][0].data)][0],d=ya(u.data),f=t[Hl(d[1][0].data)][0],A=yi(f.meta[1][0].data);if(A!=2001)throw new Error("2000 unexpected reference to ".concat(A));var h=ya(f.data);s[c]=h[3].map(function(m){return aF(m.data)}).join("")}break}}),s}function o9e(t,e){var r,n,a,s,o,l,c,u,d,f,A,h,m,p,x=ya(t),v=yi(x[1][0].data)>>>0,y=yi(x[2][0].data)>>>0,b=((n=(r=x[8])==null?void 0:r[0])==null?void 0:n.data)&&yi(x[8][0].data)>0||!1,w,j;if((s=(a=x[7])==null?void 0:a[0])!=null&&s.data&&e!=0)w=(l=(o=x[7])==null?void 0:o[0])==null?void 0:l.data,j=(u=(c=x[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=x[4])==null?void 0:d[0])!=null&&f.data&&e!=1)w=(h=(A=x[4])==null?void 0:A[0])==null?void 0:h.data,j=(p=(m=x[3])==null?void 0:m[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var I=b?4:1,_=fg(w),S=[],E=0;E<w.length/2;++E){var F=_.getUint16(E*2,!0);F<65535&&S.push([E,F])}if(S.length!=y)throw"Expected ".concat(y," cells, found ").concat(S.length);var k=[];for(E=0;E<S.length-1;++E)k[S[E][0]]=j.subarray(S[E][1]*I,S[E+1][1]*I);return S.length>=1&&(k[S[S.length-1][0]]=j.subarray(S[S.length-1][1]*I)),{R:v,cells:k}}function l9e(t,e){var r,n=ya(e.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?yi(n[7][0].data)>>>0>0?1:0:-1,s=yR(n[5],function(o){return o9e(o,a)});return{nrows:yi(n[4][0].data)>>>0,data:s.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function c9e(t,e,r){var n,a=ya(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(yi(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(yi(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Ln(s);var o=ya(a[4][0].data),l=Q$(t,t[Hl(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?Q$(t,t[Hl(o[17][0].data)][0]):[],u=ya(o[3][0].data),d=0;u[1].forEach(function(f){var A=ya(f.data),h=t[Hl(A[2][0].data)][0],m=yi(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var p=l9e(t,h);p.data.forEach(function(x,v){x.forEach(function(y,b){var w=Cn({r:d+v,c:b}),j=i9e(y,l,c);j&&(r[w]=j)})}),d+=p.nrows})}function u9e(t,e){var r=ya(e.data),n={"!ref":"A1"},a=t[Hl(r[2][0].data)],s=yi(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return c9e(t,a[0],n),n}function d9e(t,e){var r,n=ya(e.data),a={name:(r=n[1])!=null&&r[0]?aF(n[1][0].data):"",sheets:[]},s=yR(n[2],Hl);return s.forEach(function(o){t[o].forEach(function(l){var c=yi(l.meta[1][0].data);c==6e3&&a.sheets.push(u9e(t,l))})}),a}function f9e(t,e){var r=_R(),n=ya(e.data),a=yR(n[1],Hl);if(a.forEach(function(s){t[s].forEach(function(o){var l=yi(o.meta[1][0].data);if(l==2){var c=d9e(t,o);c.sheets.forEach(function(u,d){ER(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function M5(t){var e,r,n,a,s={},o=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=td(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=ed(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&yi(s[1][0].meta[1][0].data)==1&&s[1][0];if(l||o.forEach(function(c){s[c].forEach(function(u){var d=yi(u.meta[1][0].data)>>>0;if(d==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return f9e(s,l)}function h9e(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&yi(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=fg(t[7][0].data),d=0,f=[],A=fg(t[4][0].data),h=0,m=[],p=0;p<e.length;++p){if(e[p]==null){u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535);continue}u.setUint16(p*2,d,!0),A.setUint16(p*2,h,!0);var x,v;switch(typeof e[p]){case"string":x=D5({t:"s",v:e[p]},r),v=R5({t:"s",v:e[p]},r);break;case"number":x=D5({t:"n",v:e[p]},r),v=R5({t:"n",v:e[p]},r);break;case"boolean":x=D5({t:"b",v:e[p]},r),v=R5({t:"b",v:e[p]},r);break;default:throw new Error("Unsupported value "+e[p])}f.push(x),d+=x.length,m.push(v),h+=v.length,++c}for(t[2][0].data=Va(c);p<t[7][0].data.length/2;++p)u.setUint16(p*2,65535,!0),A.setUint16(p*2,65535,!0);return t[6][0].data=_m(f),t[3][0].data=_m(m),c}function A9e(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Jc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Ln(n)));var s=WS(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(K){return K.forEach(function(q){typeof q=="string"&&o.push(q)})});var l={},c=[],u=gn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(K,q){return[K,u.FullPaths[q]]}).forEach(function(K){var q=K[0],U=K[1];if(q.type==2&&q.name.match(/\.iwa/)){var W=q.content,J=td(W),M=ed(J);M.forEach(function(H){c.push(H.id),l[H.id]={deps:[],location:U,type:yi(H.messages[0].meta[1][0].data)}})}}),c.sort(function(K,q){return K-q});var d=c.filter(function(K){return K>1}).map(function(K){return[K,Va(K)]});u.FileIndex.map(function(K,q){return[K,u.FullPaths[q]]}).forEach(function(K){var q=K[0];if(K[1],!!q.name.match(/\.iwa/)){var U=ed(td(q.content));U.forEach(function(W){W.messages.forEach(function(J){d.forEach(function(M){W.messages.some(function(H){return yi(H.meta[1][0].data)!=11006&&e9e(H.data,M[1])})&&l[M[0]].deps.push(W.id)})})})}});for(var f=gn.find(u,l[1].location),A=ed(td(f.content)),h,m=0;m<A.length;++m){var p=A[m];p.id==1&&(h=p)}var x=Hl(ya(h.messages[0].data)[1][0].data);for(f=gn.find(u,l[x].location),A=ed(td(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);for(x=Hl(ya(h.messages[0].data)[2][0].data),f=gn.find(u,l[x].location),A=ed(td(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);for(x=Hl(ya(h.messages[0].data)[2][0].data),f=gn.find(u,l[x].location),A=ed(td(f.content)),m=0;m<A.length;++m)p=A[m],p.id==x&&(h=p);var v=ya(h.messages[0].data);{v[6][0].data=Va(n.e.r+1),v[7][0].data=Va(n.e.c+1);var y=Hl(v[46][0].data),b=gn.find(u,l[y].location),w=ed(td(b.content));{for(var j=0;j<w.length&&w[j].id!=y;++j);if(w[j].id!=y)throw"Bad ColumnRowUIDMapArchive";var I=ya(w[j].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var _=0;_<=n.e.c;++_){var S=[];S[1]=S[2]=[{type:0,data:Va(_+420690)}],I[1].push({type:2,data:ul(S)}),I[2].push({type:0,data:Va(_)}),I[3].push({type:0,data:Va(_)})}I[4]=[],I[5]=[],I[6]=[];for(var E=0;E<=n.e.r;++E)S=[],S[1]=S[2]=[{type:0,data:Va(E+726270)}],I[4].push({type:2,data:ul(S)}),I[5].push({type:0,data:Va(E)}),I[6].push({type:0,data:Va(E)});w[j].messages[0].data=ul(I)}b.content=Ax(hx(w)),b.size=b.content.length,delete v[46];var F=ya(v[4][0].data);{F[7][0].data=Va(n.e.r+1);var k=ya(F[1][0].data),B=Hl(k[2][0].data);b=gn.find(u,l[B].location),w=ed(td(b.content));{if(w[0].id!=B)throw"Bad HeaderStorageBucket";var D=ya(w[0].messages[0].data);for(E=0;E<s.length;++E){var X=ya(D[2][0].data);X[1][0].data=Va(E),X[4][0].data=Va(s[E].length),D[2][E]={type:D[2][0].type,data:ul(X)}}w[0].messages[0].data=ul(D)}b.content=Ax(hx(w)),b.size=b.content.length;var he=Hl(F[2][0].data);b=gn.find(u,l[he].location),w=ed(td(b.content));{if(w[0].id!=he)throw"Bad HeaderStorageBucket";for(D=ya(w[0].messages[0].data),_=0;_<=n.e.c;++_)X=ya(D[2][0].data),X[1][0].data=Va(_),X[4][0].data=Va(n.e.r+1),D[2][_]={type:D[2][0].type,data:ul(X)};w[0].messages[0].data=ul(D)}b.content=Ax(hx(w)),b.size=b.content.length;var Ae=Hl(F[4][0].data);(function(){for(var K=gn.find(u,l[Ae].location),q=ed(td(K.content)),U,W=0;W<q.length;++W){var J=q[W];J.id==Ae&&(U=J)}var M=ya(U.messages[0].data);{M[3]=[];var H=[];o.forEach(function(Q,Ke){H[1]=[{type:0,data:Va(Ke)}],H[2]=[{type:0,data:Va(1)}],H[3]=[{type:2,data:Z7e(Q)}],M[3].push({type:2,data:ul(H)})})}U.messages[0].data=ul(M);var te=hx(q),ve=Ax(te);K.content=ve,K.size=K.content.length})();var fe=ya(F[3][0].data);{var me=fe[1][0];delete fe[2];var ne=ya(me.data);{var Pe=Hl(ne[2][0].data);(function(){for(var K=gn.find(u,l[Pe].location),q=ed(td(K.content)),U,W=0;W<q.length;++W){var J=q[W];J.id==Pe&&(U=J)}var M=ya(U.messages[0].data);{delete M[6],delete fe[7];var H=new Uint8Array(M[5][0].data);M[5]=[];for(var te=0,ve=0;ve<=n.e.r;++ve){var Q=ya(H);te+=h9e(Q,s[ve],o),Q[1][0].data=Va(ve),M[5].push({data:ul(Q),type:2})}M[1]=[{type:0,data:Va(n.e.c+1)}],M[2]=[{type:0,data:Va(n.e.r+1)}],M[3]=[{type:0,data:Va(te)}],M[4]=[{type:0,data:Va(n.e.r+1)}]}U.messages[0].data=ul(M);var Ke=hx(q),ae=Ax(Ke);K.content=ae,K.size=K.content.length})()}me.data=ul(ne)}F[3][0].data=ul(fe)}v[4][0].data=ul(F)}h.messages[0].data=ul(v);var Te=hx(A),O=Ax(Te);return f.content=O,f.size=f.content.length,u}function use(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function bR(t){use([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function wR(t){use([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function m9e(t){return Jn.WS.indexOf(t)>-1?"sheet":t==Jn.CS?"chart":t==Jn.DS?"dialog":t==Jn.MS?"macro":t&&t.length?t:"sheet"}function p9e(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,m9e(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function g9e(t,e,r,n,a,s,o,l,c,u,d,f){try{s[n]=Pb(bu(t,r,!0),e);var A=Wi(t,e),h;switch(l){case"sheet":h=LUe(A,e,a,c,s[n],u,d,f);break;case"chart":if(h=UUe(A,e,a,c,s[n],u,d,f),!h||!h["!drawel"])break;var m=Wy(h["!drawel"].Target,e),p=T2(m),x=ERe(bu(t,m,!0),Pb(bu(t,p,!0),m)),v=Wy(x,m),y=T2(v);h=hUe(bu(t,v,!0),v,c,Pb(bu(t,y,!0),v),u,h);break;case"macro":h=QUe(A,e,a,c,s[n],u,d,f);break;case"dialog":h=VUe(A,e,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var b=[];s&&s[n]&&wi(s[n]).forEach(function(w){var j="";if(s[n][w].Type==Jn.CMNT){j=Wy(s[n][w].Target,e);var I=KUe(Wi(t,j,!0),j,c);if(!I||!I.length)return;E$(h,I,!1)}s[n][w].Type==Jn.TCMNT&&(j=Wy(s[n][w].Target,e),b=b.concat(IRe(Wi(t,j,!0),c)))}),b&&b.length&&E$(h,b,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function zu(t){return t.charAt(0)=="/"?t.slice(1):t}function x9e(t,e){if(g1(),e=e||{},bR(e),id(t,"META-INF/manifest.xml")||id(t,"objectdata.xml"))return R$(t,e);if(id(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof M5<"u"){if(t.FileIndex)return M5(t);var r=gn.utils.cfb_new();return qH(t).forEach(function(X){Hn(r,X,jke(t,X))}),M5(r)}throw new Error("Unsupported NUMBERS file")}if(!id(t,"[Content_Types].xml"))throw id(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):id(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=qH(t),a=wFe(bu(t,"[Content_Types].xml")),s=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Wi(t,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Wi(t,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(Bb=[],a.sst)try{Bb=GUe(Wi(t,zu(a.sst)),a.sst,e)}catch(X){if(e.WTF)throw X}e.cellStyles&&a.themes.length&&(c=$Ue(bu(t,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],e)),a.style&&(u=HUe(Wi(t,zu(a.style)),a.style,c,e))}a.links.map(function(X){try{var he=Pb(bu(t,T2(zu(X))),X);return zUe(Wi(t,zu(X)),he,X,e)}catch{}});var d=MUe(Wi(t,zu(a.workbooks[0])),a.workbooks[0],e),f={},A="";a.coreprops.length&&(A=Wi(t,zu(a.coreprops[0]),!0),A&&(f=Jne(A)),a.extprops.length!==0&&(A=Wi(t,zu(a.extprops[0]),!0),A&&jFe(A,f,e)));var h={};(!e.bookSheets||e.bookProps)&&a.custprops.length!==0&&(A=bu(t,zu(a.custprops[0]),!0),A&&(h=BFe(A,e)));var m={};if((e.bookSheets||e.bookProps)&&(d.Sheets?o=d.Sheets.map(function(he){return he.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),e.bookProps&&(m.Props=f,m.Custprops=h),e.bookSheets&&typeof o<"u"&&(m.SheetNames=o),e.bookSheets?m.SheetNames:e.bookProps))return m;o={};var p={};e.bookDeps&&a.calcchain&&(p=qUe(Wi(t,zu(a.calcchain)),a.calcchain));var x=0,v={},y,b;{var w=d.Sheets;f.Worksheets=w.length,f.SheetNames=[];for(var j=0;j!=w.length;++j)f.SheetNames[j]=w[j].name}var I=s?"bin":"xml",_=a.workbooks[0].lastIndexOf("/"),S=(a.workbooks[0].slice(0,_+1)+"_rels/"+a.workbooks[0].slice(_+1)+".rels").replace(/^\//,"");id(t,S)||(S="xl/_rels/workbook."+I+".rels");var E=Pb(bu(t,S,!0),S.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(e.xlmeta=WUe(Wi(t,zu(a.metadata[0])),a.metadata[0],e)),(a.people||[]).length>=1&&(e.people=PRe(Wi(t,zu(a.people[0])),e)),E&&(E=p9e(E,d.Sheets));var F=Wi(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=f.Worksheets;++x){var k="sheet";if(E&&E[x]?(y="xl/"+E[x][1].replace(/[\/]?xl\//,""),id(t,y)||(y=E[x][1]),id(t,y)||(y=S.replace(/_rels\/.*$/,"")+E[x][1]),k=E[x][2]):(y="xl/worksheets/sheet"+(x+1-F)+"."+I,y=y.replace(/sheet0\./,"sheet.")),b=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(x!=e.sheets)continue e;break;case"string":if(f.SheetNames[x].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var B=!1,D=0;D!=e.sheets.length;++D)typeof e.sheets[D]=="number"&&e.sheets[D]==x&&(B=1),typeof e.sheets[D]=="string"&&e.sheets[D].toLowerCase()==f.SheetNames[x].toLowerCase()&&(B=1);if(!B)continue e}}g9e(t,y,b,f.SheetNames[x],x,v,o,k,e,d,c,u)}return m={Directory:a,Workbook:d,Props:f,Custprops:h,Deps:p,Sheets:o,SheetNames:f.SheetNames,Strings:Bb,Styles:u,Themes:c,SSF:Bs(Nn)},e&&e.bookFiles&&(t.files?(m.keys=n,m.files=t.files):(m.keys=[],m.files={},t.FullPaths.forEach(function(X,he){X=X.replace(/^Root Entry[\/]/,""),m.keys.push(X),m.files[X]=t.FileIndex[he]}))),e&&e.bookVBA&&(a.vba.length>0?m.vbaraw=Wi(t,zu(a.vba[0]),!0):a.defaults&&a.defaults.bin===MRe&&(m.vbaraw=Wi(t,"xl/vbaProject.bin",!0))),m}function v9e(t,e){var r=e||{},n="Workbook",a=gn.find(t,n);try{if(n="/!DataSpaces/Version",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(WDe(a.content),n="/!DataSpaces/DataSpaceMap",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=YDe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=JDe(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);e6e(a.content)}catch{}if(n="/EncryptionInfo",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=t6e(a.content);if(n="/EncryptedPackage",a=gn.find(t,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function y9e(t,e){return e.bookType=="ods"?cse(t,e):e.bookType=="numbers"?A9e(t,e):e.bookType=="xlsb"?b9e(t,e):w9e(t,e)}function b9e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Bs(Nn)),t&&t.SSF&&(g1(),tP(t.SSF),e.revssf=nP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Tb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Rae.indexOf(e.bookType)>-1,a=oR();wR(e=e||{});var s=q6(),o="",l=0;if(e.cellXfs=[],Rm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Hn(s,o,Zne(t.Props,e)),a.coreprops.push(o),$a(e.rels,2,o,Jn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,Hn(s,o,rae(t.Props)),a.extprops.push(o),$a(e.rels,3,o,Jn.EXT_PROPS),t.Custprops!==t.Props&&wi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Hn(s,o,nae(t.Custprops)),a.custprops.push(o),$a(e.rels,4,o,Jn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},f=t.Sheets[t.SheetNames[l-1]],A=(f||{})["!type"]||"sheet";switch(A){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Hn(s,o,YUe(l-1,o,e,t,d)),a.sheets.push(o),$a(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Jn.WS[0])}if(f){var h=f["!comments"],m=!1,p="";h&&h.length>0&&(p="xl/comments"+l+"."+r,Hn(s,p,e7e(h,p)),a.comments.push(p),$a(d,-1,"../comments"+l+"."+r,Jn.CMNT),m=!0),f["!legacy"]&&m&&Hn(s,"xl/drawings/vmlDrawing"+l+".vml",Oae(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Hn(s,T2(o),fv(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Hn(s,o,ZUe(e.Strings,o,e)),a.strs.push(o),$a(e.wbrels,-1,"sharedStrings."+r,Jn.SST)),o="xl/workbook."+r,Hn(s,o,XUe(t,o)),a.workbooks.push(o),$a(e.rels,1,o,Jn.WB),o="xl/theme/theme1.xml",Hn(s,o,hR(t.Themes,e)),a.themes.push(o),$a(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),o="xl/styles."+r,Hn(s,o,JUe(t,o,e)),a.styles.push(o),$a(e.wbrels,-1,"styles."+r,Jn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Hn(s,o,t.vbaraw),a.vba.push(o),$a(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),o="xl/metadata."+r,Hn(s,o,t7e(o)),a.metadata.push(o),$a(e.wbrels,-1,"metadata."+r,Jn.XLMETA),Hn(s,"[Content_Types].xml",Xne(a,e)),Hn(s,"_rels/.rels",fv(e.rels)),Hn(s,"xl/_rels/workbook."+r+".rels",fv(e.wbrels)),delete e.revssf,delete e.ssf,s}function w9e(t,e){Wx=1024,t&&!t.SSF&&(t.SSF=Bs(Nn)),t&&t.SSF&&(g1(),tP(t.SSF),e.revssf=nP(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Tb?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Rae.indexOf(e.bookType)>-1,a=oR();wR(e=e||{});var s=q6(),o="",l=0;if(e.cellXfs=[],Rm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Hn(s,o,Zne(t.Props,e)),a.coreprops.push(o),$a(e.rels,2,o,Jn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,Hn(s,o,rae(t.Props)),a.extprops.push(o),$a(e.rels,3,o,Jn.EXT_PROPS),t.Custprops!==t.Props&&wi(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Hn(s,o,nae(t.Custprops)),a.custprops.push(o),$a(e.rels,4,o,Jn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var f={"!id":{}},A=t.Sheets[t.SheetNames[l-1]],h=(A||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Hn(s,o,zae(l-1,e,t,f)),a.sheets.push(o),$a(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Jn.WS[0])}if(A){var m=A["!comments"],p=!1,x="";if(m&&m.length>0){var v=!1;m.forEach(function(y){y[1].forEach(function(b){b.T==!0&&(v=!0)})}),v&&(x="xl/threadedComments/threadedComment"+l+"."+r,Hn(s,x,jRe(m,d,e)),a.threadedcomments.push(x),$a(f,-1,"../threadedComments/threadedComment"+l+"."+r,Jn.TCMNT)),x="xl/comments"+l+"."+r,Hn(s,x,Dae(m)),a.comments.push(x),$a(f,-1,"../comments"+l+"."+r,Jn.CMNT),p=!0}A["!legacy"]&&p&&Hn(s,"xl/drawings/vmlDrawing"+l+".vml",Oae(l,A["!comments"])),delete A["!comments"],delete A["!legacy"]}f["!id"].rId1&&Hn(s,T2(o),fv(f))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,Hn(s,o,Nae(e.Strings,e)),a.strs.push(o),$a(e.wbrels,-1,"sharedStrings."+r,Jn.SST)),o="xl/workbook."+r,Hn(s,o,Zae(t)),a.workbooks.push(o),$a(e.rels,1,o,Jn.WB),o="xl/theme/theme1.xml",Hn(s,o,hR(t.Themes,e)),a.themes.push(o),$a(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),o="xl/styles."+r,Hn(s,o,Bae(t,e)),a.styles.push(o),$a(e.wbrels,-1,"styles."+r,Jn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",Hn(s,o,t.vbaraw),a.vba.push(o),$a(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),o="xl/metadata."+r,Hn(s,o,Fae()),a.metadata.push(o),$a(e.wbrels,-1,"metadata."+r,Jn.XLMETA),d.length>1&&(o="xl/persons/person.xml",Hn(s,o,BRe(d)),a.people.push(o),$a(e.wbrels,-1,"persons/person.xml",Jn.PEOPLE)),Hn(s,"[Content_Types].xml",Xne(a,e)),Hn(s,"_rels/.rels",fv(e.rels)),Hn(s,"xl/_rels/workbook."+r+".rels",fv(e.wbrels)),delete e.revssf,delete e.ssf,s}function NR(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ku(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function N9e(t,e){return gn.find(t,"EncryptedPackage")?v9e(t,e):nse(t,e)}function C9e(t,e){var r,n=t,a=e||{};return a.type||(a.type=Kn&&Buffer.isBuffer(t)?"buffer":"base64"),r=_ne(n,a),x9e(r,a)}function dse(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return rF(t.slice(r),e);default:break e}return Rv.to_workbook(t,e)}function _9e(t,e){var r="",n=NR(t,e);switch(e.type){case"base64":r=ku(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=lg(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ts(r)),e.type="binary",dse(r,e)}function E9e(t,e){var r=t;return e.type=="base64"&&(r=ku(r)),r=E2.utils.decode(1200,r.slice(2),"str"),e.type="binary",dse(r,e)}function S9e(t){return t.match(/[^\x00-\x7F]/)?Wf(t):t}function L5(t,e,r,n){return n?(r.type="string",Rv.to_workbook(t,r)):Rv.to_workbook(e,r)}function Lv(t,e){V6();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Lv(new Uint8Array(t),(r=Bs(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Av={},r.dateNF&&(Av.dateNF=r.dateNF),r.type||(r.type=Kn&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Kn?"buffer":"binary",n=bke(t),typeof Uint8Array<"u"&&!Kn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=S9e(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Bs(r),r.type="array",Lv(H6(n),r)}switch((a=NR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return N9e(gn.read(n,r),r);break;case 9:if(a[1]<=8)return nse(n,r);break;case 60:return rF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return TDe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return bae.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?C9e(n,r):L5(t,n,r,s);case 239:return a[3]===60?rF(n,r):L5(t,n,r,s);case 255:if(a[1]===254)return E9e(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Mp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Mp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return tF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Iae.to_workbook(n,r);break;case 10:case 13:case 32:return _9e(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return BDe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?tF.to_workbook(n,r):L5(t,n,r,s)}function fse(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return kw(e.file,gn.write(t,{type:Kn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return gn.write(t,e)}function I9e(t,e){var r=Bs(e||{}),n=y9e(t,r);return j9e(n,r)}function j9e(t,e){var r={},n=Kn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?gn.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(eP(a))}return e.password&&typeof encrypt_agile<"u"?fse(encrypt_agile(a,e.password),e):e.type==="file"?kw(e.file,a):e.type=="string"?ts(a):a}function P9e(t,e){var r=e||{},n=S7e(t,r);return fse(n,r)}function Lf(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return S2(Wf(n));case"binary":return Wf(n);case"string":return t;case"file":return kw(e.file,n,"utf8");case"buffer":return Kn?BA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Lf(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function B9e(t,e){switch(e.type){case"base64":return S2(t);case"binary":return t;case"string":return t;case"file":return kw(e.file,t,"binary");case"buffer":return Kn?BA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function t_(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?S2(r):e.type=="string"?ts(r):r;case"file":return kw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function cP(t,e){V6(),NUe(t);var r=Bs(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=cP(t,r);return r.type="array",eP(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Lf(y7e(t,r),r);case"slk":case"sylk":return Lf(yae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return Lf(sse(t.Sheets[t.SheetNames[a]],r),r);case"txt":return B9e(hse(t.Sheets[t.SheetNames[a]],r),r);case"csv":return Lf(CR(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return Lf(bae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return t_(tF.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return Lf(Rv.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return Lf(Iae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return Lf(wae.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return Lf(cse(t,r),r);case"wk1":return t_(Mp.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return t_(Mp.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),t_(ase(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),P9e(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return I9e(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function T9e(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function zS(t,e,r){var n={};return n.type="file",n.file=e,T9e(n),cP(t,n)}function k9e(t,e,r,n,a,s,o,l){var c=Qi(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,A=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:r,enumerable:!1})}catch{A.__rowNum__=r}else A.__rowNum__=r;if(!o||t[r])for(var h=e.s.c;h<=e.e.c;++h){var m=o?t[r][h]:t[n[h]+c];if(m===void 0||m.t===void 0){if(u===void 0)continue;s[h]!=null&&(A[s[h]]=u);continue}var p=m.v;switch(m.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(s[h]!=null){if(p==null)if(m.t=="e"&&p===null)A[s[h]]=null;else if(u!==void 0)A[s[h]]=u;else if(d&&p===null)A[s[h]]=null;else continue;else A[s[h]]=d&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?p:pA(m,p,l);p!=null&&(f=!1)}}return{row:A,isempty:f}}function WS(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=xa(d);break;case"number":c=xa(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Qi(c.s.r),A=[],h=[],m=0,p=0,x=Array.isArray(t),v=c.s.r,y=0,b={};x&&!t[v]&&(t[v]=[]);var w=u.skipHidden&&t["!cols"]||[],j=u.skipHidden&&t["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(w[y]||{}).hidden)switch(A[y]=ri(y),r=x?t[v][y]:t[A[y]+f],n){case 1:s[y]=y-c.s.c;break;case 2:s[y]=A[y];break;case 3:s[y]=u.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=pA(r,null,u),p=b[o]||0,!p)b[o]=1;else{do l=o+"_"+p++;while(b[l]);b[o]=p,b[l]=1}s[y]=l}for(v=c.s.r+a;v<=c.e.r;++v)if(!(j[v]||{}).hidden){var I=k9e(t,c,v,A,n,s,x,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(h[m++]=I.row)}return h.length=m,h}var V$=/"/g;function F9e(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",f=Qi(r),A=e.s.c;A<=e.e.c;++A)if(n[A]){var h=l.dense?(t[r]||[])[A]:t[n[A]+f];if(h==null)d="";else if(h.v!=null){c=!1,d=""+(l.rawNumbers&&h.t=="n"?h.v:pA(h,null,l));for(var m=0,p=0;m!==d.length;++m)if((p=d.charCodeAt(m))===a||p===s||p===34||l.forceQuotes){d='"'+d.replace(V$,'""')+'"';break}d=="ID"&&(d='"ID"')}else h.f!=null&&!h.F?(c=!1,d="="+h.f,d.indexOf(",")>=0&&(d='"'+d.replace(V$,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function CR(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=xa(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(t);for(var A=n.skipHidden&&t["!cols"]||[],h=n.skipHidden&&t["!rows"]||[],m=a.s.c;m<=a.e.c;++m)(A[m]||{}).hidden||(f[m]=ri(m));for(var p=0,x=a.s.r;x<=a.e.r;++x)(h[x]||{}).hidden||(d=F9e(t,a,x,f,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((p++?l:"")+d)));return delete n.dense,r.join("")}function hse(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=CR(t,e);return r}function O9e(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=xa(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=ri(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=Qi(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function Ase(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ni(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var f=xa(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(o=f.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var A=n.header||[],h=0;e.forEach(function(p,x){wi(p).forEach(function(v){(h=A.indexOf(v))==-1&&(A[h=A.length]=v);var y=p[v],b="z",w="",j=Cn({c:l+h,r:o+x+a});u=L2(s,j),y&&typeof y=="object"&&!(y instanceof Date)?s[j]=y:(typeof y=="number"?b="n":typeof y=="boolean"?b="b":typeof y=="string"?b="s":y instanceof Date?(b="d",n.cellDates||(b="n",y=Eo(y)),w=n.dateNF||Nn[14]):y===null&&n.nullError&&(b="e",y=0),u?(u.t=b,u.v=y,delete u.w,delete u.R,w&&(u.z=w)):s[j]=u={t:b,v:y},w&&(u.z=w))})}),d.e.c=Math.max(d.e.c,l+A.length-1);var m=Qi(o);if(a)for(h=0;h<A.length;++h)s[ri(h+l)+m]={t:"s",v:A[h]};return s["!ref"]=Ln(d),s}function D9e(t,e){return Ase(null,t,e)}function L2(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=ni(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?L2(t,Cn(e)):L2(t,Cn({r:e,c:r||0}))}function R9e(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function _R(){return{SheetNames:[],Sheets:{}}}function ER(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Jae(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function M9e(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=R9e(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function L9e(t,e){return t.z=e,t}function mse(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function U9e(t,e,r){return mse(t,"#"+e,r)}function Q9e(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function V9e(t,e,r,n){for(var a=typeof e!="string"?e:xa(e),s=typeof e=="string"?e:Ln(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=L2(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var ls={encode_col:ri,encode_row:Qi,encode_cell:Cn,encode_range:Ln,decode_col:tR,decode_row:eR,split_cell:Zke,decode_cell:ni,decode_range:Jc,format_cell:pA,sheet_add_aoa:Hne,sheet_add_json:Ase,sheet_add_dom:ise,aoa_to_sheet:x1,json_to_sheet:D9e,table_to_sheet:ose,table_to_book:W7e,sheet_to_csv:CR,sheet_to_txt:hse,sheet_to_json:WS,sheet_to_html:sse,sheet_to_formulae:O9e,sheet_to_row_object_array:WS,sheet_get_cell:L2,book_new:_R,book_append_sheet:ER,book_set_sheet_visibility:M9e,cell_set_number_format:L9e,cell_set_hyperlink:mse,cell_set_internal_link:U9e,cell_add_comment:Q9e,sheet_set_array_formula:V9e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const U5=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Za(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Th(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function A0(t,e=1){const r=Math.floor(Th(t,e));return r>0?r:e}function H9e(t){return Object.values(t||{}).every(r=>Za(r)==="")}function Wm(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(Za(a),a));for(const a of e){const s=n.get(Za(a));if(s!=null)return t[s]}}function $9e({open:t,code:e,onClose:r}){return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-lg border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{className:"font-bold text-lg",children:"Cdigo de barras"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Valor"}),i.jsx("div",{className:"text-xl font-mono font-semibold break-all",children:e})]}),i.jsx("div",{className:"mt-3 flex gap-2 justify-end",children:i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>{var n;try{(n=navigator.clipboard)==null||n.writeText(e)}catch{}},children:"Copiar"})})]})}):null}function G9e({open:t,onClose:e,onDetected:r}){const n=g.useRef(null),a=g.useRef(null),[s,o]=g.useState(""),l=g.useRef("");return g.useEffect(()=>{if(!t)return;let c=!1;const u=new _2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(x=>x.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function K9e(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(0),[m,p]=g.useState(1),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(null),[I,_]=g.useState(""),[S,E]=g.useState(""),[F,k]=g.useState(0),[B,D]=g.useState(1),[X,he]=g.useState(""),[Ae,fe]=g.useState(""),[me,ne]=g.useState(""),[Pe,Te]=g.useState(""),[O,K]=g.useState(""),[q,U]=g.useState(!1),[W,J]=g.useState(""),[M,H]=g.useState(!1),[te,ve]=g.useState("create"),[Q,Ke]=g.useState(!1),[ae,ee]=g.useState(""),[Fe,ce]=g.useState([]),[be,Ve]=g.useState([]),[We,pt]=g.useState(!1),[wt,Ct]=g.useState(!1);g.useEffect(()=>{var xe;const st=window.matchMedia("(max-width: 900px)"),_e=()=>Ct(st.matches);return _e(),(xe=st.addEventListener)==null||xe.call(st,"change",_e),()=>{var ie;return(ie=st.removeEventListener)==null?void 0:ie.call(st,"change",_e)}},[]);const[St,Rt]=g.useState(!0),[jt,Ue]=g.useState(!0);g.useEffect(()=>{wt?(Rt(!1),Ue(!1)):(Rt(!0),Ue(!0))},[wt]);const[Be,ye]=g.useState(null),oe=g.useRef(!1),Z=g.useRef(null);g.useEffect(()=>{n(!0),s("");const st=yt(ke,"products_candies"),_e=ar(st,wn("name","asc")),xe=vd(_e,ie=>{const Oe=[],le={};ie.forEach(P=>{const R=P.data(),L=String(R.barcode||"").trim()||void 0;L&&(le[P.id]=L),Oe.push({id:P.id,name:R.name||"",category:R.category||"",providerPrice:Number(R.providerPrice||0),unitsPerPackage:Number(R.unitsPerPackage||1),barcode:L,packaging:String(R.packaging||R.empaque||"").trim()||void 0,createdAt:R.createdAt})});const De=Ne.current||{};let He=!1;for(const P of Object.keys(le))if((le[P]||"")!==(De[P]||"")){He=!0;break}l(Oe),Ne.current=le,n(!1),!Re.current&&He&&(s(" Catlogo actualizado."),setTimeout(()=>s(""),3e3)),Re.current=!1},ie=>{console.error(ie),s(" Error sincronizando catlogo de dulces."),n(!1)});return()=>xe()},[t]);const Ne=g.useRef({}),Re=g.useRef(!0),ge=g.useMemo(()=>{const st=Za(me),_e=String(Pe||"").trim(),xe=String(O||"").trim().toLowerCase();return xe?o.filter(ie=>String(ie.packaging||"").trim().toLowerCase()===xe):!st&&!_e?o:o.filter(ie=>{const Oe=`${ie.category} ${ie.name}`.toLowerCase(),le=st?Oe.includes(st):!0,De=String(ie.barcode||""),He=_e?De.includes(_e):!0;return le&&He})},[o,me,Pe,O]),Xe=g.useMemo(()=>{const st=new Set;return o.forEach(_e=>{const xe=String(_e.category||"").trim();xe&&st.add(xe)}),Array.from(st).sort((_e,xe)=>_e.localeCompare(xe,"es"))},[o]),vt=()=>{u(""),f(""),h(0),p(1),v(""),b("")},it=async st=>{if(st.preventDefault(),oe.current||r)return;s("");const _e=String(c||"").trim(),xe=String(d||"").trim(),ie=Math.max(0,Th(A,0)),Oe=A0(m,1),le=String(x||"").trim();if(!_e)return s(" La categora es requerida.");if(!xe)return s(" El nombre del producto es requerido.");if(ie<=0)return s(" El precio proveedor debe ser > 0.");if(Oe<=0)return s(" Und x paquete debe ser > 0.");const De=`${Za(_e)}::${Za(xe)}`,He=Date.now();if(Z.current&&Z.current.key===De&&He-Z.current.ts<4e3){s(" Ya se est creando este producto.");return}if(o.some(R=>Za(R.category)===Za(_e)&&Za(R.name)===Za(xe)))return s(" Ya existe un producto con esa categora y nombre.");if(le&&o.some(L=>String(L.barcode||"")===le))return s(" Ya existe un producto con ese cdigo de barras.");oe.current=!0,Z.current={key:De,ts:He};try{if(n(!0),!(await Qt(ar(yt(ke,"products_candies"),mr("category","==",_e),mr("name","==",xe),lS(1)))).empty){s(" Ya existe un producto con esa categora y nombre.");return}if(le&&!(await Qt(ar(yt(ke,"products_candies"),mr("barcode","==",le),lS(1)))).empty){s(" Ya existe un producto con ese cdigo de barras.");return}const L={category:_e,name:xe,providerPrice:ie,unitsPerPackage:Oe,createdAt:xr.now()};le&&(L.barcode=le);const G=String(y||"").trim();G&&(L.packaging=G),await $n(yt(ke,"products_candies"),L),s(" Producto creado."),vt()}catch(R){console.error(R),s(" Error creando producto.")}finally{n(!1),oe.current=!1}},de=st=>{j(st.id),_(st.category),E(st.name),k(st.providerPrice),D(st.unitsPerPackage||1),he(String(st.barcode||"")),fe(String(st.packaging||"")),s("")},Ce=()=>{j(null),_(""),E(""),k(0),D(1),he(""),fe("")},Ye=async()=>{if(!w)return;s("");const st=String(I||"").trim(),_e=String(S||"").trim(),xe=Math.max(0,Th(F,0)),ie=A0(B,1),Oe=String(X||"").trim(),le=String(Ae||"").trim();if(!st)return s(" La categora es requerida.");if(!_e)return s(" El nombre del producto es requerido.");if(xe<=0)return s(" El precio proveedor debe ser > 0.");if(ie<=0)return s(" Und x paquete debe ser > 0.");if(o.some(He=>He.id!==w&&Za(He.category)===Za(st)&&Za(He.name)===Za(_e)))return s(" Ya existe otro producto con esa categora y nombre.");if(Oe&&o.some(P=>P.id!==w&&String(P.barcode||"")===Oe))return s(" Ya existe otro producto con ese cdigo de barras.");try{n(!0);const He={category:st,name:_e,providerPrice:xe,unitsPerPackage:ie,updatedAt:xr.now()};He.barcode=Oe||"",He.packaging=le||"",await _n(Jt(ke,"products_candies",w),He),l(P=>P.map(R=>R.id===w?{...R,category:st,name:_e,providerPrice:xe,unitsPerPackage:ie,barcode:Oe||void 0,packaging:le||void 0}:R).sort((R,L)=>R.name.localeCompare(L.name,"es"))),wt&&s(" Producto guardado."),Ce()}catch(He){console.error(He),s(" Error actualizando producto.")}finally{n(!1)}},ft=async st=>{if(confirm(`Eliminar "${st.name}" (${st.category}) del catlogo?`))try{n(!0),await Mn(Jt(ke,"products_candies",st.id)),l(xe=>xe.filter(ie=>ie.id!==st.id)),s(" Producto eliminado.")}catch(xe){console.error(xe),s(" Error eliminando producto.")}finally{n(!1)}},we=()=>{const st=[{Id:"",Categoria:"Gomitas",Producto:"Gomita Fresa",PrecioProveedor:120,UnidadesPorPaquete:24,Empaque:"Tarro",Codigo:"7445074183182"}],_e=ls.json_to_sheet(st),xe=ls.book_new();ls.book_append_sheet(xe,_e,"Productos");const ie=cP(xe,{type:"array",bookType:"xlsx"}),Oe=new Blob([ie],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),le=URL.createObjectURL(Oe),De=document.createElement("a");De.href=le,De.download="template_productos_dulces.xlsx",document.body.appendChild(De),De.click(),De.remove(),URL.revokeObjectURL(le)},Le=st=>{const _e=[],xe=[];st.forEach((Oe,le)=>{if(!Oe||typeof Oe!="object"||H9e(Oe))return;const De=String(Wm(Oe,["Id","ID","productId","docId"])??"").trim(),He=String(Wm(Oe,["Categoria","Categora","Category","cat","category"])??"").trim(),P=String(Wm(Oe,["Producto","Product","Nombre","Name","producto","name"])??"").trim(),R=Wm(Oe,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Precio","Costo","providerPrice"]),L=Wm(Oe,["UnidadesPorPaquete","Und x Paquete","UnitsPerPackage","UPP","unitsPerPackage"]),G=Wm(Oe,["Codigo","Cdigo","Barcode","barcode","EAN","UPC","Code"]),re=String(G??"").trim(),ue=Wm(Oe,["Empaque","Packaging","PackagingType","Pack","Formato"]),$e=String(ue??"").trim(),rt=Math.max(0,Th(R,0)),At=A0(L,1),Je=le+2;He||xe.push(`Fila ${Je}: falta Categoria.`),P||xe.push(`Fila ${Je}: falta Producto/Nombre.`),rt<=0&&xe.push(`Fila ${Je}: PrecioProveedor debe ser > 0.`),At<=0&&xe.push(`Fila ${Je}: UnidadesPorPaquete debe ser > 0.`),He&&P&&rt>0&&At>0&&_e.push({id:De||void 0,category:He,name:P,providerPrice:rt,unitsPerPackage:At,barcode:re||void 0,packaging:$e||void 0,_raw:Oe})});const ie=new Map;for(const Oe of _e){const le=Oe.id?`id::${Oe.id}`:`${Za(Oe.category)}::${Za(Oe.name)}`;ie.set(le,Oe)}return{rows:Array.from(ie.values()),errors:xe}},gt=async st=>{if(s(""),Ve([]),ce([]),ee((st==null?void 0:st.name)||""),!st)return;const _e=st.name.toLowerCase(),xe=_e.endsWith(".xlsx")||_e.endsWith(".xls"),ie=_e.endsWith(".csv");if(!xe&&!ie){Ve(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{pt(!0);const Oe=new FileReader,le=await new Promise((re,ue)=>{Oe.onerror=()=>ue(new Error("No se pudo leer el archivo.")),Oe.onload=()=>re(Oe.result),Oe.readAsArrayBuffer(st)}),De=Lv(new Uint8Array(le),{type:"array"}),He=De.SheetNames[0],P=De.Sheets[He],R=ls.sheet_to_json(P,{defval:""}),{rows:L,errors:G}=Le(R);ce(L),Ve(G),L.length===0&&G.length===0&&Ve(["No se encontraron filas vlidas para importar."])}catch(Oe){console.error(Oe),Ve(["Error leyendo el archivo. Revis que no est corrupto."])}finally{pt(!1)}},Ut=(st,_e)=>{ce(xe=>{const ie=[...xe],Oe=ie[st];return Oe?(ie[st]={...Oe,..._e},ie):xe})},Mt=async()=>{if(s(""),be.length>0){s(" Correg los errores antes de importar.");return}if(Fe.length===0){s(" No hay filas para importar.");return}try{pt(!0);const st={},_e={},xe={};o.forEach(De=>{st[De.id]=De,_e[`${Za(De.category)}::${Za(De.name)}`]=De;const He=String(De.barcode||"").trim();He&&(xe[He]=De)});const ie=cf(ke);let Oe=0,le=0;for(const De of Fe){const He=String(De.category||"").trim(),P=String(De.name||"").trim(),R=Math.max(0,Th(De.providerPrice,0)),L=A0(De.unitsPerPackage,1),G=String(De.barcode||"").trim();if(!He||!P||R<=0||L<=0)continue;let re;if(De.id&&st[De.id])re=st[De.id];else{const ue=`${Za(He)}::${Za(P)}`;re=_e[ue]}if(!re&&G&&xe[G]&&(re=xe[G]),re){const ue={category:He,name:P,providerPrice:R,unitsPerPackage:L,updatedAt:xr.now()};De.barcode!=null&&(ue.barcode=G||""),De.packaging!=null&&(ue.packaging=String(De.packaging||"")||""),ie.update(Jt(ke,"products_candies",re.id),ue),le+=1}else{const ue=Jt(yt(ke,"products_candies")),$e={category:He,name:P,providerPrice:R,unitsPerPackage:L,createdAt:xr.now()};G&&($e.barcode=G),De.packaging&&($e.packaging=De.packaging),ie.set(ue,$e),Oe+=1}}await ie.commit(),s(` Importacin lista. Creados: ${Oe}, Actualizados: ${le}`),Ke(!1),ce([]),Ve([]),ee(""),e()}catch(st){console.error(st),s(" Error importando productos a Firestore.")}finally{pt(!1)}},Yt=g.useMemo(()=>{const st=new Set(o.map(le=>le.id)),_e=new Set(o.map(le=>`${Za(le.category)}::${Za(le.name)}`)),xe=new Set(o.map(le=>String(le.barcode||"").trim()).filter(Boolean));let ie=0,Oe=0;for(const le of Fe){if(le.id&&st.has(le.id)){ie+=1;continue}const De=`${Za(le.category)}::${Za(le.name)}`;if(_e.has(De)){ie+=1;continue}const He=String(le.barcode||"").trim();if(He&&xe.has(He)){ie+=1;continue}Oe+=1}return{willCreate:Oe,willUpdate:ie,total:Fe.length}},[Fe,o]);return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Catalogo"}),i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_c,{onClick:e,loading:r||We}),!wt&&i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ke(!0),ce([]),Ve([]),ee("")},children:"Importar"})]})})]}),wt&&i.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-900 text-white",onClick:()=>Rt(st=>!st),children:St?"Ocultar creacin":"Crear producto"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-white border shadow-sm",onClick:()=>{Ke(!0),ce([]),Ve([]),ee("")},children:"Importar"}),i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-200",onClick:()=>Ue(st=>!st),children:jt?"Ocultar filtros":"Mostrar filtros"}),jt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:st=>K(st.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),St&&i.jsxs("form",{onSubmit:it,className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:st=>u(st.target.value),placeholder:"Ej: Gomitas"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:d,onChange:st=>f(st.target.value),placeholder:"Ej: Gomita Fresa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:y,onChange:st=>b(st.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(A)?"":A,onChange:st=>h(Math.max(0,Th(st.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Und x paquete"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:m,onChange:st=>p(A0(st.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo (opcional)"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"w-full border rounded px-2 py-1",value:x,onChange:st=>v(st.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white hover:bg-black whitespace-nowrap",onClick:()=>{ve("create"),H(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"md:col-span-6 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:vt,children:"Limpiar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",disabled:r,children:"Crear producto"})]})]}),jt&&i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-3 flex flex-col md:flex-row gap-3 items-center text-sm",children:[i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:me,onChange:st=>ne(st.target.value),placeholder:"Buscar por categora o producto"}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block font-semibold",children:"Empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:O,onChange:st=>K(st.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]})]}),i.jsxs("div",{className:"w-full md:w-1/2",children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:Pe,onChange:st=>Te(st.target.value),placeholder:"Ej: 7445074183182"}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("search"),H(!0),Ue(!0)},children:"Escanear producto"})}),i.jsx("div",{className:"mt-2 md:mt-0",children:i.jsx("button",{type:"button",className:"w-full md:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{ne(""),Te("")},children:"Limpiar filtros"})})]}),i.jsxs("div",{className:"w-full md:w-auto text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos en catlogo"}),i.jsx("div",{className:"text-lg font-semibold",children:ge.length})]})]}),wt?i.jsx("div",{className:"space-y-2",children:r?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Cargando"}):ge.length===0?i.jsx("div",{className:"bg-white border rounded p-4 text-center",children:"Sin productos."}):ge.map(st=>{const _e=w===st.id,xe=Be===st.id,ie=!!String(st.barcode||"").trim();return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ye(Oe=>Oe===st.id?null:st.id),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-bold truncate",children:st.name}),i.jsx("div",{className:"text-xs text-gray-600 truncate",children:st.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("div",{className:"font-bold tabular-nums",children:U5(st.providerPrice)})]})]}),xe&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Categora"}),_e?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:Oe=>_(Oe.target.value)}):i.jsx("div",{className:"font-semibold",children:st.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Und x paquete"}),_e?i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-1 text-right",value:B,onChange:Oe=>D(A0(Oe.target.value,1))}):i.jsx("div",{className:"font-semibold text-right tabular-nums",children:st.unitsPerPackage})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Empaque"}),_e?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:Oe=>fe(Oe.target.value),children:[i.jsx("option",{value:"",children:"Seleccionar"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"font-semibold",children:st.packaging||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio proveedor"}),_e?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:Oe=>k(Math.max(0,Th(Oe.target.value,0)))}):i.jsx("div",{className:"font-semibold tabular-nums",children:U5(st.providerPrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Cdigo"}),_e?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-1",value:X,onChange:Oe=>he(Oe.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),H(!0)},children:"Escanear"})]}):ie?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(st.barcode||"").trim()),U(!0)},children:"Ver cdigo"}):i.jsx("div",{className:"text-gray-600",children:"No"})]})]}),i.jsx("div",{className:"pt-2 flex gap-2",children:_e?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-blue-600 text-white",onClick:Ye,type:"button",children:"Guardar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{ve("edit"),H(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-gray-200",onClick:Ce,type:"button",children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400",onClick:()=>de(st),type:"button",children:"Editar"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-red-600 text-white",onClick:()=>ft(st),type:"button",children:"Borrar"})]})})]})})]},st.id)})}):i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1050px] w-full text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-center",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):ge.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin productos."})}):ge.map(st=>{const _e=w===st.id,xe=!!String(st.barcode||"").trim();return i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:I,onChange:ie=>_(ie.target.value)}):st.category}),i.jsx("td",{className:"p-2 border",children:_e?i.jsx("input",{className:"w-full border rounded px-2 py-1",value:S,onChange:ie=>E(ie.target.value)}):st.name}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Ae,onChange:ie=>fe(ie.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):st.packaging||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:_e?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(F)?"":F,onChange:ie=>k(Math.max(0,Th(ie.target.value,0)))}):U5(st.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:_e?i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:B,onChange:ie=>D(A0(ie.target.value,1))}):st.unitsPerPackage}),i.jsx("td",{className:"p-2 border text-center",children:_e?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:X,onChange:ie=>he(ie.target.value),placeholder:"EAN/UPC"}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-800 text-white hover:bg-black",onClick:()=>{ve("edit"),H(!0)},children:"Escanear"})]}):xe?i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",onClick:()=>{J(String(st.barcode||"").trim()),U(!0)},children:"S"}):i.jsx("span",{className:"px-2 py-1 rounded bg-gray-100 text-gray-600",children:"No"})}),i.jsx("td",{className:"p-2 border",children:_e?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ye,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Ce,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",onClick:()=>de(st),type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ft(st),type:"button",children:"Borrar"})]})})]},st.id)})})]})}),a?wt&&a===" Producto guardado."?i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 text-sm",children:a}),i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white",onClick:()=>{s(""),Ce(),H(!1)},children:"Aceptar"})]}):i.jsx("p",{className:"mt-2 text-sm",children:a}):null,i.jsx($9e,{open:q,code:W,onClose:()=>U(!1)}),i.jsx(G9e,{open:M,onClose:()=>H(!1),onDetected:async st=>{const _e=String(st||"").trim();if(_e){if(te==="edit"&&w){if(o.some(ie=>ie.id!==w&&String(ie.barcode||"")===_e)){s(" Ya existe otro producto con ese cdigo de barras."),he(_e),H(!1);return}try{await _n(Jt(ke,"products_candies",w),{barcode:_e}),l(ie=>ie.map(Oe=>Oe.id===w?{...Oe,barcode:_e}:Oe)),he(_e),wt&&s(" Producto guardado.")}catch(ie){console.error(ie),s(" Error guardando cdigo de barras.")}finally{H(!1)}return}if(te==="search"){Te(_e),H(!1);return}te==="create"?v(st):he(st)}}}),Q&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar productos (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ke(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas (flexible): Id (opcional), Categoria, Producto/Nombre, PrecioProveedor, UnidadesPorPaquete, Empaque (opcional), Codigo (opcional)."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:we,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:st=>{var _e;return gt(((_e=st.target.files)==null?void 0:_e[0])||null)}}),ae&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:ae})]}),We&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),be.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:be.slice(0,50).map((st,_e)=>i.jsx("li",{children:st},_e))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Yt.total," filas (Crear:"," ",Yt.willCreate," / Actualizar:"," ",Yt.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:Mt,disabled:We||Fe.length===0||be.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1250px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Und x paquete"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Codigo (opcional)"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:Fe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):Fe.slice(0,300).map((st,_e)=>{const xe=st.id?o.some(De=>De.id===st.id):!1,ie=o.some(De=>`${Za(De.category)}::${Za(De.name)}`==`${Za(st.category)}::${Za(st.name)}`),Oe=st.barcode?o.some(De=>String(De.barcode||"")===st.barcode):!1,le=xe||ie||Oe;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:st.id||"",onChange:De=>Ut(_e,{id:De.target.value.trim()||void 0}),placeholder:"docId (si quers update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:st.category,onChange:De=>Ut(_e,{category:De.target.value}),list:"categories-list"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:st.name,onChange:De=>Ut(_e,{name:De.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-28 border rounded px-2 py-1 text-right",value:Number.isNaN(st.providerPrice)?"":st.providerPrice,onChange:De=>Ut(_e,{providerPrice:Math.max(0,Th(De.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:st.unitsPerPackage,onChange:De=>Ut(_e,{unitsPerPackage:A0(De.target.value,1)})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:st.packaging||"",onChange:De=>Ut(_e,{packaging:De.target.value.trim()||void 0}),placeholder:"Tarro, Bolsa..."})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:st.barcode||"",onChange:De=>Ut(_e,{barcode:De.target.value.trim()||void 0}),placeholder:"EAN/UPC (opcional)"})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${le?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:le?"ACTUALIZA":"CREA"})})]},`${st.id||""}-${_e}`)})})]}),i.jsx("datalist",{id:"categories-list",children:Xe.map(st=>i.jsx("option",{value:st},st))})]}),Fe.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",Fe.length," filas (el import importa todas)."]})]})]})})]})}function pse(t){const e=Math.max(1,Math.floor(Number(t.unitsPerPackage||1))),r=Number(t.totalUnits||0),n=Number(t.quantity||0),a=Number(t.packages||0);return r>0?Math.floor(r):n>0?Math.floor(n):a>0?Math.floor(a*e):0}function Q5(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):pse(t)}const gse=t=>Math.max(0,Math.floor(Number(t??0)));function q9e(t){return gse(t.packages??t.totalPackages??t.packs??t.packagesInitial??t.initialPackages??0)}function z9e(t){return gse(t.remainingPackages??t.remainingPacks??t.packsRemaining??t.packagesRemaining??t.remaining_packages??0)}async function W9e(t){const e=Jt(ke,"candy_main_orders",t);if((await si(e)).exists())return e;const n=ar(yt(ke,"candy_main_orders"),mr("orderId","==",t)),a=await Qt(n);return a.empty?null:Jt(ke,"candy_main_orders",a.docs[0].id)}async function V5(t){if(!t)return;const e=await W9e(t);if(!e)return;const r=ar(yt(ke,"inventory_candies"),mr("orderId","==",t)),n=await Qt(r),a=new Map;n.forEach(l=>{const c=l.data(),u=String(c.productId||"");if(!u)return;const d=q9e(c),f=z9e(c),A=Math.max(1,Math.floor(Number(c.unitsPerPackage||1))),h=Number(c.providerPrice||0),m=Number(c.unitPriceRivas||0),p=Number(c.unitPriceSanJorge||0),x=Number(c.unitPriceIsla||0),v=h*d,y=m*d,b=p*d,w=x*d,j=y-v,I=b-v,_=w-v;a.has(u)||a.set(u,{productId:u,name:String(c.productName||""),category:String(c.category||""),unitsPerPackage:A,providerPrice:h,marginRivas:typeof c.marginRivas=="number"?Number(c.marginRivas):void 0,marginSanJorge:typeof c.marginSanJorge=="number"?Number(c.marginSanJorge):void 0,marginIsla:typeof c.marginIsla=="number"?Number(c.marginIsla):void 0,packages:0,remainingPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,unitPriceRivas:m||0,unitPriceSanJorge:p||0,unitPriceIsla:x||0,gainRivas:0,gainSanJorge:0,gainIsla:0});const S=a.get(u);S.packages+=d,S.remainingPackages+=f,S.subtotal+=v,S.totalRivas+=y,S.totalSanJorge+=b,S.totalIsla+=w,S.gainRivas+=j,S.gainSanJorge+=I,S.gainIsla+=_,S.providerPrice=h,S.unitPriceRivas=m||S.unitPriceRivas,S.unitPriceSanJorge=p||S.unitPriceSanJorge,S.unitPriceIsla=x||S.unitPriceIsla,S.unitsPerPackage=A||S.unitsPerPackage,S.name=String(c.productName||S.name),S.category=String(c.category||S.category)});const s=Array.from(a.values()).map(l=>({id:l.productId,name:l.name,category:l.category,providerPrice:l.providerPrice,unitsPerPackage:l.unitsPerPackage,packages:l.packages,remainingPackages:l.remainingPackages,marginRivas:l.marginRivas??void 0,marginSanJorge:l.marginSanJorge??void 0,marginIsla:l.marginIsla??void 0,subtotal:l.subtotal,totalRivas:l.totalRivas,totalSanJorge:l.totalSanJorge,totalIsla:l.totalIsla,unitPriceRivas:l.unitPriceRivas,unitPriceSanJorge:l.unitPriceSanJorge,unitPriceIsla:l.unitPriceIsla,gainRivas:l.gainRivas,gainSanJorge:l.gainSanJorge,gainIsla:l.gainIsla})),o=s.reduce((l,c)=>l+Number(c.packages||0),0);await _n(e,{totalPackages:o,items:s})}function X9e(t){const e=t==null?void 0:t.allocationsByItem;if(!e)return null;const r=[];if(Array.isArray(e))for(const n of e){const a=Array.isArray(n==null?void 0:n.allocations)?n.allocations:[];for(const s of a){const o=String(s.inventorySellerId||""),l=Math.max(0,Math.floor(Number(s.units??s.qty??s.quantity??0)));!o||l<=0||r.push({inventorySellerId:o,units:l})}}else if(typeof e=="object")for(const n of Object.keys(e)){const a=e[n],s=Array.isArray(a==null?void 0:a.allocations)?a.allocations:[];for(const o of s){const l=String(o.inventorySellerId||""),c=Math.max(0,Math.floor(Number(o.units??o.qty??o.quantity??0)));!l||c<=0||r.push({inventorySellerId:l,units:c})}}return r.length?{allocations:r}:null}async function U2(t){const e=t.split("#")[0],r=Jt(ke,"sales_candies",e),n=await si(r);if(!n.exists())throw new Error("La venta no existe.");const a=n.data(),s=X9e(a);if(s&&s.allocations.length>0){let u=0;return await Mi(ke,async d=>{const f={};for(const p of s.allocations){const x=p.inventorySellerId,v=Math.max(0,Math.floor(Number(p.units||0)));!x||v<=0||(f[x]=(f[x]||0)+v,u+=v)}const h=Object.keys(f).map(p=>Jt(ke,"inventory_candies_sellers",p)),m=await Promise.all(h.map(p=>d.get(p)));for(let p=0;p<h.length;p++){const x=m[p];if(!x.exists())continue;const v=x.data(),y=Number(v.remainingUnits??v.remaining??0),b=Math.max(0,Math.floor(Number(f[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);d.update(h[p],{remainingUnits:w,remainingPackages:I})}d.delete(r)}),{restored:u}}const o=[];if(Array.isArray(a.items)&&a.items.length>0){const u={};if(a.allocationsByItem&&typeof a.allocationsByItem=="object")for(const d of Object.keys(a.allocationsByItem)){const f=a.allocationsByItem[d],A=String((f==null?void 0:f.productId)||d||"");if(!A)continue;const h=Array.isArray(f==null?void 0:f.allocations)?f.allocations:[];u[A]=h.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))}))}if(Array.isArray(a.allocationsByItem))for(const d of a.allocationsByItem){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Array.isArray(d==null?void 0:d.allocations)?d.allocations:[];u[f]=A.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))}))}for(const d of a.items){const f=String((d==null?void 0:d.productId)||"");if(!f)continue;const A=Math.max(0,Math.floor(Number((d==null?void 0:d.qty)||(d==null?void 0:d.quantity)||0))),h=Array.isArray(d==null?void 0:d.allocations)?d.allocations.map(m=>({batchId:String(m.batchId),qty:Math.max(0,Math.floor(Number(m.qty||m.quantity||0)))})):u[f]||[];o.push({productId:f,productName:String((d==null?void 0:d.productName)||""),qty:A,allocations:h.length?h:void 0})}}else{const u=a.item||{},d=String(u.productId||a.productId||""),f=Math.max(0,Math.floor(Number(u.qty??a.quantity??0))),A=Array.isArray(a.allocations)?a.allocations.map(h=>({batchId:String(h.batchId),qty:Math.max(0,Math.floor(Number(h.qty||h.quantity||0)))})):[];d&&f>0&&o.push({productId:d,productName:String(u.productName||a.productName||""),qty:f,allocations:A.length?A:void 0})}if(o.length===0)return await Mi(ke,async u=>{u.delete(r)}),{restored:0};if(o.every(u=>Array.isArray(u.allocations)&&u.allocations.length>0)){let u=0;return await Mi(ke,async d=>{const f=[];for(const h of o)for(const m of h.allocations||[]){const p=Math.max(0,Math.floor(Number(m.qty||0)));u+=p,f.push({ref:Jt(ke,"inventory_candies",m.batchId),addBack:p})}const A=await Promise.all(f.map(h=>d.get(h.ref)));for(let h=0;h<f.length;h++){const m=A[h];if(!m.exists())continue;const p=m.data(),x=Q5(p),v=Math.max(0,Math.floor(Number(f[h].addBack||0))),y=x+v,b=Math.max(1,Math.floor(Number(p.unitsPerPackage||1))),w=Math.floor(y/b);d.update(f[h].ref,{remaining:y,remainingPackages:w,packages:w})}d.delete(r)}),{restored:u}}let c=0;return await Mi(ke,async u=>{const d={};for(const p of o){if(!p.productId||p.qty<=0)continue;const x=ar(yt(ke,"inventory_candies"),mr("productId","==",p.productId)),y=(await Qt(x)).docs.map(b=>{const w=b.data(),j=pse(w),I=Q5(w);return{id:b.id,date:String(w.date||""),baseUnits:j,remaining:I}}).sort((b,w)=>b.date.localeCompare(w.date));d[p.productId]=y}const f=[];for(const p of o){if(!p.productId||p.qty<=0)continue;if(Array.isArray(p.allocations)&&p.allocations.length>0){for(const y of p.allocations){const b=Math.max(0,Math.floor(Number(y.qty||0)));c+=b,f.push({id:y.batchId,addBack:b})}continue}const x=d[p.productId]||[];let v=p.qty;for(const y of x){if(v<=0)break;const b=Math.max(0,y.baseUnits-y.remaining);if(b<=0)continue;const w=Math.min(b,v);f.push({id:y.id,addBack:w}),c+=w,v-=w}for(const y of x){if(v<=0)break;const b=Math.min(v,p.qty);f.push({id:y.id,addBack:b}),c+=b,v-=b}}const A={};for(const p of f)A[p.id]=(A[p.id]||0)+Math.max(0,Math.floor(Number(p.addBack||0)));const h=Object.keys(A).map(p=>Jt(ke,"inventory_candies",p)),m=await Promise.all(h.map(p=>u.get(p)));for(let p=0;p<h.length;p++){const x=m[p];if(!x.exists())continue;const v=x.data(),y=Q5(v),b=Math.max(0,Math.floor(Number(A[h[p].id]||0))),w=y+b,j=Math.max(1,Math.floor(Number(v.unitsPerPackage||1))),I=Math.floor(w/j);u.update(h[p],{remaining:w,remainingPackages:I,packages:I})}u.delete(r)}),{restored:c}}async function Y9e(t){return U2(t)}const lc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function H5(t){return isFinite(t)?Math.round(t):0}function Gd(t){return t.unitsPerPackage>0&&t.totalUnits>0?Math.floor(t.totalUnits/t.unitsPerPackage):Math.max(0,Math.floor(Number(t.packages||0)))}function $5(t){return typeof t.remainingPackages=="number"&&isFinite(t.remainingPackages)?Math.max(0,Math.floor(t.remainingPackages)):t.unitsPerPackage>0?Math.max(0,Math.floor(Number(t.remaining||0)/t.unitsPerPackage)):0}function J9e(t,e){var o,l;const r=String(t.date||""),n=String(e.date||"");if(r!==n)return n.localeCompare(r);const a=((o=t.createdAt)==null?void 0:o.seconds)??0;return(((l=e.createdAt)==null?void 0:l.seconds)??0)-a}function Z9e(){const[t,e]=g.useState([]),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(null),[y,b]=g.useState(""),[w,j]=g.useState(0),[I,_]=g.useState(!1),[S,E]=g.useState(""),[F,k]=g.useState(""),[B,D]=g.useState([]);g.useEffect(()=>{(async()=>{try{s(!0);const W=await Qt(yt(ke,"products_candies")),J=[];W.forEach(ve=>{const Q=ve.data();J.push({id:ve.id,name:Q.name??"(sin nombre)",category:Q.category??"(sin categora)"})}),e(J);const M=ar(yt(ke,"inventory_candies"),wn("date","desc")),H=await Qt(M),te=[];H.forEach(ve=>{const Q=ve.data(),Ke=Number(Q.unitsPerPackage||0),ae=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),ee=Number(Q.remaining??Q.totalUnits??ae??0);te.push({id:ve.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:Ke,totalUnits:ae,remaining:ee,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),n(te)}catch(W){console.error(W),l(" Error cargando inventario.")}finally{s(!1)}})()},[]);const X=g.useMemo(()=>r.filter(W=>!(c&&W.date<c||d&&W.date>d||A&&W.productId!==A||m&&String(W.category||"")!==m)),[r,c,d,A,m]),he=g.useMemo(()=>{const W=new Set;for(const J of t)J.category&&W.add(J.category);return Array.from(W).sort((J,M)=>J.localeCompare(M))},[t]),Ae=g.useMemo(()=>{const W=X.reduce((Q,Ke)=>Q+Gd(Ke),0),J=X.reduce((Q,Ke)=>Q+$5(Ke),0),M=X.reduce((Q,Ke)=>{const ae=Gd(Ke);return Q+Number(Ke.providerPrice||0)*ae},0),H=X.reduce((Q,Ke)=>{const ae=Gd(Ke);return Q+Number(Ke.unitPriceRivas||0)*ae},0),te=X.reduce((Q,Ke)=>{const ae=Gd(Ke);return Q+Number(Ke.unitPriceSanJorge||0)*ae},0),ve=X.reduce((Q,Ke)=>{const ae=Gd(Ke);return Q+Number(Ke.unitPriceIsla||0)*ae},0);return{totalPaquetes:W,totalPaquetesRestantes:J,totalSubtotal:M,totalRivas:H,totalSJ:te,totalIsla:ve}},[X]),fe=g.useMemo(()=>{let W=0,J=0;for(const M of X)M.status==="PENDIENTE"&&(W+=1),M.status==="PAGADO"&&(J+=1);return{totalLotes:X.length,pendientes:W,pagados:J}},[X]),me=g.useMemo(()=>{const W=new Map;for(const M of X){const H=String(M.productId||"");H&&(W.has(H)||W.set(H,{batches:[]}),W.get(H).batches.push(M))}const J=[];for(const[M,H]of W.entries()){const te=[...H.batches].sort(J9e),ve=te[0],Q=te.reduce((St,Rt)=>St+Gd(Rt),0),Ke=te.reduce((St,Rt)=>St+$5(Rt),0),ae=Number((ve==null?void 0:ve.providerPrice)||0),ee=Number((ve==null?void 0:ve.unitPriceRivas)||0),Fe=Number((ve==null?void 0:ve.unitPriceIsla)||0),ce=te.reduce((St,Rt)=>{const jt=Gd(Rt);return St+Number(Rt.providerPrice||0)*jt},0),be=te.reduce((St,Rt)=>{const jt=Gd(Rt);return St+Number(Rt.unitPriceRivas||0)*jt},0),Ve=te.reduce((St,Rt)=>{const jt=Gd(Rt);return St+Number(Rt.unitPriceIsla||0)*jt},0),We=be-ce,pt=Ve-ce;let wt="",Ct;for(const St of te)(!wt||String(St.date||"")>wt)&&(wt=String(St.date||""),Ct=St.createdAt);J.push({productId:M,productName:(ve==null?void 0:ve.productName)||"",category:(ve==null?void 0:ve.category)||"",totalPackages:Q,remainingPackages:Ke,providerPrice:ae,unitPriceRivas:ee,unitPriceIsla:Fe,subtotal:ce,totalRivas:be,totalIsla:Ve,gainRivas:We,gainIsla:pt,lastDate:wt,lastCreatedAt:Ct,batchCount:te.length})}return J.sort((M,H)=>String(H.lastDate).localeCompare(String(M.lastDate))),J},[X]),ne=W=>{v(W.id),b(W.date),j(W.providerPrice),l("")},Pe=()=>{v(null),b(""),j(0)},Te=async()=>{if(!x)return;const W=r.find(Ve=>Ve.id===x);if(!W)return;if(w<0){l("El precio proveedor no puede ser negativo.");return}const J=Gd(W),M=w*J,H=J>0?M/.8:0,te=J>0?M/.85:0,ve=J>0?M/.7:0,Q=H-M,Ke=te-M,ae=ve-M,ee=J>0?H5(H/J):0,Fe=J>0?H5(te/J):0,ce=J>0?H5(ve/J):0,be=Jt(ke,"inventory_candies",x);await _n(be,{date:y,providerPrice:w,subtotal:M,totalRivas:H,totalSanJorge:te,totalIsla:ve,gainRivas:Q,gainSanJorge:Ke,gainIsla:ae,unitPriceRivas:ee,unitPriceSanJorge:Fe,unitPriceIsla:ce}),n(Ve=>Ve.map(We=>We.id===x?{...We,date:y,providerPrice:w,subtotal:M,totalRivas:H,totalSanJorge:te,totalIsla:ve,gainRivas:Q,gainSanJorge:Ke,gainIsla:ae,unitPriceRivas:ee,unitPriceSanJorge:Fe,unitPriceIsla:ce}:We)),W.orderId&&await V5(String(W.orderId)),l(" Lote de dulces actualizado"),Pe()},O=async W=>{confirm(`Marcar PAGADO el lote del ${W.date} (${W.productName})?`)&&(await _n(Jt(ke,"inventory_candies",W.id),{status:"PAGADO"}),n(M=>M.map(H=>H.id===W.id?{...H,status:"PAGADO"}:H)),l(" Lote marcado como pagado"))},K=async W=>{confirm(`Eliminar el lote del ${W.date} (${W.productName})?`)&&(await Mn(Jt(ke,"inventory_candies",W.id)),n(M=>M.filter(H=>H.id!==W.id)),W.orderId&&await V5(String(W.orderId)),l(" Lote eliminado"))},q=async(W,J)=>{try{s(!0),l("");const M=ar(yt(ke,"inventory_candies"),mr("productId","==",W),wn("date","desc")),H=await Qt(M),te=[];H.forEach(ve=>{const Q=ve.data(),Ke=Number(Q.unitsPerPackage||0),ae=Number(Q.totalUnits??Q.quantity??(Q.packages||0)*(Q.unitsPerPackage||0)),ee=Number(Q.remaining??Q.totalUnits??ae??0);te.push({id:ve.id,productId:Q.productId,productName:Q.productName,category:Q.category,measurement:Q.measurement??"unidad",packages:Number(Q.packages||0),unitsPerPackage:Ke,totalUnits:ae,remaining:ee,remainingPackages:typeof Q.remainingPackages=="number"?Number(Q.remainingPackages):void 0,providerPrice:Number(Q.providerPrice||0),subtotal:Number(Q.subtotal||0),totalRivas:Number(Q.totalRivas||0),totalSanJorge:Number(Q.totalSanJorge||0),totalIsla:Number(Q.totalIsla||0),gainRivas:Number(Q.gainRivas||0),gainSanJorge:Number(Q.gainSanJorge||0),gainIsla:Number(Q.gainIsla||0),unitPriceRivas:Number(Q.unitPriceRivas||0),unitPriceSanJorge:Number(Q.unitPriceSanJorge||0),unitPriceIsla:Number(Q.unitPriceIsla||0),date:Q.date,createdAt:Q.createdAt,status:Q.status??"PENDIENTE",orderId:Q.orderId??null})}),E(W),k(J),D(te),_(!0)}catch(M){console.error(M),l(" Error abriendo detalle del producto.")}finally{s(!1)}},U=async(W,J)=>{const M=r.filter(te=>te.productId===W);if(confirm(`Eliminar COMPLETAMENTE "${J}"?
Esto eliminar ${M.length} lote(s) de este producto.`))try{s(!0),l("");const te=Array.from(new Set(M.map(ve=>ve.orderId?String(ve.orderId):"").filter(Boolean)));for(const ve of M)await Mn(Jt(ke,"inventory_candies",ve.id));n(ve=>ve.filter(Q=>Q.productId!==W)),l(" Producto eliminado (todos sus lotes).");for(const ve of te)await V5(ve);I&&S===W&&(_(!1),D([]),E(""),k(""))}catch(te){console.error(te),l(" Error eliminando lotes del producto.")}finally{s(!1)}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Productos"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:W=>u(W.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:W=>f(W.target.value)})]}),i.jsxs("div",{className:"flex flex-col min-w-[220px]",children:[i.jsx("label",{className:"font-semibold",children:"Categora"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:m,onChange:W=>p(W.target.value),children:[i.jsx("option",{value:"",children:"Todas"}),he.map(W=>i.jsx("option",{value:W,children:W},W))]})]}),i.jsxs("div",{className:"flex flex-col min-w-[240px]",children:[i.jsx("label",{className:"font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:W=>h(W.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),t.map(W=>i.jsxs("option",{value:W.id,children:[W.name,"  ",W.category]},W.id))]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f(""),h(""),p("")},children:"Quitar filtro"})]}),i.jsx("div",{className:"bg-gray-50 p-2 rounded shadow border mb-2 text-xs md:text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes totales:"})," ",fe.totalLotes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pendientes:"})," ",fe.pendientes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Lotes pagados:"})," ",fe.pagados]})]})}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-1 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes ingresados:"})," ",Ae.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Ae.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total:"})," ",lc(Ae.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas:"})," ",lc(Ae.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge:"})," ",lc(Ae.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla:"})," ",lc(Ae.totalIsla)]})]})}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Subtotal"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Total Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Rivas"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-right",children:"Ganancia bruta Isla"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"ltima fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap text-center",children:"Opciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Cargando"})}):me.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:14,className:"p-4 text-center",children:"Sin productos"})}):me.map(W=>i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border",children:W.category||""}),i.jsxs("td",{className:"p-2 border max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:W.productName,children:W.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lotes: ",W.batchCount]})]}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:W.totalPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:W.remainingPackages}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.unitPriceRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.unitPriceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.subtotal)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.totalRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.totalIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.gainRivas)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:lc(W.gainIsla)}),i.jsx("td",{className:"p-2 border",children:W.lastDate||""}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>q(W.productId,W.productName),children:"Detalle"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>U(W.productId,W.productName),children:"Borrar"})]})})]},W.productId))})]})})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-4 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold",children:"Detalle del producto"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsx("span",{className:"font-semibold",children:"Producto:"})," ",F||""," ",i.jsxs("span",{className:"ml-2",children:[i.jsx("span",{className:"font-semibold",children:"ID:"})," ",S]})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{_(!1),D([]),E(""),k(""),Pe()},children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] table-auto text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border text-left",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes ingresados"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border text-right",children:"Unidades"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio venta Isla"}),i.jsx("th",{className:"p-2 border",children:"Nmero orden"}),i.jsx("th",{className:"p-2 border",children:"Status"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{className:"whitespace-nowrap",children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center text-gray-500",children:"Sin lotes"})}):B.map(W=>{const J=x===W.id,M=Gd(W),H=$5(W);return i.jsxs("tr",{className:"text-left",children:[i.jsx("td",{className:"p-2 border align-top",children:J?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:y,onChange:te=>b(te.target.value)}):W.date}),i.jsx("td",{className:"p-2 border align-top",children:W.category||""}),i.jsxs("td",{className:"p-2 border align-top max-w-[260px]",children:[i.jsx("span",{className:"block truncate",title:W.productName,children:W.productName}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["Lote ID: ",W.id]})]}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:M}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:H}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:W.totalUnits}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:J?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-24 border p-1 rounded text-right",value:Number.isNaN(w)?"":w,onChange:te=>j(Math.max(0,parseFloat(te.target.value||"0")))}):lc(W.providerPrice)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:lc(W.unitPriceRivas)}),i.jsx("td",{className:"p-2 border align-top text-right tabular-nums",children:lc(W.unitPriceIsla)}),i.jsx("td",{className:"p-2 border align-top",children:W.orderId?String(W.orderId):""}),i.jsx("td",{className:"p-2 border align-top",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] md:text-xs ${W.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:W.status})}),i.jsx("td",{className:"p-2 border align-top",children:J?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:Te,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Pe,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center flex-wrap",children:[W.status==="PENDIENTE"&&i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:()=>O(W),children:"Pagar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-black hover:bg-yellow-500 text-xs",onClick:()=>ne(W),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>K(W),children:"Borrar"})]})})]},W.id)})})]})}),i.jsx("div",{className:"mt-3 flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>U(S,F),children:"Borrar producto (todos los lotes)"})})]})})]})}const G5=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas"],Fo=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function xy(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}async function H$(t){const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}function eQe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t,s=String(r||"").trim(),o=xn(a,"vendedor_dulces"),l=xn(a,"admin"),[c,u]=g.useState([]),[d,f]=g.useState(!1),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(""),[w,j]=g.useState(!1),[I,_]=g.useState(!1),[S,E]=g.useState(null),[F,k]=g.useState([]),B=async mt=>{var ur;j(!0),_(!0),E(mt),k([]);try{const je=await si(Jt(ke,"sales_candies",mt));let nt=null;je.exists()?nt=je.data():nt=(ur=(await Qt(ar(yt(ke,"sales_candies"),mr("name","==",mt)))).docs[0])==null?void 0:ur.data();const Nt=(Array.isArray(nt==null?void 0:nt.items)?nt.items:nt!=null&&nt.item?[nt.item]:[]).map(Qe=>({productName:String(Qe.productName||""),qty:Number(Qe.qty||0),unitPrice:Number(Qe.unitPrice||0),discount:Number(Qe.discount||0),total:Number(Qe.total||0)}));k(Nt)}catch(je){console.error(je)}finally{_(!1)}},[D,X]=g.useState(""),[he,Ae]=g.useState("+505 "),[fe,me]=g.useState(""),[ne,Pe]=g.useState(""),[Te,O]=g.useState("ACTIVO"),[K,q]=g.useState(0),[U,W]=g.useState(""),[J,M]=g.useState(0),[H,te]=g.useState([]),[ve,Q]=g.useState(!0),[Ke,ae]=g.useState(""),[ee,Fe]=g.useState(null),[ce,be]=g.useState(""),[Ve,We]=g.useState("+505 "),[pt,wt]=g.useState(""),[Ct,St]=g.useState(""),[Rt,jt]=g.useState("ACTIVO"),[Ue,Be]=g.useState(0),[ye,oe]=g.useState(""),[Z,Ne]=g.useState(!1),[Re,ge]=g.useState(null),[Xe,vt]=g.useState(!1),[it,de]=g.useState([]),[Ce,Ye]=g.useState({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),[ft,we]=g.useState(!1),[Le,gt]=g.useState(0),[Ut,Mt]=g.useState(new Date().toISOString().slice(0,10)),[Yt,st]=g.useState(""),[_e,xe]=g.useState(!1),[ie,Oe]=g.useState(null),[le,De]=g.useState(""),[He,P]=g.useState(0),[R,L]=g.useState(""),[G,re]=g.useState(!1),[ue,$e]=g.useState(null),[rt,At]=g.useState(!1),[Je,ht]=g.useState(!1),[Ot,Se]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(Q(!0),o&&!s){te([]),ae(" Este usuario no tiene vendedor asociado (sellerCandyId vaco).");return}const mt=await Qt(yt(ke,"sellers_candies")),ur=[];mt.forEach(Nt=>{const Qe=Nt.data(),ot=String(Qe.status||"ACTIVO");ot==="ACTIVO"&&ur.push({id:Nt.id,name:String(Qe.name||""),status:ot})}),u(ur);const je=o?ar(yt(ke,"customers_candies"),mr("vendorId","==",s),wn("createdAt","desc")):ar(yt(ke,"customers_candies"),wn("createdAt","desc")),nt=await Qt(je),dt=[];nt.forEach(Nt=>{const Qe=Nt.data();dt.push({id:Nt.id,name:Qe.name??"",phone:Qe.phone??"+505 ",place:Qe.place??"",notes:Qe.notes??"",status:Qe.status??"ACTIVO",creditLimit:Number(Qe.creditLimit??0),createdAt:Qe.createdAt??xr.now(),balance:0,sellerId:Qe.sellerId||"",vendorId:Qe.vendorId||"",vendorName:Qe.vendorName||"",initialDebt:Number(Qe.initialDebt||0),initialDebtDate:String(Qe.initialDebtDate||"").trim(),lastAbonoDate:"",lastAbonoAmount:0})});for(const Nt of dt)try{const Qe=ar(yt(ke,"ar_movements"),mr("customerId","==",Nt.id)),ot=await Qt(Qe);let _t=0,et=null;const It=[];ot.forEach(er=>{var Ft,Zt,dr;const Bt=er.data(),br=Number(Bt.amount||0);_t+=br;const wr=Bt.date??((Zt=(Ft=Bt.createdAt)==null?void 0:Ft.toDate)!=null&&Zt.call(Ft)?Bt.createdAt.toDate().toISOString().slice(0,10):"");if(It.push({id:er.id,date:wr,type:Bt.type??(br<0?"ABONO":"CARGO"),amount:br,ref:Bt.ref||{},comment:Bt.comment||"",createdAt:Bt.createdAt}),br<0){const Rr=(dr=Bt.createdAt)!=null&&dr.seconds?Number(Bt.createdAt.seconds):0;(!et||Rr>=et.ts)&&(et={date:wr,amount:Math.abs(br),ts:Rr})}});const Vt=Number(Nt.initialDebt||0),rr=Nr(Vt,String(Nt.initialDebtDate||""),It);Nt.balance=rr+_t,et?(Nt.lastAbonoDate=et==null?void 0:et.date,Nt.lastAbonoAmount=et==null?void 0:et.amount):(Nt.lastAbonoDate="",Nt.lastAbonoAmount=0)}catch{Nt.balance=Number(Nt.initialDebt||0),Nt.lastAbonoDate="",Nt.lastAbonoAmount=0}te(dt)}catch(mt){console.error(mt),ae(" Error cargando clientes.")}finally{Q(!1)}})()},[o,s]);const tt=()=>{X(""),Ae("+505 "),me(""),Pe(""),O("ACTIVO"),q(0),W(""),M(0)},xt=async mt=>{var dt;if(mt.preventDefault(),ae(""),!D.trim()){ae("Ingresa el nombre.");return}const ur=xy(he);if(ur.length<6){ae("Telfono incompleto.");return}const je=o?s:String(U||"").trim(),nt=je&&((dt=c.find(Nt=>Nt.id===je))==null?void 0:dt.name)||"";try{const Nt=Number(J||0),Qe=await $n(yt(ke,"customers_candies"),{name:D.trim(),phone:ur,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0),vendorId:je,vendorName:nt,initialDebt:Nt,createdAt:xr.now()});te(ot=>[{id:Qe.id,name:D.trim(),phone:ur,place:fe||"",notes:ne||"",status:Te,creditLimit:Number(K||0),vendorId:je,vendorName:nt,initialDebt:Nt,createdAt:xr.now(),balance:Nt,lastAbonoDate:"",lastAbonoAmount:0},...ot]),tt(),re(!1),ae(" Cliente creado")}catch(Nt){console.error(Nt),ae(" Error al crear cliente")}},kt=mt=>{if(o){ae(" No permitido: vendedores no editan clientes desde el listado.");return}Fe(mt.id),be(mt.name),We(mt.phone||"+505 "),wt(mt.place||""),St(mt.notes||""),jt(mt.status||"ACTIVO"),Be(Number(mt.creditLimit||0)),oe(String(mt.vendorId||""))},tr=()=>{Fe(null),be(""),We("+505 "),wt(""),St(""),jt("ACTIVO"),Be(0),oe("")},nr=async()=>{var Qe;if(o){ae(" No permitido.");return}if(!ee)return;const mt=xy(Ve);if(!ce.trim()){ae("Ingresa el nombre.");return}const ur=H.find(ot=>ot.id===ee),je=String((ur==null?void 0:ur.vendorId)||""),nt=o?s:String(ye||"");if(o&&je&&je!==s){ae(" Este cliente pertenece a otro vendedor.");return}if(l&&je&&nt&&je!==nt){ae(" Este cliente ya est asociado a otro vendedor. Primero desasocia (deja vendedor en ) y guarda; luego lo puedes asignar.");return}const dt=o?s:String(ye||""),Nt=dt&&((Qe=c.find(ot=>ot.id===dt))==null?void 0:Qe.name)||"";try{await _n(Jt(ke,"customers_candies",ee),{name:ce.trim(),phone:mt,place:pt||"",notes:Ct||"",status:Rt,creditLimit:Number(Ue||0),vendorId:dt,vendorName:Nt}),te(ot=>ot.map(_t=>_t.id===ee?{..._t,name:ce.trim(),phone:mt,place:pt||"",notes:Ct||"",status:Rt,creditLimit:Number(Ue||0),vendorId:dt,vendorName:Nt}:_t)),tr(),ae(" Cliente actualizado")}catch(ot){console.error(ot),ae(" Error al actualizar")}},cr=async mt=>{if(confirm(`Eliminar al cliente "${mt.name}"?
Se devolvern al inventario todos los dulces de sus compras y se borrarn sus movimientos.`))try{Q(!0);const je=ar(yt(ke,"sales_candies"),mr("customerId","==",mt.id)),nt=await Qt(je);for(const Qe of nt.docs){const ot=Qe.id;try{await U2(ot)}catch(_t){console.warn("restoreSaleAndDeleteCandy error",_t);try{await Mn(Jt(ke,"sales_candies",ot))}catch{}}await H$(ot)}const dt=ar(yt(ke,"ar_movements"),mr("customerId","==",mt.id)),Nt=await Qt(dt);await Promise.all(Nt.docs.map(Qe=>Mn(Jt(ke,"ar_movements",Qe.id)))),await Mn(Jt(ke,"customers_candies",mt.id)),te(Qe=>Qe.filter(ot=>ot.id!==mt.id)),ae(" Cliente eliminado y dulces devueltos al inventario")}catch(je){console.error(je),ae(" No se pudo eliminar el cliente.")}finally{Q(!1)}},Nr=(mt,ur,je)=>{const nt=Number(mt||0);if(!nt)return 0;const dt=String(ur||"").trim();return dt&&je.some(Qe=>{var Vt;const ot=Number(Qe.amount||0);if(!(ot>0))return!1;const _t=Math.abs(ot-nt)<.01,et=String(Qe.date||"").trim()===dt,It=!!((Vt=Qe.ref)!=null&&Vt.saleId);return _t&&et&&It})?0:nt},mn=(mt,ur,je)=>{const nt=mt.reduce((_t,et)=>_t+(Number(et.amount)||0),0),dt=mt.filter(_t=>Number(_t.amount)<0).reduce((_t,et)=>_t+Math.abs(Number(et.amount)||0),0),Nt=mt.filter(_t=>Number(_t.amount)>0).reduce((_t,et)=>_t+(Number(et.amount)||0),0),Qe=Nr(ur,je,mt),ot=Number(Qe||0)+nt;Ye({saldoActual:ot,totalAbonado:dt,totalCargos:Number(Qe||0)+Nt,saldoRestante:ot})},Mr=async mt=>{ge(mt),de([]),Ye({saldoActual:0,totalAbonado:0,totalCargos:0,saldoRestante:0}),Ne(!0),At(!1),ht(!1),Se(null),we(!1),gt(0),Mt(new Date().toISOString().slice(0,10)),st(""),Oe(null),vt(!0);try{const ur=ar(yt(ke,"ar_movements"),mr("customerId","==",mt.id)),je=await Qt(ur),nt=[];je.forEach(dt=>{var _t,et;const Nt=dt.data(),Qe=Nt.date??((et=(_t=Nt.createdAt)==null?void 0:_t.toDate)!=null&&et.call(_t)?Nt.createdAt.toDate().toISOString().slice(0,10):""),ot=Number(Nt.amount||0);nt.push({id:dt.id,date:Qe,type:Nt.type??(ot<0?"ABONO":"CARGO"),amount:ot,ref:Nt.ref||{},comment:Nt.comment||"",createdAt:Nt.createdAt})}),nt.sort((dt,Nt)=>{var _t,et;if(dt.date!==Nt.date)return dt.date.localeCompare(Nt.date);const Qe=((_t=dt.createdAt)==null?void 0:_t.seconds)||0,ot=((et=Nt.createdAt)==null?void 0:et.seconds)||0;return Qe-ot}),de(nt),mn(nt,Number(mt.initialDebt||0),String(mt.initialDebtDate||""))}catch(ur){console.error(ur),ae(" No se pudo cargar el estado de cuenta")}finally{vt(!1)}},Vr=mt=>{const ur=mt.filter(je=>Number(je.amount)<0).map(je=>{var nt;return{date:je.date,amount:Math.abs(Number(je.amount||0)),ts:((nt=je.createdAt)==null?void 0:nt.seconds)||0}}).sort((je,nt)=>(je.ts||0)-(nt.ts||0));return ur.length?ur[ur.length-1]:null},fn=g.useMemo(()=>Nr(Number((Re==null?void 0:Re.initialDebt)||0),String((Re==null?void 0:Re.initialDebtDate)||""),it),[Re==null?void 0:Re.initialDebt,Re==null?void 0:Re.initialDebtDate,it]),Zn=async()=>{if(!Re)return;ae("");const mt=Number(Le||0);if(!(mt>0)){ae("Ingresa un monto de abono mayor a 0.");return}const ur=parseFloat(mt.toFixed(2));if(!Ut){ae("Selecciona la fecha del abono.");return}try{xe(!0);const je={customerId:Re.id,type:"ABONO",amount:-ur,date:Ut,comment:Yt||"",createdAt:xr.now()},dt={id:(await $n(yt(ke,"ar_movements"),je)).id,date:Ut,type:"ABONO",amount:-ur,comment:Yt||"",createdAt:xr.now()},Nt=[...it,dt].sort((et,It)=>{var er,Bt;if(et.date!==It.date)return et.date.localeCompare(It.date);const Vt=((er=et.createdAt)==null?void 0:er.seconds)||0,rr=((Bt=It.createdAt)==null?void 0:Bt.seconds)||0;return Vt-rr});de(Nt),mn(Nt,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const Qe=Nt.reduce((et,It)=>et+(Number(It.amount)||0),0),ot=Nr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),Nt),_t=Number(ot||0)+Qe;te(et=>et.map(It=>It.id!==Re.id?It:{...It,balance:_t,lastAbonoDate:Ut,lastAbonoAmount:ur})),ge(et=>et&&{...et,balance:_t,lastAbonoDate:Ut,lastAbonoAmount:ur}),gt(0),st(""),Mt(new Date().toISOString().slice(0,10)),we(!1),ae(" Abono registrado")}catch(je){console.error(je),ae(" Error al registrar el abono")}finally{xe(!1)}},Bn=mt=>{Oe(mt.id),De(mt.date||new Date().toISOString().slice(0,10)),P(Math.abs(Number(mt.amount||0))),L(mt.comment||"")},zt=()=>{Oe(null),De(""),P(0),L("")},pr=async()=>{if(!ie||!Re)return;const mt=it.findIndex(dt=>dt.id===ie);if(mt===-1)return;const ur=it[mt],je=Number(He||0);if(!(je>0)){ae("El monto debe ser mayor a 0.");return}const nt=ur.type==="ABONO"?-parseFloat(je.toFixed(2)):+parseFloat(je.toFixed(2));try{await _n(Jt(ke,"ar_movements",ie),{date:le,amount:nt,comment:R||""});const dt=[...it];dt[mt]={...ur,date:le,amount:nt,comment:R||""},dt.sort((et,It)=>{var er,Bt;if(et.date!==It.date)return et.date.localeCompare(It.date);const Vt=((er=et.createdAt)==null?void 0:er.seconds)||0,rr=((Bt=It.createdAt)==null?void 0:Bt.seconds)||0;return Vt-rr}),de(dt),mn(dt,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const Nt=dt.reduce((et,It)=>et+(Number(It.amount)||0),0),Qe=Nr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),dt),ot=Number(Qe||0)+Nt,_t=Vr(dt);te(et=>et.map(It=>It.id===Re.id?{...It,balance:ot,lastAbonoDate:(_t==null?void 0:_t.date)||"",lastAbonoAmount:(_t==null?void 0:_t.amount)||0}:It)),ge(et=>et&&{...et,balance:ot,lastAbonoDate:(_t==null?void 0:_t.date)||"",lastAbonoAmount:(_t==null?void 0:_t.amount)||0}),zt(),ae(" Movimiento actualizado")}catch(dt){console.error(dt),ae(" Error al actualizar movimiento")}},Gt=async mt=>{var je,nt;if(confirm(`Eliminar este movimiento (${mt.type==="ABONO"?"Abono":"Compra"}) del ${mt.date}?${mt.type==="CARGO"&&((je=mt.ref)!=null&&je.saleId)?`
Se devolvern al inventario los dulces de esa venta.`:""}`)&&Re)try{if(Q(!0),mt.type==="CARGO"&&((nt=mt.ref)!=null&&nt.saleId)){try{await U2(mt.ref.saleId)}catch(et){console.warn("restoreSaleAndDeleteCandy error",et),Q(!1),ae(" No se pudo devolver inventario de la venta.");return}await H$(mt.ref.saleId)}else await Mn(Jt(ke,"ar_movements",mt.id));const dt=it.filter(et=>{var It,Vt;return mt.type==="CARGO"&&((It=mt.ref)!=null&&It.saleId)?((Vt=et.ref)==null?void 0:Vt.saleId)!==mt.ref.saleId:et.id!==mt.id});de(dt),mn(dt,Number(Re.initialDebt||0),String(Re.initialDebtDate||""));const Nt=dt.reduce((et,It)=>et+(Number(It.amount)||0),0),Qe=Nr(Number(Re.initialDebt||0),String(Re.initialDebtDate||""),dt),ot=Number(Qe||0)+Nt,_t=Vr(dt);te(et=>et.map(It=>It.id===Re.id?{...It,balance:ot,lastAbonoDate:(_t==null?void 0:_t.date)||"",lastAbonoAmount:(_t==null?void 0:_t.amount)||0}:It)),ge(et=>et&&{...et,balance:ot,lastAbonoDate:(_t==null?void 0:_t.date)||"",lastAbonoAmount:(_t==null?void 0:_t.amount)||0}),Se(null),ae(" Movimiento eliminado")}catch(dt){console.error(dt),ae(" Error al eliminar movimiento")}finally{Q(!1)}},Qr=g.useMemo(()=>[...H].sort((mt,ur)=>{var je,nt;return mt.status!==ur.status?mt.status==="BLOQUEADO"?1:-1:(((je=ur.createdAt)==null?void 0:je.seconds)||0)-(((nt=mt.createdAt)==null?void 0:nt.seconds)||0)}),[H]),ln=mt=>mt==="ACTIVO"?"bg-green-100 text-green-700":"bg-red-100 text-red-700",tn=g.useMemo(()=>{const mt=A.trim().toLowerCase(),ur=x.trim()===""?null:Number(x),je=y.trim()===""?null:Number(y);return Qr.filter(nt=>{const dt=!mt||String(nt.name||"").toLowerCase().includes(mt),Nt=!m||nt.status===m,Qe=Number(nt.balance||0),ot=ur===null||!Number.isNaN(ur)&&Qe>=ur,_t=je===null||!Number.isNaN(je)&&Qe<=je;return dt&&Nt&&ot&&_t})},[Qr,A,m,x,y]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Clientes (Dulces)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{re(!0),o&&W(s)},type:"button",children:"Crear Cliente"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border w-full md:w-auto",onClick:()=>f(mt=>!mt),children:d?"Ocultar filtros":"Mostrar filtros"}),d&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl p-3 grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Cliente"}),i.jsx("input",{className:"w-full border p-2 rounded",value:A,onChange:mt=>h(mt.target.value),placeholder:"Buscar por nombre"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:m,onChange:mt=>p(mt.target.value||""),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mn."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:x,onChange:mt=>v(mt.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Monto mx."}),i.jsx("input",{className:"w-full border p-2 rounded text-right",inputMode:"decimal",value:y,onChange:mt=>b(mt.target.value),placeholder:""})]})]}),i.jsx("div",{className:"md:col-span-4 flex flex-wrap gap-2 justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 border",onClick:()=>{h(""),p(""),v(""),b("")},children:"Limpiar"})})]})]}),i.jsxs("div",{className:"bg-white p-2 rounded shadow border w-full",children:[i.jsx("div",{className:"hidden md:block",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Telfono"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Lugar"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Lmite"}),i.jsx("th",{className:"p-2 border",children:"Saldo"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:ve?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Cargando"})}):tn.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:10,children:"Sin clientes"})}):tn.map(mt=>{var je;const ur=ee===mt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:(je=mt.createdAt)!=null&&je.toDate?mt.createdAt.toDate().toISOString().slice(0,10):""}),i.jsx("td",{className:"p-2 border text-left",children:ur?i.jsx("input",{className:"w-full border p-1 rounded",value:ce,onChange:nt=>be(nt.target.value)}):i.jsx("div",{className:"font-medium",children:mt.name})}),i.jsx("td",{className:"p-2 border",children:ur?i.jsx("input",{className:"w-full border p-1 rounded",value:Ve,onChange:nt=>We(xy(nt.target.value))}):mt.phone}),i.jsx("td",{className:"p-2 border",children:ur?i.jsxs("select",{className:"w-full border p-1 rounded text-xs",value:o?s:ye,onChange:nt=>oe(nt.target.value),disabled:o,title:"Vendedor asociado",children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(nt=>i.jsx("option",{value:nt.id,children:nt.name},nt.id))]}):mt.vendorName||""}),i.jsx("td",{className:"p-2 border",children:ur?i.jsxs("select",{className:"w-full border p-1 rounded",value:pt,onChange:nt=>wt(nt.target.value),children:[i.jsx("option",{value:"",children:""}),G5.map(nt=>i.jsx("option",{value:nt,children:nt},nt))]}):mt.place||""}),i.jsx("td",{className:"p-2 border",children:ur?i.jsxs("select",{className:"w-full border p-1 rounded",value:Rt,onChange:nt=>jt(nt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ln(mt.status)}`,children:mt.status})}),i.jsx("td",{className:"p-2 border",children:ur?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(Ue)?"":Ue,onChange:nt=>Be(Math.max(0,Number(nt.target.value||0)))}):Fo(mt.creditLimit||0)}),i.jsx("td",{className:"p-2 border font-semibold",children:Fo(mt.balance||0)}),i.jsx("td",{className:"p-2 border",children:ur?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-12",value:Ct,onChange:nt=>St(nt.target.value),maxLength:500}):i.jsx("span",{title:mt.notes||"",children:(mt.notes||"").length>40?(mt.notes||"").slice(0,40)+"":mt.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:ur?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:nr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:tr,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>kt(mt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>cr(mt),disabled:!l,title:l?"Borrar":"Solo admin",children:"Borrar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Mr(mt),children:"Estado de cuenta"})]})})})]},mt.id)})})]})}),i.jsx("div",{className:"md:hidden",children:ve?i.jsx("div",{className:"p-4 text-center text-sm",children:"Cargando"}):tn.length===0?i.jsx("div",{className:"p-4 text-center text-sm",children:"Sin clientes"}):i.jsx("div",{className:"space-y-2",children:tn.map(mt=>{const ur=ue===mt.id,je=ee===mt.id,nt=i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${ln(mt.status)}`,children:mt.status});return i.jsxs("div",{className:"border rounded-2xl shadow-sm bg-white overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{ae(""),!je&&$e(dt=>dt===mt.id?null:mt.id)},children:[i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx("div",{className:"truncate font-semibold",children:mt.name})}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Pendiente"}),i.jsx("div",{className:"font-semibold leading-4",children:Fo(mt.balance||0)})]}),nt]})]}),ur&&i.jsxs("div",{className:"px-3 pb-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"ltimo abono"}),i.jsx("div",{className:"font-medium",children:mt.lastAbonoDate?mt.lastAbonoDate:""}),i.jsx("div",{className:"text-[12px] text-gray-700",children:mt.lastAbonoAmount?Fo(mt.lastAbonoAmount):""})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo pendiente"}),i.jsx("div",{className:"text-lg font-bold",children:Fo(mt.balance||0)})]})]}),je?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:ce,onChange:dt=>be(dt.target.value)})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded-xl",value:Ve,onChange:dt=>We(xy(dt.target.value))})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:Rt,onChange:dt=>jt(dt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:pt,onChange:dt=>wt(dt.target.value),children:[i.jsx("option",{value:"",children:""}),G5.map(dt=>i.jsx("option",{value:dt,children:dt},dt))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded-xl",value:o?s:ye,onChange:dt=>oe(dt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(dt=>i.jsx("option",{value:dt.id,children:dt.name},dt.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Lmite"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(Ue)?"":Ue,onChange:dt=>Be(Math.max(0,Number(dt.target.value||0)))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded-xl min-h-24 resize-y",value:Ct,onChange:dt=>St(dt.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:nr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:()=>{tr(),$e(null)},type:"button",children:"Cancelar"})]})]}):i.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>kt(mt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",onClick:()=>cr(mt),disabled:!l,title:l?"Borrar":"Solo admin",type:"button",children:"Borrar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700",onClick:()=>Mr(mt),type:"button",children:"Estado"})]})]})]},mt.id)})})})]}),Ke&&i.jsx("p",{className:"mt-2 text-sm",children:Ke}),G&&Iu.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>re(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl border w-[96%] max-w-3xl max-h-[92vh] overflow-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:"Crear Cliente"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),type:"button",children:"Cerrar"})]}),i.jsxs("form",{onSubmit:xt,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mara Lpez",value:D,onChange:mt=>X(mt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:he,onChange:mt=>Ae(xy(mt.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:fe,onChange:mt=>me(mt.target.value),children:[i.jsx("option",{value:"",children:""}),G5.map(mt=>i.jsx("option",{value:mt,children:mt},mt))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Te,onChange:mt=>O(mt.target.value),children:[i.jsx("option",{value:"ACTIVO",children:"ACTIVO"}),i.jsx("option",{value:"BLOQUEADO",children:"BLOQUEADO"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor asociado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o?s:U,onChange:mt=>W(mt.target.value),disabled:o,children:[i.jsx("option",{value:"",children:" Sin vendedor "}),c.map(mt=>i.jsx("option",{value:mt.id,children:mt.name},mt.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Deuda inicial"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:J===0?"":J,onChange:mt=>M(Math.max(0,Number(mt.target.value||0))),placeholder:"Ej: 1500"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este valor cuenta como saldo desde el inicio."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lmite de crdito (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:K===0?"":K,onChange:mt=>q(Math.max(0,Number(mt.target.value||0))),placeholder:"Ej: 2000"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:ne,onChange:mt=>Pe(mt.target.value),maxLength:500,placeholder:"Notas del cliente"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[ne.length,"/500"]})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2",children:[i.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>re(!1),children:"Cancelar"}),i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar cliente"})]})]})]})]}),document.body),Z&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4 max-h-[92vh] overflow-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Estado de cuenta  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>{gt(0),Mt(new Date().toISOString().slice(0,10)),st(""),we(!0)},children:"Abonar"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Ne(!1),children:"Cerrar"})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Deuda inicial"}),i.jsx("div",{className:"text-xl font-semibold",children:Fo(Number(fn||0))})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:Fo(Ce.saldoActual)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total abonado"}),i.jsx("div",{className:"text-xl font-semibold",children:Fo(Ce.totalAbonado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo restante"}),i.jsx("div",{className:"text-xl font-semibold",children:Fo(Ce.saldoRestante)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Referencia"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:Xe?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Cargando"})}):it.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-4 text-center",children:"Sin movimientos"})}):it.map(mt=>{var je,nt;const ur=ie===mt.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ur?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:le,onChange:dt=>De(dt.target.value)}):mt.date||""}),i.jsx("td",{className:"p-2 border",children:mt.amount>=0?(je=mt.ref)!=null&&je.saleId?i.jsx("button",{type:"button",className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700 underline",title:"Ver dulces de esta compra",onClick:()=>B(mt.ref.saleId),children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"COMPRA (CARGO)"}):i.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"ABONO"})}),i.jsx("td",{className:"p-2 border",children:(nt=mt.ref)!=null&&nt.saleId?`Venta #${mt.ref.saleId}`:""}),i.jsx("td",{className:"p-2 border",children:ur?i.jsx("input",{className:"w-full border p-1 rounded",value:R,onChange:dt=>L(dt.target.value),placeholder:"Comentario"}):i.jsx("span",{title:mt.comment||"",children:(mt.comment||"").length>40?(mt.comment||"").slice(0,40)+"":mt.comment||""})}),i.jsx("td",{className:"p-2 border font-semibold",children:ur?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(He)?"":He,onChange:dt=>{const Nt=Number(dt.target.value||0),Qe=Number.isFinite(Nt)?Math.max(0,parseFloat(Nt.toFixed(2))):0;P(Qe)},placeholder:"0.00"}):Fo(mt.amount)}),i.jsx("td",{className:"p-2 border",children:ur?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:pr,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:zt,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Bn(mt),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>Gt(mt),children:"Borrar"})]})})]},mt.id)})})]})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>At(mt=>!mt),children:[i.jsx("div",{className:"font-semibold",children:"Estado de cuenta"}),i.jsx("div",{className:"text-sm text-gray-500",children:rt?"Ocultar":"Ver"})]}),rt&&i.jsxs("div",{className:"px-3 pb-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Deuda inicial"}),i.jsx("div",{className:"font-bold",children:Fo(Number(fn||0))})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo actual"}),i.jsx("div",{className:"font-bold",children:Fo(Ce.saldoActual)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Total abonado"}),i.jsx("div",{className:"font-bold",children:Fo(Ce.totalAbonado)})]}),i.jsxs("div",{className:"bg-gray-50 border rounded-xl p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Saldo restante"}),i.jsx("div",{className:"font-bold",children:Fo(Ce.saldoRestante)})]})]})]}),i.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>ht(mt=>!mt),children:[i.jsx("div",{className:"font-semibold",children:"Movimientos"}),i.jsx("div",{className:"text-sm text-gray-500",children:Je?"Ocultar":"Ver"})]}),Je&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:Xe?i.jsx("div",{className:"text-center text-sm p-3",children:"Cargando"}):it.length===0?i.jsx("div",{className:"text-center text-sm p-3",children:"Sin movimientos"}):it.map(mt=>{var Nt;const ur=Ot===mt.id,je=ie===mt.id,nt=mt.amount>=0?"CARGO":"ABONO",dt=mt.amount>=0?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700";return i.jsxs("div",{className:"border rounded-2xl overflow-hidden bg-white",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between gap-2 text-left",onClick:()=>{je||Se(Qe=>Qe===mt.id?null:mt.id)},children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Fecha"}),i.jsx("div",{className:"font-semibold",children:mt.date||""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] ${dt}`,children:nt}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[11px] text-gray-500 leading-3",children:"Monto"}),i.jsx("div",{className:"font-semibold",children:Fo(mt.amount)})]})]})]}),ur&&i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Referencia"}),i.jsx("div",{className:"font-medium",children:(Nt=mt.ref)!=null&&Nt.saleId?`Venta #${mt.ref.saleId}`:""})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Comentario"}),je?i.jsx("input",{className:"w-full border p-2 rounded-xl",value:R,onChange:Qe=>L(Qe.target.value),placeholder:"Comentario"}):i.jsx("div",{className:"font-medium",children:(mt.comment||"").trim()||""})]}),je&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded-xl",value:le,onChange:Qe=>De(Qe.target.value)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-gray-500",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded-xl text-right",value:Number.isNaN(He)?"":He,onChange:Qe=>{const ot=Number(Qe.target.value||0),_t=Number.isFinite(ot)?Math.max(0,parseFloat(ot.toFixed(2))):0;P(_t)}})]})]}),je?i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700",onClick:pr,type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl bg-gray-200 hover:bg-gray-300",onClick:zt,type:"button",children:"Cancelar"})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>Bn(mt),type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded-xl text-white bg-red-600 hover:bg-red-700",onClick:()=>Gt(mt),type:"button",children:"Borrar"})]})]})]},mt.id)})})]})]}),ft&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border w-[95%] max-w-md p-4",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Registrar abono  ",(Re==null?void 0:Re.name)||""]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:Ut,onChange:mt=>Mt(mt.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded",value:Le===0?"":Le,onChange:mt=>{const ur=Number(mt.target.value||0),je=Number.isFinite(ur)?Math.max(0,parseFloat(ur.toFixed(2))):0;gt(je)},placeholder:"0.00"}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se registrar como ABONO (negativo) con 2 decimales."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario (opcional)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Yt,onChange:mt=>st(mt.target.value),maxLength:250,placeholder:"Ej: Abono en efectivo"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[Yt.length,"/250"]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>we(!1),disabled:_e,children:"Cancelar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:Zn,disabled:_e,children:_e?"Guardando...":"Guardar abono"})]})]})})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[65]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Dulces vendidos"," ",S?` #${S}`:""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>j(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:I?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):F.map((mt,ur)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:mt.productName}),i.jsx("td",{className:"p-2 border text-right",children:mt.qty}),i.jsx("td",{className:"p-2 border text-right",children:Fo(mt.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Fo(mt.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Fo(mt.total)})]},ur))})]})})]})})]})}const Rc=t=>`C$ ${(Number(t)||0).toFixed(2)}`,tQe=["Altagracia","Taguizapa","El paso","Calaysa","Urbaite","Las Pilas","Pull","Tilgue","Balge","Santa Cruz","Moyogalpa","Santo Domingo","San Jos del Sur","San Fernando","Merida","La Paloma","San Lorenzo","San Carlos","San Miguel"];function rQe(t){switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function nQe(t){switch(t){case"Rivas":return"RIVAS";case"San Jorge":return"SAN_JORGE";case"Isla Ometepe":return"ISLA";default:return"RIVAS"}}function aQe(t){const{saleId:e,date:r,customerName:n,branch:a,items:s,total:o,vendorName:l,vendorCommissionPercent:c,vendorCommissionAmount:u}=t,d=new qr;let f=12;if(d.setFontSize(16),d.text("Multiservicios Ortiz",10,f),f+=6,d.setFontSize(12),d.text("Recibo de venta certificada",10,f),f+=8,d.setFontSize(12),d.text(`Fecha: ${r}`,10,f),f+=5,d.text(`Cliente: ${n||"Cliente Mostrador"}`,10,f),f+=5,d.text(`Sucursal: ${rQe(a)}`,10,f),f+=5,d.text(`Autorizado: ${e}`,10,f),f+=5,l&&(d.text(`Vendedor: ${l}`,10,f),f+=5),typeof c=="number"){const A=Number(u||0).toFixed(2),h=c.toFixed(2);d.text(`Comisin vendedor: ${h}%  C$ ${A}`,10,f),f+=8}else f+=3;d.setFontSize(12),d.text("Producto",10,f),d.text("Paquetes",110,f,{align:"right"}),d.text("Precio.",150,f,{align:"right"}),d.text("Subtotal",190,f,{align:"right"}),f+=4,d.line(10,f,190,f),f+=4,s.forEach(A=>{f>270&&(d.addPage(),f=12);const h=(A.productName||"").length>50?A.productName.slice(0,47)+"...":A.productName;d.text(h,10,f),d.text(String(A.qty),110,f,{align:"right"}),d.text(`C$ ${Number(A.unitPrice||0).toFixed(2)}`,150,f,{align:"right"}),d.text(`C$ ${Number(A.total||0).toFixed(2)}`,190,f,{align:"right"}),f+=5}),f+=4,d.line(10,f,190,f),f+=6,d.setFontSize(13),d.text(`Total: C$ ${Number(o||0).toFixed(2)}`,190,f,{align:"right"}),f+=6,d.setFontSize(9),d.text("Gracias por su compra.",10,f),d.save(`venta_dulces_${e}.pdf`)}async function $$(t,e){if(!t||!e)return 0;const r=ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",e),mr("productId","==",t)),n=await Qt(r);let a=0;return n.forEach(s=>{const o=s.data(),l=Number(o.remainingUnits??o.remaining??o.totalUnits??0);l>0&&(a+=l)}),a}const G$=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)};async function sQe(t){const{productId:e,vendorId:r,quantityUnits:n,saleDate:a,saleId:s}=t;let o=Math.max(0,Math.floor(Number(n||0)));const l=[];if(!e||!r||o<=0)return{allocations:[]};const c=ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",r),mr("productId","==",e),mr("remainingUnits",">",0),wn("date","asc"),wn("createdAt","asc")),u=await Qt(c);for(const d of u.docs){if(o<=0)break;const f=d.data(),A=Number(f.remainingUnits||0);if(A<=0)continue;const h=Math.min(A,o),m=A-h,p=Math.max(1,Math.floor(Number(f.unitsPerPackage||1))),x=Math.floor(m/p);await _n(d.ref,{remainingUnits:m,remainingPackages:x}),l.push({inventorySellerId:d.id,productId:e,units:h,saleDate:a,saleId:s}),o-=h}return o>0&&console.warn("[allocateSaleFIFOCandyFromVendor] No alcanz el inventario del vendedor, faltaron unidades.",{productId:e,vendorId:r,remaining:o}),{allocations:l}}function K$(t){const e="+505 ";if(!t.startsWith(e)){const n=t.replace(/\D/g,"");return e+n.slice(0,8)}const r=t.slice(e.length).replace(/\D/g,"");return e+r.slice(0,8)}function iQe({role:t="",roles:e,sellerCandyId:r="",currentUserEmail:n}){const a=e&&e.length?e:t;xn(a,"admin"),xn(a,"vendedor_dulces");const[s,o]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState([]),[f,A]=g.useState({}),[h,m]=g.useState("CONTADO"),[p,x]=g.useState("RIVAS"),[v,y]=g.useState(""),[b,w]=g.useState(""),[j,I]=g.useState(G$()),[_,S]=g.useState(""),[E,F]=g.useState(!1),[k,B]=g.useState(""),[D,X]=g.useState([]),[he,Ae]=g.useState(!0),[fe,me]=g.useState(!1),ne=g.useMemo(()=>D.reduce((ie,Oe)=>ie+(Oe.qtyPackages||0),0),[D]),Pe=g.useMemo(()=>D.reduce((ie,Oe)=>ie+(Oe.qtyPackages||0)*(Oe.unitsPerPackage||1),0),[D]),Te=g.useMemo(()=>{const ie=D.reduce((Oe,le)=>{const De=(Number(le.pricePerPackage)||0)*(le.qtyPackages||0),He=Number(le.discount)||0,P=Math.max(0,De-He);return Oe+P},0);return Math.floor(ie*100)/100},[D]),[O,K]=g.useState(0),[q,U]=g.useState(""),[W,J]=g.useState(!1),[M,H]=g.useState(!1),[te,ve]=g.useState(""),[Q,Ke]=g.useState("+505 "),[ae,ee]=g.useState(""),[Fe,ce]=g.useState(""),[be,Ve]=g.useState("ACTIVO"),[We,pt]=g.useState(0),[wt,Ct]=g.useState(""),St=()=>{ve(""),Ke("+505 "),ee(""),ce(""),Ve("ACTIVO"),pt(0)},[Rt,jt]=g.useState(!1),Ue=async ie=>{const Oe=String(ie||"").trim();if(!Oe)return;const le=Yt.find(R=>String(R.barcode||"")===Oe),De=Yt.find(R=>String(R.sku||"")===Oe),He=Yt.find(R=>String(R.id||"")===Oe),P=le||De||He||null;P?(await ft(P.id),U(" Producto agregado desde escner."),setTimeout(()=>U(""),2500)):(U(" Cdigo no corresponde a ningn producto disponible."),setTimeout(()=>U(""),2500))};function Be({open:ie,onClose:Oe,onDetected:le}){const De=g.useRef(null),He=g.useRef(null),[P,R]=g.useState(""),L=g.useRef("");return g.useEffect(()=>{if(!ie)return;let G=!1;const re=new _2,ue=()=>{var rt,At,Je;try{(rt=He.current)==null||rt.stop()}catch{}He.current=null;try{const ht=(At=De.current)==null?void 0:At.srcObject;try{(Je=ht==null?void 0:ht.getTracks)==null||Je.call(ht).forEach(Ot=>Ot.stop())}catch{}}catch{}try{De.current&&(De.current.srcObject=null)}catch{}};return(async()=>{R("");try{if(!De.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(Je=>Je.stop())}catch{}const rt=await re.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},De.current,At=>{if(!G&&At){const Je=String(At.getText()||"").trim().replace(/\s+/g,"");if(!Je||Je===L.current)return;L.current=Je,ue(),le(Je),Oe()}});He.current=rt}catch(rt){const At=String((rt==null?void 0:rt.message)||""),Je=String((rt==null?void 0:rt.name)||"");At.toLowerCase().includes("permission")||Je==="NotAllowedError"?R("Permiso de cmara denegado."):Je==="NotFoundError"||At.toLowerCase().includes("notfound")?R("No se encontr cmara en este dispositivo."):At.toLowerCase().includes("secure")||At.toLowerCase().includes("https")?R("La cmara requiere HTTPS (sitio seguro)."):R(At||"No se pudo iniciar el escner.")}})(),()=>{var rt;G=!0;try{(rt=He.current)==null||rt.stop()}catch{}He.current=null}},[ie,Oe,le]),ie?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:Oe,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:De,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),P&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:P}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}const ye=g.useMemo(()=>s.find(ie=>ie.id===v),[s,v]),oe=g.useMemo(()=>E&&_?s.filter(ie=>(ie.vendorId??ie.sellerId??"")===_):s,[s,E,_]),Z=(ye==null?void 0:ye.balance)||0,Ne=h==="CREDITO"?Z+Math.max(0,Number(Te||0))-Math.max(0,Number(O||0)):0,Re=g.useMemo(()=>{if(h!=="CREDITO")return 0;const ie=Math.max(0,Number(Z||0))+Math.max(0,Number(Te||0));return Math.floor(ie*100)/100},[h,Z,Te]),ge=ie=>{const Oe=Math.max(0,Number(ie||0));return Math.min(Oe,Re)},Xe=g.useMemo(()=>u.find(ie=>ie.id===_)||null,[u,_]),vt=(Xe==null?void 0:Xe.commissionPercent)||0,it=g.useMemo(()=>{const ie=D.reduce((Oe,le)=>Oe+Number(le.margenVendedor||0),0);return Number(ie.toFixed(2))},[D]);g.useEffect(()=>{(async()=>{const ie=ar(yt(ke,"customers_candies"),wn("createdAt","desc")),Oe=await Qt(ie),le=[];Oe.forEach(R=>{const L=R.data();le.push({id:R.id,name:L.name??"",phone:L.phone??"+505 ",place:L.place??"",status:L.status??"ACTIVO",creditLimit:Number(L.creditLimit??0),balance:0,sellerId:L.sellerId??L.vendorId??"",vendorId:L.vendorId??L.sellerId??""})});for(const R of le)try{const L=ar(yt(ke,"ar_movements"),mr("customerId","==",R.id)),G=await Qt(L);let re=0;G.forEach($e=>re+=Number($e.data().amount||0));const ue=Number(R.initialDebt||0);R.balance=re+ue}catch{R.balance=0}o(le);const De=ar(yt(ke,"products_candies"),wn("createdAt","desc")),He=await Qt(De),P=[];He.forEach(R=>{const L=R.data();P.push({id:R.id,name:L.name??"(sin nombre)",sku:L.sku??"",unitsPerPackage:Number(L.unitsPerPackage??1),barcode:String(L.barcode||""),priceRivas:Number(L.unitPriceRivas??0),priceSanJorge:Number(L.unitPriceSanJorge??0),priceIsla:Number(L.unitPriceIsla??0),providerPrice:Number(L.providerPrice??0),providerPricePerUnit:Number(L.providerPricePerUnit??0)})}),c(P);try{const R=await Qt(yt(ke,"sellers_candies")),L=[];R.forEach(G=>{const re=G.data(),ue=re.branch||"Rivas",$e=nQe(ue);L.push({id:G.id,name:re.name??"(sin nombre)",branch:$e,branchLabel:ue,commissionPercent:Number(re.commissionPercent??0)})}),d(L)}catch(R){console.error("Error cargando vendedores:",R)}A({})})()},[]),g.useEffect(()=>{var Oe,le;const ie=e&&e.length?e:t;if(ie&&((Oe=ie.includes)!=null&&Oe.call(ie,"vendedor_dulces"))&&r){S(r),F(!0);try{localStorage.setItem("pos_vendorId",r),localStorage.setItem("pos_role","VENDEDOR")}catch{}return}if(ie&&((le=ie.includes)!=null&&le.call(ie,"admin"))){F(!1);return}try{const De=localStorage.getItem("pos_vendorId")||"",He=localStorage.getItem("pos_role")||"";De&&S(De),He.toUpperCase()==="VENDEDOR"&&F(!0)}catch{}},[t,r]);const de=async ie=>{if(!ie){A({});return}const Oe=ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",ie)),le=await Qt(Oe),De={};le.forEach(He=>{const P=He.data(),R=P.productId||"";if(!R)return;const L=Number(P.remainingUnits??P.remaining??P.totalUnits??0);L<=0||(De[R]=(De[R]||0)+L)}),A(De),X(He=>{const P=[];for(const R of He){const L=De[R.productId]??0;L>0&&P.push({...R,availableUnits:L})}return P})};g.useEffect(()=>{if(!_){A({});return}const ie=u.find(Oe=>Oe.id===_);ie&&x(ie.branch),de(_)},[_,u]),g.useEffect(()=>{X(ie=>ie.map(Oe=>{const le=l.find(He=>He.id===Oe.productId);if(!le)return Oe;const De=p==="RIVAS"?le.priceRivas:p==="SAN_JORGE"?le.priceSanJorge:le.priceIsla;return{...Oe,pricePerPackage:Number(De)||0}}))},[p,l]);async function Ce(ie){const{productId:Oe,vendorId:le,branch:De}=ie;if(!Oe||!le)return 0;const He=ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",le),mr("productId","==",Oe)),P=await Qt(He);if(P.empty)return 0;const R=P.docs[0].data(),L=Number(R.unitPriceVendor??0);if(L>0)return L;const G=Number(De==="RIVAS"?R.unitPriceRivas??0:De==="SAN_JORGE"?R.unitPriceSanJorge??0:R.unitPriceIsla??0);return Number(G||0)}const Ye=ie=>{const Oe=Number(vt||0),le=Number(ie||0)*Oe/100;return Math.max(0,Number(le.toFixed(2)))},ft=async ie=>{var ue;if(!ie)return;if(!_){U("Selecciona primero el vendedor para usar su inventario."),B("");return}if(D.some($e=>$e.productId===ie)){B("");return}const Oe=l.find($e=>$e.id===ie);if(!Oe){B("");return}const le=await $$(ie,_),De=((ue=u.find($e=>$e.id===_))==null?void 0:ue.branch)??p,He=await Ce({productId:ie,vendorId:_,branch:De}),R=await(async $e=>{const{productId:rt,vendorId:At}=$e;if(!rt||!At)return 0;try{const Je=ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",At),mr("productId","==",rt)),ht=await Qt(Je);if(ht.empty)return 0;const Ot=ht.docs[0].data();return Number(Ot.providerPrice??0)}catch{return 0}})({productId:ie,vendorId:_}),L=(()=>{const $e=Number(Oe.providerPrice||0);if($e>0)return $e;const rt=Number(Oe.providerPricePerUnit||0);return rt>0?rt*Number(Oe.unitsPerPackage||1):0})(),G=Number(R||0)>0?Number(R||0):Number(L||0),re={productId:ie,productName:Oe.name||"",sku:Oe.sku||"",unitsPerPackage:Oe.unitsPerPackage||1,pricePerPackage:Number(He)||0,availableUnits:Number(le)||0,qtyPackages:0,discount:0,providerPricePerPackage:Number(G)||0,margenVendedor:0,uBruta:0};X($e=>[...$e,re]),B("")},we=(ie,Oe)=>{X(le=>le.map(De=>{if(De.productId!==ie)return De;if(Oe==="")return{...De,qtyPackages:0};const He=Math.max(0,Math.floor(Number(Oe))),P=f[ie]??De.availableUnits??0,R=Math.max(1,Number(De.unitsPerPackage||1)),L=Math.floor(P/R);let G=He;He>L&&(G=L,U(` Solo hay ${L} paquetes disponibles.`),setTimeout(()=>U(""),2500));const re=Number(De.pricePerPackage||0)*G,ue=Number(De.providerPricePerPackage||0)*G,$e=re-ue,rt=Ye($e);return{...De,qtyPackages:G,margenVendedor:rt,uBruta:$e}}))},Le=(ie,Oe)=>{X(le=>le.map(De=>{if(De.productId!==ie)return De;if(Oe==="")return{...De,discount:0};const He=Math.max(0,Math.floor(Number(Oe))),P=De.qtyPackages||0,R=Number(De.pricePerPackage||0)*P,L=Number(De.providerPricePerPackage||0)*P,G=R-L,re=Ye(G);return{...De,discount:He,margenVendedor:re,uBruta:G}}))},gt=ie=>X(Oe=>Oe.filter(le=>le.productId!==ie)),Ut=async()=>{if(!j)return"Selecciona la fecha.";if(!_)return"Selecciona el vendedor para esta venta.";if(D.length===0)return"Agrega al menos un producto.";const ie=D.filter(Oe=>(Oe.qtyPackages||0)>0);if(ie.length===0)return"Debes ingresar cantidades (> 0) en al menos un producto.";if(!(Te>0))return"El total debe ser mayor a cero.";if(h==="CONTADO"){if(!b.trim())return"Ingresa el nombre del cliente (contado)."}else{if(!v)return"Selecciona un cliente (crdito).";if(O<0)return"El pago inicial no puede ser negativo.";if(O>Re)return"El pago inicial no puede superar el saldo a deber (saldo actual + venta).";if((ye==null?void 0:ye.status)==="BLOQUEADO")return"El cliente est BLOQUEADO. No se puede facturar a crdito."}for(const Oe of ie){const le=Oe.unitsPerPackage||1,De=(Oe.qtyPackages||0)*le,He=await $$(Oe.productId,_),P=Math.floor(He/le);if(De>He)return`Inventario insuficiente en el pedido del vendedor para "${Oe.productName}". Disponible: ${P} paquetes.`;const R=(Number(Oe.pricePerPackage)||0)*(Oe.qtyPackages||0),L=Number(Oe.discount)||0;if(!Number.isInteger(L)||L<0)return`El descuento en "${Oe.productName}" debe ser entero y  0.`;if(L>R)return`El descuento en "${Oe.productName}" no puede exceder C$ ${R.toFixed(2)}.`}return null},Mt=async ie=>{ie.preventDefault(),U("");const Oe=await Ut();if(Oe){U(" "+Oe);return}try{J(!0);const le=D.filter(L=>(L.qtyPackages||0)>0).map(L=>{const G=L.unitsPerPackage||1,re=L.qtyPackages||0,ue=re*G,$e=(Number(L.pricePerPackage)||0)*(re||0),rt=Math.max(0,Math.floor(Number(L.discount)||0)),At=Math.max(0,$e-rt),Je=Number(L.providerPricePerPackage||0),ht=Je*re,Ot=$e-ht,Se=Ye(Ot);return{productId:L.productId,productName:L.productName,sku:L.sku||"",qty:ue,packages:re,unitsPerPackage:G,branch:p,unitPricePackage:Number(L.pricePerPackage)||0,discount:rt,total:Math.floor(At*100)/100,providerPricePerPackage:Je,margenVendedor:Se,uBruta:Ot}}),De={type:h,branch:p,date:j,createdAt:xr.now(),itemsTotal:Number(Te)||0,total:Number(Te)||0,quantity:Number(Pe)||0,packagesTotal:Number(ne)||0,items:le,vendorId:_},He=u.find(L=>L.id===_);He&&(De.vendorName=He.name,De.vendorBranch=He.branch,De.vendorBranchLabel=He.branchLabel,De.vendorCommissionPercent=He.commissionPercent||0,De.vendorCommissionAmount=it||0),h==="CONTADO"?De.customerName=b.trim():(De.customerId=v,De.downPayment=Number(O)||0);const P=await $n(yt(ke,"sales_candies"),De);if(h==="CONTADO"){const L=(b||"").trim();if(L)try{await $n(yt(ke,"cash_customers"),{name:L,date:j,branch:p,vendorId:_,createdAt:xr.now()})}catch(G){console.warn("No se pudo guardar cash_customer:",G)}}if(h==="CREDITO"&&v){const L={customerId:v,date:j,createdAt:xr.now(),ref:{saleId:P.id}};await $n(yt(ke,"ar_movements"),{...L,type:"CARGO",amount:Number(Te)||0}),Number(O)>0&&await $n(yt(ke,"ar_movements"),{...L,type:"ABONO",amount:-Number(O)})}const R={};for(const L of le)if(L.qty>0){const{allocations:G}=await sQe({productId:L.productId,vendorId:_,quantityUnits:L.qty,saleDate:j,saleId:P.id});R[L.productId]={productId:L.productId,vendorId:_,allocations:G}}await _n(Jt(ke,"sales_candies",P.id),{allocationsByItem:R});try{const L=h==="CONTADO"?b.trim()||"Cliente Mostrador":(ye==null?void 0:ye.name)||"Cliente crdito";aQe({saleId:P.id,date:j,customerName:L,branch:p,items:le.map(G=>({productName:G.productName,qty:G.packages,unitPrice:G.unitPricePackage,total:G.total})),total:Number(Te)||0,vendorName:He==null?void 0:He.name,vendorCommissionPercent:(He==null?void 0:He.commissionPercent)||0,vendorCommissionAmount:it})}catch(L){console.error("Error generando voucher PDF:",L)}m("CONTADO"),y(""),w(""),I(G$()),X([]),K(0),h==="CREDITO"&&v&&o(L=>L.map(G=>G.id===v?{...G,balance:(G.balance||0)+(Number(Te)||0)-(Number(O)||0)}:G)),U(" Venta de dulces registrada"),_?await de(_):A({})}catch(le){console.error(le),U(" Error al guardar la venta de dulces")}finally{J(!1)}},Yt=g.useMemo(()=>l.filter(ie=>{const Oe=f[ie.id]||0,le=Math.max(1,Number(ie.unitsPerPackage||1));return Math.floor(Oe/le)>0}).sort((ie,Oe)=>(ie.name||"").localeCompare(Oe.name||"")),[l,f]),[st,_e]=g.useState(""),xe=g.useMemo(()=>{const ie=String(st||"").trim().toLowerCase();return ie?Yt.filter(Oe=>`${Oe.name||""} ${Oe.sku||""}`.toLowerCase().includes(ie)||String(Oe.id||"").includes(ie)):Yt},[st,Yt]);return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ventas (Dulces)"})}),i.jsxs("form",{onSubmit:Mt,className:"bg-white p-3 sm:p-4 rounded shadow border mb-6",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:ie=>m(ie.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre del cliente (contado)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Cliente Mostrador",value:b,onChange:ie=>w(ie.target.value)})]}):i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs("select",{className:"w-full sm:flex-1 border p-2 rounded",value:v,onChange:ie=>y(ie.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),oe.map(ie=>i.jsxs("option",{value:ie.status==="ACTIVO"?ie.id:"",disabled:ie.status==="BLOQUEADO",children:[ie.name," | ",ie.phone," | Saldo: ",Rc(ie.balance||0)]},ie.id))]}),i.jsx("button",{type:"button",className:"w-full sm:w-auto px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-lg font-semibold",children:Rc(Z)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Re,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ie=>{const Oe=ge(ie.target.value);K(Oe)},placeholder:"0.00"})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-lg font-semibold",children:Rc(Ne)})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:ie=>I(ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:ie=>{S(ie.target.value),X([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(ie=>i.jsxs("option",{value:ie.id,children:[ie.name,"  ",ie.branchLabel,"  ",ie.commissionPercent.toFixed(2),"%"," comisin"]},ie.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor fijado por el usuario logueado."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Lista de precios / Sucursal"}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"RIVAS",checked:p==="RIVAS",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Rivas"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"SAN_JORGE",checked:p==="SAN_JORGE",readOnly:!0,disabled:!0}),i.jsx("span",{children:"San Jorge"})]}),i.jsxs("label",{className:"inline-flex items-center gap-1",children:[i.jsx("input",{type:"radio",className:"accent-blue-600",value:"ISLA",checked:p==="ISLA",readOnly:!0,disabled:!0}),i.jsx("span",{children:"Isla de Ometepe"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"La sucursal se toma automticamente del vendedor seleccionado."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:st,onChange:ie=>_e(ie.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>jt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async ie=>{const Oe=ie.target.value;B(Oe),await ft(Oe)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),xe.map(ie=>{const Oe=D.some(P=>P.productId===ie.id),le=f[ie.id]||0,De=Math.max(1,Number(ie.unitsPerPackage||1)),He=Math.floor(le/De);return He<=0?null:i.jsxs("option",{value:Oe?"":ie.id,disabled:Oe,children:[ie.name," ",ie.sku?` ${ie.sku}`:""," (disp: ",He," ","paq.)",Oe?" ":""]},ie.id)})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"El selector solo muestra productos disponibles del pedido del vendedor seleccionado (sin ceros)."})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("div",{className:"border rounded overflow-hidden min-w-[860px]",children:[i.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 px-3 py-2 text-xs font-semibold border-b",children:[i.jsx("div",{className:"col-span-4",children:"Producto"}),i.jsx("div",{className:"col-span-2 text-right",children:"Precio (paq.)"}),i.jsx("div",{className:"col-span-2 text-right",children:"Existencias (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Cantidad (paq.)"}),i.jsx("div",{className:"col-span-1 text-right",children:"Descuento"}),i.jsx("div",{className:"col-span-1 text-right",children:"Monto"}),i.jsx("div",{className:"col-span-1 text-center",children:"Quitar"})]}),D.length===0?i.jsx("div",{className:"px-3 py-4 text-sm text-gray-500",children:"No hay productos agregados."}):D.map(ie=>{const Oe=f[ie.productId]??ie.availableUnits??0,le=ie.unitsPerPackage?Math.floor(Oe/ie.unitsPerPackage):0,De=Math.max(0,le-(ie.qtyPackages||0)),He=(Number(ie.pricePerPackage)||0)*(ie.qtyPackages||0),P=Math.max(0,He-(Number(ie.discount)||0));return i.jsxs("div",{className:"grid grid-cols-12 items-center px-3 py-2 border-b text-sm gap-x-2",children:[i.jsx("div",{className:"col-span-4",children:i.jsxs("div",{className:"font-medium",children:[ie.productName,ie.sku?`  ${ie.sku}`:""]})}),i.jsx("div",{className:"col-span-2 text-right",children:Rc(ie.pricePerPackage)}),i.jsxs("div",{className:"col-span-2 text-right",children:[De," paq."]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ie.qtyPackages)||ie.qtyPackages===0?"":ie.qtyPackages,onChange:R=>we(ie.productId,R.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-1 rounded text-right",value:Number.isNaN(ie.discount)||ie.discount===0?"":ie.discount,onChange:R=>Le(ie.productId,R.target.value),inputMode:"numeric",placeholder:"0"})}),i.jsx("div",{className:"col-span-1 text-right",children:Rc(P)}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-100 hover:bg-red-200",onClick:()=>gt(ie.productId),title:"Quitar producto",children:""})})]},ie.productId)})]})}),D.length>0&&i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-6 mt-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes totales: "}),i.jsx("span",{className:"font-semibold",children:ne})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Total: "}),i.jsx("span",{className:"font-semibold",children:Rc(Te)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Comisin vendedor: "}),i.jsxs("span",{className:"font-semibold",children:[Rc(it)," ",vt?`(${vt.toFixed(2)}%)`:""]})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",disabled:W,children:W?"Guardando...":"Registrar venta"})})]}),i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>Ae(ie=>!ie),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Datos de venta",i.jsx("span",{className:"text-lg",children:he?"":"+"})]}),he&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de venta"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:j,onChange:ie=>I(ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Tipo de cliente"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:h,onChange:ie=>m(ie.target.value),children:[i.jsx("option",{value:"CONTADO",children:"Contado"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),h==="CONTADO"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (Cash)"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Ej: Mario Bergoglio",value:b,onChange:ie=>w(ie.target.value)})]}):i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cliente (crdito)"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("select",{className:"w-full border p-2 rounded",value:v,onChange:ie=>y(ie.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un cliente"}),oe.map(ie=>i.jsxs("option",{value:ie.status==="ACTIVO"?ie.id:"",disabled:ie.status==="BLOQUEADO",children:[ie.name," | Saldo: ",Rc(ie.balance||0)]},ie.id))]}),i.jsx("button",{type:"button",className:"w-full px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:()=>H(!0),children:"Crear Cliente"})]}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-base font-semibold",children:Rc(Z)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo proyectado"}),i.jsx("div",{className:"text-base font-semibold",children:Rc(Ne)})]})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pago inicial (opcional)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",max:Re,className:"w-full border p-2 rounded",value:O===0?"":O,onChange:ie=>{const Oe=ge(ie.target.value);K(Oe)},placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:_,onChange:ie=>{S(ie.target.value),X([])},disabled:E,children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.map(ie=>i.jsxs("option",{value:ie.id,children:[ie.name,"  "," ",ie.commissionPercent.toFixed(2),"%"]},ie.id))]}),E&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vendedor Logueado en esta app."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border shadow",children:[i.jsxs("button",{type:"button",onClick:()=>me(ie=>!ie),className:"w-full flex justify-between items-center p-3 font-semibold",children:["Agrega Productos",i.jsx("span",{className:"text-lg",children:fe?"":"+"})]}),fe&&i.jsxs("div",{className:"p-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Productos"}),i.jsxs("div",{className:"mt-1 mb-2 flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",placeholder:_?"Buscar producto por nombre o SKU":"Selecciona un vendedor primero",value:st,onChange:ie=>_e(ie.target.value),disabled:!_}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>jt(!0),disabled:!_,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[i.jsx("rect",{x:"3",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"3",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"3",y:"15",width:"6",height:"6",rx:"1"}),i.jsx("rect",{x:"15",y:"15",width:"6",height:"6",rx:"1"})]})})]}),i.jsxs("select",{className:"w-full border p-2 rounded",value:k,onChange:async ie=>{const Oe=ie.target.value;B(Oe),await ft(Oe)},disabled:!_,children:[i.jsx("option",{value:"",children:_?"Selecciona un producto":"Selecciona un vendedor primero"}),xe.map(ie=>{const Oe=D.some(P=>P.productId===ie.id),le=f[ie.id]||0,De=Math.max(1,Number(ie.unitsPerPackage||1)),He=Math.floor(le/De);return He<=0?null:i.jsxs("option",{value:Oe?"":ie.id,disabled:Oe,children:[ie.name," ",ie.sku?` ${ie.sku}`:""," (disp:"," ",He," paq.)",Oe?" ":""]},ie.id)})]})]}),D.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay productos agregados."}):i.jsx("div",{className:"space-y-2",children:D.map(ie=>{const Oe=f[ie.productId]??ie.availableUnits??0,le=ie.unitsPerPackage?Math.floor(Oe/ie.unitsPerPackage):0,De=Math.max(0,le-(ie.qtyPackages||0)),He=(Number(ie.pricePerPackage)||0)*(ie.qtyPackages||0),P=Math.max(0,He-(Number(ie.discount)||0));return i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50 space-y-2",children:[i.jsxs("div",{className:"font-semibold leading-tight",children:[ie.productName,ie.sku?`  ${ie.sku}`:""]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Precio x Paquete"}),i.jsx("div",{className:"font-bold",children:Rc(ie.pricePerPackage)})]}),i.jsxs("div",{className:"p-2 rounded border bg-white",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencias"}),i.jsxs("div",{className:"font-bold",children:[De," paq."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cantidad Paquetes"}),i.jsx("input",{type:"number",step:"0",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(ie.qtyPackages)||ie.qtyPackages===0?"":ie.qtyPackages,onChange:R=>we(ie.productId,R.target.value),inputMode:"numeric",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Descuento"}),i.jsx("input",{type:"number",step:"1",min:0,className:"w-full border p-2 rounded text-right",value:Number.isNaN(ie.discount)||ie.discount===0?"":ie.discount,onChange:R=>Le(ie.productId,R.target.value),inputMode:"numeric",placeholder:"0"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"font-regular text-gray-600",children:["Total ",Rc(P)]}),i.jsxs("div",{className:"font-regular text-gray-600",children:["Comision ",Rc(ie.margenVendedor||0)]}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-100 hover:bg-red-200",onClick:()=>gt(ie.productId),children:"Quitar"})]})]},ie.productId)})}),D.length>0&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:ne})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsx("div",{className:"font-semibold",children:Rc(Te)})]})]})]})]}),i.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white px-4 py-3 rounded-xl hover:bg-blue-700 disabled:opacity-60",disabled:W,children:W?"Guardando...":"Registrar venta"})]})]}),q&&i.jsx("p",{className:"mt-2 text-sm",children:q}),M&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-2 sm:p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[98%] sm:w-[95%] max-w-xl p-3 sm:p-4 max-h-[92vh] overflow-auto",children:[i.jsx("h3",{className:"text-lg font-bold mb-3",children:"Nuevo cliente"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre"}),i.jsx("input",{className:"w-full border p-2 rounded",value:te,onChange:ie=>ve(ie.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Telfono"}),i.jsx("input",{className:"w-full border p-2 rounded",value:Q,onChange:ie=>Ke(K$(ie.target.value)),placeholder:"+505 88888888",inputMode:"numeric"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Lugar"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:ae,onChange:ie=>ee(ie.target.value),children:[i.jsx("option",{value:"",children:""}),tQe.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),!E&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:wt,onChange:ie=>Ct(ie.target.value),children:[i.jsx("option",{value:"",children:"Selecciona un vendedor"}),u.filter(ie=>(ie.status??"ACTIVO")==="ACTIVO").map(ie=>i.jsxs("option",{value:ie.id,children:[ie.name,"  ",ie.branchLabel]},ie.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:Fe,onChange:ie=>ce(ie.target.value),maxLength:500})]})]}),i.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{St(),H(!1)},children:"Cancelar"}),i.jsx("button",{className:"w-full sm:w-auto px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:async()=>{var le;const ie=E?_||r:wt;if(!ie){U("Selecciona el vendedor para asociar este cliente.");return}if(U(""),!te.trim()){U("Ingresa el nombre del nuevo cliente.");return}const Oe=K$(Q);try{const De=await $n(yt(ke,"customers_candies"),{name:te.trim(),phone:Oe,place:ae||"",notes:Fe||"",status:be,creditLimit:Number(We||0),createdAt:xr.now(),sellerId:ie,vendorId:ie,vendorName:((le=u.find(P=>P.id===ie))==null?void 0:le.name)||""}),He={id:De.id,name:te.trim(),phone:Oe,place:ae||"",status:be,creditLimit:Number(We||0),balance:0,sellerId:ie};o(P=>[He,...P]),y(De.id),St(),H(!1),U(" Cliente creado")}catch(De){console.error(De),U(" Error al crear cliente")}},children:"Guardar cliente"})]})]})}),i.jsx(Be,{open:Rt,onClose:()=>jt(!1),onDetected:Ue}),W&&i.jsx("div",{className:"fixed inset-0 z-[70] bg-black/40 flex items-center justify-center p-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border px-4 py-3 flex items-center gap-3",children:[i.jsxs("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("span",{className:"font-medium",children:"Guardando venta"})]})})]})}const q$=["Energia","Bolsas","Detergentes","Limpieza de Freezer","Delivery","Pago a Personal"],r_=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function oQe(){const[t,e]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[r,n]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Br(new Date,"yyyy-MM-dd")),[o,l]=g.useState(""),[c,u]=g.useState(""),[d,f]=g.useState(0),[A,h]=g.useState("PENDIENTE"),[m,p]=g.useState(""),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState(""),[F,k]=g.useState(""),[B,D]=g.useState(""),[X,he]=g.useState(0),[Ae,fe]=g.useState("PENDIENTE"),[me,ne]=g.useState("");g.useEffect(()=>{(async()=>{b(!0);try{const M=ar(yt(ke,"expenses_candies"),wn("date","desc")),H=await Qt(M),te=[];H.forEach(ve=>{const Q=ve.data();te.push({id:ve.id,date:Q.date||Br(new Date,"yyyy-MM-dd"),category:Q.category||"",description:Q.description||"",amount:Number(Q.amount||0),status:Q.status||"PENDIENTE",notes:Q.notes||"",createdAt:Q.createdAt??xr.now()})}),v(te)}catch(M){console.error(M),j(" Error al cargar gastos")}finally{b(!1)}})()},[]);const Pe=g.useMemo(()=>x.filter(M=>!(t&&M.date<t||r&&M.date>r)),[x,t,r]),Te=g.useMemo(()=>{const M=Pe.reduce((ve,Q)=>ve+(Q.amount||0),0),H=Pe.filter(ve=>ve.status==="PAGADO").reduce((ve,Q)=>ve+(Q.amount||0),0),te=M-H;return{total:M,pagado:H,pendiente:te}},[Pe]),O=()=>{s(Br(new Date,"yyyy-MM-dd")),l(""),u(""),f(0),h("PENDIENTE"),p("")},K=async M=>{if(M.preventDefault(),j(""),!o){j("Selecciona una categora.");return}if(!c.trim()){j("Ingresa una descripcin.");return}if(!d||d<=0){j("Ingresa un monto vlido.");return}try{const H=await $n(yt(ke,"expenses_candies"),{date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:xr.now()});v(te=>[{id:H.id,date:a,category:o,description:c.trim(),amount:Number(d.toFixed(2)),status:A,notes:m||"",createdAt:xr.now()},...te]),O(),j(" Gasto registrado")}catch(H){console.error(H),j(" Error al guardar gasto")}},q=M=>{_(M.id),E(M.date),k(M.category||""),D(M.description||""),he(Number(M.amount||0)),fe(M.status||"PENDIENTE"),ne(M.notes||"")},U=()=>{_(null),E(""),k(""),D(""),he(0),fe("PENDIENTE"),ne("")},W=async()=>{if(I){if(!F){j("Selecciona una categora.");return}if(!B.trim()){j("Ingresa una descripcin.");return}if(!X||X<=0){j("Ingresa un monto vlido.");return}try{await _n(Jt(ke,"expenses_candies",I),{date:S,category:F,description:B.trim(),amount:Number(X.toFixed(2)),status:Ae,notes:me||""}),v(M=>M.map(H=>H.id===I?{...H,date:S,category:F,description:B.trim(),amount:Number(X.toFixed(2)),status:Ae,notes:me||""}:H)),U(),j(" Gasto actualizado")}catch(M){console.error(M),j(" Error al actualizar gasto")}}},J=async M=>{confirm(`Eliminar el gasto "${M.description}"?`)&&(await Mn(Jt(ke,"expenses_candies",M.id)),v(te=>te.filter(ve=>ve.id!==M.id)),j(" Gasto borrado"))};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Gastos (Dulces)"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:t,onChange:M=>e(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:M=>n(M.target.value)})]}),i.jsxs("div",{className:"ml-auto text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Totales del rango"}),i.jsxs("div",{children:["Total: ",r_(Te.total)]}),i.jsxs("div",{children:["Pagado: ",r_(Te.pagado)]}),i.jsxs("div",{children:["Pendiente: ",r_(Te.pendiente)]})]})]}),i.jsxs("form",{onSubmit:K,className:"bg-white p-4 rounded shadow border mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:a,onChange:M=>s(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:o,onChange:M=>l(M.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),q$.map(M=>i.jsx("option",{value:M,children:M},M))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Descripcin"}),i.jsx("input",{className:"w-full border p-2 rounded",placeholder:"Detalle del gasto",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-2 rounded text-right",value:d===0?"":d,onChange:M=>f(Math.max(0,Number(M.target.value||0))),placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Estado"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:A,onChange:M=>h(M.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Comentario"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-24",value:m,onChange:M=>p(M.target.value),maxLength:500,placeholder:"Comentario / nota opcional"}),i.jsxs("div",{className:"text-xs text-gray-500 text-right",children:[m.length,"/500"]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar gasto"})})]}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Comentario"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin gastos en el rango seleccionado."})}):Pe.slice().sort((M,H)=>M.date.localeCompare(H.date)).map(M=>{const H=I===M.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"date",className:"w-full border p-1 rounded",value:S,onChange:te=>E(te.target.value)}):M.date}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:F,onChange:te=>k(te.target.value),children:[i.jsx("option",{value:"",children:"Selecciona"}),q$.map(te=>i.jsx("option",{value:te,children:te},te))]}):M.category||""}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{className:"w-full border p-1 rounded",value:B,onChange:te=>D(te.target.value)}):i.jsx("span",{title:M.description,children:M.description.length>40?M.description.slice(0,40)+"":M.description})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border p-1 rounded text-right",value:Number.isNaN(X)?"":X,onChange:te=>he(Math.max(0,Number(te.target.value||0)))}):r_(M.amount)}),i.jsx("td",{className:"p-2 border",children:H?i.jsxs("select",{className:"w-full border p-1 rounded",value:Ae,onChange:te=>fe(te.target.value),children:[i.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),i.jsx("option",{value:"PAGADO",children:"Pagado"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${M.status==="PAGADO"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:M.status})}),i.jsx("td",{className:"p-2 border",children:H?i.jsx("textarea",{className:"w-full border p-1 rounded resize-y min-h-10",value:me,onChange:te=>ne(te.target.value),maxLength:500}):i.jsx("span",{title:M.notes||"",children:(M.notes||"").length>40?(M.notes||"").slice(0,40)+"":M.notes||""})}),i.jsx("td",{className:"p-2 border",children:i.jsx("div",{className:"flex gap-2 justify-center",children:H?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700",onClick:W,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:U,children:"Cancelar"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-2 py-1 rounded text-white bg-yellow-600 hover:bg-yellow-700",onClick:()=>q(M),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700",onClick:()=>J(M),children:"Borrar"})]})})})]},M.id)})})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w})]})}const Mc=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function lQe(t){var e;return t!=null&&t.date?t.date:(e=t==null?void 0:t.createdAt)!=null&&e.toDate?Br(t.createdAt.toDate(),"yyyy-MM-dd"):""}function cQe(t,e){var s,o,l;const r=lQe(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((c,u)=>c+(Number(u.packages??u.qty??u.quantity??0)||0),0),a=Number(t.total??t.itemsTotal??0)||0):(n=Number(t.packagesTotal??t.quantity??((s=t.item)==null?void 0:s.packages)??((o=t.item)==null?void 0:o.qty)??0)||0,a=Number(t.total??((l=t.item)==null?void 0:l.total)??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||void 0,customerName:t.customerName||void 0,downPayment:Number(t.downPayment||0),vendorId:t.vendorId||void 0,vendorName:t.vendorName||t.vendor||void 0,vendorCommissionPercent:Number(t.vendorCommissionPercent||0)||0,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}async function uQe(t){const e=(t||"").trim();if(!e)return;const r=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",e)),n=await Qt(r);await Promise.all(n.docs.map(a=>Mn(Jt(ke,"ar_movements",a.id))))}function dQe({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=xn(n,"vendedor_dulces"),s=xn(n,"admin"),o=s?8:7,[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(null),[h,m]=g.useState([]),p=async be=>{c(!0),d(!0),A(be),m([]);try{const Ve=await si(Jt(ke,"sales_candies",be)),We=Ve.exists()?Ve.data():null;if(!We){m([]);return}const wt=(Array.isArray(We==null?void 0:We.items)?We.items:We!=null&&We.item?[We.item]:[]).map(Ct=>({productName:String(Ct.productName||""),qty:Number(Ct.packages??Ct.qty??Ct.quantity??0),unitPrice:Number(Ct.unitPricePackage??Ct.unitPrice??0),discount:Number(Ct.discount||0),total:Number(Ct.total??Ct.lineFinal??0)}));m(wt)}catch(Ve){console.error(Ve)}finally{d(!1)}},[x,v]=g.useState(Br(new Date,"yyyy-MM-01")),[y,b]=g.useState(Br(new Date,"yyyy-MM-dd")),[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState([]),[F,k]=g.useState(!0),[B,D]=g.useState(""),[X,he]=g.useState(""),[Ae,fe]=g.useState(""),[me,ne]=g.useState(null),Pe=15,[Te,O]=g.useState(1),K=g.useMemo(()=>{const be={};return w.forEach(Ve=>be[Ve.id]=Ve.name),be},[w]),q=g.useMemo(()=>{const be={};return S.forEach(Ve=>{be[Ve.id]=Ve}),be},[S]),U=be=>{const Ve=Number(be.vendorCommissionAmount||0);if(Ve>0)return Ve;if(!be.vendorId)return 0;const We=q[be.vendorId];if(!We||!We.commissionPercent)return 0;const pt=(Number(be.total)||0)*(Number(We.commissionPercent)||0)/100;return Number(pt.toFixed(2))};g.useEffect(()=>{(async()=>{k(!0),D("");try{const be=await Qt(yt(ke,"customers_candies")),Ve=[];be.forEach(St=>Ve.push({id:St.id,name:St.data().name||""})),j(Ve);const We=await Qt(yt(ke,"sellers_candies")),pt=[];We.forEach(St=>{const Rt=St.data();pt.push({id:St.id,name:Rt.name||"",commissionPercent:Number(Rt.commissionPercent||0)})}),E(pt);const wt=await Qt(ar(yt(ke,"sales_candies"),wn("createdAt","desc"))),Ct=[];wt.forEach(St=>{const Rt=cQe(St.data(),St.id);Rt&&Rt.date>=x&&Rt.date<=y&&Ct.push(Rt)}),_(Ct.sort((St,Rt)=>Rt.date.localeCompare(St.date))),O(1)}catch(be){console.error(be),D(" Error cargando transacciones.")}finally{k(!1)}})()},[x,y]);const W=g.useMemo(()=>I.filter(be=>!(a&&(!e||!be.vendorId||be.vendorId!==e)||X&&be.customerId!==X||Ae&&be.type!==Ae)),[I,X,Ae,a,e]),J=g.useMemo(()=>{let be=0,Ve=0,We=0,pt=0;for(const wt of W)wt.type==="CONTADO"?(be+=wt.quantity,We+=wt.total):(Ve+=wt.quantity,pt+=wt.total);return{packsCash:be,packsCredito:Ve,montoCash:We,montoCredito:pt}},[W]),M=Math.max(1,Math.ceil(W.length/Pe)),H=g.useMemo(()=>{const be=(Te-1)*Pe;return W.slice(be,be+Pe)},[W,Te]),te=g.useMemo(()=>f&&I.find(be=>be.id===f)||null,[f,I]),ve=async be=>{if(s&&(ne(null),!!window.confirm("Eliminar esta venta de dulces? Se restaurar el inventario asociado.")))try{k(!0);const Ve=be.id.split("#")[0];await U2(Ve),await uQe(Ve),_(We=>We.filter(pt=>pt.id!==be.id)),D(" Venta eliminada y saldo del cliente ajustado")}catch(Ve){console.error(Ve),D(" No se pudo eliminar la venta.")}finally{k(!1)}},Q=()=>{const be=`Ventas del dia  ${x} a ${y}`,Ve=Ct=>(Ct||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),We=W.map(Ct=>{const St=Ct.customerName||(Ct.customerId?K[Ct.customerId]:"")||"Nombre cliente";return`<tr>
          <td>${Ct.date}</td>
          <td>${Ve(St)}</td>
          <td>${Ct.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${Ct.quantity}</td>
          <td style="text-align:right">${Mc(Ct.total)}</td>
        </tr>`}).join(""),pt=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${Ve(be)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${Ve(be)}</h1>
      <div class="kpis">
        <div><b>Paquetes Cash:</b> ${J.packsCash}</div>
        <div><b>Paquetes Crdito:</b> ${J.packsCredito}</div>
        <div><b>Monto Cash:</b> ${Mc(J.montoCash)}</div>
        <div><b>Monto Crdito:</b> ${Mc(J.montoCredito)}</div>
      </div>
      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Paquetes</th><th>Monto</th>
      </tr></thead><tbody>
      ${We||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,wt=window.open("","_blank");wt&&(wt.document.open(),wt.document.write(pt),wt.document.close())},Ke=()=>O(1),ae=()=>O(be=>Math.max(1,be-1)),ee=()=>O(be=>Math.min(M,be+1)),Fe=()=>O(M),ce=()=>{const be=[];if(M<=7)for(let We=1;We<=M;We++)be.push(We);else{const We=Math.max(1,Te-2),pt=Math.min(M,Te+2);be.push(1),We>2&&be.push(-1);for(let wt=We;wt<=pt;wt++)wt!==1&&wt!==M&&be.push(wt);pt<M-1&&be.push(-2),be.push(M)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ke,disabled:Te===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ae,disabled:Te===1,children:" Anterior"}),be.map((We,pt)=>typeof We=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${We===Te?"bg-blue-600 text-white":""}`,onClick:()=>O(We),children:We},pt):i.jsx("span",{className:"px-2",children:""},pt)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:ee,disabled:Te===M,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Fe,disabled:Te===M,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",Te," de ",M,"  ",W.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:x,onChange:be=>{v(be.target.value),O(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:be=>{b(be.target.value),O(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:X,onChange:be=>{he(be.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(be=>i.jsx("option",{value:be.id,children:be.name},be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Ae,onChange:be=>{fe(be.target.value),O(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Q,children:"Exportar PDF"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:J.packsCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:J.packsCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Mc(J.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Mc(J.montoCredito)})]})]}),i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):H.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):H.map(be=>{const Ve=be.customerName||(be.customerId?K[be.customerId]:"")||"Nombre cliente",We=U(be);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:Ve}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:be.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${be.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:be.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Paquetes:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:pt=>{pt.preventDefault(),p(be.id)},title:"Ver detalle",children:be.quantity})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Mc(be.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:Ve})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:be.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:be.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(be.id),title:"Ver detalle",children:be.quantity})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Mc(be.total)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("span",{className:"font-medium",children:We>0?Mc(We):""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("span",{className:"font-medium",children:be.vendorName||""})]}),s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>ne(pt=>pt===be.id?null:be.id),children:" Acciones"}),me===be.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ve(be),children:"Eliminar"})]})]})})]})},be.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:ce()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Comisin"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):H.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):H.map(be=>{const Ve=be.customerName||(be.customerId?K[be.customerId]:"")||"Nombre cliente",We=U(be);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:be.date}),i.jsx("td",{className:"p-2 border",children:Ve}),i.jsx("td",{className:"p-2 border",children:be.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(be.id),children:be.quantity})}),i.jsx("td",{className:"p-2 border",children:Mc(be.total)}),i.jsx("td",{className:"p-2 border",children:We>0?Mc(We):""}),i.jsx("td",{className:"p-2 border",children:be.vendorName||""}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>ne(pt=>pt===be.id?null:be.id),title:"Acciones",children:""}),me===be.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>ve(be),children:"Eliminar"})})]})]},be.id)})})]}),ce()]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Productos/paquetes vendidos"," ",f?` #${f}`:""]}),te&&i.jsxs("div",{className:"text-sm text-gray-700 mt-1",children:["Comisin de vendedor:"," ",i.jsx("span",{className:"font-semibold",children:U(te)>0?Mc(U(te)):""})]})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Paquetes"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((be,Ve)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:be.productName}),i.jsx("td",{className:"p-2 border text-right",children:be.qty}),i.jsx("td",{className:"p-2 border text-right",children:Mc(be.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Mc(be.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Mc(be.total)})]},Ve))})]})})]})})]})}const dn=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Xy(t){var r;const e=t==null?void 0:t.date;return e||((r=t==null?void 0:t.createdAt)!=null&&r.toDate?Br(t.createdAt.toDate(),"yyyy-MM-dd"):"")}function fQe(t){if(Array.isArray(t==null?void 0:t.items))return t.items.map(n=>{const a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(n==null?void 0:n.lineFinal)??0)/a:0)||0;return{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}});if(t!=null&&t.item){const n=t.item,a=Number((n==null?void 0:n.packages)??(n==null?void 0:n.qty)??(n==null?void 0:n.quantity)??0)||Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,s=Number((n==null?void 0:n.unitPricePackage)??(n==null?void 0:n.unitPrice)??0)||(a>0?Number((n==null?void 0:n.total)??(t==null?void 0:t.total)??0)/a:0)||0;return[{productId:String((n==null?void 0:n.productId)||""),productName:String((n==null?void 0:n.productName)||""),sku:(n==null?void 0:n.sku)||"",qty:a,unitPrice:Number(s||0),discount:Number((n==null?void 0:n.discount)||0),vendorCommissionAmount:Number((n==null?void 0:n.vendorCommissionAmount)??(n==null?void 0:n.commissionAmount)??0),uBruta:Number((n==null?void 0:n.uBruta)??(n==null?void 0:n.grossProfit)??0)}]}const e=Number((t==null?void 0:t.packagesTotal)??(t==null?void 0:t.quantity)??0)||0,r=e>0?Number((t==null?void 0:t.total)||0)/e:0;return e>0?[{productId:String((t==null?void 0:t.productId)||""),productName:String((t==null?void 0:t.productName)||""),sku:(t==null?void 0:t.sku)||"",qty:e,unitPrice:Number(r||0),discount:Number((t==null?void 0:t.discount)||0),vendorCommissionAmount:Number((t==null?void 0:t.vendorCommissionAmount)??(t==null?void 0:t.commissionAmount)??0),uBruta:Number((t==null?void 0:t.uBruta)??(t==null?void 0:t.grossProfit)??0)}]:[]}function hQe(t,e){const r=Xy(t);if(!r)return null;const n=t.vendorId||t.sellerId||void 0,a=t.vendorName||t.sellerName||void 0,s=fQe(t);let o=Number(t.total??t.itemsTotal??0)||s.reduce((l,c)=>{const u=(Number(c.qty||0)||0)*(Number(c.unitPrice||0)||0),d=Math.max(0,Number(c.discount||0)),f=Math.max(0,u-d);return l+f},0);return o=Number(o||0),{id:e,date:r,type:t.type||"CONTADO",total:o,items:s,customerId:t.customerId||void 0,customerName:t.customerName||void 0,vendorId:n,vendorName:a,vendorCommissionAmount:Number(t.vendorCommissionAmount||0)||0}}function AQe(t,e,r,n){const a={};for(const l of t)a[l.productId]||(a[l.productId]={productName:l.productName,lots:[]}),a[l.productId].lots.push({date:l.date,qtyLeft:Number(l.quantity||0),cost:Number(l.purchasePrice||0)});for(const l of Object.keys(a))a[l].lots.sort((c,u)=>c.date.localeCompare(u.date));const s=[...e].sort((l,c)=>l.date.localeCompare(c.date));let o=0;for(const l of s)for(const c of l.items||[]){const u=a[c.productId];if(!u)continue;let d=Number(c.qty||0);if(!(d<=0))for(const f of u.lots){if(d<=0)break;if(f.qtyLeft<=0)continue;const A=Math.min(f.qtyLeft,d);l.date>=r&&l.date<=n&&(o+=A*f.cost),f.qtyLeft-=A,d-=A}}return o}async function mQe(t){const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}function pQe(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[a,s]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[o,l]=g.useState([]),[c,u]=g.useState([]),[d,f]=g.useState([]),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState([]),[y,b]=g.useState(!0),[w,j]=g.useState(""),[I,_]=g.useState([]),[S,E]=g.useState({}),[F,k]=g.useState({}),[B,D]=g.useState(!1),[X,he]=g.useState(null),[Ae,fe]=g.useState([]),[me,ne]=g.useState(!1),[Pe,Te]=g.useState({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0}),[O,K]=g.useState(!1),[q,U]=g.useState(""),[W,J]=g.useState([]),[M,H]=g.useState(!1),[te,ve]=g.useState("CASH"),[Q,Ke]=g.useState(1),ae=10,[ee,Fe]=g.useState(!1),[ce,be]=g.useState(null);g.useEffect(()=>{(async()=>{try{const ge=await Qt(yt(ke,"sellers_candies")),Xe=[];ge.forEach(vt=>{const it=vt.data();Xe.push({id:vt.id,name:it.name||"",commissionPercent:Number(it.commissionPercent||0)})}),_(Xe)}catch(ge){console.error("Error cargando sellers_candies",ge)}})()},[]);const Ve=g.useMemo(()=>{const ge={};return I.forEach(Xe=>{ge[Xe.id]=Xe}),ge},[I]);g.useEffect(()=>{(async()=>{b(!0),j("");try{const ge=await Qt(yt(ke,"sales_candies")),Xe=[],vt=[];ge.forEach(_e=>{const xe=_e.data(),ie=hQe(xe,_e.id);ie&&(ie.date<=a&&Xe.push(ie),ie.date>=r&&ie.date<=a&&vt.push(ie))}),u(Xe),l(vt);const it=await Qt(yt(ke,"inventory_candies")),de=[];it.forEach(_e=>{const xe=_e.data(),ie=Xy(xe);if(!ie||ie>a)return;const Oe=Math.max(1,Math.floor(Number(xe.unitsPerPackage||1))),le=Number(xe.totalUnits??xe.quantity??0),De=Number(xe.packages??0),He=Number(xe.remaining??0),P=Number(xe.remainingPackages??0),R=De>0?De:le>0?Math.floor(le/Oe):0,L=P>0?P:He>0?Math.floor(He/Oe):0;de.push({id:_e.id,productId:xe.productId,productName:xe.productName||"",date:ie,quantity:Number(R||0),remaining:Number(L||0),purchasePrice:Number(xe.providerPrice||xe.purchasePrice||0),unitsPerPackage:Oe})}),f(de);const Ce=await Qt(yt(ke,"expenses_candies")),Ye=[];Ce.forEach(_e=>{const xe=_e.data(),ie=Xy(xe);ie&&ie>=r&&ie<=a&&Ye.push({id:_e.id,date:ie,category:xe.category||"",description:xe.description||"",amount:Number(xe.amount||0),status:xe.status||""})}),h(Ye);const ft=await Qt(yt(ke,"ar_movements")),we=[],Le={};ft.forEach(_e=>{const xe=_e.data(),ie=Xy(xe);if(!ie)return;const Oe=xe.customerId,le=Number(xe.amount||0);Oe&&(Le[Oe]=(Le[Oe]||0)+le),xe.type==="ABONO"&&ie>=r&&ie<=a&&we.push({id:_e.id,customerId:Oe,type:"ABONO",amount:le,date:ie})}),p(we);const gt=await Qt(yt(ke,"customers_candies")),Ut=[];gt.forEach(_e=>{const xe=_e.data();Ut.push({id:_e.id,name:xe.name||"",balance:Le[_e.id]||0})}),v(Ut);const Mt=await Qt(yt(ke,"inventory_candies_sellers")),Yt={},st={};Mt.forEach(_e=>{const xe=_e.data(),ie=Xy(xe);if(!ie||ie<r||ie>a)return;const Oe=xe.sellerId||xe.vendorId||"NO_VENDOR",le=xe.productName||"",De=xe.sku||"",He=Math.max(1,Math.floor(Number(xe.unitsPerPackage||1))),P=Number(xe.totalUnits??0),R=Number(xe.packages??0),L=Number(xe.remainingUnits??xe.remaining??0),G=Number(xe.remainingPackages??0),re=R>0?R:P>0?Math.floor(P/He):0,ue=G>0?G:L>0?Math.floor(L/He):0,$e=Number(xe.totalVendor??0),rt=Number(xe.uVendor??0),At=Number(xe.subtotal??0),Je=Number(xe.uBruta??0),ht=re,Ot=ht>0?$e/ht:0,Se=ht>0?rt/ht:0,tt=ht>0?At/ht:0,xt=ht>0?Je>0?Je/ht:Ot-tt:0;if(Yt[Oe]||(Yt[Oe]={associated:[],remaining:[]}),re>0){const kt=re,tr=kt*Ot,nr=kt*tt,cr=tr,Nr=kt*Se,mn=kt*xt;Yt[Oe].associated.push({saleId:_e.id,date:ie,productId:xe.productId||xe.id||"",productName:le,sku:De,qty:kt,unitPrice:Ot,costTotal:nr,lineTotal:tr,discount:0,lineFinal:cr,grossProfit:mn,vendorCommissionAmount:Nr,type:"ASSOCIATED"}),st[Oe]=(st[Oe]||0)+kt}if(ue>0){const kt=ue,tr=kt*Ot,nr=kt*tt,cr=tr,Nr=kt*Se,mn=kt*xt;Yt[Oe].remaining.push({saleId:_e.id,date:ie,productId:xe.productId||xe.id||"",productName:le,sku:De,qty:kt,unitPrice:Ot,costTotal:nr,lineTotal:tr,discount:0,lineFinal:cr,grossProfit:mn,vendorCommissionAmount:Nr,type:"REMAINING"})}}),E(Yt),k(st)}catch(ge){console.error(ge),j(" Error cargando datos del dashboard.")}finally{b(!1)}})()},[r,a,t]);const We=g.useCallback((ge,Xe)=>{const vt=Number(Xe.vendorCommissionAmount||0)||0;if(vt>0)return vt;const it=Number(ge.vendorCommissionAmount||0)||0;if(it<=0)return 0;const de=Number(Xe.qty||0),Ce=Number(Xe.unitPrice||0),Ye=de*Ce,ft=Math.max(0,Number(Xe.discount||0)),we=Math.max(0,Ye-ft);return!we||!ge.total?0:it*we/ge.total},[]),pt=g.useMemo(()=>{try{return AQe(d,c,r,a)}catch(ge){return console.error(ge),0}},[d,c,r,a]),wt=g.useMemo(()=>{const ge=o.reduce((Mt,Yt)=>Mt+(Yt.total||0),0),Xe=A.reduce((Mt,Yt)=>Mt+(Yt.amount||0),0),vt=ge-pt,it=vt-Xe;let de=0;for(const Mt of o)for(const Yt of Mt.items||[]){const st=Number(Yt.uBruta||0);Number.isFinite(st)&&(de+=st)}const Ce=m.reduce((Mt,Yt)=>Mt+Math.abs(Yt.amount||0),0),Ye=x.filter(Mt=>(Mt.balance||0)>0),ft=Ye.reduce((Mt,Yt)=>Mt+(Yt.balance||0),0);let we=0,Le=0,gt=0,Ut=0;for(const Mt of o){const Yt=(Mt.items||[]).reduce((_e,xe)=>_e+(Number(xe.qty)||0),0),st=(Mt.items||[]).reduce((_e,xe)=>_e+We(Mt,xe),0);Mt.type==="CONTADO"?(we+=Yt,gt+=st):(Le+=Yt,Ut+=st)}return{ventasTotales:ge,costoMercaderia:pt,gastosPeriodo:Xe,gananciaAntes:vt,utilidadBrutaOrdenes:de,gananciaDespues:it,abonosRecibidos:Ce,saldosPendientes:ft,clientesConSaldo:Ye.length,paquetesCash:we,paquetesCredito:Le,comisionCash:gt,comisionCredito:Ut}},[o,A,m,x,pt,We,S]),Ct=g.useMemo(()=>{const ge={},Xe={};for(const vt of o)if(!(vt.type!=="CREDITO"||!vt.customerId))for(const it of vt.items||[]){const de=Number(it.qty||0),Ce=Number(it.unitPrice||0),Ye=de*Ce,ft=Math.max(0,Number(it.discount||0)),we=Math.max(0,Ye-ft);ge[vt.customerId]=(ge[vt.customerId]||0)+de,Xe[vt.customerId]=(Xe[vt.customerId]||0)+we}return x.filter(vt=>(vt.balance||0)>0).map(vt=>({customerId:vt.id,name:vt.name,paquetesAsociados:ge[vt.id]||0,saldoTotal:Xe[vt.id]||0,saldoPendiente:vt.balance||0})).sort((vt,it)=>it.saldoPendiente-vt.saldoPendiente)},[x,o]),St=g.useMemo(()=>{const ge={};return x.forEach(Xe=>ge[Xe.id]=Xe.name),ge},[x]),Rt=g.useMemo(()=>[...o].sort((ge,Xe)=>Xe.date.localeCompare(ge.date)).map(ge=>{var de;const Xe=(ge.items||[]).reduce((Ce,Ye)=>Ce+(Number(Ye.qty)||0),0);let vt="Cash";ge.type==="CREDITO"&&ge.customerId?vt=St[ge.customerId]||"":ge.type==="CONTADO"&&(vt=((de=ge.customerName)==null?void 0:de.trim())||"Cash");const it=Xe>0?ge.total/Xe:0;return{id:ge.id,date:ge.date,type:ge.type==="CREDITO"?"Crdito":"Cash",customer:vt,paquetes:Xe,total:Number(ge.total||0),avgPrice:it}}),[o,St]),jt=g.useMemo(()=>{var Xe,vt;const ge=new Map;for(const it of o){const de=it.vendorId||"NO_VENDOR",Ce=it.vendorName||((Xe=Ve[de])==null?void 0:Xe.name)||"Sin vendedor";ge.has(de)||ge.set(de,{vendorId:de,vendorName:Ce,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0});const Ye=ge.get(de);for(const ft of it.items||[]){const we=Number(ft.qty||0),Le=Number(ft.unitPrice||0),gt=we*Le,Ut=Math.max(0,Number(ft.discount||0)),Mt=Math.max(0,gt-Ut),Yt=We(it,ft);it.type==="CONTADO"?(Ye.paquetesVendidos+=we,Ye.totalVendido+=Mt,Ye.comisionCash+=Yt):(Ye.paquetesFiados+=we,Ye.totalFiado+=Mt,Ye.comisionCredito+=Yt)}}for(const[it,de]of Object.entries(F)){const Ce=ge.get(it),Ye=(Ce==null?void 0:Ce.vendorName)||((vt=Ve[it])==null?void 0:vt.name)||"Sin vendedor",ft=Ce||{vendorId:it,vendorName:Ye,paquetesAsociados:0,paquetesVendidos:0,paquetesFiados:0,totalVendido:0,totalFiado:0,comisionCash:0,comisionCredito:0,paquetesRestantes:0};ft.paquetesAsociados=de,ft.paquetesRestantes=Math.max(de-ft.paquetesVendidos-ft.paquetesFiados,0),ge.set(it,ft)}return Array.from(ge.values()).sort((it,de)=>de.totalVendido+de.totalFiado-(it.totalVendido+it.totalFiado))},[o,F,Ve,We]),Ue=async ge=>{D(!0),he({id:ge.customerId,name:ge.name}),fe([]),ne(!0),Te({totalBruto:0,totalDescuento:0,totalFiado:0,saldoActual:0,abonadoPeriodo:0});try{const Xe=[];let vt=0,it=0,de=0;for(const we of o)if(!(we.type!=="CREDITO"||we.customerId!==ge.customerId))for(const Le of we.items||[]){const gt=Number(Le.qty||0),Ut=Number(Le.unitPrice||0),Mt=gt*Ut,Yt=Math.max(0,Number(Le.discount||0)),st=Math.max(0,Mt-Yt);Xe.push({saleId:we.id,date:we.date,productName:Le.productName,sku:Le.sku||"",qty:gt,unitPrice:Ut,lineTotal:Mt,discount:Yt,lineFinal:st}),vt+=Mt,it+=Yt,de+=st}let Ce=0;for(const we of m)we.customerId===ge.customerId&&(Ce+=Math.abs(we.amount||0));const Ye=x.find(we=>we.id===ge.customerId),ft=(Ye==null?void 0:Ye.balance)||0;fe(Xe),Te({totalBruto:vt,totalDescuento:it,totalFiado:de,saldoActual:ft,abonadoPeriodo:Ce})}catch(Xe){console.error(Xe),j(" No se pudo cargar el detalle del cliente.")}finally{ne(!1)}},Be=(ge,Xe,vt)=>{K(!0),ve(vt),Ke(1);let it="";vt==="ASSOCIATED"?it=`Paquetes asociados  ${Xe}`:vt==="REMAINING"?it=`Paquetes restantes  ${Xe}`:vt==="CASH"?it=`Paquetes vendidos (Cash)  ${Xe}`:it=`Paquetes fiados (Crdito)  ${Xe}`,U(it),J([]),H(!0);try{if(vt==="ASSOCIATED"||vt==="REMAINING"){const Ce=S[ge],Ye=vt==="ASSOCIATED"?(Ce==null?void 0:Ce.associated)||[]:(Ce==null?void 0:Ce.remaining)||[];J([...Ye].sort((ft,we)=>(we.qty||0)-(ft.qty||0))),H(!1);return}const de=[];for(const Ce of o)if(((Ce.vendorId||"NO_VENDOR")===ge||!Ce.vendorId&&ge==="NO_VENDOR")&&!(vt==="CASH"&&Ce.type!=="CONTADO")&&!(vt==="CREDIT"&&Ce.type!=="CREDITO"))for(const ft of Ce.items||[]){const we=Number(ft.qty||0),Le=Number(ft.unitPrice||0),gt=we*Le,Ut=Math.max(0,Number(ft.discount||0)),Mt=Math.max(0,gt-Ut),Yt=We(Ce,ft);de.push({saleId:Ce.id,date:Ce.date,productName:ft.productName,sku:ft.sku||"",qty:we,unitPrice:Le,lineTotal:gt,discount:Ut,lineFinal:Mt,vendorCommissionAmount:Yt,type:vt})}J(de.sort((Ce,Ye)=>Ce.date.localeCompare(Ye.date)))}catch(de){console.error(de),j(" No se pudo cargar el detalle del vendedor.")}finally{H(!1)}},ye=g.useMemo(()=>te!=="ASSOCIATED"&&te!=="REMAINING"?1:Math.max(1,Math.ceil(W.length/ae)),[te,W.length]),oe=g.useMemo(()=>{if(te!=="ASSOCIATED"&&te!=="REMAINING")return W;const ge=(Q-1)*ae;return W.slice(ge,ge+ae)},[te,Q,W]),Z=te==="ASSOCIATED"||te==="REMAINING"?10:8;g.useEffect(()=>{te!=="ASSOCIATED"&&te!=="REMAINING"||Q>ye&&Ke(ye)},[te,Q,ye]);const Ne=ge=>{const Xe=o.find(vt=>vt.id===ge)||null;be(Xe),Fe(!0)},Re=async ge=>{if(window.confirm("Eliminar esta venta? Esta accin no se puede deshacer."))try{await U2(ge),await mQe(ge),l(Xe=>Xe.filter(vt=>vt.id!==ge)),u(Xe=>Xe.filter(vt=>vt.id!==ge)),Fe(!1),be(null)}catch(Xe){console.error(Xe),alert("No se pudo eliminar la venta. Revisa la consola para ms detalles.")}};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Finanzas (Dulces)"}),i.jsx(_c,{onClick:e,loading:y})]}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:ge=>n(ge.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:a,onChange:ge=>s(ge.target.value)})]})]}),i.jsx("div",{className:"md:hidden mb-4",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",open:!0,children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"KPIs"}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:dn(wt.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:dn(wt.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.comisionCredito)})]})]})})]})}),i.jsxs("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Totales"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.ventasTotales)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Contado + Crdito del periodo."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Costo de Mercadera (FIFO)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.costoMercaderia)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:dn(wt.utilidadBrutaOrdenes||0)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.gastosPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Neta"}),i.jsx("div",{className:"text-xl font-semibold text-green-600",children:dn(wt.gananciaDespues)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonos Recibidos"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.abonosRecibidos)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldos Pendientes"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.saldosPendientes)}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"A la fecha."})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Clientes con Saldo"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.clientesConSaldo})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.paquetesCash})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes Crdito (vendidos)"}),i.jsx("div",{className:"text-xl font-semibold",children:wt.paquetesCredito})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.comisionCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(wt.comisionCredito)})]})]}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Consolidado clientes y vendedores"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border",children:"Saldo total"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):Ct.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):Ct.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ue({customerId:ge.customerId,name:ge.name}),title:"Ver paquetes fiados del periodo",children:ge.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:dn(ge.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:dn(ge.saldoPendiente)})]},ge.customerId))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):jt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):jt.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"ASSOCIATED"),children:ge.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"REMAINING"),children:ge.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"CASH"),children:ge.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"CREDIT"),children:ge.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.comisionCredito)})]},ge.vendorId))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado por cliente (Crdito)"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Paquetes asociados (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo total (periodo)"}),i.jsx("th",{className:"p-2 border",children:"Saldo pendiente"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):Ct.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin clientes con saldo"})}):Ct.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.name}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ue({customerId:ge.customerId,name:ge.name}),title:"Ver paquetes fiados del periodo",children:ge.paquetesAsociados})}),i.jsx("td",{className:"p-2 border",children:dn(ge.saldoTotal)}),i.jsx("td",{className:"p-2 border font-semibold",children:dn(ge.saldoPendiente)})]},ge.customerId))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Consolidado vendedores"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes asociados"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes vendidos (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total vendido (Cash)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Cash"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes fiados (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total fiado (Crdito)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin Crdito"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Cargando"})}):jt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:9,children:"Sin datos de vendedores en el rango seleccionado."})}):jt.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"ASSOCIATED"),children:ge.paquetesAsociados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"REMAINING"),children:ge.paquetesRestantes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"CASH"),children:ge.paquetesVendidos})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.totalVendido)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.comisionCash)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Be(ge.vendorId,ge.vendorName,"CREDIT"),children:ge.paquetesFiados})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.totalFiado)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.comisionCredito)})]},ge.vendorId))})]})}),i.jsx("div",{className:"md:hidden mb-6",children:i.jsxs("details",{className:"bg-white border rounded-lg shadow",children:[i.jsx("summary",{className:"cursor-pointer px-3 py-2 font-semibold",children:"Transacciones y gastos"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Rt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):Rt.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ne(ge.id),children:ge.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Re(ge.id),children:"Eliminar"})})]},ge.id))})]})}),i.jsx("h3",{className:"text-base font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"bg-white p-2 rounded border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ge,Xe)=>ge.date.localeCompare(Xe.date)).map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.date}),i.jsx("td",{className:"p-2 border",children:ge.category||""}),i.jsx("td",{className:"p-2 border",children:ge.description?i.jsx("span",{title:ge.description,children:ge.description.length>40?ge.description.slice(0,40)+"":ge.description}):""}),i.jsx("td",{className:"p-2 border",children:dn(ge.amount)}),i.jsx("td",{className:"p-2 border",children:ge.status||""})]},ge.id))})]})})]})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Transacciones del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full mb-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Cliente"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta (prom.)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Cargando"})}):Rt.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:7,children:"Sin transacciones en el rango seleccionado."})}):Rt.map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.customer}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:ge.type}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"underline text-blue-600 hover:text-blue-800",onClick:()=>Ne(ge.id),children:ge.paquetes})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.avgPrice)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:dn(ge.total)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>Re(ge.id),children:"Eliminar"})})]},ge.id))})]})}),i.jsx("h3",{className:"hidden md:block text-lg font-semibold mb-2",children:"Gastos del periodo"}),i.jsx("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Estado"})]})}),i.jsx("tbody",{children:y?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Cargando"})}):A.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:5,children:"Sin gastos en el rango seleccionado."})}):A.sort((ge,Xe)=>ge.date.localeCompare(Xe.date)).map(ge=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.date}),i.jsx("td",{className:"p-2 border",children:ge.category||""}),i.jsx("td",{className:"p-2 border",children:ge.description?i.jsx("span",{title:ge.description,children:ge.description.length>40?ge.description.slice(0,40)+"":ge.description}):""}),i.jsx("td",{className:"p-2 border",children:dn(ge.amount)}),i.jsx("td",{className:"p-2 border",children:ge.status||""})]},ge.id))})]})}),w&&i.jsx("p",{className:"mt-2 text-sm",children:w}),B&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle cliente  ",(X==null?void 0:X.name)||""]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>D(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-3 mb-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total bruto (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(Pe.totalBruto)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Descuento (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(Pe.totalDescuento)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Monto total fiado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(Pe.totalFiado)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Abonado (periodo)"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(Pe.abonadoPeriodo)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Saldo actual"}),i.jsx("div",{className:"text-xl font-semibold",children:dn(Pe.saldoActual)})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha compra"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"})]})}),i.jsx("tbody",{children:me?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Cargando"})}):Ae.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center",children:"Sin paquetes fiados en el periodo."})}):Ae.sort((ge,Xe)=>ge.date.localeCompare(Xe.date)).map((ge,Xe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.date}),i.jsx("td",{className:"p-2 border",children:ge.productName}),i.jsx("td",{className:"p-2 border",children:ge.qty}),i.jsx("td",{className:"p-2 border",children:dn(ge.unitPrice)}),i.jsx("td",{className:"p-2 border",children:dn(ge.lineTotal)}),i.jsx("td",{className:"p-2 border",children:dn(ge.discount)}),i.jsx("td",{className:"p-2 border",children:dn(ge.lineFinal)})]},`${ge.saleId}-${Xe}`))})]})})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-5xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-bold",children:q}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>K(!1),children:"Cerrar"})]}),(te==="ASSOCIATED"||te==="REMAINING")&&!M&&i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2 text-sm",children:[i.jsxs("div",{className:"text-gray-600",children:["Pgina ",Q," de ",ye]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ke(ge=>Math.max(1,ge-1)),disabled:Q<=1,children:"Anterior"}),i.jsx("button",{className:"px-3 py-1 rounded border bg-white hover:bg-gray-50 disabled:opacity-50",onClick:()=>Ke(ge=>Math.min(ye,ge+1)),disabled:Q>=ye,children:"Siguiente"})]})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha Orden"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Costo"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]}):i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Descuento"}),i.jsx("th",{className:"p-2 border",children:"Monto final"}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"p-2 border",children:"Utilidad bruta"}),i.jsx("th",{className:"p-2 border",children:"Utilidad vendedor"})]}):i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:M?i.jsx("tr",{children:i.jsx("td",{colSpan:Z,className:"p-4 text-center",children:"Cargando"})}):W.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:Z,className:"p-4 text-center",children:"Sin paquetes para este vendedor en el periodo."})}):oe.map((ge,Xe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.date}),i.jsx("td",{className:"p-2 border",children:ge.productName}),i.jsx("td",{className:"p-2 border",children:ge.qty}),i.jsx("td",{className:"p-2 border",children:dn(ge.unitPrice)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:dn(ge.costTotal??0)}),i.jsx("td",{className:"p-2 border",children:dn(ge.lineTotal)})]}):i.jsx("td",{className:"p-2 border",children:dn(ge.lineTotal)}),i.jsx("td",{className:"p-2 border",children:dn(ge.discount)}),i.jsx("td",{className:"p-2 border",children:dn(ge.lineFinal)}),te==="ASSOCIATED"||te==="REMAINING"?i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border",children:dn(ge.grossProfit||0)}),i.jsx("td",{className:"p-2 border",children:dn(ge.vendorCommissionAmount)})]}):i.jsx("td",{className:"p-2 border",children:dn(ge.vendorCommissionAmount)})]},`${ge.saleId}-${Xe}`))})]})})]})}),ee&&ce&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-4xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h3",{className:"text-lg font-bold",children:["Detalle de venta  ",ce.date]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>Fe(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto mb-3",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio Paq"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Comisin"})]})}),i.jsx("tbody",{children:(ce.items||[]).map((ge,Xe)=>{const vt=Number(ge.qty||0),it=Number(ge.unitPrice||0),de=vt*it,Ce=We(ce,ge);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ge.productName}),i.jsx("td",{className:"p-2 border",children:vt}),i.jsx("td",{className:"p-2 border",children:dn(it)}),i.jsx("td",{className:"p-2 border",children:dn(de)}),i.jsx("td",{className:"p-2 border",children:dn(Ce)})]},Xe)})})]})}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold",children:"Total venta:"}),dn(ce.total)]}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700",onClick:()=>Re(ce.id),children:"Eliminar venta"})]})]})})]})}const z$=["Rivas","Isla Ometepe","San Jorge"];function gQe(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(!1),[d,f]=g.useState(""),[A,h]=g.useState("0"),[m,p]=g.useState("Rivas"),[x,v]=g.useState(null),[y,b]=g.useState(""),[w,j]=g.useState("0"),[I,_]=g.useState("Rivas");g.useEffect(()=>{(async()=>{s(!0),l("");try{const X=ar(yt(ke,"sellers_candies"),wn("name","asc")),he=await Qt(X),Ae=[];he.forEach(fe=>{const me=fe.data();Ae.push({id:fe.id,name:me.name||"",commissionPercent:Number(me.commissionPercent||0),branch:me.branch||"Rivas",createdAt:me.createdAt||xr.now()})}),n(Ae)}catch(X){console.error(X),l(" Error cargando vendedores.")}finally{s(!1)}})()},[t]);const S=()=>{f(""),h("0"),p("Rivas")},E=async X=>{X.preventDefault(),l("");const he=d.trim();if(!he){l("Ingresa el nombre y apellido del vendedor.");return}const Ae=Number(A||0);if(Ae<0){l("El margen no puede ser negativo.");return}try{const fe={name:he,commissionPercent:Ae,branch:m,createdAt:xr.now()},me=await $n(yt(ke,"sellers_candies"),fe);n(ne=>[{id:me.id,...fe},...ne]),l(" Vendedor creado correctamente."),S(),u(!1)}catch(fe){console.error(fe),l(" Error al crear el vendedor.")}},F=X=>{v(X.id),b(X.name),j(X.commissionPercent.toString()),_(X.branch)},k=()=>{v(null),b(""),j("0"),_("Rivas")},B=async()=>{if(!x)return;l("");const X=y.trim();if(!X){l("El nombre y apellido no pueden estar vacos.");return}const he=Number(w||0);if(he<0){l("El margen no puede ser negativo.");return}try{await _n(Jt(ke,"sellers_candies",x),{name:X,commissionPercent:he,branch:I}),n(Ae=>Ae.map(fe=>fe.id===x?{...fe,name:X,commissionPercent:he,branch:I}:fe)),l(" Vendedor actualizado."),k()}catch(Ae){console.error(Ae),l(" Error al actualizar el vendedor.")}},D=async X=>{if(window.confirm(`Eliminar al vendedor "${X.name}"? Esta accin no se puede deshacer.`))try{await Mn(Jt(ke,"sellers_candies",X.id)),n(Ae=>Ae.filter(fe=>fe.id!==X.id)),l(" Vendedor eliminado.")}catch(Ae){console.error(Ae),l(" Error al eliminar el vendedor.")}};return i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Vendedores de Dulces"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_c,{onClick:e,loading:a}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",onClick:()=>u(!0),children:[i.jsx("span",{className:"inline-block bg-green-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nuevo vendedor"]})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo vendedor de dulces"}),i.jsxs("form",{onSubmit:E,className:"space-y-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre y apellido"}),i.jsx("input",{className:"w-full border p-2 rounded",value:d,onChange:X=>f(X.target.value),placeholder:"Ej: Juan Prez"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Margen del vendedor (% sobre U Aproximada)"}),i.jsx("input",{type:"number",step:"0.01",min:0,className:"w-full border p-2 rounded",value:A,onChange:X=>h(X.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Este porcentaje YA NO es comisin sobre venta. Se aplica as: U. Vendedor = U. Aproximada  (margen/100). U. Inversionista = U. Aproximada  U. Vendedor."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Sucursal"}),i.jsx("select",{className:"w-full border p-2 rounded",value:m,onChange:X=>p(X.target.value),children:z$.map(X=>i.jsx("option",{value:X,children:X},X))})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{type:"button",onClick:()=>{S(),u(!1)},className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Guardar vendedor"})]})]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-3",children:i.jsxs("table",{className:"min-w-[700px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Nombre y apellido"}),i.jsx("th",{className:"p-2 border",children:"Margen (% U Aproximada)"}),i.jsx("th",{className:"p-2 border",children:"Sucursal"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Cargando"})}):r.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:4,children:"Sin vendedores registrados."})}):r.map(X=>{const he=x===X.id;return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:he?i.jsx("input",{className:"border p-1 rounded text-xs w-full",value:y,onChange:Ae=>b(Ae.target.value)}):X.name}),i.jsx("td",{className:"p-2 border",children:he?i.jsx("input",{type:"number",step:"0.01",min:0,className:"border p-1 rounded text-xs w-24 text-right",value:w,onChange:Ae=>j(Ae.target.value)}):`${X.commissionPercent.toFixed(2)} %`}),i.jsx("td",{className:"p-2 border",children:he?i.jsx("select",{className:"border p-1 rounded text-xs",value:I,onChange:Ae=>_(Ae.target.value),children:z$.map(Ae=>i.jsx("option",{value:Ae,children:Ae},Ae))}):X.branch}),i.jsx("td",{className:"p-2 border",children:he?i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:B,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:k,children:"Cancelar"})]}):i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-500 text-white hover:bg-yellow-600 text-xs",onClick:()=>F(X),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>D(X),children:"Borrar"})]})})]},X.id)})})]})}),o&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const Pa=t=>Math.max(0,Math.floor(Number(t||0)));function SR(t){return Math.max(1,Pa(t.unitsPerPackage||1))}function xQe(t){const e=Number(t.remaining);if(Number.isFinite(e)&&e>0)return Math.floor(e);const r=SR(t),n=Number(t.totalUnits||0),a=Number(t.quantity||0),s=Number(t.packages||0);return n>0?Math.floor(n):a>0?Math.floor(a):s>0?Math.floor(s*r):0}async function xse(t){const{orderId:e,productId:r}=t;let n=Pa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=ar(yt(ke,"inventory_candies"),mr("orderId","==",e),mr("productId","==",r),wn("createdAt","asc")),s=await Qt(a);if(s.empty)return;const o=s.docs.map(l=>l.ref);await Mi(ke,async l=>{const c=await Promise.all(o.map(u=>l.get(u)));for(let u=0;u<o.length&&n>0;u++){const d=c[u];if(!d.exists())continue;const f=d.data(),A=SR(f),h=n*A,p=Pa(f.remaining??0)+h,x=Math.floor(p/A);l.update(o[u],{remaining:p,remainingPackages:x,packages:x,updatedAt:xr.now()}),n=0}})}async function vse(t){const{orderId:e,productId:r}=t,n=Pa(t.packagesToReturn);if(!e||!r||n<=0)return;const a=Jt(ke,"candy_main_orders",e);await Mi(ke,async s=>{const o=await s.get(a);if(!o.exists())return;const l=o.data(),c=Array.isArray(l.items)?l.items:[];let u=!1;const d=c.map(f=>String((f==null?void 0:f.id)||"")!==String(r)?f:(u=!0,{...f,remainingPackages:Pa(f.remainingPackages)+n}));u&&s.update(a,{items:d,updatedAt:xr.now()})})}function sF(t){if(!Array.isArray(t))return[];const e=[];for(const r of t){const n=String((r==null?void 0:r.batchId)||""),a=String((r==null?void 0:r.masterOrderId)||(r==null?void 0:r.orderId)||""),s=Pa((r==null?void 0:r.units)??(r==null?void 0:r.qty)??(r==null?void 0:r.quantity)??0),o=Math.max(1,Pa((r==null?void 0:r.unitsPerPackage)||1));!n||!a||s<=0||e.push({batchId:n,masterOrderId:a,units:s,unitsPerPackage:o})}return e}function Q2(t,e){const r=Pa(t),n=Math.max(1,Pa(e));return Math.floor(r/n)}async function vQe(t){const e=String(t.productId||"");let r=Pa(t.packagesToAllocate);if(!e||r<=0)return{allocations:[]};const n=ar(yt(ke,"inventory_candies"),mr("productId","==",e)),a=await Qt(n);if(a.empty)throw new Error("No hay inventario para este producto.");const o=a.docs.map(c=>({id:c.id,data:c.data()})).sort((c,u)=>{var m,p;const d=String(c.data.date||""),f=String(u.data.date||"");if(d!==f)return d<f?-1:1;const A=((m=c.data.createdAt)==null?void 0:m.seconds)??0,h=((p=u.data.createdAt)==null?void 0:p.seconds)??0;return A-h}).map(c=>Jt(ke,"inventory_candies",c.id)),l=[];return await Mi(ke,async c=>{const u=await Promise.all(o.map(x=>c.get(x))),d=[];let f=r;for(let x=0;x<o.length&&f>0;x++){const v=o[x],y=u[x];if(!y.exists())continue;const b=y.data(),w=SR(b),j=xQe(b);if(j<=0)continue;const I=Math.floor(j/w);if(I<=0)continue;const _=Math.min(I,f),S=_*w,E=Math.max(0,j-S),F=Math.floor(E/w),k=String(b.orderId||"");if(!k)throw new Error("Lote sin orderId (orden maestra).");l.push({batchId:v.id,masterOrderId:k,units:S,unitsPerPackage:w}),d.push({ref:v,newRemUnits:E,newRemPacks:F}),f-=_}if(f>0)throw new Error(`Inventario insuficiente. Faltan ${f} paquetes.`);const A={};for(const x of l){const v=Q2(x.units,x.unitsPerPackage);A[x.masterOrderId]=(A[x.masterOrderId]||0)+v}const h=Object.keys(A),m=h.map(x=>Jt(ke,"candy_main_orders",x)),p=await Promise.all(m.map(x=>c.get(x)));for(let x=0;x<d.length;x++){const v=d[x];c.update(v.ref,{remaining:v.newRemUnits,remainingPackages:v.newRemPacks,packages:v.newRemPacks,updatedAt:xr.now()})}for(let x=0;x<m.length;x++){const v=p[x];if(!v.exists())throw new Error("Orden maestra no existe.");const y=v.data(),b=Array.isArray(y.items)?y.items:[],w=Pa(A[h[x]]||0);if(w<=0)continue;let j=!1;const I=b.map(_=>{if(String((_==null?void 0:_.id)||"")!==e)return _;const S=Pa(_.remainingPackages);if(S<w)throw new Error("Orden maestra sin paquetes suficientes.");return j=!0,{..._,remainingPackages:S-w}});j&&c.update(m[x],{items:I,updatedAt:xr.now()})}}),{allocations:l}}async function yQe(t){const e=String(t.vendorInventoryId||"");let r=Pa(t.packagesToReturn);if(!e)throw new Error("vendorInventoryId requerido");if(r<=0)return{restoredPackages:0,mode:"noop"};const n=Jt(ke,"inventory_candies_sellers",e),a=await si(n);if(!a.exists())throw new Error("No existe la orden del vendedor");const s=a.data(),o=String(s.productId||"");if(!o)throw new Error("La orden del vendedor no tiene productId");if(!sF(s.masterAllocations||s.allocations||s.allocationsByBatch).length){const u=String(s.orderId||"");if(!u)throw new Error("La orden del vendedor no tiene orderId");return await xse({orderId:u,productId:o,packagesToReturn:r}),await vse({orderId:u,productId:o,packagesToReturn:r}),{restoredPackages:r,mode:"legacy"}}let c=0;return await Mi(ke,async u=>{const d=await u.get(n);if(!d.exists())throw new Error("No existe la orden del vendedor");const f=d.data(),A=String(f.productId||"");if(!A)throw new Error("Doc vendedor sin productId");let h=sF(f.masterAllocations||f.allocations||f.allocationsByBatch);if(!h.length)throw new Error("No hay masterAllocations guardadas en este doc (no se puede restaurar blindado).");const m=[];let p=r;for(let E=h.length-1;E>=0&&p>0;E--){const F=h[E],k=Math.max(1,Pa(F.unitsPerPackage||1)),B=Q2(F.units,k);if(B<=0)continue;const D=Math.min(B,p),X=D*k;m.push({batchId:F.batchId,masterOrderId:F.masterOrderId,units:X,unitsPerPackage:k}),p-=D}const x=r-p;if(x<=0)return;c=x;const v=m.map(E=>Jt(ke,"inventory_candies",E.batchId)),y={};for(const E of m){const F=Q2(E.units,E.unitsPerPackage);F>0&&(y[E.masterOrderId]=(y[E.masterOrderId]||0)+F)}const w=Object.keys(y).map(E=>Jt(ke,"candy_main_orders",E)),[j,I]=await Promise.all([Promise.all(v.map(E=>u.get(E))),Promise.all(w.map(E=>u.get(E)))]);for(let E=0;E<m.length;E++){const F=m[E],k=j[E];if(!k.exists())continue;const B=k.data(),D=Math.max(1,Pa(F.unitsPerPackage||B.unitsPerPackage||1)),X=Pa(F.units),Ae=Pa(B.remaining??0)+X,fe=Math.floor(Ae/D);u.update(v[E],{remaining:Ae,remainingPackages:fe,packages:fe,updatedAt:xr.now()})}for(let E=0;E<w.length;E++){const F=I[E];if(!F.exists())continue;const k=w[E].id,B=Pa(y[k]||0);if(B<=0)continue;const D=F.data(),X=Array.isArray(D.items)?D.items:[];let he=!1;const Ae=X.map(fe=>String((fe==null?void 0:fe.id)||"")!==String(A)?fe:(he=!0,{...fe,remainingPackages:Pa(fe.remainingPackages)+B}));he&&u.update(w[E],{items:Ae,updatedAt:xr.now()})}const _=new Map;for(const E of m){const F=`${E.batchId}__${E.masterOrderId}__${E.unitsPerPackage}`;_.set(F,(_.get(F)||0)+Pa(E.units))}const S=[];for(const E of h){const F=Math.max(1,Pa(E.unitsPerPackage||1)),k=`${E.batchId}__${E.masterOrderId}__${F}`,B=Pa(_.get(k)||0);if(B<=0){S.push(E);continue}const X=Pa(E.units)-B;X>0&&S.push({...E,units:X,unitsPerPackage:F}),_.delete(k)}u.update(n,{masterAllocations:S,updatedAt:xr.now()})}),{restoredPackages:c,mode:"blind"}}async function W$(t){if(!t)throw new Error("vendorInventoryId requerido");const e=Jt(ke,"inventory_candies_sellers",t),r=await si(e);if(!r.exists())throw new Error("No existe la orden del vendedor");const n=r.data(),a=String(n.productId||""),s=Pa(n.packages||n.remainingPackages||0),o=sF(n.masterAllocations||n.allocations||n.allocationsByBatch);if(!o.length){const c=String(n.orderId||"");if(!c)throw new Error("La orden del vendedor no tiene orderId");if(!a)throw new Error("La orden del vendedor no tiene productId");return s<=0?(await Mi(ke,async u=>{u.delete(e)}),{restoredPackages:0,mode:"legacy"}):(await xse({orderId:c,productId:a,packagesToReturn:s}),await vse({orderId:c,productId:a,packagesToReturn:s}),await Mi(ke,async u=>{u.delete(e)}),{restoredPackages:s,mode:"legacy"})}let l=0;return await Mi(ke,async c=>{const u={};for(const x of o){const v=Math.max(1,Pa(x.unitsPerPackage||1)),y=Pa(x.units),b=Q2(y,v);b>0&&(u[x.masterOrderId]=(u[x.masterOrderId]||0)+b)}const d=o.map(x=>Jt(ke,"inventory_candies",x.batchId)),A=Object.keys(u).map(x=>Jt(ke,"candy_main_orders",x)),[h,m]=await Promise.all([Promise.all(d.map(x=>c.get(x))),Promise.all(A.map(x=>c.get(x)))]);let p=0;for(let x=0;x<o.length;x++){const v=o[x],y=h[x];if(!y.exists())continue;const b=y.data(),w=Math.max(1,Pa(v.unitsPerPackage||b.unitsPerPackage||1)),j=Pa(v.units),_=Pa(b.remaining??0)+j,S=Math.floor(_/w);c.update(d[x],{remaining:_,remainingPackages:S,packages:S,updatedAt:xr.now()});const E=Q2(j,w);E>0&&(p+=E)}for(let x=0;x<A.length;x++){const v=m[x];if(!v.exists())continue;const y=A[x].id,b=Pa(u[y]||0);if(b<=0)continue;const w=v.data(),j=Array.isArray(w.items)?w.items:[];let I=!1;const _=j.map(S=>String((S==null?void 0:S.id)||"")!==String(a)?S:(I=!0,{...S,remainingPackages:Pa(S.remainingPackages)+b}));I&&c.update(A[x],{items:_,updatedAt:xr.now()})}c.delete(e),l=p}),{restoredPackages:l,mode:"blind"}}const K5=t=>`C$ ${(Number(t)||0).toFixed(2)}`,yse=(t,e)=>`${t}__${e}`,bQe=t=>t?typeof t=="string"?t:t!=null&&t.seconds?new Date(t.seconds*1e3).toISOString().slice(0,10):t!=null&&t.toDate?t.toDate().toISOString().slice(0,10):"":"",wQe=t=>{const e=t.sellerId||"",r=bQe(t.date);return e&&r?yse(e,r):t.orderId?t.orderId:t.id},X$=(t,e=!1)=>{if(!t)return null;const r=new Date(t);return Number.isNaN(r.getTime())?null:(e?r.setHours(23,59,59,999):r.setHours(0,0,0,0),r)},NQe=t=>{var e,r;if((e=t.createdAt)!=null&&e.toDate)return t.createdAt.toDate();if((r=t.createdAt)!=null&&r.seconds)return new Date(t.createdAt.seconds*1e3);if(t.date){const n=new Date(t.date);if(!Number.isNaN(n.getTime()))return n}return null},Y$=t=>{const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"},iF=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},J$=(t,e)=>{const r=iF(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}},Z$=(t,e)=>e?e==="RIVAS"?t.unitPriceRivas||0:e==="SAN_JORGE"?t.unitPriceSanJorge||0:t.unitPriceIsla||0:t.unitPriceIsla||0,eG=(t,e)=>e?e==="RIVAS"?t.grossProfitPerPackRivas||0:e==="SAN_JORGE"?t.grossProfitPerPackSanJorge||0:t.grossProfitPerPackIsla||0:t.grossProfitPerPackIsla||0,tG=(t,e)=>e?e==="RIVAS"?t.uApproxPerPackRivas||0:e==="SAN_JORGE"?t.uApproxPerPackSanJorge||0:t.uApproxPerPackIsla||0:t.uApproxPerPackIsla||0;function CQe({open:t,onClose:e,orders:r,rows:n,setRows:a,isAdmin:s,currentUserEmail:o,currentUserName:l,sellerCandyId:c,sellers:u,products:d,transferAgg:f,setTransferAgg:A,setTransferRowDeltas:h}){const[m,p]=g.useState(!1),[x,v]=g.useState([]),[y,b]=g.useState(""),[w,j]=g.useState(""),[I,_]=g.useState(""),[S,E]=g.useState(""),[F,k]=g.useState("0"),[B,D]=g.useState(""),[X,he]=g.useState(!1),[Ae,fe]=g.useState(""),[me,ne]=g.useState(!1),[Pe,Te]=g.useState(""),[O,K]=g.useState(()=>new Date().toISOString().slice(0,10)),[q,U]=g.useState(""),[W,J]=g.useState(()=>{const Be=new Date;return new Date(Be.getFullYear(),Be.getMonth(),1).toISOString().slice(0,10)}),[M,H]=g.useState(()=>new Date().toISOString().slice(0,10)),te=g.useMemo(()=>{const Be={};return u.forEach(ye=>{Be[ye.id]=ye}),Be},[u]),ve=g.useMemo(()=>{const Be={};return d.forEach(ye=>{Be[ye.id]=ye}),Be},[d]),Q=Pe&&te[Pe]||null,Ke=g.useMemo(()=>r.map(Be=>Be.orderKey),[r]),ae=g.useMemo(()=>{const Be={};return r.forEach(ye=>Be[ye.orderKey]=ye),Be},[r]),ee=n,Fe=g.useMemo(()=>{const Be={};return ee.forEach(ye=>{const oe=wQe(ye),Z=new Set;oe&&Z.add(oe),ye.orderId&&Z.add(String(ye.orderId)),Z.add(ye.id),Z.forEach(Ne=>{Be[Ne]||(Be[Ne]=[]),Be[Ne].push(ye)})}),Be},[ee]),ce=g.useMemo(()=>y?Fe[y]||[]:[],[Fe,y]),be=g.useMemo(()=>ce.filter(Be=>{const ye=Be.remainingPackages??Be.remaining??Be.packages??0;return Number(ye||0)>0}),[ce]),Ve=g.useMemo(()=>{const Be=q.trim().toLowerCase();return Be?be.filter(ye=>`${ye.category||""} ${ye.productName||""}`.toLowerCase().trim().includes(Be)):be},[be,q]),We=g.useMemo(()=>w&&ee.find(Be=>Be.id===w)||null,[ee,w]),pt=g.useMemo(()=>{if(We!=null&&We.sellerId)return We.sellerId;const Be=ae[y];return(Be==null?void 0:Be.sellerId)||""},[We,ae,y]),wt=g.useMemo(()=>I?Fe[I]||[]:[],[Fe,I]),Ct=g.useMemo(()=>We?wt.filter(Be=>Be.productId===We.productId):[],[wt,We]),St=async()=>{try{p(!0);let Be=[];if(!s&&c){const ye=ar(yt(ke,"inventory_transfers_candies"),mr("fromSellerId","==",c),wn("createdAt","desc")),oe=ar(yt(ke,"inventory_transfers_candies"),mr("toSellerId","==",c),wn("createdAt","desc")),[Z,Ne]=await Promise.all([Qt(ye),Qt(oe)]),Re=new Set,ge=Xe=>{Xe.forEach(vt=>{if(Re.has(vt.id))return;Re.add(vt.id);const it=vt.data();Be.push({id:vt.id,...it})})};ge(Z),ge(Ne),Be.sort((Xe,vt)=>{var Ce,Ye;const it=((Ce=Xe.createdAt)==null?void 0:Ce.seconds)||0;return(((Ye=vt.createdAt)==null?void 0:Ye.seconds)||0)-it})}else{const ye=ar(yt(ke,"inventory_transfers_candies"),wn("createdAt","desc"));(await Qt(ye)).forEach(Z=>{const Ne=Z.data();Be.push({id:Z.id,...Ne})})}v(Be)}catch{fe(" Error cargando traslados.")}finally{p(!1)}};g.useEffect(()=>{t&&St()},[t]);const Rt=g.useMemo(()=>{const Be=X$(W),ye=X$(M,!0);return x.filter(oe=>{const Z=NQe(oe);return Z?!(Be&&Z<Be||ye&&Z>ye):!0})},[x,W,M]);g.useEffect(()=>{U("")},[y]),g.useEffect(()=>{if(me){if(!Pe){const Be=ae[y];Be!=null&&Be.sellerId&&Te(Be.sellerId)}O||K(new Date().toISOString().slice(0,10))}},[me,Pe,O,ae,y]);const jt=()=>{b(""),j(""),_(""),E(""),k("0"),D(""),ne(!1),Te(""),K(new Date().toISOString().slice(0,10))},Ue=async()=>{if(!s){fe("No tienes permiso para hacer traslados.");return}fe("");const Be=Number(F||0);if(!(Be>0)){fe("La cantidad de paquetes debe ser mayor a 0.");return}if(!B.trim()){fe("Debes escribir el motivo de la movida.");return}if(!y||!w){fe("Selecciona el pedido origen y el producto.");return}const ye=me;if(!ye&&!I){fe("Selecciona el pedido destino.");return}if(ye){if(!Pe){fe("Selecciona el vendedor de la nueva orden.");return}if(!O){fe("Selecciona la fecha de la nueva orden.");return}}const oe=!ye&&I&&ae[I]||null;if(!ye&&!oe){fe("Selecciona un pedido destino vlido.");return}const Z=oe?te[oe.sellerId]||{id:oe.sellerId||"",name:oe.sellerName||"",email:oe.sellerEmail||"",branch:oe.branch,branchLabel:oe.branchLabel,commissionPercent:oe.vendorMarginPercent??oe.commissionPercent??0}:null,Ne=n.find(we=>we.id===w)||null,Re=!ye&&S&&n.find(we=>we.id===S)||null;if(!Ne){fe("No se encontr la fila origen/destino.");return}if(!ye&&Re&&w===S){fe("Origen y destino no pueden ser el mismo.");return}if(!ye&&Re&&Ne.productId!==Re.productId){fe("El producto destino no coincide con el producto origen.");return}if(Number(Ne.remainingPackages||0)<Be){fe("El origen no tiene suficientes paquetes disponibles.");return}const ge=ye?Q:null;if(ye&&!ge){fe("Selecciona un vendedor destino vlido.");return}const Xe=ve[Ne.productId]||null,vt=ye?Y$((ge==null?void 0:ge.branch)||(ge==null?void 0:ge.branchLabel)):void 0,it=!ye&&!S&&!!oe,de=ye||it;let Ce=null,Ye=null,ft="";if(ye&&ge){const we=iF(ge.commissionPercent??0),Le=vt,gt=Number((Xe==null?void 0:Xe.unitsPerPackage)??Ne.unitsPerPackage??0),Ut=gt>0?gt*Be:0;Xe?Z$(Xe,Le):Number(Ne.unitPriceRivas||Ne.unitPriceIsla||0);const Yt=(Xe?eG(Xe,Le):Number(Ne.grossProfit||0)/Math.max(1,Ne.packages||1))*Be,st=Xe?Number(Xe.logisticAllocatedPerPack||0)*Be:Number(Ne.logisticAllocated||0),xe=(Xe?tG(Xe,Le):Number(Ne.uAproximada||0)/Math.max(1,Ne.packages||1))*Be,ie=J$(Yt,we),Oe=Number(Yt||0)-Number(st||0)-Number(ie.uVendor||0),le=((Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0)*Be,De=((Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0)*Be,He=((Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0)*Be;ft=yse(ge.id,O),Ce={sellerId:ge.id,sellerName:ge.name,sellerEmail:ge.email||"",branch:Le||"",branchLabel:ge.branchLabel||"",productId:Ne.productId,productName:Ne.productName,category:Ne.category,orderId:ft,date:O,packages:Be,unitsPerPackage:gt,totalUnits:Ut,remainingPackages:Be,remainingUnits:Ut,totalRivas:le,totalSanJorge:De,totalIsla:He,unitPriceRivas:(Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0,unitPriceSanJorge:(Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0,unitPriceIsla:(Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0,grossProfit:Yt,logisticAllocated:st,vendorMarginPercent:ie.vendorMarginPercent,uVendor:ie.uVendor,uInvestor:ie.uInvestor,uAproximada:xe,uNeta:Oe,providerPrice:Ne.providerPrice,transferDelta:0}}if(it&&oe){const we=iF((Z==null?void 0:Z.commissionPercent)??oe.vendorMarginPercent??0),Le=Y$((Z==null?void 0:Z.branch)||(Z==null?void 0:Z.branchLabel)||oe.branch||oe.branchLabel),gt=Number((Xe==null?void 0:Xe.unitsPerPackage)??Ne.unitsPerPackage??0),Ut=gt>0?gt*Be:0;Xe?Z$(Xe,Le):Number(Ne.unitPriceRivas||Ne.unitPriceIsla||0);const Yt=(Xe?eG(Xe,Le):Number(Ne.grossProfit||0)/Math.max(1,Ne.packages||1))*Be,st=Xe?Number(Xe.logisticAllocatedPerPack||0)*Be:Number(Ne.logisticAllocated||0),xe=(Xe?tG(Xe,Le):Number(Ne.uAproximada||0)/Math.max(1,Ne.packages||1))*Be,ie=J$(Yt,we),Oe=Number(Yt||0)-Number(st||0)-Number(ie.uVendor||0),le=((Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0)*Be,De=((Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0)*Be,He=((Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0)*Be;Ye={sellerId:oe.sellerId,sellerName:(Z==null?void 0:Z.name)||oe.sellerName||"",sellerEmail:(Z==null?void 0:Z.email)||oe.sellerEmail||"",branch:Le||oe.branch||"",branchLabel:(Z==null?void 0:Z.branchLabel)||oe.branchLabel||"",productId:Ne.productId,productName:Ne.productName,category:Ne.category,orderId:oe.orderKey||I,date:oe.date||new Date().toISOString().slice(0,10),packages:Be,unitsPerPackage:gt,totalUnits:Ut,remainingPackages:Be,remainingUnits:Ut,totalRivas:le,totalSanJorge:De,totalIsla:He,unitPriceRivas:(Xe==null?void 0:Xe.unitPriceRivas)||Ne.unitPriceRivas||0,unitPriceSanJorge:(Xe==null?void 0:Xe.unitPriceSanJorge)||Ne.unitPriceSanJorge||0,unitPriceIsla:(Xe==null?void 0:Xe.unitPriceIsla)||Ne.unitPriceIsla||0,grossProfit:Yt,logisticAllocated:st,vendorMarginPercent:ie.vendorMarginPercent,uVendor:ie.uVendor,uInvestor:ie.uInvestor,uAproximada:xe,uNeta:Oe,providerPrice:Ne.providerPrice,transferDelta:0}}try{he(!0);const we=Jt(ke,"inventory_candies_sellers",Ne.id),Le=ye||it?Jt(yt(ke,"inventory_candies_sellers")):Jt(ke,"inventory_candies_sellers",Re.id),gt=xr.now(),Ut=new Date().toISOString().slice(0,10);let Mt=null;await Mi(ke,async Yt=>{const st=await Yt.get(we);if(!st.exists())throw new Error("Orden origen no existe.");const _e=st.data(),xe=Number(_e.remainingPackages||0);if(xe<Be)throw new Error("Origen no tiene suficientes paquetes.");let ie=null;if(!ye&&!it){const R=await Yt.get(Le);if(!R.exists())throw new Error("Orden destino no existe.");ie=R.data()}const Oe=Number(_e.unitsPerPackage||Ne.unitsPerPackage||0),le=Oe>0?Be*Oe:0,De=Number(_e.transferDelta||0);Yt.update(we,{packages:Math.max(0,Number(_e.packages||0)-Be),remainingPackages:xe-Be,...Oe>0?{remainingUnits:Number(_e.remainingUnits||0)-le}:{},updatedAt:gt,transferDelta:De-Be});let He=null;if(ye){const R={...Ce,createdAt:gt,updatedAt:gt,remainingPackages:Be,remainingUnits:Number((Ce==null?void 0:Ce.unitsPerPackage)||0)>0?Be*Number((Ce==null?void 0:Ce.unitsPerPackage)||0):Ce==null?void 0:Ce.remainingUnits,transferDelta:0};Yt.set(Le,R),He=R,Mt={id:Le.id,...R}}else if(it&&Ye){const R={...Ye,createdAt:gt,updatedAt:gt,remainingPackages:Be,remainingUnits:Number(Ye.unitsPerPackage||0)>0?Be*Number(Ye.unitsPerPackage||0):Ye.remainingUnits,transferDelta:0};Yt.set(Le,R),He=R,Mt={id:Le.id,...R}}else{const R=ie,L=Number(R.unitsPerPackage||Ne.unitsPerPackage||0),G=L>0?Be*L:0,re=Number(R.transferDelta||0);Yt.update(Le,{packages:Math.max(0,Number(R.packages||0)+Be),remainingPackages:Number(R.remainingPackages||0)+Be,...L>0?{remainingUnits:Number(R.remainingUnits||0)+G}:{},updatedAt:gt,transferDelta:re+Be}),He={...R,remainingPackages:Number(R.remainingPackages||0)+Be,remainingUnits:L>0?Number(R.remainingUnits||0)+G:R.remainingUnits,sellerId:R.sellerId,sellerName:R.sellerName,orderId:R.orderId||(Re==null?void 0:Re.id)||"",transferDelta:re+Be}}const P=Jt(yt(ke,"inventory_transfers_candies"));Yt.set(P,{createdAt:gt,date:Ut,createdByEmail:(o||"").trim(),createdByName:String(l||"").trim(),productId:String(_e.productId||""),productName:String(_e.productName||""),packagesMoved:Be,providerPrice:Number(_e.providerPrice||0),unitPriceRivas:Number(_e.unitPriceRivas||0),unitPriceIsla:Number(_e.unitPriceIsla||0),fromSellerId:String(_e.sellerId||""),fromSellerName:String(_e.sellerName||""),fromOrderKey:String(_e.orderId||Ne.id||""),fromOrderLabel:String(_e.orderId||Ne.id||""),toSellerId:ye?(ge==null?void 0:ge.id)||"":String((He==null?void 0:He.sellerId)||""),toSellerName:ye?(ge==null?void 0:ge.name)||"":String((He==null?void 0:He.sellerName)||""),toOrderKey:ye?ft:String((He==null?void 0:He.orderId)||I||""),toOrderLabel:ye?ft:String((He==null?void 0:He.orderId)||I||""),fromVendorRowId:Ne.id,toVendorRowId:ye||it?Le.id:Re.id,comment:B.trim(),destRowWasNew:de})}),a(Yt=>{const st=Yt.reduce((_e,xe)=>{if(xe.id===Ne.id){const ie=Number(xe.unitsPerPackage||0),Oe=ie>0?Be*ie:0;return _e.push({...xe,packages:Math.max(0,Number(xe.packages||0)-Be),remainingPackages:Number(xe.remainingPackages||0)-Be,remainingUnits:ie>0?Number(xe.remainingUnits||0)-Oe:xe.remainingUnits,transferDelta:Number(xe.transferDelta||0)-Be}),_e}if(!ye&&Re&&xe.id===Re.id){const ie=Number(xe.unitsPerPackage||0),Oe=ie>0?Be*ie:0;return _e.push({...xe,packages:Math.max(0,Number(xe.packages||0)+Be),remainingPackages:Number(xe.remainingPackages||0)+Be,remainingUnits:ie>0?Number(xe.remainingUnits||0)+Oe:xe.remainingUnits,transferDelta:Number(xe.transferDelta||0)+Be}),_e}return _e.push(xe),_e},[]);return Mt?[...st,Mt]:st}),await St(),A(Yt=>{const st={...Yt},_e=y,xe=ye?ft:I;return _e&&(st[_e]=st[_e]||{out:0,in:0},st[_e].out+=Be),xe&&(st[xe]=st[xe]||{out:0,in:0},st[xe].in+=Be),st}),h(Yt=>{const st={...Yt};if(Ne.id&&(st[Ne.id]=(st[Ne.id]||0)-Be),!de){const _e=it||ye?Mt==null?void 0:Mt.id:Re==null?void 0:Re.id;_e&&(st[_e]=(st[_e]||0)+Be)}return st}),jt(),fe(" Traslado realizado.")}catch(we){fe((we==null?void 0:we.message)||" Error realizando el traslado.")}finally{he(!1)}};return t?i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[55]",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-7xl max-h-[90vh] overflow-y-auto text-sm relative",children:[X&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white border rounded-lg px-4 py-3 shadow text-sm font-semibold",children:"Guardando traslado..."})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Traslado de paquetes"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{e(),jt()},type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"border rounded p-3 bg-gray-50 mb-4",children:[i.jsx("div",{className:"text-sm font-semibold mb-2",children:"Crear traslado (requiere motivo)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido origen"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:y,onChange:Be=>{b(Be.target.value),j(""),_(""),E(""),k("0")},disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),Ke.map(Be=>{const ye=ae[Be];return i.jsxs("option",{value:Be,children:["Vendedor: ",(ye==null?void 0:ye.sellerName)||"","  Existencias:"," ",(ye==null?void 0:ye.totalRemainingPackages)||"0"," Paquetes - Fecha Orden:"," ",(ye==null?void 0:ye.date)||""]},Be)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (desde el pedido origen)"}),i.jsx("input",{type:"text",className:"mt-1 mb-2 w-full border p-2 rounded text-sm",placeholder:"Buscar producto...",value:q,onChange:Be=>U(Be.target.value),disabled:!s||!y}),i.jsxs("select",{className:"w-full border p-2 rounded",value:w,onChange:Be=>{j(Be.target.value),_(""),E(""),k("0")},disabled:!s||!y,children:[i.jsx("option",{value:"",children:"Selecciona"}),Ve.map(Be=>i.jsxs("option",{value:Be.id,children:[Be.productName,"  Existencias:"," ",Number(Be.remainingPackages??Be.packages??0)," Paquetes - Precio Costo: $",Be.providerPrice]},Be.id))]})]}),!me&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Pedido destino"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:I,onChange:Be=>{_(Be.target.value),E("")},disabled:!s||!w,children:[i.jsx("option",{value:"",children:"Selecciona"}),Ke.filter(Be=>Be!==y).map(Be=>{const ye=ae[Be];return i.jsxs("option",{value:Be,children:["Vendedor: ",(ye==null?void 0:ye.sellerName)||"","  Existencias:"," ",(ye==null?void 0:ye.totalRemainingPackages)||"0"," - Fecha Orden:"," ",(ye==null?void 0:ye.date)||""]},Be)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto destino (mismo producto)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:S,onChange:Be=>E(Be.target.value),disabled:!s||!I||!We,children:[i.jsx("option",{value:"",children:"Selecciona"}),Ct.map(Be=>i.jsxs("option",{value:Be.id,children:["Tipo: ",Be.category," - ",Be.productName,"  Existencias:"," ",Number(Be.remainingPackages??Be.packages??0),"Paquetes - Precio Costo: $",Be.providerPrice]},Be.id))]}),I&&We&&Ct.length===0&&i.jsx("div",{className:"text-xs text-red-600 mt-1",children:" El pedido destino no tiene este producto. Si dejas este campo vaco se crear automticamente al moverlo."}),I&&i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Este campo es opcional; salo solo si el pedido ya tiene el producto y quieres sumar a esa fila."})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:me,onChange:Be=>{const ye=Be.target.checked;ne(ye),ye&&(_(""),E(""))},disabled:!s}),i.jsx("span",{className:"text-sm font-semibold",children:"Crear nueva orden destino (independiente)"})]}),me&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Vendedor destino (nueva orden)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Pe,onChange:Be=>Te(Be.target.value),disabled:!s,children:[i.jsx("option",{value:"",children:"Selecciona"}),u.map(Be=>i.jsxs("option",{value:Be.id,disabled:Be.id===pt,children:[Be.name,Be.id===pt?" (origen)":""]},Be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha de la nueva orden"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:O,onChange:Be=>K(Be.target.value),disabled:!s}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esta orden ser independiente. Asegrate de usar una fecha que no tenga otro pedido activo para el mismo vendedor."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Cantidad paquetes a mover"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:F,onChange:Be=>k(Be.target.value),disabled:!s||!w||!me&&!I})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Motivo de movida (obligatorio)"}),i.jsx("textarea",{className:"w-full border p-2 rounded resize-y min-h-20",value:B,onChange:Be=>D(Be.target.value),disabled:!s,placeholder:"Ej: Se cambi de ruta por reorganizacin",maxLength:250})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",onClick:jt,disabled:!s||X,children:"Limpiar"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60",onClick:Ue,disabled:!s||X||!w||!me&&!I||Number(F||0)<=0||!B.trim(),children:"Hacer traslado"})]}),Ae&&i.jsx("div",{className:"text-sm text-red-600 mt-2",children:Ae})]}),i.jsxs("div",{className:"bg-white rounded border overflow-x-auto",children:[i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between p-2",children:[i.jsx("div",{className:"text-lg font-semibold",children:"Historial de traslados"}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:W,onChange:Be=>J(Be.target.value)}),i.jsx("span",{className:"text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:M,onChange:Be=>H(Be.target.value)}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:St,disabled:m,type:"button",children:m?"Cargando...":"Recargar"})]})]}),i.jsxs("table",{className:"min-w-[1400px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha y hora"}),i.jsx("th",{className:"p-2 border",children:"Usuario"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Cantidad paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border",children:"Movido a vendedor"}),i.jsx("th",{className:"p-2 border",children:"Movido a orden"}),i.jsx("th",{className:"p-2 border",children:"Motivo de movida"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Cargando"})}):Rt.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-4 text-center",children:"Sin traslados"})}):Rt.map(Be=>{var Ne,Re;const ye=((Re=(Ne=Be.createdAt)==null?void 0:Ne.toDate)==null?void 0:Re.call(Ne))||(Be.createdAt?new Date(Be.createdAt.seconds*1e3):null),oe=ye?`${ye.toISOString().slice(0,10)} ${ye.toISOString().slice(11,19)}`:Be.date||"",Z=(Be.createdByName||"").trim()||(Be.createdByEmail||"").trim()||"";return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:oe}),i.jsx("td",{className:"p-2 border",children:Z}),i.jsx("td",{className:"p-2 border text-left",children:Be.productName||""}),i.jsx("td",{className:"p-2 border",children:Number(Be.packagesMoved||0)}),i.jsx("td",{className:"p-2 border",children:K5(Be.providerPrice||0)}),i.jsx("td",{className:"p-2 border",children:K5(Be.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 border",children:K5(Be.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 border",children:Be.toSellerName||""}),i.jsx("td",{className:"p-2 border",children:Be.toOrderLabel||Be.toOrderKey||""}),i.jsx("td",{className:"p-2 border text-left",children:Be.comment||""})]},Be.id)})})]})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Nota: el traslado mueve EXISTENCIA (remainingPackages/remainingUnits) del pedido origen al destino."})]})}):null}const Js=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function rG(t){const e=String(t||"").trim().toUpperCase();if(e.includes("ISLA"))return"ISLA";if(e.includes("JORGE"))return"SAN_JORGE";if(e.includes("RIVAS"))return"RIVAS"}const qi=t=>Math.max(0,Math.floor(Number(t||0))),zd=t=>{const e=Number(t||0);return!isFinite(e)||e<0?0:e},Wu=(t,e)=>{const r=zd(e),n=Number(t||0)*(r/100),a=Number(t||0)-n;return{vendorMarginPercent:r,uVendor:n,uInvestor:a}};function _Qe({role:t="",sellerCandyId:e="",currentUserEmail:r,roles:n}){const{refreshKey:a,refresh:s}=Ec(),o=n&&n.length?n:t,l=!o||xn(o,"admin"),c=xn(o,"vendedor_dulces"),u=(r||"").trim().toLowerCase(),d=!l&&c,[f,A]=g.useState(!0),[h,m]=g.useState(""),[p,x]=g.useState([]),[v,y]=g.useState([]),[b,w]=g.useState({}),[j,I]=g.useState([]),_=g.useRef({});g.useEffect(()=>{const je={};j.forEach(nt=>{je[nt.id]=nt}),_.current=je},[j]);const[S,E]=g.useState(!1),[F,k]=g.useState(null),[B,D]=g.useState(""),[X,he]=g.useState(""),[Ae,fe]=g.useState(""),[me,ne]=g.useState("0"),[Pe,Te]=g.useState([]),[O,K]=g.useState(""),[q,U]=g.useState(""),[W,J]=g.useState(!1),[M,H]=g.useState(!1),[te,ve]=g.useState(!1),Q=20,[Ke,ae]=g.useState(1),ee=20,[Fe,ce]=g.useState(1),[be,Ve]=g.useState({}),[We,pt]=g.useState(!1),[wt,Ct]=g.useState({}),[St,Rt]=g.useState({}),[jt,Ue]=g.useState(!1),[Be,ye]=g.useState({}),[oe,Z]=g.useState({}),Ne=g.useMemo(()=>p.find(je=>je.id===B)||null,[B,p]);Ne==null||Ne.branch,g.useEffect(()=>{!S||!B||!Pe.length||Te(je=>je.map(nt=>{const dt=v.find(Ft=>Ft.id===nt.productId)||null,Nt=p.find(Ft=>Ft.id===B)||null,Qe=Nt==null?void 0:Nt.branch,ot=qi(nt.packages),_t=dt?ft(dt,Qe):Number(nt.pricePerPackage||0),It=(dt?we(dt,Qe):0)*ot,Vt=dt?dt.logisticAllocatedPerPack*ot:Number(nt.logisticAllocated||0),er=(dt?Le(dt,Qe):0)*ot,Bt=gt(B),br=nt.vendorMarginPercent!=null&&String(nt.vendorMarginPercent).trim()!==""?zd(nt.vendorMarginPercent):Bt,wr=Wu(It,br);return{...nt,pricePerPackage:_t,totalExpected:_t*ot,grossProfit:It,logisticAllocated:Vt,vendorMarginPercent:wr.vendorMarginPercent,uAproximada:er,uVendor:wr.uVendor,uInvestor:wr.uInvestor,totalRivas:((dt==null?void 0:dt.unitPriceRivas)||nt.unitPriceRivas||0)*ot,totalSanJorge:((dt==null?void 0:dt.unitPriceSanJorge)||nt.unitPriceSanJorge||0)*ot,totalIsla:((dt==null?void 0:dt.unitPriceIsla)||nt.unitPriceIsla||0)*ot,unitPriceRivas:(dt==null?void 0:dt.unitPriceRivas)||nt.unitPriceRivas||0,unitPriceSanJorge:(dt==null?void 0:dt.unitPriceSanJorge)||nt.unitPriceSanJorge||0,unitPriceIsla:(dt==null?void 0:dt.unitPriceIsla)||nt.unitPriceIsla||0}}))},[S,B,Pe.length,v,p]);const Re=g.useMemo(()=>!c||!u?null:p.find(je=>(je.email||"").trim().toLowerCase()===u)||null,[c,u,p]);g.useMemo(()=>new Set(Pe.map(je=>je.productId)),[Pe]);const ge=g.useMemo(()=>v.filter(je=>(b[je.id]??0)>1).sort((je,nt)=>`${je.category} ${je.name}`.localeCompare(`${nt.category} ${nt.name}`)),[v,b]),Xe=g.useMemo(()=>{const je=O.trim().toLowerCase();return je?ge.filter(nt=>`${nt.category??""} ${nt.name??""}`.toLowerCase().includes(je)):ge},[ge,O]),vt=g.useMemo(()=>v.find(je=>je.id===Ae)||null,[Ae,v]),it=g.useMemo(()=>c&&Re?j.filter(je=>je.sellerId===Re.id):j,[j,c,Re]),de=async()=>{try{const je=yt(ke,"inventory_transfers_candies"),nt=(It,Vt,rr,er)=>{Vt&&(It[Vt]=It[Vt]||{out:0,in:0},It[Vt][rr]+=er)},dt=(It,Vt,rr)=>{const er=String(Vt||"");er&&(It[er]=(It[er]||0)+rr)},Nt={},Qe={},ot=_.current,_t=It=>{var Ft,Zt;if(It.destRowWasNew!=null)return!!It.destRowWasNew;const Vt=String(It.toVendorRowId||"");if(!Vt)return!1;const rr=ot[Vt];if(!rr)return!1;const er=Number(((Ft=rr.createdAt)==null?void 0:Ft.seconds)??0),Bt=Number(((Zt=It.createdAt)==null?void 0:Zt.seconds)??0),br=er>0&&Bt>0&&Math.abs(er-Bt)<=1,wr=Math.max(0,Number(rr.packages||0))===Math.max(0,Number(It.packagesMoved||0));return br&&wr},et=It=>{const Vt=It.data(),rr=Number(Vt.packagesMoved||0);rr>0&&(nt(Nt,String(Vt.fromOrderKey||""),"out",rr),nt(Nt,String(Vt.toOrderKey||""),"in",rr),dt(Qe,Vt.fromVendorRowId,-rr),_t(Vt)||dt(Qe,Vt.toVendorRowId,rr))};if(!c)(await Qt(je)).forEach(et);else{const It=ar(je,mr("fromSellerId","==",e)),Vt=ar(je,mr("toSellerId","==",e)),[rr,er]=await Promise.all([Qt(It),Qt(Vt)]),Bt=new Set,br=wr=>{wr.forEach(Ft=>{Bt.has(Ft.id)||(Bt.add(Ft.id),et(Ft))})};br(rr.docs),br(er.docs)}Ct(Nt),Rt(Qe)}catch(je){console.error(je),Ct({}),Rt({})}};g.useEffect(()=>{(async()=>{A(!0),m("");try{const je=await Qt(ar(yt(ke,"sellers_candies"),wn("name","asc"))),nt=[];je.forEach(er=>{const Bt=er.data(),br=Bt.branch||Bt.branchLabel||Bt.route||Bt.sucursal||Bt.location||"";nt.push({id:er.id,name:Bt.name||"",email:Bt.email||"",commissionPercent:Number(Bt.commissionPercent||0),branch:rG(br),branchLabel:br})}),x(nt);const dt=await Qt(ar(yt(ke,"candy_main_orders"),wn("createdAt","desc"))),Nt={},Qe={},ot=(er,Bt)=>`${er}#${String(Bt).padStart(10,"0")}`;dt.forEach(er=>{var Zt;const Bt=er.data(),br=Number(((Zt=Bt.createdAt)==null?void 0:Zt.seconds)??0),wr=String(Bt.date||""),Ft=Array.isArray(Bt.items)?Bt.items:[];for(const dr of Ft){const Rr=String(dr.id||dr.productId||"");if(!Rr)continue;const Wr=qi(dr.remainingPackages??dr.remainingPacks??0);Wr>0&&(Nt[Rr]=(Nt[Rr]||0)+Wr);const Sr=Math.max(1,qi(dr.packages??0)),ia=Number(dr.providerPrice??dr.provider_price??dr.priceProvider??dr.costProvider??0),_a=Number(dr.unitPriceRivas||0),ha=Number(dr.unitPriceSanJorge||0),En=Number(dr.unitPriceIsla||0),vs=Number(dr.gainRivas??dr.grossProfitRivas??dr.grossProfit??0),Fd=Number(dr.gainSanJorge??dr.grossProfitSanJorge??dr.grossProfit??0),Tn=Number(dr.gainIsla??dr.grossProfitIsla??dr.grossProfit??0),To=Number(dr.logisticAllocated??dr.prorrateo??dr.prorrateoLogistico??dr.gastos??0),Gs=Number(dr.uAproximada??dr.uApprox??dr.netProfit??dr.vendorProfit??dr.gainVendor??0)/Sr,$i=To/Sr,Gi={id:Rr,name:String(dr.name||dr.productName||""),category:String(dr.category||""),unitsPerPackage:qi(dr.unitsPerPackage??0),providerPrice:ia,unitPriceRivas:_a,unitPriceSanJorge:ha,unitPriceIsla:En,grossProfitPerPackRivas:vs/Sr,grossProfitPerPackSanJorge:Fd/Sr,grossProfitPerPackIsla:Tn/Sr,uApproxPerPackRivas:Gs,uApproxPerPackSanJorge:Gs,uApproxPerPackIsla:Gs,logisticAllocatedPerPack:$i,key:ot(wr,br)},Ic=Qe[Rr];(!Ic||Gi.key>Ic.key)&&(Qe[Rr]=Gi)}});const _t=await Qt(c?ar(yt(ke,"inventory_candies_sellers"),mr("sellerId","==",e),wn("createdAt","desc")):ar(yt(ke,"inventory_candies_sellers"),wn("createdAt","desc"))),et={};Object.keys(Nt).forEach(er=>{const Bt=qi(Nt[er]);et[er]=Math.max(0,Bt)}),w(et);const It=Object.keys(Qe).map(er=>{const Bt=Qe[er];return{id:Bt.id,name:Bt.name,category:Bt.category,unitsPerPackage:Bt.unitsPerPackage,providerPrice:Bt.providerPrice,unitPriceRivas:Bt.unitPriceRivas,unitPriceSanJorge:Bt.unitPriceSanJorge,unitPriceIsla:Bt.unitPriceIsla,grossProfitPerPackRivas:Bt.grossProfitPerPackRivas,grossProfitPerPackSanJorge:Bt.grossProfitPerPackSanJorge,grossProfitPerPackIsla:Bt.grossProfitPerPackIsla,uApproxPerPackRivas:Bt.uApproxPerPackRivas,uApproxPerPackSanJorge:Bt.uApproxPerPackSanJorge,uApproxPerPackIsla:Bt.uApproxPerPackIsla,logisticAllocatedPerPack:Bt.logisticAllocatedPerPack,existingPacks:et[Bt.id]??0}}).sort((er,Bt)=>`${er.category} ${er.name}`.localeCompare(`${Bt.category} ${Bt.name}`));y(It);const Vt=[];_t.forEach(er=>{const Bt=er.data(),br=Object.prototype.hasOwnProperty.call(Bt,"transferDelta"),wr=nt.find(ia=>ia.id===Bt.sellerId)||null,Ft=zd(Bt.vendorMarginPercent??Bt.vendorMargin??Bt.commissionPercent??(wr==null?void 0:wr.commissionPercent)??0),Zt=Number(Bt.uAproximada??Bt.uApprox??Bt.netProfit??Bt.uAprox??Bt.uApproxTotal??0),dr=Bt.uVendor??Bt.vendorProfit??Bt.gainVendor??0,Rr=Bt.uVendor!=null,Wr=Wu(Number(Bt.grossProfit??Bt.gainVendor??0),Ft),Sr=Rr?{uAproximada:Number(Zt||0),vendorMarginPercent:Ft,uVendor:Number(dr||0),uInvestor:Number(Zt||0)-Number(dr||0)}:{uAproximada:Number(Zt||0),vendorMarginPercent:Wr.vendorMarginPercent,uVendor:Wr.uVendor,uInvestor:Wr.uInvestor};Vt.push({id:er.id,sellerId:Bt.sellerId,sellerName:Bt.sellerName||"",productId:Bt.productId,productName:Bt.productName||"",category:Bt.category||"",orderId:Bt.orderId||null,packages:Number(Bt.packages||0),unitsPerPackage:Number(Bt.unitsPerPackage||0),totalUnits:Number(Bt.totalUnits||0),remainingPackages:Number(Bt.remainingPackages||0),remainingUnits:Number(Bt.remainingUnits||0),totalRivas:Number(Bt.totalRivas||0),totalSanJorge:Number(Bt.totalSanJorge||0),totalIsla:Number(Bt.totalIsla||0),unitPriceRivas:Number(Bt.unitPriceRivas||0),unitPriceSanJorge:Number(Bt.unitPriceSanJorge||0),unitPriceIsla:Number(Bt.unitPriceIsla||0),grossProfit:Number(Bt.grossProfit??Bt.gainVendor??0),logisticAllocated:Number(Bt.logisticAllocated??Bt.gastos??Bt.gasto??0),vendorMarginPercent:Sr.vendorMarginPercent,uAproximada:Sr.uAproximada,uVendor:Sr.uVendor,uInvestor:Sr.uInvestor,vendorProfit:Number(Bt.vendorProfit??Sr.uVendor??0),transferDelta:br&&typeof Bt.transferDelta=="number"?Number(Bt.transferDelta||0):void 0,subtotal:Number(Bt.subtotal||0),providerPrice:Number(Bt.providerPrice||0),date:Bt.date||"",createdAt:Bt.createdAt||xr.now()})});const rr={};Vt.forEach(er=>{rr[er.id]=er}),_.current=rr,I(Vt),await de()}catch(je){console.error(je),m(" Error cargando datos de vendedores / pedidos.")}finally{A(!1)}})()},[a,t,e]);const Ce=(je,nt)=>`${je}__${nt}`,Ye=je=>je.orderId||Ce(je.sellerId,je.date),ft=(je,nt)=>nt?nt==="RIVAS"?je.unitPriceRivas||0:nt==="SAN_JORGE"?je.unitPriceSanJorge||0:je.unitPriceIsla||0:je.unitPriceIsla||je.unitPriceRivas||je.unitPriceSanJorge||0,we=(je,nt)=>nt?nt==="RIVAS"?je.grossProfitPerPackRivas||0:nt==="SAN_JORGE"?je.grossProfitPerPackSanJorge||0:je.grossProfitPerPackIsla||0:je.grossProfitPerPackIsla||je.grossProfitPerPackRivas||je.grossProfitPerPackSanJorge||0,Le=(je,nt)=>nt?nt==="RIVAS"?je.uApproxPerPackRivas||0:nt==="SAN_JORGE"?je.uApproxPerPackSanJorge||0:je.uApproxPerPackIsla||0:je.uApproxPerPackIsla||je.uApproxPerPackRivas||je.uApproxPerPackSanJorge||0,gt=je=>{const nt=p.find(dt=>dt.id===je)||null;return zd((nt==null?void 0:nt.commissionPercent)??0)},Ut=je=>{const nt=St[je.id];return typeof nt=="number"&&Number.isFinite(nt)?nt:typeof je.transferDelta=="number"?Number(je.transferDelta||0):0},Mt=je=>{const nt=Math.max(0,Number(je.packages||0)),dt=Ut(je);return Math.max(0,nt+dt)},Yt=g.useMemo(()=>{const je=new Map;for(const dt of it){const Nt=Ye(dt),Qe=je.get(Nt)||{orderKey:Nt,sellerId:dt.sellerId,sellerName:dt.sellerName,date:dt.date,totalPackages:0,totalActivePackages:0,totalRemainingPackages:0,totalExpected:0,totalExpectedActive:0,grossProfit:0,grossProfitActive:0,vendorProfit:0,vendorProfitActive:0,gastos:0,gastosActive:0,transferredOut:0,transferredIn:0},ot=Math.max(0,Number(dt.packages||0)),_t=Math.max(0,Number(dt.remainingPackages||0)),et=Mt(dt),It=ot>0?et/ot:1;Qe.totalPackages+=ot,Qe.totalRemainingPackages+=_t,Qe.totalActivePackages+=et;const Vt=p.find(ha=>ha.id===dt.sellerId)||null,rr=Vt==null?void 0:Vt.branch,er=v.find(ha=>ha.id===String(dt.productId))||null,Bt=er?ft(er,rr):Number(rr==="RIVAS"?dt.unitPriceRivas||0:rr==="SAN_JORGE"?dt.unitPriceSanJorge||0:dt.unitPriceIsla||0),br=Bt*ot,wr=Bt*et;Qe.totalExpected+=Number(br||0),Qe.totalExpectedActive+=Number(wr||0);const Ft=er?we(er,rr):ot>0?Number(dt.grossProfit||0)/ot:0,Zt=Ft*ot,dr=Ft*et;Qe.grossProfit+=Number(Zt||0),Qe.grossProfitActive+=Number(dr||0);const Rr=typeof(er==null?void 0:er.logisticAllocatedPerPack)=="number"?Number(er.logisticAllocatedPerPack||0):(()=>{const ha=Number(dt.logisticAllocated??dt.gastos??dt.gasto??0),En=ot>0?ot:et||1;return En>0?ha/En:0})(),Wr=Rr*ot,Sr=Rr*et;Qe.gastos=(Qe.gastos||0)+Number(Wr||0),Qe.gastosActive=(Qe.gastosActive||0)+Number(Sr||0);const ia=gt(dt.sellerId),_a=Wu(Zt,ia);Qe.vendorProfit+=Number(_a.uVendor||0),Qe.vendorProfitActive+=Number(_a.uVendor||0)*It,je.set(Nt,Qe)}const nt=[];for(const dt of je.values()){const Nt=wt[dt.orderKey]||{out:0,in:0};dt.transferredOut=Nt.out||0,dt.transferredIn=Nt.in||0,Number.isFinite(dt.totalExpectedActive)||(dt.totalExpectedActive=dt.totalExpected),Number.isFinite(dt.grossProfitActive)||(dt.grossProfitActive=dt.grossProfit),Number.isFinite(dt.vendorProfitActive)||(dt.vendorProfitActive=dt.vendorProfit),Number.isFinite(dt.gastosActive||0)||(dt.gastosActive=dt.gastos),nt.push(dt)}return nt.sort((dt,Nt)=>(Nt.date||"").localeCompare(dt.date||"")),nt},[it,p,wt,v,St]),st=g.useMemo(()=>Math.max(1,Math.ceil(Yt.length/Q)),[Yt.length]);g.useEffect(()=>{Ke>st&&ae(st)},[st]);const _e=g.useMemo(()=>{const je=(Ke-1)*Q;return Yt.slice(je,je+Q)},[Yt,Ke]),xe=()=>ae(je=>Math.max(1,je-1)),ie=()=>ae(je=>Math.min(st,je+1)),Oe=g.useMemo(()=>{const je=q.trim().toLowerCase();return je?Pe.filter(nt=>{const dt=String(nt.productName||"").toLowerCase(),Nt=String(nt.category||"").toLowerCase();return dt.includes(je)||Nt.includes(je)}):Pe},[Pe,q]),le=g.useMemo(()=>Math.max(1,Math.ceil(Oe.length/ee)),[Oe.length]);g.useEffect(()=>{Fe>le&&ce(le)},[le]);const De=g.useMemo(()=>{const je=(Fe-1)*ee;return Oe.slice(je,je+ee)},[Oe,Fe]),He=g.useMemo(()=>{const je=new Map;for(const nt of De){const dt=(nt.category||"Sin categora").trim()||"Sin categora",Nt=je.get(dt)||[];Nt.push(nt),je.set(dt,Nt)}return Array.from(je.entries())},[De]),P=je=>{Ve(nt=>({...nt,[je]:!nt[je]}))},R=()=>ce(je=>Math.max(1,je-1)),L=()=>ce(je=>Math.min(le,je+1)),G=je=>{ye(nt=>({...nt,[je]:!0}))},re=je=>{ye(nt=>({...nt,[je]:!1}))},ue=je=>{Z(nt=>({...nt,[je]:!0}))},$e=je=>{Z(nt=>({...nt,[je]:!1}))},rt=je=>{const nt=Math.max(0,Number(je.packages||0)),dt=Number(je.transferDelta||0);return Math.max(0,nt+dt)},At=je=>{const nt=Math.max(0,Number(je.packages||0)),dt=rt(je);return nt===0?dt>0?1:0:dt/nt},Je=(je,nt)=>Number(nt||0)*At(je),ht=je=>Number(je.logisticAllocated??je.logisticAllocated??je.gastos??je.gasto??0),Ot=je=>{const nt=Je(je,Number(je.totalExpected||0)),dt=Je(je,Number(je.grossProfit||0)),Nt=Je(je,ht(je)),Qe=Je(je,Number(je.uVendor||0)),ot=dt-Nt-Qe;return{totalExpected:nt,grossProfit:dt,gastos:Nt,uVendor:Qe,uNeta:ot}},Se=g.useMemo(()=>Pe.reduce((je,nt)=>{const dt=Math.max(0,Number(nt.packages||0)),Nt=rt(nt),Qe=Ot(nt);return je.totalPackages+=dt,je.totalActivePackages+=Nt,je.totalExpected+=Qe.totalExpected,je.grossProfit+=Qe.grossProfit,je.gastosTotal+=Qe.gastos,je.uVendor+=Qe.uVendor,je},{totalPackages:0,totalActivePackages:0,totalExpected:0,grossProfit:0,gastosTotal:0,uVendor:0}),[Pe]),tt=g.useMemo(()=>Se.grossProfit-Se.gastosTotal-Se.uVendor,[Se.grossProfit,Se.gastosTotal,Se.uVendor]),xt=()=>{k(null),D(""),he(""),fe(""),ne("0"),Te([]),K(""),ce(1),ye({}),Z({})},kt=()=>{m(""),xt(),c&&Re&&D(Re.id);const je=new Date,nt=je.getFullYear(),dt=String(je.getMonth()+1).padStart(2,"0"),Nt=String(je.getDate()).padStart(2,"0");he(`${nt}-${dt}-${Nt}`),E(!0)},tr=()=>{E(!1)},nr=je=>{m(""),xt(),k(je);const[nt,dt]=je.split("__");D(nt||""),he(dt||"");const Nt=it.filter(et=>Ye(et)===je),Qe=p.find(et=>et.id===nt)||null,ot=Qe==null?void 0:Qe.branch,_t=Nt.map(et=>{const It=v.find(ia=>ia.id===String(et.productId))||null,Vt=Number(et.unitPriceRivas||(It==null?void 0:It.unitPriceRivas)||0),rr=Number(et.unitPriceSanJorge||(It==null?void 0:It.unitPriceSanJorge)||0),er=Number(et.unitPriceIsla||(It==null?void 0:It.unitPriceIsla)||0),Bt=Number(et.packages||0),br=ot==="RIVAS"?Vt:ot==="SAN_JORGE"?rr:er,wr=Number(et.totalRivas||0),Ft=Number(et.totalSanJorge||0),Zt=Number(et.totalIsla||0),dr=ot==="RIVAS"?wr:ot==="SAN_JORGE"?Ft:Zt,Rr=zd(et.vendorMarginPercent??gt(nt)),Wr=Wu(Number(et.grossProfit||0),Rr),Sr=Number(et.logisticAllocated??et.gastos??0)||(It?It.logisticAllocatedPerPack*Bt:0);return{id:et.id,productId:String(et.productId||""),productName:et.productName||(It==null?void 0:It.name)||"",category:et.category||(It==null?void 0:It.category)||"",unitsPerPackage:Number(et.unitsPerPackage||(It==null?void 0:It.unitsPerPackage)||0),packages:Bt,totalExpected:dr,pricePerPackage:br,grossProfit:Number(et.grossProfit||0),logisticAllocated:Sr,vendorMarginPercent:Wr.vendorMarginPercent,uAproximada:Number(et.uAproximada||0),uVendor:Number(et.uVendor??Wr.uVendor??0),uInvestor:Number(et.uInvestor??Wr.uInvestor??0),totalRivas:wr,totalSanJorge:Ft,totalIsla:Zt,unitPriceRivas:Vt,unitPriceSanJorge:rr,unitPriceIsla:er,providerPrice:Number(et.providerPrice||0),remainingPackages:Number(et.remainingPackages||0),transferDelta:Ut(et)}});Te(_t),E(!0)},cr=()=>{if(m(""),!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");if(!Ae)return m(" Seleccion un producto.");const je=qi(me);if(je<=0)return m(" Paquetes debe ser > 0.");const nt=v.find(wr=>wr.id===Ae);if(!nt)return m(" Producto no encontrado.");if(Pe.some(wr=>wr.productId===nt.id))return m(" Ese producto ya est agregado al pedido.");const dt=p.find(wr=>wr.id===B)||null,Nt=dt==null?void 0:dt.branch,Qe=ft(nt,Nt),ot=we(nt,Nt),et=Le(nt,Nt)*je,It=Qe*je,Vt=ot*je,rr=nt.logisticAllocatedPerPack*je,er=gt(B),Bt=Wu(Vt,er),br={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:nt.id,productName:nt.name,category:nt.category,unitsPerPackage:nt.unitsPerPackage,packages:je,totalExpected:It,pricePerPackage:Qe,grossProfit:Vt,logisticAllocated:rr,providerPrice:nt.providerPrice,vendorMarginPercent:Bt.vendorMarginPercent,uAproximada:et,uVendor:Bt.uVendor,uInvestor:Bt.uInvestor,totalRivas:(nt.unitPriceRivas||0)*je,totalSanJorge:(nt.unitPriceSanJorge||0)*je,totalIsla:(nt.unitPriceIsla||0)*je,unitPriceRivas:nt.unitPriceRivas||0,unitPriceSanJorge:nt.unitPriceSanJorge||0,unitPriceIsla:nt.unitPriceIsla||0,remainingPackages:je,transferDelta:0};Te(wr=>[br,...wr]),fe(""),ne("0"),ce(1)},Nr=je=>{Te(nt=>nt.filter(dt=>dt.id!==je))},mn=(je,nt)=>{const dt=Math.max(0,qi(nt));Te(Nt=>Nt.map(Qe=>{if(Qe.id!==je)return Qe;const ot=v.find(dr=>dr.id===Qe.productId),_t=p.find(dr=>dr.id===B)||null,et=_t==null?void 0:_t.branch,It=ot?ft(ot,et):Qe.pricePerPackage||0,rr=(ot?we(ot,et):0)*dt,er=ot?ot.logisticAllocatedPerPack*dt:Qe.logisticAllocated||0,br=(ot?Le(ot,et):0)*dt,wr=Qe.vendorMarginPercent!=null?Qe.vendorMarginPercent:gt(B),Ft=Wu(rr,wr),Zt=String(Qe.id||"").startsWith("tmp_")||Number(Qe.remainingPackages||0)===Number(Qe.packages||0);return{...Qe,packages:dt,pricePerPackage:It,totalExpected:It*dt,grossProfit:rr,logisticAllocated:er,providerPrice:(ot==null?void 0:ot.providerPrice)??Qe.providerPrice??Number(Qe.providerPrice||0),vendorMarginPercent:Ft.vendorMarginPercent,uAproximada:br,uVendor:Ft.uVendor,uInvestor:Ft.uInvestor,totalRivas:((ot==null?void 0:ot.unitPriceRivas)||Qe.unitPriceRivas||0)*dt,totalSanJorge:((ot==null?void 0:ot.unitPriceSanJorge)||Qe.unitPriceSanJorge||0)*dt,totalIsla:((ot==null?void 0:ot.unitPriceIsla)||Qe.unitPriceIsla||0)*dt,remainingPackages:Zt?dt:Qe.remainingPackages}}))},Mr=(je,nt)=>{const dt=zd(nt);Te(Nt=>Nt.map(Qe=>{if(Qe.id!==je)return Qe;const ot=v.find(br=>br.id===Qe.productId),_t=p.find(br=>br.id===B)||null,et=_t==null?void 0:_t.branch,It=qi(Qe.packages),rr=(ot?Le(ot,et):0)*It,er=Number(Qe.grossProfit||0),Bt=Wu(er,dt);return{...Qe,vendorMarginPercent:Bt.vendorMarginPercent,uAproximada:rr,uVendor:Bt.uVendor,uInvestor:Bt.uInvestor}}))},Vr=async()=>{if(l&&!M)try{H(!0),m("");const je=j;if(!je.length){m(" No hay documentos para actualizar.");return}const nt=et=>v.find(It=>It.id===et)||null,dt=et=>{const It=p.find(Vt=>Vt.id===et)||null;return It==null?void 0:It.branch},Nt=(et,It)=>Math.abs(Number(et||0)-Number(It||0))>.01;let Qe=cf(ke),ot=0,_t=0;for(const et of je){const It=dt(et.sellerId)||"ISLA",Vt=Math.max(1,Number(et.unitsPerPackage||0)||1),rr=Number(et.totalUnits||0),er=Number(et.remainingUnits||0),br=Math.max(0,rr-er)/Vt,wr=Number(et.remainingPackages||0),Ft=Math.max(0,wr+br),Zt=nt(String(et.productId||"")),dr=Zt&&Ft>0?we(Zt,It)*Ft:Number(et.grossProfit||0),Rr=Zt&&Ft>0?Zt.logisticAllocatedPerPack*Ft:Number(et.logisticAllocated||0),Wr=Zt?Le(Zt,It):0,Sr=Ft>0?Wr*Ft:0,ia=et.vendorMarginPercent!=null?zd(et.vendorMarginPercent):gt(et.sellerId),_a=Wu(dr,ia),ha=_a.uVendor,En=_a.uInvestor,vs=dr-Rr-ha;if(!(Nt(et.packages,Ft)||et.uVendor==null||et.uNeta==null||et.uAproximada==null||et.uInvestor==null||et.logisticAllocated==null||Nt(et.uVendor,ha)||Nt(et.uNeta,vs)||Nt(et.uAproximada,Sr)||Nt(et.uInvestor,En)||Nt(et.logisticAllocated,Rr)))continue;const Tn=Jt(ke,"inventory_candies_sellers",et.id);Qe.update(Tn,{packages:Ft,vendorMarginPercent:ia,grossProfit:dr,logisticAllocated:Rr,uAproximada:Sr,uVendor:ha,uInvestor:En,uNeta:vs,vendorProfit:ha,updatedAt:xr.now()}),ot+=1,_t+=1,ot>=400&&(await Qe.commit(),Qe=cf(ke),ot=0)}ot>0&&await Qe.commit(),m(` Actualizados ${_t} documentos.`),s()}catch(je){console.error(je),m(" Error actualizando documentos.")}finally{H(!1)}},fn=(je,nt,dt="Hoja1")=>{const Nt=ls.book_new(),Qe=ls.aoa_to_sheet(nt);ls.book_append_sheet(Nt,Qe,dt),zS(Nt,je)},Zn=()=>{if(!l){m(" Solo admin puede exportar Excel.");return}const je=["Vendedor","Sucursal","Fecha","Producto ID","Producto","Categora","Paquetes","Paquetes restantes","Precio paquete","Precio proveedor","Total esperado","U. Bruta","U. Vendedor","U. Neta","P. Rivas","P. San Jorge","P. Isla","Total Rivas","Total San Jorge","Total Isla","Unidades x paquete","vendorMarginPercent","uVendor"],nt=p.find(ot=>ot.id===B)||null,dt=(nt==null?void 0:nt.branch)||rG(nt==null?void 0:nt.branchLabel)||"",Nt=[je,...Pe.map(ot=>{const{totalExpected:_t,grossProfit:et,uVendor:It,uNeta:Vt}=Ot(ot);return[(nt==null?void 0:nt.name)||"",String(dt),X||"",ot.productId,ot.productName,ot.category,Number(ot.packages||0),Number(ot.remainingPackages||0),Number(ot.pricePerPackage||0),Number(ot.providerPrice||0),Number(_t||0),Number(et||0),Number(It||0),Number(Vt||0),Number(ot.unitPriceRivas||0),Number(ot.unitPriceSanJorge||0),Number(ot.unitPriceIsla||0),Number(ot.totalRivas||0),Number(ot.totalSanJorge||0),Number(ot.totalIsla||0),Number(ot.unitsPerPackage||0),Number(ot.vendorMarginPercent||0),Number(ot.uVendor||0)]})],Qe=`vendor_order_items_${((nt==null?void 0:nt.name)||"vendedor").replace(/\s+/g,"_")}_${X||"sin_fecha"}.xlsx`;fn(Qe,Nt,"Productos")},Bn=()=>{const je=["productId","productName","category","Existentes","Paquetes","vendorMarginPercent","uNeta"],nt=v.map(Nt=>({id:Nt.id,name:Nt.name,category:Nt.category,existentes:Number(Nt.existingPacks||0)})).filter(Nt=>Nt.existentes>0).sort((Nt,Qe)=>`${Nt.category} ${Nt.name}`.localeCompare(`${Qe.category} ${Qe.name}`)),dt=[je,...nt.map(Nt=>[Nt.id,Nt.name,Nt.category,Nt.existentes,"","",""])];fn("plantilla_orden_vendedor.xlsx",dt,"Plantilla")},zt=async je=>{try{m("");const nt=await je.arrayBuffer(),dt=Lv(nt,{type:"array"}),Nt=dt.SheetNames||[],Qe=dt.Sheets.Plantilla||dt.Sheets.Productos||dt.Sheets[Nt[0]];if(!Qe)return m(" Archivo sin hojas.");const ot=ls.sheet_to_json(Qe,{header:1,defval:""});if(!ot.length)return m(" Archivo vaco.");const _t=(ot[0]||[]).map(wr=>String(wr||"").trim().toLowerCase()),et=_t.findIndex(wr=>wr==="productid"||wr==="producto id"||wr==="id"),It=_t.findIndex(wr=>wr==="paquetes"||wr==="packages"),Vt=_t.findIndex(wr=>wr==="vendormarginpercent"||wr==="vendor_margin_percent"||wr==="marginvendorpercent"||wr==="margen"||wr==="margen vendedor"||wr==="margen_del_vendedor");if(et<0||It<0)return m(" Plantilla invlida: debe tener columnas productId y Paquetes.");if(!B)return m(" Seleccion un vendedor antes de importar.");if(!X)return m(" Seleccion una fecha antes de importar.");const rr=p.find(wr=>wr.id===B)||null,er=rr==null?void 0:rr.branch,Bt=gt(B),br=[];for(let wr=1;wr<ot.length;wr++){const Ft=ot[wr]||[],Zt=String(Ft[et]||"").trim();if(!Zt)continue;const dr=qi(Ft[It]);if(dr<=0)continue;const Rr=v.find($i=>$i.id===Zt);if(!Rr)continue;const Wr=Vt>=0?zd(Ft[Vt]):0,Sr=Vt>=0&&String(Ft[Vt]??"").trim()!==""?Wr:Bt,ia=ft(Rr,er),_a=we(Rr,er),ha=ia*dr,En=_a*dr,vs=Rr.logisticAllocatedPerPack*dr,Tn=Le(Rr,er)*dr,To=Wu(En,Sr),Sc=Pe.find($i=>$i.productId===Zt);if(Sc){const $i=Vt>=0&&String(Ft[Vt]??"").trim()!==""?Sr:Sc.vendorMarginPercent,Gi=Wu(En,$i);Te(Ic=>Ic.map(ca=>ca.id===Sc.id?{...ca,packages:dr,pricePerPackage:ia,totalExpected:ha,grossProfit:En,logisticAllocated:vs,vendorMarginPercent:Gi.vendorMarginPercent,uAproximada:Tn,uVendor:Gi.uVendor,uInvestor:Gi.uInvestor,totalRivas:(Rr.unitPriceRivas||0)*dr,totalSanJorge:(Rr.unitPriceSanJorge||0)*dr,totalIsla:(Rr.unitPriceIsla||0)*dr}:ca));continue}const Gs={id:`tmp_${Date.now()}_${Math.random().toString(16).slice(2)}`,productId:Rr.id,productName:Rr.name,category:Rr.category,unitsPerPackage:Rr.unitsPerPackage,packages:dr,pricePerPackage:ia,totalExpected:ha,grossProfit:En,logisticAllocated:vs,providerPrice:Rr.providerPrice,vendorMarginPercent:To.vendorMarginPercent,uAproximada:Tn,uVendor:To.uVendor,uInvestor:To.uInvestor,totalRivas:(Rr.unitPriceRivas||0)*dr,totalSanJorge:(Rr.unitPriceSanJorge||0)*dr,totalIsla:(Rr.unitPriceIsla||0)*dr,unitPriceRivas:Rr.unitPriceRivas||0,unitPriceSanJorge:Rr.unitPriceSanJorge||0,unitPriceIsla:Rr.unitPriceIsla||0,remainingPackages:dr};br.push(Gs)}if(!br.length)return m(" No se encontraron filas con Paquetes > 0.");Te(wr=>[...br,...wr]),ce(1),m(` Importados ${br.length} productos desde plantilla.`)}catch(nt){console.error(nt),m(" Error importando Excel.")}},pr=async()=>{try{if(m(""),d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");if(!Pe.length)return m(" Agreg al menos 1 producto.");const je=p.find(Ft=>Ft.id===B)||null;if(!je)return m(" Vendedor invlido.");const nt=je.branch,dt=F?it.filter(Ft=>Ye(Ft)===F):[],Nt=Ft=>String(Ft??"").trim(),Qe=new Map;dt.forEach(Ft=>Qe.set(Nt(Ft.productId),Ft));const ot=Ft=>Qe.get(Nt(Ft))||null,_t=Ft=>{const Zt=ot(Ft.productId),dr=qi(Ft.packages),Rr=Zt?qi(Zt.packages):0,Wr=!Zt||dr!==Rr,Sr=zd(Zt?Zt.vendorMarginPercent:Ft.vendorMarginPercent),ia=zd(Ft.vendorMarginPercent);return{prev:Zt,newPacks:dr,oldPacks:Rr,packsChanged:Wr,marginChanged:Zt?Sr!==ia:!0}},et=F?Pe.filter(Ft=>{const Zt=_t(Ft);return!Zt.prev||Zt.packsChanged||Zt.marginChanged}):Pe;for(const Ft of et){const Zt=qi(Ft.packages),dr=F?ot(Ft.productId):null,Rr=dr?qi(dr.packages):0,Wr=Zt-Rr;if(Wr>0){const Sr=b[Ft.productId]??0;if(Wr>Sr)return m(` "${Ft.productName}" excede existencias de orden maestra. Existentes: ${Sr} (faltan ${Wr})`)}}J(!0);const It=xr.now(),Vt=Ce(B,X),rr=gt(B),er=new Set(Pe.map(Ft=>String(Ft.id||""))),Bt=F?dt.filter(Ft=>!er.has(String(Ft.id||""))):[];if(F&&et.length===0&&!Bt.length)return J(!1),m(" No hay cambios para guardar.");if(F){const Ft=[];for(const Zt of Bt)await W$(Zt.id),Ft.push(Zt.id);Ft.length&&I(Zt=>Zt.filter(dr=>!Ft.includes(dr.id)));for(const Zt of Pe){const dr=ot(Zt.productId);if(!dr)continue;const Rr=qi(Zt.packages),Wr=qi(dr.packages),Sr=Rr-Wr;if(Sr<0){const ia=Math.abs(Sr),_a=qi(dr.remainingPackages);if(ia>_a)return m(` No pods bajar "${Zt.productName}" en ${ia} porque solo quedan ${_a} paquetes restantes.`);await yQe({vendorInventoryId:dr.id,packagesToReturn:ia})}}}const br=new Map;let wr="";for(const Ft of et){const Zt=_t(Ft),dr=Zt.newPacks-Zt.oldPacks;if(Zt.packsChanged&&dr>0)try{const{allocations:Rr}=await vQe({productId:Ft.productId,packagesToAllocate:dr});br.set(Ft.productId,Rr||[])}catch{wr=` No hay paquetes disponibles en orden maestra para "${Ft.productName}".`;break}}if(wr)return J(!1),m(wr);await Mi(ke,async Ft=>{for(const Zt of et){const dr=_t(Zt),Rr=dr.prev;if(F&&Rr&&!dr.packsChanged){const ys=Zt.vendorMarginPercent!=null?Zt.vendorMarginPercent:rr,Ef=Number(Rr.grossProfit??Zt.grossProfit??0),VA=Number(Rr.logisticAllocated??Zt.logisticAllocated??0),Ni=Wu(Ef,ys),Pc=Number(Ef||0)-Number(VA||0)-Number(Ni.uVendor||0),Sf=Jt(ke,"inventory_candies_sellers",Zt.id);Ft.update(Sf,{vendorMarginPercent:Ni.vendorMarginPercent,uVendor:Ni.uVendor,uInvestor:Ni.uInvestor,uNeta:Pc,vendorProfit:Ni.uVendor});continue}const Wr=qi(Zt.packages),Sr=qi(Zt.unitsPerPackage),ia=Wr*Sr,_a=Rr?qi(Rr.packages):0,ha=Rr?qi(Rr.remainingPackages):0,En=Wr-_a,vs=Rr?Math.max(0,ha+En):Wr,Fd=vs*Sr,Tn=v.find(ys=>ys.id===Zt.productId),To=Tn?ft(Tn,nt):Number(Zt.pricePerPackage||0),Gs=(Tn?we(Tn,nt):0)*Wr,$i=Tn?Tn.logisticAllocatedPerPack*Wr:Zt.logisticAllocated||0,Ic=(Tn?Le(Tn,nt):0)*Wr,ca=Zt.vendorMarginPercent!=null?Zt.vendorMarginPercent:rr,ru=Wu(Gs,ca),QA=Number(Gs||0)-Number($i||0)-Number(ru.uVendor||0),jc=((Tn==null?void 0:Tn.unitPriceRivas)||Zt.unitPriceRivas||0)*Wr,_f=((Tn==null?void 0:Tn.unitPriceSanJorge)||Zt.unitPriceSanJorge||0)*Wr,Od=((Tn==null?void 0:Tn.unitPriceIsla)||Zt.unitPriceIsla||0)*Wr,el={sellerId:je.id,sellerName:je.name,sellerEmail:je.email||"",branch:je.branch||"",branchLabel:je.branchLabel||"",productId:Zt.productId,productName:Zt.productName,category:Zt.category,orderId:Vt,date:X,createdAt:It,packages:Wr,unitsPerPackage:Sr,totalUnits:ia,remainingPackages:vs,remainingUnits:Fd,totalRivas:jc,totalSanJorge:_f,totalIsla:Od,unitPriceRivas:(Tn==null?void 0:Tn.unitPriceRivas)||Zt.unitPriceRivas||0,unitPriceSanJorge:(Tn==null?void 0:Tn.unitPriceSanJorge)||Zt.unitPriceSanJorge||0,unitPriceIsla:(Tn==null?void 0:Tn.unitPriceIsla)||Zt.unitPriceIsla||0,grossProfit:Gs,logisticAllocated:$i,vendorMarginPercent:ru.vendorMarginPercent,uVendor:ru.uVendor,uNeta:QA,uAproximada:Ic,uInvestor:ru.uInvestor,providerPrice:Number(Zt.providerPrice??(Tn==null?void 0:Tn.providerPrice)??0),vendorProfit:ru.uVendor,transferDelta:Rr?Number(Rr.transferDelta||0):0},rc=br.get(Zt.productId)||[];if(F)if(String(Zt.id||"").startsWith("tmp_")){const ys=Jt(yt(ke,"inventory_candies_sellers"));el.masterAllocations=rc,Ft.set(ys,el)}else{const ys=Jt(ke,"inventory_candies_sellers",Zt.id);rc.length>0&&(el.masterAllocations=fee(...rc)),Ft.set(ys,el,{merge:!0})}else{const ys=Jt(yt(ke,"inventory_candies_sellers"));el.masterAllocations=rc,Ft.set(ys,el)}}}),m(" Pedido guardado."),E(!1),xt(),s()}catch(je){console.error(je),m(" Error guardando el pedido.")}finally{J(!1)}},Gt=async je=>{try{if(m(""),!l)return m(" Solo admin.");J(!0);const nt=it.filter(dt=>Ye(dt)===je);for(const dt of nt)await W$(dt.id);m(" Pedido eliminado."),s()}catch(nt){console.error(nt),m(" Error eliminando pedido.")}finally{J(!1)}},Qr=$o.useRef(null),ln=()=>{var je;if(d)return m(" Solo lectura.");if(!B)return m(" Seleccion un vendedor.");if(!X)return m(" Seleccion una fecha.");(je=Qr.current)==null||je.click()},tn=async je=>{var dt;const nt=(dt=je.target.files)==null?void 0:dt[0];je.target.value="",nt&&await zt(nt)},mt=!l,ur=l?11:8;return i.jsxs("div",{className:"p-3 md:p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-lg md:text-2xl font-semibold",children:"rdenes de Vendedor (Dulces)"}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600",children:"Pedidos agrupados por vendedor + fecha. U. Bruta viene de la orden maestra. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(_c,{onClick:s}),l&&i.jsx("button",{onClick:()=>Ue(!0),className:"px-3 py-2 rounded bg-amber-600 text-white text-sm hover:bg-amber-700",children:"Traslados"}),!d&&i.jsx("button",{onClick:kt,className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Nuevo pedido"})]})]}),h&&!S&&i.jsx("div",{className:"mb-3 p-2 rounded border text-sm bg-white",children:h}),f?i.jsx("div",{className:"p-4 text-sm text-gray-600",children:"Cargando"}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:block bg-white border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:Yt.length})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:()=>{if(!S){m(" Abr un pedido para exportar productos asociados.");return}Zn()},children:"Exportar asociados"}),l&&i.jsx(i.Fragment,{children:i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Vr,disabled:M,children:M?"Actualizando campos...":"Actualizar campos calculados"})})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Asociados"}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Salida"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Trasl. Entrada"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[_e.map(je=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:je.date}),i.jsx("td",{className:"p-2 border-b",children:je.sellerName}),i.jsx("td",{className:"p-2 border-b text-right",children:je.totalPackages}),i.jsx("td",{className:"p-2 border-b text-right",children:je.totalRemainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Js(je.totalExpectedActive??je.totalExpected)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Js(je.grossProfitActive??je.grossProfit)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Js((je.gastosActive??je.gastos)||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Js(je.vendorProfitActive??je.vendorProfit)}),i.jsx("td",{className:"p-2 border-b text-right",children:je.transferredOut}),i.jsx("td",{className:"p-2 border-b text-right",children:je.transferredIn}),i.jsx("td",{className:"p-2 border-b",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded bg-gray-900 text-white text-xs hover:bg-black",onClick:()=>nr(je.orderKey),children:"Ver / Editar"}),l&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este pedido completo?")&&Gt(je.orderKey)},children:"Eliminar"})]})})]},je.orderKey)),!_e.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:ur,children:"No hay pedidos."})})]})]})}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina ",Ke," / ",st]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:xe,disabled:Ke<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:ie,disabled:Ke>=st,children:""})]})]})]}),i.jsxs("div",{className:"md:hidden space-y-2",children:[i.jsxs("div",{className:"bg-white border rounded p-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-700",children:["Total pedidos: ",i.jsx("b",{children:Yt.length})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[Ke,"/",st]})]}),_e.map(je=>i.jsxs("div",{className:"bg-white border rounded",role:"button",tabIndex:0,onClick:()=>nr(je.orderKey),onKeyDown:nt=>{(nt.key==="Enter"||nt.key===" ")&&(nt.preventDefault(),nr(je.orderKey))},children:[i.jsxs("div",{className:"p-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold",children:je.sellerName}),i.jsx("div",{className:"text-xs text-gray-600",children:je.date})]}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm text-red-600",onClick:nt=>{nt.stopPropagation(),confirm("Eliminar este pedido completo?")&&Gt(je.orderKey)},children:"Eliminar"})]}),i.jsx("div",{className:"px-2 pb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Asociados"}),i.jsx("div",{className:"font-semibold",children:je.totalPackages})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"P. Restantes"}),i.jsx("div",{className:"font-semibold",children:je.totalRemainingPackages})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Js(je.totalExpectedActive??je.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Js(je.vendorProfitActive??je.vendorProfit)})]})]})})]},je.orderKey)),!_e.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 bg-white border rounded",children:"No hay pedidos."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:xe,disabled:Ke<=1,children:""}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm",onClick:ie,disabled:Ke>=st,children:""})]})]})]}),S&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3 md:p-6",children:i.jsxs("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] overflow-y-auto rounded shadow relative",children:[W&&i.jsx("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-50",children:i.jsx("div",{className:"text-sm font-semibold",children:"Guardando"})}),i.jsxs("div",{className:"p-3 md:p-5 border-b flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:F?"Editar pedido":"Nuevo pedido"}),i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta viene de Orden Maestra. U. Vendedor e Inversionista se calculan aqu. U. Neta = U. Bruta - Gastos - U. Vendedor."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:tr,children:"Cerrar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:pr,children:"Guardar"})]})]}),i.jsxs("div",{className:"p-3 md:p-5 space-y-3",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>ve(je=>!je),children:[i.jsx("span",{children:"Filtros y KPIs"}),i.jsx("span",{children:te?"":"+"})]}),i.jsxs("div",{className:`${te?"block":"hidden"} md:block space-y-3`,children:[i.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:B,onChange:je=>D(je.target.value),disabled:mt,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(je=>i.jsxs("option",{value:je.id,children:[je.name," ",je.branch?`(${je.branch})`:""]},je.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded p-2 text-sm",value:X,onChange:je=>he(je.target.value)})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Bn,children:"Plantilla"}),i.jsx("button",{className:"flex-1 px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:ln,children:"Importar Excel"}),i.jsx("input",{ref:Qr,type:"file",accept:".xlsx,.xls",className:"hidden",onChange:tn})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. asociados"}),i.jsx("div",{className:"text-lg font-semibold",children:Se.totalPackages})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"text-lg font-semibold",children:Js(Se.totalExpected)})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"text-lg font-semibold",children:Js(Se.grossProfit)})]})]}),i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"text-lg font-semibold",children:Js(Se.uVendor)})]}),l&&i.jsxs("div",{className:"border rounded p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"text-lg font-semibold",children:Js(tt)})]})]})]}),i.jsxs("div",{className:"border rounded p-3 space-y-2",children:[i.jsxs("button",{type:"button",className:"md:hidden w-full px-3 py-2 rounded border text-sm flex items-center justify-between",onClick:()=>pt(je=>!je),children:[i.jsx("span",{children:"Agregar producto"}),i.jsx("span",{children:We?"":"+"})]}),i.jsxs("div",{className:`${We?"block":"hidden"} md:block space-y-2`,children:[i.jsx("div",{className:"text-sm font-semibold hidden md:block",children:"Agregar producto"}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Buscar"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:O,onChange:je=>K(je.target.value),placeholder:"Buscar por categora o nombre"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Producto"}),i.jsxs("select",{className:"w-full border rounded p-2 text-sm",value:Ae,onChange:je=>fe(je.target.value),children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),Xe.map(je=>i.jsxs("option",{value:je.id,children:[je.category," - ",je.name," (exist:"," ",b[je.id]??0,")"]},je.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("input",{className:"w-full border rounded p-2 text-sm",value:me,onChange:je=>ne(je.target.value),inputMode:"numeric"})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{className:"w-full px-3 py-2 rounded bg-gray-900 text-white text-sm hover:bg-black",onClick:cr,disabled:!vt,children:"Agregar"})})]})]})]}),i.jsxs("div",{className:"border rounded",children:[i.jsxs("div",{className:"p-3 border-b flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold",children:["Productos asociados (",Pe.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"border rounded px-2 py-1 text-sm",placeholder:"Buscar producto",value:q,onChange:je=>{U(je.target.value),ce(1)}}),l&&i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:Zn,disabled:!Pe.length,children:"Exportar Excel"})]})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2 border-b",children:"Categora"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Producto"}),i.jsxs("th",{className:"text-right p-2 border-b",children:["P. Asociados"," "]}),i.jsx("th",{className:"text-right p-2 border-b",children:"P. Restantes"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"Precio prov."}),i.jsx("th",{className:"text-right p-2 border-b",children:"Precio/paq"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Total esperado"}),l&&i.jsxs(i.Fragment,{children:[i.jsx("th",{className:"text-right p-2 border-b",children:"U. Bruta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Gastos"})]}),i.jsx("th",{className:"text-right p-2 border-b",children:"U. Vendedor"}),l&&i.jsx("th",{className:"text-right p-2 border-b",children:"U. Neta"}),i.jsx("th",{className:"text-right p-2 border-b",children:"Margen (%)"}),i.jsx("th",{className:"text-left p-2 border-b",children:"Acciones"})]})}),i.jsxs("tbody",{children:[De.map(je=>{const{totalExpected:nt,grossProfit:dt,gastos:Nt,uVendor:Qe,uNeta:ot}=Ot(je);return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"p-2 border-b",children:je.category}),i.jsx("td",{className:"p-2 border-b",children:je.productName}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsx("span",{children:je.packages}):Be[je.id]?i.jsx("input",{className:"w-20 border rounded p-1 text-right",value:String(je.packages),onChange:_t=>mn(je.id,_t.target.value),onBlur:()=>re(je.id),onKeyDown:_t=>{(_t.key==="Enter"||_t.key==="Escape")&&re(je.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:je.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>G(je.id),"aria-label":"Editar paquetes",children:""})]})}),i.jsx("td",{className:"p-2 border-b text-right",children:je.remainingPackages}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Js(je.providerPrice||0)}),i.jsx("td",{className:"p-2 border-b text-right",children:Js(je.pricePerPackage)}),i.jsx("td",{className:"p-2 border-b text-right",children:Js(nt)}),l&&i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"p-2 border-b text-right",children:Js(dt)}),i.jsx("td",{className:"p-2 border-b text-right",children:Js(Nt)})]}),i.jsx("td",{className:"p-2 border-b text-right",children:Js(Qe)}),l&&i.jsx("td",{className:"p-2 border-b text-right",children:Js(ot)}),i.jsx("td",{className:"p-2 border-b text-right",children:d?i.jsxs("span",{children:[Number(je.vendorMarginPercent??gt(B)).toFixed(3),"%"]}):oe[je.id]?i.jsx("input",{type:"number",step:"0.001",min:0,className:"w-20 border rounded p-1 text-right",value:String(je.vendorMarginPercent??gt(B)),onChange:_t=>Mr(je.id,_t.target.value),onBlur:()=>$e(je.id),onKeyDown:_t=>{(_t.key==="Enter"||_t.key==="Escape")&&$e(je.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs("span",{children:[Number(je.vendorMarginPercent??gt(B)).toFixed(3),"%"]}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ue(je.id),"aria-label":"Editar margen",children:""})]})}),i.jsx("td",{className:"p-2 border-b",children:!d&&i.jsx("button",{className:"px-3 py-1.5 rounded bg-red-600 text-white text-xs hover:bg-red-700",onClick:()=>{confirm("Eliminar este producto?")&&Nr(je.id)},children:""})})]},je.id)}),!De.length&&i.jsx("tr",{children:i.jsx("td",{className:"p-3 text-sm text-gray-600",colSpan:l?13:9,children:"No hay productos asociados."})})]})]})}),i.jsxs("div",{className:"md:hidden p-3 space-y-2",children:[He.map(([je,nt])=>{const dt=!!be[je];return i.jsxs("div",{className:"border rounded",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-2 flex items-center justify-between text-sm",onClick:()=>P(je),children:[i.jsx("span",{className:"font-semibold",children:je}),i.jsxs("span",{className:"text-xs text-gray-600",children:[nt.length," ",nt.length===1?"producto":"productos"]})]}),dt&&i.jsx("div",{className:"px-3 pb-3 space-y-2",children:nt.map(Nt=>{const{totalExpected:Qe,grossProfit:ot,gastos:_t,uVendor:et,uNeta:It}=Ot(Nt);return i.jsxs("div",{className:"border rounded p-2 text-xs space-y-2",children:[i.jsx("div",{className:"font-semibold text-sm",children:Nt.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes"}),d?i.jsx("div",{className:"font-semibold",children:Nt.packages}):Be[Nt.id]?i.jsx("input",{className:"w-full border rounded p-1 text-right",value:String(Nt.packages),onChange:Vt=>mn(Nt.id,Vt.target.value),onBlur:()=>re(Nt.id),onKeyDown:Vt=>{(Vt.key==="Enter"||Vt.key==="Escape")&&re(Nt.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Nt.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>G(Nt.id),"aria-label":"Editar paquetes",children:""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:Nt.remainingPackages})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Precio/paq"}),i.jsx("div",{className:"font-semibold",children:Js(Nt.pricePerPackage)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Total esperado"}),i.jsx("div",{className:"font-semibold",children:Js(Qe)})]}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta"}),i.jsx("div",{className:"font-semibold",children:Js(ot)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"Gastos"}),i.jsx("div",{className:"font-semibold",children:Js(_t)})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Vendedor"}),i.jsx("div",{className:"font-semibold",children:Js(et)})]}),l&&i.jsxs("div",{children:[i.jsx("div",{className:"text-gray-600",children:"U. Neta"}),i.jsx("div",{className:"font-semibold",children:Js(It)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-gray-600",children:"Margen (%)"}),d?i.jsxs("div",{className:"font-semibold",children:[Number(Nt.vendorMarginPercent??gt(B)).toFixed(3),"%"]}):oe[Nt.id]?i.jsx("input",{type:"number",step:"0.001",min:0,className:"w-full border rounded p-1 text-right",value:String(Nt.vendorMarginPercent??gt(B)),onChange:Vt=>Mr(Nt.id,Vt.target.value),onBlur:()=>$e(Nt.id),onKeyDown:Vt=>{(Vt.key==="Enter"||Vt.key==="Escape")&&$e(Nt.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs("span",{className:"font-semibold",children:[Number(Nt.vendorMarginPercent??gt(B)).toFixed(3),"%"]}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ue(Nt.id),"aria-label":"Editar margen",children:""})]})]}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>{confirm("Eliminar este producto?")&&Nr(Nt.id)},children:""})]})]},Nt.id)})})]},je)}),!De.length&&i.jsx("div",{className:"p-3 text-sm text-gray-600 text-center",children:"No hay productos asociados."})]}),i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Pgina items ",Fe," / ",le]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:R,disabled:Fe<=1,children:""}),i.jsx("button",{className:"px-3 py-1.5 rounded border text-sm hover:bg-gray-50",onClick:L,disabled:Fe>=le,children:""})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:items-center md:justify-between",children:[i.jsx("div",{className:"text-xs text-gray-600",children:F?i.jsxs(i.Fragment,{children:["Editando: ",i.jsx("b",{children:F})]}):i.jsx(i.Fragment,{children:"Nuevo pedido (an no guardado)"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded border text-sm hover:bg-gray-50",onClick:tr,children:"Cancelar"}),!d&&i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",onClick:pr,children:"Guardar pedido"})]})]}),h&&i.jsx("div",{className:"text-sm text-gray-700",children:h})]})]})}),i.jsx(CQe,{open:jt,onClose:()=>Ue(!1),orders:Yt,rows:j,setRows:I,isAdmin:l,currentUserEmail:r||"",currentUserName:"",sellerCandyId:e,sellers:p,products:v,transferAgg:wt,setTransferAgg:Ct,setTransferRowDeltas:Rt})]})}const Wn=t=>Math.max(0,Math.floor(Number(t)||0)),Ob=t=>Math.round(t||0);function bse(t){const e=Math.max(1,Wn(t.unitsPerPackage||1)),r=Wn(t.totalUnits||0),n=Wn(t.quantity||0),a=Wn(t.packages||0);return r>0?r:n>0?n:a>0?a*e:0}function EQe(t){const e=Number(t.remaining);return Number.isFinite(e)&&e>0?Math.floor(e):bse(t)}function nG(t){const e=Number(t.remainingPackages);if(Number.isFinite(e))return Math.max(0,Math.floor(e));const r=Math.max(1,Wn(t.unitsPerPackage||1)),n=EQe(t);return Math.max(0,Math.floor(n/r))}function SQe(t){const e=Math.max(1,Wn(t.unitsPerPackage||1)),r=bse(t);return Math.max(0,Math.floor(r/e))}function Db(t){return String(t??"").trim().toLowerCase().replace(/\s+/g," ")}function Of(t){const e=String(t??"").trim();if(!e)return 0;const r=e.replace(/,/g,"."),n=Number(r);return Number.isFinite(n)?n:0}function Ih(t,e){const r={};Object.keys(t||{}).forEach(n=>r[Db(n)]=t[n]);for(const n of e){const a=r[Db(n)];if(a!=null&&String(a).trim()!=="")return a}}function Xm(t,e,r){const n=t*e,a=Math.min(Math.max(r.marginR,0),99.9)/100,s=Math.min(Math.max(r.marginSJ,0),99.9)/100,o=Math.min(Math.max(r.marginIsla,0),99.9)/100,l=e>0&&a<1?n/(1-a):n,c=e>0&&s<1?n/(1-s):n,u=e>0&&o<1?n/(1-o):n,d=l-n,f=c-n,A=u-n,h=e>0?Ob(l/e):0,m=e>0?Ob(c/e):0,p=e>0?Ob(u/e):0;return{subtotal:n,totalRivas:l,totalSanJorge:c,totalIsla:u,gainRivas:d,gainSanJorge:f,gainIsla:A,unitPriceRivas:h,unitPriceSanJorge:m,unitPriceIsla:p}}function IQe(t){return Number(t.gainRivas||0)}function jQe(t){return Number(t.gainIsla||0)}function q5(t,e,r){const n=IQe(t),a=jQe(t),s=Number(t.subtotal||0),o=e>0&&r>0?e*s/r:0;return{...t,grossProfit:n,grossProfitIsla:a,logisticAllocated:o}}function PQe(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(""),[a,s]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,f]=g.useState([]),[A,h]=g.useState(!1),[m,p]=g.useState([]),[x,v]=g.useState({}),[y,b]=g.useState(!1),[w,j]=g.useState(null),[I,_]=g.useState(""),[S,E]=g.useState(""),[F,k]=g.useState("20"),[B,D]=g.useState("15"),[X,he]=g.useState("30"),[Ae,fe]=g.useState("0"),[me,ne]=g.useState([]),[Pe,Te]=g.useState({}),[O,K]=g.useState({}),[q,U]=g.useState({}),[W,J]=g.useState({}),M=Se=>Te(tt=>({...tt,[Se]:!0})),H=Se=>Te(tt=>({...tt,[Se]:!1})),te=Se=>K(tt=>({...tt,[Se]:!0})),ve=Se=>K(tt=>({...tt,[Se]:!1})),Q=Se=>U(tt=>({...tt,[Se]:!0})),Ke=Se=>U(tt=>({...tt,[Se]:!1})),ae=Se=>J(tt=>({...tt,[Se]:!0})),ee=Se=>J(tt=>({...tt,[Se]:!1})),Fe=g.useRef(new Set),[ce,be]=g.useState(""),[Ve,We]=g.useState(""),[pt,wt]=g.useState(""),[Ct,St]=g.useState("1"),[Rt,jt]=g.useState("0"),[Ue,Be]=g.useState("DATOS"),[ye,oe]=g.useState(""),[Z,Ne]=g.useState(1),Re=15,ge=g.useMemo(()=>Math.max(1,Math.ceil(m.length/Re)),[m.length]);g.useEffect(()=>Ne(1),[m.length]);const Xe=g.useMemo(()=>{const Se=(Z-1)*Re;return m.slice(Se,Se+Re)},[m,Z]),vt=g.useMemo(()=>{const Se=new Set;for(const tt of d){const xt=String(tt.category||"").trim();xt&&Se.add(xt)}return Array.from(Se).sort((tt,xt)=>tt.localeCompare(xt,"es"))},[d]);g.useEffect(()=>{!ce&&vt.length>0&&be(vt[0])},[vt]);const it=async()=>{h(!0);try{const Se=await Qt(ar(yt(ke,"products_candies"),wn("createdAt","desc"))),tt=[];Se.forEach(xt=>{const kt=xt.data();tt.push({id:xt.id,name:String(kt.name??"").trim(),category:String(kt.category??"").trim()||"Caramelo",providerPrice:Number(kt.providerPrice??0),unitsPerPackage:Number(kt.unitsPerPackage??1)})}),f(tt)}catch(Se){console.error(Se),n(" Error cargando catlogo de dulces.")}finally{h(!1)}};g.useEffect(()=>{it()},[t]);const de=g.useMemo(()=>(ce.trim().length>0?d.filter(tt=>tt.category===ce):d).sort((tt,xt)=>tt.name.localeCompare(xt.name,"es")),[d,ce]);g.useEffect(()=>{if(!Ve){wt(""),St("1");return}const Se=d.find(tt=>tt.id===Ve);Se&&(wt(String(Se.providerPrice??0)),St(String(Se.unitsPerPackage??1)))},[Ve,d]);const Ce=()=>{j(null),_(""),E(""),ne([]),Te({}),K({}),U({}),J({}),Fe.current=new Set,be(vt[0]||""),We(""),wt(""),jt("0"),St("1"),k("20"),D("15"),he("30"),fe("0"),Be("DATOS"),oe("")},Ye=()=>{if(n(""),!Ve){n("Selecciona un producto del catlogo.");return}const Se=d.find(Mr=>Mr.id===Ve);if(!Se){n("Producto de catlogo no encontrado (refresca).");return}if(w&&!Fe.current.has(Se.id)){n(" En edicin no se pueden agregar productos nuevos. Solo ajustar los existentes.");return}const tt=Number(Se.providerPrice||0),xt=Wn(Rt||0),kt=Wn(Se.unitsPerPackage||0);if(tt<0){n("El precio proveedor no puede ser negativo.");return}if(xt<=0){n("Los paquetes deben ser mayor que 0.");return}if(kt<=0){n("Las unidades por paquete deben ser mayor que 0.");return}const tr=Number(F||0),nr=Number(B||0),cr=Number(X||0),Nr=Xm(tt,xt,{marginR:tr,marginSJ:nr,marginIsla:cr});if(me.find(Mr=>Mr.id===Se.id))ne(Mr=>Mr.map(Vr=>{if(Vr.id!==Se.id)return Vr;const fn=Wn(Vr.packages||0)+xt,Zn=Xm(tt,fn,{marginR:Number(Vr.marginRivas??tr),marginSJ:Number(Vr.marginSanJorge??nr),marginIsla:Number(Vr.marginIsla??cr)}),zt=Wn(Vr.remainingPackages??Vr.packages)+xt;return{...Vr,providerPrice:tt,unitsPerPackage:kt,packages:fn,remainingPackages:zt,...Zn}}));else{const Mr={id:Se.id,name:Se.name,category:Se.category,providerPrice:tt,packages:xt,unitsPerPackage:kt,marginRivas:tr,marginSanJorge:nr,marginIsla:cr,subtotal:Nr.subtotal,totalRivas:Nr.totalRivas,totalSanJorge:Nr.totalSanJorge,totalIsla:Nr.totalIsla,gainRivas:Nr.gainRivas,gainSanJorge:Nr.gainSanJorge,gainIsla:Nr.gainIsla,unitPriceRivas:Nr.unitPriceRivas,unitPriceSanJorge:Nr.unitPriceSanJorge,unitPriceIsla:Nr.unitPriceIsla,remainingPackages:xt};ne(Vr=>[...Vr,Mr])}We(""),jt("0"),Be("ITEMS")},ft=Se=>{ne(tt=>tt.filter(xt=>xt.id!==Se))},we=(Se,tt,xt)=>{ne(kt=>kt.map(tr=>{if(tr.id!==Se)return tr;let nr={...tr};if(tt==="packages"&&(nr.packages=Wn(xt||0)),tt==="unitsPerPackage"&&(nr.unitsPerPackage=Wn(xt||0)),tt==="marginRivas"&&(nr.marginRivas=Number(xt||0)),tt==="marginIsla"&&(nr.marginIsla=Number(xt||0)),tt==="marginSanJorge"&&(nr.marginSanJorge=Number(xt||0)),tt==="packages"||tt==="marginRivas"||tt==="marginIsla"||tt==="marginSanJorge"){const cr=Xm(nr.providerPrice,nr.packages,{marginR:Number(nr.marginRivas||0),marginSJ:Number(nr.marginSanJorge||0),marginIsla:Number(nr.marginIsla||0)});nr={...nr,...cr}}return(nr.remainingPackages===void 0||nr.remainingPackages===null)&&(nr.remainingPackages=nr.packages),nr}))},Le=g.useMemo(()=>{const Se=me.reduce((nr,cr)=>nr+Wn(cr.packages),0),tt=me.reduce((nr,cr)=>nr+Number(cr.subtotal||0),0),xt=me.reduce((nr,cr)=>nr+Number(cr.totalRivas||0),0),kt=me.reduce((nr,cr)=>nr+Number(cr.totalSanJorge||0),0),tr=me.reduce((nr,cr)=>nr+Number(cr.totalIsla||0),0);return{totalPackages:Se,subtotal:tt,totalRivas:xt,totalSanJorge:kt,totalIsla:tr}},[me]),gt=g.useMemo(()=>{const Se=Math.max(0,Of(Ae||0)),tt=Number(Le.subtotal||0),xt=me.map(cr=>q5(cr,Se,tt)),kt=xt.reduce((cr,Nr)=>cr+Number(Nr.grossProfit||0),0),tr=xt.reduce((cr,Nr)=>cr+Number(Nr.grossProfitIsla||0),0),nr=xt.reduce((cr,Nr)=>cr+Number(Nr.logisticAllocated||0),0);return{items:xt,logisticsTotal:Se,grossTotal:kt,grossIslaTotal:tr,logisticAllocatedTotal:nr}},[me,Ae,Le.subtotal]),Ut=g.useMemo(()=>{const Se=String(ye||"").trim().toLowerCase();return Se?gt.items.filter(tt=>{const xt=String(tt.name||"").toLowerCase(),kt=String(tt.category||"").toLowerCase();return xt.includes(Se)||kt.includes(Se)}):gt.items},[gt.items,ye]),[Mt,Yt]=g.useState(1),st=15,_e=g.useMemo(()=>Math.max(1,Math.ceil(Ut.length/st)),[Ut.length]);g.useEffect(()=>Yt(1),[Ut.length]);const xe=g.useMemo(()=>{const Se=(Mt-1)*st;return Ut.slice(Se,Se+st)},[Ut,Mt]),[ie,Oe]=g.useState({});g.useEffect(()=>Oe({}),[Ut.length]);const[le,De]=g.useState({});g.useEffect(()=>{const Se={};for(const tt of m)tt&&tt.id&&(Se[tt.id]=!1);De(Se)},[m]);const He=g.useMemo(()=>({totalPackages:Le.totalPackages,subtotalCosto:Le.subtotal,esperadoRivas:Le.totalRivas,esperadoIsla:Le.totalIsla,gastosLogisticos:gt.logisticsTotal,utilidadBrutaRivas:gt.grossTotal,utilidadBrutaIsla:gt.grossIslaTotal}),[Le,gt]),P=()=>{if(n(""),!d.length){n(" No hay catlogo cargado para generar plantilla.");return}const Se=Number(F||0),tt=Number(X||0),xt=d.slice().sort((mn,Mr)=>mn.name.localeCompare(Mr.name,"es")).map(mn=>({Producto:mn.name,Paquetes:"","Margen rivas":Se,"Margen Isla":tt,"P. unidad Rivas":"","P. unidad Isla":""})),kt=[{Campo:"Gastos logisticos",Valor:Of(Ae||0)}],tr=ls.book_new(),nr=ls.json_to_sheet(xt),cr=ls.json_to_sheet(kt);ls.book_append_sheet(tr,nr,"Productos"),ls.book_append_sheet(tr,cr,"Config");const Nr=S&&String(S).trim()||new Date().toISOString().slice(0,10);zS(tr,`plantilla_orden_maestra_${Nr}.xlsx`)},R=()=>{if(n(""),!gt.items.length){n(" No hay items para exportar.");return}const Se=gt.items.slice().sort((nr,cr)=>nr.name.localeCompare(cr.name,"es")).map(nr=>({Categora:nr.category,Producto:nr.name,Paquetes:Wn(nr.packages),"Paquetes restantes":Wn(nr.remainingPackages??nr.packages),"Und x Paquete":Wn(nr.unitsPerPackage),"Precio proveedor":Number(nr.providerPrice||0),Facturado:Number(nr.subtotal||0),"Esperado Rivas":Number(nr.totalRivas||0),"Esperado Isla":Number(nr.totalIsla||0),"MV Rivas":Number(nr.marginRivas||0),"MV Isla":Number(nr.marginIsla||0),"Utilidad Bruta":Number(nr.grossProfit||0),"Utilidad Bruta Isla":Number(nr.grossProfitIsla||0),"Prorrateo logistico":Number(nr.logisticAllocated||0),"Precio Rivas":Number(nr.unitPriceRivas||0),"Precio Isla":Number(nr.unitPriceIsla||0)})),tt=[{KPI:"Paquetes totales",Valor:He.totalPackages},{KPI:"Subtotal costo",Valor:He.subtotalCosto},{KPI:"Esperado Rivas",Valor:He.esperadoRivas},{KPI:"Esperado Isla",Valor:He.esperadoIsla},{KPI:"Gastos logsticos",Valor:He.gastosLogisticos},{KPI:"Utilidad Bruta Rivas",Valor:He.utilidadBrutaRivas},{KPI:"Utilidad Bruta Isla",Valor:He.utilidadBrutaIsla}],xt=ls.book_new();ls.book_append_sheet(xt,ls.json_to_sheet(Se),"Productos"),ls.book_append_sheet(xt,ls.json_to_sheet(tt),"Resumen");const kt=S&&String(S).trim()||new Date().toISOString().slice(0,10),tr=I&&String(I).trim()||`Orden_${kt}`;zS(xt,`orden_maestra_${tr.replace(/[^\w\-]+/g,"_")}_${kt}.xlsx`)},L=g.useRef(null),[G,re]=g.useState(!1),ue=()=>{var Se;if(!d.length){n(" Catlogo no cargado todava. Esper y prob de nuevo.");return}(Se=L.current)==null||Se.click()},$e=async Se=>{var xt;const tt=(xt=Se.target.files)==null?void 0:xt[0];if(tt){Se.target.value="",re(!0),n("");try{const kt=await tt.arrayBuffer(),tr=Lv(kt,{type:"array"}),nr=tr.SheetNames||[],cr=tr.Sheets.Productos||tr.Sheets.Plantilla||tr.Sheets[nr[0]];if(!cr){n(" No se encontr hoja de Productos/Plantilla.");return}const Nr=ls.sheet_to_json(cr,{defval:""});if(!Nr.length){n(" El Excel viene vaco.");return}let mn=0;const Mr=tr.Sheets.Config;if(Mr){const zt=ls.sheet_to_json(Mr,{defval:""}),pr=new Map;for(const Gt of zt){const Qr=Db(Ih(Gt,["Campo","Key","Nombre"])??""),ln=Ih(Gt,["Valor","Value"]);Qr&&pr.set(Qr,ln)}pr.has("gastos logisticos")&&(mn=Math.max(0,Of(pr.get("gastos logisticos"))))}else for(const zt of Nr){const pr=Ih(zt,["Gastos","Gasto","Gastos logisticos","Logistica"]),Gt=Of(pr);if(Gt>0){mn=Gt;break}}fe(String(mn||0));const Vr=new Map;for(const zt of d)Vr.set(Db(zt.name),zt);const fn=[],Zn=new Map;for(let zt=0;zt<Nr.length;zt++){const pr=Nr[zt],Gt=Ih(pr,["Producto","Product","Nombre","Name"]),Qr=Ih(pr,["Paquetes","Packages"]),ln=Ih(pr,["Margen rivas","Margen Rivas","MV Rivas"]),tn=Ih(pr,["Margen Isla","Margen isla","MV Isla"]),mt=Ih(pr,["P. unidad Rivas","P unidad Rivas","Precio Rivas"]),ur=Ih(pr,["P. unidad Isla","P unidad Isla","Precio Isla"]),je=Db(Gt);if(!je)continue;const nt=Vr.get(je);if(!nt){fn.push(`Fila ${zt+2}: Producto no existe en catlogo: "${String(Gt).trim()}".`);continue}if(w&&!Fe.current.has(nt.id)){fn.push(`Fila ${zt+2}: No se permiten productos nuevos en edicin ("${nt.name}").`);continue}const dt=Math.floor(Of(Qr));if(dt<=0){fn.push(`Fila ${zt+2}: "Paquetes" invlido para "${nt.name}".`);continue}const Nt=String(ln??"").trim()!==""?Of(ln):Number(F||0),Qe=String(tn??"").trim()!==""?Of(tn):Number(X||0),ot=Math.floor(Of(mt)),_t=Math.floor(Of(ur)),et=Zn.get(nt.id);et?Zn.set(nt.id,{packages:et.packages+dt,mR:Nt,mI:Qe,puR:ot>0?ot:et.puR,puI:_t>0?_t:et.puI}):Zn.set(nt.id,{packages:dt,mR:Nt,mI:Qe,puR:ot>0?ot:void 0,puI:_t>0?_t:void 0})}const Bn=[];Zn.forEach((zt,pr)=>{const Gt=d.find(_t=>_t.id===pr);if(!Gt)return;const Qr=Number(Gt.providerPrice||0),ln=Math.max(1,Wn(Gt.unitsPerPackage||1)),tn=Math.max(1,Wn(zt.packages)),mt=Qr*tn,ur=Number(zt.puR||0),je=Number(zt.puI||0),nt=ur>0||je>0;let dt=zt.mR,Nt=zt.mI;const Qe=Number(B||0);let ot;if(nt){const _t=Xm(Qr,tn,{marginR:dt,marginSJ:Qe,marginIsla:Nt}),et=ur>0?ur*tn:_t.totalRivas,It=je>0?je*tn:_t.totalIsla,Vt=rr=>{if(!Number.isFinite(rr)||rr<=0)return 0;const er=(1-mt/rr)*100;return Math.min(Math.max(er,0),99.9)};ur>0&&(dt=Vt(et)),je>0&&(Nt=Vt(It)),ot={subtotal:mt,totalRivas:et,totalSanJorge:_t.totalSanJorge,totalIsla:It,gainRivas:et-mt,gainSanJorge:_t.gainSanJorge,gainIsla:It-mt,unitPriceRivas:tn>0?Ob(et/tn):0,unitPriceSanJorge:_t.unitPriceSanJorge,unitPriceIsla:tn>0?Ob(It/tn):0}}else ot=Xm(Qr,tn,{marginR:dt,marginSJ:Qe,marginIsla:Nt});Bn.push({id:Gt.id,name:Gt.name,category:Gt.category,providerPrice:Qr,packages:tn,unitsPerPackage:ln,marginRivas:dt,marginSanJorge:Qe,marginIsla:Nt,subtotal:ot.subtotal,totalRivas:ot.totalRivas,totalSanJorge:ot.totalSanJorge,totalIsla:ot.totalIsla,gainRivas:ot.gainRivas,gainSanJorge:ot.gainSanJorge,gainIsla:ot.gainIsla,unitPriceRivas:ot.unitPriceRivas,unitPriceSanJorge:ot.unitPriceSanJorge,unitPriceIsla:ot.unitPriceIsla,remainingPackages:tn})}),ne(zt=>{const pr=new Map;zt.forEach(Gt=>pr.set(Gt.id,Gt));for(const Gt of Bn){const Qr=pr.get(Gt.id);if(!Qr)pr.set(Gt.id,Gt);else{const ln=Wn(Qr.packages)+Wn(Gt.packages),tn=Xm(Qr.providerPrice,ln,{marginR:Gt.marginRivas,marginSJ:Number(Qr.marginSanJorge||0),marginIsla:Gt.marginIsla});pr.set(Gt.id,{...Qr,packages:ln,marginRivas:Gt.marginRivas,marginIsla:Gt.marginIsla,remainingPackages:Wn(Qr.remainingPackages??Qr.packages)+Wn(Gt.packages),...tn})}}return Array.from(pr.values()).sort((Gt,Qr)=>Gt.name.localeCompare(Qr.name,"es"))}),Be("ITEMS"),fn.length?(n(` Importado con detalles. Errores: ${fn.length}.`),console.warn("Errores import:",fn)):n(` Importacin lista: ${Bn.length} productos agregados.`)}catch(kt){console.error(kt),n(" Error importando Excel. Revis hojas: Productos + Config (o Plantilla).")}finally{re(!1)}}};g.useEffect(()=>{(async()=>{s(!0);try{const Se=ar(yt(ke,"candy_main_orders"),wn("createdAt","desc")),tt=await Qt(Se),xt=[];tt.forEach(nr=>{const cr=nr.data();xt.push({id:nr.id,name:cr.name??"",date:cr.date??"",totalPackages:Number(cr.totalPackages??0),subtotal:Number(cr.subtotal??0),totalRivas:Number(cr.totalRivas??0),totalSanJorge:Number(cr.totalSanJorge??0),totalIsla:Number(cr.totalIsla??0),marginRivas:Number(cr.marginRivas??20),marginSanJorge:Number(cr.marginSanJorge??15),marginIsla:Number(cr.marginIsla??30),logisticsCost:Number(cr.logisticsCost??0),createdAt:cr.createdAt??xr.now()})}),p(xt);const kt=await Qt(yt(ke,"inventory_candies")),tr={};kt.forEach(nr=>{const cr=nr.data(),Nr=cr.orderId;if(!Nr)return;const mn=SQe(cr),Mr=nG(cr);tr[Nr]||(tr[Nr]={orderId:Nr,totalPackages:0,remainingPackages:0}),tr[Nr].totalPackages+=mn,tr[Nr].remainingPackages+=Mr}),v(tr)}catch(Se){console.error(Se),n(" Error cargando pedidos generales.")}finally{s(!1)}})()},[t]);const rt=Se=>{var tt;return Se.date?Se.date:(tt=Se.createdAt)!=null&&tt.toDate?Se.createdAt.toDate().toISOString().slice(0,10):""},At=async Se=>{if(Se.preventDefault(),n(""),l(!0),!me.length){n("Agrega al menos un producto a la orden.");return}try{const tt=new Date().toISOString().slice(0,10),xt=S||tt,kt=Number(F||0),tr=Number(B||0),nr=Number(X||0),cr=Math.max(0,Of(Ae||0));for(const zt of me){if(!String(zt.name||"").trim()){n("Hay un producto sin nombre en el pedido.");return}if(Number(zt.providerPrice||0)<0){n(`El precio proveedor no puede ser negativo (producto: ${zt.name}).`);return}if(Wn(zt.packages)<=0){n(`Los paquetes deben ser mayor que 0 (producto: ${zt.name}).`);return}if(Wn(zt.unitsPerPackage)<=0){n(`Las unidades por paquete deben ser mayor que 0 (producto: ${zt.name}).`);return}}if(w){const zt=Fe.current;if(me.some(Gt=>!zt.has(Gt.id))){n(" No se permiten productos nuevos en edicin. Elimin los nuevos para guardar.");return}}const Nr=Number(Le.subtotal||0),mn=me.map(zt=>q5(zt,cr,Nr)),Mr={totalPackages:Le.totalPackages,subtotal:Le.subtotal,totalRivas:Le.totalRivas,totalSanJorge:Le.totalSanJorge,totalIsla:Le.totalIsla},Vr={name:I||`Pedido ${xt}`,date:xt,totalPackages:Mr.totalPackages,subtotal:Mr.subtotal,totalRivas:Mr.totalRivas,totalSanJorge:Mr.totalSanJorge,totalIsla:Mr.totalIsla,marginRivas:kt,marginSanJorge:tr,marginIsla:nr,logisticsCost:cr,uBrutaGlobal:gt.grossTotal,items:mn};if(w){await _n(Jt(ke,"candy_main_orders",w),{...Vr});for(const Gt of mn){const Qr=await Qt(ar(yt(ke,"inventory_candies"),mr("orderId","==",w),mr("productId","==",Gt.id))),ln=Math.max(1,Wn(Gt.unitsPerPackage||1)),tn=Wn(Gt.packages)*ln;if(Qr.empty)await $n(yt(ke,"inventory_candies"),{productId:Gt.id,productName:Gt.name,category:Gt.category,measurement:"unidad",quantity:tn,remaining:tn,packages:Wn(Gt.packages),remainingPackages:Wn(Gt.packages),unitsPerPackage:ln,totalUnits:tn,providerPrice:Gt.providerPrice,subtotal:Gt.subtotal,totalRivas:Gt.totalRivas,totalSanJorge:Gt.totalSanJorge,totalIsla:Gt.totalIsla,gainRivas:Gt.gainRivas,gainSanJorge:Gt.gainSanJorge,gainIsla:Gt.gainIsla,unitPriceRivas:Gt.unitPriceRivas,unitPriceSanJorge:Gt.unitPriceSanJorge,unitPriceIsla:Gt.unitPriceIsla,date:xt,createdAt:xr.now(),status:"PENDIENTE",orderId:w});else for(const mt of Qr.docs){const ur=mt.data(),je=Wn(ur.totalUnits??0),nt=Wn(ur.remaining??je),dt=tn-je,Nt=Math.max(0,nt+dt),Qe=Math.max(0,Math.floor(Nt/ln));await _n(Jt(ke,"inventory_candies",mt.id),{productName:Gt.name,category:Gt.category,unitsPerPackage:ln,totalUnits:tn,quantity:tn,remaining:Nt,packages:Wn(Gt.packages),remainingPackages:Qe,providerPrice:Gt.providerPrice,subtotal:Gt.subtotal,totalRivas:Gt.totalRivas,totalSanJorge:Gt.totalSanJorge,totalIsla:Gt.totalIsla,gainRivas:Gt.gainRivas,gainSanJorge:Gt.gainSanJorge,gainIsla:Gt.gainIsla,unitPriceRivas:Gt.unitPriceRivas,unitPriceSanJorge:Gt.unitPriceSanJorge,unitPriceIsla:Gt.unitPriceIsla,date:xt})}}const zt=await Qt(ar(yt(ke,"inventory_candies"),mr("orderId","==",w))),pr=new Set(mn.map(Gt=>Gt.id));for(const Gt of zt.docs){const Qr=Gt.data(),ln=String(Qr.productId||"");ln&&!pr.has(ln)&&await Mn(Jt(ke,"inventory_candies",Gt.id))}p(Gt=>Gt.map(Qr=>Qr.id===w?{...Qr,name:Vr.name,date:Vr.date,totalPackages:Vr.totalPackages,subtotal:Vr.subtotal,totalRivas:Vr.totalRivas,totalSanJorge:Vr.totalSanJorge,totalIsla:Vr.totalIsla,marginRivas:Vr.marginRivas,marginSanJorge:Vr.marginSanJorge,marginIsla:Vr.marginIsla,logisticsCost:Vr.logisticsCost}:Qr)),n(" Orden maestra actualizada (pedido + inventario)."),Ce(),b(!1),e();return}const Zn=(await $n(yt(ke,"candy_main_orders"),{...Vr,createdAt:xr.now()})).id,Bn=cf(ke);for(const zt of mn){const pr=Math.max(1,Wn(zt.unitsPerPackage||1)),Gt=Wn(zt.packages)*pr,Qr=Jt(yt(ke,"inventory_candies"));Bn.set(Qr,{productId:zt.id,productName:zt.name,category:zt.category,measurement:"unidad",quantity:Gt,remaining:Gt,packages:Wn(zt.packages),remainingPackages:Wn(zt.packages),unitsPerPackage:pr,totalUnits:Gt,providerPrice:zt.providerPrice,subtotal:zt.subtotal,totalRivas:zt.totalRivas,totalSanJorge:zt.totalSanJorge,totalIsla:zt.totalIsla,gainRivas:zt.gainRivas,gainSanJorge:zt.gainSanJorge,gainIsla:zt.gainIsla,unitPriceRivas:zt.unitPriceRivas,unitPriceSanJorge:zt.unitPriceSanJorge,unitPriceIsla:zt.unitPriceIsla,date:xt,createdAt:xr.now(),status:"PENDIENTE",orderId:Zn})}await Bn.commit(),n(" Orden maestra creada y registrada en inventario."),Ce(),b(!1),e()}catch(tt){console.error(tt),n(" Error al guardar orden maestra.")}finally{l(!1)}},Je=async Se=>{try{s(!0),n(""),j(Se.id),_(Se.name),E(Se.date),k(String(Se.marginRivas??20)),D(String(Se.marginSanJorge??15)),he(String(Se.marginIsla??30));const tt=Number(Se.logisticsCost??0);fe(String(tt||0)),Be("DATOS");const xt=Jt(ke,"candy_main_orders",Se.id),kt=await si(xt);if(!kt.exists()){n(" No se encontr la orden.");return}const tr=kt.data(),nr=Array.isArray(tr.items)?tr.items:[];Fe.current=new Set(nr.map(Mr=>String(Mr.id||"")));const cr=await Qt(ar(yt(ke,"inventory_candies"),mr("orderId","==",Se.id))),Nr={};cr.forEach(Mr=>{const Vr=Mr.data(),fn=String(Vr.productId||"");if(!fn)return;const Zn=nG(Vr);Nr[fn]=(Nr[fn]||0)+Zn});const mn=nr.map(Mr=>{const Vr=d.find(Qr=>Qr.id===Mr.id),fn=Number((Vr==null?void 0:Vr.providerPrice)??Mr.providerPrice??0),Zn=Math.max(1,Wn((Vr==null?void 0:Vr.unitsPerPackage)??Mr.unitsPerPackage??1)),Bn=Number(Mr.marginRivas??0),zt=Number(Mr.marginSanJorge??Number(B||0)),pr=Number(Mr.marginIsla??0),Gt=Xm(fn,Wn(Mr.packages||0),{marginR:Bn,marginSJ:zt,marginIsla:pr});return{...Mr,name:String((Vr==null?void 0:Vr.name)??Mr.name??"").trim(),category:String((Vr==null?void 0:Vr.category)??Mr.category??"Caramelo").trim(),providerPrice:fn,unitsPerPackage:Zn,remainingPackages:Nr[Mr.id]??Mr.remainingPackages??Mr.packages??0,...Gt}});ne(mn),b(!0)}catch(tt){console.error(tt),n(" Error al abrir orden maestra.")}finally{s(!1)}},ht=async Se=>{if(confirm(`Eliminar la orden "${Se.name}" y todo su inventario asociado?`)){n("");try{const xt=await Qt(ar(yt(ke,"inventory_candies"),mr("orderId","==",Se.id)));for(const kt of xt.docs)await Mn(Jt(ke,"inventory_candies",kt.id));await Mn(Jt(ke,"candy_main_orders",Se.id)),p(kt=>kt.filter(tr=>tr.id!==Se.id)),n(" Orden maestra eliminada."),e()}catch(xt){console.error(xt),n(" Error al eliminar orden maestra.")}}},Ot=async()=>{if(!c)try{u(!0),n("");const Se=await Qt(yt(ke,"candy_main_orders"));let tt=cf(ke),xt=0,kt=0;const tr=(nr,cr)=>Math.abs(Number(nr||0)-Number(cr||0))>.01;Se.forEach(nr=>{const cr=nr.data(),Nr=Array.isArray(cr.items)?cr.items:[];if(!Nr.length)return;const mn=Nr.reduce((zt,pr)=>zt+Number(pr.subtotal||0),0);let Mr=Number(cr.logisticsCost??cr.gastosLogisticos??cr.gastos??0);if(Number.isFinite(Mr)||(Mr=0),!Mr){const zt=Nr.reduce((pr,Gt)=>pr+Number(Gt.logisticAllocated??0),0);Mr=Number(zt||0)}const Vr=Nr.map(zt=>q5(zt,Mr,mn)),fn=Vr.reduce((zt,pr)=>zt+Number(pr.grossProfit||0),0);if(!(tr(cr.logisticsCost,Mr)||tr(cr.uBrutaGlobal,fn)||Vr.some((zt,pr)=>{const Gt=Nr[pr]||{};return tr(Gt.logisticAllocated,zt.logisticAllocated)||tr(Gt.grossProfit,zt.grossProfit)||tr(Gt.grossProfitIsla,zt.grossProfitIsla)})))return;const Bn=Jt(ke,"candy_main_orders",nr.id);tt.update(Bn,{logisticsCost:Mr,uBrutaGlobal:fn,items:Vr,updatedAt:xr.now()}),xt+=1,kt+=1,xt>=400&&(tt.commit(),tt=cf(ke),xt=0)}),xt>0&&await tt.commit(),n(` Ordenes maestras actualizadas: ${kt}`),e()}catch(Se){console.error(Se),n(" Error actualizando prorrateo de rdenes maestras.")}finally{u(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Ordenes Maestras"})}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_c,{onClick:e,loading:a||A}),i.jsx("button",{className:"inline-flex items-center gap-2 bg-gray-200 text-gray-800 px-2 md:px-3 py-2 rounded-2xl hover:bg-gray-300 disabled:opacity-60",onClick:Ot,disabled:c,children:c?"Actualizando prorrateo...":"Actualizar prorrateo"}),i.jsxs("button",{className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-2 md:px-3 py-2 rounded-2xl hover:bg-indigo-700 w-full md:w-auto max-w-[220px] justify-center",onClick:()=>{Ce(),b(!0)},children:[i.jsx("span",{className:"items-center gap-4 inline-block bg-indigo-700/40 rounded-full p-1",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Nueva Orden"]})]})]}),r&&i.jsx("p",{className:"mt-2 text-sm",children:r})]}),y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"relative bg-white p-4 md:p-6 rounded shadow-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto text-sm",children:[o&&i.jsx("div",{className:"absolute inset-0 bg-white/70 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white border rounded-xl px-4 py-3 shadow flex items-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-semibold",children:"Guardando orden"})]})}),i.jsxs("div",{className:"sticky top-0 bg-white z-20 pb-3 border-b",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-lg md:text-xl font-bold",children:w?"Editar Orden Maestra":"Nueva Orden Maestra"}),i.jsx("div",{className:"ml-auto flex gap-2",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 disabled:opacity-60",disabled:o,onClick:()=>{Ce(),b(!1)},children:"Cerrar"})})]}),i.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-1 gap-2",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold",children:"Gastos logsticos (orden)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:Ae,onChange:Se=>fe(Se.target.value),placeholder:"0",min:0})]})}),i.jsx("div",{className:"md:hidden mt-3",children:i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>Be("DATOS"),className:`px-2 py-2 rounded text-xs font-semibold border ${Ue==="DATOS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Datos"}),i.jsx("button",{type:"button",onClick:()=>Be("AGREGAR"),className:`px-2 py-2 rounded text-xs font-semibold border ${Ue==="AGREGAR"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Agregar"}),i.jsxs("button",{type:"button",onClick:()=>Be("ITEMS"),className:`px-2 py-2 rounded text-xs font-semibold border ${Ue==="ITEMS"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:["Items (",me.length,")"]}),i.jsx("button",{type:"button",onClick:()=>Be("TOTALES"),className:`px-2 py-2 rounded text-xs font-semibold border ${Ue==="TOTALES"?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-200"}`,children:"Totales"})]})})]}),i.jsxs("form",{onSubmit:At,className:"space-y-4 pt-4",children:[i.jsx("input",{ref:L,type:"file",accept:".xlsx,.xls,.csv",className:"hidden",onChange:$e}),i.jsx("div",{className:`${Ue==="DATOS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Nombre de Orden"}),i.jsx("input",{className:"w-full border p-2 rounded",value:I,onChange:Se=>_(Se.target.value),placeholder:"Ej: Pedido enero 19"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Fecha del pedido"}),i.jsx("input",{type:"date",className:"w-full border p-2 rounded",value:S,onChange:Se=>E(Se.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Rivas"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:F,onChange:Se=>k(Se.target.value)})]}),i.jsx("input",{type:"hidden",value:B,readOnly:!0}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"% Ganancia Isla Ometepe"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:X,onChange:Se=>he(Se.target.value)})]})]})}),i.jsx("div",{className:`${Ue==="AGREGAR"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"border rounded p-3 bg-gray-50",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Categora (dinmica)"}),i.jsx("select",{className:"w-full border p-2 rounded",value:ce,onChange:Se=>{be(Se.target.value),We("")},disabled:A,children:vt.length===0?i.jsx("option",{value:"",children:A?"Cargando...":"No hay categoras en catlogo"}):vt.map(Se=>i.jsx("option",{value:Se,children:Se},Se))})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Producto (catlogo)"}),i.jsxs("select",{className:"w-full border p-2 rounded",value:Ve,onChange:Se=>We(Se.target.value),children:[i.jsx("option",{value:"",children:A?"Cargando catlogo...":"Selecciona producto"}),de.map(Se=>i.jsx("option",{value:Se.id,children:Se.name},Se.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Precio proveedor (paq)"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:pt,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Paquetes"}),i.jsx("input",{type:"number",min:0,className:"w-full border p-2 rounded",value:Rt,onChange:Se=>jt(Se.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold",children:"Unidades por paquete"}),i.jsx("input",{type:"number",className:"w-full border p-2 rounded bg-gray-100",value:Ct,readOnly:!0})]})]}),i.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-end gap-2 mt-3",children:i.jsx("button",{type:"button",onClick:Ye,className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Agregar producto"})})]})}),i.jsxs("div",{className:"hidden md:flex items-center justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:P,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",title:"Descarga plantilla (Productos + Config)",children:"Descargar plantilla"}),i.jsx("button",{type:"button",onClick:ue,disabled:G,className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",title:"Importa desde Excel (Productos + Config)",children:G?"Importando...":"Importar Excel"}),i.jsx("button",{type:"button",onClick:R,className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",title:"Exporta la orden actual (Productos + Resumen)",children:"Exportar Excel"})]}),i.jsx("div",{className:`${Ue==="ITEMS"?"block":"hidden"} md:block`,children:i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"mb-2 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Items:"," ",i.jsx("span",{className:"font-semibold",children:me.length}),ye.trim()?i.jsxs(i.Fragment,{children:[" "," Mostrando"," ",i.jsx("span",{className:"font-semibold",children:Ut.length})]}):null]}),i.jsx("input",{value:ye,onChange:Se=>oe(Se.target.value),placeholder:"Buscar producto o categora",className:"w-full md:w-80 border rounded px-3 py-2 text-sm"})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"overflow-x-auto border rounded pb-5",children:i.jsxs("table",{className:"min-w-[1400px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left p-2",children:"Categora"}),i.jsx("th",{className:"text-left p-2",children:"Producto"}),i.jsx("th",{className:"text-right p-2",children:"Paquetes"}),i.jsx("th",{className:"text-right p-2",children:"Restantes"}),i.jsx("th",{className:"text-right p-2",children:"Und x Paq"}),i.jsx("th",{className:"text-right p-2",children:"Precio prov"}),i.jsx("th",{className:"text-right p-2",children:"Facturado"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Esperado Isla"}),i.jsx("th",{className:"text-right p-2",children:"MV Rivas"}),i.jsx("th",{className:"text-right p-2",children:"MV Isla"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Rivas"}),i.jsx("th",{className:"text-right p-2",children:"U. Bruta Isla"}),i.jsx("th",{className:"text-right p-2",children:"Prorrateo"}),i.jsx("th",{className:"text-right p-2",children:"Precio Rivas"}),i.jsx("th",{className:"text-right p-2",children:"Precio Isla"}),i.jsx("th",{className:"text-center p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[xe.map(Se=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Se.category}),i.jsx("td",{className:"p-2 font-semibold",children:Se.name}),i.jsx("td",{className:"p-2 text-right",children:Pe[Se.id]?i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Se.packages,onChange:tt=>we(Se.id,"packages",tt.target.value),onBlur:()=>H(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&H(Se.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Se.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>M(Se.id),"aria-label":"Editar paquetes",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("span",{className:"inline-block min-w-[60px] text-right",children:Wn(Se.remainingPackages??Se.packages)})}),i.jsx("td",{className:"p-2 text-right",children:O[Se.id]?i.jsx("input",{type:"number",className:"w-20 border rounded p-1 text-right",value:Se.unitsPerPackage,onChange:tt=>we(Se.id,"unitsPerPackage",tt.target.value),onBlur:()=>ve(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&ve(Se.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Se.unitsPerPackage}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>te(Se.id),"aria-label":"Editar unidades por paquete",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.providerPrice||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:q[Se.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-16 border rounded p-1 text-right",value:Number(Se.marginRivas??0),onChange:tt=>we(Se.id,"marginRivas",tt.target.value),onBlur:()=>Ke(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&Ke(Se.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Number(Se.marginRivas??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>Q(Se.id),"aria-label":"Editar margen Rivas",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:W[Se.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-16 border rounded p-1 text-right",value:Number(Se.marginIsla??0),onChange:tt=>we(Se.id,"marginIsla",tt.target.value),onBlur:()=>ee(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&ee(Se.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{children:Number(Se.marginIsla??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ae(Se.id),"aria-label":"Editar margen Isla",children:""})]})}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.grossProfit||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.grossProfitIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.logisticAllocated||0).toFixed(2)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.unitPriceRivas||0)}),i.jsx("td",{className:"p-2 text-right",children:Number(Se.unitPriceIsla||0)}),i.jsx("td",{className:"p-2 text-center",children:i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>ft(Se.id),children:"Quitar"})})]},Se.id)),Ut.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:17,className:"p-4 text-center text-gray-500",children:"No hay productos en la orden."})})]})]})}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando"," ",Math.min((Mt-1)*st+1,Ut.length),"-",Math.min(Mt*st,Ut.length)," ","de ",Ut.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:Mt<=1,onClick:()=>Yt(Se=>Math.max(1,Se-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[Mt," / ",_e]}),i.jsx("button",{type:"button",disabled:Mt>=_e,onClick:()=>Yt(Se=>Math.min(_e,Se+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]}),i.jsx("div",{className:"md:hidden space-y-3",children:Ut.length===0?i.jsx("div",{className:"p-4 border rounded bg-gray-50 text-gray-600",children:"No hay productos en esta orden."}):Ut.map(Se=>i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base leading-tight truncate",children:Se.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:Se.category})]}),i.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ft(Se.id),children:"Quitar"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes"}),Pe[Se.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-full border p-2 rounded text-right",value:Se.packages,onChange:tt=>we(Se.id,"packages",tt.target.value),onBlur:()=>H(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&H(Se.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Se.packages}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>M(Se.id),"aria-label":"Editar paquetes",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Paquetes restantes"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Se.remainingPackages??Se.packages,readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Und x Paquete"}),O[Se.id]?i.jsx("input",{type:"number",step:"0.001",className:"w-full border p-2 rounded text-right",value:Se.unitsPerPackage,onChange:tt=>we(Se.id,"unitsPerPackage",tt.target.value),onBlur:()=>ve(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&ve(Se.id)},inputMode:"numeric",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Se.unitsPerPackage}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>te(Se.id),"aria-label":"Editar unidades por paquete",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"Precio proveedor"}),i.jsx("input",{className:"w-full border p-2 rounded text-right bg-gray-100",value:Number(Se.providerPrice||0).toFixed(2),readOnly:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Rivas (%)"}),q[Se.id]?i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Se.marginRivas??0,onChange:tt=>we(Se.id,"marginRivas",tt.target.value),onBlur:()=>Ke(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&Ke(Se.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Number(Se.marginRivas??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>Q(Se.id),"aria-label":"Editar margen Rivas",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-600",children:"MV Isla (%)"}),W[Se.id]?i.jsx("input",{type:"number",className:"w-full border p-2 rounded text-right",value:Se.marginIsla??0,onChange:tt=>we(Se.id,"marginIsla",tt.target.value),onBlur:()=>ee(Se.id),onKeyDown:tt=>{(tt.key==="Enter"||tt.key==="Escape")&&ee(Se.id)},inputMode:"decimal",autoFocus:!0}):i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"font-semibold",children:Number(Se.marginIsla??0).toFixed(3)}),i.jsx("button",{type:"button",className:"text-xs text-gray-600 hover:text-gray-900",onClick:()=>ae(Se.id),"aria-label":"Editar margen Isla",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Facturado"}),i.jsx("div",{className:"font-semibold",children:Number(Se.subtotal||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Se.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Se.totalIsla||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Prorrateo logstico"}),i.jsx("div",{className:"font-semibold",children:Number(Se.logisticAllocated||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Se.grossProfit||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Se.grossProfitIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Rivas (paq)"}),i.jsx("div",{className:"font-semibold",children:Se.unitPriceRivas})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Precio Isla (paq)"}),i.jsx("div",{className:"font-semibold",children:Se.unitPriceIsla})]})]})]},Se.id))})]})}),i.jsxs("div",{className:`${Ue==="TOTALES"?"block":"hidden"} md:block`,children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"text-lg font-semibold",children:He.totalPackages})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal costo (facturado)"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(He.subtotalCosto||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Esperado (Rivas / Isla)"}),i.jsxs("div",{className:"text-sm font-semibold",children:["Rivas: ",Number(He.esperadoRivas||0).toFixed(2),i.jsx("br",{}),"Isla: ",Number(He.esperadoIsla||0).toFixed(2)]})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos logsticos"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(He.gastosLogisticos||0).toFixed(2)})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Rivas"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(He.utilidadBrutaRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Isla"}),i.jsx("div",{className:"text-lg font-semibold",children:Number(He.utilidadBrutaIsla||0).toFixed(2)})]})]}),i.jsx("div",{className:"mt-3 border rounded p-3 bg-white",children:i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:R,disabled:!gt.items.length,title:"Exporta la orden actual (productos + resumen)",children:"Exportar orden a Excel"})})})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white pt-3 mt-4 border-t",children:[i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:Ce,className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Limpiar orden"}),i.jsx("button",{type:"button",onClick:()=>{Ce(),b(!1)},className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cerrar"}),i.jsx("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:o||me.length===0,children:o?"Guardando...":"Guardar orden"})]}),i.jsx("div",{className:"md:hidden mt-2",children:i.jsx("button",{type:"button",className:"w-full px-3 py-2 rounded bg-gray-100 hover:bg-gray-200 text-sm",onClick:()=>{Be(Ue==="DATOS"&&!w?"AGREGAR":Ue==="DATOS"||Ue==="AGREGAR"?"ITEMS":Ue==="ITEMS"?"TOTALES":"DATOS")},children:"Siguiente"})})]})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"md:hidden space-y-3",children:a?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Cargando"}):m.length===0?i.jsx("div",{className:"p-4 border rounded bg-white text-center",children:"Sin ordenes maestras."}):m.map(Se=>{const tt=x[Se.id],xt=rt(Se),kt=Se.totalPackages>0?(Se.subtotal/Se.totalPackages).toFixed(2):"0.00",tr=Number(Se.logisticsCost||0),nr=Number(Se.totalRivas||0)-Number(Se.subtotal||0);return i.jsxs("div",{className:"border rounded-xl p-3 bg-white shadow-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs text-gray-500",children:xt}),i.jsx("div",{className:"font-semibold text-base leading-tight",children:Se.name})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-xs",onClick:()=>Je(Se),children:"Ver"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white text-xs",onClick:()=>ht(Se),children:"Borrar"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-semibold",children:Se.totalPackages})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-semibold",children:tt?tt.remainingPackages:0})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"P. Proveedor"}),i.jsx("div",{className:"font-semibold",children:kt})]}),i.jsxs("div",{className:"p-2 rounded bg-gray-50 border",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Subtotal"}),i.jsx("div",{className:"font-semibold",children:Number(Se.subtotal||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Rivas"}),i.jsx("div",{className:"font-semibold",children:Number(Se.totalRivas||0).toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-blue-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Esperado Isla"}),i.jsx("div",{className:"font-semibold",children:Number(Se.totalIsla||0).toFixed(2)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2 text-xs",children:[i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"Gastos log."}),i.jsx("div",{className:"font-semibold",children:tr.toFixed(2)})]}),i.jsxs("div",{className:"p-2 rounded bg-emerald-50 border",children:[i.jsx("div",{className:"text-gray-600",children:"U. Bruta (est)"}),i.jsx("div",{className:"font-semibold",children:nr.toFixed(2)})]})]})]},Se.id)})}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full overflow-x-auto",children:[i.jsxs("table",{className:"min-w-[1100px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Precio Proveedor"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Esperado Rivas"}),i.jsx("th",{className:"p-2 border",children:"Esperado Isla"}),i.jsx("th",{className:"p-2 border",children:"Gastos log."}),i.jsx("th",{className:"p-2 border",children:"U. Bruta (est)"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Cargando"})}):m.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center",children:"Sin ordenes maestras."})}):Xe.map(Se=>{const tt=x[Se.id],xt=rt(Se),kt=Se.totalPackages>0?(Se.subtotal/Se.totalPackages).toFixed(2):"0.00",tr=Number(Se.logisticsCost||0),nr=Number(Se.totalRivas||0)-Number(Se.subtotal||0);return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:xt}),i.jsx("td",{className:"p-2 border text-left",children:Se.name}),i.jsx("td",{className:"p-2 border",children:Se.totalPackages}),i.jsx("td",{className:"p-2 border",children:tt?tt.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:kt}),i.jsx("td",{className:"p-2 border",children:Number(Se.subtotal||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(Se.totalRivas||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:Number(Se.totalIsla||0).toFixed(2)}),i.jsx("td",{className:"p-2 border",children:tr.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:nr.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsxs("div",{className:"flex gap-1 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>Je(Se),children:"Ver / Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>ht(Se),children:"Borrar"})]})})]},Se.id)})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",Math.min((Z-1)*Re+1,m.length),"-",Math.min(Z*Re,m.length)," de ",m.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",disabled:Z<=1,onClick:()=>Ne(Se=>Math.max(1,Se-1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Anterior"}),i.jsxs("div",{className:"px-3 py-1 border rounded text-sm",children:[Z," / ",ge]}),i.jsx("button",{type:"button",disabled:Z>=ge,onClick:()=>Ne(Se=>Math.min(ge,Se+1)),className:"px-2 py-1 rounded border disabled:opacity-50 text-sm",children:"Siguiente"})]})]})]})]})]})}const m0=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function z5(t){const e=Number(t.packages||0),r=Number(t.providerPrice||0),n=Number(t.unitsPerPackage||0),a=r*e,s=e>0&&n>0?e*n:1,o=Number(t.marginRivas||0),l=Number(t.marginSanJorge||0),c=Number(t.marginIsla||0),u=a*(1+o/100),d=a*(1+l/100),f=a*(1+c/100),A=u-a,h=d-a,m=f-a,p=u/s,x=d/s,v=f/s;return{...t,subtotal:Number(a.toFixed(2)),totalRivas:Number(u.toFixed(2)),totalSanJorge:Number(d.toFixed(2)),totalIsla:Number(f.toFixed(2)),gainRivas:Number(A.toFixed(2)),gainSanJorge:Number(h.toFixed(2)),gainIsla:Number(m.toFixed(2)),unitPriceRivas:Number(p.toFixed(2)),unitPriceSanJorge:Number(x.toFixed(2)),unitPriceIsla:Number(v.toFixed(2))}}function aG(t){return t.reduce((e,r)=>(e.totalPackages+=Number(r.packages||0),e.subtotal+=Number(r.subtotal||0),e.totalRivas+=Number(r.totalRivas||0),e.totalSanJorge+=Number(r.totalSanJorge||0),e.totalIsla+=Number(r.totalIsla||0),e),{totalPackages:0,subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0})}function Lc(t,e=0){const r=Number(t);return Number.isFinite(r)?r:e}function W5(t){const{margin:e,gain:r,subtotal:n,orderMargin:a}=t;if(e!=null&&Number.isFinite(Number(e)))return Number(e);const s=Number(n||0),o=Number(r);return Number.isFinite(o)&&s>0?o/s*100:Number(a||0)}function BQe(){var U,W,J;const[t,e]=g.useState([]),[r,n]=g.useState({}),[a,s]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState(Br(Pd(new Date),"yyyy-MM-dd")),[d,f]=g.useState(Br(jd(new Date),"yyyy-MM-dd")),[A,h]=g.useState(!1),[m,p]=g.useState(!1),[x,v]=g.useState(null),[y,b]=g.useState([]),[w,j]=g.useState(0),[I,_]=g.useState(0),[S,E]=g.useState(0),[F,k]=g.useState(""),[B,D]=g.useState(""),[X,he]=g.useState(0),[Ae,fe]=g.useState(0),[me,ne]=g.useState(1);g.useEffect(()=>{(async()=>{try{s(!0),l("");const M=ar(yt(ke,"candy_main_orders"),wn("createdAt","desc")),H=await Qt(M),te=[];H.forEach(Ke=>{const ae=Ke.data();te.push({id:Ke.id,name:ae.name??"",date:ae.date??"",totalPackages:Number(ae.totalPackages??0),subtotal:Number(ae.subtotal??0),totalRivas:Number(ae.totalRivas??0),totalSanJorge:Number(ae.totalSanJorge??0),totalIsla:Number(ae.totalIsla??0),marginRivas:Number(ae.marginRivas??0),marginSanJorge:Number(ae.marginSanJorge??0),marginIsla:Number(ae.marginIsla??0),createdAt:ae.createdAt??xr.now()})}),e(te);const ve=await Qt(ar(yt(ke,"inventory_candies"))),Q={};ve.forEach(Ke=>{const ae=Ke.data(),ee=ae.orderId;if(!ee)return;const Fe=Number(ae.unitsPerPackage||1)||1,ce=Number(ae.totalUnits??(ae.packages||0)*Fe),be=Math.round(ce/Fe),Ve=Number(ae.remaining??ae.totalUnits??ce),We=Number(ae.remainingPackages??NaN),pt=Number.isFinite(We)?Math.round(We):Math.round(Ve/Fe);Q[ee]||(Q[ee]={orderId:ee,totalPackages:0,remainingPackages:0}),Q[ee].totalPackages+=be,Q[ee].remainingPackages+=pt}),n(Q)}catch(M){console.error(M),l(" Error cargando inventario de pedidos.")}finally{s(!1)}})()},[]);const Pe=g.useMemo(()=>t.filter(M=>{var te;const H=M.date||((te=M.createdAt)!=null&&te.toDate?M.createdAt.toDate().toISOString().slice(0,10):"");return!(!H||c&&H<c||d&&H>d)}),[t,c,d]),Te=g.useMemo(()=>{let M=0,H=0,te=0,ve=0,Q=0,Ke=0;for(const ae of Pe){M+=ae.totalPackages,H+=ae.subtotal,te+=ae.totalRivas,ve+=ae.totalSanJorge,Q+=ae.totalIsla;const ee=r[ae.id];ee&&(Ke+=ee.remainingPackages)}return{totalPaquetes:M,totalSubtotal:H,totalRivas:te,totalSJ:ve,totalIsla:Q,totalPaquetesRestantes:Ke,totalPedidos:Pe.length}},[Pe,r]),O=async(M,H,te)=>{if(!x)return;const ve=Number(te||0),Q=y.map(ee=>ee.id!==M?ee:z5({...ee,[H]:ve}));b(Q);const Ke=Q.find(ee=>ee.id===M);if(!Ke)return;const ae=aG(Q);try{await _n(Jt(ke,"products_candies",M),{marginRivas:Ke.marginRivas,marginSanJorge:Ke.marginSanJorge,marginIsla:Ke.marginIsla,subtotal:Ke.subtotal,totalRivas:Ke.totalRivas,totalSanJorge:Ke.totalSanJorge,totalIsla:Ke.totalIsla,unitPriceRivas:Ke.unitPriceRivas,unitPriceSanJorge:Ke.unitPriceSanJorge,unitPriceIsla:Ke.unitPriceIsla,gainRivas:Ke.gainRivas,gainSanJorge:Ke.gainSanJorge,gainIsla:Ke.gainIsla}),await _n(Jt(ke,"candy_main_orders",x.id),{totalPackages:ae.totalPackages,subtotal:Number(ae.subtotal.toFixed(2)),totalRivas:Number(ae.totalRivas.toFixed(2)),totalSanJorge:Number(ae.totalSanJorge.toFixed(2)),totalIsla:Number(ae.totalIsla.toFixed(2))}),v(ee=>ee&&{...ee,totalPackages:ae.totalPackages,subtotal:Number(ae.subtotal.toFixed(2)),totalRivas:Number(ae.totalRivas.toFixed(2)),totalSanJorge:Number(ae.totalSanJorge.toFixed(2)),totalIsla:Number(ae.totalIsla.toFixed(2))}),l(" Mrgenes del producto actualizados.")}catch(ee){console.error(ee),l(" Error actualizando mrgenes del producto.")}},K=async()=>{if(x)try{l("");const M=Number.isFinite(w)&&w!==0?w:x.marginRivas||0,H=Number.isFinite(I)&&I!==0?I:x.marginSanJorge||0,te=Number.isFinite(S)&&S!==0?S:x.marginIsla||0,ve=z5({id:"tmp",name:F.trim(),category:B.trim(),providerPrice:Number(X||0),packages:Number(Ae||0),unitsPerPackage:Number(me||1),marginRivas:Number(M||0),marginSanJorge:Number(H||0),marginIsla:Number(te||0),subtotal:0,totalRivas:0,totalSanJorge:0,totalIsla:0,gainRivas:0,gainSanJorge:0,gainIsla:0,unitPriceRivas:0,unitPriceSanJorge:0,unitPriceIsla:0,remainingPackages:Number(Ae||0)}),Q=await $n(yt(ke,"products_candies"),{orderId:x.id,inventoryDate:x.date||"",name:ve.name,category:ve.category,providerPrice:ve.providerPrice,packages:ve.packages,unitsPerPackage:ve.unitsPerPackage,marginRivas:ve.marginRivas,marginSanJorge:ve.marginSanJorge,marginIsla:ve.marginIsla,gainRivas:ve.gainRivas,gainSanJorge:ve.gainSanJorge,gainIsla:ve.gainIsla,subtotal:ve.subtotal,totalRivas:ve.totalRivas,totalSanJorge:ve.totalSanJorge,totalIsla:ve.totalIsla,unitPriceRivas:ve.unitPriceRivas,unitPriceSanJorge:ve.unitPriceSanJorge,unitPriceIsla:ve.unitPriceIsla,createdAt:xr.now()}),ae=[{...ve,id:Q.id},...y];b(ae);const ee=aG(ae);await _n(Jt(ke,"candy_main_orders",x.id),{totalPackages:ee.totalPackages,subtotal:Number(ee.subtotal.toFixed(2)),totalRivas:Number(ee.totalRivas.toFixed(2)),totalSanJorge:Number(ee.totalSanJorge.toFixed(2)),totalIsla:Number(ee.totalIsla.toFixed(2))}),v(Fe=>Fe&&{...Fe,totalPackages:ee.totalPackages,subtotal:Number(ee.subtotal.toFixed(2)),totalRivas:Number(ee.totalRivas.toFixed(2)),totalSanJorge:Number(ee.totalSanJorge.toFixed(2)),totalIsla:Number(ee.totalIsla.toFixed(2))}),j(0),_(0),E(0),k(""),D(""),he(0),fe(0),ne(1),l(" Producto agregado con mrgenes por sucursal.")}catch(M){console.error(M),l(" Error agregando producto al pedido.")}},q=async M=>{try{v(M),b([]),h(!0),p(!0),l("");const H=await Qt(ar(yt(ke,"inventory_candies"),mr("orderId","==",M.id))),te={};H.forEach(Ke=>{const ae=Ke.data(),ee=ae.productId;if(!ee)return;const Fe=Number(ae.unitsPerPackage||1)||1,ce=Number(ae.remaining??ae.totalUnits??0),be=Number(ae.remainingPackages??NaN),Ve=Number.isFinite(be)?Math.round(be):Math.round(ce/Fe);te[ee]=(te[ee]||0)+Ve});const ve=await Qt(ar(yt(ke,"products_candies"),mr("orderId","==",M.id))),Q=[];ve.forEach(Ke=>{const ae=Ke.data(),ee=Lc(ae.providerPrice,0),Fe=Lc(ae.packages,0),ce=ae.subtotal??ee*Fe,be=W5({margin:ae.marginRivas,gain:ae.gainRivas,subtotal:ce,orderMargin:M.marginRivas||0}),Ve=W5({margin:ae.marginSanJorge,gain:ae.gainSanJorge,subtotal:ce,orderMargin:M.marginSanJorge||0}),We=W5({margin:ae.marginIsla,gain:ae.gainIsla,subtotal:ce,orderMargin:M.marginIsla||0}),pt=z5({id:Ke.id,name:ae.name??"",category:ae.category??"",providerPrice:ee,packages:Fe,unitsPerPackage:Lc(ae.unitsPerPackage,1),marginRivas:Number(be||0),marginSanJorge:Number(Ve||0),marginIsla:Number(We||0),subtotal:Lc(ae.subtotal,0),totalRivas:Lc(ae.totalRivas,0),totalSanJorge:Lc(ae.totalSanJorge,0),totalIsla:Lc(ae.totalIsla,0),gainRivas:Lc(ae.gainRivas,0),gainSanJorge:Lc(ae.gainSanJorge,0),gainIsla:Lc(ae.gainIsla,0),unitPriceRivas:Lc(ae.unitPriceRivas,0),unitPriceSanJorge:Lc(ae.unitPriceSanJorge,0),unitPriceIsla:Lc(ae.unitPriceIsla,0),remainingPackages:te[Ke.id]??Lc(ae.packages,0)});Q.push(pt)}),b(Q)}catch(H){console.error(H),l(" Error cargando productos del pedido.")}finally{p(!1)}};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Inventario Ordenes Maestras"})}),i.jsxs("div",{className:"bg-white p-3 rounded shadow border mb-4 flex flex-wrap items-end gap-3 text-sm",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:c,onChange:M=>u(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:d,onChange:M=>f(M.target.value)})]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{u(""),f("")},children:"Quitar filtro"}),i.jsxs("div",{className:"ml-auto text-xs md:text-sm text-gray-600",children:["Cantidad de pedidos:"," ",i.jsx("span",{className:"font-semibold",children:Te.totalPedidos})]})]}),i.jsx("div",{className:"bg-gray-50 p-3 rounded shadow border mb-3 text-sm md:text-base",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-y-2 gap-x-8",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes totales:"})," ",Te.totalPaquetes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes restantes:"})," ",Te.totalPaquetesRestantes]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Subtotal total:"})," ",m0(Te.totalSubtotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Rivas (todo):"})," ",m0(Te.totalRivas)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total San Jorge (todo):"})," ",m0(Te.totalSJ)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total Isla (todo):"})," ",m0(Te.totalIsla)]})]})}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full overflow-x-auto mt-2",children:i.jsxs("table",{className:"min-w-[900px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Nombre"}),i.jsx("th",{className:"p-2 border",children:"Paquetes totales"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. prom. San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. prom. Isla"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:a?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):Pe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin pedidos generales en este rango."})}):Pe.map(M=>{var ae;const H=M.totalPackages>0?Math.round(M.totalRivas/M.totalPackages):0,te=M.totalPackages>0?Math.round(M.totalSanJorge/M.totalPackages):0,ve=M.totalPackages>0?Math.round(M.totalIsla/M.totalPackages):0,Q=M.date||((ae=M.createdAt)!=null&&ae.toDate?M.createdAt.toDate().toISOString().slice(0,10):""),Ke=r[M.id];return i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:Q}),i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.totalPackages}),i.jsx("td",{className:"p-2 border",children:Ke?Ke.remainingPackages:0}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:H}),i.jsx("td",{className:"p-2 border",children:te}),i.jsx("td",{className:"p-2 border",children:ve}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700 text-xs",onClick:()=>q(M),children:"Ver pedido"})})]},M.id)})})]})}),A&&x&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-5xl max-h-[90vh] overflow-y-auto text-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"text-xl font-bold",children:["Detalle: ",x.name]}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:()=>{h(!1),v(null),b([]),l("")},children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4 text-xs md:text-sm",children:[i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Fecha del pedido"}),i.jsx("div",{className:"font-semibold",children:x.date||((U=x.createdAt)!=null&&U.toDate?x.createdAt.toDate().toISOString().slice(0,10):"")})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes totales"}),i.jsx("div",{className:"font-semibold",children:((W=r[x.id])==null?void 0:W.totalPackages)??x.totalPackages})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Paquetes restantes"}),i.jsx("div",{className:"font-semibold",children:((J=r[x.id])==null?void 0:J.remainingPackages)??0})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Subtotal (proveedor)"}),i.jsx("div",{className:"font-semibold",children:m0(x.subtotal)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Rivas"}),i.jsx("div",{className:"font-semibold",children:m0(x.totalRivas)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total San Jorge"}),i.jsx("div",{className:"font-semibold",children:m0(x.totalSanJorge)})]}),i.jsxs("div",{className:"p-2 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-gray-600",children:"Total Isla"}),i.jsx("div",{className:"font-semibold",children:m0(x.totalIsla)})]})]}),i.jsxs("div",{className:"bg-white border rounded p-3 mb-4",children:[i.jsx("div",{className:"font-semibold mb-2",children:"Agregar producto"}),i.jsxs("div",{className:"flex flex-wrap gap-2 items-end text-xs",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Rivas"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:w,onChange:M=>j(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen SJ"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:I,onChange:M=>_(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Margen Isla"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-28 text-right",value:S,onChange:M=>E(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Producto"}),i.jsx("input",{className:"border rounded px-2 py-1 w-56",value:F,onChange:M=>k(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Categora"}),i.jsx("input",{className:"border rounded px-2 py-1 w-40",value:B,onChange:M=>D(M.target.value)})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"P. proveedor (paq)"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-32 text-right",value:X,onChange:M=>he(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Paquetes"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:Ae,onChange:M=>fe(Number(M.target.value||0))})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"text-gray-600",children:"Und x Paq"}),i.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-right",value:me,onChange:M=>ne(Number(M.target.value||1))})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:K,children:"Agregar producto"})]})]}),i.jsx("h4",{className:"font-semibold mb-2",children:"Productos del pedido"}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] text-xs md:text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Categora"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Paquetes restantes"}),i.jsx("th",{className:"p-2 border",children:"Und x Paq"}),i.jsx("th",{className:"p-2 border",children:"P. proveedor (paq)"}),i.jsx("th",{className:"p-2 border",children:"Margen Rivas (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen San Jorge (%)"}),i.jsx("th",{className:"p-2 border",children:"Margen Isla (%)"}),i.jsx("th",{className:"p-2 border",children:"Subtotal"}),i.jsx("th",{className:"p-2 border",children:"Total Rivas"}),i.jsx("th",{className:"p-2 border",children:"Total San Jorge"}),i.jsx("th",{className:"p-2 border",children:"Total Isla"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Rivas"}),i.jsx("th",{className:"p-2 border",children:"P. unidad San Jorge"}),i.jsx("th",{className:"p-2 border",children:"P. unidad Isla"})]})}),i.jsx("tbody",{children:m?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Cargando productos"})}):y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:16,className:"p-4 text-center",children:"Este pedido no tiene productos registrados."})}):y.map(M=>i.jsxs("tr",{className:"text-center whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:M.name}),i.jsx("td",{className:"p-2 border",children:M.category}),i.jsx("td",{className:"p-2 border",children:M.packages}),i.jsx("td",{className:"p-2 border",children:M.remainingPackages??M.packages}),i.jsx("td",{className:"p-2 border",children:M.unitsPerPackage}),i.jsx("td",{className:"p-2 border",children:M.providerPrice.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginRivas??0,onChange:H=>O(M.id,"marginRivas",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginSanJorge??0,onChange:H=>O(M.id,"marginSanJorge",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"number",className:"w-20 border rounded px-1 py-0.5 text-right text-xs",value:M.marginIsla??0,onChange:H=>O(M.id,"marginIsla",H.target.value)})}),i.jsx("td",{className:"p-2 border",children:M.subtotal.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalRivas.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalSanJorge.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.totalIsla.toFixed(2)}),i.jsx("td",{className:"p-2 border",children:M.unitPriceRivas}),i.jsx("td",{className:"p-2 border",children:M.unitPriceSanJorge}),i.jsx("td",{className:"p-2 border",children:M.unitPriceIsla})]},M.id))})]})}),o&&i.jsx("p",{className:"mt-3 text-sm",children:o})]})}),o&&!A&&i.jsx("p",{className:"mt-2 text-sm",children:o})]})}const ss=t=>Math.round((Number(t)||0)*100)/100,mx=t=>Math.round((Number(t)||0)*1e3)/1e3,sl=t=>Number(t??0).toFixed(2),Ym=t=>Number(t??0).toFixed(3);async function TQe(t){if(!t)return;const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}const kQe=(t,e)=>{var h;const r=t.date??((h=t.timestamp)!=null&&h.toDate?Br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0,u=t.processedDate??t.closureDate??"";if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((m,p)=>{const x=Number((m==null?void 0:m.packages)??(m==null?void 0:m.qty)??(m==null?void 0:m.quantity)??0),v=Number((m==null?void 0:m.lineFinal)??0)||Math.max(0,Number((m==null?void 0:m.unitPricePackage)||(m==null?void 0:m.unitPrice)||0)*x-Number((m==null?void 0:m.discount)||0));let y=0;return c>0&&l>0&&Number(v||0)>0&&(y=ss(c*Number(v||0)/l)),{id:`${e}#${p}`,productName:String((m==null?void 0:m.productName)??"(sin nombre)"),quantity:x,amount:ss(v),amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:Array.isArray(m==null?void 0:m.allocations)?m.allocations:t.allocations,avgUnitCost:Number((m==null?void 0:m.avgUnitCost)??t.avgUnitCost??0),cogsAmount:Number((m==null?void 0:m.cogsAmount)??0),type:s,vendorId:o,vendorCommissionAmount:y,processedDate:u||""}});const d=Number(t.packagesTotal??t.quantity??0),f=Number(t.amount??t.amountCharged??t.total??0)||0;let A=0;return A=ss(Number(t.vendorCommissionAmount??0)||0),[{id:e,productName:t.productName??"(sin nombre)",quantity:d,amount:f,amountSuggested:Number(t.amountSuggested??0),date:r,userEmail:a,sellerEmail:n,clientName:t.clientName??"",amountReceived:Number(t.amountReceived??0),change:String(t.change??"0"),status:t.status??"FLOTANTE",allocations:t.allocations,avgUnitCost:t.avgUnitCost,cogsAmount:t.cogsAmount,type:s,vendorId:o,vendorCommissionAmount:A,processedDate:u||""}]};function FQe({role:t,currentUserEmail:e,sellerCandyId:r,roles:n}){const[a,s]=g.useState([]),[o,l]=g.useState(null),[c,u]=g.useState(!0),[d,f]=g.useState(""),[A,h]=g.useState("ALL"),m=Br(new Date,"yyyy-MM-dd"),[p,x]=g.useState(m),[v,y]=g.useState(m),[b,w]=g.useState("ALL"),[j,I]=g.useState(null),[_,S]=g.useState(0),[E,F]=g.useState(0),[k,B]=g.useState(""),[D,X]=g.useState(0),[he,Ae]=g.useState("0"),fe=g.useRef(null),me=n&&n.length?n:t,ne=!me||xn(me,"admin"),Pe=xn(me,"vendedor_dulces"),Te=(e||"").trim().toLowerCase(),[O,K]=g.useState([]);g.useEffect(()=>{if(!p||!v)return;u(!0);const Z=ar(yt(ke,"sales_candies"),mr("date",">=",p),mr("date","<=",v),wn("date","asc")),Ne=vd(Z,Re=>{const ge=[];Re.forEach(Xe=>{const vt=kQe(Xe.data(),Xe.id);ge.push(...vt)}),s(ge),u(!1)},Re=>{console.error("Error cargando ventas por periodo:",Re),s([]),u(!1)});return()=>Ne()},[p,v]),g.useEffect(()=>{(async()=>{const Ne=ar(yt(ke,"daily_closures_candies"),mr("date","==",m)),Re=await Qt(Ne);if(Re.empty)l(null);else{const ge=Re.docs[0];l({id:ge.id,...ge.data()})}})()},[m]),g.useEffect(()=>{(async()=>{try{const Ne=await Qt(yt(ke,"sellers_candies")),Re=[];Ne.forEach(ge=>{const Xe=ge.data();Re.push({id:ge.id,name:Xe.name||"",commissionPercent:Number(Xe.commissionPercent||0)})}),K(Re)}catch(Ne){console.error("Error cargando sellers_candies",Ne)}})()},[]);const q=Z=>ss(Number(Z.vendorCommissionAmount??0)||0),U=$o.useMemo(()=>{let Z=[...a];return A==="FLOTANTE"&&(Z=Z.filter(Ne=>Ne.status==="FLOTANTE")),A==="PROCESADA"&&(Z=Z.filter(Ne=>Ne.status==="PROCESADA")),ne&&b!=="ALL"&&(Z=Z.filter(Ne=>(Ne.vendorId||"")===b)),Pe&&(r?Z=Z.filter(Ne=>(Ne.vendorId||"")===r):Te?Z=Z.filter(Ne=>(Ne.sellerEmail||"").toLowerCase()===Te):Z=[]),Z},[A,a,ne,b,Pe,r,Te]),W=$o.useMemo(()=>U.filter(Z=>Z.status==="FLOTANTE").length,[U]),J=$o.useMemo(()=>U.filter(Z=>Z.status==="PROCESADA").length,[U]),M=$o.useMemo(()=>U.filter(Z=>Z.type==="CREDITO").length,[U]),H=$o.useMemo(()=>U.filter(Z=>Z.type!=="CREDITO").length,[U]),te=mx(U.reduce((Z,Ne)=>Z+(Ne.quantity||0),0)),ve=ss(U.reduce((Z,Ne)=>Z+Number(Ne.cogsAmount??0),0)),Q=ss(U.reduce((Z,Ne)=>Z+(Ne.amount||0),0)),Ke=ss(Q-ve);let ae=0,ee=0,Fe=0,ce=0,be=0,Ve=0,We=0;U.forEach(Z=>{const Ne=Number(Z.amount||0),Re=Number(Z.amountReceived||0),ge=q(Z);be+=ge,Z.type==="CREDITO"?(ae+=Z.quantity||0,Fe+=Ne-Re,We+=ge):(ee+=Z.quantity||0,ce+=Ne,Ve+=ge)}),Fe=ss(Fe),ce=ss(ce),be=ss(be),Ve=ss(Ve),We=ss(We);const pt=$o.useMemo(()=>{const Z={};for(const Ne of U){const Re=(Ne.vendorId||"").trim();if(!Re||Ne.type==="CREDITO")continue;const ge=q(Ne);if(!Z[Re]){const Xe=O.find(vt=>vt.id===Re);Z[Re]={vendorId:Re,name:(Xe==null?void 0:Xe.name)||Ne.userEmail||"(sin vendedor)",total:0}}Z[Re].total=ss(Z[Re].total+ge)}return Object.values(Z).filter(Ne=>Ne.total>0).sort((Ne,Re)=>Re.total-Ne.total)},[U,O]),wt=$o.useMemo(()=>{const Z={};for(const Ne of U){const Re=(Ne.vendorId||"").trim();if(!Re||Ne.type!=="CREDITO")continue;const ge=q(Ne);if(!Z[Re]){const Xe=O.find(vt=>vt.id===Re);Z[Re]={vendorId:Re,name:(Xe==null?void 0:Xe.name)||Ne.userEmail||"(sin vendedor)",total:0}}Z[Re].total=ss(Z[Re].total+ge)}return Object.values(Z).filter(Ne=>Ne.total>0).sort((Ne,Re)=>Re.total-Ne.total)},[U,O]),Ct={};U.forEach(Z=>{const Ne=Z.productName||"(sin nombre)";Ct[Ne]||(Ct[Ne]={totalQuantity:0,totalAmount:0,totalCommission:0}),Ct[Ne].totalQuantity=mx(Ct[Ne].totalQuantity+(Z.quantity||0)),Ct[Ne].totalAmount=ss(Ct[Ne].totalAmount+(Z.amount||0)),Ct[Ne].totalCommission=ss(Ct[Ne].totalCommission+q(Z))});const St=Object.entries(Ct).map(([Z,Ne])=>({productName:Z,totalQuantity:Ne.totalQuantity,totalAmount:Ne.totalAmount,totalCommission:Ne.totalCommission})),Rt=async()=>{if(ne)try{const Z=U.filter(Ce=>Ce.status==="FLOTANTE");if(Z.length===0){f("No hay ventas flotantes para procesar en este perodo.");return}const Ne={totalCharged:ss(Z.reduce((Ce,Ye)=>Ce+(Ye.amount||0),0)),totalSuggested:ss(Z.reduce((Ce,Ye)=>Ce+(Ye.amountSuggested||0),0)),totalUnits:mx(Z.reduce((Ce,Ye)=>Ce+(Ye.quantity||0),0)),totalCOGS:ss(Z.reduce((Ce,Ye)=>Ce+Number(Ye.cogsAmount??0),0))},Re=ss(Ne.totalCharged-Ne.totalSuggested),ge=ss(Ne.totalCharged-Ne.totalCOGS),Xe=Z.reduce((Ce,Ye)=>{const ft=Number(Ye.quantity||0),we=Number(Ye.amount||0),Le=Number(Ye.vendorCommissionAmount||0);return Ye.type==="CREDITO"?(Ce.packsCredit+=ft,Ce.amountCredit+=we,Ce.comCredit+=Le):(Ce.packsCash+=ft,Ce.amountCash+=we,Ce.comCash+=Le),Ce},{packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0}),vt={totalPacksCash:mx(Xe.packsCash),totalPacksCredit:mx(Xe.packsCredit),totalAmountCash:ss(Xe.amountCash),totalAmountCredit:ss(Xe.amountCredit),totalCommissionCash:ss(Xe.comCash),totalCommissionCredit:ss(Xe.comCredit)},it=await $n(yt(ke,"daily_closures_candies"),{date:m,createdAt:xr.now(),periodStart:p,periodEnd:v,totalCharged:Ne.totalCharged,totalSuggested:Ne.totalSuggested,totalDifference:Re,totalUnits:Ne.totalUnits,totalCOGS:Ne.totalCOGS,grossProfit:ge,...vt,products:Z.map(Ce=>({productName:Ce.productName,quantity:Ce.quantity,amount:Ce.amount})),sales:Z.map(Ce=>({id:Ce.id,productName:Ce.productName,quantity:Ce.quantity,amount:Ce.amount,amountSuggested:Ce.amountSuggested,userEmail:Ce.userEmail,clientName:Ce.clientName,amountReceived:Ce.amountReceived,change:Ce.change,status:Ce.status,cogsAmount:Ce.cogsAmount??0,avgUnitCost:Ce.avgUnitCost??null,allocations:Ce.allocations??[],date:Ce.date,type:Ce.type??"CONTADO",vendorId:Ce.vendorId??"",vendorCommissionAmount:Number(Ce.vendorCommissionAmount??0)||0,processedDate:m})),productSummary:Object.entries(Z.reduce((Ce,Ye)=>{const ft=Ye.productName||"(sin nombre)";return Ce[ft]||(Ce[ft]={totalQuantity:0,totalAmount:0}),Ce[ft].totalQuantity=mx(Ce[ft].totalQuantity+(Ye.quantity||0)),Ce[ft].totalAmount=ss(Ce[ft].totalAmount+(Ye.amount||0)),Ce},{})).map(([Ce,Ye])=>({productName:Ce,totalQuantity:Ye.totalQuantity,totalAmount:Ye.totalAmount}))}),de=cf(ke);Z.forEach(Ce=>{de.update(Jt(ke,"sales_candies",Ce.id.split("#")[0]),{status:"PROCESADA",closureId:it.id,closureDate:m,processedDate:m,processedAt:xr.now()})}),await de.commit(),f(` Cierre guardado. Ventas procesadas: ${Z.length}. (Proceso: ${m})`)}catch(Z){console.error(Z),f(" Error al guardar el cierre de dulces.")}},jt=async Z=>{if(ne&&window.confirm("Revertir esta venta? Esta accin no se puede deshacer."))try{await _n(Jt(ke,"sales_candies",Z.split("#")[0]),{status:"FLOTANTE",closureId:null,closureDate:null,processedDate:null,processedAt:null}),f(" Venta revertida a FLOTANTE.")}catch(Ne){console.error(Ne),f(" No se pudo revertir la venta.")}},Ue=Z=>{ne&&(I(Z),S(Z.quantity),F(Z.amount),B(Z.clientName),X(Z.amountReceived),Ae(Z.change))},Be=async()=>{if(!(!j||!ne))try{await _n(Jt(ke,"sales_candies",j.id.split("#")[0]),{packagesTotal:_,amount:E,amountCharged:E,clientName:k,amountReceived:D,change:he}),I(null),f(" Venta de dulces actualizada.")}catch(Z){console.error(Z),f(" No se pudo actualizar la venta de dulces.")}},ye=async Z=>{if(ne&&window.confirm("Eliminar esta venta? Se restaurar el stock (paquetes) en los lotes asignados."))try{const Ne=Z.split("#")[0],{restored:Re}=await Y9e(Ne);await TQe(Ne),f(` Venta eliminada. Stock restaurado (unidades internas): ${Number(Re).toFixed(2)}. Estado de cuenta ajustado.`)}catch(Ne){console.error(Ne),f(" No se pudo eliminar la venta de dulces.")}},oe=async()=>{if(fe.current){fe.current.classList.add("force-pdf-colors"),fe.current.classList.add("pdf-print-mode");try{const Ne=(await jg(fe.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),Re=new qr;Re.addImage(Ne,"PNG",10,10,190,0),Re.save(`cierre_dulces_${p}_a_${v}_proc_${m}.pdf`)}finally{fe.current.classList.remove("pdf-print-mode"),fe.current.classList.remove("force-pdf-colors")}}};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("style",{children:`
        .pdf-print-mode .pdf-desktop { display: block !important; }
        .pdf-print-mode .pdf-mobile  { display: none !important; }
      `}),i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Cierre de Ventas de Dulces - Proceso: ",m]}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Desde:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:p,onChange:Z=>x(Z.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Hasta:"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:v,onChange:Z=>y(Z.target.value)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Filtrar:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:A,onChange:Z=>h(Z.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Venta Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Venta Procesada"})]})]}),ne&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm",children:"Vendedor:"}),i.jsxs("select",{className:"border rounded px-2 py-1",value:b,onChange:Z=>w(Z.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),O.map(Z=>i.jsx("option",{value:Z.id,children:Z.name||Z.id},Z.id))]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas flotantes"}),i.jsx("div",{className:"text-2xl font-bold",children:W}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas procesadas"}),i.jsx("div",{className:"text-2xl font-bold",children:J}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:M}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsx("div",{className:"text-2xl font-bold",children:H}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",sl(Ve)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito (perodo)"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",sl(We)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Perodo: ",p,"  ",v]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CASH del perodo)"}),pt.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:pt.map(Z=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:Z.name}),i.jsxs("strong",{className:"ml-2",children:["C$",sl(Z.total)]})]},Z.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin CRDITO del perodo)"}),wt.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:wt.map(Z=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:Z.name}),i.jsxs("strong",{className:"ml-2",children:["C$",sl(Z.total)]})]},Z.vendorId))})]})]}),c?i.jsx("p",{children:"Cargando ventas..."}):i.jsxs("div",{ref:fe,children:[i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-4 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Estado"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"}),i.jsx("th",{className:"border p-2",children:"Fecha proceso"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Acciones"})]})}),i.jsxs("tbody",{children:[U.map(Z=>{const Ne=q(Z),Re=(Z.processedDate||"").trim();return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${Z.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Z.status})}),i.jsx("td",{className:"border p-1",children:Z.productName}),i.jsx("td",{className:"border p-1",children:Z.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Ym(Z.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",sl(Z.amount)]}),i.jsx("td",{className:"border p-1",children:Ne>0?`C$${sl(Ne)}`:""}),i.jsx("td",{className:"border p-1",children:Z.date}),i.jsx("td",{className:"border p-1",children:Re||""}),i.jsx("td",{className:"border p-1",children:Z.userEmail}),i.jsx("td",{className:"border p-1",children:Z.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2 justify-center",children:ne?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ue(Z),className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>ye(Z.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):Z.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2 justify-center",children:ne?i.jsx("button",{onClick:()=>jt(Z.id),className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("span",{className:"text-gray-400 text-xs",children:""})}):i.jsx("span",{className:"text-gray-400 text-xs",children:"No options"})})]},Z.id)}),U.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"p-3 text-center text-gray-500",children:"Sin ventas para mostrar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-3 mb-4",children:[U.map(Z=>{const Ne=q(Z),Re=(Z.processedDate||"").trim();return i.jsxs("details",{className:"border rounded-xl bg-white shadow-sm",children:[i.jsxs("summary",{className:"px-4 py-3 flex justify-between items-center cursor-pointer",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:Z.productName}),i.jsxs("div",{className:"text-xs text-gray-500",children:[Z.type==="CREDITO"?"Crdito":"Cash","  ",Z.date]})]}),i.jsxs("div",{className:"text-right shrink-0 ml-3",children:[i.jsxs("div",{className:"font-bold",children:["C$",sl(Z.amount)]}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${Z.status==="PROCESADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:Z.status})]})]}),i.jsxs("div",{className:"px-4 pb-4 pt-2 text-sm space-y-2",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Paquetes"}),i.jsx("strong",{children:Ym(Z.quantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:Ne>0?`C$${sl(Ne)}`:""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha proceso"}),i.jsx("strong",{children:Re||""})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Vendedor"}),i.jsx("strong",{className:"text-right break-all",children:Z.userEmail})]}),i.jsx("div",{className:"pt-2",children:Z.status==="FLOTANTE"?i.jsx("div",{className:"flex gap-2",children:ne?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ue(Z),className:"flex-1 text-xs bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700",children:"Editar"}),i.jsx("button",{onClick:()=>ye(Z.id),className:"flex-1 text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Eliminar"})]}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):Z.status==="PROCESADA"?i.jsx("div",{className:"flex gap-2",children:ne?i.jsx("button",{onClick:()=>jt(Z.id),className:"w-full text-xs bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Revertir"}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:""})}):i.jsx("div",{className:"text-gray-400 text-xs w-full text-center",children:"No options"})})]})]},Z.id)}),U.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin ventas para mostrar."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{children:["Total paquetes crdito: ",i.jsx("strong",{children:Ym(ae)})]}),i.jsxs("div",{children:["Total paquetes cash: ",i.jsx("strong",{children:Ym(ee)})]}),i.jsxs("div",{children:["Total pendiente crdito:"," ",i.jsxs("strong",{children:["C$",sl(Fe)]})]}),i.jsxs("div",{children:["Total cobrado cash: ",i.jsxs("strong",{children:["C$",sl(ce)]})]}),i.jsxs("div",{children:["Total comisin: ",i.jsxs("strong",{children:["C$",sl(be)]})]})]}),(ve>0||Ke!==Q)&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-6",children:[i.jsxs("div",{children:["Costo total (COGS): ",i.jsxs("strong",{children:["C$",sl(ve)]})]}),i.jsxs("div",{children:["Ganancia antes de gasto:"," ",i.jsxs("strong",{children:["C$",sl(Ke)]})]}),i.jsxs("div",{children:["Total paquetes (visibles):"," ",i.jsx("strong",{children:Ym(te)})]})]}),i.jsx("h3",{className:"font-semibold mb-2",children:"Consolidado por producto"}),i.jsx("div",{className:"pdf-desktop hidden md:block",children:i.jsxs("table",{className:"min-w-full border text-sm mb-2 shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero"}),i.jsx("th",{className:"border p-2",children:"Comisin"})]})}),i.jsxs("tbody",{children:[St.map(Z=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Z.productName}),i.jsx("td",{className:"border p-1",children:Ym(Z.totalQuantity)}),i.jsxs("td",{className:"border p-1",children:["C$",sl(Z.totalAmount)]}),i.jsx("td",{className:"border p-1",children:Z.totalCommission>0?`C$${sl(Z.totalCommission)}`:""})]},Z.productName)),St.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin datos para consolidar."})})]})]})}),i.jsxs("div",{className:"pdf-mobile md:hidden space-y-2",children:[St.map(Z=>i.jsxs("div",{className:"border rounded-xl bg-white shadow-sm p-3",children:[i.jsx("div",{className:"font-semibold",children:Z.productName}),i.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total paquetes"}),i.jsx("strong",{children:Ym(Z.totalQuantity)})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Total dinero"}),i.jsxs("strong",{children:["C$",sl(Z.totalAmount)]})]}),i.jsxs("div",{className:"flex justify-between gap-3",children:[i.jsx("span",{className:"text-gray-600",children:"Comisin"}),i.jsx("strong",{children:Z.totalCommission>0?`C$${sl(Z.totalCommission)}`:""})]})]})]},Z.productName)),St.length===0&&i.jsx("div",{className:"text-center text-gray-500 text-sm py-6",children:"Sin datos para consolidar."})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[ne&&i.jsx("button",{onClick:Rt,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Cerrar ventas del perodo"}),i.jsx("button",{onClick:oe,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Descargar PDF"})]}),d&&i.jsx("p",{className:"mt-2 text-sm",children:d}),j&&ne&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-4 space-y-3",children:[i.jsx("h4",{className:"font-semibold text-lg",children:"Editar venta de dulces"}),i.jsxs("div",{className:"text-sm text-gray-500",children:[j.productName,"  ",j.userEmail]}),i.jsx("label",{className:"text-sm",children:"Paquetes"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:_,onChange:Z=>S(parseFloat(Z.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Monto cobrado"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:E,onChange:Z=>F(parseFloat(Z.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Cliente"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:k,onChange:Z=>B(Z.target.value)}),i.jsx("label",{className:"text-sm",children:"Paga con"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:D,onChange:Z=>X(parseFloat(Z.target.value||"0"))}),i.jsx("label",{className:"text-sm",children:"Vuelto"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:he,onChange:Z=>Ae(Z.target.value)}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{onClick:()=>I(null),className:"px-3 py-1 border rounded",children:"Cancelar"}),i.jsx("button",{onClick:Be,className:"px-3 py-1 rounded text-white bg-indigo-600 hover:bg-indigo-700",children:"Guardar cambios"})]})]})})]})}const jh=t=>`C$ ${(Number(t)||0).toFixed(2)}`,Au=t=>Math.round((Number(t)||0)*100)/100;function OQe(t){if(!t)return"";switch(t){case"RIVAS":return"Rivas";case"SAN_JORGE":return"San Jorge";case"ISLA":return"Isla de Ometepe";default:return""}}function DQe(t){return t.toISOString().slice(0,10)}function RQe(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-01`}function MQe(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth()+1,1),r=new Date(e.getTime()-24*60*60*1e3);return DQe(r)}function LQe(){const[t,e]=g.useState(RQe()),[r,n]=g.useState(MQe()),[a,s]=g.useState(!1),[o,l]=g.useState(""),[c,u]=g.useState({}),[d,f]=g.useState({}),[A,h]=g.useState([]),[m,p]=g.useState([]),[x,v]=g.useState({}),[y,b]=g.useState(!1),[w,j]=g.useState(null),[I,_]=g.useState(null),S=g.useMemo(()=>w&&A.find(Ae=>Ae.vendorId===w)||null,[w,A]),E=g.useMemo(()=>{var Ae;return!w||!I?[]:((Ae=x[w])==null?void 0:Ae[I])||[]},[w,I,x]),F=g.useMemo(()=>Au(A.reduce((Ae,fe)=>Ae+(fe.totalSoldMoney||0),0)),[A]),k=g.useMemo(()=>Au(A.reduce((Ae,fe)=>Ae+(fe.totalCreditMoney||0),0)),[A]);g.useEffect(()=>{(async()=>{try{const Ae=await Qt(yt(ke,"sellers_candies")),fe={};Ae.forEach(Pe=>{const Te=Pe.data(),O=Te.branch||"Rivas";let K="RIVAS";O==="San Jorge"?K="SAN_JORGE":O==="Isla Ometepe"&&(K="ISLA"),fe[Pe.id]={id:Pe.id,name:Te.name??"(sin nombre)",branch:K,branchLabel:O,commissionPercent:Number(Te.commissionPercent??0)}});const me=await Qt(yt(ke,"products_candies")),ne={};me.forEach(Pe=>{const Te=Pe.data();ne[Pe.id]={id:Pe.id,name:Te.name??"(sin nombre)"}}),u(fe),f(ne)}catch(Ae){console.error(Ae),l(" Error cargando catlogos de vendedores/productos.")}})()},[]);const B=async()=>{if(!t||!r){l("Selecciona rango de fechas vlido.");return}if(!Object.keys(c).length){l("Cargando vendedores, intenta de nuevo en unos segundos.");return}s(!0),l("");try{const Ae={},fe={},me=ar(yt(ke,"inventory_candies_sellers"),mr("date",">=",t),mr("date","<=",r)),ne=await Qt(me),Pe={},Te={},O={},K={};ne.forEach(ce=>{var ft,we;const be=ce.data(),Ve=be.sellerId||"";if(!Ve)return;const We=be.productId||"",pt=be.productName||((ft=d[We])==null?void 0:ft.name)||"(sin nombre)",wt=Math.max(1,Math.floor(Number(be.unitsPerPackage||1))),Ct=Number(be.totalUnits??0),St=Number(be.packages??0),Rt=Number(be.remainingUnits??be.remaining??0),jt=Number(be.remainingPackages??0),Ue=St>0?St:Ct>0?Math.floor(Ct/wt):0,Be=jt>0?jt:Rt>0?Math.floor(Rt/wt):0;Pe[Ve]=(Pe[Ve]||0)+Ue,Te[Ve]=(Te[Ve]||0)+Be;const ye=be.orderId||be.vendorOrderId||be.orderNumber||be.order||ce.id;O[Ve]||(O[Ve]=new Set),O[Ve].add(ye);const oe=((we=c[Ve])==null?void 0:we.name)||be.sellerName||"(sin vendedor)",Z=String(be.date||""),Ne=Number(be.totalVendor??0),Re=Number(be.gainVendor??0),ge=St>0?St:Ct>0?Math.floor(Ct/wt):0,Xe=ge>0?Ne/ge:0,vt=ge>0?Re/ge:0,it=Au(Ue*Xe),de=Au(Ue*vt),Ce=Au(Be*Xe),Ye=Au(Be*vt);K[Ve]||(K[Ve]={ordered:[],remaining:[]}),Ue>0&&K[Ve].ordered.push({date:Z,vendorName:oe,productName:pt,packages:Ue,totalMoney:it,vendorCommission:de}),Be>0&&K[Ve].remaining.push({date:Z,vendorName:oe,productName:pt,packages:Be,totalMoney:Ce,vendorCommission:Ye})});const q={};Object.keys(O).forEach(ce=>{q[ce]=O[ce].size});const U=ar(yt(ke,"sales_candies"),mr("date",">=",t),mr("date","<=",r)),W=await Qt(U),J={},M={},H={},te={},ve={},Q={};W.forEach(ce=>{const be=ce.data(),Ve=be.date||"",We=be.vendorId||be.sellerId||"";if(!We)return;const pt=c[We],wt=be.vendorName||(pt==null?void 0:pt.name)||"(sin vendedor)",Ct=Number(be.vendorCommissionPercent??(pt==null?void 0:pt.commissionPercent)??0)||0,St=Array.isArray(be.items)?be.items:[];if(!St.length)return;const Rt=String(be.type||"").toUpperCase()==="CREDITO";ve[We]||(ve[We]={sold:[],credit:[]}),St.forEach(jt=>{var it;const Ue=jt.productName||((it=d[jt.productId||""])==null?void 0:it.name)||"(sin nombre)",Be=jt.packages??jt.qty??jt.quantity??0,ye=Number(Be||0);if(ye<=0)return;const oe=Number(jt.unitPricePackage??jt.unitPrice??0)||0,Z=Math.max(0,Number(jt.discount||0)),Ne=ye*oe,Re=Au(Math.max(0,Ne-Z));if(Re<=0)return;console.log("DBG",{isCredit:Rt,vendorId:We,commissionPercent:Ct,lineFinal:Re,storedItemCommission:Number(jt.vendorCommissionAmount??0)});let ge=0;const Xe=Number(jt.vendorCommissionAmount??0);Xe?ge=Au(Xe):Ct>0&&(ge=Au(Re*Ct/100)),Rt?(M[We]=(M[We]||0)+ye,te[We]=(te[We]||0)+Re):(J[We]=(J[We]||0)+ye,H[We]=(H[We]||0)+Re),Rt?fe[We]=(fe[We]||0)+ge:Ae[We]=(Ae[We]||0)+ge,Rt?ve[We].credit.push({date:Ve,vendorName:wt,productName:Ue,packages:ye,totalMoney:Re,vendorCommission:0}):ve[We].sold.push({date:Ve,vendorName:wt,productName:Ue,packages:ye,totalMoney:Re,vendorCommission:ge});const vt=Ue;Q[vt]||(Q[vt]={productName:Ue,packages:0,totalMoney:0}),Q[vt].packages+=ye,Q[vt].totalMoney+=Re})});const Ke=new Set([...Object.keys(Pe),...Object.keys(Te),...Object.keys(J),...Object.keys(M)]),ae=[],ee={};Ke.forEach(ce=>{var Be,ye,oe,Z;const be=c[ce],Ve=(be==null?void 0:be.name)||"(sin vendedor)",We=be?be.branchLabel||OQe(be.branch):"",pt=Pe[ce]||0,wt=Te[ce]||0,Ct=J[ce]||0,St=M[ce]||0,Rt=Au(H[ce]||0),jt=Au(te[ce]||0),Ue=q[ce]||0;ae.push({vendorId:ce,vendorName:Ve,branchLabel:We,orderedPackages:pt,remainingPackages:wt,soldPackages:Ct,creditPackages:St,totalSoldMoney:Rt,totalCreditMoney:jt,ordersCreated:Ue,commissionCash:Au(Ae[ce]||0),commissionCredit:0}),ee[ce]={ordered:(((Be=K[ce])==null?void 0:Be.ordered)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),remaining:(((ye=K[ce])==null?void 0:ye.remaining)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),sold:(((oe=ve[ce])==null?void 0:oe.sold)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date)),credit:(((Z=ve[ce])==null?void 0:Z.credit)||[]).sort((Ne,Re)=>Ne.date.localeCompare(Re.date))}}),ae.sort((ce,be)=>ce.vendorName.localeCompare(be.vendorName,"es")),h(ae),v(ee);const Fe=Object.values(Q).map(ce=>({productName:ce.productName,packages:ce.packages,totalMoney:Au(ce.totalMoney)})).sort((ce,be)=>be.packages-ce.packages).slice(0,10);p(Fe),ae.length||l("Sin datos para el rango seleccionado.")}catch(Ae){console.error(Ae),l(" Error cargando consolidado de vendedores.")}finally{s(!1)}};g.useEffect(()=>{Object.keys(c).length&&B()},[c]);const D=(Ae,fe)=>{j(Ae),_(fe),b(!0)},X=()=>{b(!1),j(null),_(null)},he=()=>{if(!A.length){l("No hay datos para exportar.");return}const Ae=["Vendedor","Sucursal","Paquetes ordenados","Paquetes restantes","Paquetes vendidos","Paquetes fiados","Total vendidos (C$)","Comisin Cash (C$)","Total fiado (C$)","Comisin Crdito (C$)","rdenes creadas"],fe=A.map(O=>[O.vendorName,O.branchLabel,O.orderedPackages.toString(),O.remainingPackages.toString(),O.soldPackages.toString(),O.creditPackages.toString(),O.totalSoldMoney.toFixed(2),O.commissionCash.toFixed(2),O.totalCreditMoney.toFixed(2),O.commissionCredit.toFixed(2),O.ordersCreated.toString()]),me=[Ae,...fe].map(O=>O.map(K=>`"${String(K).replace(/"/g,'""')}"`).join(",")).join(`
`),ne=new Blob([me],{type:"text/csv;charset=utf-8;"}),Pe=URL.createObjectURL(ne),Te=document.createElement("a");Te.href=Pe,Te.download=`consolidado_vendedores_dulces_${t}_a_${r}.csv`,Te.click(),URL.revokeObjectURL(Pe)};return i.jsxs("div",{className:"max-w-7xl mx-auto bg-white p-6 rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Consolidado por Vendedor - Dulces"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Desde"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:t,onChange:Ae=>e(Ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-1",children:"Hasta"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:r,onChange:Ae=>n(Ae.target.value)})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full",disabled:a,children:a?"Cargando...":"Aplicar filtros"})}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{type:"button",onClick:he,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full",children:"Exportar CSV"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 text-sm",children:[i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:jh(F)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Ventas Credito"}),i.jsx("div",{className:"text-xl font-semibold",children:jh(k)})]}),i.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Vendedores con Inventario"}),i.jsx("div",{className:"text-xl font-semibold",children:A.length})]})]}),i.jsx("div",{className:"overflow-x-auto mb-6",children:i.jsxs("table",{className:"min-w-full border text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes ordenados"}),i.jsx("th",{className:"border p-2",children:"Paquetes restantes"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Paquetes fiados"}),i.jsx("th",{className:"border p-2",children:"Total vendidos (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Cash (C$)"}),i.jsx("th",{className:"border p-2",children:"Total fiado (C$)"}),i.jsx("th",{className:"border p-2",children:"Comisin Crdito (C$)"}),i.jsx("th",{className:"border p-2",children:"rdenes creadas"})]})}),i.jsxs("tbody",{children:[A.map(Ae=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ae.vendorName}),i.jsx("td",{className:"border p-1",children:Ae.branchLabel}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"ordered"),children:Ae.orderedPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"remaining"),children:Ae.remainingPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"sold"),children:Ae.soldPackages})}),i.jsx("td",{className:"border p-1",children:i.jsx("button",{type:"button",className:"text-blue-600 underline",onClick:()=>D(Ae.vendorId,"credit"),children:Ae.creditPackages})}),i.jsx("td",{className:"border p-1",children:jh(Ae.totalSoldMoney)}),i.jsx("td",{className:"border p-1",children:jh(Ae.commissionCash)}),i.jsx("td",{className:"border p-1",children:jh(Ae.totalCreditMoney)}),i.jsx("td",{className:"border p-1",children:jh(Ae.commissionCredit)}),i.jsx("td",{className:"border p-1",children:Ae.ordersCreated})]},Ae.vendorId)),A.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-3 text-center text-gray-500",children:"Sin datos para mostrar."})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-sm",children:"Top 10 productos ms vendidos (paquetes)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-xs shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"#"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes vendidos"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"})]})}),i.jsxs("tbody",{children:[m.map((Ae,fe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:fe+1}),i.jsx("td",{className:"border p-1",children:Ae.productName}),i.jsx("td",{className:"border p-1",children:Ae.packages}),i.jsx("td",{className:"border p-1",children:jh(Ae.totalMoney)})]},Ae.productName)),m.length===0&&!a&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500",children:"Sin productos para mostrar."})})]})]})})]}),o&&i.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o}),y&&I&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[95%] max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-lg",children:["Detalle"," ",I==="ordered"?"Paquetes ordenados":I==="remaining"?"Paquetes restantes":I==="sold"?"Paquetes vendidos":"Paquetes fiados"]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[S==null?void 0:S.vendorName,"  ",S==null?void 0:S.branchLabel]})]}),i.jsx("button",{onClick:X,className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300 text-sm",children:"Cerrar"})]}),i.jsx("div",{className:"flex-1 overflow-auto p-4",children:i.jsxs("table",{className:"min-w-full border text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Total dinero (C$)"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Comisin vendedor (C$)"})]})}),i.jsxs("tbody",{children:[E.map((Ae,fe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:Ae.date}),i.jsx("td",{className:"border p-1",children:Ae.productName}),i.jsx("td",{className:"border p-1",children:Ae.packages}),i.jsx("td",{className:"border p-1",children:jh(Ae.totalMoney)}),i.jsx("td",{className:"border p-1",children:Ae.vendorName}),i.jsx("td",{className:"border p-1",children:jh(Ae.vendorCommission)})]},fe)),E.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"p-3 text-center text-gray-500",children:"Sin registros para mostrar."})})]})]})})]})})]})}const Ml=t=>`C$${Number(t||0).toFixed(2)}`,n_=t=>Number(t||0).toFixed(3),X5=()=>{const t=new Date;return Br(new Date(t.getFullYear(),t.getMonth(),1),"yyyy-MM-dd")},a_=()=>Br(new Date,"yyyy-MM-dd");function UQe({transactions:t=[],onClose:e,onCreated:r}){const n=Array.isArray(t)?t:[],[a,s]=g.useState([]),o=g.useMemo(()=>{const de={};return a.forEach(Ce=>{Ce.email&&(de[Ce.email.trim().toLowerCase()]=Ce)}),de},[a]);g.useEffect(()=>{(async()=>{try{const de=ar(yt(ke,"sellers_candies"),wn("name","asc")),Ce=await Qt(de),Ye=[];Ce.forEach(ft=>{const we=ft.data();Ye.push({id:ft.id,name:we.name||"",email:we.email||"",commissionPercent:Number(we.commissionPercent||0)})}),s(Ye)}catch(de){console.error(de)}})()},[]);const[l,c]=g.useState(X5()),[u,d]=g.useState(a_()),[f,A]=g.useState(""),[h,m]=g.useState(""),p=g.useMemo(()=>{const de=new Map;return n.forEach(Ce=>{const Ye=Ce.productId||Ce.productName;de.set(Ye,{key:Ye,name:Ce.productName})}),Array.from(de.values()).sort((Ce,Ye)=>Ce.name.localeCompare(Ye.name))},[n]),x=g.useMemo(()=>{const de=new Map;return n.forEach(Ce=>{const Ye=(Ce.sellerEmail||"").trim().toLowerCase();if(!Ye)return;const ft=o[Ye],we=(ft==null?void 0:ft.name)||Ce.vendorName||Ye;de.set(Ye,{email:Ye,label:we})}),Array.from(de.values()).sort((Ce,Ye)=>Ce.label.localeCompare(Ye.label))},[n,o]),v=g.useMemo(()=>n.filter(de=>!(l&&de.date<l||u&&de.date>u||f&&(de.productId||de.productName)!==f||h&&(de.sellerEmail||"").trim().toLowerCase()!==h)),[n,l,u,f,h]),[y,b]=g.useState(a_()),[w,j]=g.useState(()=>`FAC-CANDY-${Date.now().toString().slice(-6)}`),[I,_]=g.useState(""),[S,E]=g.useState("0"),[F,k]=g.useState(()=>v.map(de=>de.id));g.useEffect(()=>{k(de=>de.filter(Ce=>v.some(Ye=>Ye.id===Ce)))},[v]);const[B,D]=g.useState([]),[X,he]=g.useState([]),[Ae,fe]=g.useState(!1),[me,ne]=g.useState(X5()),[Pe,Te]=g.useState(a_());g.useEffect(()=>{(async()=>{try{fe(!0);const de=ar(yt(ke,"expensesCandies"),wn("date","desc")),Ce=await Qt(de),Ye=[];Ce.forEach(ft=>{const we=ft.data();Ye.push({id:ft.id,date:we.date,description:we.description,amount:Number(we.amount||0)})}),D(Ye)}catch(de){console.error(de)}finally{fe(!1)}})()},[]);const O=g.useMemo(()=>B.filter(de=>!(!de.date||me&&de.date<me||Pe&&de.date>Pe)),[B,me,Pe]),[K,q]=g.useState([]),[U,W]=g.useState(!1),[J,M]=g.useState(""),[H,te]=g.useState("DEBITO"),[ve,Q]=g.useState(""),Ke=()=>{const de=Number(ve);!J.trim()||!isFinite(de)||de<=0||(q(Ce=>[...Ce,{id:`${Date.now()}_${Ce.length+1}`,description:J.trim(),type:H,amount:Number(de.toFixed(2))}]),M(""),Q(""))},[ae,ee]=g.useState(null),[Fe,ce]=g.useState(""),[be,Ve]=g.useState("DEBITO"),[We,pt]=g.useState(""),wt=de=>{ee(de.id),ce(de.description),Ve(de.type),pt(de.amount.toFixed(2))},Ct=()=>{ee(null),ce(""),Ve("DEBITO"),pt("")},St=()=>{if(!ae)return;const de=Number(We);!isFinite(de)||de<=0||(q(Ce=>Ce.map(Ye=>Ye.id===ae?{...Ye,description:Fe.trim(),type:be,amount:Number(de.toFixed(2))}:Ye)),Ct())},Rt=de=>{q(Ce=>Ce.filter(Ye=>Ye.id!==de)),ae===de&&Ct()},jt=(de,Ce)=>{k(Ye=>Ce?[...new Set([...Ye,de])]:Ye.filter(ft=>ft!==de))},Ue=de=>{k(de?v.map(Ce=>Ce.id):[])},Be=(de,Ce)=>{he(Ye=>Ce?[...new Set([...Ye,de])]:Ye.filter(ft=>ft!==de))},ye=g.useMemo(()=>v.filter(de=>F.includes(de.id)),[v,F]),oe=g.useMemo(()=>K.filter(de=>de.type==="DEBITO").reduce((de,Ce)=>de+Ce.amount,0),[K]),Z=g.useMemo(()=>K.filter(de=>de.type==="CREDITO").reduce((de,Ce)=>de+Ce.amount,0),[K]),Ne=g.useMemo(()=>{let de=0,Ce=0,Ye=0,ft=0;for(const Yt of ye){const st=Number(Yt.packages||0),_e=Number(Yt.cogsAmount||0),xe=Number(Yt.amount||0);de+=st,Ce+=_e,Ye+=xe;const ie=(Yt.sellerEmail||"").trim().toLowerCase(),Oe=o[ie],le=Number((Oe==null?void 0:Oe.commissionPercent)||0),De=xe*le/100;ft+=De}const we=O.filter(Yt=>X.includes(Yt.id)).reduce((Yt,st)=>Yt+Number(st.amount||0),0),Le=Ye-Ce,gt=Ye-we-oe+Z-ft,Ut=Number(S||0),Mt=Ye*Ut/100;return{totalPackages:Number(n_(de)),totalProvider:Number(Ce.toFixed(2)),totalSale:Number(Ye.toFixed(2)),totalGastos:Number(we.toFixed(2)),debits:Number(oe.toFixed(2)),credits:Number(Z.toFixed(2)),grossProfit:Number(Le.toFixed(2)),finalAmount:Number(gt.toFixed(2)),totalCommissionVendors:Number(ft.toFixed(2)),branchProfit:Number(Mt.toFixed(2)),branchFactor:Ut}},[ye,O,X,oe,Z,o,S]),[Re,ge]=g.useState(!1),[Xe,vt]=g.useState(""),it=async()=>{if(vt(""),ye.length===0){vt("Selecciona al menos 1 transaccin procesada.");return}try{ge(!0);const de={number:w.trim(),date:y,description:I.trim(),status:"PENDIENTE",createdAt:xr.now(),totalPackages:Ne.totalPackages,totalProvider:Ne.totalProvider,totalSale:Ne.totalSale,totalExpenses:Ne.totalGastos,totalDebits:Ne.debits,totalCredits:Ne.credits,grossProfit:Ne.grossProfit,totalCommissionVendors:Ne.totalCommissionVendors,branchFactorPercent:Ne.branchFactor,branchProfit:Ne.branchProfit,finalAmount:Ne.finalAmount,transactions:ye.map(Ce=>{const Ye=Number(Ce.packages||0)||1,ft=Number(Ce.cogsAmount||0),we=Number(Ce.amount||0),Le=ft/Ye,gt=we/Ye,Ut=(Ce.sellerEmail||"").trim().toLowerCase(),Mt=o[Ut],Yt=Number((Mt==null?void 0:Mt.commissionPercent)||0),st=we*Yt/100;return{id:Ce.id,date:Ce.date,productId:Ce.productId||null,productName:Ce.productName,vendorName:Ce.vendorName,sellerEmail:Ce.sellerEmail||null,packages:Number(n_(Ce.packages)),providerPricePack:Number(Le.toFixed(4)),salePricePack:Number(gt.toFixed(4)),totalProvider:Number(ft.toFixed(2)),totalSale:Number(we.toFixed(2)),commissionPercent:Yt,commissionAmount:Number(st.toFixed(2))}}),expenses:O.filter(Ce=>X.includes(Ce.id)).map(Ce=>({id:Ce.id,date:Ce.date||null,description:Ce.description||"",amount:Number(Number(Ce.amount||0).toFixed(2))})),adjustments:K.map(Ce=>({id:Ce.id,description:Ce.description,type:Ce.type,amount:Number(Ce.amount.toFixed(2))}))};await $n(yt(ke,"invoicesCandies"),de),vt(" Factura de dulces creada."),r()}catch(de){console.error(de),vt(` Error al crear factura: ${(de==null?void 0:de.message)||"desconocido"}`)}finally{ge(!1)}};return i.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/40 flex items-center justify-center p-3",children:[i.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-xl shadow-xl p-4 md:p-6 max-h-[90vh] overflow-auto relative",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Crear factura CandyShop"}),i.jsx("button",{onClick:e,className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Fecha"}),i.jsx("input",{type:"date",className:"w-full border rounded px-2 py-1",value:y,onChange:de=>b(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Nmero"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:w,onChange:de=>j(de.target.value),placeholder:"FAC-CANDY-001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Factor sucursal (%)"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:S,onChange:de=>E(de.target.value),placeholder:"Ej: 30"}),i.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"Se aplica sobre el total de ventas para calcular la ganancia de sucursal."})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Descripcin"}),i.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1",value:I,onChange:de=>_(de.target.value),placeholder:"Comentarios de la factura"})]})]}),i.jsx("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:i.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Desde (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:l,onChange:de=>c(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Hasta (transaccin)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:de=>d(de.target.value)})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:f,onChange:de=>A(de.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),p.map(de=>i.jsx("option",{value:de.key,children:de.name},de.key))]})]}),i.jsxs("div",{className:"min-w-[180px]",children:[i.jsx("label",{className:"block text-sm font-medium",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:h,onChange:de=>m(de.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),x.map(de=>i.jsx("option",{value:de.email,children:de.label},de.email))]})]}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{c(X5()),d(a_()),A(""),m("")},children:"Quitar filtro"})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Transacciones procesadas"}),i.jsxs("label",{className:"text-sm flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:v.length>0&&F.length===v.length,onChange:de=>Ue(de.target.checked)}),"Seleccionar todas (sobre el filtro)"]})]}),v.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay transacciones procesadas en el filtro actual."}):i.jsx("div",{className:"border rounded max-h-80 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Vendedor"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Paquetes"}),i.jsx("th",{className:"p-2 border",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border",children:"Precio venta"}),i.jsx("th",{className:"p-2 border",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border",children:"Total venta"}),i.jsx("th",{className:"p-2 border",children:"Comisin venta"})]})}),i.jsx("tbody",{children:v.map(de=>{const Ce=F.includes(de.id),Ye=Number(de.packages||0)||1,ft=Number(de.cogsAmount||0),we=Number(de.amount||0),Le=ft/Ye,gt=we/Ye,Ut=(de.sellerEmail||"").trim().toLowerCase(),Mt=o[Ut],Yt=Number((Mt==null?void 0:Mt.commissionPercent)||0),st=we*Yt/100;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Ce,onChange:_e=>jt(de.id,_e.target.checked)})}),i.jsx("td",{className:"p-2 border",children:de.date}),i.jsx("td",{className:"p-2 border",children:(Mt==null?void 0:Mt.name)||de.vendorName}),i.jsx("td",{className:"p-2 border",children:de.productName}),i.jsx("td",{className:"p-2 border",children:n_(de.packages)}),i.jsx("td",{className:"p-2 border",children:Ml(Le)}),i.jsx("td",{className:"p-2 border",children:Ml(gt)}),i.jsx("td",{className:"p-2 border",children:Ml(ft)}),i.jsx("td",{className:"p-2 border",children:Ml(we)}),i.jsx("td",{className:"p-2 border",children:Yt>0?`${Ml(st)} (${Yt.toFixed(2)}%)`:""})]},de.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Gastos a incluir (opcional)"}),Ae&&i.jsx("span",{className:"text-xs text-gray-500",children:"Cargando"}),i.jsxs("div",{className:"ml-auto flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:me,onChange:de=>ne(de.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta (gasto)"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:Pe,onChange:de=>Te(de.target.value)})]})]})]}),O.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No hay gastos en el rango seleccionado."}):i.jsx("div",{className:"border rounded max-h-48 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Sel"}),i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Monto"})]})}),i.jsx("tbody",{children:O.map(de=>{const Ce=X.includes(de.id);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{type:"checkbox",checked:Ce,onChange:Ye=>Be(de.id,Ye.target.checked)})}),i.jsx("td",{className:"p-2 border",children:de.date||""}),i.jsx("td",{className:"p-2 border",children:de.description||""}),i.jsx("td",{className:"p-2 border",children:Ml(Number(de.amount||0))})]},de.id)})})]})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h4",{className:"font-semibold",children:"Notas Crdito/Dbito (Cargos extras)"}),i.jsx("button",{className:"ml-auto px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>W(!0),children:"Crear Cargo"})]}),K.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cargos agregados."}):i.jsx("div",{className:"border rounded max-h-40 overflow-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Descripcin"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Monto"}),i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:K.map(de=>{const Ce=ae===de.id;return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:Ce?i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[70px]",value:Fe,onChange:Ye=>ce(Ye.target.value)}):i.jsx("span",{title:de.description,children:de.description.length>60?`${de.description.slice(0,60)}`:de.description})}),i.jsx("td",{className:"p-2 border",children:Ce?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:be,onChange:Ye=>Ve(Ye.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]}):i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${de.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:de.type})}),i.jsx("td",{className:"p-2 border",children:Ce?i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1 text-right",value:We,onChange:Ye=>pt(Ye.target.value)}):Ml(de.amount)}),i.jsx("td",{className:"p-2 border",children:Ce?i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 text-xs",onClick:St,children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 hover:bg-gray-300 text-xs",onClick:Ct,children:"Cancelar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Rt(de.id),children:"Eliminar"})]}):i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-indigo-600 text-white hover:bg-indigo-700 text-xs",onClick:()=>wt(de),children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 text-xs",onClick:()=>Rt(de.id),children:"Eliminar"})]})})]},de.id)})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-4 justify-between",children:[i.jsx("div",{className:"space-y-1",children:i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:n_(Ne.totalPackages)})]})}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Total proveedor (costo):"," ",i.jsx("strong",{children:Ml(Ne.totalProvider)})]}),i.jsxs("div",{children:["Total venta: ",i.jsx("strong",{children:Ml(Ne.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta (venta  costo):"," ",i.jsx("strong",{children:Ml(Ne.grossProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:Ml(Ne.totalGastos)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:Ml(Ne.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:Ml(Ne.credits)})]}),i.jsxs("div",{children:["Comisin total vendedores:"," ",i.jsx("strong",{children:Ml(Ne.totalCommissionVendors)})]}),i.jsxs("div",{children:["Ganancia sucursal (ventas  factor):"," ",i.jsx("strong",{children:Ml(Ne.branchProfit)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-center font-semibold text-lg",children:["Monto final (ventas  gastos  dbitos + crditos  comisin vendedores):"," ",i.jsx("span",{className:"text-blue-700",children:Ml(Ne.finalAmount)})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:Re,onClick:it,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-60",children:Re?"Creando":"Crear factura"}),i.jsx("button",{onClick:e,className:"px-4 py-2 border rounded",children:"Cancelar"}),Xe&&i.jsx("span",{className:"text-sm ml-2",children:Xe})]}),Re&&i.jsxs("div",{className:"absolute inset-0 z-[11000] bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center gap-3",children:[i.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),i.jsx("div",{className:"text-sm font-medium text-blue-700",children:"Creando factura"})]})]}),U&&i.jsx("div",{className:"fixed inset-0 z-[10000] bg-black/50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg_WHITE w-full max-w-lg rounded-xl shadow-xl p-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("h4",{className:"font-semibold",children:"Nuevo cargo"}),i.jsx("button",{className:"ml-auto px-2 py-1 border rounded hover:bg-gray-50",onClick:()=>W(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Descripcin"}),i.jsx("textarea",{className:"w-full border rounded px-2 py-1 min-h-[90px]",value:J,onChange:de=>M(de.target.value),placeholder:"Detalle del cargo"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Tipo de cargo"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:H,onChange:de=>te(de.target.value),children:[i.jsx("option",{value:"DEBITO",children:"Dbito"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium",children:"Monto"}),i.jsx("input",{type:"number",step:"0.01",className:"w-full border rounded px-2 py-1",value:ve,onChange:de=>Q(de.target.value),placeholder:"0.00"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{className:"px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:Ke,children:"Agregar"})})]})]})})]})}const La=t=>`C$ ${Number(t??0).toFixed(2)}`,s_=t=>Number(t??0).toFixed(3);function Y5(t){const e=t.transactions||[];let r=Number(t.totalPackages??0),n=Number(t.totalProvider??0),a=Number(t.totalSale??0),s=Number(t.totalCommissionVendors??0);if(e.length>0&&(a===0||r===0)){r=0,n=0,a=0,s=0;for(const v of e){const y=Number(v.packages??0);r+=y,n+=Number(v.totalProvider??y*(v.providerPricePack??0)),a+=Number(v.totalSale??y*(v.salePricePack??0));const b=v.commissionAmount??Number(v.totalSale??0)*Number(v.commissionPercent??0)/100;s+=Number(b||0)}}const o=t.expenses||[],l=t.adjustments||[],c=t.totalExpenses!==void 0?Number(t.totalExpenses):o.reduce((v,y)=>v+Number(y.amount||0),0),u=l.filter(v=>v.type==="DEBITO").reduce((v,y)=>v+Number(y.amount||0),0),d=l.filter(v=>v.type==="CREDITO").reduce((v,y)=>v+Number(y.amount||0),0),f=t.totalDebits!==void 0?Number(t.totalDebits):u,A=t.totalCredits!==void 0?Number(t.totalCredits):d,h=a-n,m=Number(t.branchFactorPercent??0),p=t.branchProfit!==void 0?Number(t.branchProfit):Number((h*m/100).toFixed(2)),x=t.finalAmount!==void 0?Number(t.finalAmount):a-s-c-f+A;return{totalPackages:r,totalProvider:n,totalSale:a,commissionTotal:s,expenses:c,debits:f,credits:A,grossProfit:h,branchProfit:p,finalAmount:x}}function sG(t){const e=t.transactions||[];if(e.length===0)return"";const r=Array.from(new Set(e.map(n=>n.vendorName||"Sin nombre")));return r.length===1?r[0]:"Varios"}function QQe(){const[t,e]=g.useState([]),[r,n]=g.useState(!0),[a,s]=g.useState(null),o=g.useRef(null),[l,c]=g.useState(!1),u=async()=>{n(!0);const h=ar(yt(ke,"invoicesCandies"),wn("date","desc")),m=await Qt(h),p=[];m.forEach(x=>{const v=x.data();p.push({id:x.id,date:v.date,number:v.number,description:v.description,status:v.status||"PENDIENTE",totalPackages:v.totalPackages||0,totalProvider:v.totalProvider||0,totalSale:v.totalSale||0,totalExpenses:v.totalExpenses||0,totalDebits:v.totalDebits||0,totalCredits:v.totalCredits||0,totalCommissionVendors:v.totalCommissionVendors||0,finalAmount:v.finalAmount||0,branchFactorPercent:v.branchFactorPercent||0,branchProfit:v.branchProfit||0,transactions:(v.transactions||[]).map(y=>({id:y.id,date:y.date,vendorId:y.vendorId||null,vendorName:y.vendorName||"Sin nombre",sellerEmail:y.sellerEmail||null,productId:y.productId,productName:y.productName||"Sin nombre",packages:Number(y.packages||0),providerPricePack:Number(y.providerPricePack||0),salePricePack:Number(y.salePricePack||0),totalProvider:Number(y.totalProvider||0),totalSale:Number(y.totalSale||0),commissionPercent:Number(y.commissionPercent||0),commissionAmount:Number(y.commissionAmount||0)})),expenses:(v.expenses||[]).map(y=>({id:y.id,description:y.description||"",date:y.date||null,amount:Number(y.amount||0)})),adjustments:(v.adjustments||[]).map(y=>({id:y.id,description:y.description||"",type:y.type||"DEBITO",amount:Number(y.amount||0)}))})}),e(p),n(!1)};g.useEffect(()=>{u()},[]);const d=async h=>{const m=h.status==="PAGADA"?"PENDIENTE":"PAGADA";await _n(Jt(ke,"invoicesCandies",h.id),{status:m}),e(p=>p.map(x=>x.id===h.id?{...x,status:m}:x)),(a==null?void 0:a.id)===h.id&&s({...h,status:m})},f=async h=>{if(window.confirm(`Eliminar factura del ${h.date}?`))try{await Mn(Jt(ke,"invoicesCandies",h.id)),e(m=>m.filter(p=>p.id!==h.id)),(a==null?void 0:a.id)===h.id&&s(null)}catch(m){console.error(m),alert("No se pudo eliminar la factura.")}},A=async()=>{if(!o.current||!a)return;const h=o.current,m=await jg(h,{backgroundColor:"#ffffff",onclone:b=>{const w=b.body;w.style.background="#ffffff",w.querySelectorAll("*").forEach(j=>{const I=b.defaultView.getComputedStyle(j);I.boxShadow&&I.boxShadow!=="none"&&(j.style.boxShadow="none")})},scale:2}),p=m.toDataURL("image/png"),x=new qr("p","mm","a4"),v=x.internal.pageSize.getWidth(),y=m.height*v/m.width;x.addImage(p,"PNG",0,0,v,y),x.save(`factura_candy_${a.number||a.date}.pdf`)};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded shadow",children:[i.jsxs("div",{className:"flex items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Facturacin CandyShop"}),i.jsx("button",{className:"ml-auto bg-blue-600 text-white px-4 py-2 rounded-2xl hover:bg-blue-700 text-sm",onClick:()=>c(!0),children:"Crear factura Candy"})]}),l&&i.jsx(UQe,{onClose:()=>c(!1),onCreated:()=>{c(!1),u()}}),i.jsx("div",{className:"bg-white p-2 rounded shadow border w-full mb-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"N factura"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Sub total (sin gastos/ajustes)"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Gastos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Dbitos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Crditos"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Estado"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Cargando"})}):t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"p-4 text-center",children:"Sin facturas"})}):t.map(h=>{const m=Y5(h),p=sG(h);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.number||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:p}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.commissionTotal)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:s_(m.totalPackages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.totalSale)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.expenses)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.debits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.credits)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(m.finalAmount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.status==="PAGADA"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:h.status})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{className:"text-xs bg-indigo-600 text-white px-2 py-1 rounded hover:bg-indigo-700",onClick:()=>s(h),children:"Ver"}),i.jsx("button",{className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",onClick:()=>d(h),children:h.status==="PAGADA"?"Marcar PENDIENTE":"Marcar PAGADA"}),i.jsx("button",{className:"text-xs bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",onClick:()=>f(h),children:"Eliminar"})]})})]},h.id)})})]})}),a&&i.jsxs("div",{ref:o,className:"bg-white p-4 rounded shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Detalle ",a.date," ",a.number?` ${a.number}`:""]}),i.jsx("button",{className:"ml-auto px-3 py-1 border rounded",onClick:()=>s(null),children:"Cerrar"}),i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Imprimir PDF"})]}),(()=>{const h=Y5(a),m=sG(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Vendedor:"})," ",m]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Paquetes:"})," ",s_(h.totalPackages)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Total proveedor:"})," ",La(h.totalProvider)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Sub total ventas:"})," ",La(h.totalSale)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Ganancia bruta:"})," ",La(h.grossProfit)]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Comisin vendedores:"})," ",La(h.commissionTotal)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Gastos:"})," ",La(h.expenses)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Dbitos:"})," ",La(h.debits)]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold",children:"Crditos:"})," ",La(h.credits)]})]})]})})(),i.jsx("h4",{className:"font-semibold mb-1",children:"Transacciones"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-2xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Vendedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Producto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Paquetes"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Precio venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total proveedor"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Total venta"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Comisin venta"})]})}),i.jsx("tbody",{children:(a.transactions||[]).length>0?(a.transactions||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.vendorName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.productName}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:s_(h.packages)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.providerPricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.salePricePack)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.totalProvider)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.totalSale)}),i.jsxs("td",{className:"p-2 border whitespace-nowrap",children:[La(h.commissionAmount||0),h.commissionPercent?` (${h.commissionPercent.toFixed(2)}%)`:""]})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:9,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin transacciones"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Gastos"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"})]})}),i.jsx("tbody",{children:(a.expenses||[]).length>0?(a.expenses||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.date||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description||""}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.amount)})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin gastos"})})})]})}),i.jsx("h4",{className:"font-semibold mb-1",children:"Cargos extras (Notas crdito/dbito)"}),i.jsx("div",{className:"overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full text-sm shadow-xl",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Descripcin"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Tipo de cargo"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Monto"}),i.jsx("th",{className:"p-2 border whitespace-nowrap",children:"Fecha"})]})}),i.jsx("tbody",{children:(a.adjustments||[]).length>0?(a.adjustments||[]).map((h,m)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border whitespace-nowrap",children:h.description}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${h.type==="DEBITO"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:h.type})}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:La(h.amount)}),i.jsx("td",{className:"p-2 border whitespace-nowrap",children:a.date})]},m)):i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-3 text-center text-gray-500 whitespace-nowrap",children:"Sin cargos extras"})})})]})}),(()=>{const h=Y5(a);return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 text-sm mb-2 justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{children:["Total paquetes: ",i.jsx("strong",{children:s_(h.totalPackages)})]}),i.jsxs("div",{children:["Total proveedor: ",i.jsx("strong",{children:La(h.totalProvider)})]})]}),i.jsxs("div",{className:"space-y-1 text-center",children:[i.jsxs("div",{children:["Sub total ventas: ",i.jsx("strong",{children:La(h.totalSale)})]}),i.jsxs("div",{children:["Ganancia bruta: ",i.jsx("strong",{children:La(h.grossProfit)})]}),i.jsxs("div",{children:["Ganancia sucursal: ",i.jsx("strong",{children:La(h.branchProfit)})]})]}),i.jsxs("div",{className:"space-y-1 text-right",children:[i.jsxs("div",{children:["Comisin vendedores:"," ",i.jsx("strong",{children:La(h.commissionTotal)})]}),i.jsxs("div",{children:["Gastos: ",i.jsx("strong",{children:La(h.expenses)})]}),i.jsxs("div",{children:["Dbitos: ",i.jsx("strong",{children:La(h.debits)})]}),i.jsxs("div",{children:["Crditos: ",i.jsx("strong",{children:La(h.credits)})]})]}),i.jsx("div",{className:"md:col-span-3 mt-3",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4 text-center",children:[i.jsx("span",{className:"block text-lg font-semibold text-gray-800",children:"Total (sub total  comisin  gastos  dbitos + crditos):"}),i.jsx("span",{className:"block text-2xl font-bold text-blue-700 mt-1",children:La(h.finalAmount)})]})})]})})()]})]})}const Fs=t=>Math.round((Number(t)||0)*100)/100,p0=t=>Math.round((Number(t)||0)*1e3)/1e3,co=t=>Number(t??0).toFixed(2),Ph=t=>Number(t??0).toFixed(3),VQe=(t,e)=>{var A;const r=t.date??((A=t.timestamp)!=null&&A.toDate?Br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=t.userEmail??"",a=t.vendorName||t.vendor||n||t.vendorId||"(sin vendedor)",s=t.type||"CONTADO",o=t.vendorId,l=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,c=Number(t.vendorCommissionAmount??0)||0;if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((h,m)=>{const p=Number((h==null?void 0:h.packages)??(h==null?void 0:h.qty)??(h==null?void 0:h.quantity)??0),x=Number((h==null?void 0:h.lineFinal)??0)||Math.max(0,Number((h==null?void 0:h.unitPricePackage)||(h==null?void 0:h.unitPrice)||0)*p-Number((h==null?void 0:h.discount)||0));let v=0;return c>0&&l>0&&Number(x||0)>0&&(v=Fs(c*Number(x||0)/l)),{id:`${e}#${m}`,productName:String((h==null?void 0:h.productName)??"(sin nombre)"),quantity:p,amount:Fs(x),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:v}});const u=Number(t.packagesTotal??t.quantity??0),d=Number(t.amount??t.amountCharged??t.total??0)||0,f=Fs(Number(t.vendorCommissionAmount??0)||0);return[{id:e,productName:String((t==null?void 0:t.productName)??"(sin nombre)"),quantity:u,amount:Fs(d),date:r,type:s,vendorId:o,userEmail:a,vendorCommissionAmount:f}]};function HQe({role:t,roles:e,currentUserEmail:r,sellerCandyId:n}){const a=e&&e.length?e:t,s=!a||xn(a,"admin"),o="daily_closures_candies",l="sales_candies",c="sellers_candies",[u,d]=g.useState(Br(See(new Date),"yyyy-MM-dd")),[f,A]=g.useState(Br(new Date,"yyyy-MM-dd")),[h,m]=g.useState(!0),[p,x]=g.useState([]),[v,y]=g.useState(null),[b,w]=g.useState(""),[j,I]=g.useState([]),[_,S]=g.useState("ALL"),[E,F]=g.useState({}),k=g.useRef(null);if(!s)return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Liquidaciones"}),i.jsx("p",{className:"text-sm text-red-600",children:"Acceso denegado: solo admin."})]});const B=async()=>{try{const J=await Qt(yt(ke,c)),M=[];J.forEach(H=>{const te=H.data();M.push({id:H.id,name:te.name||"",commissionPercent:Number(te.commissionPercent||0)})}),I(M)}catch(J){console.error("Error cargando sellers_candies",J)}},D=async()=>{const J=performance.now();try{m(!0);const M=ar(yt(ke,o),mr("date",">=",u),mr("date","<=",f)),H=await Qt(M),te=performance.now();console.log(" getDocs ms:",(te-J).toFixed(1),"docs:",H.size);const ve=[];H.forEach(ee=>ve.push({id:ee.id,...ee.data()}));const Q=performance.now();console.log(" parse+set ms:",(Q-te).toFixed(1),"rows:",ve.length),ve.sort((ee,Fe)=>ee.date<Fe.date?1:ee.date>Fe.date?-1:0),x(ve),y(null);const Ke=new Set;ve.forEach(ee=>{(ee.sales||[]).forEach(Fe=>{const ce=String((Fe==null?void 0:Fe.id)??"").split("#")[0].trim();ce&&Ke.add(ce)})});const ae=Array.from(Ke).filter(ee=>!E[ee]);if(ae.length>0){const ee={};for(const Fe of ae)try{const ce=await si(Jt(ke,l,Fe));if(ce.exists()){const be=ce.data();ee[Fe]=VQe(be,Fe)}else ee[Fe]=[]}catch(ce){console.error("Error leyendo sale",Fe,ce),ee[Fe]=[]}F(Fe=>({...Fe,...ee}))}}catch(M){console.error(M),w(" Error cargando liquidaciones.")}finally{m(!1)}};g.useEffect(()=>{B()},[]),g.useEffect(()=>{D()},[]);const X=async J=>{J.preventDefault(),await D()},he=g.useMemo(()=>{const J={};return j.forEach(M=>J[M.id]=M.name||M.id),J},[j]),Ae=J=>{const M=[];return(J.sales||[]).forEach(H=>{const te=String((H==null?void 0:H.id)??"").trim();if(!te)return;const ve=te.split("#")[0],Ke=(E[ve]||[]).find(ae=>ae.id===te);Ke?M.push(Ke):M.push({id:te,productName:String((H==null?void 0:H.productName)??"(sin nombre)"),quantity:Number((H==null?void 0:H.quantity)??0),amount:Fs(Number((H==null?void 0:H.amount)??0)),date:String((H==null?void 0:H.date)??""),type:"CONTADO",vendorId:"",userEmail:String((H==null?void 0:H.userEmail)??"(sin vendedor)"),vendorCommissionAmount:0})}),M},fe=J=>_==="ALL"?J:J.filter(M=>(M.vendorId||"")===_),me=g.useMemo(()=>p.map(J=>{const M=fe(Ae(J));let H=0,te=0,ve=0,Q=0,Ke=0,ae=0;for(const ee of M){const Fe=Number(ee.quantity||0),ce=Number(ee.amount||0),be=Number(ee.vendorCommissionAmount||0);ee.type==="CREDITO"?(te+=Fe,Q+=ce,ae+=be):(H+=Fe,ve+=ce,Ke+=be)}return{...J,_sales:M,_packsCash:p0(H),_packsCredit:p0(te),_amountCash:Fs(ve),_amountCredit:Fs(Q),_comCash:Fs(Ke),_comCredit:Fs(ae)}}),[p,E,_]),ne=g.useMemo(()=>{let J=0,M=0,H=0,te=0,ve=0,Q=0;for(const Ke of me)J+=Number(Ke._packsCash||0),M+=Number(Ke._packsCredit||0),H+=Number(Ke._amountCash||0),te+=Number(Ke._amountCredit||0),ve+=Number(Ke._comCash||0),Q+=Number(Ke._comCredit||0);return{packsCash:p0(J),packsCredit:p0(M),totalSales:Fs(H+te),amountCash:Fs(H),amountCredit:Fs(te),comCash:Fs(ve),comCredit:Fs(Q)}},[me]),Pe=g.useMemo(()=>{const J={},M={};for(const H of me){const te=H._sales||[];for(const ve of te){const Q=(ve.vendorId||"").trim();if(!Q)continue;const Ke=he[Q]||ve.userEmail||Q,ae=Fs(Number(ve.vendorCommissionAmount||0));ve.type==="CREDITO"?(M[Q]||(M[Q]={vendorId:Q,name:Ke,total:0}),M[Q].total=Fs(M[Q].total+ae)):(J[Q]||(J[Q]={vendorId:Q,name:Ke,total:0}),J[Q].total=Fs(J[Q].total+ae))}}return{cashRows:Object.values(J).filter(H=>H.total>0).sort((H,te)=>te.total-H.total),creditRows:Object.values(M).filter(H=>H.total>0).sort((H,te)=>te.total-H.total)}},[me,he]),Te=g.useMemo(()=>j.map(J=>({id:J.id,label:J.name||J.id})).sort((J,M)=>J.label.localeCompare(M.label)),[j]),O=g.useMemo(()=>v&&me.find(J=>J.id===v.id)||null,[v,me]),K=g.useMemo(()=>O?O._sales||[]:[],[O]),q=g.useMemo(()=>{let J=0,M=0,H=0,te=0;for(const ve of K)ve.type==="CREDITO"?(M+=Number(ve.quantity||0),te+=Number(ve.amount||0)):(J+=Number(ve.quantity||0),H+=Number(ve.amount||0));return{packsCash:p0(J),packsCredit:p0(M),amountCash:Fs(H),amountCredit:Fs(te)}},[K]),U=g.useMemo(()=>{const J={};for(const M of K){const H=M.productName||"(sin nombre)";J[H]||(J[H]={productName:H,packsCash:0,packsCredit:0,amountCash:0,amountCredit:0,comCash:0,comCredit:0});const te=Number(M.quantity||0),ve=Number(M.amount||0),Q=Number(M.vendorCommissionAmount||0);M.type==="CREDITO"?(J[H].packsCredit=p0(J[H].packsCredit+te),J[H].amountCredit=Fs(J[H].amountCredit+ve),J[H].comCredit=Fs(J[H].comCredit+Q)):(J[H].packsCash=p0(J[H].packsCash+te),J[H].amountCash=Fs(J[H].amountCash+ve),J[H].comCash=Fs(J[H].comCash+Q))}return Object.values(J)},[K]),W=async()=>{if(!k.current||!O)return;const J=k.current;J.classList.add("force-pdf-colors");try{const H=(await jg(J,{backgroundColor:"#ffffff"})).toDataURL("image/png"),te=new qr;te.addImage(H,"PNG",10,10,190,0),te.save(`liquidacion_${O.date}.pdf`)}finally{J.classList.remove("force-pdf-colors")}};return i.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Liquidaciones"}),i.jsxs("form",{onSubmit:X,className:"flex flex-wrap items-end gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:u,onChange:J=>d(J.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:f,onChange:J=>A(J.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm",children:"Vendedor"}),i.jsxs("select",{className:"border rounded px-2 py-1 min-w-[240px]",value:_,onChange:J=>S(J.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),Te.map(J=>i.jsx("option",{value:J.id,children:J.label},J.id))]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-2xl font-bold",children:Ph(ne.packsCash)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-2xl font-bold",children:Ph(ne.packsCredit)})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",co(ne.totalSales)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",co(ne.amountCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",co(ne.amountCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",co(ne.comCash)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-2xl font-bold",children:["C$",co(ne.comCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),Pe.cashRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.cashRows.map(J=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:J.name}),i.jsxs("strong",{className:"ml-2",children:["C$",co(J.total)]})]},J.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),Pe.creditRows.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-28 overflow-auto pr-1",children:Pe.creditRows.map(J=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:J.name}),i.jsxs("strong",{className:"ml-2",children:["C$",co(J.total)]})]},J.vendorId))})]})]}),h?i.jsx("p",{children:"Cargando..."}):me.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin cierres en el rango seleccionado."}):i.jsxs("table",{className:"min-w-full text-sm mb-6 shadow-lg p-4 bg-white border-gray-100",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total paquetes Cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Total Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Total Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsx("tbody",{children:me.map(J=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:J.date}),i.jsx("td",{className:"border p-1",children:Ph(J._packsCash)}),i.jsx("td",{className:"border p-1",children:Ph(J._packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",co(J._amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J._amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J._comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J._comCredit)]}),i.jsx("td",{className:"border p-1",children:i.jsx("div",{className:"flex items-center gap-2 justify-center",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-2 py-1 rounded hover:bg-black",onClick:()=>y(J),children:"Ver detalle"})})})]},J.id))})]}),O&&i.jsxs("div",{className:"mt-6 rounded-2xl shadow-lg p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 ",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["Detalle ",O.date]}),i.jsx("button",{onClick:()=>y(null),className:"text-sm px-2 py-1 border rounded",children:"Cerrar"}),i.jsx("button",{onClick:W,className:"ml-auto bg-green-600 text-white px-3 py-1 rounded-2xl hover:bg-green-700 text-sm",children:"Descargar PDF"})]}),i.jsxs("div",{ref:k,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[i.jsxs("div",{children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",co(q.amountCash)]})]}),i.jsxs("div",{children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",co(q.amountCredit)]})]}),i.jsxs("div",{children:["Total paquetes cash:"," ",i.jsx("strong",{children:Ph(q.packsCash)})]}),i.jsxs("div",{children:["Total paquetes crdito:"," ",i.jsx("strong",{children:Ph(q.packsCredit)})]})]}),i.jsx("h3",{className:"font-semibold",children:"Ventas incluidas en el cierre"}),K.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin ventas en este cierre."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsx("tbody",{children:K.map((J,M)=>{const H=J.vendorId&&he[J.vendorId]?he[J.vendorId]:J.userEmail,te=Fs(Number(J.vendorCommissionAmount||0));return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:H}),i.jsx("td",{className:"border p-1",children:J.productName}),i.jsx("td",{className:"border p-1",children:J.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-1",children:Ph(J.quantity)}),i.jsxs("td",{className:"border p-1",children:["C$",co(J.amount)]}),i.jsx("td",{className:"border p-1",children:te>0?`C$${co(te)}`:""}),i.jsx("td",{className:"border p-1",children:J.date||""})]},M)})})]}),i.jsx("h3",{className:"font-semibold",children:"Consolidado por producto"}),U.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"Sin datos para consolidar."}):i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsx("tbody",{children:U.map((J,M)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:J.productName}),i.jsx("td",{className:"border p-1",children:Ph(J.packsCash)}),i.jsx("td",{className:"border p-1",children:Ph(J.packsCredit)}),i.jsxs("td",{className:"border p-1",children:["C$",co(J.amountCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J.amountCredit)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J.comCash)]}),i.jsxs("td",{className:"border p-1",children:["C$",co(J.comCredit)]})]},M))})]})]})]}),b&&i.jsx("p",{className:"mt-3 text-sm",children:b})]})}const Lr=t=>Math.round((Number(t)||0)*100)/100,il=t=>Math.round((Number(t)||0)*1e3)/1e3,Tr=t=>Number(t??0).toFixed(2),Zs=t=>Number(t??0).toFixed(3),XS=t=>{const e=String(t||"").toUpperCase().trim();return e==="RIVAS"?"RIVAS":e==="SAN_JORGE"||e==="SANJORGE"||e==="SJ"?"SAN_JORGE":e==="ISLA"||e==="OMETEPE"?"ISLA":""},jr=t=>{const e=Number(t);return Number.isFinite(e)?e:0},$Qe=t=>Math.max(0,Math.min(1,t));function iG({title:t,series:e,valuePrefix:r="C$"}){const u=e.map(b=>Number(b.value||0)),d=u.length?Math.min(...u):0,f=u.length?Math.max(...u):0,A=f-d||1,h=840,m=204,p=e.map((b,w)=>{const j=44+(e.length<=1?h/2:w/(e.length-1)*h),I=18+(1-(Number(b.value||0)-d)/A)*m;return{x:j,y:I,...b}}),x=p.map((b,w)=>`${w===0?"M":"L"} ${b.x.toFixed(2)} ${b.y.toFixed(2)}`).join(" "),v=p[p.length-1],y=v?v.value:0;return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base",children:t}),i.jsxs("div",{className:"text-xs text-gray-600 whitespace-nowrap",children:["ltimo: ",i.jsx("strong",{children:r+Tr(y)})]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("svg",{viewBox:"0 0 900 260",className:"min-w-[720px] w-full h-auto",role:"img","aria-label":t,children:[[0,1,2,3].map(b=>{const w=18+b/3*m;return i.jsx("line",{x1:44,y1:w,x2:884,y2:w,stroke:"#e5e7eb",strokeWidth:"1"},b)}),i.jsxs("text",{x:8,y:28,fontSize:"12",fill:"#6b7280",children:[r,Tr(f)]}),i.jsxs("text",{x:8,y:18+m,fontSize:"12",fill:"#6b7280",children:[r,Tr(d)]}),i.jsx("path",{d:x,fill:"none",stroke:"#111827",strokeWidth:"2.5"}),p.map((b,w)=>i.jsx("circle",{cx:b.x,cy:b.y,r:"3.5",fill:"#111827"},w)),e.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("text",{x:44,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"start",children:e[0].label}),i.jsx("text",{x:884,y:246,fontSize:"12",fill:"#6b7280",textAnchor:"end",children:e[e.length-1].label})]})]})})]})}function GQe({title:t,items:e}){const r=e.reduce((f,A)=>f+Number(A.value||0),0),n=240,a=86,s=120,o=120,l=r>0?r:1;let c=0;const u=["#111827","#374151","#6b7280","#9ca3af"],d=e.map((f,A)=>{const h=Math.max(0,Number(f.value||0)),m=c/l,p=h/l;c+=h;const x=m+p,v=m*Math.PI*2-Math.PI/2,y=x*Math.PI*2-Math.PI/2,b=s+a*Math.cos(v),w=o+a*Math.sin(v),j=s+a*Math.cos(y),I=o+a*Math.sin(y),_=p>.5?1:0;return{d:[`M ${s} ${o}`,`L ${b.toFixed(2)} ${w.toFixed(2)}`,`A ${a} ${a} 0 ${_} 1 ${j.toFixed(2)} ${I.toFixed(2)}`,"Z"].join(" "),fill:u[A%u.length],...f,frac:p}});return i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsx("div",{className:"font-semibold text-sm sm:text-base mb-2",children:t}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("div",{className:"w-full md:w-auto overflow-x-auto",children:i.jsxs("svg",{viewBox:`0 0 ${n} ${n}`,className:"min-w-[240px] w-[260px] h-auto",role:"img","aria-label":t,children:[d.map((f,A)=>i.jsx("path",{d:f.d,fill:f.fill},A)),i.jsx("circle",{cx:s,cy:o,r:"48",fill:"#ffffff"}),i.jsx("text",{x:s,y:o-4,textAnchor:"middle",fontSize:"12",fill:"#6b7280",children:"Total"}),i.jsxs("text",{x:s,y:o+16,textAnchor:"middle",fontSize:"14",fill:"#111827",fontWeight:"700",children:["C$",Tr(r)]})]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.map((f,A)=>{const h=Number(f.value||0),m=$Qe(h/(r||1))*100;return i.jsxs("div",{className:"border rounded-xl p-2 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-semibold truncate",children:f.label}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Tr(h)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[m.toFixed(1),"%"]}),i.jsx("div",{className:"h-2 bg-white border rounded-full mt-2 overflow-hidden",children:i.jsx("div",{className:"h-full",style:{width:`${m}%`,background:u[A%u.length]}})})]},f.label)})}),i.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"*Distribucin basada en ventas del perodo con los filtros actuales."})]})]})]})}const KQe=(t,e)=>{var x;const r=t.date??((x=t.timestamp)!=null&&x.toDate?Br(t.timestamp.toDate(),"yyyy-MM-dd"):"");if(!r)return[];const n=String(t.processedDate??t.closureDate??"").trim(),a=t.status??"FLOTANTE",s=t.type||"CONTADO",o=String(t.vendorId??"").trim(),l=String(t.vendorName??"").trim()||String(t.userEmail??"").trim()||o||"(sin vendedor)",c=String(t.customerId??"").trim(),u=String(t.customerName??"").trim()||String(t.clientName??"").trim()||"",d=Number(t.total??t.itemsTotal??t.amount??t.amountCharged??0)||0,f=Number(t.vendorCommissionAmount??0)||0,A=XS(t.branch??t.vendorBranch);if(Array.isArray(t.items)&&t.items.length>0)return t.items.map((v,y)=>{const b=Number((v==null?void 0:v.packages)??0)||0,w=Number((v==null?void 0:v.total)??0)||Math.max(0,Number((v==null?void 0:v.unitPricePackage)||0)*b-Number((v==null?void 0:v.discount)||0)),j=XS(v==null?void 0:v.branch)||A;let I=0;return f>0&&d>0&&w>0&&(I=Lr(f*w/d)),{id:`${e}#${y}`,docId:e,productId:String((v==null?void 0:v.productId)??""),productName:String((v==null?void 0:v.productName)??"(sin nombre)"),date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:j||"",packages:b,amount:Lr(w),commission:Lr(I)}});const h=Number(t.packagesTotal??0)||0,m=Number(t.total??t.amount??t.amountCharged??0)||0,p=Lr(Number(t.vendorCommissionAmount??0)||0);return[{id:`${e}#0`,docId:e,productId:"",productName:"(sin nombre)",date:r,processedDate:n,status:a,type:s,vendorId:o,vendorName:l,customerId:c,customerName:u,branch:A||"",packages:h,amount:Lr(m),commission:Lr(p)}]};function qQe({role:t,roles:e}){var He;const r=e&&e.length?e:t,n=!r||xn(r,"admin"),a=Br(new Date,"yyyy-MM-dd"),[s,o]=g.useState(a),[l,c]=g.useState(a),[u,d]=g.useState("TODAS"),[f,A]=g.useState("AMBAS"),[h,m]=g.useState("ALL"),[p,x]=g.useState("ALL"),[v,y]=g.useState(""),[b,w]=g.useState(""),[j,I]=g.useState(""),[_,S]=g.useState(""),[E,F]=g.useState("DIA"),[k,B]=g.useState(!0),[D,X]=g.useState(""),[he,Ae]=g.useState([]),[fe,me]=g.useState([]),[ne,Pe]=g.useState([]),[Te,O]=g.useState({}),[K,q]=g.useState([]),[U,W]=g.useState([]),[J,M]=g.useState([]),[H,te]=g.useState([]),[ve,Q]=g.useState([]),[Ke,ae]=g.useState([]),[ee,Fe]=g.useState(""),[ce,be]=g.useState(""),[Ve,We]=g.useState(null),pt=g.useRef(null),[wt,Ct]=g.useState([]),[St,Rt]=g.useState("DETALLE"),jt=g.useMemo(()=>{const P={};return U.forEach(R=>P[R.id]=String(R.name||"").trim()),P},[U]),Ue=g.useMemo(()=>{const P={};return fe.forEach(R=>P[R.id]=R),P},[fe]),Be=P=>{const R=P.customerId?jt[P.customerId]:"";return(P.customerName||R||"").trim()||(P.customerId?jt[P.customerId]||P.customerId:"")||""};g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await Qt(yt(ke,"inventory_candies")),L=[];R.forEach(G=>L.push({id:G.id,...G.data()})),Ct(L)}catch(R){console.error("inventory_candies all error:",R),Ct([])}})()},[n]),g.useEffect(()=>{(async()=>{try{const R=await Qt(yt(ke,"sellers_candies")),L=[];R.forEach(re=>{const ue=re.data();L.push({id:re.id,name:String(ue.name||"").trim(),commissionPercent:Number(ue.commissionPercent||0),branch:ue.branch||""})});const G=new Map;L.forEach(re=>G.set(re.id,re)),me(Array.from(G.values()).sort((re,ue)=>re.name.localeCompare(ue.name)))}catch(R){console.error(R)}})()},[]),g.useEffect(()=>{if(!n||!s||!l)return;B(!0),X("");const P=ar(yt(ke,"sales_candies"),mr("date",">=",s),mr("date","<=",l),wn("date","asc")),R=vd(P,L=>{const G=[];L.forEach(re=>G.push(...KQe(re.data(),re.id))),Ae(G),B(!1)},L=>{console.error("sales_candies periodo error:",L),Ae([]),B(!1),X(" Error cargando ventas del perodo (revis ndices si aplica).")});return()=>R()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=ar(yt(ke,"candy_main_orders"),mr("date",">=",s),mr("date","<=",l)),L=await Qt(R),G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),Pe(G)}catch(R){console.error("candy_main_orders error:",R),Pe([])}})()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await Qt(ar(yt(ke,"candy_main_orders"),wn("createdAt","desc"))),L={},G=(re,ue)=>`${re}#${String(ue).padStart(10,"0")}`;R.forEach(re=>{var ht;const ue=re.data(),$e=Number(((ht=ue.createdAt)==null?void 0:ht.seconds)??0),rt=String(ue.date||""),At=G(rt,$e),Je=Array.isArray(ue.items)?ue.items:[];for(const Ot of Je){const Se=String(Ot.id||Ot.productId||"");if(!Se)continue;const tt={unitPriceRivas:Number(Ot.unitPriceRivas||0),unitPriceSanJorge:Number(Ot.unitPriceSanJorge||0),unitPriceIsla:Number(Ot.unitPriceIsla||0),key:At},xt=L[Se];(!xt||tt.key>xt.key)&&(L[Se]=tt)}}),O(L)}catch(R){console.error("candy_main_orders catalog error:",R),O({})}})()},[n]),g.useEffect(()=>{if(!n)return;const P=ar(yt(ke,"inventory_candies_sellers"),mr("date",">=",s),mr("date","<=",l)),R=vd(P,L=>{const G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),q(G)},L=>{console.error("inventory_candies_sellers error:",L),q([])});return()=>R()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=ar(yt(ke,"expenses_candies"),mr("date",">=",s),mr("date","<=",l),wn("date","asc")),L=await Qt(R),G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),te(G)}catch(R){console.warn("expenses_candies sin ndice, usando fallback:",R);try{const L=await Qt(yt(ke,"expenses_candies")),G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),te(G.filter(re=>String(re.date||"")>=s&&String(re.date||"")<=l))}catch(L){console.error(L),te([])}}})()},[n,s,l]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await Qt(yt(ke,"inventory_candies")),L=[];R.forEach(G=>L.push({id:G.id,...G.data()})),Q(L)}catch(R){console.error("inventory_candies global error:",R),Q([])}})()},[n]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=await Qt(yt(ke,"inventory_candies_sellers")),L=[];R.forEach(G=>L.push({id:G.id,...G.data()})),ae(L)}catch(R){console.error("inventory_candies_sellers global error:",R),ae([])}})()},[n]),g.useEffect(()=>{if(!n)return;const P=ar(yt(ke,"customers_candies")),R=vd(P,L=>{const G=[];L.forEach(re=>{var ue,$e,rt;return G.push({id:re.id,name:String(((ue=re.data())==null?void 0:ue.name)||"").trim(),initialDebt:Number((($e=re.data())==null?void 0:$e.initialDebt)||0),initialDebtDate:String(((rt=re.data())==null?void 0:rt.initialDebtDate)||"").trim()})}),W(G)},L=>{console.error("customers_candies snapshot error:",L),W([])});return()=>R()},[n]),g.useEffect(()=>{if(!n)return;(async()=>{try{const R=ar(yt(ke,"ar_movements"),mr("date","<=",l),wn("date","asc")),L=await Qt(R),G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),M(G)}catch(R){console.warn("ar_movements sin ndice, usando fallback:",R);try{const L=await Qt(yt(ke,"ar_movements")),G=[];L.forEach(re=>G.push({id:re.id,...re.data()})),M(G.filter(re=>String(re.date||"")<=l))}catch(L){console.error(L),M([])}}})()},[n,l]);const ye=g.useMemo(()=>{let P=[...he];if(u!=="TODAS"&&(P=P.filter(G=>G.status===u)),f==="CASH"&&(P=P.filter(G=>G.type==="CONTADO")),f==="CREDITO"&&(P=P.filter(G=>G.type==="CREDITO")),h!=="ALL"&&(P=P.filter(G=>(G.vendorId||"")===h)),p!=="ALL"&&(P=P.filter(G=>G.branch===p)),v.trim()){const G=v.trim().toLowerCase();P=P.filter(re=>(re.productName||"").toLowerCase().includes(G))}if(b.trim()){const G=b.trim().toLowerCase();P=P.filter(re=>(Be(re)||"").toLowerCase().includes(G))}const R=j.trim()?Number(j):null,L=_.trim()?Number(_):null;return R!==null&&!Number.isNaN(R)&&(P=P.filter(G=>(G.amount||0)>=R)),L!==null&&!Number.isNaN(L)&&(P=P.filter(G=>(G.amount||0)<=L)),P},[he,u,f,h,p,v,b,j,_,jt]),oe=g.useMemo(()=>{let P=0,R=0,L=0,G=0,re=0,ue=0;for(const rt of ye){const At=jr(rt.packages),Je=jr(rt.amount),ht=jr(rt.commission);rt.type==="CREDITO"?(R+=At,G+=Je,ue+=ht):(P+=At,L+=Je,re+=ht)}const $e=Lr(L+G);return{packsCash:il(P),packsCredit:il(R),salesCash:Lr(L),salesCredit:Lr(G),salesTotal:$e,commCash:Lr(re),commCredit:Lr(ue),commTotal:Lr(re+ue)}},[ye]),Z=g.useMemo(()=>{let P=0,R=0,L=0,G=0,re=0,ue=0;for(const $e of ne){const rt=Array.isArray($e.items)?$e.items:[];for(const At of rt)P+=jr(At.totalRivas),R+=jr(At.totalSanJorge),L+=jr(At.totalIsla),G+=jr(At.gainRivas),re+=jr(At.gainSanJorge),ue+=jr(At.gainIsla)}return{expectedRivas:Lr(P),expectedSanJorge:Lr(R),expectedIsla:Lr(L),grossRivas:Lr(G),grossSanJorge:Lr(re),grossIsla:Lr(ue),grossTotal:Lr(G+re+ue),expectedTotal:Lr(P+R+L)}},[ne]),Ne=g.useMemo(()=>{const P={RIVAS:{sales:0,packages:0},SAN_JORGE:{sales:0,packages:0},ISLA:{sales:0,packages:0}};for(const R of ye){const L=R.branch;L&&(P[L].sales+=jr(R.amount),P[L].packages+=jr(R.packages))}return{RIVAS:{sales:Lr(P.RIVAS.sales),packages:il(P.RIVAS.packages)},SAN_JORGE:{sales:Lr(P.SAN_JORGE.sales),packages:il(P.SAN_JORGE.packages)},ISLA:{sales:Lr(P.ISLA.sales),packages:il(P.ISLA.packages)}}},[ye]),Re=g.useMemo(()=>({RIVAS:Lr(Ne.RIVAS.sales-Z.expectedRivas),SAN_JORGE:Lr(Ne.SAN_JORGE.sales-Z.expectedSanJorge),ISLA:Lr(Ne.ISLA.sales-Z.expectedIsla)}),[Ne,Z]),ge=g.useMemo(()=>{const P={},R={};for(const re of ye){const ue=(re.vendorId||"").trim();if(!ue)continue;const $e=fe.find(Je=>Je.id===ue),rt=($e==null?void 0:$e.name)||re.vendorName||"(sin vendedor)",At=jr(re.commission);re.type==="CREDITO"?(R[ue]||(R[ue]={vendorId:ue,name:rt,total:0}),R[ue].total=Lr(R[ue].total+At)):(P[ue]||(P[ue]={vendorId:ue,name:rt,total:0}),P[ue].total=Lr(P[ue].total+At))}const L=Object.values(P).sort((re,ue)=>ue.total-re.total),G=Object.values(R).sort((re,ue)=>ue.total-re.total);return{cashArr:L,creditArr:G}},[ye,fe]),Xe=g.useMemo(()=>{const P=(tt,xt)=>tt.reduce((kt,tr)=>kt+Number((tr==null?void 0:tr[xt])??0),0),R=tt=>{const xt=Number(tt);return Number.isFinite(xt)?Math.floor(xt):0},L=tt=>{const xt=Number((tt==null?void 0:tt.totalPackages)??0);if(xt>0)return xt;const kt=Array.isArray(tt==null?void 0:tt.items)?tt.items:[];return P(kt,"packages")};let G=0,re=0;for(const tt of ne){const xt=Array.isArray(tt.items)?tt.items:[];if(xt.length)for(const kt of xt)G+=Number((kt==null?void 0:kt.subtotal)??0);else G+=Number(tt.subtotal??0);re+=L(tt)}let ue=0,$e=0,rt=0;const At=tt=>{const xt=Number(tt==null?void 0:tt.remainingPackages);if(Number.isFinite(xt)&&xt>0)return Math.floor(xt);const kt=Math.max(1,R((tt==null?void 0:tt.unitsPerPackage)??1)),tr=R((tt==null?void 0:tt.remainingUnits)??(tt==null?void 0:tt.remaining)??0);return tr>0?Math.max(0,Math.floor(tr/kt)):0};for(const tt of K)ue+=Number(tt.subtotal??0),$e+=Number(tt.packages??0),rt+=At(tt);const Je=new Set(ne.filter(tt=>String(tt.date||"")>=s&&String(tt.date||"")<=l).map(tt=>tt.id));let ht=0;for(const tt of wt){const xt=String(tt.orderId||"").trim();xt&&Je.has(xt)&&(ht+=Number(tt.remainingPackages??0))}const Ot=ve.reduce((tt,xt)=>tt+jr(xt.remainingPackages),0),Se=Ke.reduce((tt,xt)=>tt+jr(xt.remainingPackages),0);return{providerTotalMaster:Lr(G),providerTotalVendor:Lr(ue),orderedPacksMaster:il(re),remainingPacksMaster:il(ht),orderedPacksVendor:il($e),remainingPacksVendor:il(rt),globalRemainingMaster:il(Ot),globalRemainingVendor:il(Se)}},[ne,K,wt,s,l,ve,Ke]),vt=g.useMemo(()=>{const P={};let R=0;for(const L of H){const G=String(L.date||"").trim();if(!G)continue;const re=Math.max(0,jr(L.amount));R+=re,P[G]=Lr((P[G]||0)+re)}return{total:Lr(R),byDay:P}},[H]),it=g.useMemo(()=>{let P=0;for(const R of ne){const L=Array.isArray(R.items)?R.items:[];if(L.length)for(const G of L)P+=jr(G==null?void 0:G.subtotal);else P+=jr(R.subtotal)}return Lr(P)},[ne]),de=g.useMemo(()=>{var At;const P=Je=>{const ht=Math.max(1,Math.floor(jr(Je.unitsPerPackage||1))),Ot=jr(Je.totalUnits)>0?jr(Je.totalUnits):jr(Je.packages)*ht;let Se=0;jr(Je.remainingUnits)>0?Se=jr(Je.remainingUnits):jr(Je.remainingPackages)>0?Se=jr(Je.remainingPackages)*ht:Se=0;const tt=Math.max(0,Ot-Se);return{orderedUnits:Ot,remainingUnits:Se,soldUnits:tt,upp:ht}},R=Je=>{const ht=Ue[Je];return XS(ht==null?void 0:ht.branch)||"ISLA"},L=(Je,ht)=>{var Ot,Se,tt;return ht==="ISLA"?jr(((Ot=Te[String(Je.productId||"")])==null?void 0:Ot.unitPriceIsla)??Je.unitPriceIsla):ht==="RIVAS"?jr(((Se=Te[String(Je.productId||"")])==null?void 0:Se.unitPriceRivas)??Je.unitPriceRivas):ht==="SAN_JORGE"?jr(((tt=Te[String(Je.productId||"")])==null?void 0:tt.unitPriceSanJorge)??Je.unitPriceSanJorge):0},G=(Je,ht)=>{const Ot=Math.max(0,Math.floor(jr(Je.packages))),Se=L(Je,ht),tt=Lr(Se*Ot);if(tt>0)return tt;const xt=jr(Je.totalVendor)||(ht==="ISLA"?jr(Je.totalIsla):ht==="RIVAS"?jr(Je.totalRivas):ht==="SAN_JORGE"?jr(Je.totalSanJorge):0);if(xt>0)return xt;const kt=jr(Je.unitPriceVendor);if(kt>0){const{orderedUnits:tr}=P(Je);return kt*tr}return 0},re=(Je,ht)=>{const Ot=L(Je,ht),{orderedUnits:Se,upp:tt}=P(Je);if(Ot>0&&tt>0)return Ot/tt;const xt=jr(Je.unitPriceVendor);if(xt>0)return xt;const kt=G(Je,ht);return kt>0&&Se>0?kt/Se:0},ue=new Map;for(const Je of K){const ht=String(Je.orderId||"").trim(),Ot=ht||`DOC:${Je.id}`,Se=String(Je.sellerId||"").trim(),tt=String(Je.sellerName||"").trim()||Se&&((At=Ue[Se])==null?void 0:At.name)||""||"(sin vendedor)",xt=String(Je.date||"").trim(),kt=Se?R(Se):"",{orderedUnits:tr,remainingUnits:nr,soldUnits:cr}=P(Je),Nr=G(Je,kt),mn=re(Je,kt),Mr=mn>0?mn*cr:tr>0?Nr*cr/tr:0,Vr=Lr(Nr-Mr);ue.has(Ot)||ue.set(Ot,{orderKey:Ot,orderId:ht||Ot,date:xt,sellerId:Se,sellerName:tt,branch:kt,totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0,lines:[]});const fn=ue.get(Ot);fn.lines.push({...Je,orderedUnits:tr,soldUnits:cr,remainingUnits:nr,lineTotal:Lr(Nr),lineSoldValue:Lr(Mr),lineRemainingValue:Lr(Vr)}),fn.totalOrden+=Nr,fn.vendido+=Mr,fn.restante+=Vr,fn.comision+=jr(Je.uVendor??Je.vendorProfit??Je.gainVendor)}for(const Je of ue.values())Je.comision=Lr(Je.comision),Je.totalEsperado=Lr(Je.totalOrden-Je.comision),Je.totalOrden=Lr(Je.totalOrden),Je.vendido=Lr(Je.vendido),Je.restante=Lr(Je.restante);const $e=Array.from(ue.values()).sort((Je,ht)=>Je.date&&ht.date?Je.date<ht.date?1:-1:ht.totalOrden-Je.totalOrden),rt=$e.reduce((Je,ht)=>(Je.totalOrden+=jr(ht.totalOrden),Je.vendido+=jr(ht.vendido),Je.restante+=jr(ht.restante),Je.comision+=jr(ht.comision),Je.totalEsperado+=jr(ht.totalEsperado),Je),{totalOrden:0,vendido:0,restante:0,comision:0,totalEsperado:0});return{global:{totalOrden:Lr(rt.totalOrden),vendido:Lr(rt.vendido),restante:Lr(rt.restante),comision:Lr(rt.comision),totalEsperado:Lr(rt.totalEsperado)},orders:$e}},[K,Ue,Te]),Ce=g.useMemo(()=>{var G,re,ue;let P=0,R=0;for(const $e of K){const rt=String($e.sellerId||"").trim(),At=rt?Ue[rt]:void 0,Je=XS(At==null?void 0:At.branch)||"ISLA",ht=Math.max(0,Math.floor(jr($e.packages)));if(!ht)continue;const Ot=jr(Je==="ISLA"?((G=Te[String($e.productId||"")])==null?void 0:G.unitPriceIsla)??$e.unitPriceIsla:Je==="RIVAS"?((re=Te[String($e.productId||"")])==null?void 0:re.unitPriceRivas)??$e.unitPriceRivas:((ue=Te[String($e.productId||"")])==null?void 0:ue.unitPriceSanJorge)??$e.unitPriceSanJorge);let Se=Lr(Ot*ht);Se||(Se=jr(Je==="ISLA"?$e.totalIsla:Je==="RIVAS"?$e.totalRivas:$e.totalSanJorge)),Se&&(P+=Se,R+=Se)}const L=Lr(jr(Z.expectedIsla)-R);return{dispersedTotal:Lr(P),dispersedIsla:Lr(R),totalExistenteIsla:L}},[K,Ue,Z.expectedIsla,Te]),Ye=g.useMemo(()=>({net:Lr(K.reduce((R,L)=>{const G=L.uNeta,re=jr(G);if(re!==0||G===0)return R+re;const ue=jr(L.grossProfit),$e=jr(L.logisticAllocated??L.gastos??L.gasto),rt=jr(L.uVendor??L.vendorProfit);return R+(ue-$e-rt)},0))}),[K]),ft=g.useMemo(()=>{let P=0,R=0,L=0;for(const G of ye){if(G.type!=="CREDITO")continue;const re=jr(G.amount),ue=jr(G.commission);P+=re,R+=re-ue}for(const G of J){const re=String(G.date||"").trim();if(!re||re<s||re>l)continue;const ue=jr(G.amount);(G.type||(ue<0?"ABONO":"CARGO"))==="ABONO"&&(L+=Math.abs(ue))}return{cxc:Lr(P),recaudado:Lr(L),utilidadBruta:Lr(R)}},[ye,J,s,l]),we=g.useMemo(()=>{if(!ce)return null;const P=de.orders.find(G=>G.orderKey===ce);if(!P)return null;const R={};for(const G of P.lines){const re=String(G.productName||"(sin nombre)");R[re]||(R[re]={productName:re,asociados:0,vendidos:0,restantes:0});const ue=Math.max(0,Math.floor(jr(G.packages))),$e=Math.max(1,Math.floor(jr(G.unitsPerPackage||1))),rt=Math.max(0,Math.floor(jr(G.remainingPackages)||(jr(G.remainingUnits)>0?jr(G.remainingUnits)/$e:0))),At=Math.max(0,ue-rt);R[re].asociados+=ue,R[re].vendidos+=At,R[re].restantes+=rt}const L=Object.values(R).map(G=>({...G,asociados:Math.floor(G.asociados),vendidos:Math.floor(G.vendidos),restantes:Math.floor(G.restantes)})).sort((G,re)=>re.asociados-G.asociados);return{...P,products:L}},[ce,de.orders]),Le=g.useMemo(()=>{const P=ve.reduce((L,G)=>L+jr(G.remainingPackages),0),R=Ke.reduce((L,G)=>L+jr(G.remainingPackages),0);return{masterRemainingPackages:il(P),vendorRemainingPackages:il(R)}},[ve,Ke]),gt=g.useMemo(()=>{const P=new Map,R=G=>E==="DIA"?{key:G.date,label:G.date}:E==="VENDEDOR"?{key:G.vendorId||"",label:G.vendorName||""}:E==="PRODUCTO"?{key:G.productName||"",label:G.productName||""}:{key:G.branch||"",label:G.branch||""};for(const G of ye){const{key:re,label:ue}=R(G);P.has(re)||P.set(re,{key:re,label:ue,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0,rows:[]});const $e=P.get(re);$e.rows.push(G),G.type==="CREDITO"?($e.packsCredit+=jr(G.packages),$e.salesCredit+=jr(G.amount),$e.commCredit+=jr(G.commission)):($e.packsCash+=jr(G.packages),$e.salesCash+=jr(G.amount),$e.commCash+=jr(G.commission))}const L=Array.from(P.values()).map(G=>({...G,packsCash:il(G.packsCash),packsCredit:il(G.packsCredit),salesCash:Lr(G.salesCash),salesCredit:Lr(G.salesCredit),commCash:Lr(G.commCash),commCredit:Lr(G.commCredit)}));return E==="DIA"?L.sort((G,re)=>G.key<re.key?1:-1):L.sort((G,re)=>re.salesCash+re.salesCredit-(G.salesCash+G.salesCredit)),L},[ye,E]),Ut=g.useMemo(()=>{if(!ee)return[];const P=gt.find(R=>R.key===ee);return(P==null?void 0:P.rows)||[]},[ee,gt]),Mt=g.useMemo(()=>{const P={};for(const R of Ut){const L=R.productName||"(sin nombre)";P[L]||(P[L]={productName:L,packsCash:0,packsCredit:0,salesCash:0,salesCredit:0,commCash:0,commCredit:0}),R.type==="CREDITO"?(P[L].packsCredit+=jr(R.packages),P[L].salesCredit+=jr(R.amount),P[L].commCredit+=jr(R.commission)):(P[L].packsCash+=jr(R.packages),P[L].salesCash+=jr(R.amount),P[L].commCash+=jr(R.commission))}return Object.values(P).map(R=>({...R,packsCash:il(R.packsCash),packsCredit:il(R.packsCredit),salesCash:Lr(R.salesCash),salesCredit:Lr(R.salesCredit),commCash:Lr(R.commCash),commCredit:Lr(R.commCredit)})).sort((R,L)=>L.salesCash+L.salesCredit-(R.salesCash+R.salesCredit))},[Ut]),Yt=g.useMemo(()=>{const P={},R=ue=>(jt[ue]||"").trim()||ue;for(const ue of U){const $e=String(ue.id||"").trim();$e&&(P[$e]={customerId:$e,name:R($e),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:jr(ue.initialDebt),initialDebtDate:String(ue.initialDebtDate||"").trim(),movements:[]})}for(const ue of J){const $e=String(ue.customerId||"").trim();if(!$e)continue;const rt=String(ue.date||"");rt&&rt>l||(P[$e]||(P[$e]={customerId:$e,name:R($e),balance:0,lastPayment:"",lastPaymentAmount:0,initialDebt:0,initialDebtDate:"",movements:[]}),P[$e].movements.push(ue))}const L=(ue,$e,rt)=>{const At=Number(ue||0);if(!At)return 0;const Je=String($e||"").trim();return Je&&rt.some(Ot=>{var tr;const Se=Number(Ot.amount||0);if(!(Se>0))return!1;const tt=Math.abs(Se-At)<.01,xt=String(Ot.date||"").trim()===Je,kt=!!((tr=Ot.ref)!=null&&tr.saleId);return tt&&xt&&kt})?0:At},G=Object.values(P).map(ue=>{const $e=ue.movements.reduce((ht,Ot)=>ht+jr(Ot.amount),0),rt=L(ue.initialDebt,ue.initialDebtDate,ue.movements);let At="",Je=0;for(const ht of ue.movements){const Ot=ht.type||(jr(ht.amount)<0?"ABONO":"CARGO"),Se=String(ht.date||"");if(Ot==="ABONO"){const tt=Math.abs(jr(ht.amount));(!At||Se>At)&&(At=Se,Je=tt)}}return{customerId:ue.customerId,name:ue.name,balance:Lr(rt+$e),lastPayment:At,lastPaymentAmount:Lr(Je)}}).filter(ue=>ue.balance>0).sort((ue,$e)=>$e.balance-ue.balance),re=Lr(G.reduce((ue,$e)=>ue+$e.balance,0));return{count:G.length,totalPending:re,list:G.slice(0,20)}},[J,jt,U,l]),st=g.useMemo(()=>{if(!Ve)return[];const P=J.filter(L=>(L.customerId||"").trim()===Ve.customerId).filter(L=>!L.date||String(L.date)<=l).map(L=>({id:L.id,date:String(L.date||""),type:String(L.type||""),amount:Lr(jr(L.amount))})).sort((L,G)=>L.date<G.date?-1:L.date>G.date?1:0);let R=0;return P.map(L=>{const G=L.type==="ABONO"?-L.amount:L.amount;return R=Lr(R+G),{...L,running:R}})},[Ve,J,l]),_e=g.useMemo(()=>Ve?he.filter(P=>(P.customerId||"").trim()===Ve.customerId).filter(P=>!P.date||String(P.date)<=l).sort((P,R)=>P.date<R.date?-1:P.date>R.date?1:0):[],[Ve,he,l]),xe=g.useMemo(()=>{const P=Lr(oe.salesTotal),R=Lr(oe.commTotal),L=Lr(vt.total),G=Lr(P-R-L),re=new Set;for(const ht of ye)ht.date&&re.add(ht.date);const ue=Math.max(1,re.size),$e=Lr(P/ue),rt=Lr(R/ue),At=Lr(L/ue),Je=Lr(G/ue);return{ingreso:P,comision:R,gastos:L,gananciaNeta:G,daysCount:ue,ingresoDia:$e,comisionDia:rt,gastosDia:At,netaDia:Je}},[oe,vt.total,ye]),ie=g.useMemo(()=>{const P={};for(const re of ye){const ue=re.date;ue&&(P[ue]||(P[ue]={date:ue,ingreso:0,comision:0}),P[ue].ingreso+=jr(re.amount),P[ue].comision+=jr(re.commission))}const R=Object.keys(P).sort((re,ue)=>re<ue?-1:1),L=R.map(re=>({label:re.slice(5),value:Lr(P[re].ingreso)})),G=R.map(re=>{var Je,ht;const ue=jr((Je=P[re])==null?void 0:Je.ingreso),$e=jr((ht=P[re])==null?void 0:ht.comision),rt=jr(vt.byDay[re]||0),At=ue-$e-rt;return{label:re.slice(5),value:Lr(At)}});return{seriesIngreso:L,seriesNeta:G,datesCount:R.length}},[ye,vt.byDay]),Oe=g.useMemo(()=>[{label:"Rivas",value:jr(Ne.RIVAS.sales)},{label:"San Jorge",value:jr(Ne.SAN_JORGE.sales)},{label:"Isla",value:jr(Ne.ISLA.sales)}].map(P=>({...P,value:Lr(P.value)})),[Ne]),le=async()=>{if(pt.current){pt.current.classList.add("force-pdf-colors");try{const R=(await jg(pt.current,{backgroundColor:"#ffffff"})).toDataURL("image/png"),L=new qr;L.addImage(R,"PNG",10,10,190,0),L.save(`data_center_dulces_${s}_a_${l}.pdf`)}finally{pt.current.classList.remove("force-pdf-colors")}}},De=()=>{const R=[["date","processedDate","status","type","vendorId","vendorName","branch","productName","packages","amount","commission","customerId","customerName"].join(","),...ye.map(ue=>[ue.date,ue.processedDate||"",ue.status,ue.type,ue.vendorId,`"${String(ue.vendorName||"").replace(/"/g,'""')}"`,ue.branch||"",`"${String(ue.productName||"").replace(/"/g,'""')}"`,Zs(ue.packages),Tr(ue.amount),Tr(ue.commission),ue.customerId||"",`"${String(Be(ue)||"").replace(/"/g,'""')}"`].join(","))],L=new Blob([R.join(`
`)],{type:"text/csv;charset=utf-8;"}),G=URL.createObjectURL(L),re=document.createElement("a");re.href=G,re.download=`data_center_dulces_${s}_a_${l}.csv`,re.click(),URL.revokeObjectURL(G)};return n?i.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-0",children:[i.jsxs("div",{className:"bg-white p-3 sm:p-4 md:p-6 rounded-2xl shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between mb-4",children:[i.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Data Center - Dulces"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-end",children:[i.jsx("button",{onClick:le,className:`
                inline-flex items-center justify-center gap-2
                w-full sm:w-auto
                px-3 py-2 text-sm font-semibold
                rounded-lg md:rounded-md
                bg-green-600 text-white hover:bg-green-700 transition-colors
              `,children:"Exportar PDF"}),i.jsx("button",{onClick:De,className:`
                inline-flex items-center justify-center gap-2
                w-full sm:w-auto
                px-3 py-2 text-sm font-semibold
                rounded-lg md:rounded-md
                bg-gray-800 text-white hover:bg-black transition-colors
              `,children:"Exportar CSV"})]})]}),i.jsx("div",{className:"rounded-2xl border border-gray-100 p-3 sm:p-4 mb-3 shadow-sm bg-white",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:s,onChange:P=>o(P.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded-lg px-3 py-2 w-full text-sm",value:l,onChange:P=>c(P.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Estado"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:u,onChange:P=>d(P.target.value),children:[i.jsx("option",{value:"TODAS",children:"Todas"}),i.jsx("option",{value:"FLOTANTE",children:"Flotante"}),i.jsx("option",{value:"PROCESADA",children:"Procesada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Tipo"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:f,onChange:P=>A(P.target.value),children:[i.jsx("option",{value:"AMBAS",children:"Ambas"}),i.jsx("option",{value:"CASH",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Vendedor"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:h,onChange:P=>m(P.target.value),children:[i.jsx("option",{value:"ALL",children:"Todos"}),fe.map(P=>i.jsx("option",{value:P.id,children:P.name||P.id},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Sucursal"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:p,onChange:P=>x(P.target.value),children:[i.jsx("option",{value:"ALL",children:"Todas"}),i.jsx("option",{value:"RIVAS",children:"Rivas"}),i.jsx("option",{value:"SAN_JORGE",children:"San Jorge"}),i.jsx("option",{value:"ISLA",children:"Isla"})]})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Producto (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:v,onChange:P=>y(P.target.value),placeholder:"Ej: Conitos"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Cliente (opcional)"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:b,onChange:P=>w(P.target.value),placeholder:"Ej: Javier"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto min"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:j,onChange:P=>I(P.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Monto max"}),i.jsx("input",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:_,onChange:P=>S(P.target.value),placeholder:"999999"})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block text-xs text-gray-600",children:"Agrupar por"}),i.jsxs("select",{className:"border rounded-lg px-3 py-2 w-full text-sm",value:E,onChange:P=>{Fe(""),F(P.target.value)},children:[i.jsx("option",{value:"DIA",children:"Da"}),i.jsx("option",{value:"VENDEDOR",children:"Vendedor"}),i.jsx("option",{value:"PRODUCTO",children:"Producto"}),i.jsx("option",{value:"SUCURSAL",children:"Sucursal"})]})]})]})}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{be(""),Rt("MACRO")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",St==="MACRO"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Macro"}),i.jsx("button",{onClick:()=>{be(""),Rt("DETALLE")},className:["px-3 py-2 rounded-full text-sm font-semibold border transition-colors",St==="DETALLE"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-800 border-gray-200 hover:bg-gray-50"].join(" "),children:"Data Detalle"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Gastos del perodo (expenses_candies):"," ",i.jsxs("strong",{children:["C$",Tr(vt.total)]})]})]}),i.jsxs("div",{ref:pt,children:[St==="MACRO"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ingreso (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(xe.ingreso)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin vendedor (ventas)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Tr(xe.comision)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Tr(oe.commCash),"  Crdito: C$",Tr(oe.commCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Gastos (expenses_candies)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["-C$",Tr(xe.gastos)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Se calcula automtico por fechas"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ganancia neta (real)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(xe.gananciaNeta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ingreso  Comisin  Gastos"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Promedio neto por da"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(xe.netaDia)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Das con ventas: ",i.jsx("strong",{children:xe.daysCount})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3",children:[i.jsx(iG,{title:"Ventas por da (Ingreso)",series:ie.seriesIngreso,valuePrefix:"C$"}),i.jsx(iG,{title:"Ganancia neta por da (real)",series:ie.seriesNeta,valuePrefix:"C$"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(GQe,{title:"Distribucin de ventas por sucursal",items:Oe})})]}),St==="DETALLE"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(oe.packsCash)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(oe.packsCredit)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas totales"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(oe.salesTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Tr(oe.salesCash),"  Crdito: C$",Tr(oe.salesCredit)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(oe.commTotal)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Cash: C$",Tr(oe.commCash),"  Crdito: C$",Tr(oe.commCredit)]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad Bruta Aprox. (rdenes maestras)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Z.grossIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Tr(Z.expectedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Actual ventas (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Tr(Ne.ISLA.sales)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Diferencia vs esperado (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold mt-2",children:["C$",Tr(Re.ISLA)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Isla Ometepe"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado (precio proveedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(it)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes maestras (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad neta (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Ye.net)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"U bruta  Gastos  U vendedor"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(Xe.orderedPacksMaster)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Zs(Xe.remainingPacksMaster)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Zs(Le.masterRemainingPackages)})]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes ordenados (rdenes vendedor)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(Xe.orderedPacksVendor)}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Restantes (perodo):"," ",i.jsx("strong",{children:Zs(Xe.remainingPacksVendor)})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Existencia global (todas):"," ",i.jsx("strong",{children:Zs(Le.vendorRemainingPackages)})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total facturado a precio proveedor (rdenes vendedor)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Xe.providerTotalVendor)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Productos dispersados (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Ce.dispersedTotal)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sumatoria rdenes de vendedores (perodo)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Dispersado Isla (precio venta)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Ce.dispersedIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Usado para Total existente"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total existente en productos (Isla)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(Ce.totalExistenteIsla)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Esperado Isla  Dispersado Isla"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"CxC (ventas crdito)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(ft.cxc)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(oe.commCredit)]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"  ",l]})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Recaudacin (abonos)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(ft.recaudado)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"abonos en ar_movements"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Utilidad bruta crdito (ventas  comisin)"}),i.jsxs("div",{className:"text-xl sm:text-2xl font-bold",children:["C$",Tr(ft.utilidadBruta)]}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Paquetes vendidos al crdito"})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-4 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Global)"}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Basado en ",i.jsx("strong",{children:"precio de venta"})," (por sucursal del vendedor)"]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Tr(de.global.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Tr(de.global.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Tr(de.global.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Tr(de.global.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Tr(de.global.totalEsperado)]})]})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[i.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"rdenes de vendedores (Detalle por orden)"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Click/Tap en una orden para ver productos asociados/vendidos/restantes"})]}),de.orders.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:de.orders.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-semibold truncate",children:P.orderId}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1 truncate",children:[P.sellerName," ",P.branch?` ${P.branch}`:""," ",P.date?` ${P.date}`:""]})]}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>be(P.orderKey),children:"Ver"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Total"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.totalOrden)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendido"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.vendido)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restante"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.restante)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.comision)]})]})]})]},P.orderKey))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Total orden"}),i.jsx("th",{className:"border p-2",children:"Vendido"}),i.jsx("th",{className:"border p-2",children:"Restante"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Total esperado"}),i.jsx("th",{className:"border p-2",children:"Accin"})]})}),i.jsx("tbody",{children:de.orders.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.sellerName}),i.jsx("td",{className:"border p-2",children:P.branch||""}),i.jsx("td",{className:"border p-2",children:P.date||""}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.totalOrden)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.vendido)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.restante)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.comision)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.totalEsperado)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>be(P.orderKey),children:"Ver detalle"})})]},P.orderKey))})]})}),we&&i.jsxs("div",{className:"mt-4 rounded-2xl border-2 border-gray-100 p-3 sm:p-4 shadow-lg bg-white",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h4",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle orden vendedor  ",we.orderId]}),i.jsx("button",{onClick:()=>be(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total orden:"," ",i.jsxs("strong",{children:["C$",Tr(we.totalOrden)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Vendido:"," ",i.jsxs("strong",{children:["C$",Tr(we.vendido)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Restante:"," ",i.jsxs("strong",{children:["C$",Tr(we.restante)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Comisin:"," ",i.jsxs("strong",{children:["C$",Tr(we.comision)]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total esperado:"," ",i.jsxs("strong",{children:["C$",Tr(we.totalEsperado)]})]})]}),i.jsx("h5",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Productos asociados (Nombre - Asociados - Vendidos - Restantes)"}),i.jsx("div",{className:"md:hidden space-y-2",children:we.products.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:P.productName}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Asociados"}),i.jsx("div",{className:"font-bold",children:P.asociados})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendidos"}),i.jsx("div",{className:"font-bold",children:P.vendidos})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Restantes"}),i.jsx("div",{className:"font-bold",children:P.restantes})]})]})]},P.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Nombre producto"}),i.jsx("th",{className:"border p-2",children:"Asociados"}),i.jsx("th",{className:"border p-2",children:"Vendidos"}),i.jsx("th",{className:"border p-2",children:"Restantes"})]})}),i.jsxs("tbody",{children:[we.products.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.productName}),i.jsx("td",{className:"border p-2",children:P.asociados}),i.jsx("td",{className:"border p-2",children:P.vendidos}),i.jsx("td",{className:"border p-2",children:P.restantes})]},P.productName)),we.products.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-500",children:"Sin productos."})})]})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (maestras)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(Le.masterRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Existencia global (vendedores)"}),i.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:Zs(Le.vendorRemainingPackages)}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"remainingPackages (todas)"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin cash)"}),ge.cashArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ge.cashArr.map(P=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:P.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Tr(P.total)]})]},P.vendorId))})]}),i.jsxs("div",{className:"border rounded-xl p-3 shadow-sm bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Vendedores (comisin crdito)"}),ge.creditArr.length===0?i.jsx("div",{className:"text-sm text-gray-500 mt-2",children:""}):i.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-auto pr-1",children:ge.creditArr.map(P=>i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"truncate",children:P.name}),i.jsxs("strong",{className:"ml-2",children:["C$",Tr(P.total)]})]},P.vendorId))})]})]}),i.jsxs("div",{className:"border rounded-2xl p-3 sm:p-4 mb-6 shadow-sm bg-white border-gray-100",children:[i.jsxs("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:["Saldos pendientes (hasta ",l,")"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm mb-3",children:[i.jsxs("div",{children:["Clientes con saldo: ",i.jsx("strong",{children:Yt.count})]}),i.jsxs("div",{children:["Saldo total pendiente:"," ",i.jsxs("strong",{children:["C$",Tr(Yt.totalPending)]})]}),i.jsx("div",{className:"text-gray-500",children:"*Muestra top 20 por monto"})]}),Yt.list.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:""}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2",children:Yt.list.map(P=>i.jsxs("div",{className:"border rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.name}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Tr(P.balance)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["ltimo abono: ",i.jsxs("b",{children:["C$",Tr(P.lastPaymentAmount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Fecha ult. abono:"," ",i.jsx("span",{className:"font-medium",children:P.lastPayment||""})]}),i.jsx("div",{className:"mt-2",children:i.jsx("button",{type:"button",onClick:()=>We(P),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},P.customerId))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:"Cliente"}),i.jsx("th",{className:"border p-2",children:"Saldo pendiente"}),i.jsx("th",{className:"border p-2",children:"ltimo abono"}),i.jsx("th",{className:"border p-2",children:"Fecha ult. abono"}),i.jsx("th",{className:"border p-2",children:"Ver"})]})}),i.jsx("tbody",{children:Yt.list.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.name}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.balance)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.lastPaymentAmount)]}),i.jsx("td",{className:"border p-2",children:P.lastPayment||""}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{type:"button",onClick:()=>We(P),className:"px-3 py-1 rounded bg-indigo-600 text-white text-xs hover:bg-indigo-700",children:"Ver"})})]},P.customerId))})]})})]})]}),i.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row sm:items-center gap-2",children:[i.jsxs("h3",{className:"font-semibold text-sm sm:text-base",children:["Tabla principal (Agrupar por: ",E,")"]}),i.jsx("span",{className:"text-xs text-gray-500 sm:ml-auto",children:"Tap/Click en Ver detalle para drill-down"})]}),k?i.jsx("p",{className:"text-sm",children:"Cargando..."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"md:hidden space-y-2 mb-6",children:gt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."}):gt.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3 shadow-sm bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.label}),i.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-800 text-white text-sm font-semibold",onClick:()=>Fe(P.key),children:"Ver detalle"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes cash"}),i.jsx("div",{className:"font-bold",children:Zs(P.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes crdito"}),i.jsx("div",{className:"font-bold",children:Zs(P.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.commCredit)]})]})]})]},P.key))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-6 shadow-2xl rounded-xl border",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2 text-left",children:E==="DIA"?"Da":E==="VENDEDOR"?"Vendedor":E==="PRODUCTO"?"Producto":"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"}),i.jsx("th",{className:"border p-2",children:"Opciones"})]})}),i.jsxs("tbody",{children:[gt.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.label}),i.jsx("td",{className:"border p-2",children:Zs(P.packsCash)}),i.jsx("td",{className:"border p-2",children:Zs(P.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.commCredit)]}),i.jsx("td",{className:"border p-2",children:i.jsx("button",{className:"text-xs bg-gray-800 text-white px-3 py-2 rounded-lg hover:bg-black",onClick:()=>Fe(P.key),children:"Ver detalle"})})]},P.key)),gt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin datos con los filtros seleccionados."})})]})]})})]}),ee&&i.jsxs("div",{className:"rounded-2xl shadow-lg p-3 sm:p-4 bg-white border-solid border-2 border-gray-100",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-3",children:[i.jsxs("h2",{className:"text-base sm:text-xl font-semibold truncate",children:["Detalle "," ",((He=gt.find(P=>P.key===ee))==null?void 0:He.label)||ee]}),i.jsx("button",{onClick:()=>Fe(""),className:"w-full sm:w-auto text-sm px-3 py-2 border rounded-lg hover:bg-gray-50",children:"Cerrar"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm mb-4",children:[i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas cash:"," ",i.jsxs("strong",{children:["C$",Tr(Ut.filter(P=>P.type==="CONTADO").reduce((P,R)=>P+jr(R.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total Ventas crdito:"," ",i.jsxs("strong",{children:["C$",Tr(Ut.filter(P=>P.type==="CREDITO").reduce((P,R)=>P+jr(R.amount),0))]})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes cash:"," ",i.jsx("strong",{children:Zs(Ut.filter(P=>P.type==="CONTADO").reduce((P,R)=>P+jr(R.packages),0))})]}),i.jsxs("div",{className:"border rounded-xl p-3 bg-gray-50",children:["Total paquetes crdito:"," ",i.jsx("strong",{children:Zs(Ut.filter(P=>P.type==="CREDITO").reduce((P,R)=>P+jr(R.packages),0))})]})]}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Ventas incluidas"}),i.jsx("div",{className:"md:hidden space-y-2 mb-4",children:Ut.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin detalle."}):Ut.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:P.productName}),i.jsxs("div",{className:"text-sm font-bold whitespace-nowrap",children:["C$",Tr(P.amount)]})]}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Vendedor:"," ",i.jsx("span",{className:"font-medium",children:P.vendorName})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Tipo"}),i.jsx("div",{className:"font-bold",children:P.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Sucursal"}),i.jsx("div",{className:"font-bold",children:P.branch||""})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paquetes"}),i.jsx("div",{className:"font-bold",children:Zs(P.packages)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Comisin"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.commission)]})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Fecha: ",P.date]})]},P.id))}),i.jsx("div",{className:"hidden md:block overflow-x-auto mb-4",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Sucursal"}),i.jsx("th",{className:"border p-2",children:"Paquetes"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Comisin"}),i.jsx("th",{className:"border p-2",children:"Fecha venta"})]})}),i.jsxs("tbody",{children:[Ut.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2",children:P.vendorName}),i.jsx("td",{className:"border p-2",children:P.productName}),i.jsx("td",{className:"border p-2",children:P.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"border p-2",children:P.branch||""}),i.jsx("td",{className:"border p-2",children:Zs(P.packages)}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.amount)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.commission)]}),i.jsx("td",{className:"border p-2",children:P.date})]},P.id)),Ut.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Sin detalle."})})]})]})}),i.jsx("h3",{className:"font-semibold mb-2 text-sm sm:text-base",children:"Consolidado por producto"}),i.jsx("div",{className:"md:hidden space-y-2",children:Mt.length===0?i.jsx("div",{className:"border rounded-xl p-3 text-center text-gray-500",children:"Sin consolidado."}):Mt.map(P=>i.jsxs("div",{className:"border rounded-2xl p-3",children:[i.jsx("div",{className:"font-semibold",children:P.productName}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 text-sm",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq cash"}),i.jsx("div",{className:"font-bold",children:Zs(P.packsCash)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Paq crdito"}),i.jsx("div",{className:"font-bold",children:Zs(P.packsCredit)})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.salesCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.salesCredit)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com cash"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.commCash)]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-2",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Com crdito"}),i.jsxs("div",{className:"font-bold",children:["C$",Tr(P.commCredit)]})]})]})]},P.productName))}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Total paquetes cash"}),i.jsx("th",{className:"border p-2",children:"Total paquetes crdito"}),i.jsx("th",{className:"border p-2",children:"Ventas cash"}),i.jsx("th",{className:"border p-2",children:"Ventas crdito"}),i.jsx("th",{className:"border p-2",children:"Comisin cash"}),i.jsx("th",{className:"border p-2",children:"Comisin crdito"})]})}),i.jsxs("tbody",{children:[Mt.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-2 text-left",children:P.productName}),i.jsx("td",{className:"border p-2",children:Zs(P.packsCash)}),i.jsx("td",{className:"border p-2",children:Zs(P.packsCredit)}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.salesCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.salesCredit)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.commCash)]}),i.jsxs("td",{className:"border p-2",children:["C$",Tr(P.commCredit)]})]},P.productName)),Mt.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Sin consolidado."})})]})]})})]})]})]}),D&&i.jsx("p",{className:"mt-3 text-sm",children:D})]}),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:Ve.name}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Saldo pendiente: ",i.jsxs("b",{children:["C$",Tr(Ve.balance)]})]})]}),i.jsx("button",{type:"button",onClick:()=>We(null),className:"text-sm text-gray-500 hover:text-gray-700",children:""})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"}),i.jsx("th",{className:"border p-2",children:"Saldo"})]})}),i.jsx("tbody",{children:st.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"border p-2 text-center text-gray-500",children:"Sin movimientos."})}):st.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.date||""}),i.jsx("td",{className:"border p-1",children:P.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Tr(P.amount)]}),i.jsxs("td",{className:"border p-1",children:["C$",Tr(P.running)]})]},P.id))})]})}),i.jsx("div",{className:"mt-4 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full border text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"border p-2",children:"Fecha"}),i.jsx("th",{className:"border p-2",children:"Producto"}),i.jsx("th",{className:"border p-2",children:"Vendedor"}),i.jsx("th",{className:"border p-2",children:"Tipo"}),i.jsx("th",{className:"border p-2",children:"Monto"})]})}),i.jsx("tbody",{children:_e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"border p-2 text-center text-gray-500",children:"Sin ventas asociadas."})}):_e.map(P=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"border p-1",children:P.date||""}),i.jsx("td",{className:"border p-1",children:P.productName||""}),i.jsx("td",{className:"border p-1",children:P.vendorName||""}),i.jsx("td",{className:"border p-1",children:P.type||""}),i.jsxs("td",{className:"border p-1",children:["C$",Tr(P.amount)]})]},P.id))})]})})]})})]}):i.jsxs("div",{className:"max-w-5xl mx-auto p-3 sm:p-4 md:p-6 bg-white rounded-2xl shadow-2xl",children:[i.jsx("h2",{className:"text-lg md:text-xl font-bold",children:"Data Center - Dulces"}),i.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No autorizado."})]})}function wse(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=wse(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Xa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=wse(t))&&(n&&(n+=" "),n+=e);return n}var zQe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IR(t){if(typeof t!="string")return!1;var e=zQe;return e.includes(t)}var WQe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],XQe=new Set(WQe);function Nse(t){return typeof t!="string"?!1:XQe.has(t)}function Cse(t){return typeof t=="string"&&t.startsWith("data-")}function ah(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Nse(r)||Cse(r))&&(e[r]=t[r]);return e}function V2(t){if(t==null)return null;if(g.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return ah(e)}return typeof t=="object"&&!Array.isArray(t)?ah(t):null}function Ed(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Nse(r)||Cse(r)||IR(r))&&(e[r]=t[r]);return e}var YQe=["children","width","height","viewBox","className","style","title","desc"];function oF(){return oF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oF.apply(null,arguments)}function JQe(t,e){if(t==null)return{};var r,n,a=ZQe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ZQe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jR=g.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=JQe(t,YQe),f=s||{width:n,height:a,x:0,y:0},A=Xa("recharts-surface",o);return g.createElement("svg",oF({},Ed(d),{className:A,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:e}),g.createElement("title",null,c),g.createElement("desc",null,u),r)}),eVe=["children","className"];function lF(){return lF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lF.apply(null,arguments)}function tVe(t,e){if(t==null)return{};var r,n,a=rVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bc=g.forwardRef((t,e)=>{var{children:r,className:n}=t,a=tVe(t,eVe),s=Xa("recharts-layer",n);return g.createElement("g",lF({className:s},Ed(a),{ref:e}),r)}),_se=g.createContext(null),nVe=()=>g.useContext(_se);function hs(t){return function(){return t}}const Ese=Math.cos,YS=Math.sin,Cf=Math.sqrt,JS=Math.PI,uP=2*JS,cF=Math.PI,uF=2*cF,ip=1e-6,aVe=uF-ip;function Sse(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function sVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Sse;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class iVe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Sse:sVe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,A=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(A>ip)if(!(Math.abs(f*c-u*d)>ip)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let h=n-o,m=a-l,p=c*c+u*u,x=h*h+m*m,v=Math.sqrt(p),y=Math.sqrt(A),b=s*Math.tan((cF-Math.acos((p+A-x)/(2*v*y)))/2),w=b/y,j=b/v;Math.abs(w-1)>ip&&this._append`L${e+w*d},${r+w*f}`,this._append`A${s},${s},0,0,${+(f*h>d*m)},${this._x1=e+j*c},${this._y1=r+j*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,A=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ip||Math.abs(this._y1-d)>ip)&&this._append`L${u},${d}`,n&&(A<0&&(A=A%uF+uF),A>aVe?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:A>ip&&this._append`A${n},${n},0,${+(A>=cF)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function PR(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new iVe(e)}function BR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ise(t){this._context=t}Ise.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dP(t){return new Ise(t)}function jse(t){return t[0]}function Pse(t){return t[1]}function Bse(t,e){var r=hs(!0),n=null,a=dP,s=null,o=PR(l);t=typeof t=="function"?t:t===void 0?jse:hs(t),e=typeof e=="function"?e:e===void 0?Pse:hs(e);function l(c){var u,d=(c=BR(c)).length,f,A=!1,h;for(n==null&&(s=a(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===A&&((A=!A)?s.lineStart():s.lineEnd()),A&&s.point(+t(f,u,c),+e(f,u,c));if(h)return s=null,h+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:hs(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:hs(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:hs(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function i_(t,e,r){var n=null,a=hs(!0),s=null,o=dP,l=null,c=PR(u);t=typeof t=="function"?t:t===void 0?jse:hs(+t),e=typeof e=="function"?e:hs(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Pse:hs(+r);function u(f){var A,h,m,p=(f=BR(f)).length,x,v=!1,y,b=new Array(p),w=new Array(p);for(s==null&&(l=o(y=c())),A=0;A<=p;++A){if(!(A<p&&a(x=f[A],A,f))===v)if(v=!v)h=A,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=A-1;m>=h;--m)l.point(b[m],w[m]);l.lineEnd(),l.areaEnd()}v&&(b[A]=+t(x,A,f),w[A]=+e(x,A,f),l.point(n?+n(x,A,f):b[A],r?+r(x,A,f):w[A]))}if(y)return l=null,y+""||null}function d(){return Bse().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:hs(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:hs(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:hs(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:hs(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:hs(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:hs(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:hs(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class Tse{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function oVe(t){return new Tse(t,!0)}function lVe(t){return new Tse(t,!1)}const TR={draw(t,e){const r=Cf(e/JS);t.moveTo(r,0),t.arc(0,0,r,0,uP)}},cVe={draw(t,e){const r=Cf(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},kse=Cf(1/3),uVe=kse*2,dVe={draw(t,e){const r=Cf(e/uVe),n=r*kse;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},fVe={draw(t,e){const r=Cf(e),n=-r/2;t.rect(n,n,r,r)}},hVe=.8908130915292852,Fse=YS(JS/10)/YS(7*JS/10),AVe=YS(uP/10)*Fse,mVe=-Ese(uP/10)*Fse,pVe={draw(t,e){const r=Cf(e*hVe),n=AVe*r,a=mVe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=uP*s/5,l=Ese(o),c=YS(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},J5=Cf(3),gVe={draw(t,e){const r=-Cf(e/(J5*3));t.moveTo(0,r*2),t.lineTo(-J5*r,-r),t.lineTo(J5*r,-r),t.closePath()}},Xu=-.5,Yu=Cf(3)/2,dF=1/Cf(12),xVe=(dF/2+1)*3,vVe={draw(t,e){const r=Cf(e/xVe),n=r/2,a=r*dF,s=n,o=r*dF+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Xu*n-Yu*a,Yu*n+Xu*a),t.lineTo(Xu*s-Yu*o,Yu*s+Xu*o),t.lineTo(Xu*l-Yu*c,Yu*l+Xu*c),t.lineTo(Xu*n+Yu*a,Xu*a-Yu*n),t.lineTo(Xu*s+Yu*o,Xu*o-Yu*s),t.lineTo(Xu*l+Yu*c,Xu*c-Yu*l),t.closePath()}};function yVe(t,e){let r=null,n=PR(a);t=typeof t=="function"?t:hs(t||TR),e=typeof e=="function"?e:hs(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:hs(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:hs(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function ZS(){}function eI(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Ose(t){this._context=t}Ose.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:eI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:eI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bVe(t){return new Ose(t)}function Dse(t){this._context=t}Dse.prototype={areaStart:ZS,areaEnd:ZS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:eI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wVe(t){return new Dse(t)}function Rse(t){this._context=t}Rse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:eI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NVe(t){return new Rse(t)}function Mse(t){this._context=t}Mse.prototype={areaStart:ZS,areaEnd:ZS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function CVe(t){return new Mse(t)}function oG(t){return t<0?-1:1}function lG(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(oG(s)+oG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function cG(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Z5(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function tI(t){this._context=t}tI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Z5(this,this._t0,cG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Z5(this,cG(this,r=lG(this,t,e)),r);break;default:Z5(this,this._t0,r=lG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Lse(t){this._context=new Use(t)}(Lse.prototype=Object.create(tI.prototype)).point=function(t,e){tI.prototype.point.call(this,e,t)};function Use(t){this._context=t}Use.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function _Ve(t){return new tI(t)}function EVe(t){return new Lse(t)}function Qse(t){this._context=t}Qse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=uG(t),a=uG(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uG(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function SVe(t){return new Qse(t)}function fP(t,e){this._context=t,this._t=e}fP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function IVe(t){return new fP(t,.5)}function jVe(t){return new fP(t,0)}function PVe(t){return new fP(t,1)}function hg(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function fF(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function BVe(t,e){return t[e]}function TVe(t){const e=[];return e.key=t,e}function kVe(){var t=hs([]),e=fF,r=hg,n=BVe;function a(s){var o=Array.from(t.apply(this,arguments),TVe),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=BR(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:hs(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:hs(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?fF:typeof s=="function"?s:hs(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??hg,a):r},a}function FVe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}hg(t,e)}}function OVe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}hg(t,e)}}function DVe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,A=d[n-1][1]||0,h=(f-A)/2,m=0;m<l;++m){var p=t[e[m]],x=p[n][1]||0,v=p[n-1][1]||0;h+=x-v}c+=f,u+=h*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,hg(t,e)}}var hP={},Vse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Vse);var kR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(kR);var AP={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(AP);var mP={},Hse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Hse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hse,r=AP;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const f=a[l];u?f==="\\"&&l+1<o?(l++,c+=a[l]):f===u?u="":c+=f:d?f==='"'||f==="'"?u=f:f==="]"?(d=!1,s.push(c),c=""):c+=f:f==="["?(d=!0,c&&(s.push(c),c="")):f==="."?c&&(s.push(c),c=""):c+=f,l++}return c&&s.push(c),s}t.toPath=n})(mP);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vse,r=kR,n=AP,a=mP;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||e.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}t.get=s})(hP);var RVe=hP.get;const Ag=CA(RVe);var MVe=4;function K0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MVe,r=10**e,n=Math.round(t*r)/r;return Object.is(n,-0)?0:n}function pi(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.reduce((a,s,o)=>{var l=r[o-1];return typeof l=="string"?a+l+s:l!==void 0?a+K0(l)+s:a+s},"")}var Nl=t=>t===0?0:t>0?1:-1,sh=t=>typeof t=="number"&&t!=+t,gA=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,An=t=>(typeof t=="number"||t instanceof Number)&&!sh(t),ih=t=>An(t)||typeof t=="string",LVe=0,H2=t=>{var e=++LVe;return"".concat(t||"").concat(e)},Yl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!An(e)&&typeof e!="string")return n;var s;if(gA(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return sh(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},$se=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[String(t[n])])r[String(t[n])]=!0;else return!0;return!1};function go(t,e,r){return An(t)&&An(e)?K0(t+r*(e-t)):e}function UVe(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Ag(n,e))===r)}var Jo=t=>t===null||typeof t>"u",Qw=t=>Jo(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function QVe(t){return t!=null}function Vw(){}var VVe=["type","size","sizeType"];function hF(){return hF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hF.apply(null,arguments)}function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){HVe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HVe(t,e,r){return(e=$Ve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ve(t){var e=GVe(t,"string");return typeof e=="symbol"?e:e+""}function GVe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KVe(t,e){if(t==null)return{};var r,n,a=qVe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qVe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Gse={symbolCircle:TR,symbolCross:cVe,symbolDiamond:dVe,symbolSquare:fVe,symbolStar:pVe,symbolTriangle:gVe,symbolWye:vVe},zVe=Math.PI/180,WVe=t=>{var e="symbol".concat(Qw(t));return Gse[e]||TR},XVe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*zVe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},YVe=(t,e)=>{Gse["symbol".concat(Qw(t))]=e},FR=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=KVe(t,VVe),s=fG(fG({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var A=WVe(o),h=yVe().type(A).size(XVe(r,n,o)),m=h();if(m!==null)return m},{className:c,cx:u,cy:d}=s,f=Ed(s);return An(u)&&An(d)&&An(r)?g.createElement("path",hF({},f,{className:Xa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};FR.registerSymbol=YVe;var Kse=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,JVe=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(g.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{IR(a)&&(n[a]=s=>r[a](r,s))}),n},ZVe=(t,e,r)=>n=>(t(e,r,n),null),Hw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];IR(a)&&typeof s=="function"&&(n||(n={}),n[a]=ZVe(s,e,r))}),n};function hG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function eHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hG(Object(r),!0).forEach(function(n){tHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tHe(t,e,r){return(e=rHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rHe(t){var e=nHe(t,"string");return typeof e=="symbol"?e:e+""}function nHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function El(t,e){var r=eHe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rI.apply(null,arguments)}function AG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aHe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AG(Object(r),!0).forEach(function(n){sHe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sHe(t,e,r){return(e=iHe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iHe(t){var e=oHe(t,"string");return typeof e=="symbol"?e:e+""}function oHe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ad=32,lHe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function cHe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=ad/2,s=ad/6,o=ad/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return g.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:ad,y2:a,className:"recharts-legend-icon"})}if(c==="line")return g.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ad,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return g.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ad/8,"h").concat(ad,"v").concat(ad*3/4,"h").concat(-ad,"z"),className:"recharts-legend-icon"});if(g.isValidElement(e.legendIcon)){var d=aHe({},e);return delete d.legendIcon,g.cloneElement(e.legendIcon,d)}return g.createElement(FR,{fill:l,cx:a,cy:a,size:ad,sizeType:"diameter",type:c})}function uHe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:ad,height:ad},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,f)=>{var A=d.formatter||a,h=Xa({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var m=d.inactive?s:d.color,p=A?A(d.value,d,f):d.value;return g.createElement("li",rI({className:h,style:c,key:"legend-item-".concat(f)},Hw(t,d,f)),g.createElement(jR,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(p," legend icon")},g.createElement(cHe,{data:d,iconType:o,inactiveColor:s})),g.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},p))})}var dHe=t=>{var e=El(t,lHe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return g.createElement("ul",{className:"recharts-default-legend",style:s},g.createElement(uHe,rI({},e,{payload:r})))},qse={},zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(zse);var OR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(OR);var Wse={},pP={},Xse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Xse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xse;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(pP);var Yse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Yse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pP,r=Yse;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Wse);var Jse={},Zse={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hP;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Zse);var eie={},DR={},tie={},RR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(RR);var MR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(MR);var LR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(LR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RR,r=MR,n=LR;function a(d,f,A){return typeof A!="function"?a(d,f,()=>{}):s(d,f,function h(m,p,x,v,y,b){const w=A(m,p,x,v,y,b);return w!==void 0?!!w:s(m,p,h,b)},new Map)}function s(d,f,A,h){if(f===d)return!0;switch(typeof f){case"object":return o(d,f,A,h);case"function":return Object.keys(f).length>0?s(d,{...f},A,h):n.eq(d,f);default:return e.isObject(d)?typeof f=="string"?f==="":!0:n.eq(d,f)}}function o(d,f,A,h){if(f==null)return!0;if(Array.isArray(f))return c(d,f,A,h);if(f instanceof Map)return l(d,f,A,h);if(f instanceof Set)return u(d,f,A,h);const m=Object.keys(f);if(d==null||r.isPrimitive(d))return m.length===0;if(m.length===0)return!0;if(h!=null&&h.has(f))return h.get(f)===d;h==null||h.set(f,d);try{for(let p=0;p<m.length;p++){const x=m[p];if(!r.isPrimitive(d)&&!(x in d)||f[x]===void 0&&d[x]!==void 0||f[x]===null&&d[x]!==null||!A(d[x],f[x],x,d,f,h))return!1}return!0}finally{h==null||h.delete(f)}}function l(d,f,A,h){if(f.size===0)return!0;if(!(d instanceof Map))return!1;for(const[m,p]of f.entries()){const x=d.get(m);if(A(x,p,m,d,f,h)===!1)return!1}return!0}function c(d,f,A,h){if(f.length===0)return!0;if(!Array.isArray(d))return!1;const m=new Set;for(let p=0;p<f.length;p++){const x=f[p];let v=!1;for(let y=0;y<d.length;y++){if(m.has(y))continue;const b=d[y];let w=!1;if(A(b,x,p,d,f,h)&&(w=!0),w){m.add(y),v=!0;break}}if(!v)return!1}return!0}function u(d,f,A,h){return f.size===0?!0:d instanceof Set?c([...d],[...f],A,h):!1}t.isMatchWith=a,t.isSetMatch=u})(tie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tie;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(DR);var rie={},UR={},nie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(nie);var QR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(QR);var VR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",A="[object ArrayBuffer]",h="[object Object]",m="[object Error]",p="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",y="[object Uint16Array]",b="[object Uint32Array]",w="[object BigUint64Array]",j="[object Int8Array]",I="[object Int16Array]",_="[object Int32Array]",S="[object BigInt64Array]",E="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=A,t.arrayTag=d,t.bigInt64ArrayTag=S,t.bigUint64ArrayTag=w,t.booleanTag=a,t.dataViewTag=p,t.dateTag=l,t.errorTag=m,t.float32ArrayTag=E,t.float64ArrayTag=F,t.functionTag=f,t.int16ArrayTag=I,t.int32ArrayTag=_,t.int8ArrayTag=j,t.mapTag=c,t.numberTag=n,t.objectTag=h,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=y,t.uint32ArrayTag=b,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=v})(VR);var aie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(aie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nie,r=QR,n=VR,a=MR,s=aie;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,A,h=new Map,m=void 0){const p=m==null?void 0:m(d,f,A,h);if(p!==void 0)return p;if(a.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,h,m);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[v,y]of d)x.set(v,l(y,v,A,h,m));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const v of d)x.add(l(v,void 0,A,h,m));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,A,h,m);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,A,h,m),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,A,h,m),x}if(typeof Blob<"u"&&d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,A,h,m),x}if(d instanceof Boolean){const x=new Boolean(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof Number){const x=new Number(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(d instanceof String){const x=new String(d.valueOf());return h.set(d,x),c(x,d,A,h,m),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,A,h,m),x}return d}function c(d,f,A=d,h,m){const p=[...Object.keys(f),...e.getSymbols(f)];for(let x=0;x<p.length;x++){const v=p[x],y=Object.getOwnPropertyDescriptor(d,v);(y==null||y.writable)&&(d[v]=l(f[v],v,A,h,m))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(UR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UR;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(rie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR,r=rie;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(eie);var sie={},iie={},oie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UR,r=VR;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(f,a),f}case r.argumentsTag:{const f={};return e.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}t.cloneDeepWith=n})(oie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oie;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(iie);var lie={},HR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(HR);var cie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QR;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(cie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kR,r=HR,n=cie,a=mP;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}t.has=s})(lie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DR,r=AP,n=iie,a=hP,s=lie;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(sie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OR,r=Zse,n=eie,a=sie;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Jse);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zse,r=OR,n=Wse,a=Jse;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(qse);var fHe=qse.uniqBy;const mG=CA(fHe);function uie(t,e,r){return e===!0?mG(t,r):typeof e=="function"?mG(t,e):t}var die={exports:{}},fie={},hie={exports:{}},Aie={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv=g;function hHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var AHe=typeof Object.is=="function"?Object.is:hHe,mHe=Uv.useState,pHe=Uv.useEffect,gHe=Uv.useLayoutEffect,xHe=Uv.useDebugValue;function vHe(t,e){var r=e(),n=mHe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return gHe(function(){a.value=r,a.getSnapshot=e,eB(a)&&s({inst:a})},[t,r,e]),pHe(function(){return eB(a)&&s({inst:a}),t(function(){eB(a)&&s({inst:a})})},[t]),xHe(r),r}function eB(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!AHe(t,r)}catch{return!0}}function yHe(t,e){return e()}var bHe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yHe:vHe;Aie.useSyncExternalStore=Uv.useSyncExternalStore!==void 0?Uv.useSyncExternalStore:bHe;hie.exports=Aie;var wHe=hie.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=g,NHe=wHe;function CHe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _He=typeof Object.is=="function"?Object.is:CHe,EHe=NHe.useSyncExternalStore,SHe=gP.useRef,IHe=gP.useEffect,jHe=gP.useMemo,PHe=gP.useDebugValue;fie.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=SHe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=jHe(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,_He(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=EHe(t,s[0],s[1]);return IHe(function(){o.hasValue=!0,o.value=l},[l]),PHe(l),l};die.exports=fie;var BHe=die.exports,$R=g.createContext(null),THe=t=>t,xs=()=>{var t=g.useContext($R);return t?t.store.dispatch:THe},fE=()=>{},kHe=()=>fE,FHe=(t,e)=>t===e;function cn(t){var e=g.useContext($R);return BHe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:kHe,e?e.store.getState:fE,e?e.store.getState:fE,e?t:fE,FHe)}function OHe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function DHe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function RHe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var pG=t=>Array.isArray(t)?t:[t];function MHe(t){const e=Array.isArray(t[0])?t[0]:t;return RHe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function LHe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var UHe=class{constructor(t){this.value=t}deref(){return this.value}},QHe=typeof WeakRef<"u"?WeakRef:UHe,VHe=0,gG=1;function o_(){return{s:VHe,v:void 0,o:null,p:null}}function mie(t,e={}){let r=o_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var f;let l=r;const{length:c}=arguments;for(let A=0,h=c;A<h;A++){const m=arguments[A];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=l.o;p===null&&(l.o=p=new WeakMap);const x=p.get(m);x===void 0?(l=o_(),p.set(m,l)):l=x}else{let p=l.p;p===null&&(l.p=p=new Map);const x=p.get(m);x===void 0?(l=o_(),p.set(m,l)):l=x}}const u=l;let d;if(l.s===gG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const A=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;A!=null&&n(A,d)&&(d=A,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new QHe(d):d}return u.s=gG,u.v=d,d}return o.clearCache=()=>{r=o_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function HHe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),OHe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:A=[],argsMemoize:h=mie,argsMemoizeOptions:m=[]}=d,p=pG(A),x=pG(m),v=MHe(a),y=f(function(){return s++,u.apply(null,arguments)},...p),b=h(function(){o++;const j=LHe(v,arguments);return l=y.apply(null,j),l},...x);return Object.assign(b,{resultFunc:u,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var Wt=HHe(mie),$He=Object.assign((t,e=Wt)=>{DHe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>$He}),pie={},gie={},xie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(xie);var vie={},GR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(GR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(vie);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xie,r=vie,n=mP;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,m)=>{let p=h;for(let x=0;x<m.length&&p!=null;++x)p=p[m[x]];return p},d=(h,m)=>m==null||h==null?m:typeof h=="object"&&"key"in h?Object.hasOwn(m,h.key)?m[h.key]:u(m,h.path):typeof h=="function"?h(m):Array.isArray(h)?u(m,h):typeof m=="object"?m[h]:m,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return s.map(h=>({original:h,criteria:f.map(m=>d(m,h))})).slice().sort((h,m)=>{for(let p=0;p<f.length;p++){const x=e.compareValues(h.criteria[p],m.criteria[p],l[p]);if(x!==0)return x}return 0}).map(h=>h.original)}t.orderBy=a})(gie);var yie={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(yie);var KR={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HR,r=pP,n=RR,a=LR;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(KR);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gie,r=yie,n=KR;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(pie);var GHe=pie.sortBy;const xP=CA(GHe);var bie=t=>t.legend.settings,KHe=t=>t.legend.size,qHe=t=>t.legend.payload,zHe=Wt([qHe,bie],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?xP(n,r):n});function WHe(){return cn(zHe)}var l_=1;function wie(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>l_||Math.abs(o.left-e.left)>l_||Math.abs(o.top-e.top)>l_||Math.abs(o.width-e.width)>l_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function fl(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var XHe=typeof Symbol=="function"&&Symbol.observable||"@@observable",xG=XHe,tB=()=>Math.random().toString(36).substring(7).split("").join("."),YHe={INIT:`@@redux/INIT${tB()}`,REPLACE:`@@redux/REPLACE${tB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tB()}`},nI=YHe;function qR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Nie(t,e,r){if(typeof t!="function")throw new Error(fl(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(fl(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(fl(1));return r(Nie)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((x,v)=>{o.set(v,x)}))}function d(){if(c)throw new Error(fl(3));return a}function f(x){if(typeof x!="function")throw new Error(fl(4));if(c)throw new Error(fl(5));let v=!0;u();const y=l++;return o.set(y,x),function(){if(v){if(c)throw new Error(fl(6));v=!1,u(),o.delete(y),s=null}}}function A(x){if(!qR(x))throw new Error(fl(7));if(typeof x.type>"u")throw new Error(fl(8));if(typeof x.type!="string")throw new Error(fl(17));if(c)throw new Error(fl(9));try{c=!0,a=n(a,x)}finally{c=!1}return(s=o).forEach(y=>{y()}),x}function h(x){if(typeof x!="function")throw new Error(fl(10));n=x,A({type:nI.REPLACE})}function m(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(fl(11));function y(){const w=v;w.next&&w.next(d())}return y(),{unsubscribe:x(y)}},[xG](){return this}}}return A({type:nI.INIT}),{dispatch:A,subscribe:f,getState:d,replaceReducer:h,[xG]:m}}function JHe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:nI.INIT})>"u")throw new Error(fl(12));if(typeof r(void 0,{type:nI.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fl(13))})}function Cie(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{JHe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],A=r[f],h=o[f],m=A(h,l);if(typeof m>"u")throw l&&l.type,new Error(fl(14));u[f]=m,c=c||m!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function aI(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function ZHe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(fl(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=aI(...l)(a.dispatch),{...a,dispatch:s}}}function _ie(t){return qR(t)&&"type"in t&&typeof t.type=="string"}var Eie=Symbol.for("immer-nothing"),vG=Symbol.for("immer-draftable"),wc=Symbol.for("immer-state");function ef(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Eu=Object,Qv=Eu.getPrototypeOf,sI="constructor",vP="prototype",AF="configurable",iI="enumerable",hE="writable",$2="value",xA=t=>!!t&&!!t[wc];function xf(t){var e;return t?Sie(t)||bP(t)||!!t[vG]||!!((e=t[sI])!=null&&e[vG])||wP(t)||NP(t):!1}var e$e=Eu[vP][sI].toString(),yG=new WeakMap;function Sie(t){if(!t||!zR(t))return!1;const e=Qv(t);if(e===null||e===Eu[vP])return!0;const r=Eu.hasOwnProperty.call(e,sI)&&e[sI];if(r===Object)return!0;if(!Px(r))return!1;let n=yG.get(r);return n===void 0&&(n=Function.toString.call(r),yG.set(r,n)),n===e$e}function yP(t,e,r=!0){$w(t)===0?(r?Reflect.ownKeys(t):Eu.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function $w(t){const e=t[wc];return e?e.type_:bP(t)?1:wP(t)?2:NP(t)?3:0}var bG=(t,e,r=$w(t))=>r===2?t.has(e):Eu[vP].hasOwnProperty.call(t,e),mF=(t,e,r=$w(t))=>r===2?t.get(e):t[e],oI=(t,e,r,n=$w(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function t$e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var bP=Array.isArray,wP=t=>t instanceof Map,NP=t=>t instanceof Set,zR=t=>typeof t=="object",Px=t=>typeof t=="function",rB=t=>typeof t=="boolean";function r$e(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Dh=t=>t.copy_||t.base_,WR=t=>t.modified_?t.copy_:t.base_;function pF(t,e){if(wP(t))return new Map(t);if(NP(t))return new Set(t);if(bP(t))return Array[vP].slice.call(t);const r=Sie(t);if(e===!0||e==="class_only"&&!r){const n=Eu.getOwnPropertyDescriptors(t);delete n[wc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[hE]===!1&&(l[hE]=!0,l[AF]=!0),(l.get||l.set)&&(n[o]={[AF]:!0,[hE]:!0,[iI]:l[iI],[$2]:t[o]})}return Eu.create(Qv(t),n)}else{const n=Qv(t);if(n!==null&&r)return{...t};const a=Eu.create(n);return Eu.assign(a,t)}}function XR(t,e=!1){return CP(t)||xA(t)||!xf(t)||($w(t)>1&&Eu.defineProperties(t,{set:c_,add:c_,clear:c_,delete:c_}),Eu.freeze(t),e&&yP(t,(r,n)=>{XR(n,!0)},!1)),t}function n$e(){ef(2)}var c_={[$2]:n$e};function CP(t){return t===null||!zR(t)?!0:Eu.isFrozen(t)}var lI="MapSet",gF="Patches",wG="ArrayMethods",Iie={};function mg(t){const e=Iie[t];return e||ef(0,t),e}var NG=t=>!!Iie[t],G2,jie=()=>G2,a$e=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:NG(lI)?mg(lI):void 0,arrayMethodsPlugin_:NG(wG)?mg(wG):void 0});function CG(t,e){e&&(t.patchPlugin_=mg(gF),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xF(t){vF(t),t.drafts_.forEach(s$e),t.drafts_=null}function vF(t){t===G2&&(G2=t.parent_)}var _G=t=>G2=a$e(G2,t);function s$e(t){const e=t[wc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function EG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[wc].modified_&&(xF(e),ef(4)),xf(t)&&(t=SG(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[wc].base_,t,e)}else t=SG(e,r);return i$e(e,t,!0),xF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Eie?t:void 0}function SG(t,e){if(CP(e))return e;const r=e[wc];if(!r)return cI(e,t.handledSet_,t);if(!_P(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Tie(r,t)}return r.copy_}function i$e(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&XR(e,r)}function Pie(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var _P=(t,e)=>t.scope_===e,o$e=[];function Bie(t,e,r,n){const a=Dh(t),s=t.type_;if(n!==void 0&&mF(a,n,s)===e){oI(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;yP(a,(c,u)=>{if(xA(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??o$e;for(const l of o)oI(a,l,r,s)}function l$e(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!_P(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=WR(s);Bie(t,s.draft_??s,o,r),Tie(s,a)})}function Tie(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}Pie(t)}}function c$e(t,e,r){const{scope_:n}=t;if(xA(r)){const a=r[wc];_P(a,n)&&a.callbacks_.push(function(){AE(t);const o=WR(a);Bie(t,r,o,e)})}else xf(r)&&t.callbacks_.push(function(){const s=Dh(t);t.type_===3?s.has(r)&&cI(r,n.handledSet_,n):mF(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&cI(mF(t.copy_,e,t.type_),n.handledSet_,n)})}function cI(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||xA(t)||e.has(t)||!xf(t)||CP(t)||(e.add(t),yP(t,(n,a)=>{if(xA(a)){const s=a[wc];if(_P(s,r)){const o=WR(s);oI(t,n,o,t.type_),Pie(s)}}else xf(a)&&cI(a,e,r)})),t}function u$e(t,e){const r=bP(t),n={type_:r?1:0,scope_:e?e.scope_:jie(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=uI;r&&(a=[n],s=K2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var uI={get(t,e){if(e===wc)return t;let r=t.scope_.arrayMethodsPlugin_;const n=t.type_===1&&typeof e=="string";if(n&&r!=null&&r.isArrayOperationMethod(e))return r.createMethodInterceptor(t,e);const a=Dh(t);if(!bG(a,e,t.type_))return d$e(t,a,e);const s=a[e];if(t.finalized_||!xf(s)||n&&t.operationMethod&&(r!=null&&r.isMutatingArrayMethod(t.operationMethod))&&r$e(e))return s;if(s===nB(t.base_,e)){AE(t);const o=t.type_===1?+e:e,l=bF(t.scope_,s,t,o);return t.copy_[o]=l}return s},has(t,e){return e in Dh(t)},ownKeys(t){return Reflect.ownKeys(Dh(t))},set(t,e,r){const n=kie(Dh(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=nB(Dh(t),e),s=a==null?void 0:a[wc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(t$e(r,a)&&(r!==void 0||bG(t.base_,e,t.type_)))return!0;AE(t),yF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),c$e(t,e,r)),!0},deleteProperty(t,e){return AE(t),nB(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),yF(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Dh(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[hE]:!0,[AF]:t.type_!==1||e!=="length",[iI]:n[iI],[$2]:r[e]}},defineProperty(){ef(11)},getPrototypeOf(t){return Qv(t.base_)},setPrototypeOf(){ef(12)}},K2={};for(let t in uI){let e=uI[t];K2[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}}K2.deleteProperty=function(t,e){return K2.set.call(this,t,e,void 0)};K2.set=function(t,e,r){return uI.set.call(this,t[0],e,r,t[0])};function nB(t,e){const r=t[wc];return(r?Dh(r):t)[e]}function d$e(t,e,r){var a;const n=kie(e,r);return n?$2 in n?n[$2]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function kie(t,e){if(!(e in t))return;let r=Qv(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Qv(r)}}function yF(t){t.modified_||(t.modified_=!0,t.parent_&&yF(t.parent_))}function AE(t){t.copy_||(t.assigned_=new Map,t.copy_=pF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var f$e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(Px(r)&&!Px(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,f=>n.call(this,f,...d))}}Px(n)||ef(6),a!==void 0&&!Px(a)&&ef(7);let s;if(xf(r)){const o=_G(this),l=bF(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?xF(o):vF(o)}return CG(o,a),EG(s,o)}else if(!r||!zR(r)){if(s=n(r),s===void 0&&(s=r),s===Eie&&(s=void 0),this.autoFreeze_&&XR(s,!0),a){const o=[],l=[];mg(gF).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else ef(1,r)},this.produceWithPatches=(r,n)=>{if(Px(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},rB(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),rB(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),rB(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){xf(e)||ef(8),xA(e)&&(e=hf(e));const r=_G(this),n=bF(r,e,void 0);return n[wc].isManual_=!0,vF(r),n}finishDraft(e,r){const n=e&&e[wc];(!n||!n.isManual_)&&ef(9);const{scope_:a}=n;return CG(a,r),EG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=mg(gF).applyPatches_;return xA(e)?a(e,r):this.produce(e,s=>a(s,r))}};function bF(t,e,r,n){const[a,s]=wP(e)?mg(lI).proxyMap_(e,r):NP(e)?mg(lI).proxySet_(e,r):u$e(e,r);return((r==null?void 0:r.scope_)??jie()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?l$e(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function hf(t){return xA(t)||ef(10,t),Fie(t)}function Fie(t){if(!xf(t)||CP(t))return t;const e=t[wc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=pF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=pF(t,!0);return yP(r,(a,s)=>{oI(r,a,Fie(s))},n),e&&(e.finalized_=!1),r}var h$e=new f$e,Oie=h$e.produce;function Die(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var A$e=Die(),m$e=Die,p$e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?aI:aI.apply(null,arguments)};function Sd(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(ju(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>_ie(n)&&n.type===t,r}var Rie=class Yy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yy.prototype)}static get[Symbol.species](){return Yy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yy(...e[0].concat(this)):new Yy(...e.concat(this))}};function IG(t){return xf(t)?Oie(t,()=>{}):t}function u_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function g$e(t){return typeof t=="boolean"}var x$e=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Rie;return r&&(g$e(r)?o.push(A$e):o.push(m$e(r.extraArgument))),o},Mie="RTK_autoBatch",Os=()=>t=>({payload:t,meta:{[Mie]:!0}}),jG=t=>e=>{setTimeout(e,t)},Lie=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jG(10):t.type==="callback"?t.queueNotification:jG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),A=n.subscribe(f);return l.add(d),()=>{A(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[Mie]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},v$e=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Rie(t);return n&&a.push(Lie(typeof n=="object"?n:void 0)),a};function y$e(t){const e=x$e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(qR(r))l=Cie(r);else throw new Error(ju(1));let c;typeof n=="function"?c=n(e):c=e();let u=aI;a&&(u=p$e({trace:!1,...typeof a=="object"&&a}));const d=ZHe(...c),f=v$e(d);let A=typeof o=="function"?o(f):f();const h=u(...A);return Nie(l,s,h)}function Uie(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(ju(28));if(l in e)throw new Error(ju(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function b$e(t){return typeof t=="function"}function w$e(t,e){let[r,n,a]=Uie(e),s;if(b$e(t))s=()=>IG(t());else{const l=IG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(xA(d)){const h=f(d,c);return h===void 0?d:h}else{if(xf(d))return Oie(d,A=>f(A,c));{const A=f(d,c);if(A===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return A}}return d},l)}return o.getInitialState=s,o}var N$e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",C$e=(t=21)=>{let e="",r=t;for(;r--;)e+=N$e[Math.random()*64|0];return e},_$e=Symbol.for("rtk-slice-createasyncthunk");function E$e(t,e){return`${t}/${e}`}function S$e({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[_$e];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(ju(11));const l=(typeof a.reducers=="function"?a.reducers(j$e()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,j){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(ju(12));if(I in u.sliceCaseReducersByType)throw new Error(ju(13));return u.sliceCaseReducersByType[I]=j,d},addMatcher(w,j){return u.sliceMatchers.push({matcher:w,reducer:j}),d},exposeAction(w,j){return u.actionCreators[w]=j,d},exposeCaseReducer(w,j){return u.sliceCaseReducersByName[w]=j,d}};c.forEach(w=>{const j=l[w],I={reducerName:w,type:E$e(s,w),createNotation:typeof a.reducers=="function"};B$e(j)?k$e(I,j,d,e):P$e(I,j,d)});function f(){const[w={},j=[],I=void 0]=typeof a.extraReducers=="function"?Uie(a.extraReducers):[a.extraReducers],_={...w,...u.sliceCaseReducersByType};return w$e(a.initialState,S=>{for(let E in _)S.addCase(E,_[E]);for(let E of u.sliceMatchers)S.addMatcher(E.matcher,E.reducer);for(let E of j)S.addMatcher(E.matcher,E.reducer);I&&S.addDefaultCase(I)})}const A=w=>w,h=new Map,m=new WeakMap;let p;function x(w,j){return p||(p=f()),p(w,j)}function v(){return p||(p=f()),p.getInitialState()}function y(w,j=!1){function I(S){let E=S[w];return typeof E>"u"&&j&&(E=u_(m,I,v)),E}function _(S=A){const E=u_(h,j,()=>new WeakMap);return u_(E,S,()=>{const F={};for(const[k,B]of Object.entries(a.selectors??{}))F[k]=I$e(B,S,()=>u_(m,S,v),j);return F})}return{reducerPath:w,getSelectors:_,get selectors(){return _(I)},selectSlice:I}}const b={name:s,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...y(o),injectInto(w,{reducerPath:j,...I}={}){const _=j??o;return w.inject({reducerPath:_,reducer:x},I),{...b,...y(_,!0)}}};return b}}function I$e(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var tu=S$e();function j$e(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function P$e({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!T$e(n))throw new Error(ju(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Sd(t,o):Sd(t))}function B$e(t){return t._reducerDefinitionType==="asyncThunk"}function T$e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function k$e({type:t,reducerName:e},r,n,a){if(!a)throw new Error(ju(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(t,s,d);n.exposeAction(e,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(e,{fulfilled:o||d_,pending:l||d_,rejected:c||d_,settled:u||d_})}function d_(){}var F$e="task",Qie="listener",Vie="completed",YR="cancelled",O$e=`task-${YR}`,D$e=`task-${Vie}`,wF=`${Qie}-${YR}`,R$e=`${Qie}-${Vie}`,EP=class{constructor(t){Cr(this,"name","TaskAbortError");Cr(this,"message");this.code=t,this.message=`${F$e} ${YR} (reason: ${t})`}},JR=(t,e)=>{if(typeof t!="function")throw new TypeError(ju(32))},dI=()=>{},Hie=(t,e=dI)=>(t.catch(e),t),$ie=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Up=t=>{if(t.aborted)throw new EP(t.reason)};function Gie(t,e){let r=dI;return new Promise((n,a)=>{const s=()=>a(new EP(t.reason));if(t.aborted){s();return}r=$ie(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=dI})}var M$e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof EP?"cancelled":"rejected",error:r}}finally{e==null||e()}},fI=t=>e=>Hie(Gie(t,e).then(r=>(Up(t),r))),Kie=t=>{const e=fI(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:mv}=Object,PG={},SP="listenerMiddleware",L$e=(t,e)=>{const r=n=>$ie(t,()=>n.abort(t.reason));return(n,a)=>{JR(n);const s=new AbortController;r(s);const o=M$e(async()=>{Up(t),Up(s.signal);const l=await n({pause:fI(s.signal),delay:Kie(s.signal),signal:s.signal});return Up(s.signal),l},()=>s.abort(D$e));return a!=null&&a.autoJoin&&e.push(o.catch(dI)),{result:fI(t)(o),cancel(){s.abort(O$e)}}}},U$e=(t,e)=>{const r=async(n,a)=>{Up(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(f,A)=>{A.unsubscribe(),c([f,A.getState(),A.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Gie(e,Promise.race(l));return Up(e),c}finally{s()}};return(n,a)=>Hie(r(n,a))},qie=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Sd(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(ju(21));return JR(s),{predicate:a,type:e,effect:s}},zie=mv(t=>{const{type:e,predicate:r,effect:n}=qie(t);return{id:C$e(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ju(22))}}},{withTypes:()=>zie}),BG=(t,e)=>{const{type:r,effect:n,predicate:a}=qie(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},NF=t=>{t.pending.forEach(e=>{e.abort(wF)})},Q$e=(t,e)=>()=>{for(const r of e.keys())NF(r);t.clear()},TG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Wie=mv(Sd(`${SP}/add`),{withTypes:()=>Wie}),V$e=Sd(`${SP}/removeAll`),Xie=mv(Sd(`${SP}/remove`),{withTypes:()=>Xie}),H$e=(...t)=>{console.error(`${SP}/error`,...t)},Gw=(t={})=>{const e=new Map,r=new Map,n=h=>{const m=r.get(h)??0;r.set(h,m+1)},a=h=>{const m=r.get(h)??1;m===1?r.delete(h):r.set(h,m-1)},{extra:s,onError:o=H$e}=t;JR(o);const l=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),m=>{h.unsubscribe(),m!=null&&m.cancelActive&&NF(h)}),c=h=>{const m=BG(e,h)??zie(h);return l(m)};mv(c,{withTypes:()=>c});const u=h=>{const m=BG(e,h);return m&&(m.unsubscribe(),h.cancelActive&&NF(m)),!!m};mv(u,{withTypes:()=>u});const d=async(h,m,p,x)=>{const v=new AbortController,y=U$e(c,v.signal),b=[];try{h.pending.add(v),n(h),await Promise.resolve(h.effect(m,mv({},p,{getOriginalState:x,condition:(w,j)=>y(w,j).then(Boolean),take:y,delay:Kie(v.signal),pause:fI(v.signal),extra:s,signal:v.signal,fork:L$e(v.signal,b),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((w,j,I)=>{w!==v&&(w.abort(wF),I.delete(w))})},cancel:()=>{v.abort(wF),h.pending.delete(v)},throwIfCancelled:()=>{Up(v.signal)}})))}catch(w){w instanceof EP||TG(o,w,{raisedBy:"effect"})}finally{await Promise.all(b),v.abort(R$e),a(h),h.pending.delete(v)}},f=Q$e(e,r);return{middleware:h=>m=>p=>{if(!_ie(p))return m(p);if(Wie.match(p))return c(p.payload);if(V$e.match(p)){f();return}if(Xie.match(p))return u(p.payload);let x=h.getState();const v=()=>{if(x===PG)throw new Error(ju(23));return x};let y;try{if(y=m(p),e.size>0){const b=h.getState(),w=Array.from(e.values());for(const j of w){let I=!1;try{I=j.predicate(p,b,x)}catch(_){I=!1,TG(o,_,{raisedBy:"predicate"})}I&&d(j,p,h,v)}}}finally{x=PG}return y},startListening:c,stopListening:u,clearListeners:f}};function ju(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var $$e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Yie=tu({name:"chartLayout",initialState:$$e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:G$e,setLayout:K$e,setChartSize:q$e,setScale:z$e}=Yie.actions,W$e=Yie.reducer;function Jie(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function ci(t){return Number.isFinite(t)}function Em(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function kG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(r),!0).forEach(function(n){X$e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X$e(t,e,r){return(e=Y$e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y$e(t){var e=J$e(t,"string");return typeof e=="symbol"?e:e+""}function J$e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function js(t,e,r){return Jo(t)||Jo(e)?r:ih(e)?Ag(t,e,r):typeof e=="function"?e(t):r}var Z$e=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&An(t[s]))return Xx(Xx({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&An(t[o]))return Xx(Xx({},t),{},{[o]:t[o]+(a||0)})}return t},Mg=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",FG=1e-4,eGe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-FG,s=Math.max(n[0],n[1])+FG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},tGe=(t,e)=>{if(!e||e.length!==2||!An(e[0])||!An(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!An(t[0])||t[0]<r)&&(a[0]=r),(!An(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},rGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0,l=0;l<r;++l){var c=t[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],A=sh(d)?f:d;A>=0?(u[0]=s,u[1]=s+A,s=d):(u[0]=o,u[1]=o+A,o=d)}}}},nGe=t=>{var e,r=t.length;if(!(r<=0)){var n=(e=t[0])===null||e===void 0?void 0:e.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var s=0,o=0;o<r;++o){var l=t[o],c=l==null?void 0:l[a];if(c!=null){var u=sh(c[1])?c[0]:c[1];u>=0?(c[0]=s,c[1]=s+u,s=c[1]):(c[0]=0,c[1]=0)}}}},aGe={sign:rGe,expand:FVe,none:hg,silhouette:OVe,wiggle:DVe,positive:nGe},sGe=(t,e,r)=>{var n,a=(n=aGe[r])!==null&&n!==void 0?n:hg,s=kVe().keys(e).value((l,c)=>Number(js(l,c,0))).order(fF).offset(a),o=s(t);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=js(t[d],e[c],0);Array.isArray(f)&&f.length===2&&An(f[0])&&An(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function iGe(t){return t==null?void 0:String(t)}var OG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=js(s,e.dataKey,e.scale.domain()[o]);return Jo(l)?null:e.scale(l)-a/2+n},oGe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},lGe=t=>{var e=t.flat(2).filter(An);return[Math.min(...e),Math.max(...e)]},cGe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],uGe=(t,e,r)=>{if(t!=null)return cGe(Object.keys(t).reduce((n,a)=>{var s=t[a];if(!s)return n;var{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Jie(u,e,r),f=lGe(d);return!ci(f[0])||!ci(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},DG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hI=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=xP(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),s)}return s===1/0?0:s}return r?void 0:0};function MG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return Xx(Xx({},e),{},{dataKey:r,payload:n,value:a,name:s})}function IP(t,e){if(t)return String(t);if(typeof e=="string")return e}var dGe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},fGe=(t,e)=>e==="centric"?t.angle:t.radius,FA=t=>t.layout.width,OA=t=>t.layout.height,hGe=t=>t.layout.scale,Zie=t=>t.layout.margin,jP=Wt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),PP=Wt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),eoe="data-recharts-item-index",toe="data-recharts-item-id",Kw=60;function LG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LG(Object(r),!0).forEach(function(n){AGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AGe(t,e,r){return(e=mGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mGe(t){var e=pGe(t,"string");return typeof e=="symbol"?e:e+""}function pGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gGe=t=>t.brush.height;function xGe(t){var e=PP(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Kw;return r+a}return r},0)}function vGe(t){var e=PP(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Kw;return r+a}return r},0)}function yGe(t){var e=jP(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function bGe(t){var e=jP(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Io=Wt([FA,OA,Zie,gGe,xGe,vGe,yGe,bGe,bie,KHe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},A=f_(f_({},f),d),h=A.bottom;A.bottom+=n,A=Z$e(A,c,u);var m=t-A.left-A.right,p=e-A.top-A.bottom;return f_(f_({brushBottom:h},A),{},{width:Math.max(m,0),height:Math.max(p,0)})}),wGe=Wt(Io,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),ZR=Wt(FA,OA,(t,e)=>({x:0,y:0,width:t,height:e})),NGe=g.createContext(null),Ru=()=>g.useContext(NGe)!=null,BP=t=>t.brush,TP=Wt([BP,Io,Zie],(t,e,r)=>({height:t.height,x:An(t.x)?t.x:e.left,y:An(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:An(t.width)?t.width:e.width})),roe={},noe={},aoe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),p()};let A=null;const h=()=>{A!=null&&clearTimeout(A),A=setTimeout(()=>{A=null,f()},n)},m=()=>{A!==null&&(clearTimeout(A),A=null)},p=()=>{m(),o=void 0,l=null},x=()=>{d()},v=function(...y){if(a!=null&&a.aborted)return;o=this,l=y;const b=A==null;h(),c&&b&&d()};return v.schedule=h,v.cancel=p,v.flush=x,a==null||a.addEventListener("abort",p,{once:!0}),v}t.debounce=e})(aoe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aoe;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const A=e.debounce(function(...p){d=n.apply(this,p),f=null},a,{edges:u}),h=function(...p){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,p),f=Date.now(),A.cancel(),A.schedule(),d):(A.apply(this,p),d)},m=()=>(A.flush(),d);return h.cancel=A.cancel,h.flush=m,h}t.debounce=r})(noe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=noe;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(roe);var CGe=roe.throttle;const _Ge=CA(CGe);var UG=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},soe=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=gA(n)?t:Number(n),c=gA(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},EGe={width:0,height:0,overflow:"visible"},SGe={width:0,overflowX:"visible"},IGe={height:0,overflowY:"visible"},jGe={},PGe=t=>{var{width:e,height:r}=t,n=gA(e),a=gA(r);return n&&a?EGe:n?SGe:a?IGe:jGe};function BGe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function CF(){return CF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CF.apply(null,arguments)}function QG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QG(Object(r),!0).forEach(function(n){TGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TGe(t,e,r){return(e=kGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kGe(t){var e=FGe(t,"string");return typeof e=="symbol"?e:e+""}function FGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ioe=g.createContext({width:-1,height:-1});function OGe(t){return Em(t.width)&&Em(t.height)}function ooe(t){var{children:e,width:r,height:n}=t,a=g.useMemo(()=>({width:r,height:n}),[r,n]);return OGe(a)?g.createElement(ioe.Provider,{value:a},e):null}var eM=()=>g.useContext(ioe),DGe=g.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:A,onResize:h,style:m={}}=t,p=g.useRef(null),x=g.useRef();x.current=h,g.useImperativeHandle(e,()=>p.current);var[v,y]=g.useState({containerWidth:n.width,containerHeight:n.height}),b=g.useCallback((S,E)=>{y(F=>{var k=Math.round(S),B=Math.round(E);return F.containerWidth===k&&F.containerHeight===B?F:{containerWidth:k,containerHeight:B}})},[]);g.useEffect(()=>{if(p.current==null||typeof ResizeObserver>"u")return Vw;var S=B=>{var D,{width:X,height:he}=B[0].contentRect;b(X,he),(D=x.current)===null||D===void 0||D.call(x,X,he)};d>0&&(S=_Ge(S,d,{trailing:!0,leading:!1}));var E=new ResizeObserver(S),{width:F,height:k}=p.current.getBoundingClientRect();return b(F,k),E.observe(p.current),()=>{E.disconnect()}},[b,d]);var{containerWidth:w,containerHeight:j}=v;UG(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:I,calculatedHeight:_}=soe(w,j,{width:a,height:s,aspect:r,maxHeight:c});return UG(I!=null&&I>0||_!=null&&_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,_,a,s,o,l,r),g.createElement("div",{id:f?"".concat(f):void 0,className:Xa("recharts-responsive-container",A),style:VG(VG({},m),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:p},g.createElement("div",{style:PGe({width:a,height:s})},g.createElement(ooe,{width:I,height:_},u)))}),HG=g.forwardRef((t,e)=>{var r=eM();if(Em(r.width)&&Em(r.height))return t.children;var{width:n,height:a}=BGe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=soe(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return An(s)&&An(o)?g.createElement(ooe,{width:s,height:o},t.children):g.createElement(DGe,CF({},t,{width:n,height:a,ref:e}))});function loe(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var kP=()=>{var t,e=Ru(),r=cn(wGe),n=cn(TP),a=(t=cn(BP))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},RGe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},MGe=()=>{var t;return(t=cn(Io))!==null&&t!==void 0?t:RGe},coe=()=>cn(FA),uoe=()=>cn(OA),LGe=()=>cn(t=>t.layout.margin),Ca=t=>t.layout.layoutType,qw=()=>cn(Ca),UGe=()=>{var t=qw();return t!==void 0},FP=t=>{var e=xs(),r=Ru(),{width:n,height:a}=t,s=eM(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),g.useEffect(()=>{!r&&Em(o)&&Em(l)&&e(q$e({width:o,height:l}))},[e,r,o,l]),null},doe=Symbol.for("immer-nothing"),$G=Symbol.for("immer-draftable"),Fu=Symbol.for("immer-state");function tf(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var q2=Object.getPrototypeOf;function Vv(t){return!!t&&!!t[Fu]}function pg(t){var e;return t?foe(t)||Array.isArray(t)||!!t[$G]||!!((e=t.constructor)!=null&&e[$G])||zw(t)||DP(t):!1}var QGe=Object.prototype.constructor.toString(),GG=new WeakMap;function foe(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=GG.get(r);return n===void 0&&(n=Function.toString.call(r),GG.set(r,n)),n===QGe}function AI(t,e,r=!0){OP(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function OP(t){const e=t[Fu];return e?e.type_:Array.isArray(t)?1:zw(t)?2:DP(t)?3:0}function _F(t,e){return OP(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function hoe(t,e,r){const n=OP(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function VGe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function zw(t){return t instanceof Map}function DP(t){return t instanceof Set}function op(t){return t.copy_||t.base_}function EF(t,e){if(zw(t))return new Map(t);if(DP(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=foe(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Fu];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(q2(t),n)}else{const n=q2(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function tM(t,e=!1){return RP(t)||Vv(t)||!pg(t)||(OP(t)>1&&Object.defineProperties(t,{set:h_,add:h_,clear:h_,delete:h_}),Object.freeze(t),e&&Object.values(t).forEach(r=>tM(r,!0))),t}function HGe(){tf(2)}var h_={value:HGe};function RP(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var $Ge={};function gg(t){const e=$Ge[t];return e||tf(0,t),e}var z2;function Aoe(){return z2}function GGe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function KG(t,e){e&&(gg("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function SF(t){IF(t),t.drafts_.forEach(KGe),t.drafts_=null}function IF(t){t===z2&&(z2=t.parent_)}function qG(t){return z2=GGe(z2,t)}function KGe(t){const e=t[Fu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Fu].modified_&&(SF(e),tf(4)),pg(t)&&(t=mI(e,t),e.parent_||pI(e,t)),e.patches_&&gg("Patches").generateReplacementPatches_(r[Fu].base_,t,e.patches_,e.inversePatches_)):t=mI(e,r,[]),SF(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==doe?t:void 0}function mI(t,e,r){if(RP(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[Fu];if(!a)return AI(e,(s,o)=>WG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return pI(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),AI(o,(c,u)=>WG(t,a,s,c,u,r,l),n),pI(t,s,!1),r&&t.patches_&&gg("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function WG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=RP(a);if(!(l&&!o)){if(Vv(a)){const c=s&&e&&e.type_!==3&&!_F(e.assigned_,n)?s.concat(n):void 0,u=mI(t,a,c);if(hoe(r,n,u),Vv(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(pg(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;mI(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(zw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&pI(t,a)}}}function pI(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&tM(e,r)}function qGe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Aoe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=rM;r&&(a=[n],s=W2);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var rM={get(t,e){if(e===Fu)return t;const r=op(t);if(!_F(r,e))return zGe(t,r,e);const n=r[e];return t.finalized_||!pg(n)?n:n===aB(t.base_,e)?(sB(t),t.copy_[e]=PF(n,t)):n},has(t,e){return e in op(t)},ownKeys(t){return Reflect.ownKeys(op(t))},set(t,e,r){const n=moe(op(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=aB(op(t),e),s=a==null?void 0:a[Fu];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(VGe(r,a)&&(r!==void 0||_F(t.base_,e)))return!0;sB(t),jF(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aB(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sB(t),jF(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=op(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){tf(11)},getPrototypeOf(t){return q2(t.base_)},setPrototypeOf(){tf(12)}},W2={};AI(rM,(t,e)=>{W2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});W2.deleteProperty=function(t,e){return W2.set.call(this,t,e,void 0)};W2.set=function(t,e,r){return rM.set.call(this,t[0],e,r,t[0])};function aB(t,e){const r=t[Fu];return(r?op(r):t)[e]}function zGe(t,e,r){var a;const n=moe(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function moe(t,e){if(!(e in t))return;let r=q2(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=q2(r)}}function jF(t){t.modified_||(t.modified_=!0,t.parent_&&jF(t.parent_))}function sB(t){t.copy_||(t.copy_=EF(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var WGe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&tf(6),n!==void 0&&typeof n!="function"&&tf(7);let a;if(pg(e)){const s=qG(this),o=PF(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?SF(s):IF(s)}return KG(s,n),zG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===doe&&(a=void 0),this.autoFreeze_&&tM(a,!0),n){const s=[],o=[];gg("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else tf(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){pg(t)||tf(8),Vv(t)&&(t=XGe(t));const e=qG(this),r=PF(t,void 0);return r[Fu].isManual_=!0,IF(e),r}finishDraft(t,e){const r=t&&t[Fu];(!r||!r.isManual_)&&tf(9);const{scope_:n}=r;return KG(n,e),zG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=gg("Patches").applyPatches_;return Vv(t)?n(t,e):this.produce(t,a=>n(a,e))}};function PF(t,e){const r=zw(t)?gg("MapSet").proxyMap_(t,e):DP(t)?gg("MapSet").proxySet_(t,e):qGe(t,e);return(e?e.scope_:Aoe()).drafts_.push(r),r}function XGe(t){return Vv(t)||tf(10,t),poe(t)}function poe(t){if(!pg(t)||RP(t))return t;const e=t[Fu];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=EF(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=EF(t,!0);return AI(r,(a,s)=>{hoe(r,a,poe(s))},n),e&&(e.finalized_=!1),r}var YGe=new WGe;YGe.produce;var JGe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},goe=tu({name:"legend",initialState:JGe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Os()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=hf(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:Os()},removeLegendPayload:{reducer(t,e){var r=hf(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:Os()}}}),{setLegendSize:XG,setLegendSettings:ZGe,addLegendPayload:xoe,replaceLegendPayload:voe,removeLegendPayload:yoe}=goe.actions,eKe=goe.reducer,tKe=["contextPayload"];function BF(){return BF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BF.apply(null,arguments)}function YG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YG(Object(r),!0).forEach(function(n){rKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rKe(t,e,r){return(e=nKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nKe(t){var e=aKe(t,"string");return typeof e=="symbol"?e:e+""}function aKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sKe(t,e){if(t==null)return{};var r,n,a=iKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oKe(t){return t.value}function lKe(t){var{contextPayload:e}=t,r=sKe(t,tKe),n=uie(e,t.payloadUniqBy,oKe),a=Hv(Hv({},r),{},{payload:n});return g.isValidElement(t.content)?g.cloneElement(t.content,a):typeof t.content=="function"?g.createElement(t.content,a):g.createElement(dHe,a)}function cKe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Hv(Hv({},u),d)}function uKe(t){var e=xs();return g.useEffect(()=>{e(ZGe(t))},[e,t]),null}function dKe(t){var e=xs();return g.useEffect(()=>(e(XG(t)),()=>{e(XG({width:0,height:0}))}),[e,t]),null}function fKe(t,e,r,n){return t==="vertical"&&An(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var hKe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function TF(t){var e=El(t,hKe),r=WHe(),n=nVe(),a=LGe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=wie([r]),f=coe(),A=uoe();if(f==null||A==null)return null;var h=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),m=fKe(e.layout,o,s,h),p=c?l:Hv(Hv({position:"absolute",width:(m==null?void 0:m.width)||s||"auto",height:(m==null?void 0:m.height)||o||"auto"},cKe(l,e,a,f,A,u)),l),x=c??n;if(x==null||r==null)return null;var v=g.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:d},g.createElement(uKe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&g.createElement(dKe,{width:u.width,height:u.height}),g.createElement(lKe,BF({},e,m,{margin:a,chartWidth:f,chartHeight:A,contextPayload:r})));return Iu.createPortal(v,x)}TF.displayName="Legend";function kF(){return kF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kF.apply(null,arguments)}function JG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JG(Object(r),!0).forEach(function(n){AKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AKe(t,e,r){return(e=mKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mKe(t){var e=pKe(t,"string");return typeof e=="symbol"?e:e+""}function pKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gKe(t){return Array.isArray(t)&&ih(t[0])&&ih(t[1])?t.join(" ~ "):t}var xKe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:A=!1}=t,h=()=>{if(s&&s.length){var j={padding:0,margin:0},I=(l?xP(s,l):s).map((_,S)=>{if(_.type==="none")return null;var E=_.formatter||o||gKe,{value:F,name:k}=_,B=F,D=k;if(E){var X=E(F,k,_,S,s);if(Array.isArray(X))[B,D]=X;else if(X!=null)B=X;else return null}var he=iB({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(S),style:he},ih(D)?g.createElement("span",{className:"recharts-tooltip-item-name"},D):null,ih(D)?g.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,g.createElement("span",{className:"recharts-tooltip-item-value"},B),g.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:j},I)}return null},m=iB({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=iB({margin:0},a),x=!Jo(d),v=x?d:"",y=Xa("recharts-default-tooltip",c),b=Xa("recharts-tooltip-label",u);x&&f&&s!==void 0&&s!==null&&(v=f(d,s));var w=A?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",kF({className:y,style:m},w),g.createElement("p",{className:b,style:p},g.isValidElement(v)?v:"".concat(v)),h())},vy="recharts-tooltip-wrapper",vKe={visibility:"hidden"};function yKe(t){var{coordinate:e,translateX:r,translateY:n}=t;return Xa(vy,{["".concat(vy,"-right")]:An(r)&&e&&An(e.x)&&r>=e.x,["".concat(vy,"-left")]:An(r)&&e&&An(e.x)&&r<e.x,["".concat(vy,"-bottom")]:An(n)&&e&&An(e.y)&&n>=e.y,["".concat(vy,"-top")]:An(n)&&e&&An(e.y)&&n<e.y})}function ZG(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&An(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(e[n])return o[n]?d:f;var A=c[n];if(A==null)return 0;if(o[n]){var h=d,m=A;return h<m?Math.max(f,A):Math.max(d,A)}if(u==null)return 0;var p=f+l,x=A+u;return p>x?Math.max(d,A):Math.max(f,A)}function bKe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function wKe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,f;return o.height>0&&o.width>0&&r?(d=ZG({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=ZG({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=bKe({translateX:d,translateY:f,useTranslate3d:l})):u=vKe,{cssProperties:u,cssClasses:yKe({translateX:d,translateY:f,coordinate:r})}}function eK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eK(Object(r),!0).forEach(function(n){FF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FF(t,e,r){return(e=NKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NKe(t){var e=CKe(t,"string");return typeof e=="symbol"?e:e+""}function CKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class _Ke extends g.PureComponent{constructor(){super(...arguments),FF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),FF(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:A,viewBox:h,wrapperStyle:m,lastBoundingBox:p,innerRef:x,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:b}=wKe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:p.height,width:p.width},useTranslate3d:A,viewBox:h}),w=v?{}:A_(A_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=A_(A_({},w),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},m);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:x},s)}}var boe=()=>{var t;return(t=cn(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function OF(){return OF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OF.apply(null,arguments)}function tK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tK(Object(r),!0).forEach(function(n){EKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EKe(t,e,r){return(e=SKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SKe(t){var e=IKe(t,"string");return typeof e=="symbol"?e:e+""}function IKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nK={curveBasisClosed:wVe,curveBasisOpen:NVe,curveBasis:bVe,curveBumpX:oVe,curveBumpY:lVe,curveLinearClosed:CVe,curveLinear:dP,curveMonotoneX:_Ve,curveMonotoneY:EVe,curveNatural:SVe,curveStep:IVe,curveStepAfter:PVe,curveStepBefore:jVe},gI=t=>ci(t.x)&&ci(t.y),aK=t=>t.base!=null&&gI(t.base)&&gI(t),yy=t=>t.x,by=t=>t.y,jKe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Qw(t));return(r==="curveMonotone"||r==="curveBump")&&e?nK["".concat(r).concat(e==="vertical"?"Y":"X")]:nK[r]||dP},PKe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=jKe(e,a),l=s?r.filter(gI):r,c;if(Array.isArray(n)){var u=r.map((h,m)=>rK(rK({},h),{},{base:n[m]}));a==="vertical"?c=i_().y(by).x1(yy).x0(h=>h.base.x):c=i_().x(yy).y1(by).y0(h=>h.base.y);var d=c.defined(aK).curve(o),f=s?u.filter(aK):u;return d(f)}a==="vertical"&&An(n)?c=i_().y(by).x1(yy).x0(n):An(n)?c=i_().x(yy).y1(by).y0(n):c=Bse().x(yy).y(by);var A=c.defined(gI).curve(o);return A(l)},nM=t=>{var{className:e,points:r,path:n,pathRef:a}=t,s=qw();if((!r||!r.length)&&!n)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=r&&r.length?PKe(o):n;return g.createElement("path",OF({},ah(t),JVe(t),{className:Xa("recharts-curve",e),d:l===null?void 0:l,ref:a}))},BKe=["x","y","top","left","width","height","className"];function DF(){return DF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DF.apply(null,arguments)}function sK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TKe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sK(Object(r),!0).forEach(function(n){kKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kKe(t,e,r){return(e=FKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FKe(t){var e=OKe(t,"string");return typeof e=="symbol"?e:e+""}function OKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DKe(t,e){if(t==null)return{};var r,n,a=RKe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function RKe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var MKe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),LKe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=DKe(t,BKe),u=TKe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!An(e)||!An(r)||!An(s)||!An(o)||!An(n)||!An(a)?null:g.createElement("path",DF({},Ed(u),{className:Xa("recharts-cross",l),d:MKe(e,r,s,o,n,a)}))};function UKe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function iK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(r),!0).forEach(function(n){QKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QKe(t,e,r){return(e=VKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VKe(t){var e=HKe(t,"string");return typeof e=="symbol"?e:e+""}function HKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Ke=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),woe=(t,e,r)=>t.map(n=>"".concat($Ke(n)," ").concat(e,"ms ").concat(r)).join(","),GKe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),X2=(t,e)=>Object.keys(e).reduce((r,n)=>oK(oK({},r),{},{[n]:t(n,e[n])}),{});function lK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lK(Object(r),!0).forEach(function(n){KKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KKe(t,e,r){return(e=qKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qKe(t){var e=zKe(t,"string");return typeof e=="symbol"?e:e+""}function zKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xI=(t,e,r)=>t+(e-t)*r,RF=t=>{var{from:e,to:r}=t;return e!==r},Noe=(t,e,r)=>{var n=X2((a,s)=>{if(RF(s)){var[o,l]=t(s.from,s.to,s.velocity);return xo(xo({},s),{},{from:o,velocity:l})}return s},e);return r<1?X2((a,s)=>RF(s)&&n[a]!=null?xo(xo({},s),{},{velocity:xI(s.velocity,n[a].velocity,r),from:xI(s.from,n[a].from,r)}):s,e):Noe(t,n,r-1)};function WKe(t,e,r,n,a,s){var o,l=n.reduce((A,h)=>xo(xo({},A),{},{[h]:{from:t[h],velocity:0,to:e[h]}}),{}),c=()=>X2((A,h)=>h.from,l),u=()=>!Object.values(l).filter(RF).length,d=null,f=A=>{o||(o=A);var h=A-o,m=h/r.dt;l=Noe(r,l,m),a(xo(xo(xo({},t),e),c())),o=A,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{var A;(A=d)===null||A===void 0||A()})}function XKe(t,e,r,n,a,s,o){var l=null,c=a.reduce((f,A)=>{var h=t[A],m=e[A];return h==null||m==null?f:xo(xo({},f),{},{[A]:[h,m]})},{}),u,d=f=>{u||(u=f);var A=(f-u)/n,h=X2((p,x)=>xI(...x,r(A)),c);if(s(xo(xo(xo({},t),e),h)),A<1)l=o.setTimeout(d);else{var m=X2((p,x)=>xI(...x,r(1)),c);s(xo(xo(xo({},t),e),m))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const YKe=(t,e,r,n,a,s)=>{var o=GKe(t,e);return r==null?()=>(a(xo(xo({},t),e)),()=>{}):r.isStepper===!0?WKe(t,e,r,o,a,s):XKe(t,e,r,n,o,a,s)};var vI=1e-4,Coe=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],_oe=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),cK=(t,e)=>r=>{var n=Coe(t,e);return _oe(n,r)},JKe=(t,e)=>r=>{var n=Coe(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return _oe(a,r)},ZKe=t=>{var e,r=t.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(e=r[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(n==null||n.length!==4)return null;var a=n.map(s=>parseFloat(s));return[a[0],a[1],a[2],a[3]]},eqe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=ZKe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},tqe=(t,e,r,n)=>{var a=cK(t,r),s=cK(e,n),o=JKe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,A=0;A<8;++A){var h=a(f)-d,m=o(f);if(Math.abs(h-d)<vI||m<vI)return s(f);f=l(f-h/m)}return s(f)};return c.isStepper=!1,c},uK=function(){return tqe(...eqe(...arguments))},rqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,A=c*a/1e3+o;return Math.abs(A-l)<vI&&Math.abs(f)<vI?[l,0]:[A,f]};return s.isStepper=!0,s.dt=a,s},nqe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uK(t);case"spring":return rqe();default:if(t.split("(")[0]==="cubic-bezier")return uK(t)}return typeof t=="function"?t:null};function aqe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class sqe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function iqe(){return aqe(new sqe)}var oqe=g.createContext(iqe);function lqe(t,e){var r=g.useContext(oqe);return g.useMemo(()=>e??r(t),[t,e,r])}var cqe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),MP={isSsr:cqe()},uqe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},dK={t:0},oB={t:1};function LP(t){var e=El(t,uqe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!MP.isSsr:r,f=lqe(e.animationId,e.animationManager),[A,h]=g.useState(d?dK:oB),m=g.useRef(null);return g.useEffect(()=>{d||h(oB)},[d]),g.useEffect(()=>{if(!d||!n)return Vw;var p=YKe(dK,oB,nqe(s),a,h,f.getTimeoutController()),x=()=>{m.current=p()};return f.start([c,o,x,a,l]),()=>{f.stop(),m.current&&m.current(),l()}},[d,n,a,s,o,c,l,f]),u(A.t)}function UP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(H2(e)),n=g.useRef(t);return n.current!==t&&(r.current=H2(e),n.current=t),r.current}var dqe=["radius"],fqe=["radius"],fK,hK,AK,mK,pK,gK,xK,vK,yK,bK;function wK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(r),!0).forEach(function(n){hqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hqe(t,e,r){return(e=Aqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aqe(t){var e=mqe(t,"string");return typeof e=="symbol"?e:e+""}function mqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yI.apply(null,arguments)}function CK(t,e){if(t==null)return{};var r,n,a=pqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function pqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Df(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var _K=(t,e,r,n,a)=>{var s=K0(r),o=K0(n),l=Math.min(Math.abs(s)/2,Math.abs(o)/2),c=o>=0?1:-1,u=s>=0?1:-1,d=o>=0&&s>=0||o<0&&s<0?1:0,f;if(l>0&&a instanceof Array){for(var A=[0,0,0,0],h=0,m=4;h<m;h++)A[h]=a[h]>l?l:a[h];f=pi(fK||(fK=Df(["M",",",""])),t,e+c*A[0]),A[0]>0&&(f+=pi(hK||(hK=Df(["A ",",",",0,0,",",",",",""])),A[0],A[0],d,t+u*A[0],e)),f+=pi(AK||(AK=Df(["L ",",",""])),t+r-u*A[1],e),A[1]>0&&(f+=pi(mK||(mK=Df(["A ",",",",0,0,",`,
        `,",",""])),A[1],A[1],d,t+r,e+c*A[1])),f+=pi(pK||(pK=Df(["L ",",",""])),t+r,e+n-c*A[2]),A[2]>0&&(f+=pi(gK||(gK=Df(["A ",",",",0,0,",`,
        `,",",""])),A[2],A[2],d,t+r-u*A[2],e+n)),f+=pi(xK||(xK=Df(["L ",",",""])),t+u*A[3],e+n),A[3]>0&&(f+=pi(vK||(vK=Df(["A ",",",",0,0,",`,
        `,",",""])),A[3],A[3],d,t,e+n-c*A[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var p=Math.min(l,a);f=pi(yK||(yK=Df(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*p,p,p,d,t+u*p,e,t+r-u*p,e,p,p,d,t+r,e+c*p,t+r,e+n-c*p,p,p,d,t+r-u*p,e+n,t+u*p,e+n,p,p,d,t,e+n-c*p)}else f=pi(bK||(bK=Df(["M ",","," h "," v "," h "," Z"])),t,e,r,n,-r);return f},EK={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Eoe=t=>{var e=El(t,EK),r=g.useRef(null),[n,a]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&a(fe)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:f,animationDuration:A,animationBegin:h,isAnimationActive:m,isUpdateAnimationActive:p}=e,x=g.useRef(l),v=g.useRef(c),y=g.useRef(s),b=g.useRef(o),w=g.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),j=UP(w,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var I=Xa("recharts-rectangle",d);if(!p){var _=Ed(e),{radius:S}=_,E=CK(_,dqe);return g.createElement("path",yI({},E,{x:K0(s),y:K0(o),width:K0(l),height:K0(c),radius:typeof u=="number"?u:void 0,className:I,d:_K(s,o,l,c,u)}))}var F=x.current,k=v.current,B=y.current,D=b.current,X="0px ".concat(n===-1?1:n,"px"),he="".concat(n,"px 0px"),Ae=woe(["strokeDasharray"],A,typeof f=="string"?f:EK.animationEasing);return g.createElement(LP,{animationId:j,key:j,canBegin:n>0,duration:A,easing:f,isActive:p,begin:h},fe=>{var me=go(F,l,fe),ne=go(k,c,fe),Pe=go(B,s,fe),Te=go(D,o,fe);r.current&&(x.current=me,v.current=ne,y.current=Pe,b.current=Te);var O;m?fe>0?O={transition:Ae,strokeDasharray:he}:O={strokeDasharray:X}:O={strokeDasharray:he};var K=Ed(e),{radius:q}=K,U=CK(K,fqe);return g.createElement("path",yI({},U,{radius:typeof u=="number"?u:void 0,className:I,d:_K(Pe,Te,me,ne,u),ref:r,style:NK(NK({},O),e.style)}))})};function SK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function IK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SK(Object(r),!0).forEach(function(n){gqe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gqe(t,e,r){return(e=xqe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xqe(t){var e=vqe(t,"string");return typeof e=="symbol"?e:e+""}function vqe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bI=Math.PI/180,yqe=t=>t*180/Math.PI,to=(t,e,r,n)=>({x:t+Math.cos(-bI*n)*r,y:e+Math.sin(-bI*n)*r}),Soe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},bqe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},wqe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=bqe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:yqe(c),angleInRadian:c}},Nqe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},Cqe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},_qe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=wqe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=Nqe(e),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?IK(IK({},e),{},{radius:a,angle:Cqe(d,e)}):null};function Ioe(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=to(e,r,n,a),l=to(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}var jK,PK,BK,TK,kK,FK,OK;function MF(){return MF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MF.apply(null,arguments)}function Np(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Eqe=(t,e)=>{var r=Nl(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},m_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/bI,f=c?a:a+s*d,A=to(e,r,u,f),h=to(e,r,n,f),m=c?a-s*d:a,p=to(e,r,u*Math.cos(d*bI),m);return{center:A,circleTangency:h,lineTangency:p,theta:d}},joe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=Eqe(s,o),c=s+l,u=to(e,r,a,s),d=to(e,r,a,c),f=pi(jK||(jK=Np(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(s>c),d.x,d.y);if(n>0){var A=to(e,r,n,s),h=to(e,r,n,c);f+=pi(PK||(PK=Np(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),h.x,h.y,n,n,+(Math.abs(l)>180),+(s<=c),A.x,A.y)}else f+=pi(BK||(BK=Np(["L ",","," Z"])),e,r);return f},Sqe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=Nl(u-c),{circleTangency:f,lineTangency:A,theta:h}=m_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:m,lineTangency:p,theta:x}=m_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-x;if(v<0)return o?pi(TK||(TK=Np(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),A.x,A.y,s,s,s*2,s,s,-s*2):joe({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var y=pi(kK||(kK=Np(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),A.x,A.y,s,s,+(d<0),f.x,f.y,a,a,+(v>180),+(d<0),m.x,m.y,s,s,+(d<0),p.x,p.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:j}=m_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:_,theta:S}=m_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-j-S;if(E<0&&s===0)return"".concat(y,"L").concat(e,",").concat(r,"Z");y+=pi(FK||(FK=Np(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),_.x,_.y,s,s,+(d<0),I.x,I.y,n,n,+(E>180),+(d>0),b.x,b.y,s,s,+(d<0),w.x,w.y)}else y+=pi(OK||(OK=Np(["L",",","Z"])),e,r);return y},Iqe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Poe=t=>{var e=El(t,Iqe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=e;if(s<a||u===d)return null;var A=Xa("recharts-sector",f),h=s-a,m=Yl(o,h,0,!0),p;return m>0&&Math.abs(u-d)<360?p=Sqe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):p=joe({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),g.createElement("path",MF({},Ed(e),{className:A,d:p}))};function jqe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Kse(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=to(n,a,s,l),u=to(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return Ioe(e)}}var Boe={},Toe={},koe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GR;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(koe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=koe;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Toe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR,r=Toe;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(Boe);var Pqe=Boe.range;const Foe=CA(Pqe);function um(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bqe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aM(t){let e,r,n;t.length!==2?(e=um,r=(l,c)=>um(t(l),c),n=(l,c)=>t(l)-c):(e=t===um||t===Bqe?t:Tqe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function Tqe(){return 0}function Ooe(t){return t===null?NaN:+t}function*kqe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Fqe=aM(um),Ww=Fqe.right;aM(Ooe).center;class DK extends Map{constructor(e,r=Rqe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(RK(this,e))}has(e){return super.has(RK(this,e))}set(e,r){return super.set(Oqe(this,e),r)}delete(e){return super.delete(Dqe(this,e))}}function RK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Oqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Dqe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Rqe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Mqe(t=um){if(t===um)return Doe;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Doe(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Lqe=Math.sqrt(50),Uqe=Math.sqrt(10),Qqe=Math.sqrt(2);function wI(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=Lqe?10:s>=Uqe?5:s>=Qqe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?wI(t,e,r*2):[l,c,u]}function LF(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?wI(e,t,r):wI(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function UF(t,e,r){return e=+e,t=+t,r=+r,wI(t,e,r)[2]}function QF(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?UF(e,t,r):UF(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function MK(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function LK(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Roe(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Doe:Mqe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),A=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(e-u*f/c+A)),m=Math.min(n,Math.floor(e+(c-u)*f/c+A));Roe(t,e,h,m,a)}const s=t[e];let o=r,l=n;for(wy(t,r,e),a(t[n],s)>0&&wy(t,r,n);o<l;){for(wy(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?wy(t,r,l):(++l,wy(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function wy(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Vqe(t,e,r){if(t=Float64Array.from(kqe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return LK(t);if(e>=1)return MK(t);var n,a=(n-1)*e,s=Math.floor(a),o=MK(Roe(t,s).subarray(0,s+1)),l=LK(t.subarray(s+1));return o+(l-o)*(a-s)}}function Hqe(t,e,r=Ooe){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function $qe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Td(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function DA(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VF=Symbol("implicit");function sM(){var t=new DK,e=[],r=[],n=VF;function a(s){let o=t.get(s);if(o===void 0){if(n!==VF)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new DK;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return sM(e,r).unknown(n)},Td.apply(a,arguments),a}function iM(){var t=sM().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var A=e().length,h=a<n,m=h?a:n,p=h?n:a;s=(p-m)/Math.max(1,A-c+u*2),l&&(s=Math.floor(s)),m+=(p-m-s*(A-c))*d,o=s*(1-c),l&&(m=Math.round(m),o=Math.round(o));var x=$qe(A).map(function(v){return m+s*v});return r(h?x.reverse():x)}return t.domain=function(A){return arguments.length?(e(A),f()):e()},t.range=function(A){return arguments.length?([n,a]=A,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(A){return[n,a]=A,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(A){return arguments.length?(l=!!A,f()):l},t.padding=function(A){return arguments.length?(c=Math.min(1,u=+A),f()):c},t.paddingInner=function(A){return arguments.length?(c=Math.min(1,A),f()):c},t.paddingOuter=function(A){return arguments.length?(u=+A,f()):u},t.align=function(A){return arguments.length?(d=Math.max(0,Math.min(1,A)),f()):d},t.copy=function(){return iM(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Td.apply(f(),arguments)}function Moe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Moe(e())},t}function Gqe(){return Moe(iM.apply(null,arguments).paddingInner(1))}function oM(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Loe(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Xw(){}var Y2=.7,NI=1/Y2,pv="\\s*([+-]?\\d+)\\s*",J2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",th="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kqe=/^#([0-9a-f]{3,8})$/,qqe=new RegExp(`^rgb\\(${pv},${pv},${pv}\\)$`),zqe=new RegExp(`^rgb\\(${th},${th},${th}\\)$`),Wqe=new RegExp(`^rgba\\(${pv},${pv},${pv},${J2}\\)$`),Xqe=new RegExp(`^rgba\\(${th},${th},${th},${J2}\\)$`),Yqe=new RegExp(`^hsl\\(${J2},${th},${th}\\)$`),Jqe=new RegExp(`^hsla\\(${J2},${th},${th},${J2}\\)$`),UK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oM(Xw,Z2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:QK,formatHex:QK,formatHex8:Zqe,formatHsl:eze,formatRgb:VK,toString:VK});function QK(){return this.rgb().formatHex()}function Zqe(){return this.rgb().formatHex8()}function eze(){return Uoe(this).formatHsl()}function VK(){return this.rgb().formatRgb()}function Z2(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Kqe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?HK(e):r===3?new qc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?p_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?p_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qqe.exec(t))?new qc(e[1],e[2],e[3],1):(e=zqe.exec(t))?new qc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wqe.exec(t))?p_(e[1],e[2],e[3],e[4]):(e=Xqe.exec(t))?p_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Yqe.exec(t))?KK(e[1],e[2]/100,e[3]/100,1):(e=Jqe.exec(t))?KK(e[1],e[2]/100,e[3]/100,e[4]):UK.hasOwnProperty(t)?HK(UK[t]):t==="transparent"?new qc(NaN,NaN,NaN,0):null}function HK(t){return new qc(t>>16&255,t>>8&255,t&255,1)}function p_(t,e,r,n){return n<=0&&(t=e=r=NaN),new qc(t,e,r,n)}function tze(t){return t instanceof Xw||(t=Z2(t)),t?(t=t.rgb(),new qc(t.r,t.g,t.b,t.opacity)):new qc}function HF(t,e,r,n){return arguments.length===1?tze(t):new qc(t,e,r,n??1)}function qc(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}oM(qc,HF,Loe(Xw,{brighter(t){return t=t==null?NI:Math.pow(NI,t),new qc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Y2:Math.pow(Y2,t),new qc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qc(Qp(this.r),Qp(this.g),Qp(this.b),CI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$K,formatHex:$K,formatHex8:rze,formatRgb:GK,toString:GK}));function $K(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}`}function rze(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}${Cp((isNaN(this.opacity)?1:this.opacity)*255)}`}function GK(){const t=CI(this.opacity);return`${t===1?"rgb(":"rgba("}${Qp(this.r)}, ${Qp(this.g)}, ${Qp(this.b)}${t===1?")":`, ${t})`}`}function CI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Qp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Cp(t){return t=Qp(t),(t<16?"0":"")+t.toString(16)}function KK(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new rf(t,e,r,n)}function Uoe(t){if(t instanceof rf)return new rf(t.h,t.s,t.l,t.opacity);if(t instanceof Xw||(t=Z2(t)),!t)return new rf;if(t instanceof rf)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new rf(o,l,c,t.opacity)}function nze(t,e,r,n){return arguments.length===1?Uoe(t):new rf(t,e,r,n??1)}function rf(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}oM(rf,nze,Loe(Xw,{brighter(t){return t=t==null?NI:Math.pow(NI,t),new rf(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Y2:Math.pow(Y2,t),new rf(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new qc(lB(t>=240?t-240:t+120,a,n),lB(t,a,n),lB(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new rf(qK(this.h),g_(this.s),g_(this.l),CI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=CI(this.opacity);return`${t===1?"hsl(":"hsla("}${qK(this.h)}, ${g_(this.s)*100}%, ${g_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qK(t){return t=(t||0)%360,t<0?t+360:t}function g_(t){return Math.max(0,Math.min(1,t||0))}function lB(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const lM=t=>()=>t;function aze(t,e){return function(r){return t+r*e}}function sze(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ize(t){return(t=+t)==1?Qoe:function(e,r){return r-e?sze(e,r,t):lM(isNaN(e)?r:e)}}function Qoe(t,e){var r=e-t;return r?aze(t,r):lM(isNaN(t)?e:t)}const zK=function t(e){var r=ize(e);function n(a,s){var o=r((a=HF(a)).r,(s=HF(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Qoe(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function oze(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function lze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cze(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=y1(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function uze(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function _I(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function dze(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=y1(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var $F=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cB=new RegExp($F.source,"g");function fze(t){return function(){return t}}function hze(t){return function(e){return t(e)+""}}function Aze(t,e){var r=$F.lastIndex=cB.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=$F.exec(t))&&(a=cB.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:_I(n,a)})),r=cB.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?hze(c[0].x):fze(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function y1(t,e){var r=typeof e,n;return e==null||r==="boolean"?lM(e):(r==="number"?_I:r==="string"?(n=Z2(e))?(e=n,zK):Aze:e instanceof Z2?zK:e instanceof Date?uze:lze(e)?oze:Array.isArray(e)?cze:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dze:_I)(t,e)}function cM(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function mze(t,e){e===void 0&&(e=t,t=y1);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function pze(t){return function(){return t}}function EI(t){return+t}var WK=[0,1];function gc(t){return t}function GF(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:pze(isNaN(e)?NaN:.5)}function gze(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function xze(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=GF(a,n),s=r(o,s)):(n=GF(n,a),s=r(s,o)),function(l){return s(n(l))}}function vze(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=GF(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Ww(t,l,1,n)-1;return s[c](a[c](l))}}function Yw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function QP(){var t=WK,e=WK,r=y1,n,a,s,o=gc,l,c,u;function d(){var A=Math.min(t.length,e.length);return o!==gc&&(o=gze(t[0],t[A-1])),l=A>2?vze:xze,c=u=null,f}function f(A){return A==null||isNaN(A=+A)?s:(c||(c=l(t.map(n),e,r)))(n(o(A)))}return f.invert=function(A){return o(a((u||(u=l(e,t.map(n),_I)))(A)))},f.domain=function(A){return arguments.length?(t=Array.from(A,EI),d()):t.slice()},f.range=function(A){return arguments.length?(e=Array.from(A),d()):e.slice()},f.rangeRound=function(A){return e=Array.from(A),r=cM,d()},f.clamp=function(A){return arguments.length?(o=A?!0:gc,d()):o!==gc},f.interpolate=function(A){return arguments.length?(r=A,d()):r},f.unknown=function(A){return arguments.length?(s=A,f):s},function(A,h){return n=A,a=h,d()}}function uM(){return QP()(gc,gc)}function yze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function SI(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function $v(t){return t=SI(Math.abs(t)),t?t[1]:NaN}function bze(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function wze(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Nze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ew(t){if(!(e=Nze.exec(t)))throw new Error("invalid format: "+t);var e;return new dM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ew.prototype=dM.prototype;function dM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}dM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cze(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var II;function _ze(t,e){var r=SI(t,e);if(!r)return II=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(II=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+SI(t,Math.max(0,e+s-1))[0]}function XK(t,e){var r=SI(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const YK={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yze,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>XK(t*100,e),r:XK,s:_ze,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function JK(t){return t}var ZK=Array.prototype.map,eq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Eze(t){var e=t.grouping===void 0||t.thousands===void 0?JK:bze(ZK.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?JK:wze(ZK.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,A){f=ew(f);var h=f.fill,m=f.align,p=f.sign,x=f.symbol,v=f.zero,y=f.width,b=f.comma,w=f.precision,j=f.trim,I=f.type;I==="n"?(b=!0,I="g"):YK[I]||(w===void 0&&(w=12),j=!0,I="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var _=(A&&A.prefix!==void 0?A.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():""),S=(x==="$"?n:/[%p]/.test(I)?o:"")+(A&&A.suffix!==void 0?A.suffix:""),E=YK[I],F=/[defgprs%]/.test(I);w=w===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function k(B){var D=_,X=S,he,Ae,fe;if(I==="c")X=E(B)+X,B="";else{B=+B;var me=B<0||1/B<0;if(B=isNaN(B)?c:E(Math.abs(B),w),j&&(B=Cze(B)),me&&+B==0&&p!=="+"&&(me=!1),D=(me?p==="("?p:l:p==="-"||p==="("?"":p)+D,X=(I==="s"&&!isNaN(B)&&II!==void 0?eq[8+II/3]:"")+X+(me&&p==="("?")":""),F){for(he=-1,Ae=B.length;++he<Ae;)if(fe=B.charCodeAt(he),48>fe||fe>57){X=(fe===46?a+B.slice(he+1):B.slice(he))+X,B=B.slice(0,he);break}}}b&&!v&&(B=e(B,1/0));var ne=D.length+B.length+X.length,Pe=ne<y?new Array(y-ne+1).join(h):"";switch(b&&v&&(B=e(Pe+B,Pe.length?y-X.length:1/0),Pe=""),m){case"<":B=D+B+X+Pe;break;case"=":B=D+Pe+B+X;break;case"^":B=Pe.slice(0,ne=Pe.length>>1)+D+B+X+Pe.slice(ne);break;default:B=Pe+D+B+X;break}return s(B)}return k.toString=function(){return f+""},k}function d(f,A){var h=Math.max(-8,Math.min(8,Math.floor($v(A)/3)))*3,m=Math.pow(10,-h),p=u((f=ew(f),f.type="f",f),{suffix:eq[8+h/3]});return function(x){return p(m*x)}}return{format:u,formatPrefix:d}}var x_,fM,Voe;Sze({thousands:",",grouping:[3],currency:["$",""]});function Sze(t){return x_=Eze(t),fM=x_.format,Voe=x_.formatPrefix,x_}function Ize(t){return Math.max(0,-$v(Math.abs(t)))}function jze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($v(e)/3)))*3-$v(Math.abs(t)))}function Pze(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$v(e)-$v(t))+1}function Hoe(t,e,r,n){var a=QF(t,e,r),s;switch(n=ew(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=jze(a,o))&&(n.precision=s),Voe(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Pze(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Ize(a))&&(n.precision=s-(n.type==="%")*2);break}}return fM(n)}function Mm(t){var e=t.domain;return t.ticks=function(r){var n=e();return LF(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Hoe(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=UF(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function $oe(){var t=uM();return t.copy=function(){return Yw(t,$oe())},Td.apply(t,arguments),Mm(t)}function Goe(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,EI),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Goe(t).unknown(e)},t=arguments.length?Array.from(t,EI):[0,1],Mm(r)}function Koe(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function tq(t){return Math.log(t)}function rq(t){return Math.exp(t)}function Bze(t){return-Math.log(-t)}function Tze(t){return-Math.exp(-t)}function kze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Fze(t){return t===10?kze:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Oze(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nq(t){return(e,r)=>-t(-e,r)}function hM(t){const e=t(tq,rq),r=e.domain;let n=10,a,s;function o(){return a=Oze(n),s=Fze(n),r()[0]<0?(a=nq(a),s=nq(s),t(Bze,Tze)):t(tq,rq),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let A=a(u),h=a(d),m,p;const x=l==null?10:+l;let v=[];if(!(n%1)&&h-A<x){if(A=Math.floor(A),h=Math.ceil(h),u>0){for(;A<=h;++A)for(m=1;m<n;++m)if(p=A<0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}}else for(;A<=h;++A)for(m=n-1;m>=1;--m)if(p=A>0?m/s(-A):m*s(A),!(p<u)){if(p>d)break;v.push(p)}v.length*2<x&&(v=LF(u,d,x))}else v=LF(A,h,Math.min(h-A,x)).map(s);return f?v.reverse():v},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ew(c)).precision==null&&(c.trim=!0),c=fM(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(Koe(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function qoe(){const t=hM(QP()).domain([1,10]);return t.copy=()=>Yw(t,qoe()).base(t.base()),Td.apply(t,arguments),t}function aq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function sq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function AM(t){var e=1,r=t(aq(e),sq(e));return r.constant=function(n){return arguments.length?t(aq(e=+n),sq(e)):e},Mm(r)}function zoe(){var t=AM(QP());return t.copy=function(){return Yw(t,zoe()).constant(t.constant())},Td.apply(t,arguments)}function iq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Dze(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Rze(t){return t<0?-t*t:t*t}function mM(t){var e=t(gc,gc),r=1;function n(){return r===1?t(gc,gc):r===.5?t(Dze,Rze):t(iq(r),iq(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Mm(e)}function pM(){var t=mM(QP());return t.copy=function(){return Yw(t,pM()).exponent(t.exponent())},Td.apply(t,arguments),t}function Mze(){return pM.apply(null,arguments).exponent(.5)}function oq(t){return Math.sign(t)*t*t}function Lze(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Woe(){var t=uM(),e=[0,1],r=!1,n;function a(s){var o=Lze(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(oq(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,EI)).map(oq)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Woe(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Td.apply(a,arguments),Mm(a)}function Xoe(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=Hqe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Ww(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(um),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Xoe().domain(t).range(e).unknown(n)},Td.apply(s,arguments)}function Yoe(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Ww(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Yoe().domain([t,e]).range(a).unknown(s)},Td.apply(Mm(o),arguments)}function Joe(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Ww(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Joe().domain(t).range(e).unknown(r)},Td.apply(a,arguments)}const uB=new Date,dB=new Date;function jo(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>jo(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(uB.setTime(+s),dB.setTime(+o),t(uB),t(dB),Math.floor(r(uB,dB))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const jI=jo(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?jo(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):jI);jI.range;const qh=1e3,pd=qh*60,zh=pd*60,vA=zh*24,gM=vA*7,lq=vA*30,fB=vA*365,_p=jo(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qh)},(t,e)=>(e-t)/qh,t=>t.getUTCSeconds());_p.range;const xM=jo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qh)},(t,e)=>{t.setTime(+t+e*pd)},(t,e)=>(e-t)/pd,t=>t.getMinutes());xM.range;const vM=jo(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*pd)},(t,e)=>(e-t)/pd,t=>t.getUTCMinutes());vM.range;const yM=jo(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qh-t.getMinutes()*pd)},(t,e)=>{t.setTime(+t+e*zh)},(t,e)=>(e-t)/zh,t=>t.getHours());yM.range;const bM=jo(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zh)},(t,e)=>(e-t)/zh,t=>t.getUTCHours());bM.range;const Jw=jo(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*pd)/vA,t=>t.getDate()-1);Jw.range;const VP=jo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vA,t=>t.getUTCDate()-1);VP.range;const Zoe=jo(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vA,t=>Math.floor(t/vA));Zoe.range;function Lg(t){return jo(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*pd)/gM)}const HP=Lg(0),PI=Lg(1),Uze=Lg(2),Qze=Lg(3),Gv=Lg(4),Vze=Lg(5),Hze=Lg(6);HP.range;PI.range;Uze.range;Qze.range;Gv.range;Vze.range;Hze.range;function Ug(t){return jo(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/gM)}const $P=Ug(0),BI=Ug(1),$ze=Ug(2),Gze=Ug(3),Kv=Ug(4),Kze=Ug(5),qze=Ug(6);$P.range;BI.range;$ze.range;Gze.range;Kv.range;Kze.range;qze.range;const wM=jo(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wM.range;const NM=jo(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NM.range;const yA=jo(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());yA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jo(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});yA.range;const bA=jo(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bA.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jo(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});bA.range;function ele(t,e,r,n,a,s){const o=[[_p,1,qh],[_p,5,5*qh],[_p,15,15*qh],[_p,30,30*qh],[s,1,pd],[s,5,5*pd],[s,15,15*pd],[s,30,30*pd],[a,1,zh],[a,3,3*zh],[a,6,6*zh],[a,12,12*zh],[n,1,vA],[n,2,2*vA],[r,1,gM],[e,1,lq],[e,3,3*lq],[t,1,fB]];function l(u,d,f){const A=d<u;A&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),m=h?h.range(u,+d+1):[];return A?m.reverse():m}function c(u,d,f){const A=Math.abs(d-u)/f,h=aM(([,,x])=>x).right(o,A);if(h===o.length)return t.every(QF(u/fB,d/fB,f));if(h===0)return jI.every(Math.max(QF(u,d,f),1));const[m,p]=o[A/o[h-1][2]<o[h][2]/A?h-1:h];return m.every(p)}return[l,c]}const[zze,Wze]=ele(bA,NM,$P,Zoe,bM,vM),[Xze,Yze]=ele(yA,wM,HP,Jw,yM,xM);function hB(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function AB(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ny(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Jze(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Cy(a),d=_y(a),f=Cy(s),A=_y(s),h=Cy(o),m=_y(o),p=Cy(l),x=_y(l),v=Cy(c),y=_y(c),b={a:fe,A:me,b:ne,B:Pe,c:null,d:Aq,e:Aq,f:bWe,g:BWe,G:kWe,H:xWe,I:vWe,j:yWe,L:tle,m:wWe,M:NWe,p:Te,q:O,Q:gq,s:xq,S:CWe,u:_We,U:EWe,V:SWe,w:IWe,W:jWe,x:null,X:null,y:PWe,Y:TWe,Z:FWe,"%":pq},w={a:K,A:q,b:U,B:W,c:null,d:mq,e:mq,f:MWe,g:zWe,G:XWe,H:OWe,I:DWe,j:RWe,L:nle,m:LWe,M:UWe,p:J,q:M,Q:gq,s:xq,S:QWe,u:VWe,U:HWe,V:$We,w:GWe,W:KWe,x:null,X:null,y:qWe,Y:WWe,Z:YWe,"%":pq},j={a:F,A:k,b:B,B:D,c:X,d:fq,e:fq,f:AWe,g:dq,G:uq,H:hq,I:hq,j:uWe,L:hWe,m:cWe,M:dWe,p:E,q:lWe,Q:pWe,s:gWe,S:fWe,u:nWe,U:aWe,V:sWe,w:rWe,W:iWe,x:he,X:Ae,y:dq,Y:uq,Z:oWe,"%":mWe};b.x=I(r,b),b.X=I(n,b),b.c=I(e,b),w.x=I(r,w),w.X=I(n,w),w.c=I(e,w);function I(H,te){return function(ve){var Q=[],Ke=-1,ae=0,ee=H.length,Fe,ce,be;for(ve instanceof Date||(ve=new Date(+ve));++Ke<ee;)H.charCodeAt(Ke)===37&&(Q.push(H.slice(ae,Ke)),(ce=cq[Fe=H.charAt(++Ke)])!=null?Fe=H.charAt(++Ke):ce=Fe==="e"?" ":"0",(be=te[Fe])&&(Fe=be(ve,ce)),Q.push(Fe),ae=Ke+1);return Q.push(H.slice(ae,Ke)),Q.join("")}}function _(H,te){return function(ve){var Q=Ny(1900,void 0,1),Ke=S(Q,H,ve+="",0),ae,ee;if(Ke!=ve.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(te&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(ae=AB(Ny(Q.y,0,1)),ee=ae.getUTCDay(),ae=ee>4||ee===0?BI.ceil(ae):BI(ae),ae=VP.offset(ae,(Q.V-1)*7),Q.y=ae.getUTCFullYear(),Q.m=ae.getUTCMonth(),Q.d=ae.getUTCDate()+(Q.w+6)%7):(ae=hB(Ny(Q.y,0,1)),ee=ae.getDay(),ae=ee>4||ee===0?PI.ceil(ae):PI(ae),ae=Jw.offset(ae,(Q.V-1)*7),Q.y=ae.getFullYear(),Q.m=ae.getMonth(),Q.d=ae.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),ee="Z"in Q?AB(Ny(Q.y,0,1)).getUTCDay():hB(Ny(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(ee+5)%7:Q.w+Q.U*7-(ee+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,AB(Q)):hB(Q)}}function S(H,te,ve,Q){for(var Ke=0,ae=te.length,ee=ve.length,Fe,ce;Ke<ae;){if(Q>=ee)return-1;if(Fe=te.charCodeAt(Ke++),Fe===37){if(Fe=te.charAt(Ke++),ce=j[Fe in cq?te.charAt(Ke++):Fe],!ce||(Q=ce(H,ve,Q))<0)return-1}else if(Fe!=ve.charCodeAt(Q++))return-1}return Q}function E(H,te,ve){var Q=u.exec(te.slice(ve));return Q?(H.p=d.get(Q[0].toLowerCase()),ve+Q[0].length):-1}function F(H,te,ve){var Q=h.exec(te.slice(ve));return Q?(H.w=m.get(Q[0].toLowerCase()),ve+Q[0].length):-1}function k(H,te,ve){var Q=f.exec(te.slice(ve));return Q?(H.w=A.get(Q[0].toLowerCase()),ve+Q[0].length):-1}function B(H,te,ve){var Q=v.exec(te.slice(ve));return Q?(H.m=y.get(Q[0].toLowerCase()),ve+Q[0].length):-1}function D(H,te,ve){var Q=p.exec(te.slice(ve));return Q?(H.m=x.get(Q[0].toLowerCase()),ve+Q[0].length):-1}function X(H,te,ve){return S(H,e,te,ve)}function he(H,te,ve){return S(H,r,te,ve)}function Ae(H,te,ve){return S(H,n,te,ve)}function fe(H){return o[H.getDay()]}function me(H){return s[H.getDay()]}function ne(H){return c[H.getMonth()]}function Pe(H){return l[H.getMonth()]}function Te(H){return a[+(H.getHours()>=12)]}function O(H){return 1+~~(H.getMonth()/3)}function K(H){return o[H.getUTCDay()]}function q(H){return s[H.getUTCDay()]}function U(H){return c[H.getUTCMonth()]}function W(H){return l[H.getUTCMonth()]}function J(H){return a[+(H.getUTCHours()>=12)]}function M(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var te=I(H+="",b);return te.toString=function(){return H},te},parse:function(H){var te=_(H+="",!1);return te.toString=function(){return H},te},utcFormat:function(H){var te=I(H+="",w);return te.toString=function(){return H},te},utcParse:function(H){var te=_(H+="",!0);return te.toString=function(){return H},te}}}var cq={"-":"",_:" ",0:"0"},Zo=/^\s*\d+/,Zze=/^%/,eWe=/[\\^$*+?|[\]().{}]/g;function Na(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function tWe(t){return t.replace(eWe,"\\$&")}function Cy(t){return new RegExp("^(?:"+t.map(tWe).join("|")+")","i")}function _y(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function rWe(t,e,r){var n=Zo.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function nWe(t,e,r){var n=Zo.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function aWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function sWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function iWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function uq(t,e,r){var n=Zo.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function dq(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oWe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lWe(t,e,r){var n=Zo.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function cWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function fq(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function uWe(t,e,r){var n=Zo.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function hq(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function dWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function fWe(t,e,r){var n=Zo.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function hWe(t,e,r){var n=Zo.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function AWe(t,e,r){var n=Zo.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mWe(t,e,r){var n=Zze.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function pWe(t,e,r){var n=Zo.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function gWe(t,e,r){var n=Zo.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Aq(t,e){return Na(t.getDate(),e,2)}function xWe(t,e){return Na(t.getHours(),e,2)}function vWe(t,e){return Na(t.getHours()%12||12,e,2)}function yWe(t,e){return Na(1+Jw.count(yA(t),t),e,3)}function tle(t,e){return Na(t.getMilliseconds(),e,3)}function bWe(t,e){return tle(t,e)+"000"}function wWe(t,e){return Na(t.getMonth()+1,e,2)}function NWe(t,e){return Na(t.getMinutes(),e,2)}function CWe(t,e){return Na(t.getSeconds(),e,2)}function _We(t){var e=t.getDay();return e===0?7:e}function EWe(t,e){return Na(HP.count(yA(t)-1,t),e,2)}function rle(t){var e=t.getDay();return e>=4||e===0?Gv(t):Gv.ceil(t)}function SWe(t,e){return t=rle(t),Na(Gv.count(yA(t),t)+(yA(t).getDay()===4),e,2)}function IWe(t){return t.getDay()}function jWe(t,e){return Na(PI.count(yA(t)-1,t),e,2)}function PWe(t,e){return Na(t.getFullYear()%100,e,2)}function BWe(t,e){return t=rle(t),Na(t.getFullYear()%100,e,2)}function TWe(t,e){return Na(t.getFullYear()%1e4,e,4)}function kWe(t,e){var r=t.getDay();return t=r>=4||r===0?Gv(t):Gv.ceil(t),Na(t.getFullYear()%1e4,e,4)}function FWe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Na(e/60|0,"0",2)+Na(e%60,"0",2)}function mq(t,e){return Na(t.getUTCDate(),e,2)}function OWe(t,e){return Na(t.getUTCHours(),e,2)}function DWe(t,e){return Na(t.getUTCHours()%12||12,e,2)}function RWe(t,e){return Na(1+VP.count(bA(t),t),e,3)}function nle(t,e){return Na(t.getUTCMilliseconds(),e,3)}function MWe(t,e){return nle(t,e)+"000"}function LWe(t,e){return Na(t.getUTCMonth()+1,e,2)}function UWe(t,e){return Na(t.getUTCMinutes(),e,2)}function QWe(t,e){return Na(t.getUTCSeconds(),e,2)}function VWe(t){var e=t.getUTCDay();return e===0?7:e}function HWe(t,e){return Na($P.count(bA(t)-1,t),e,2)}function ale(t){var e=t.getUTCDay();return e>=4||e===0?Kv(t):Kv.ceil(t)}function $We(t,e){return t=ale(t),Na(Kv.count(bA(t),t)+(bA(t).getUTCDay()===4),e,2)}function GWe(t){return t.getUTCDay()}function KWe(t,e){return Na(BI.count(bA(t)-1,t),e,2)}function qWe(t,e){return Na(t.getUTCFullYear()%100,e,2)}function zWe(t,e){return t=ale(t),Na(t.getUTCFullYear()%100,e,2)}function WWe(t,e){return Na(t.getUTCFullYear()%1e4,e,4)}function XWe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Kv(t):Kv.ceil(t),Na(t.getUTCFullYear()%1e4,e,4)}function YWe(){return"+0000"}function pq(){return"%"}function gq(t){return+t}function xq(t){return Math.floor(+t/1e3)}var px,sle,ile;JWe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JWe(t){return px=Jze(t),sle=px.format,px.parse,ile=px.utcFormat,px.utcParse,px}function ZWe(t){return new Date(t)}function eXe(t){return t instanceof Date?+t:+new Date(+t)}function CM(t,e,r,n,a,s,o,l,c,u){var d=uM(),f=d.invert,A=d.domain,h=u(".%L"),m=u(":%S"),p=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),w=u("%Y");function j(I){return(c(I)<I?h:l(I)<I?m:o(I)<I?p:s(I)<I?x:n(I)<I?a(I)<I?v:y:r(I)<I?b:w)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?A(Array.from(I,eXe)):A().map(ZWe)},d.ticks=function(I){var _=A();return t(_[0],_[_.length-1],I??10)},d.tickFormat=function(I,_){return _==null?j:u(_)},d.nice=function(I){var _=A();return(!I||typeof I.range!="function")&&(I=e(_[0],_[_.length-1],I??10)),I?A(Koe(_,I)):d},d.copy=function(){return Yw(d,CM(t,e,r,n,a,s,o,l,c,u))},d}function tXe(){return Td.apply(CM(Xze,Yze,yA,wM,HP,Jw,yM,xM,_p,sle).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rXe(){return Td.apply(CM(zze,Wze,bA,NM,$P,VP,bM,vM,_p,ile).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function GP(){var t=0,e=1,r,n,a,s,o=gc,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(A){var h,m;return arguments.length?([h,m]=A,o=f(h,m),u):[o(0),o(1)]}}return u.range=d(y1),u.rangeRound=d(cM),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function Lm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ole(){var t=Mm(GP()(gc));return t.copy=function(){return Lm(t,ole())},DA.apply(t,arguments)}function lle(){var t=hM(GP()).domain([1,10]);return t.copy=function(){return Lm(t,lle()).base(t.base())},DA.apply(t,arguments)}function cle(){var t=AM(GP());return t.copy=function(){return Lm(t,cle()).constant(t.constant())},DA.apply(t,arguments)}function _M(){var t=mM(GP());return t.copy=function(){return Lm(t,_M()).exponent(t.exponent())},DA.apply(t,arguments)}function nXe(){return _M.apply(null,arguments).exponent(.5)}function ule(){var t=[],e=gc;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ww(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(um),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>Vqe(t,s/n))},r.copy=function(){return ule(e).domain(t)},DA.apply(r,arguments)}function KP(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=gc,d,f=!1,A;function h(p){return isNaN(p=+p)?A:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e,r]=p,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h):[t,e,r]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(u=p,h):u};function m(p){return function(x){var v,y,b;return arguments.length?([v,y,b]=x,u=mze(p,[v,y,b]),h):[u(0),u(.5),u(1)]}}return h.range=m(y1),h.rangeRound=m(cM),h.unknown=function(p){return arguments.length?(A=p,h):A},function(p){return d=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,h}}function dle(){var t=Mm(KP()(gc));return t.copy=function(){return Lm(t,dle())},DA.apply(t,arguments)}function fle(){var t=hM(KP()).domain([.1,1,10]);return t.copy=function(){return Lm(t,fle()).base(t.base())},DA.apply(t,arguments)}function hle(){var t=AM(KP());return t.copy=function(){return Lm(t,hle()).constant(t.constant())},DA.apply(t,arguments)}function EM(){var t=mM(KP());return t.copy=function(){return Lm(t,EM()).exponent(t.exponent())},DA.apply(t,arguments)}function aXe(){return EM.apply(null,arguments).exponent(.5)}const Jy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iM,scaleDiverging:dle,scaleDivergingLog:fle,scaleDivergingPow:EM,scaleDivergingSqrt:aXe,scaleDivergingSymlog:hle,scaleIdentity:Goe,scaleImplicit:VF,scaleLinear:$oe,scaleLog:qoe,scaleOrdinal:sM,scalePoint:Gqe,scalePow:pM,scaleQuantile:Xoe,scaleQuantize:Yoe,scaleRadial:Woe,scaleSequential:ole,scaleSequentialLog:lle,scaleSequentialPow:_M,scaleSequentialQuantile:ule,scaleSequentialSqrt:nXe,scaleSequentialSymlog:cle,scaleSqrt:Mze,scaleSymlog:zoe,scaleThreshold:Joe,scaleTime:tXe,scaleUtc:rXe,tickFormat:Hoe},Symbol.toStringTag,{value:"Module"}));var RA=t=>t.chartData,qP=Wt([RA],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Ale=(t,e,r,n)=>n?qP(t):RA(t),sXe=(t,e,r)=>r?qP(t):RA(t);function Sm(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(ci(e)&&ci(r))return!0}return!1}function vq(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function mle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(ci(r))a=r;else if(typeof r=="function")return;if(ci(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(Sm(o))return o}}function iXe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Sm(n))return vq(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(An(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&DG.test(a)){var c=DG.exec(a);if(c==null||c[1]==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(An(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&RG.test(s)){var d=RG.exec(s);if(d==null||d[1]==null||e==null)l=void 0;else{var f=+d[1];l=e[1]+f}}else l=e==null?void 0:e[1];var A=[o,l];if(Sm(A))return e==null?A:vq(A,e,r)}}}var b1=1e9,oXe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IM,Qs=!0,Id="[DecimalError] ",Vp=Id+"Invalid argument: ",SM=Id+"Exponent out of range: ",w1=Math.floor,lp=Math.pow,lXe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wu,Vo=1e7,_s=7,ple=9007199254740991,TI=w1(ple/_s),Yr={};Yr.absoluteValue=Yr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Yr.comparedTo=Yr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Yr.decimalPlaces=Yr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*_s;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Yr.dividedBy=Yr.div=function(t){return sA(this,new this.constructor(t))};Yr.dividedToIntegerBy=Yr.idiv=function(t){var e=this,r=e.constructor;return cs(sA(e,new r(t),0,1),r.precision)};Yr.equals=Yr.eq=function(t){return!this.cmp(t)};Yr.exponent=function(){return ro(this)};Yr.greaterThan=Yr.gt=function(t){return this.cmp(t)>0};Yr.greaterThanOrEqualTo=Yr.gte=function(t){return this.cmp(t)>=0};Yr.isInteger=Yr.isint=function(){return this.e>this.d.length-2};Yr.isNegative=Yr.isneg=function(){return this.s<0};Yr.isPositive=Yr.ispos=function(){return this.s>0};Yr.isZero=function(){return this.s===0};Yr.lessThan=Yr.lt=function(t){return this.cmp(t)<0};Yr.lessThanOrEqualTo=Yr.lte=function(t){return this.cmp(t)<1};Yr.logarithm=Yr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(wu))throw Error(Id+"NaN");if(r.s<1)throw Error(Id+(r.s?"NaN":"-Infinity"));return r.eq(wu)?new n(0):(Qs=!1,e=sA(tw(r,s),tw(t,s),s),Qs=!0,cs(e,a))};Yr.minus=Yr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vle(e,t):gle(e,(t.s=-t.s,t))};Yr.modulo=Yr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Id+"NaN");return r.s?(Qs=!1,e=sA(r,t,0,1).times(t),Qs=!0,r.minus(e)):cs(new n(r),a)};Yr.naturalExponential=Yr.exp=function(){return xle(this)};Yr.naturalLogarithm=Yr.ln=function(){return tw(this)};Yr.negated=Yr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Yr.plus=Yr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gle(e,t):vle(e,(t.s=-t.s,t))};Yr.precision=Yr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Vp+t);if(e=ro(a)+1,n=a.d.length-1,r=n*_s+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Yr.squareRoot=Yr.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Id+"NaN")}for(t=ro(l),Qs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Xf(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=w1((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(sA(l,s,o+2)).times(.5),Xf(s.d).slice(0,o)===(e=Xf(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(cs(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Qs=!0,cs(n,r)};Yr.times=Yr.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,A=d.d,h=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=A.length,u=h.length,c<u&&(s=A,A=h,h=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+h[n]*A[a-n-1]+e,s[a--]=l%Vo|0,e=l/Vo|0;s[a]=(s[a]+e)%Vo|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Qs?cs(t,f.precision):t};Yr.toDecimalPlaces=Yr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(oh(t,0,b1),e===void 0?e=n.rounding:oh(e,0,8),cs(r,t+ro(r)+1,e))};Yr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=xg(n,!0):(oh(t,0,b1),e===void 0?e=a.rounding:oh(e,0,8),n=cs(new a(n),t+1,e),r=xg(n,!0,t+1)),r};Yr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?xg(a):(oh(t,0,b1),e===void 0?e=s.rounding:oh(e,0,8),n=cs(new s(a),t+ro(a)+1,e),r=xg(n.abs(),!1,t+ro(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Yr.toInteger=Yr.toint=function(){var t=this,e=t.constructor;return cs(new e(t),ro(t)+1,e.rounding)};Yr.toNumber=function(){return+this};Yr.toPower=Yr.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(wu);if(l=new c(l),!l.s){if(t.s<1)throw Error(Id+"Infinity");return l}if(l.eq(wu))return l;if(n=c.precision,t.eq(wu))return cs(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=ple){for(a=new c(wu),e=Math.ceil(n/_s+4),Qs=!1;r%2&&(a=a.times(l),bq(a.d,e)),r=w1(r/2),r!==0;)l=l.times(l),bq(l.d,e);return Qs=!0,t.s<0?new c(wu).div(a):cs(a,n)}}else if(s<0)throw Error(Id+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Qs=!1,a=t.times(tw(l,n+u)),Qs=!0,a=xle(a),a.s=s,a};Yr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=ro(a),n=xg(a,r<=s.toExpNeg||r>=s.toExpPos)):(oh(t,1,b1),e===void 0?e=s.rounding:oh(e,0,8),a=cs(new s(a),t,e),r=ro(a),n=xg(a,t<=r||r<=s.toExpNeg,t)),n};Yr.toSignificantDigits=Yr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(oh(t,1,b1),e===void 0?e=n.rounding:oh(e,0,8)),cs(new n(r),t,e)};Yr.toString=Yr.valueOf=Yr.val=Yr.toJSON=Yr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ro(t),r=t.constructor;return xg(t,e<=r.toExpNeg||e>=r.toExpPos)};function gle(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qs?cs(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/_s),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Vo|0,c[s]%=Vo;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Qs?cs(e,f):e}function oh(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Vp+t)}function Xf(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=_s-n.length,r&&(s+=C0(r)),s+=n;o=t[e],n=o+"",r=_s-n.length,r&&(s+=C0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var sA=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Vo|0,o=s/Vo|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Vo+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,A,h,m,p,x,v,y,b,w,j,I,_,S,E=n.constructor,F=n.s==a.s?1:-1,k=n.d,B=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(Id+"Division by zero");for(c=n.e-a.e,_=B.length,j=k.length,h=new E(F),m=h.d=[],u=0;B[u]==(k[u]||0);)++u;if(B[u]>(k[u]||0)&&--c,s==null?y=s=E.precision:o?y=s+(ro(n)-ro(a))+1:y=s,y<0)return new E(0);if(y=y/_s+2|0,u=0,_==1)for(d=0,B=B[0],y++;(u<j||d)&&y--;u++)b=d*Vo+(k[u]||0),m[u]=b/B|0,d=b%B|0;else{for(d=Vo/(B[0]+1)|0,d>1&&(B=t(B,d),k=t(k,d),_=B.length,j=k.length),w=_,p=k.slice(0,_),x=p.length;x<_;)p[x++]=0;S=B.slice(),S.unshift(0),I=B[0],B[1]>=Vo/2&&++I;do d=0,l=e(B,p,_,x),l<0?(v=p[0],_!=x&&(v=v*Vo+(p[1]||0)),d=v/I|0,d>1?(d>=Vo&&(d=Vo-1),f=t(B,d),A=f.length,x=p.length,l=e(f,p,A,x),l==1&&(d--,r(f,_<A?S:B,A))):(d==0&&(l=d=1),f=B.slice()),A=f.length,A<x&&f.unshift(0),r(p,f,x),l==-1&&(x=p.length,l=e(B,p,_,x),l<1&&(d++,r(p,_<x?S:B,x))),x=p.length):l===0&&(d++,p=[0]),m[u++]=d,l&&p[0]?p[x++]=k[w]||0:(p=[k[w]],x=1);while((w++<j||p[0]!==void 0)&&y--)}return m[0]||m.shift(),h.e=c,cs(h,o?s+ro(h)+1:s)}}();function xle(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(ro(t)>16)throw Error(SM+ro(t));if(!t.s)return new d(wu);for(Qs=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(lp(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(wu),d.precision=l;;){if(a=cs(a.times(t),l),r=r.times(++c),o=s.plus(sA(a,r,l)),Xf(o.d).slice(0,l)===Xf(s.d).slice(0,l)){for(;u--;)s=cs(s.times(s),l);return d.precision=f,e==null?(Qs=!0,cs(s,f)):s}s=o}}function ro(t){for(var e=t.e*_s,r=t.d[0];r>=10;r/=10)e++;return e}function mB(t,e,r){if(e>t.LN10.sd())throw Qs=!0,r&&(t.precision=r),Error(Id+"LN10 precision limit exceeded");return cs(new t(t.LN10),e)}function C0(t){for(var e="";t--;)e+="0";return e}function tw(t,e){var r,n,a,s,o,l,c,u,d,f=1,A=10,h=t,m=h.d,p=h.constructor,x=p.precision;if(h.s<1)throw Error(Id+(h.s?"NaN":"-Infinity"));if(h.eq(wu))return new p(0);if(e==null?(Qs=!1,u=x):u=e,h.eq(10))return e==null&&(Qs=!0),mB(p,u);if(u+=A,p.precision=u,r=Xf(m),n=r.charAt(0),s=ro(h),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(t),r=Xf(h.d),n=r.charAt(0),f++;s=ro(h),n>1?(h=new p("0."+r),s++):h=new p(n+"."+r.slice(1))}else return c=mB(p,u+2,x).times(s+""),h=tw(new p(n+"."+r.slice(1)),u-A).plus(c),p.precision=x,e==null?(Qs=!0,cs(h,x)):h;for(l=o=h=sA(h.minus(wu),h.plus(wu),u),d=cs(h.times(h),u),a=3;;){if(o=cs(o.times(d),u),c=l.plus(sA(o,new p(a),u)),Xf(c.d).slice(0,u)===Xf(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(mB(p,u+2,x).times(s+""))),l=sA(l,new p(f),u),p.precision=x,e==null?(Qs=!0,cs(l,x)):l;l=c,a+=2}}function yq(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=w1(r/_s),t.d=[],n=(r+1)%_s,r<0&&(n+=_s),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=_s;n<a;)t.d.push(+e.slice(n,n+=_s));e=e.slice(n),n=_s-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Qs&&(t.e>TI||t.e<-TI))throw Error(SM+r)}else t.s=0,t.e=0,t.d=[0];return t}function cs(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=_s,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/_s),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=_s,a=n-_s+o}if(r!==void 0&&(s=lp(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/lp(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=ro(t),f.length=1,e=e-s-1,f[0]=lp(10,(_s-e%_s)%_s),t.e=w1(-e/_s)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=lp(10,_s-n),f[d]=a>0?(u/lp(10,o-a)%lp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Vo&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=Vo)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Qs&&(t.e>TI||t.e<-TI))throw Error(SM+ro(t));return t}function vle(t,e){var r,n,a,s,o,l,c,u,d,f,A=t.constructor,h=A.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new A(t),Qs?cs(e,h):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(h/_s),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Vo-1;--c[s],c[a]+=Vo}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Qs?cs(e,h):e):new A(0)}function xg(t,e,r){var n,a=ro(t),s=Xf(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+C0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+C0(-a-1)+s,r&&(n=r-o)>0&&(s+=C0(n))):a>=o?(s+=C0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+C0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=C0(n))),t.s<0?"-"+s:s}function bq(t,e){if(t.length>e)return t.length=e,!0}function yle(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Vp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return yq(o,s.toString())}else if(typeof s!="string")throw Error(Vp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,lXe.test(s))yq(o,s);else throw Error(Vp+s)}if(a.prototype=Yr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=yle,a.config=a.set=cXe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function cXe(t){if(!t||typeof t!="object")throw Error(Id+"Object expected");var e,r,n,a=["precision",1,b1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(w1(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Vp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Vp+r+": "+n);return this}var IM=yle(oXe);wu=new IM(1);const Ga=IM;var uXe=t=>t,ble={},wle=t=>t===ble,wq=t=>function e(){return arguments.length===0||arguments.length===1&&wle(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Nle=(t,e)=>t===1?e:wq(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==ble).length;return s>=t?e(...n):Nle(t-s,wq(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>wle(d)?l.shift():d);return e(...u,...l)}))}),dXe=t=>Nle(t.length,t),KF=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},fXe=dXe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),hXe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return uXe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}};function Cle(t){var e;return t===0?e=1:e=Math.floor(new Ga(t).abs().log(10).toNumber())+1,e}function _le(t,e,r){for(var n=new Ga(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var Ele=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},Sle=(t,e,r)=>{if(t.lte(0))return new Ga(0);var n=Cle(t.toNumber()),a=new Ga(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Ga(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Ga(c.toNumber()):new Ga(Math.ceil(c.toNumber()))},AXe=(t,e,r)=>{var n=new Ga(1),a=new Ga(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Ga(10).pow(Cle(t)-1),a=new Ga(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Ga(Math.floor(t)))}else t===0?a=new Ga(Math.floor((e-1)/2)):r||(a=new Ga(Math.floor(t)));var o=Math.floor((e-1)/2),l=hXe(fXe(c=>a.add(new Ga(c-o).mul(n)).toNumber()),KF);return l(0,e)},Ile=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Ga(0),tickMin:new Ga(0),tickMax:new Ga(0)};var o=Sle(new Ga(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Ga(0):(l=new Ga(e).add(r).div(2),l=l.sub(new Ga(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Ga(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?Ile(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ga(c).mul(o)),tickMax:l.add(new Ga(u).mul(o))})},mXe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=Ele([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...KF(0,a-1).map(()=>1/0)]:[...KF(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return AXe(l,a,s);var{step:d,tickMin:f,tickMax:A}=Ile(l,c,o,s,0),h=_le(f,A.add(new Ga(.1).mul(d)),d);return r>n?h.reverse():h},pXe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=Ele([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=Sle(new Ga(l).sub(o).div(c-1),s,0),d=[..._le(new Ga(o),new Ga(l),u),l];return s===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},jle=t=>t.rootProps.maxBarSize,gXe=t=>t.rootProps.barGap,Ple=t=>t.rootProps.barCategoryGap,xXe=t=>t.rootProps.barSize,Zw=t=>t.rootProps.stackOffset,Ble=t=>t.rootProps.reverseStackOrder,jM=t=>t.options.chartName,PM=t=>t.rootProps.syncId,Tle=t=>t.rootProps.syncMethod,BM=t=>t.options.eventEmitter,Wl={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Rh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},gu={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},zP=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},vXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:Rh.reversed,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:Rh.type,unit:void 0},yXe={allowDataOverflow:gu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gu.scale,tick:gu.tick,tickCount:gu.tickCount,ticks:void 0,type:gu.type,unit:void 0},bXe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Rh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},wXe={allowDataOverflow:gu.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gu.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gu.scale,tick:gu.tick,tickCount:gu.tickCount,ticks:void 0,type:"category",unit:void 0},TM=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?bXe:vXe,kM=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?wXe:yXe,WP=t=>t.polarOptions,FM=Wt([FA,OA,Io],Soe),kle=Wt([WP,FM],(t,e)=>{if(t!=null)return Yl(t.innerRadius,e,0)}),Fle=Wt([WP,FM],(t,e)=>{if(t!=null)return Yl(t.outerRadius,e,e*.8)}),NXe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},Ole=Wt([WP],NXe);Wt([TM,Ole],zP);var Dle=Wt([FM,kle,Fle],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});Wt([kM,Dle],zP);var Rle=Wt([Ca,WP,kle,Fle,FA,OA],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:Yl(o,a,a/2),cy:Yl(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),$s=(t,e)=>e,eN=(t,e,r)=>r;function OM(t){return t==null?void 0:t.id}function Mle(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=OM(l);u.forEach((f,A)=>{var h=s==null||a?A:String(js(f,s,null)),m=js(f,l.dataKey,0),p;o.has(h)?p=o.get(h):p={},Object.assign(p,{[d]:m}),o.set(h,p)})}}),Array.from(o.values())}function XP(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var YP=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function JP(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function CXe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Po=t=>{var e=Ca(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},N1=t=>t.tooltip.settings.axisId;function Nq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nq(Object(r),!0).forEach(function(n){_Xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Xe(t,e,r){return(e=EXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EXe(t){var e=SXe(t,"string");return typeof e=="symbol"?e:e+""}function SXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qF=[0,"auto"],Ro={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Lle=(t,e)=>t.cartesianAxis.xAxis[e],MA=(t,e)=>{var r=Lle(t,e);return r??Ro},Mo={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kw},Ule=(t,e)=>t.cartesianAxis.yAxis[e],LA=(t,e)=>{var r=Ule(t,e);return r??Mo},IXe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DM=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??IXe},ui=(t,e,r)=>{switch(e){case"xAxis":return MA(t,r);case"yAxis":return LA(t,r);case"zAxis":return DM(t,r);case"angleAxis":return TM(t,r);case"radiusAxis":return kM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},jXe=(t,e,r)=>{switch(e){case"xAxis":return MA(t,r);case"yAxis":return LA(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},tN=(t,e,r)=>{switch(e){case"xAxis":return MA(t,r);case"yAxis":return LA(t,r);case"angleAxis":return TM(t,r);case"radiusAxis":return kM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Qle=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function RM(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var MM=t=>t.graphicalItems.cartesianItems,PXe=Wt([$s,eN],RM),LM=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),rN=Wt([MM,ui,PXe],LM,{memoizeOptions:{resultEqualityCheck:JP}}),Vle=Wt([rN],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(XP)),Hle=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),BXe=Wt([rN],Hle),UM=t=>t.map(e=>e.data).filter(Boolean).flat(1),TXe=Wt([rN],UM,{memoizeOptions:{resultEqualityCheck:JP}}),QM=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},VM=Wt([TXe,Ale],QM),HM=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:js(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:js(a,n)}))):t.map(n=>({value:n})),ZP=Wt([VM,ui,rN],HM);function $le(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function mE(t){if(ih(t)||t instanceof Date){var e=Number(t);if(ci(e))return e}}function Cq(t){if(Array.isArray(t)){var e=[mE(t[0]),mE(t[1])];return Sm(e)?e:void 0}var r=mE(t);if(r!=null)return[r,r]}function wA(t){return t.map(mE).filter(QVe)}function kXe(t,e,r){return!r||typeof e!="number"||sh(e)?[]:r.length?wA(r.flatMap(n=>{var a=js(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!ci(s)||!ci(o)))return[e-s,e+o]})):[]}var Bo=t=>{var e=Po(t),r=N1(t);return tN(t,e,r)},nN=Wt([Bo],t=>t==null?void 0:t.dataKey),FXe=Wt([Vle,Ale,Bo],Mle),Gle=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(OM);return[l,{stackedData:sGe(t,d,r),graphicalItems:u}]}))},zF=Wt([FXe,Vle,Zw,Ble],Gle),Kle=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=uGe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},OXe=Wt([ui],t=>t.allowDataOverflow),$M=t=>{var e;if(t==null||!("domain"in t))return qF;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var r=wA(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:qF},GM=Wt([ui],$M),KM=Wt([GM,OXe],mle),DXe=Wt([zF,RA,$s,KM],Kle,{memoizeOptions:{resultEqualityCheck:YP}}),e4=t=>t.errorBars,RXe=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>$le(r,n)),FI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},qM=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>$le(a,v)),A=js(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),h=kXe(l,A,f);if(h.length>=2){var m=Math.min(...h),p=Math.max(...h);(s==null||m<s)&&(s=m),(o==null||p>o)&&(o=p)}var x=Cq(A);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),o=o==null?x[1]:Math.max(o,x[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=Cq(js(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ci(s)&&ci(o))return[s,o]},MXe=Wt([VM,ui,BXe,e4,$s],qM,{memoizeOptions:{resultEqualityCheck:YP}});function LXe(t){var{value:e}=t;if(ih(e)||e instanceof Date)return e}var UXe=(t,e,r)=>{var n=t.map(LXe).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&$se(n))?Foe(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},qle=t=>t.referenceElements.dots,C1=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),QXe=Wt([qle,$s,eN],C1),zle=t=>t.referenceElements.areas,VXe=Wt([zle,$s,eN],C1),Wle=t=>t.referenceElements.lines,HXe=Wt([Wle,$s,eN],C1),Xle=(t,e)=>{if(t!=null){var r=wA(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},$Xe=Wt(QXe,$s,Xle),Yle=(t,e)=>{if(t!=null){var r=wA(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},GXe=Wt([VXe,$s],Yle);function KXe(t){var e;if(t.x!=null)return wA([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:wA(r)}function qXe(t){var e;if(t.y!=null)return wA([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:wA(r)}var Jle=(t,e)=>{if(t!=null){var r=t.flatMap(n=>e==="xAxis"?KXe(n):qXe(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},zXe=Wt([HXe,$s],Jle),WXe=Wt($Xe,zXe,GXe,(t,e,r)=>FI(t,r,e)),zM=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?FI(n,s,a):FI(s,a);return iXe(e,u,t.allowDataOverflow)},XXe=Wt([ui,GM,KM,DXe,MXe,WXe,Ca,$s],zM,{memoizeOptions:{resultEqualityCheck:YP}}),YXe=[0,1],WM=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=Mg(e,s);if(u&&l==null){var d;return Foe(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?UXe(n,t,u):a==="expand"?YXe:o}},XM=Wt([ui,Ca,VM,ZP,Zw,$s,XXe],WM),Zle=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Qw(s));return l in Jy?l:"point"}}},_1=Wt([ui,Ca,Qle,jM,$s],Zle);function JXe(t){if(t!=null){if(t in Jy)return Jy[t]();var e="scale".concat(Qw(t));if(e in Jy)return Jy[e]()}}function YM(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=JXe(e);if(a!=null){var s=a.domain(r).range(n);return eGe(s),s}}}var JM=(t,e,r)=>{var n=$M(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Sm(t))return mXe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Sm(t))return pXe(t,e.tickCount,e.allowDecimals)}},ZM=Wt([XM,tN,_1],JM),e8=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Sm(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},ZXe=Wt([ui,XM,ZM,$s],e8),eYe=Wt(ZP,ui,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(wA(t.map(f=>f.value))).sort((f,A)=>f-A),a=n[0],s=n[n.length-1];if(a==null||s==null)return 1/0;var o=s-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),ece=Wt(eYe,Ca,Ple,Io,(t,e,r,n,a)=>a,(t,e,r,n,a)=>{if(!ci(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=Yl(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),tYe=(t,e,r)=>{var n=MA(t,e);return n==null||typeof n.padding!="string"?0:ece(t,"xAxis",e,r,n.padding)},rYe=(t,e,r)=>{var n=LA(t,e);return n==null||typeof n.padding!="string"?0:ece(t,"yAxis",e,r,n.padding)},nYe=Wt(MA,tYe,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),aYe=Wt(LA,rYe,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),sYe=Wt([Io,nYe,TP,BP,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),iYe=Wt([Io,Ca,aYe,TP,BP,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),aN=(t,e,r,n)=>{var a;switch(e){case"xAxis":return sYe(t,r,n);case"yAxis":return iYe(t,r,n);case"zAxis":return(a=DM(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return Ole(t);case"radiusAxis":return Dle(t,r);default:return}},tce=Wt([ui,aN],zP),t4=Wt([ui,_1,ZXe,tce],YM);Wt([rN,e4,$s],RXe);function rce(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var r4=(t,e)=>e,n4=(t,e,r)=>r,oYe=Wt(jP,r4,n4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(rce)),lYe=Wt(PP,r4,n4,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(rce)),nce=(t,e)=>({width:t.width,height:e.height}),cYe=(t,e)=>{var r=typeof e.width=="number"?e.width:Kw;return{width:r,height:t.height}},ace=Wt(Io,MA,nce),uYe=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},dYe=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},fYe=Wt(OA,Io,oYe,r4,n4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=nce(e,l);o==null&&(o=uYe(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),hYe=Wt(FA,Io,lYe,r4,n4,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=cYe(e,l);o==null&&(o=dYe(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),AYe=(t,e)=>{var r=MA(t,e);if(r!=null)return fYe(t,r.orientation,r.mirror)},mYe=Wt([Io,MA,AYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),pYe=(t,e)=>{var r=LA(t,e);if(r!=null)return hYe(t,r.orientation,r.mirror)},gYe=Wt([Io,LA,pYe,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),sce=Wt(Io,LA,(t,e)=>{var r=typeof e.width=="number"?e.width:Kw;return{width:r,height:t.height}}),_q=(t,e,r)=>{switch(e){case"xAxis":return ace(t,r).width;case"yAxis":return sce(t,r).height;default:return}},ice=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=Mg(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&$se(c))return c}},t8=Wt([Ca,ZP,ui,$s],ice),oce=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=Mg(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},r8=Wt([Ca,ZP,tN,$s],oce);Wt([Ca,jXe,_1,t4,t8,r8,aN,ZM,$s],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=Mg(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}});var xYe=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=Mg(t,c),{type:d,ticks:f,tickCount:A}=e,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/h:0;m=c==="angleAxis"&&s!=null&&s.length>=2?Nl(s[0]-s[1])*2*m:m;var p=f||a;if(p){var x=p.map((v,y)=>{var b=o?o.indexOf(v):v;return{index:y,coordinate:n(b)+m,value:v,offset:m}});return x.filter(v=>ci(v.coordinate))}return u&&l?l.map((v,y)=>({coordinate:n(v)+m,value:v,index:y,offset:m})).filter(v=>ci(v.coordinate)):n.ticks?n.ticks(A).map(v=>({coordinate:n(v)+m,value:v,offset:m})):n.domain().map((v,y)=>({coordinate:n(v)+m,value:o?o[v]:v,index:y,offset:m}))}},lce=Wt([Ca,tN,_1,t4,ZM,aN,t8,r8,$s],xYe),vYe=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Mg(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Nl(n[0]-n[1])*2*u:u,l&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},qv=Wt([Ca,tN,t4,aN,t8,r8,$s],vYe),zv=Wt(ui,t4,(t,e)=>{if(!(t==null||e==null))return kI(kI({},t),{},{scale:e})}),yYe=Wt([ui,_1,XM,tce],YM);Wt((t,e,r)=>DM(t,r),yYe,(t,e)=>{if(!(t==null||e==null))return kI(kI({},t),{},{scale:e})});var bYe=Wt([Ca,jP,PP],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),cce=t=>t.options.defaultTooltipEventType,uce=t=>t.options.validateTooltipEventTypes;function dce(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function n8(t,e){var r=cce(t),n=uce(t);return dce(e,r,n)}function wYe(t){return cn(e=>n8(e,t))}var fce=(t,e)=>{var r,n=Number(e);if(!(sh(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},NYe=t=>t.tooltip.settings,D0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},CYe={itemInteraction:{click:D0,hover:D0},axisInteraction:{click:D0,hover:D0},keyboardInteraction:D0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},hce=tu({name:"tooltip",initialState:CYe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Os()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=hf(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:Os()},removeTooltipEntrySettings:{reducer(t,e){var r=hf(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:Os()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:_Ye,replaceTooltipEntrySettings:EYe,removeTooltipEntrySettings:SYe,setTooltipSettingsState:IYe,setActiveMouseOverItemIndex:Ace,mouseLeaveItem:jYe,mouseLeaveChart:mce,setActiveClickItemIndex:PYe,setMouseOverAxisIndex:pce,setMouseClickAxisIndex:BYe,setSyncInteraction:WF,setKeyboardInteraction:XF}=hce.actions,TYe=hce.reducer;function Eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function v_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Eq(Object(r),!0).forEach(function(n){kYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kYe(t,e,r){return(e=FYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FYe(t){var e=OYe(t,"string");return typeof e=="symbol"?e:e+""}function OYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DYe(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function RYe(t){return t.index!=null}var gce=(t,e,r,n)=>{if(e==null)return D0;var a=DYe(t,e,r);if(a==null)return D0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(RYe(a)){if(s)return v_(v_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return v_(v_({},D0),{},{coordinate:a.coordinate})};function MYe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function LYe(t,e){var r=MYe(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function UYe(t,e,r){if(r==null||e==null)return!0;var n=js(t,e);return n==null||!Sm(r)?!0:LYe(n,r)}var a8=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!ci(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||UYe(u,r,n)?String(c):null},xce=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},vce=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=t.itemInteraction.hover.graphicalItemId:a=t.itemInteraction.click.graphicalItemId,a==null&&n!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},sN=t=>t.options.tooltipPayloadSearcher,E1=t=>t.tooltip;function Sq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Iq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(r),!0).forEach(function(n){QYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QYe(t,e,r){return(e=VYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VYe(t){var e=HYe(t,"string");return typeof e=="symbol"?e:e+""}function HYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ye(t,e){return t??e}var yce=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return t.reduce((A,h)=>{var m,{dataDefinedOnItem:p,settings:x}=h,v=$Ye(p,l),y=Array.isArray(v)?Jie(v,u,d):v,b=(m=x==null?void 0:x.dataKey)!==null&&m!==void 0?m:n,w=x==null?void 0:x.nameKey,j;if(n&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?j=UVe(y,n,a):j=s(y,e,c,w),Array.isArray(j))j.forEach(_=>{var S=Iq(Iq({},x),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});A.push(MG({tooltipEntrySettings:S,dataKey:_.dataKey,payload:_.payload,value:js(_.payload,_.dataKey),name:_.name}))});else{var I;A.push(MG({tooltipEntrySettings:x,dataKey:b,payload:j,value:js(j,b),name:(I=js(j,w))!==null&&I!==void 0?I:x==null?void 0:x.name}))}return A},f)}},s8=Wt([Bo,Ca,Qle,jM,Po],Zle),GYe=Wt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),KYe=Wt([Po,N1],RM),S1=Wt([GYe,Bo,KYe],LM,{memoizeOptions:{resultEqualityCheck:JP}}),qYe=Wt([S1],t=>t.filter(XP)),zYe=Wt([S1],UM,{memoizeOptions:{resultEqualityCheck:JP}}),I1=Wt([zYe,RA],QM),WYe=Wt([qYe,RA,Bo],Mle),i8=Wt([I1,Bo,S1],HM),bce=Wt([Bo],$M),XYe=Wt([Bo],t=>t.allowDataOverflow),wce=Wt([bce,XYe],mle),YYe=Wt([S1],t=>t.filter(XP)),JYe=Wt([WYe,YYe,Zw,Ble],Gle),ZYe=Wt([JYe,RA,Po,wce],Kle),eJe=Wt([S1],Hle),tJe=Wt([I1,Bo,eJe,e4,Po],qM,{memoizeOptions:{resultEqualityCheck:YP}}),rJe=Wt([qle,Po,N1],C1),nJe=Wt([rJe,Po],Xle),aJe=Wt([zle,Po,N1],C1),sJe=Wt([aJe,Po],Yle),iJe=Wt([Wle,Po,N1],C1),oJe=Wt([iJe,Po],Jle),lJe=Wt([nJe,oJe,sJe],FI),cJe=Wt([Bo,bce,wce,ZYe,tJe,lJe,Ca,Po],zM),iN=Wt([Bo,Ca,I1,i8,Zw,Po,cJe],WM),uJe=Wt([iN,Bo,s8],JM),dJe=Wt([Bo,iN,uJe,Po],e8),Nce=t=>{var e=Po(t),r=N1(t),n=!1;return aN(t,e,r,n)},Cce=Wt([Bo,Nce],zP),_ce=Wt([Bo,s8,dJe,Cce],YM),fJe=Wt([Ca,i8,Bo,Po],ice),hJe=Wt([Ca,i8,Bo,Po],oce),AJe=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=Mg(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Nl(a[0]-a[1])*2*f:f,u&&o?o.map((A,h)=>({coordinate:n(A)+f,value:A,index:h,offset:f})):n.domain().map((A,h)=>({coordinate:n(A)+f,value:s?s[A]:A,index:h,offset:f}))}}},UA=Wt([Ca,Bo,s8,_ce,Nce,fJe,hJe,Po],AJe),o8=Wt([cce,uce,NYe],(t,e,r)=>dce(r.shared,t,e)),Ece=t=>t.tooltip.settings.trigger,l8=t=>t.tooltip.settings.defaultIndex,oN=Wt([E1,o8,Ece,l8],gce),vg=Wt([oN,I1,nN,iN],a8),Sce=Wt([UA,vg],fce),c8=Wt([oN],t=>{if(t)return t.dataKey}),mJe=Wt([oN],t=>{if(t)return t.graphicalItemId}),Ice=Wt([E1,o8,Ece,l8],vce),pJe=Wt([FA,OA,Ca,Io,UA,l8,Ice,sN],xce),gJe=Wt([oN,pJe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),xJe=Wt([oN],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),vJe=Wt([Ice,vg,RA,nN,Sce,sN,o8],yce);Wt([vJe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function jq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jq(Object(r),!0).forEach(function(n){yJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yJe(t,e,r){return(e=bJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bJe(t){var e=wJe(t,"string");return typeof e=="symbol"?e:e+""}function wJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NJe=()=>cn(Bo),CJe=()=>{var t=NJe(),e=cn(UA),r=cn(_ce);return hI(!t||!r?void 0:Pq(Pq({},t),{},{scale:r}),e)};function Bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(r),!0).forEach(function(n){_Je(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Je(t,e,r){return(e=EJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EJe(t){var e=SJe(t,"string");return typeof e=="symbol"?e:e+""}function SJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IJe=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},jJe=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return gx(gx(gx({},n),to(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return gx(gx(gx({},n),to(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function PJe(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var jce=(t,e,r,n,a)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,A,h=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,m=(d=r[l])===null||d===void 0?void 0:d.coordinate,p=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(A=r[l+1])===null||A===void 0?void 0:A.coordinate,x=void 0;if(!(h==null||m==null||p==null))if(Nl(m-h)!==Nl(p-m)){var v=[];if(Nl(p-m)===Nl(a[1]-a[0])){x=p;var y=m+a[1]-a[0];v[0]=Math.min(y,(y+h)/2),v[1]=Math.max(y,(y+h)/2)}else{x=h;var b=p+a[1]-a[0];v[0]=Math.min(m,(b+m)/2),v[1]=Math.max(m,(b+m)/2)}var w=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(t>w[0]&&t<=w[1]||t>=v[0]&&t<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var I=Math.min(h,p),_=Math.max(h,p);if(t>(I+m)/2&&t<=(_+m)/2){var S;return(S=r[l])===null||S===void 0?void 0:S.index}}}else if(e)for(var E=0;E<o;E++){var F=e[E];if(F!=null){var k=e[E+1],B=e[E-1];if(E===0&&k!=null&&t<=(F.coordinate+k.coordinate)/2||E===o-1&&B!=null&&t>(F.coordinate+B.coordinate)/2||E>0&&E<o-1&&B!=null&&k!=null&&t>(F.coordinate+B.coordinate)/2&&t<=(F.coordinate+k.coordinate)/2)return F.index}}return-1},BJe=()=>cn(jM),u8=(t,e)=>e,Pce=(t,e,r)=>r,d8=(t,e,r,n)=>n,TJe=Wt(UA,t=>xP(t,e=>e.coordinate)),f8=Wt([E1,u8,Pce,d8],gce),h8=Wt([f8,I1,nN,iN],a8),kJe=(t,e,r)=>{if(e!=null){var n=E1(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Bce=Wt([E1,u8,Pce,d8],vce),OI=Wt([FA,OA,Ca,Io,UA,d8,Bce,sN],xce),FJe=Wt([f8,OI],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Tce=Wt([UA,h8],fce),OJe=Wt([Bce,h8,RA,nN,Tce,sN,u8],yce),DJe=Wt([f8,h8],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),RJe=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&PJe(t,o)){var l=dGe(t,e),c=jce(l,s,a,r,n),u=IJe(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},MJe=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=_qe(t,r);if(l){var c=fGe(l,e),u=jce(c,o,s,n,a),d=jJe(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},LJe=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?RJe(t,e,n,a,s,o,l):MJe(t,e,r,n,a,s,o)},UJe=Wt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElement:n.element}}),QJe=Wt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(Wl)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:CXe}});function Tq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tq(Object(r),!0).forEach(function(n){VJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function VJe(t,e,r){return(e=HJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HJe(t){var e=$Je(t,"string");return typeof e=="symbol"?e:e+""}function $Je(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GJe={},KJe={zIndexMap:Object.values(Wl).reduce((t,e)=>kq(kq({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),GJe)},qJe=new Set(Object.values(Wl));function zJe(t){return qJe.has(t)}var kce=tu({name:"zIndex",initialState:KJe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Os()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!zJe(r)&&delete t.zIndexMap[r])},prepare:Os()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r,element:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElement=n:t.zIndexMap[r].element=n:t.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Os()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElement=void 0:t.zIndexMap[r].element=void 0)},prepare:Os()}}}),{registerZIndexPortal:WJe,unregisterZIndexPortal:XJe,registerZIndexPortalElement:YJe,unregisterZIndexPortalElement:JJe}=kce.actions,ZJe=kce.reducer;function Ah(t){var{zIndex:e,children:r}=t,n=UGe(),a=n&&e!==void 0&&e!==0,s=Ru(),o=xs();g.useLayoutEffect(()=>a?(o(WJe({zIndex:e})),()=>{o(XJe({zIndex:e}))}):Vw,[o,e,a]);var l=cn(c=>UJe(c,e,s));return a?l?Iu.createPortal(r,l):null:r}function YF(){return YF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YF.apply(null,arguments)}function Fq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function y_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fq(Object(r),!0).forEach(function(n){eZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eZe(t,e,r){return(e=tZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tZe(t){var e=rZe(t,"string");return typeof e=="symbol"?e:e+""}function rZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nZe(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return g.isValidElement(e)?g.cloneElement(e,n):g.createElement(r,n)}function aZe(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,f=r,A=n,h=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var m,p,x;if(d==="ScatterChart")m=f,p=LKe,x=Wl.cursorLine;else if(d==="BarChart")m=UKe(l,f,s,o),p=Eoe,x=Wl.cursorRectangle;else if(l==="radial"&&Kse(f)){var{cx:v,cy:y,radius:b,startAngle:w,endAngle:j}=Ioe(f);m={cx:v,cy:y,startAngle:w,endAngle:j,innerRadius:b,outerRadius:b},p=Poe,x=Wl.cursorLine}else m={points:jqe(l,f,s)},p=nM,x=Wl.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,_=y_(y_(y_(y_({stroke:"#ccc",pointerEvents:"none"},s),m),V2(c)),{},{payload:A,payloadIndex:h,className:Xa("recharts-tooltip-cursor",I)});return g.createElement(Ah,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},g.createElement(nZe,{cursor:c,cursorComp:p,cursorProps:_}))}function sZe(t){var e=CJe(),r=MGe(),n=qw(),a=BJe();return e==null||r==null||n==null||a==null?null:g.createElement(aZe,YF({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Fce=g.createContext(null),iZe=()=>g.useContext(Fce),Oce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,A){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new a(d,f||c,A),m=r?r+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var A=0,h=f.length,m=new Array(h);A<h;A++)m[A]=f[A].fn;return m},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,A,h,m){var p=r?r+u:u;if(!this._events[p])return!1;var x=this._events[p],v=arguments.length,y,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,A),!0;case 5:return x.fn.call(x.context,d,f,A,h),!0;case 6:return x.fn.call(x.context,d,f,A,h,m),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];x.fn.apply(x.context,y)}else{var w=x.length,j;for(b=0;b<w;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),v){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,A);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];x[b].fn.apply(x[b].context,y)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,A){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===d&&(!A||m.once)&&(!f||m.context===f)&&o(this,h);else{for(var p=0,x=[],v=m.length;p<v;p++)(m[p].fn!==d||A&&!m[p].once||f&&m[p].context!==f)&&x.push(m[p]);x.length?this._events[h]=x.length===1?x[0]:x:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(Oce);var oZe=Oce.exports;const lZe=CA(oZe);var rw=new lZe,JF="recharts.syncEvent.tooltip",Oq="recharts.syncEvent.brush";function Dce(t,e){if(e){var r=Number.parseInt(e,10);if(!sh(r))return t==null?void 0:t[r]}}var cZe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Rce=tu({name:"options",initialState:cZe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),uZe=Rce.reducer,{createEventEmitter:dZe}=Rce.actions;function fZe(t){return t.tooltip.syncInteraction}var hZe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Mce=tu({name:"chartData",initialState:hZe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:Dq,setDataStartEndIndexes:AZe,setComputedData:bit}=Mce.actions,mZe=Mce.reducer,pZe=["x","y"];function Rq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rq(Object(r),!0).forEach(function(n){gZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gZe(t,e,r){return(e=xZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xZe(t){var e=vZe(t,"string");return typeof e=="symbol"?e:e+""}function vZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yZe(t,e){if(t==null)return{};var r,n,a=bZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function wZe(){var t=cn(PM),e=cn(BM),r=xs(),n=cn(Tle),a=cn(UA),s=qw(),o=kP(),l=cn(c=>c.rootProps.className);g.useEffect(()=>{if(t==null)return Vw;var c=(u,d,f)=>{if(e!==f&&t===u){if(n==="index"){var A;if(o&&d!==null&&d!==void 0&&(A=d.payload)!==null&&A!==void 0&&A.coordinate&&d.payload.sourceViewBox){var h=d.payload.coordinate,{x:m,y:p}=h,x=yZe(h,pZe),{x:v,y,width:b,height:w}=d.payload.sourceViewBox,j=xx(xx({},x),{},{x:o.x+(b?(m-v)/b:0)*o.width,y:o.y+(w?(p-y)/w:0)*o.height});r(xx(xx({},d),{},{payload:xx(xx({},d.payload),{},{coordinate:j})}))}else r(d);return}if(a!=null){var I;if(typeof n=="function"){var _={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},S=n(a,_);I=a[S]}else n==="value"&&(I=a.find(Ae=>String(Ae.value)===d.payload.label));var{coordinate:E}=d.payload;if(I==null||d.payload.active===!1||E==null||o==null){r(WF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:F,y:k}=E,B=Math.min(F,o.x+o.width),D=Math.min(k,o.y+o.height),X={x:s==="horizontal"?I.coordinate:B,y:s==="horizontal"?D:I.coordinate},he=WF({active:d.payload.active,coordinate:X,dataKey:d.payload.dataKey,index:String(I.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(he)}}};return rw.on(JF,c),()=>{rw.off(JF,c)}},[l,r,e,t,n,a,s,o])}function NZe(){var t=cn(PM),e=cn(BM),r=xs();g.useEffect(()=>{if(t==null)return Vw;var n=(a,s,o)=>{e!==o&&t===a&&r(AZe(s))};return rw.on(Oq,n),()=>{rw.off(Oq,n)}},[r,e,t])}function CZe(){var t=xs();g.useEffect(()=>{t(dZe())},[t]),wZe(),NZe()}function _Ze(t,e,r,n,a,s){var o=cn(h=>kJe(h,t,e)),l=cn(BM),c=cn(PM),u=cn(Tle),d=cn(fZe),f=d==null?void 0:d.active,A=kP();g.useEffect(()=>{if(!f&&c!=null&&l!=null){var h=WF({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:A,graphicalItemId:void 0});rw.emit(JF,c,h,l)}},[f,r,o,a,n,l,c,u,s,A])}function Mq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mq(Object(r),!0).forEach(function(n){EZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EZe(t,e,r){return(e=SZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SZe(t){var e=IZe(t,"string");return typeof e=="symbol"?e:e+""}function IZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jZe(t){return t.dataKey}function PZe(t,e){return g.isValidElement(t)?g.cloneElement(t,e):typeof t=="function"?g.createElement(t,e):g.createElement(xKe,e)}var Uq=[],BZe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Qq(t){var e,r,n=El(t,BZe),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:A,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:x,cursor:v,shared:y,trigger:b,defaultIndex:w,portal:j,axisId:I}=n,_=xs(),S=typeof w=="number"?String(w):w;g.useEffect(()=>{_(IYe({shared:y,trigger:b,axisId:I,active:a,defaultIndex:S}))},[_,y,b,I,a,S]);var E=kP(),F=boe(),k=wYe(y),{activeIndex:B,isActive:D}=(e=cn(J=>DJe(J,k,b,S)))!==null&&e!==void 0?e:{},X=cn(J=>OJe(J,k,b,S)),he=cn(J=>Tce(J,k,b,S)),Ae=cn(J=>FJe(J,k,b,S)),fe=X,me=iZe(),ne=(r=a??D)!==null&&r!==void 0?r:!1,[Pe,Te]=wie([fe,ne]),O=k==="axis"?he:void 0;_Ze(k,b,Ae,O,B,ne);var K=j??me;if(K==null||E==null||k==null)return null;var q=fe??Uq;ne||(q=Uq),u&&q.length&&(q=uie(q.filter(J=>J.value!=null&&(J.hide!==!0||n.includeHidden)),A,jZe));var U=q.length>0,W=g.createElement(_Ke,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:ne,coordinate:Ae,hasPayload:U,offset:f,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:x,lastBoundingBox:Pe,innerRef:Te,hasPortalFromProps:!!j},PZe(c,Lq(Lq({},n),{},{payload:q,label:O,active:ne,activeIndex:B,coordinate:Ae,accessibilityLayer:F})));return g.createElement(g.Fragment,null,Iu.createPortal(W,K),ne&&g.createElement(sZe,{cursor:v,tooltipEventType:k,coordinate:Ae,payload:q,index:B}))}var lN=t=>null;lN.displayName="Cell";function TZe(t,e,r){return(e=kZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kZe(t){var e=FZe(t,"string");return typeof e=="symbol"?e:e+""}function FZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class OZe{constructor(e){TZe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Vq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function DZe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vq(Object(r),!0).forEach(function(n){RZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function RZe(t,e,r){return(e=MZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MZe(t){var e=LZe(t,"string");return typeof e=="symbol"?e:e+""}function LZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UZe={cacheSize:2e3,enableCache:!0},Lce=DZe({},UZe),Hq=new OZe(Lce.cacheSize),QZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$q="recharts_measurement_span";function VZe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var Gq=(t,e)=>{try{var r=document.getElementById($q);r||(r=document.createElement("span"),r.setAttribute("id",$q),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,QZe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Rb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||MP.isSsr)return{width:0,height:0};if(!Lce.enableCache)return Gq(e,r);var n=VZe(e,r),a=Hq.get(n);if(a)return a;var s=Gq(e,r);return Hq.set(n,s),s},Uce;function HZe(t,e,r){return(e=$Ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Ze(t){var e=GZe(t,"string");return typeof e=="symbol"?e:e+""}function GZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zZe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},WZe=["cm","mm","pt","pc","in","Q","px"];function XZe(t){return WZe.includes(t)}var Yx="NaN";function YZe(t,e){return t*zZe[e]}class Al{static parse(e){var r,[,n,a]=(r=qZe.exec(e))!==null&&r!==void 0?r:[];return n==null?Al.NaN:new Al(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,sh(e)&&(this.unit=""),r!==""&&!KZe.test(r)&&(this.num=NaN,this.unit=""),XZe(r)&&(this.num=YZe(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Al(NaN,""):new Al(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Al(NaN,""):new Al(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Al(NaN,""):new Al(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Al(NaN,""):new Al(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return sh(this.num)}}Uce=Al;HZe(Al,"NaN",new Uce(NaN,""));function Qce(t){if(t==null||t.includes(Yx))return Yx;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=Kq.exec(e))!==null&&r!==void 0?r:[],o=Al.parse(n??""),l=Al.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Yx;e=e.replace(Kq,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,f,A]=(u=qq.exec(e))!==null&&u!==void 0?u:[],h=Al.parse(d??""),m=Al.parse(A??""),p=f==="+"?h.add(m):h.subtract(m);if(p.isNaN())return Yx;e=e.replace(qq,p.toString())}return e}var zq=/\(([^()]*)\)/;function JZe(t){for(var e=t,r;(r=zq.exec(e))!=null;){var[,n]=r;e=e.replace(zq,Qce(n))}return e}function ZZe(t){var e=t.replace(/\s+/g,"");return e=JZe(e),e=Qce(e),e}function eet(t){try{return ZZe(t)}catch{return Yx}}function pB(t){var e=eet(t.slice(5,-1));return e===Yx?"":e}var tet=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ret=["dx","dy","angle","className","breakAll"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZF.apply(null,arguments)}function Wq(t,e){if(t==null)return{};var r,n,a=net(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function net(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Vce=/[ \f\n\r\t\v\u2028\u2029]+/,Hce=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];Jo(e)||(r?a=e.toString().split(""):a=e.toString().split(Vce));var s=a.map(l=>({word:l,width:Rb(l,n).width})),o=r?0:Rb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function aet(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var $ce=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),Gce=t=>t.reduce((e,r)=>e.width>r.width?e:r),set="",Xq=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=Hce({breakAll:r,style:n,children:c+set});if(!u)return[!1,[]];var d=$ce(u.wordsWithComputedWidth,s,o,l),f=d.length>a||Gce(d).width>Number(s);return[f,d]},iet=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=An(s),d=String(o),f=$ce(e,n,r,a);if(!u||a)return f;var A=f.length>s||Gce(f).width>Number(n);if(!A)return f;for(var h=0,m=d.length-1,p=0,x;h<=m&&p<=d.length-1;){var v=Math.floor((h+m)/2),y=v-1,[b,w]=Xq(d,y,c,l,s,n,r,a),[j]=Xq(d,v,c,l,s,n,r,a);if(!b&&!j&&(h=v+1),b&&j&&(m=v-1),!b&&j){x=w;break}p++}return x||f},Yq=t=>{var e=Jo(t)?[]:t.toString().split(Vce);return[{words:e,width:void 0}]},oet=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!MP.isSsr){var l,c,u=Hce({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Yq(n);return iet({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return Yq(n)},Kce="#808080",cet={angle:0,breakAll:!1,capHeight:"0.71em",fill:Kce,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},a4=g.forwardRef((t,e)=>{var r=El(t,cet),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=Wq(r,tet),A=g.useMemo(()=>oet({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:h,dy:m,angle:p,className:x,breakAll:v}=f,y=Wq(f,ret);if(!ih(n)||!ih(a)||A.length===0)return null;var b=Number(n)+(An(h)?h:0),w=Number(a)+(An(m)?m:0);if(!ci(b)||!ci(w))return null;var j;switch(d){case"start":j=pB("calc(".concat(o,")"));break;case"middle":j=pB("calc(".concat((A.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:j=pB("calc(".concat(A.length-1," * -").concat(s,")"));break}var I=[];if(c){var _=A[0].width,{width:S}=f;I.push("scale(".concat(An(S)&&An(_)?S/_:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(w,")")),I.length&&(y.transform=I.join(" ")),g.createElement("text",ZF({},Ed(y),{ref:e,x:b,y:w,className:Xa("recharts-text",x),textAnchor:u,fill:l.includes("url")?Kce:l}),A.map((E,F)=>{var k=E.words.join(v?"":" ");return g.createElement("tspan",{x:b,dy:F===0?j:s,key:"".concat(k,"-").concat(F)},k)}))});a4.displayName="Text";var uet=["labelRef"],det=["content"];function Jq(t,e){if(t==null)return{};var r,n,a=fet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Zq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(r),!0).forEach(function(n){het(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function het(t,e,r){return(e=Aet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aet(t){var e=met(t,"string");return typeof e=="symbol"?e:e+""}function met(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mh.apply(null,arguments)}var qce=g.createContext(null),pet=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=g.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return g.createElement(qce.Provider,{value:c},l)},zce=()=>{var t=g.useContext(qce),e=kP();return t||loe(e)},get=g.createContext(null),xet=()=>{var t=g.useContext(get),e=cn(Rle);return t||e},vet=t=>{var{value:e,formatter:r}=t,n=Jo(t.children)?e:t.children;return typeof r=="function"?r(n):n},A8=t=>t!=null&&typeof t=="function",yet=(t,e)=>{var r=Nl(e-t),n=Math.min(Math.abs(e-t),360);return r*n},bet=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:A,clockWise:h}=a,m=(u+d)/2,p=yet(f,A),x=p>=0?1:-1,v,y;switch(e){case"insideStart":v=f+x*s,y=h;break;case"insideEnd":v=A-x*s,y=!h;break;case"end":v=A+x*s,y=h;break;default:throw new Error("Unsupported position ".concat(e))}y=p<=0?y:!y;var b=to(l,c,m,v),w=to(l,c,m,v+(y?1:-1)*359),j="M".concat(b.x,",").concat(b.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(y?0:1,`,
    `).concat(w.x,",").concat(w.y),I=Jo(t.id)?H2("recharts-radial-line-"):t.id;return g.createElement("text",Mh({},n,{dominantBaseline:"central",className:Xa("recharts-radial-bar-label",o)}),g.createElement("defs",null,g.createElement("path",{id:I,d:j})),g.createElement("textPath",{xlinkHref:"#".concat(I)},r))},wet=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=to(n,a,o+e,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var A=(s+o)/2,{x:h,y:m}=to(n,a,A,u);return{x:h,y:m,textAnchor:"middle",verticalAnchor:"middle"}},eO=t=>"cx"in t&&An(t.cx),Net=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!eO(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,f=o,A=o+(c-u)/2,h=(f+A)/2,m=(c+u)/2,p=f+c/2,x=d>=0?1:-1,v=x*n,y=x>0?"end":"start",b=x>0?"start":"end",w=c>=0?1:-1,j=w*n,I=w>0?"end":"start",_=w>0?"start":"end";if(a==="top"){var S={x:f+c/2,y:l-v,textAnchor:"middle",verticalAnchor:y};return Bi(Bi({},S),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:A+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:b};return Bi(Bi({},E),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var F={x:h-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"};return Bi(Bi({},F),s?{width:Math.max(F.x-s.x,0),height:d}:{})}if(a==="right"){var k={x:h+m+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Bi(Bi({},k),s?{width:Math.max(s.x+s.width-k.x,0),height:d}:{})}var B=s?{width:m,height:d}:{};return a==="insideLeft"?Bi({x:h+j,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},B):a==="insideRight"?Bi({x:h+m-j,y:l+d/2,textAnchor:I,verticalAnchor:"middle"},B):a==="insideTop"?Bi({x:f+c/2,y:l+v,textAnchor:"middle",verticalAnchor:b},B):a==="insideBottom"?Bi({x:A+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:y},B):a==="insideTopLeft"?Bi({x:f+j,y:l+v,textAnchor:_,verticalAnchor:b},B):a==="insideTopRight"?Bi({x:f+c-j,y:l+v,textAnchor:I,verticalAnchor:b},B):a==="insideBottomLeft"?Bi({x:A+j,y:l+d-v,textAnchor:_,verticalAnchor:y},B):a==="insideBottomRight"?Bi({x:A+u-j,y:l+d-v,textAnchor:I,verticalAnchor:y},B):a&&typeof a=="object"&&(An(a.x)||gA(a.x))&&(An(a.y)||gA(a.y))?Bi({x:o+Yl(a.x,m),y:l+Yl(a.y,d),textAnchor:"end",verticalAnchor:"end"},B):Bi({x:p,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Cet={angle:0,offset:5,zIndex:Wl.label,position:"middle",textBreakAll:!1};function _0(t){var e=El(t,Cet),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=xet(),f=zce(),A=n==="center"?f:d??f,h,m,p;if(r==null?h=A:eO(r)?h=r:h=loe(r),!h||Jo(a)&&Jo(s)&&!g.isValidElement(o)&&typeof o!="function")return null;var x=Bi(Bi({},e),{},{viewBox:h});if(g.isValidElement(o)){var{labelRef:v}=x,y=Jq(x,uet);return g.cloneElement(o,y)}if(typeof o=="function"){var{content:b}=x,w=Jq(x,det);if(m=g.createElement(o,w),g.isValidElement(m))return m}else m=vet(e);var j=Ed(e);if(eO(h)){if(n==="insideStart"||n==="insideEnd"||n==="end")return bet(e,n,m,j,h);p=wet(h,e.offset,e.position)}else p=Net(e,h);return g.createElement(Ah,{zIndex:e.zIndex},g.createElement(a4,Mh({ref:u,className:Xa("recharts-label",l)},j,p,{textAnchor:aet(j.textAnchor)?j.textAnchor:p.textAnchor,breakAll:c}),m))}_0.displayName="Label";var _et=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?g.createElement(_0,Mh({key:"label-implicit"},n)):ih(t)?g.createElement(_0,Mh({key:"label-implicit",value:t},n)):g.isValidElement(t)?t.type===_0?g.cloneElement(t,Bi({key:"label-implicit"},n)):g.createElement(_0,Mh({key:"label-implicit",content:t},n)):A8(t)?g.createElement(_0,Mh({key:"label-implicit",content:t},n)):t&&typeof t=="object"?g.createElement(_0,Mh({},t,{key:"label-implicit"},n)):null};function Eet(t){var{label:e,labelRef:r}=t,n=zce();return _et(e,n,r)||null}var Wce={},Xce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Xce);var Yce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Yce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xce,r=Yce,n=pP;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Wce);var Iet=Wce.last;const jet=CA(Iet);var Pet=["valueAccessor"],Bet=["dataKey","clockWise","id","textBreakAll","zIndex"];function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DI.apply(null,arguments)}function ez(t,e){if(t==null)return{};var r,n,a=Tet(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tet(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ket=t=>Array.isArray(t.value)?jet(t.value):t.value,Jce=g.createContext(void 0),Fet=Jce.Provider,Zce=g.createContext(void 0),Oet=Zce.Provider;function Det(){return g.useContext(Jce)}function Ret(){return g.useContext(Zce)}function pE(t){var{valueAccessor:e=ket}=t,r=ez(t,Pet),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=ez(r,Bet),u=Det(),d=Ret(),f=u||d;return!f||!f.length?null:g.createElement(Ah,{zIndex:l??Wl.label},g.createElement(bc,{className:"recharts-label-list"},f.map((A,h)=>{var m,p=Jo(n)?e(A,h):js(A&&A.payload,n),x=Jo(s)?{}:{id:"".concat(s,"-").concat(h)};return g.createElement(_0,DI({key:"label-".concat(h)},Ed(A),c,x,{fill:(m=r.fill)!==null&&m!==void 0?m:A.fill,parentViewBox:A.parentViewBox,value:p,textBreakAll:o,viewBox:A.viewBox,index:h,zIndex:0}))})))}pE.displayName="LabelList";function eue(t){var{label:e}=t;return e?e===!0?g.createElement(pE,{key:"labelList-implicit"}):g.isValidElement(e)||A8(e)?g.createElement(pE,{key:"labelList-implicit",content:e}):typeof e=="object"?g.createElement(pE,DI({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var tue=t=>t.graphicalItems.polarItems,Met=Wt([$s,eN],RM),s4=Wt([tue,ui,Met],LM),Let=Wt([s4],UM),i4=Wt([Let,qP],QM),Uet=Wt([i4,ui,s4],HM);Wt([i4,ui,s4],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=js(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:js(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var tz=()=>{},Qet=Wt([i4,ui,s4,e4,$s],qM),Vet=Wt([ui,GM,KM,tz,Qet,tz,Ca,$s],zM),rue=Wt([ui,Ca,i4,Uet,Zw,$s,Vet],WM),Het=Wt([rue,ui,_1],JM);Wt([ui,rue,Het,$s],e8);var $et={radiusAxis:{},angleAxis:{}},nue=tu({name:"polarAxis",initialState:$et,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:wit,removeRadiusAxis:Nit,addAngleAxis:Cit,removeAngleAxis:_it}=nue.actions,Get=nue.reducer;function rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(r),!0).forEach(function(n){Ket(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ket(t,e,r){return(e=qet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qet(t){var e=zet(t,"string");return typeof e=="symbol"?e:e+""}function zet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wet=(t,e)=>e,m8=Wt([tue,Wet],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Xet=[],p8=(t,e,r)=>(r==null?void 0:r.length)===0?Xet:r,aue=Wt([qP,m8,p8],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>nz(nz({},e.presentationProps),s.props))),a!=null)return a}}),Yet=Wt([aue,m8,p8],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=js(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:IP(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),Jet=Wt([aue,m8,p8,Io],(t,e,r,n)=>{if(!(e==null||t==null))return ert({offset:n,pieSettings:e,displayedData:t,cells:r})}),sue={exports:{}},us={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g8=Symbol.for("react.transitional.element"),x8=Symbol.for("react.portal"),o4=Symbol.for("react.fragment"),l4=Symbol.for("react.strict_mode"),c4=Symbol.for("react.profiler"),u4=Symbol.for("react.consumer"),d4=Symbol.for("react.context"),f4=Symbol.for("react.forward_ref"),h4=Symbol.for("react.suspense"),A4=Symbol.for("react.suspense_list"),m4=Symbol.for("react.memo"),p4=Symbol.for("react.lazy"),Zet=Symbol.for("react.view_transition"),ett=Symbol.for("react.client.reference");function kd(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case g8:switch(t=t.type,t){case o4:case c4:case l4:case h4:case A4:case Zet:return t;default:switch(t=t&&t.$$typeof,t){case d4:case f4:case p4:case m4:return t;case u4:return t;default:return e}}case x8:return e}}}us.ContextConsumer=u4;us.ContextProvider=d4;us.Element=g8;us.ForwardRef=f4;us.Fragment=o4;us.Lazy=p4;us.Memo=m4;us.Portal=x8;us.Profiler=c4;us.StrictMode=l4;us.Suspense=h4;us.SuspenseList=A4;us.isContextConsumer=function(t){return kd(t)===u4};us.isContextProvider=function(t){return kd(t)===d4};us.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===g8};us.isForwardRef=function(t){return kd(t)===f4};us.isFragment=function(t){return kd(t)===o4};us.isLazy=function(t){return kd(t)===p4};us.isMemo=function(t){return kd(t)===m4};us.isPortal=function(t){return kd(t)===x8};us.isProfiler=function(t){return kd(t)===c4};us.isStrictMode=function(t){return kd(t)===l4};us.isSuspense=function(t){return kd(t)===h4};us.isSuspenseList=function(t){return kd(t)===A4};us.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===o4||t===c4||t===l4||t===h4||t===A4||typeof t=="object"&&t!==null&&(t.$$typeof===p4||t.$$typeof===m4||t.$$typeof===d4||t.$$typeof===u4||t.$$typeof===f4||t.$$typeof===ett||t.getModuleId!==void 0)};us.typeOf=kd;sue.exports=us;var ttt=sue.exports,az=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",sz=null,gB=null,iue=t=>{if(t===sz&&Array.isArray(gB))return gB;var e=[];return g.Children.forEach(t,r=>{Jo(r)||(ttt.isFragment(r)?e=e.concat(iue(r.props.children)):e.push(r))}),gB=e,sz=t,e};function v8(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>az(a)):n=[az(e)],iue(t).forEach(a=>{var s=Ag(a,"type.displayName")||Ag(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var oue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(oue);var rtt=oue.isPlainObject;const ntt=CA(rtt);var iz,oz,lz,cz,uz;function dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(r),!0).forEach(function(n){att(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function att(t,e,r){return(e=stt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function stt(t){var e=itt(t,"string");return typeof e=="symbol"?e:e+""}function itt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RI.apply(null,arguments)}function Ey(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var hz=(t,e,r,n,a)=>{var s=r-n,o;return o=pi(iz||(iz=Ey(["M ",",",""])),t,e),o+=pi(oz||(oz=Ey(["L ",",",""])),t+r,e),o+=pi(lz||(lz=Ey(["L ",",",""])),t+r-s/2,e+a),o+=pi(cz||(cz=Ey(["L ",",",""])),t+r-s/2-n,e+a),o+=pi(uz||(uz=Ey(["L ",","," Z"])),t,e),o},ott={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ltt=t=>{var e=El(t,ott),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=e,A=g.useRef(null),[h,m]=g.useState(-1),p=g.useRef(a),x=g.useRef(s),v=g.useRef(o),y=g.useRef(r),b=g.useRef(n),w=UP(t,"trapezoid-");if(g.useEffect(()=>{if(A.current&&A.current.getTotalLength)try{var X=A.current.getTotalLength();X&&m(X)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var j=Xa("recharts-trapezoid",l);if(!f)return g.createElement("g",null,g.createElement("path",RI({},Ed(e),{className:j,d:hz(r,n,a,s,o)})));var I=p.current,_=x.current,S=v.current,E=y.current,F=b.current,k="0px ".concat(h===-1?1:h,"px"),B="".concat(h,"px 0px"),D=woe(["strokeDasharray"],u,c);return g.createElement(LP,{animationId:w,key:w,canBegin:h>0,duration:u,easing:c,isActive:f,begin:d},X=>{var he=go(I,a,X),Ae=go(_,s,X),fe=go(S,o,X),me=go(E,r,X),ne=go(F,n,X);A.current&&(p.current=he,x.current=Ae,v.current=fe,y.current=me,b.current=ne);var Pe=X>0?{transition:D,strokeDasharray:B}:{strokeDasharray:k};return g.createElement("path",RI({},Ed(e),{className:j,d:hz(me,ne,he,Ae,fe),ref:A,style:fz(fz({},Pe),e.style)}))})},ctt=["option","shapeType","activeClassName"];function utt(t,e){if(t==null)return{};var r,n,a=dtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){ftt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ftt(t,e,r){return(e=htt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function htt(t){var e=Att(t,"string");return typeof e=="symbol"?e:e+""}function Att(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mtt(t,e){return MI(MI({},e),t)}function ptt(t,e){return t==="symbols"}function mz(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return g.createElement(Eoe,r);case"trapezoid":return g.createElement(ltt,r);case"sector":return g.createElement(Poe,r);case"symbols":if(ptt(e))return g.createElement(FR,r);break;case"curve":return g.createElement(nM,r);default:return null}}function gtt(t){return g.isValidElement(t)?t.props:t}function lue(t){var{option:e,shapeType:r,activeClassName:n="recharts-active-shape"}=t,a=utt(t,ctt),s;if(g.isValidElement(e))s=g.cloneElement(e,MI(MI({},a),gtt(e)));else if(typeof e=="function")s=e(a,a.index);else if(ntt(e)&&typeof e!="boolean"){var o=mtt(e,a);s=g.createElement(mz,{shapeType:r,elementProps:o})}else{var l=a;s=g.createElement(mz,{shapeType:r,elementProps:l})}return a.isActive?g.createElement(bc,{className:n},s):s}var y8=(t,e,r)=>{var n=xs();return(a,s)=>o=>{t==null||t(a,s,o),n(Ace({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},b8=t=>{var e=xs();return(r,n)=>a=>{t==null||t(r,n,a),e(jYe())}},w8=(t,e,r)=>{var n=xs();return(a,s)=>o=>{t==null||t(a,s,o),n(PYe({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function cue(t){var{tooltipEntrySettings:e}=t,r=xs(),n=Ru(),a=g.useRef(null);return g.useLayoutEffect(()=>{n||(a.current===null?r(_Ye(e)):a.current!==e&&r(EYe({prev:a.current,next:e})),a.current=e)},[e,r,n]),g.useLayoutEffect(()=>()=>{a.current&&(r(SYe(a.current)),a.current=null)},[r]),null}function xtt(t){var{legendPayload:e}=t,r=xs(),n=Ru(),a=g.useRef(null);return g.useLayoutEffect(()=>{n||(a.current===null?r(xoe(e)):a.current!==e&&r(voe({prev:a.current,next:e})),a.current=e)},[r,n,e]),g.useLayoutEffect(()=>()=>{a.current&&(r(yoe(a.current)),a.current=null)},[r]),null}function vtt(t){var{legendPayload:e}=t,r=xs(),n=cn(Ca),a=g.useRef(null);return g.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(xoe(e)):a.current!==e&&r(voe({prev:a.current,next:e})),a.current=e)},[r,n,e]),g.useLayoutEffect(()=>()=>{a.current&&(r(yoe(a.current)),a.current=null)},[r]),null}var xB,ytt=()=>{var[t]=g.useState(()=>H2("uid-"));return t},btt=(xB=qde.useId)!==null&&xB!==void 0?xB:ytt;function wtt(t,e){var r=btt();return e||(t?"".concat(t,"-").concat(r):r)}var Ntt=g.createContext(void 0),uue=t=>{var{id:e,type:r,children:n}=t,a=wtt("recharts-".concat(r),e);return g.createElement(Ntt.Provider,{value:a},n(a))},Ctt={cartesianItems:[],polarItems:[]},due=tu({name:"graphicalItems",initialState:Ctt,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Os()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=hf(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:Os()},removeCartesianGraphicalItem:{reducer(t,e){var r=hf(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:Os()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Os()},removePolarGraphicalItem:{reducer(t,e){var r=hf(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:Os()}}}),{addCartesianGraphicalItem:_tt,replaceCartesianGraphicalItem:Ett,removeCartesianGraphicalItem:Stt,addPolarGraphicalItem:Itt,removePolarGraphicalItem:jtt}=due.actions,Ptt=due.reducer,Btt=t=>{var e=xs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(_tt(t)):r.current!==t&&e(Ett({prev:r.current,next:t})),r.current=t},[e,t]),g.useLayoutEffect(()=>()=>{r.current&&(e(Stt(r.current)),r.current=null)},[e]),null},Ttt=g.memo(Btt);function ktt(t){var e=xs();return g.useLayoutEffect(()=>(e(Itt(t)),()=>{e(jtt(t))}),[e,t]),null}var Ftt=["key"],Ott=["onMouseEnter","onClick","onMouseLeave"],Dtt=["id"],Rtt=["id"];function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){Mtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mtt(t,e,r){return(e=Ltt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ltt(t){var e=Utt(t,"string");return typeof e=="symbol"?e:e+""}function Utt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Im.apply(null,arguments)}function g4(t,e){if(t==null)return{};var r,n,a=Qtt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qtt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Vtt(t){var e=g.useMemo(()=>v8(t.children,lN),[t.children]),r=cn(n=>Yet(n,t.id,e));return r==null?null:g.createElement(vtt,{legendPayload:r})}var Htt=g.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u,id:d}=t,f={dataDefinedOnItem:n.map(A=>A.tooltipPayload),positions:n.map(A=>A.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:IP(l,e),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return g.createElement(cue,{tooltipEntrySettings:f})}),$tt=(t,e)=>t>e?"start":t<e?"end":"middle",Gtt=(t,e,r)=>Yl(typeof e=="function"?e(t):e,r,r*.8),Ktt=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=Soe(s,o),c=a+Yl(t.cx,s,s/2),u=n+Yl(t.cy,o,o/2),d=Yl(t.innerRadius,l,0),f=Gtt(r,t.outerRadius,l),A=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:A}},qtt=(t,e)=>{var r=Nl(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function ztt(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Wtt=(t,e)=>{if(g.isValidElement(t))return g.cloneElement(t,e);if(typeof t=="function")return t(e);var r=Xa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=g4(e,Ftt);return g.createElement(nM,Im({},a,{type:"linear",className:r}))},Xtt=(t,e,r)=>{if(g.isValidElement(t))return g.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),g.isValidElement(n)))return n;var a=Xa("recharts-pie-label-text",ztt(t));return g.createElement(a4,Im({},e,{alignmentBaseline:"middle",className:a}),n)};function Ytt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=ah(r),c=V2(a),u=V2(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=e.map((A,h)=>{var m=(A.startAngle+A.endAngle)/2,p=to(A.cx,A.cy,A.outerRadius+d,m),x=vi(vi(vi(vi({},l),A),{},{stroke:"none"},c),{},{index:h,textAnchor:$tt(p.x,A.cx)},p),v=vi(vi(vi(vi({},l),A),{},{fill:"none",stroke:A.fill},u),{},{index:h,points:[to(A.cx,A.cy,A.outerRadius,m),p],key:"line"});return g.createElement(Ah,{zIndex:Wl.label,key:"label-".concat(A.startAngle,"-").concat(A.endAngle,"-").concat(A.midAngle,"-").concat(h)},g.createElement(bc,null,s&&Wtt(s,v),Xtt(a,x,js(A,o))))});return g.createElement(bc,{className:"recharts-pie-labels"},f)}function Jtt(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?g.createElement(eue,{label:a}):g.createElement(Ytt,{sectors:e,props:r,showLabels:n})}function Ztt(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=cn(vg),c=cn(c8),u=cn(mJe),{onMouseEnter:d,onClick:f,onMouseLeave:A}=a,h=g4(a,Ott),m=y8(d,a.dataKey,o),p=b8(A),x=w8(f,a.dataKey,o);return e==null||e.length===0?null:g.createElement(g.Fragment,null,e.map((v,y)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&e.length!==1)return null;var b=u==null||u===o,w=String(y)===l&&(c==null||a.dataKey===c)&&b,j=l?n:null,I=r&&w?r:j,_=vi(vi({},v),{},{stroke:v.stroke,tabIndex:-1,[eoe]:y,[toe]:o});return g.createElement(bc,Im({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Hw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:x(v,y)}),g.createElement(lue,Im({option:s??I,index:y,shapeType:"sector",isActive:w},_)))}))}function ert(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,A=Math.abs(r.minAngle),h=qtt(l,c),m=Math.abs(h),p=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,x=n.filter(I=>js(I,u,0)!==0).length,v=(m>=360?x:x-1)*p,y=m-x*A-v,b=n.reduce((I,_)=>{var S=js(_,u,0);return I+(An(S)?S:0)},0),w;if(b>0){var j;w=n.map((I,_)=>{var S=js(I,u,0),E=js(I,d,_),F=Ktt(r,s,I),k=(An(S)?S:0)/b,B,D=vi(vi({},I),a&&a[_]&&a[_].props);_?B=j.endAngle+Nl(h)*p*(S!==0?1:0):B=l;var X=B+Nl(h)*((S!==0?A:0)+k*y),he=(B+X)/2,Ae=(F.innerRadius+F.outerRadius)/2,fe=[{name:E,value:S,payload:D,dataKey:u,type:f,graphicalItemId:r.id}],me=to(F.cx,F.cy,Ae,he);return j=vi(vi(vi(vi({},r.presentationProps),{},{percent:k,cornerRadius:typeof o=="string"?parseFloat(o):o,name:E,tooltipPayload:fe,midAngle:he,middleRadius:Ae,tooltipPosition:me},D),F),{},{value:S,dataKey:u,startAngle:B,endAngle:X,payload:D,paddingAngle:Nl(h)*p}),j})}return w}function trt(t){var{showLabels:e,sectors:r,children:n}=t,a=g.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return g.createElement(Oet,{value:e?a:void 0},n)}function rrt(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:A}=e,h=UP(e,"recharts-pie-"),m=r.current,[p,x]=g.useState(!1),v=g.useCallback(()=>{typeof A=="function"&&A(),x(!1)},[A]),y=g.useCallback(()=>{typeof f=="function"&&f(),x(!0)},[f]);return g.createElement(trt,{showLabels:!p,sectors:a},g.createElement(LP,{animationId:h,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:y,onAnimationEnd:v,key:h},b=>{var w=[],j=a&&a[0],I=j==null?void 0:j.startAngle;return a==null||a.forEach((_,S)=>{var E=m&&m[S],F=S>0?Ag(_,"paddingAngle",0):0;if(E){var k=go(E.endAngle-E.startAngle,_.endAngle-_.startAngle,b),B=vi(vi({},_),{},{startAngle:I+F,endAngle:I+k+F});w.push(B),I=B.endAngle}else{var{endAngle:D,startAngle:X}=_,he=go(0,D-X,b),Ae=vi(vi({},_),{},{startAngle:I+F,endAngle:I+he+F});w.push(Ae),I=Ae.endAngle}}),r.current=w,g.createElement(bc,null,g.createElement(Ztt,{sectors:w,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),g.createElement(Jtt,{showLabels:!p,sectors:a,props:e}),e.children)}var nrt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Wl.area};function art(t){var{id:e}=t,r=g4(t,Dtt),{hide:n,className:a,rootTabIndex:s}=t,o=g.useMemo(()=>v8(t.children,lN),[t.children]),l=cn(d=>Jet(d,e,o)),c=g.useRef(null),u=Xa("recharts-pie",a);return n||l==null?(c.current=null,g.createElement(bc,{tabIndex:s,className:u})):g.createElement(Ah,{zIndex:t.zIndex},g.createElement(Htt,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),g.createElement(bc,{tabIndex:s,className:u},g.createElement(rrt,{props:vi(vi({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function fue(t){var e=El(t,nrt),{id:r}=e,n=g4(e,Rtt),a=ah(n);return g.createElement(uue,{id:r,type:"pie"},s=>g.createElement(g.Fragment,null,g.createElement(ktt,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),g.createElement(Vtt,Im({},n,{id:s})),g.createElement(art,Im({},n,{id:s}))))}fue.displayName="Pie";function gz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(r),!0).forEach(function(n){srt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function srt(t,e,r){return(e=irt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function irt(t){var e=ort(t,"string");return typeof e=="symbol"?e:e+""}function ort(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hue=0,lrt={xAxis:{},yAxis:{},zAxis:{}},Aue=tu({name:"cartesianAxis",initialState:lrt,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Os()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:Os()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Os()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Os()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:Os()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Os()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Os()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:Os()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Os()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=xz(xz({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:crt,replaceXAxis:urt,removeXAxis:drt,addYAxis:frt,replaceYAxis:hrt,removeYAxis:Art,addZAxis:Eit,replaceZAxis:Sit,removeZAxis:Iit,updateYAxisWidth:mrt}=Aue.actions,prt=Aue.reducer,grt=Wt([Io],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),xrt=Wt([grt,FA,OA],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),mue=()=>cn(xrt),vz=(t,e,r)=>{var n=r??t;if(!Jo(n))return Yl(n,e,0)},vrt=(t,e,r)=>{var n={},a=t.filter(XP),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,A=f.map(m=>m.dataKey),h=vz(e,r,f[0].barSize);return{stackId:d,dataKeys:A,barSize:h}}),c=s.map(u=>{var d=[u.dataKey].filter(A=>A!=null),f=vz(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){yrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yrt(t,e,r){return(e=brt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function brt(t){var e=wrt(t,"string");return typeof e=="symbol"?e:e+""}function wrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nrt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=Yl(t,r,0,!0),l,c=[];if(ci(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((v,y)=>v+(y.barSize||0),0);f+=(s-1)*o,f>=r&&(f-=(s-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var A=(r-f)/2>>0,h={offset:A-o,size:0};l=n.reduce((v,y)=>{var b,w={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(b=y.barSize)!==null&&b!==void 0?b:0}},j=[...v,w];return h=j[j.length-1].position,j},c)}else{var m=Yl(e,r,0,!0);r-2*m-(s-1)*o<=0&&(o=0);var p=(r-2*m-(s-1)*o)/s;p>1&&(p>>=0);var x=ci(a)?Math.min(p,a):p;l=n.reduce((v,y,b)=>[...v,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:m+(p+o)*b+(p-x)/2,size:x}}],c)}return l}}var Crt=(t,e,r,n,a,s,o)=>{var l=Jo(o)?e:o,c=Nrt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>b_(b_({},u),{},{position:b_(b_({},u.position),{},{offset:u.position.offset-a/2})}))),c},_rt=(t,e)=>{var r=OM(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}};function Ert(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&ci(t.zIndex)?t.zIndex:e}var pue=t=>{var{chartData:e}=t,r=xs(),n=Ru();return g.useEffect(()=>n?()=>{}:(r(Dq(e)),()=>{r(Dq(void 0))}),[e,r,n]),null},bz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gue=tu({name:"brush",initialState:bz,reducers:{setBrushSettings(t,e){return e.payload==null?bz:e.payload}}}),{setBrushSettings:jit}=gue.actions,Srt=gue.reducer;function Irt(t,e,r){return(e=jrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jrt(t){var e=Prt(t,"string");return typeof e=="symbol"?e:e+""}function Prt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class N8{static create(e){return new N8(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Irt(N8,"EPS",1e-4);function Brt(t){return(t%180+180)%180}var Trt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Brt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},krt={dots:[],areas:[],lines:[]},xue=tu({name:"referenceElements",initialState:krt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=hf(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=hf(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=hf(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Pit,removeDot:Bit,addArea:Tit,removeArea:kit,addLine:Fit,removeLine:Oit}=xue.actions,Frt=xue.reducer,Ort=g.createContext(void 0),Drt=t=>{var{children:e}=t,[r]=g.useState("".concat(H2("recharts"),"-clip")),n=mue();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return g.createElement(Ort.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function vue(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e){var a=t[n];a!==void 0&&r.push(a)}return r}function Rrt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Trt(n,r)}function Mrt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function nw(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Lrt(t,e){return vue(t,e+1)}function Urt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,f=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:vue(n,u)};var p=c,x,v=()=>(x===void 0&&(x=r(m,p)),x),y=m.coordinate,b=c===0||nw(t,y,v,d,l);b||(c=0,d=o,u+=1),b&&(d=y+t*(v()/2+a),c+=u)},A;u<=s.length;)if(A=f(),A)return A.v;return[]}function Qrt(t,e,r,n,a){var s=(n||[]).slice(),o=s.length;if(o===0)return[];for(var{start:l,end:c}=e,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,A=!0,h=function(){var y=n[m],b=m,w,j=()=>(w===void 0&&(w=r(y,b)),w),I=y.coordinate,_=m===d||nw(t,I,j,f,c);if(!_)return A=!1,1;_&&(f=I+t*(j()/2+a))},m=d;m<o&&!h();m+=u);if(A){for(var p=[],x=d;x<o;x+=u)p.push(n[x]);return p}}return[]}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){Vrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vrt(t,e,r){return(e=Hrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hrt(t){var e=$rt(t,"string");return typeof e=="symbol"?e:e+""}function $rt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Grt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(A){var h=s[A],m,p=()=>(m===void 0&&(m=r(h,A)),m);if(A===o-1){var x=t*(h.coordinate+t*p()/2-c);s[A]=h=Vl(Vl({},h),{},{tickCoord:x>0?h.coordinate-x*t:h.coordinate})}else s[A]=h=Vl(Vl({},h),{},{tickCoord:h.coordinate});if(h.tickCoord!=null){var v=nw(t,h.tickCoord,p,l,c);v&&(c=h.tickCoord-t*(p()/2+a),s[A]=Vl(Vl({},h),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function Krt(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],f=r(d,l-1),A=t*(d.coordinate+t*f/2-u);if(o[l-1]=d=Vl(Vl({},d),{},{tickCoord:A>0?d.coordinate-A*t:d.coordinate}),d.tickCoord!=null){var h=nw(t,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-t*(f/2+a),o[l-1]=Vl(Vl({},d),{},{isShow:!0}))}}for(var m=s?l-1:l,p=function(y){var b=o[y],w,j=()=>(w===void 0&&(w=r(b,y)),w);if(y===0){var I=t*(b.coordinate-t*j()/2-c);o[y]=b=Vl(Vl({},b),{},{tickCoord:I<0?b.coordinate-I*t:b.coordinate})}else o[y]=b=Vl(Vl({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var _=nw(t,b.tickCoord,j,c,u);_&&(c=b.tickCoord+t*(j()/2+a),o[y]=Vl(Vl({},b),{},{isShow:!0}))}},x=0;x<m;x++)p(x);return o}function qrt(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=t;if(!a||!a.length||!n)return[];if(An(c)||MP.isSsr){var A;return(A=Lrt(a,An(c)?c:0))!==null&&A!==void 0?A:[]}var h=[],m=l==="top"||l==="bottom"?"width":"height",p=d&&m==="width"?Rb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=(b,w)=>{var j=typeof u=="function"?u(b.value,w):b.value;return m==="width"?Rrt(Rb(j,{fontSize:e,letterSpacing:r}),p,f):Rb(j,{fontSize:e,letterSpacing:r})[m]},v=a.length>=2?Nl(a[1].coordinate-a[0].coordinate):1,y=Mrt(s,v,m);return c==="equidistantPreserveStart"?Urt(v,y,x,a,o):c==="equidistantPreserveEnd"?Qrt(v,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Krt(v,y,x,a,o,c==="preserveStartEnd"):h=Grt(v,y,x,a,o),h.filter(b=>b.isShow))}var zrt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Wrt=["axisLine","width","height","className","hide","ticks","axisType"];function Xrt(t,e){if(t==null)return{};var r,n,a=Yrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Yrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function yg(){return yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yg.apply(null,arguments)}function Nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(r),!0).forEach(function(n){Jrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jrt(t,e,r){return(e=Zrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zrt(t){var e=ent(t,"string");return typeof e=="symbol"?e:e+""}function ent(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hp={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Wl.axis};function tnt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=Yi(Yi(Yi({},c),ah(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=Yi(Yi({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var f=+(s==="left"&&!o||s==="right"&&o);u=Yi(Yi({},u),{},{x1:e+f*n,y1:r,x2:e+f*n,y2:r+a})}return g.createElement("line",yg({},u,{className:Xa("recharts-cartesian-axis-line",Ag(l,"className"))}))}function rnt(t,e,r,n,a,s,o,l,c){var u,d,f,A,h,m,p=l?-1:1,x=t.tickSize||o,v=An(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,A=r+ +!l*a,f=A-p*x,m=f-p*c,h=v;break;case"left":f=A=t.coordinate,d=e+ +!l*n,u=d-p*x,h=u-p*c,m=v;break;case"right":f=A=t.coordinate,d=e+ +l*n,u=d+p*x,h=u+p*c,m=v;break;default:u=d=t.coordinate,A=r+ +l*a,f=A+p*x,m=f+p*c,h=v;break}return{line:{x1:u,y1:f,x2:d,y2:A},tick:{x:h,y:m}}}function nnt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function ant(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function snt(t){var{option:e,tickProps:r,value:n}=t,a,s=Xa(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(e))a=g.cloneElement(e,Yi(Yi({},r),{},{className:s}));else if(typeof e=="function")a=e(Yi(Yi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Xa(o,e==null?void 0:e.className)),a=g.createElement(a4,yg({},r,{className:o}),n)}return a}var int=g.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:A,y:h,width:m,height:p,tickSize:x,tickMargin:v,fontSize:y,letterSpacing:b,getTicksConfig:w,events:j,axisType:I}=t,_=qrt(Yi(Yi({},w),{},{ticks:r}),y,b),S=nnt(d,f),E=ant(d,f),F=ah(w),k=V2(n),B={};typeof a=="object"&&(B=a);var D=Yi(Yi({},F),{},{fill:"none"},B),X=_.map(fe=>Yi({entry:fe},rnt(fe,A,h,m,p,d,x,f,v))),he=X.map(fe=>{var{entry:me,line:ne}=fe;return g.createElement(bc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},a&&g.createElement("line",yg({},D,ne,{className:Xa("recharts-cartesian-axis-tick-line",Ag(a,"className"))})))}),Ae=X.map((fe,me)=>{var{entry:ne,tick:Pe}=fe,Te=Yi(Yi(Yi(Yi({textAnchor:S,verticalAnchor:E},F),{},{stroke:"none",fill:s},k),Pe),{},{index:me,payload:ne,visibleTicksCount:_.length,tickFormatter:o,padding:c},u);return g.createElement(bc,yg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},Hw(j,ne,me)),n&&g.createElement(snt,{option:n,tickProps:Te,value:"".concat(typeof o=="function"?o(ne.value,me):ne.value).concat(l||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},Ae.length>0&&g.createElement(Ah,{zIndex:Wl.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},Ae)),he.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},he))}),ont=g.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Xrt(t,Wrt),[d,f]=g.useState(""),[A,h]=g.useState(""),m=g.useRef(null);g.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return zrt({ticks:m.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var p=g.useCallback(x=>{if(x){var v=x.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=v;var y=v[0];if(y){var b=window.getComputedStyle(y),w=b.fontSize,j=b.letterSpacing;(w!==d||j!==A)&&(f(w),h(j))}}},[d,A]);return o||n!=null&&n<=0||a!=null&&a<=0?null:g.createElement(Ah,{zIndex:t.zIndex},g.createElement(bc,{className:Xa("recharts-cartesian-axis",s)},g.createElement(tnt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:ah(t)}),g.createElement(int,{ref:p,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:A,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),g.createElement(pet,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},g.createElement(Eet,{label:t.label,labelRef:t.labelRef}),t.children)))}),C8=g.forwardRef((t,e)=>{var r=El(t,Hp);return g.createElement(ont,yg({},r,{ref:e}))});C8.displayName="CartesianAxis";var lnt={},yue=tu({name:"errorBars",initialState:lnt,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Dit,replaceErrorBar:Rit,removeErrorBar:Mit}=yue.actions,cnt=yue.reducer,unt=["children"];function dnt(t,e){if(t==null)return{};var r,n,a=fnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var hnt={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ant=g.createContext(hnt);function mnt(t){var{children:e}=t,r=dnt(t,unt);return g.createElement(Ant.Provider,{value:r},e)}function bue(t,e){var r,n,a=cn(u=>MA(u,t)),s=cn(u=>LA(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Ro.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Mo.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function pnt(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=mue(),{needClipX:s,needClipY:o,needClip:l}=bue(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:s?c:c-d/2,y:o?u:u-f/2,width:s?d:d*2,height:o?f:f*2}))}var gnt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cN=g;function xnt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vnt=typeof Object.is=="function"?Object.is:xnt,ynt=cN.useSyncExternalStore,bnt=cN.useRef,wnt=cN.useEffect,Nnt=cN.useMemo,Cnt=cN.useDebugValue;gnt.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=bnt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Nnt(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),a!==void 0&&o.hasValue){var m=o.value;if(a(m,h))return f=m}return f=h}if(m=f,vnt(d,h))return m;var p=n(h);return a!==void 0&&a(m,p)?(d=h,m):(d=h,f=p)}var u=!1,d,f,A=r===void 0?null:r;return[function(){return c(e())},A===null?void 0:function(){return c(A())}]},[e,r,n,a]);var l=ynt(t,s[0],s[1]);return wnt(function(){o.hasValue=!0,o.value=l},[l]),Cnt(l),l};function _nt(t){t()}function Ent(){let t=null,e=null;return{clear(){t=null,e=null},notify(){_nt(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var Cz={notify(){},get:()=>[]};function Snt(t,e){let r,n=Cz,a=0,s=!1;function o(p){d();const x=n.subscribe(p);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){n.notify()}function c(){m.onStateChange&&m.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=Ent())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Cz)}function A(){s||(s=!0,d())}function h(){s&&(s=!1,f())}const m={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:A,tryUnsubscribe:h,getListeners:()=>n};return m}var Int=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jnt=Int(),Pnt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Bnt=Pnt(),Tnt=()=>jnt||Bnt?g.useLayoutEffect:g.useEffect,knt=Tnt();function _z(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Fnt(t,e){if(_z(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!_z(t[r[a]],e[r[a]]))return!1;return!0}var vB=Symbol.for("react-redux-context"),yB=typeof globalThis<"u"?globalThis:{};function Ont(){if(!g.createContext)return{};const t=yB[vB]??(yB[vB]=new Map);let e=t.get(g.createContext);return e||(e=g.createContext(null),t.set(g.createContext,e)),e}var Dnt=Ont();function Rnt(t){const{children:e,context:r,serverState:n,store:a}=t,s=g.useMemo(()=>{const c=Snt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=g.useMemo(()=>a.getState(),[a]);knt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||Dnt;return g.createElement(l.Provider,{value:s},e)}var Mnt=Rnt,Lnt=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Unt(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function _8(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Lnt.has(n)){if(t[n]==null&&e[n]==null)continue;if(!Fnt(t[n],e[n]))return!1}else if(!Unt(t[n],e[n]))return!1;return!0}function Qg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:hue}function Vg(t,e){var r,n;return(r=(n=t.graphicalItems.cartesianItems.find(a=>a.id===e))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:hue}var Qnt="Invariant failed";function Vnt(t,e){throw new Error(Qnt)}function tO(){return tO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tO.apply(null,arguments)}function LI(t){return g.createElement(lue,tO({shapeType:"rectangle",activeClassName:"recharts-active-bar"},t))}var Hnt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(An(e))return e;var s=An(n)||Jo(n);return s?e(n,a):(s||Vnt(),r)}},$nt=(t,e,r)=>r,Gnt=(t,e)=>e,uN=Wt([MM,Gnt],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Knt=Wt([uN],t=>t==null?void 0:t.maxBarSize),qnt=(t,e,r,n)=>n,znt=Wt([Ca,MM,Qg,Vg,$nt],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Wnt=(t,e,r)=>{var n=Ca(t),a=Qg(t,e),s=Vg(t,e);if(!(a==null||s==null))return n==="horizontal"?zF(t,"yAxis",s,r):zF(t,"xAxis",a,r)},Xnt=(t,e)=>{var r=Ca(t),n=Qg(t,e),a=Vg(t,e);if(!(n==null||a==null))return r==="horizontal"?_q(t,"xAxis",n):_q(t,"yAxis",a)},Ynt=Wt([znt,xXe,Xnt],vrt),Jnt=(t,e,r)=>{var n,a,s=uN(t,e);if(s!=null){var o=Qg(t,e),l=Vg(t,e);if(!(o==null||l==null)){var c=Ca(t),u=jle(t),{maxBarSize:d}=s,f=Jo(d)?u:d,A,h;return c==="horizontal"?(A=zv(t,"xAxis",o,r),h=qv(t,"xAxis",o,r)):(A=zv(t,"yAxis",l,r),h=qv(t,"yAxis",l,r)),(n=(a=hI(A,h,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},wue=(t,e,r)=>{var n=Ca(t),a=Qg(t,e),s=Vg(t,e);if(!(a==null||s==null)){var o,l;return n==="horizontal"?(o=zv(t,"xAxis",a,r),l=qv(t,"xAxis",a,r)):(o=zv(t,"yAxis",s,r),l=qv(t,"yAxis",s,r)),hI(o,l)}},Znt=Wt([Ynt,jle,gXe,Ple,Jnt,wue,Knt],Crt),eat=(t,e,r)=>{var n=Qg(t,e);if(n!=null)return zv(t,"xAxis",n,r)},tat=(t,e,r)=>{var n=Vg(t,e);if(n!=null)return zv(t,"yAxis",n,r)},rat=(t,e,r)=>{var n=Qg(t,e);if(n!=null)return qv(t,"xAxis",n,r)},nat=(t,e,r)=>{var n=Vg(t,e);if(n!=null)return qv(t,"yAxis",n,r)},aat=Wt([Znt,uN],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),sat=Wt([Wnt,uN],_rt),iat=Wt([Io,ZR,eat,tat,rat,nat,aat,Ca,sXe,wue,sat,uN,qnt],(t,e,r,n,a,s,o,l,c,u,d,f,A)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=c;if(!(f==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:x}=f,v;if(x!=null&&x.length>0?v=x:v=h==null?void 0:h.slice(m,p+1),v!=null)return Oat({layout:l,barSettings:f,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:v,offset:t,cells:A,dataStartIndex:m})}}),oat=["index"];function rO(){return rO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rO.apply(null,arguments)}function lat(t,e){if(t==null)return{};var r,n,a=cat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Nue=g.createContext(void 0),uat=t=>{var e=g.useContext(Nue);if(e!=null)return e.stackId;if(t!=null)return iGe(t)},dat=(t,e)=>"recharts-bar-stack-clip-path-".concat(t,"-").concat(e),fat=t=>{var e=g.useContext(Nue);if(e!=null){var{stackId:r}=e;return"url(#".concat(dat(r,t),")")}},hat=t=>{var{index:e}=t,r=lat(t,oat),n=fat(e);return g.createElement(bc,rO({className:"recharts-bar-stack-layer",clipPath:n},r))},Aat=["onMouseEnter","onMouseLeave","onClick"],mat=["value","background","tooltipPosition"],pat=["id"],gat=["onMouseEnter","onClick","onMouseLeave"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(null,arguments)}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){xat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xat(t,e,r){return(e=vat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vat(t){var e=yat(t,"string");return typeof e=="symbol"?e:e+""}function yat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UI(t,e){if(t==null)return{};var r,n,a=bat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function bat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var wat=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:IP(r,e),payload:t}]},Nat=g.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c,id:u}=t,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:IP(s,e),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return g.createElement(cue,{tooltipEntrySettings:d})});function Cat(t){var e=cn(vg),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=UI(s,Aat),d=y8(o,n,s.id),f=b8(l),A=w8(c,n,s.id);if(!a||r==null)return null;var h=V2(a);return g.createElement(Ah,{zIndex:Ert(a,Wl.barBackground)},r.map((m,p)=>{var{value:x,background:v,tooltipPosition:y}=m,b=UI(m,mat);if(!v)return null;var w=d(m,p),j=f(m,p),I=A(m,p),_=mc(mc(mc(mc(mc({option:a,isActive:String(p)===e},b),{},{fill:"#eee"},v),h),Hw(u,m,p)),{},{onMouseEnter:w,onMouseLeave:j,onClick:I,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return g.createElement(LI,NA({key:"background-bar-".concat(p)},_))}))}function _at(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return mc(mc({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return g.createElement(Fet,{value:e?a:void 0},r)}function Eat(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=cn(vg),c=cn(c8),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?g.createElement(Ah,{zIndex:Wl.activeBar},g.createElement(LI,NA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):g.createElement(LI,NA({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function Sat(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return g.createElement(LI,NA({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Iat(t){var e,{data:r,props:n}=t,a=(e=ah(n))!==null&&e!==void 0?e:{},{id:s}=a,o=UI(a,pat),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:A}=n,h=UI(n,gat),m=y8(d,c,s),p=b8(A),x=w8(f,c,s);return r?g.createElement(g.Fragment,null,r.map((v,y)=>g.createElement(hat,NA({index:y,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(y),className:"recharts-bar-rectangle"},Hw(h,v,y),{onMouseEnter:m(v,y),onMouseLeave:p(v,y),onClick:x(v,y)}),u?g.createElement(Eat,{shape:l,activeBar:u,baseProps:o,entry:v,index:y,dataKey:c}):g.createElement(Sat,{shape:l,baseProps:o,entry:v,index:y,dataKey:c})))):null}function jat(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,f=r.current,A=UP(e,"recharts-bar-"),[h,m]=g.useState(!1),p=!h,x=g.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=g.useCallback(()=>{typeof d=="function"&&d(),m(!0)},[d]);return g.createElement(_at,{showLabels:p,rects:n},g.createElement(LP,{animationId:A,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:v,key:A},y=>{var b=y===1?n:n==null?void 0:n.map((w,j)=>{var I=f&&f[j];if(I)return mc(mc({},w),{},{x:go(I.x,w.x,y),y:go(I.y,w.y,y),width:go(I.width,w.width,y),height:go(I.height,w.height,y)});if(a==="horizontal"){var _=go(0,w.height,y),S=go(w.stackedBarStart,w.y,y);return mc(mc({},w),{},{y:S,height:_})}var E=go(0,w.width,y),F=go(w.stackedBarStart,w.x,y);return mc(mc({},w),{},{width:E,x:F})});return y>0&&(r.current=b??null),b==null?null:g.createElement(bc,null,g.createElement(Iat,{props:e,data:b}))}),g.createElement(eue,{label:e.label}),e.children)}function Pat(t){var e=g.useRef(null);return g.createElement(jat,{previousRectanglesRef:e,props:t})}var Cue=0,Bat=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:js(t,e)}};class Tat extends g.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=Xa("recharts-bar",a),f=u;return g.createElement(bc,{className:d,id:u},l&&g.createElement("defs",null,g.createElement(pnt,{clipPathId:f,xAxisId:s,yAxisId:o})),g.createElement(bc,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},g.createElement(Cat,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),g.createElement(Pat,this.props)))}}var kat={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Cue,xAxisId:0,yAxisId:0,zIndex:Wl.bar};function Fat(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:f}=bue(e,r),A=qw(),h=Ru(),m=v8(t.children,lN),p=cn(y=>iat(y,t.id,h,m));if(A!=="vertical"&&A!=="horizontal")return null;var x,v=p==null?void 0:p[0];return v==null||v.height==null||v.width==null?x=0:x=A==="vertical"?v.height/2:v.width/2,g.createElement(mnt,{xAxisId:e,yAxisId:r,data:p,dataPointFormatter:Bat,errorBarOffset:x},g.createElement(Tat,NA({},t,{layout:A,needClip:f,data:p,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Oat(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:A,cells:h,parentViewBox:m,dataStartIndex:p}=t,x=e==="horizontal"?l:o,v=d?x.scale.domain():null,y=oGe({numericAxis:x}),b=x.scale(y);return f.map((w,j)=>{var I,_,S,E,F,k;if(d){var B=d[j+p];if(B==null)return null;I=tGe(B,v)}else I=js(w,r),Array.isArray(I)||(I=[y,I]);var D=Hnt(n,Cue)(I[1],j);if(e==="horizontal"){var X,[he,Ae]=[l.scale(I[0]),l.scale(I[1])];_=OG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:w,index:j}),S=(X=Ae??he)!==null&&X!==void 0?X:void 0,E=a.size;var fe=he-Ae;if(F=sh(fe)?0:fe,k={x:_,y:A.top,width:E,height:A.height},Math.abs(D)>0&&Math.abs(F)<Math.abs(D)){var me=Nl(F||D)*(Math.abs(D)-Math.abs(F));S-=me,F+=me}}else{var[ne,Pe]=[o.scale(I[0]),o.scale(I[1])];if(_=ne,S=OG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:w,index:j}),E=Pe-ne,F=a.size,k={x:A.left,y:S,width:A.width,height:F},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var Te=Nl(E||D)*(Math.abs(D)-Math.abs(E));E+=Te}}if(_==null||S==null||E==null||F==null)return null;var O=mc(mc({},w),{},{stackedBarStart:b,x:_,y:S,width:E,height:F,value:d?I:I[1],payload:w,background:k,tooltipPosition:{x:_+E/2,y:S+F/2},parentViewBox:m},h&&h[j]&&h[j].props);return O}).filter(Boolean)}function Dat(t){var e=El(t,kat),r=uat(e.stackId),n=Ru();return g.createElement(uue,{id:e.id,type:"bar"},a=>g.createElement(g.Fragment,null,g.createElement(xtt,{legendPayload:wat(e)}),g.createElement(Nat,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:a}),g.createElement(Ttt,{type:"bar",id:a,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:r,hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),g.createElement(Ah,{zIndex:e.zIndex},g.createElement(Fat,NA({},e,{id:a})))))}var nO=g.memo(Dat,_8);nO.displayName="Bar";var Rat=["domain","range"],Mat=["domain","range"];function Sz(t,e){if(t==null)return{};var r,n,a=Lat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Lat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Iz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function _ue(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=Sz(t,Rat),{domain:s,range:o}=e,l=Sz(e,Mat);return!Iz(r,s)||!Iz(n,o)?!1:_8(a,l)}var Uat=["dangerouslySetInnerHTML","ticks","scale"],Qat=["id","scale"];function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aO.apply(null,arguments)}function jz(t,e){if(t==null)return{};var r,n,a=Vat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Vat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Hat(t){var e=xs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(crt(t)):r.current!==t&&e(urt({prev:r.current,next:t})),r.current=t},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(e(drt(r.current)),r.current=null)},[e]),null}var $at=t=>{var{xAxisId:e,className:r}=t,n=cn(ZR),a=Ru(),s="xAxis",o=cn(v=>lce(v,s,e,a)),l=cn(v=>ace(v,e)),c=cn(v=>mYe(v,e)),u=cn(v=>Lle(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f,scale:A}=t,h=jz(t,Uat),{id:m,scale:p}=u,x=jz(u,Qat);return g.createElement(C8,aO({},h,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:Xa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o,axisType:s}))},Gat={allowDataOverflow:Ro.allowDataOverflow,allowDecimals:Ro.allowDecimals,allowDuplicatedCategory:Ro.allowDuplicatedCategory,angle:Ro.angle,axisLine:Hp.axisLine,height:Ro.height,hide:!1,includeHidden:Ro.includeHidden,interval:Ro.interval,minTickGap:Ro.minTickGap,mirror:Ro.mirror,orientation:Ro.orientation,padding:Ro.padding,reversed:Ro.reversed,scale:Ro.scale,tick:Ro.tick,tickCount:Ro.tickCount,tickLine:Hp.tickLine,tickSize:Hp.tickSize,type:Ro.type,xAxisId:0},Kat=t=>{var e=El(t,Gat);return g.createElement(g.Fragment,null,g.createElement(Hat,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),g.createElement($at,e))},Eue=g.memo(Kat,_ue);Eue.displayName="XAxis";var qat=["dangerouslySetInnerHTML","ticks","scale"],zat=["id","scale"];function sO(){return sO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sO.apply(null,arguments)}function Pz(t,e){if(t==null)return{};var r,n,a=Wat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Wat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Xat(t){var e=xs(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?e(frt(t)):r.current!==t&&e(hrt({prev:r.current,next:t})),r.current=t},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(e(Art(r.current)),r.current=null)},[e]),null}var Yat=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=g.useRef(null),o=g.useRef(null),l=cn(ZR),c=Ru(),u=xs(),d="yAxis",f=cn(I=>sce(I,e)),A=cn(I=>gYe(I,e)),h=cn(I=>lce(I,d,e,c)),m=cn(I=>Ule(I,e));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!f||A8(a)||g.isValidElement(a)||m==null)){var I=s.current;if(I){var _=I.getCalculatedWidth();Math.round(f.width)!==Math.round(_)&&u(mrt({id:e,width:_}))}}},[h,f,u,a,e,n,m]),f==null||A==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:x,scale:v}=t,y=Pz(t,qat),{id:b,scale:w}=m,j=Pz(m,zat);return g.createElement(C8,sO({},y,j,{ref:s,labelRef:o,x:A.x,y:A.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:Xa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:h,axisType:d}))},Jat={allowDataOverflow:Mo.allowDataOverflow,allowDecimals:Mo.allowDecimals,allowDuplicatedCategory:Mo.allowDuplicatedCategory,angle:Mo.angle,axisLine:Hp.axisLine,hide:!1,includeHidden:Mo.includeHidden,interval:Mo.interval,minTickGap:Mo.minTickGap,mirror:Mo.mirror,orientation:Mo.orientation,padding:Mo.padding,reversed:Mo.reversed,scale:Mo.scale,tick:Mo.tick,tickCount:Mo.tickCount,tickLine:Hp.tickLine,tickSize:Hp.tickSize,type:Mo.type,width:Mo.width,yAxisId:0},Zat=t=>{var e=El(t,Jat);return g.createElement(g.Fragment,null,g.createElement(Xat,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),g.createElement(Yat,e))},Sue=g.memo(Zat,_ue);Sue.displayName="YAxis";var est=(t,e)=>e,E8=Wt([est,Ca,Rle,Po,Cce,UA,TJe,Io],LJe),S8=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Iue=Sd("mouseClick"),jue=Gw();jue.startListening({actionCreator:Iue,effect:(t,e)=>{var r=t.payload,n=E8(e.getState(),S8(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(BYe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var iO=Sd("mouseMove"),Pue=Gw(),w_=null;Pue.startListening({actionCreator:iO,effect:(t,e)=>{var r=t.payload;w_!==null&&cancelAnimationFrame(w_);var n=S8(r);w_=requestAnimationFrame(()=>{var a=e.getState(),s=n8(a,a.tooltip.settings.shared);if(s==="axis"){var o=E8(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(pce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(mce())}w_=null})}});function tst(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Bz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Bue=tu({name:"rootProps",initialState:Bz,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Bz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),rst=Bue.reducer,{updateOptions:nst}=Bue.actions,Tue=tu({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:ast}=Tue.actions,sst=Tue.reducer,kue=Sd("keyDown"),Fue=Sd("focus"),I8=Gw();I8.startListening({actionCreator:kue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=a8(a,I1(r),nN(r),iN(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=UA(r);if(s==="Enter"){var u=OI(r,"axis","hover",String(a.index));e.dispatch(XF({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=bYe(r),f=d==="left-to-right"?1:-1,A=s==="ArrowRight"?1:-1,h=l+A*f;if(!(c==null||h>=c.length||h<0)){var m=OI(r,"axis","hover",String(h));e.dispatch(XF({active:!0,activeIndex:h.toString(),activeCoordinate:m}))}}}}}});I8.startListening({actionCreator:Fue,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=OI(r,"axis","hover",String(s));e.dispatch(XF({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var rd=Sd("externalEvent"),Oue=Gw(),bB=new Map;Oue.startListening({actionCreator:rd,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=bB.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:gJe(l),activeDataKey:c8(l),activeIndex:vg(l),activeLabel:Sce(l),activeTooltipIndex:vg(l),isTooltipActive:xJe(l)};r(c,n)}finally{bB.delete(a)}});bB.set(a,o)}}});var ist=Wt([E1],t=>t.tooltipItemPayloads),ost=Wt([ist,sN,(t,e)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Due=Sd("touchMove"),Rue=Gw();Rue.startListening({actionCreator:Due,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=n8(n,n.tooltip.settings.shared);if(a==="axis"){var s=r.touches[0];if(s==null)return;var o=E8(n,S8({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(pce({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(eoe),f=(l=u.getAttribute(toe))!==null&&l!==void 0?l:void 0,A=S1(n).find(p=>p.id===f);if(d==null||A==null||f==null)return;var{dataKey:h}=A,m=ost(n,d,f);e.dispatch(Ace({activeDataKey:h,activeIndex:d,activeCoordinate:m,activeGraphicalItemId:f}))}}}});var lst=Cie({brush:Srt,cartesianAxis:prt,chartData:mZe,errorBars:cnt,graphicalItems:Ptt,layout:W$e,legend:eKe,options:uZe,polarAxis:Get,polarOptions:sst,referenceElements:Frt,rootProps:rst,tooltip:TYe,zIndex:ZJe}),cst=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return y$e({reducer:lst,preloadedState:e,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([jue.middleware,Pue.middleware,I8.middleware,Oue.middleware,Rue.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(Lie({type:"raf"}))},devTools:{serialize:{replacer:tst},name:"recharts-".concat(r)}})};function Mue(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Ru(),s=g.useRef(null);if(a)return r;s.current==null&&(s.current=cst(e,n));var o=$R;return g.createElement(Mnt,{context:o,store:s.current},r)}function ust(t){var{layout:e,margin:r}=t,n=xs(),a=Ru();return g.useEffect(()=>{a||(n(K$e(e)),n(G$e(r)))},[n,a,e,r]),null}var Lue=g.memo(ust,_8);function Uue(t){var e=xs();return g.useEffect(()=>{e(nst(t))},[e,t]),null}function Tz(t){var{zIndex:e,isPanorama:r}=t,n=g.useRef(null),a=xs();return g.useLayoutEffect(()=>(n.current&&a(YJe({zIndex:e,element:n.current,isPanorama:r})),()=>{a(JJe({zIndex:e,isPanorama:r}))}),[a,e,r]),g.createElement("g",{tabIndex:-1,ref:n})}function kz(t){var{children:e,isPanorama:r}=t,n=cn(QJe);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return g.createElement(g.Fragment,null,a.map(o=>g.createElement(Tz,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>g.createElement(Tz,{key:o,zIndex:o,isPanorama:r})))}var dst=["children"];function fst(t,e){if(t==null)return{};var r,n,a=hst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function hst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function QI(){return QI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QI.apply(null,arguments)}var Ast={width:"100%",height:"100%",display:"block"},mst=g.forwardRef((t,e)=>{var r=coe(),n=uoe(),a=boe();if(!Em(r)||!Em(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),g.createElement(jR,QI({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Ast,ref:e}),s)}),pst=t=>{var{children:e}=t,r=cn(TP);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return g.createElement(jR,{width:n,height:a,x:o,y:s},e)},Fz=g.forwardRef((t,e)=>{var{children:r}=t,n=fst(t,dst),a=Ru();return a?g.createElement(pst,null,g.createElement(kz,{isPanorama:!0},r)):g.createElement(mst,QI({ref:e},n),g.createElement(kz,{isPanorama:!1},r))});function gst(){var t=xs(),[e,r]=g.useState(null),n=cn(hGe);return g.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;ci(s)&&s!==n&&t(z$e(s))}},[e,t,n]),r}function Oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xst(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(r),!0).forEach(function(n){vst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vst(t,e,r){return(e=yst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yst(t){var e=bst(t,"string");return typeof e=="symbol"?e:e+""}function bst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bg(){return bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bg.apply(null,arguments)}var wst=()=>(CZe(),null);function VI(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Nst=g.forwardRef((t,e)=>{var r,n,a=g.useRef(null),[s,o]=g.useState({containerWidth:VI((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:VI((n=t.style)===null||n===void 0?void 0:n.height)}),l=g.useCallback((u,d)=>{o(f=>{var A=Math.round(u),h=Math.round(d);return f.containerWidth===A&&f.containerHeight===h?f:{containerWidth:A,containerHeight:h}})},[]),c=g.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var A=m=>{var{width:p,height:x}=m[0].contentRect;l(p,x)},h=new ResizeObserver(A);h.observe(u),a.current=h}},[e,l]);return g.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),g.createElement(g.Fragment,null,g.createElement(FP,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",bg({ref:c},t)))}),Cst=g.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=g.useState({containerWidth:VI(r),containerHeight:VI(n)}),o=g.useCallback((c,u)=>{s(d=>{var f=Math.round(c),A=Math.round(u);return d.containerWidth===f&&d.containerHeight===A?d:{containerWidth:f,containerHeight:A}})},[]),l=g.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return g.createElement(g.Fragment,null,g.createElement(FP,{width:a.containerWidth,height:a.containerHeight}),g.createElement("div",bg({ref:l},t)))}),_st=g.forwardRef((t,e)=>{var{width:r,height:n}=t;return g.createElement(g.Fragment,null,g.createElement(FP,{width:r,height:n}),g.createElement("div",bg({ref:e},t)))}),Est=g.forwardRef((t,e)=>{var{width:r,height:n}=t;return gA(r)||gA(n)?g.createElement(Cst,bg({},t,{ref:e})):g.createElement(_st,bg({},t,{ref:e}))});function Sst(t){return t===!0?Nst:Est}var Ist=g.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:A,onTouchEnd:h,onTouchMove:m,onTouchStart:p,style:x,width:v,responsive:y,dispatchTouchEvents:b=!0}=t,w=g.useRef(null),j=xs(),[I,_]=g.useState(null),[S,E]=g.useState(null),F=gst(),k=eM(),B=(k==null?void 0:k.width)>0?k.width:v,D=(k==null?void 0:k.height)>0?k.height:a,X=g.useCallback(H=>{F(H),typeof e=="function"&&e(H),_(H),E(H),H!=null&&(w.current=H)},[F,e,_,E]),he=g.useCallback(H=>{j(Iue(H)),j(rd({handler:s,reactEvent:H}))},[j,s]),Ae=g.useCallback(H=>{j(iO(H)),j(rd({handler:u,reactEvent:H}))},[j,u]),fe=g.useCallback(H=>{j(mce()),j(rd({handler:d,reactEvent:H}))},[j,d]),me=g.useCallback(H=>{j(iO(H)),j(rd({handler:f,reactEvent:H}))},[j,f]),ne=g.useCallback(()=>{j(Fue())},[j]),Pe=g.useCallback(H=>{j(kue(H.key))},[j]),Te=g.useCallback(H=>{j(rd({handler:o,reactEvent:H}))},[j,o]),O=g.useCallback(H=>{j(rd({handler:l,reactEvent:H}))},[j,l]),K=g.useCallback(H=>{j(rd({handler:c,reactEvent:H}))},[j,c]),q=g.useCallback(H=>{j(rd({handler:A,reactEvent:H}))},[j,A]),U=g.useCallback(H=>{j(rd({handler:p,reactEvent:H}))},[j,p]),W=g.useCallback(H=>{b&&j(Due(H)),j(rd({handler:m,reactEvent:H}))},[j,b,m]),J=g.useCallback(H=>{j(rd({handler:h,reactEvent:H}))},[j,h]),M=Sst(y);return g.createElement(Fce.Provider,{value:I},g.createElement(_se.Provider,{value:S},g.createElement(M,{width:B??(x==null?void 0:x.width),height:D??(x==null?void 0:x.height),className:Xa("recharts-wrapper",n),style:xst({position:"relative",cursor:"default",width:B,height:D},x),onClick:he,onContextMenu:Te,onDoubleClick:O,onFocus:ne,onKeyDown:Pe,onMouseDown:K,onMouseEnter:Ae,onMouseLeave:fe,onMouseMove:me,onMouseUp:q,onTouchEnd:J,onTouchMove:W,onTouchStart:U,ref:X},g.createElement(wst,null),r)))}),jst=["width","height","responsive","children","className","style","compact","title","desc"];function Pst(t,e){if(t==null)return{};var r,n,a=Bst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Bst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Que=g.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,f=Pst(t,jst),A=ah(f);return c?g.createElement(g.Fragment,null,g.createElement(FP,{width:r,height:n}),g.createElement(Fz,{otherAttributes:A,title:u,desc:d},s)):g.createElement(Ist,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},g.createElement(Fz,{otherAttributes:A,title:u,desc:d,ref:e},g.createElement(Drt,null,s)))});function oO(){return oO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oO.apply(null,arguments)}var Tst={top:5,right:5,bottom:5,left:5},kst={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Tst,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Fst=g.forwardRef(function(e,r){var n,a=El(e.categoricalChartProps,kst),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return g.createElement(Mue,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},g.createElement(pue,{chartData:u.data}),g.createElement(Lue,{layout:a.layout,margin:a.margin}),g.createElement(Uue,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),g.createElement(Que,oO({},a,{ref:r})))}),Ost=["axis","item"],Dst=g.forwardRef((t,e)=>g.createElement(Fst,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ost,tooltipPayloadSearcher:Dce,categoricalChartProps:t,ref:e}));function Rst(t){var e=xs();return g.useEffect(()=>{e(ast(t))},[e,t]),null}var Mst=["layout"];function lO(){return lO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lO.apply(null,arguments)}function Lst(t,e){if(t==null)return{};var r,n,a=Ust(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Ust(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Qst={top:5,right:5,bottom:5,left:5},Vue={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Qst,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Vst=g.forwardRef(function(e,r){var n,a=El(e.categoricalChartProps,Vue),{layout:s}=a,o=Lst(a,Mst),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return g.createElement(Mue,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},g.createElement(pue,{chartData:a.data}),g.createElement(Lue,{layout:s,margin:a.margin}),g.createElement(Uue,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),g.createElement(Rst,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),g.createElement(Que,lO({},o,{ref:r})))});function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){Hst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hst(t,e,r){return(e=$st(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $st(t){var e=Gst(t,"string");return typeof e=="symbol"?e:e+""}function Gst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kst=["item"],qst=Rz(Rz({},Vue),{},{layout:"centric",startAngle:0,endAngle:360}),zst=g.forwardRef((t,e)=>{var r=El(t,qst);return g.createElement(Vst,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Kst,tooltipPayloadSearcher:Dce,categoricalChartProps:r,ref:e})});const Wst="sellers_candies",N_="cash_deliveries_candies";function Ia(t){const e=typeof t=="number"?t:parseFloat(String(t??"").replace(/,/g,""));return Number.isFinite(e)?e:0}function ji(t){return Number.isFinite(t)?t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}function C_(t,e){return t*e/100}function __(t,e,r){return t-e-r}function Mz(t){return t?Br(t.toDate(),"yyyy-MM-dd"):""}function E_(t){if(!t)return xr.fromDate(new Date);const[e,r,n]=t.split("-").map(s=>parseInt(s,10)),a=new Date(e,(r||1)-1,n||1,0,0,0,0);return xr.fromDate(a)}function Xst(){const t=new Date,[e,r]=g.useState(Br(Pd(t),"yyyy-MM-dd")),[n,a]=g.useState(Br(jd(t),"yyyy-MM-dd")),[s,o]=g.useState([]),l=g.useMemo(()=>{const M=new Map;return s.forEach(H=>M.set(H.id,H)),M},[s]),[c,u]=g.useState([]),[d,f]=g.useState(!0),[A,h]=g.useState(()=>Br(new Date,"yyyy-MM-dd")),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState("0"),[w,j]=g.useState(""),[I,_]=g.useState(null),[S,E]=g.useState({}),F=g.useRef(null);g.useEffect(()=>{const M=ar(yt(ke,Wst),wn("name","asc")),H=vd(M,te=>{const ve=te.docs.map(Q=>{const Ke=Q.data();return{id:Q.id,name:String((Ke==null?void 0:Ke.name)??""),branch:Ke!=null&&Ke.branch?String(Ke.branch):"",commissionPercent:Ia((Ke==null?void 0:Ke.commissionPercent)??0)}});o(ve)},()=>o([]));return()=>H()},[]),g.useEffect(()=>{f(!0);const M=E_(e),H=new Date(E_(n).toDate().getTime());H.setDate(H.getDate()+1);const te=xr.fromDate(H),ve=ar(yt(ke,N_),mr("date",">=",M),mr("date","<",te),wn("date","desc")),Q=vd(ve,Ke=>{const ae=Ke.docs.map(ee=>{const Fe=ee.data();return{id:ee.id,date:Fe==null?void 0:Fe.date,sellerId:String((Fe==null?void 0:Fe.sellerId)??""),sellerName:String((Fe==null?void 0:Fe.sellerName)??""),amountDelivered:Ia(Fe==null?void 0:Fe.amountDelivered),commissionPercent:Ia(Fe==null?void 0:Fe.commissionPercent),commissionPaid:Ia(Fe==null?void 0:Fe.commissionPaid),extraExpenses:Ia(Fe==null?void 0:Fe.extraExpenses),totalFinal:Ia(Fe==null?void 0:Fe.totalFinal),comment:String((Fe==null?void 0:Fe.comment)??""),createdAt:Fe==null?void 0:Fe.createdAt,updatedAt:Fe==null?void 0:Fe.updatedAt}});u(ae),f(!1)},Ke=>{console.error("Firestore deliveries query error:",Ke),u([]),f(!1),alert("Firestore query fall. Revis consola (probable ndice).")});return()=>Q()},[e,n]);const k=g.useMemo(()=>m?l.get(m):void 0,[m,l]),B=Ia((k==null?void 0:k.commissionPercent)??0),D=Ia(x),X=Ia(y),he=C_(D,B),Ae=__(D,he,X),fe=g.useMemo(()=>{var H;const M=new Map;for(const te of c){const ve=te.sellerId||te.sellerName||"UNKNOWN",Q=M.get(ve)??{sellerId:te.sellerId,sellerName:te.sellerName||((H=l.get(te.sellerId))==null?void 0:H.name)||"Sin nombre",delivered:0,commission:0,totalFinal:0};Q.delivered+=Ia(te.amountDelivered),Q.commission+=Ia(te.commissionPaid),Q.totalFinal+=Ia(te.totalFinal),M.set(ve,Q)}return Array.from(M.values()).sort((te,ve)=>te.sellerName.localeCompare(ve.sellerName))},[c,l]),me=g.useMemo(()=>{let M=0,H=0,te=0,ve=0;for(const Q of c)M+=Ia(Q.amountDelivered),H+=Ia(Q.commissionPaid),te+=Ia(Q.extraExpenses),ve+=Ia(Q.totalFinal);return{delivered:M,commission:H,expenses:te,totalFinal:ve}},[c]),ne=g.useMemo(()=>fe.map(M=>({name:M.sellerName,Entregado:Number(M.delivered.toFixed(2)),Comision:Number(M.commission.toFixed(2))})),[fe]),Pe=g.useMemo(()=>[{name:"Total Entregado (Bruto)",value:Number(me.delivered.toFixed(2))},{name:"Total Comisin",value:Number(me.commission.toFixed(2))},{name:"Total Gastos",value:Number(me.expenses.toFixed(2))}].filter(M=>M.value>0),[me]),Te=["#3B82F6","#F59E0B","#EF4444"];async function O(){if(!m)return alert("Seleccion un vendedor.");if(D<=0)return alert("Ingres un Monto entregado vlido (> 0).");const M=l.get(m),H=(M==null?void 0:M.name)??"Sin nombre",te=Ia((M==null?void 0:M.commissionPercent)??0),ve=C_(D,te),Q=__(D,ve,X);await $n(yt(ke,N_),{date:E_(A),sellerId:m,sellerName:H,amountDelivered:D,commissionPercent:te,commissionPaid:ve,extraExpenses:X,totalFinal:Q,comment:w??"",createdAt:xr.now()}),v(""),b("0"),j("")}function K(M){_(M.id),E({...M,dateInput:Mz(M.date)})}function q(){_(null),E({})}async function U(M){const H=S,te=String(H.sellerId??""),ve=l.get(te),Q=String(H.sellerName??(ve==null?void 0:ve.name)??"Sin nombre"),Ke=Ia(H.amountDelivered),ae=Ia(H.extraExpenses),ee=Ia(H.commissionPercent??(ve==null?void 0:ve.commissionPercent)??0),Fe=C_(Ke,ee),ce=__(Ke,Fe,ae),be=E_(String(H.dateInput??Mz(H.date)));await _n(Jt(ke,N_,M),{date:be,sellerId:te,sellerName:Q,amountDelivered:Ke,commissionPercent:ee,commissionPaid:Fe,extraExpenses:ae,totalFinal:ce,comment:String(H.comment??""),updatedAt:xr.now()}),q()}async function W(M){confirm("Eliminar este registro?")&&await Mn(Jt(ke,N_,M))}async function J(){if(!F.current)return;const M=await jg(F.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",scrollX:0,scrollY:-window.scrollY}),H=M.toDataURL("image/png"),te=new qr("p","mm","a4"),ve=te.internal.pageSize.getWidth(),Q=te.internal.pageSize.getHeight(),Ke=ve,ae=M.height*Ke/M.width;let ee=ae,Fe=0;for(te.addImage(H,"PNG",0,Fe,Ke,ae),ee-=Q;ee>0;)te.addPage(),Fe=-(ae-ee),te.addImage(H,"PNG",0,Fe,Ke,ae),ee-=Q;te.save(`Entregas_Dulces_${e}_a_${n}.pdf`)}return i.jsxs("div",{className:"p-3 md:p-6 max-w-7xl mx-auto space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg md:text-2xl font-black text-gray-900",children:"Control Contable - Entregas de Vendedores (Dulces)"}),i.jsxs("p",{className:"text-xs md:text-sm text-gray-600",children:["Periodo: ",i.jsx("span",{className:"font-bold",children:e})," "," ",i.jsx("span",{className:"font-bold",children:n})]})]}),i.jsx("button",{onClick:J,className:"h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Exportar a PDF"})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Filtros de periodo"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Desde"}),i.jsx("input",{type:"date",value:e,onChange:M=>r(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Hasta"}),i.jsx("input",{type:"date",value:n,onChange:M=>a(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]})]}),i.jsxs("div",{ref:F,className:"space-y-3 md:space-y-4",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"KPIs Consolidados"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Entradas (Neto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ji(me.totalFinal)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Entregado - Comisin - Gastos"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Comisiones"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ji(me.commission)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de comisin pagada"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"KPI Gastos extras"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ji(me.expenses)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Suma de gastos registrados"})]}),i.jsxs("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:[i.jsx("div",{className:"text-xs font-extrabold text-gray-600",children:"Total entregado (Bruto)"}),i.jsxs("div",{className:"text-xl font-black text-gray-900 mt-1",children:["$ ",ji(me.delivered)]}),i.jsx("div",{className:"text-[11px] text-gray-500 mt-1",children:"Sin restar nada"})]})]}),i.jsx("div",{className:"font-black text-sm text-gray-900 mt-4 mb-2",children:"KPI Vendedores (sumatoria del periodo)"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-[520px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"})]})}),i.jsx("tbody",{children:fe.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-2 text-gray-500",colSpan:4,children:"Sin datos en el periodo seleccionado."})}):fe.map(M=>i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ji(M.delivered)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ji(M.commission)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ji(M.totalFinal)]})]},M.sellerId||M.sellerName))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Entregas y Comisin por vendedor (Barras)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(HG,{children:i.jsxs(Dst,{data:ne,children:[i.jsx(Eue,{dataKey:"name",interval:0,angle:-12,height:70}),i.jsx(Sue,{}),i.jsx(Qq,{}),i.jsx(TF,{}),i.jsx(nO,{dataKey:"Entregado"}),i.jsx(nO,{dataKey:"Comision"})]})})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Distribucin (Pastel)"}),i.jsx("div",{className:"w-full h-[320px]",children:i.jsx(HG,{children:i.jsxs(zst,{children:[i.jsx(fue,{data:Pe,dataKey:"value",nameKey:"name",outerRadius:110,label:!0,children:Pe.map((M,H)=>i.jsx(lN,{fill:Te[H%Te.length]},H))}),i.jsx(Qq,{}),i.jsx(TF,{})]})})})]})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Agregar movimiento"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:A,onChange:M=>h(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:m,onChange:M=>p(M.target.value),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10 bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",inputMode:"decimal",value:x,onChange:M=>v(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin configurada"}),i.jsx("input",{value:`${B}%`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin pagada"}),i.jsx("input",{value:`$ ${ji(he)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-800"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",inputMode:"decimal",value:y,onChange:M=>b(M.target.value),placeholder:"0.00",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Total final"}),i.jsx("input",{value:`$ ${ji(Ae)}`,readOnly:!0,className:"w-full h-10 rounded-xl border border-gray-200 px-3 bg-gray-50 text-gray-900 font-extrabold"})]}),i.jsxs("label",{className:"space-y-1 md:col-span-2",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{value:w,onChange:M=>j(M.target.value),placeholder:"Opcional...",className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none focus:ring-2 focus:ring-gray-900/10"})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{onClick:O,className:"w-full md:w-auto h-10 px-4 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800 active:scale-[0.99] transition",children:"Guardar movimiento"})})]}),i.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm p-3 md:p-4",children:[i.jsx("div",{className:"font-black text-sm text-gray-900 mb-3",children:"Registro detallado"}),d?i.jsx("div",{className:"text-sm text-gray-500",children:"Cargando..."}):c.length===0?i.jsx("div",{className:"text-sm text-gray-500",children:"No hay registros en el periodo."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1100px] w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 text-gray-700",children:[i.jsx("th",{className:"text-left p-2 font-black",children:"Fecha"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Vendedor"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Monto entregado"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin %"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Comisin pagada"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Gastos"}),i.jsx("th",{className:"text-right p-2 font-black",children:"Total final"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Comentario"}),i.jsx("th",{className:"text-left p-2 font-black",children:"Acciones"})]})}),i.jsx("tbody",{children:c.map(M=>{if(!(I===M.id))return i.jsxs("tr",{className:"border-t",children:[i.jsx("td",{className:"p-2",children:Br(M.date.toDate(),"yyyy-MM-dd")}),i.jsx("td",{className:"p-2 font-semibold",children:M.sellerName}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ji(M.amountDelivered)]}),i.jsxs("td",{className:"p-2 text-right",children:[ji(M.commissionPercent),"%"]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ji(M.commissionPaid)]}),i.jsxs("td",{className:"p-2 text-right",children:["$ ",ji(M.extraExpenses)]}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ji(M.totalFinal)]}),i.jsx("td",{className:"p-2",children:M.comment}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>K(M),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>W(M.id),className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})})]},M.id);const te=Ia(S.amountDelivered??M.amountDelivered),ve=Ia(S.commissionPercent??M.commissionPercent),Q=Ia(S.extraExpenses??M.extraExpenses),Ke=C_(te,ve),ae=__(te,Ke,Q);return i.jsxs("tr",{className:"border-t bg-yellow-50/40",children:[i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:ee=>E(Fe=>({...Fe,dateInput:ee.target.value})),className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("select",{value:String(S.sellerId??M.sellerId),onChange:ee=>{const Fe=ee.target.value,ce=l.get(Fe);E(be=>({...be,sellerId:Fe,sellerName:(ce==null?void 0:ce.name)??"",commissionPercent:Ia((ce==null?void 0:ce.commissionPercent)??0)}))},className:"h-9 px-3 rounded-xl border border-gray-200 bg-white outline-none",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(ee=>i.jsxs("option",{value:ee.id,children:[ee.name," ",ee.branch?`(${ee.branch})`:""]},ee.id))]})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(te),onChange:ee=>E(Fe=>({...Fe,amountDelivered:Ia(ee.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(ve),onChange:ee=>E(Fe=>({...Fe,commissionPercent:Ia(ee.target.value)})),className:"h-9 w-24 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-semibold",children:["$ ",ji(Ke)]}),i.jsx("td",{className:"p-2 text-right",children:i.jsx("input",{type:"number",value:String(Q),onChange:ee=>E(Fe=>({...Fe,extraExpenses:Ia(ee.target.value)})),className:"h-9 w-32 text-right px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsxs("td",{className:"p-2 text-right font-extrabold",children:["$ ",ji(ae)]}),i.jsx("td",{className:"p-2",children:i.jsx("input",{type:"text",value:String(S.comment??M.comment),onChange:ee=>E(Fe=>({...Fe,comment:ee.target.value})),className:"h-9 w-full px-3 rounded-xl border border-gray-200 bg-white outline-none"})}),i.jsx("td",{className:"p-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(M.id),className:"h-8 px-3 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:q,className:"h-8 px-3 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})})]},M.id)})})]})}),i.jsxs("div",{className:"md:hidden space-y-3",children:[c.map(M=>i.jsxs("div",{className:"rounded-2xl border border-gray-100 p-3 bg-white",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"font-black text-gray-900",children:M.sellerName}),i.jsx("div",{className:"text-xs font-extrabold bg-gray-100 rounded-full px-3 py-1",children:Br(M.date.toDate(),"yyyy-MM-dd")})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Monto entregado"}),i.jsxs("div",{className:"font-extrabold",children:["$ ",ji(M.amountDelivered)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin %"}),i.jsxs("div",{className:"font-semibold",children:[ji(M.commissionPercent),"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comisin pagada"}),i.jsxs("div",{className:"font-semibold",children:["$ ",ji(M.commissionPaid)]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Gastos"}),i.jsxs("div",{className:"font-semibold",children:["$ ",ji(M.extraExpenses)]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Total final"}),i.jsxs("div",{className:"text-base font-black",children:["$ ",ji(M.totalFinal)]})]}),M.comment?i.jsxs("div",{className:"col-span-2",children:[i.jsx("div",{className:"text-[11px] font-bold text-gray-500",children:"Comentario"}),i.jsx("div",{className:"text-sm text-gray-800",children:M.comment})]}):null]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("button",{onClick:()=>K(M),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Editar"}),i.jsx("button",{onClick:()=>W(M.id),className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold text-red-700 hover:bg-red-50",children:"Eliminar"})]})]},M.id)),I?i.jsxs("div",{className:"rounded-2xl border border-yellow-200 bg-yellow-50 p-3",children:[i.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Editando registro"}),i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Fecha"}),i.jsx("input",{type:"date",value:String(S.dateInput??""),onChange:M=>E(H=>({...H,dateInput:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Vendedor"}),i.jsxs("select",{value:String(S.sellerId??""),onChange:M=>{const H=M.target.value,te=l.get(H);E(ve=>({...ve,sellerId:H,sellerName:(te==null?void 0:te.name)??"",commissionPercent:Ia((te==null?void 0:te.commissionPercent)??0)}))},className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),s.map(M=>i.jsxs("option",{value:M.id,children:[M.name," ",M.branch?`(${M.branch})`:""]},M.id))]})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Monto entregado"}),i.jsx("input",{type:"number",value:String(S.amountDelivered??""),onChange:M=>E(H=>({...H,amountDelivered:Ia(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Gastos extras"}),i.jsx("input",{type:"number",value:String(S.extraExpenses??""),onChange:M=>E(H=>({...H,extraExpenses:Ia(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comisin %"}),i.jsx("input",{type:"number",value:String(S.commissionPercent??""),onChange:M=>E(H=>({...H,commissionPercent:Ia(M.target.value)})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("label",{className:"space-y-1",children:[i.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Comentario"}),i.jsx("input",{type:"text",value:String(S.comment??""),onChange:M=>E(H=>({...H,comment:M.target.value})),className:"w-full h-10 rounded-xl border border-gray-200 px-3 outline-none bg-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>U(I),className:"flex-1 h-10 rounded-xl bg-gray-900 text-white font-extrabold hover:bg-gray-800",children:"Guardar"}),i.jsx("button",{onClick:q,className:"flex-1 h-10 rounded-xl border border-gray-200 font-extrabold hover:bg-gray-50",children:"Cancelar"})]})]})]}):null]})]})]})]})]})}const Jm=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function Yst(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function Lz(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function Jst(t){const e=String(t||"").trim();if(!e)return 0;const r=Date.parse(e);return Number.isFinite(r)?r:0}function Zst({open:t,onClose:e,onDetected:r}){const n=g.useRef(null),a=g.useRef(null),[s,o]=g.useState(""),l=g.useRef("");return g.useEffect(()=>{if(!t)return;let c=!1;const u=new _2,d=()=>{var A,h,m;try{(A=a.current)==null||A.stop()}catch{}a.current=null;try{const p=(h=n.current)==null?void 0:h.srcObject;(m=p==null?void 0:p.getTracks)==null||m.call(p).forEach(x=>x.stop())}catch{}try{n.current&&(n.current.srcObject=null)}catch{}};return(async()=>{o("");try{if(!n.current)return;try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(m=>m.stop())}catch{}const A=await u.decodeFromConstraints({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},n.current,h=>{if(!c&&h){const m=String(h.getText()||"").trim().replace(/\s+/g,"");if(!m||m===l.current)return;l.current=m,d(),r(m),e()}});a.current=A}catch(A){const h=String((A==null?void 0:A.message)||""),m=String((A==null?void 0:A.name)||"");h.toLowerCase().includes("permission")||m==="NotAllowedError"?o("Permiso de cmara denegado."):m==="NotFoundError"||h.toLowerCase().includes("notfound")?o("No se encontr cmara en este dispositivo."):h.toLowerCase().includes("secure")||h.toLowerCase().includes("https")?o("La cmara requiere HTTPS (sitio seguro)."):o(h||"No se pudo iniciar el escner.")}})(),()=>{c=!0,d()}},[t,e,r]),t?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 p-3 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-lg border overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[i.jsx("div",{className:"font-bold",children:"Escanear cdigo"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:e,type:"button",children:"Cerrar"})]}),i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"relative w-full aspect-[3/4] bg-black rounded-xl overflow-hidden",children:[i.jsx("video",{ref:n,className:"w-full h-full object-cover",muted:!0,playsInline:!0,autoPlay:!0}),i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:i.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[85%] h-40 border-2 border-white/70 rounded-xl"})})]}),s&&i.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded p-2",children:s}),i.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Apunt al cdigo de barras y mantenelo estable."})]})]})}):null}function eit(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(""),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState("ANY"),[y,b]=g.useState(!1),[w,j]=g.useState({});g.useEffect(()=>{(async()=>{n(!0),s("");try{const oe=await Qt(ar(yt(ke,"candy_main_orders"))),Z=new Map;oe.forEach(Re=>{var Ce,Ye,ft;const ge=Re.data(),Xe=Jst(ge.date),vt=((Ye=(Ce=ge==null?void 0:ge.createdAt)==null?void 0:Ce.toMillis)==null?void 0:Ye.call(Ce))||((ft=ge==null?void 0:ge.createdAt)!=null&&ft.seconds?ge.createdAt.seconds*1e3:0)||0,it=Math.max(Xe,vt),de=Array.isArray(ge.items)?ge.items:[];for(const we of de){const Le=String((we==null?void 0:we.id)||(we==null?void 0:we.productId)||"").trim();if(!Le)continue;const gt=String((we==null?void 0:we.name)||(we==null?void 0:we.productName)||"").trim(),Ut=String((we==null?void 0:we.category)||"").trim(),Mt=Number((we==null?void 0:we.unitPriceIsla)||0),Yt=Number((we==null?void 0:we.unitPriceRivas)||0),st=Number((we==null?void 0:we.unitsPerPackage)||(we==null?void 0:we.unitsPerPack)||1),_e=Z.get(Le);(!_e||it>=_e._sortKey)&&Z.set(Le,{productId:Le,category:Ut,productName:gt,priceIsla:Mt,priceRivas:Yt,unitsPerPackage:st,_sortKey:it})}});const Ne=Array.from(Z.values()).sort((Re,ge)=>Re.productName.localeCompare(ge.productName,"es"));l(Ne)}catch(oe){console.error(oe),s(" Error cargando precios desde rdenes maestras."),l([])}finally{n(!1)}})()},[t]),g.useEffect(()=>{const oe=yt(ke,"products_candies"),Z=ar(oe),Ne=vd(Z,Re=>{const ge={},Xe={},vt={},it={};Re.forEach(de=>{const Ce=de.data();ge[de.id]=Number((Ce==null?void 0:Ce.providerPrice)||(Ce==null?void 0:Ce.providerPricePerUnit)||0),vt[de.id]=Number((Ce==null?void 0:Ce.unitsPerPackage)||(Ce==null?void 0:Ce.unitsPerPack)||1)||1;const Ye=String((Ce==null?void 0:Ce.barcode)||"").trim();Ye&&(Xe[de.id]=Ye);const ft=String((Ce==null?void 0:Ce.packaging)||(Ce==null?void 0:Ce.empaque)||"").trim();ft&&(it[de.id]=ft)});try{const de=S.current||{};let Ce=!1;for(const Le of Object.keys(Xe))if((Xe[Le]||"")!==(de[Le]||"")){Ce=!0;break}const Ye=F.current||{};let ft=!1;for(const Le of Object.keys(vt))if((vt[Le]||0)!==(Ye[Le]||0)){ft=!0;break}X(ge),Ae(vt);const we={...Xe,...de};_(we),S.current=we,F.current={...vt},Pe(it),l(Le=>Le.map(gt=>({...gt,unitsPerPackage:vt[gt.productId]??gt.unitsPerPackage}))),!E.current&&Ce&&(s(" Cdigo actualizado."),setTimeout(()=>s(""),3e3)),!E.current&&ft&&(s(" Unidades x paquete actualizadas."),setTimeout(()=>s(""),3e3)),E.current=!1}catch{X(ge),Ae(vt),_(Ce=>({...Xe,...Ce})),F.current={...vt},Pe(it),l(Ce=>Ce.map(Ye=>({...Ye,unitsPerPackage:vt[Ye.productId]??Ye.unitsPerPackage})))}},Re=>console.error(Re));return()=>Ne()},[]);const[I,_]=g.useState({}),S=g.useRef({}),E=g.useRef(!0),F=g.useRef({}),k=g.useRef({}),B=g.useRef(!0),[D,X]=g.useState({}),[he,Ae]=g.useState({}),[fe,me]=g.useState({}),[ne,Pe]=g.useState({}),[Te,O]=g.useState("");g.useEffect(()=>{const oe=yt(ke,"inventory_candies"),Z=ar(oe),Ne=vd(Z,Re=>{try{const ge={};Re.forEach(vt=>{var we,Le,gt;const it=vt.data(),de=String(it.productId||"").trim();if(!de)return;const Ce=Number(it.unitsPerPackage||it.unitsPerPack||0)||0,Ye=((Le=(we=it==null?void 0:it.createdAt)==null?void 0:we.toMillis)==null?void 0:Le.call(we))||((gt=it==null?void 0:it.createdAt)!=null&&gt.seconds?it.createdAt.seconds*1e3:0)||0,ft=ge[de];(!ft||Ye>=ft.ts)&&(ge[de]={val:Ce||0,ts:Ye})});const Xe={};for(const vt of Object.keys(ge))Xe[vt]=ge[vt].val||0;me(Xe);try{const vt=k.current||{};let it=!1;for(const de of Object.keys(Xe))if((Xe[de]||0)!==(vt[de]||0)){it=!0;break}k.current={...Xe},!B.current&&it&&(s(" Inventario: unidades por paquete actualizadas."),setTimeout(()=>s(""),3e3)),B.current=!1}catch{}l(vt=>vt.map(it=>({...it,unitsPerPackage:Xe[it.productId]??he[it.productId]??it.unitsPerPackage})))}catch(ge){console.error("inventory_candies snapshot error:",ge)}},Re=>console.error(Re));return()=>Ne()},[he]),g.useEffect(()=>{l(oe=>oe.map(Z=>({...Z,unitsPerPackage:fe[Z.productId]??he[Z.productId]??Z.unitsPerPackage})))},[he,fe]);const K=g.useMemo(()=>{const oe=Yst(c),Z=String(d||"").trim(),Ne=String(Te||"").trim().toLowerCase(),Re=A.trim()===""?null:Lz(A,NaN),ge=m.trim()===""?null:Lz(m,NaN);return o.filter(Xe=>{const vt=String(ne[Xe.productId]||"").trim().toLowerCase();if(Ne)return vt===Ne;if(oe&&!`${Xe.category} ${Xe.productName}`.toLowerCase().includes(oe))return!1;if(Z){const Ye=String(Xe.productId||""),ft=String(I[Xe.productId]||"");if(!Ye.includes(Z)&&!ft.includes(Z))return!1}const it=x==="ISLA"?[Xe.priceIsla]:x==="RIVAS"?[Xe.priceRivas]:[Xe.priceIsla,Xe.priceRivas],de=Re==null||!Number.isFinite(Re)?!0:it.some(Ye=>Ye>=Re),Ce=ge==null||!Number.isFinite(ge)?!0:it.some(Ye=>Ye<=ge);return de&&Ce})},[o,c,A,m,x,I,Te,ne]),q=g.useMemo(()=>{const oe=new Map;for(const Z of K){const Ne=(Z.category||"Sin categora").trim()||"Sin categora",Re=oe.get(Ne)||[];Re.push(Z),oe.set(Ne,Re)}return Array.from(oe.entries()).sort(([Z],[Ne])=>Z.localeCompare(Ne,"es"))},[K]),U=oe=>{j(Z=>({...Z,[oe]:!Z[oe]}))},W=()=>{u(""),h(""),p(""),v("ANY"),O("")},[J,M]=g.useState(!1),[H,te]=g.useState("search"),[ve,Q]=g.useState(null),[Ke,ae]=g.useState(0),[ee,Fe]=g.useState(0),[ce,be]=g.useState(null),[Ve,We]=g.useState(""),[pt,wt]=g.useState(""),Ct=g.useMemo(()=>c.trim()!==""||A.trim()!==""||m.trim()!==""||x!=="ANY"||Te.trim()!=="",[c,A,m,x,Te]),[St,Rt]=g.useState(!1);g.useEffect(()=>{var Ne;const oe=window.matchMedia("(max-width: 900px)"),Z=()=>Rt(oe.matches);return Z(),(Ne=oe.addEventListener)==null||Ne.call(oe,"change",Z),()=>{var Re;return(Re=oe.removeEventListener)==null?void 0:Re.call(oe,"change",Z)}},[]);const[jt,Ue]=g.useState(!1);g.useEffect(()=>{const oe=cj(uf,async Z=>{if(!Z)return Ue(!1);try{const Ne=await si(Jt(ke,"users",Z.uid)),Re=Ne.exists()?Ne.data():null,ge=Re?Array.isArray(Re.roles)?Re.roles:Re.role?[Re.role]:[]:[];Ue(xn(ge,"admin"))}catch(Ne){console.error(Ne),Ue(!1)}});return()=>oe()},[]);const Be=async oe=>{var Z;if(H==="search"){f(oe);const Ne=Object.keys(I).find(Xe=>(I[Xe]||"")===oe),Re=(Z=o.find(Xe=>String(Xe.productId||"").includes(oe)))==null?void 0:Z.productId,ge=Ne||Re||null;ge&&(be(ge),b(!1)),M(!1);return}if(H==="edit"&&ve)try{const Ne=yt(ke,"products_candies"),Re=Jt(Ne,ve);await _n(Re,{barcode:oe}),_(ge=>({...ge,[ve]:oe})),We(oe),M(!1),te("search"),s(" Producto guardado.")}catch(Ne){console.error(Ne),s(" Error guardando el cdigo.")}},ye=async oe=>{l(Z=>Z.map(Ne=>Ne.productId===oe?{...Ne,priceIsla:Number(Ke||0),priceRivas:Number(ee||0)}:Ne));try{const Z=String(pt||"").trim();await _n(Jt(yt(ke,"products_candies"),oe),{packaging:Z||""}),Pe(Ne=>({...Ne,[oe]:Z||""}))}catch(Z){console.error("Error updating packaging:",Z),s(" Error guardando empaque.")}Q(null),s(St?" Producto guardado.":"")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Precio Ventas"}),i.jsx("div",{className:"flex gap-2",children:i.jsx(_c,{onClick:e,loading:r})})]}),i.jsxs("div",{className:"md:hidden mb-3",children:[i.jsxs("button",{type:"button",onClick:()=>b(oe=>!oe),className:`w-full px-3 py-3 rounded-xl border shadow-sm flex items-center justify-between ${Ct?"bg-yellow-50 border-yellow-200":"bg-white"}`,children:[i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-semibold",children:"Filtros"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[Ct?"Activos":"Ninguno","  ","Mostrando ",i.jsx("b",{children:K.length})]})]}),i.jsx("div",{className:"text-sm font-semibold",children:y?"Cerrar":"Abrir"})]}),y&&i.jsx("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:c,onChange:oe=>u(oe.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:Te,onChange:oe=>O(oe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Buscar por EAN"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:d,onChange:oe=>f(oe.target.value),placeholder:"Cdigo EAN"}),i.jsx("button",{type:"button",className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{te("search"),M(!0)},children:"Escanear"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>{W(),f("")},children:"Limpiar filtros"}),i.jsx("button",{type:"button",className:"flex-1 px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>b(!1),children:"Aplicar"})]})]})})]}),i.jsxs("div",{className:"hidden md:block bg-white p-3 rounded shadow border mb-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Filtrar por producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-1",value:c,onChange:oe=>u(oe.target.value),placeholder:"Ej: Conitos, Gomitas"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo empaque"}),i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:Te,onChange:oe=>O(oe.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:A,onChange:oe=>h(oe.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-1 text-right",inputMode:"decimal",value:m,onChange:oe=>p(oe.target.value),placeholder:"0"})]}),i.jsx("div",{className:"text-right",children:i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:W,children:"Limpiar"})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-gray-600",children:["Fuente: ",i.jsx("b",{children:"candy_main_orders.items[]"}),"  Muestra el"," ",i.jsx("b",{children:"ltimo precio"})," registrado por producto."]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Mostrando:"})," ",i.jsx("b",{children:K.length})]})]})]}),i.jsxs("div",{className:"md:hidden",children:[r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):K.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):i.jsx("div",{className:"space-y-2",children:q.map(([oe,Z])=>{const Ne=!!w[oe];return i.jsxs("div",{className:"bg-white border rounded-2xl shadow-sm overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>U(oe),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:oe}),i.jsxs("div",{className:"text-[10px] text-gray-600 truncate",children:[Z.length," ",Z.length===1?"producto":"productos"]})]}),i.jsx("div",{className:"text-sm font-semibold",children:Ne?"":"+"})]}),Ne&&i.jsx("div",{className:"px-3 pb-3 border-t space-y-2",children:Z.map(Re=>{const ge=ce===Re.productId,Xe=ve===Re.productId,vt=D[Re.productId]||0,it=Re.priceIsla-vt,de=it*.25;return i.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[i.jsxs("button",{type:"button",className:"w-full px-3 py-3 flex items-center justify-between text-left",onClick:()=>be(Ce=>Ce===Re.productId?null:Re.productId),children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-[13px] font-semibold truncate",children:Re.productName}),i.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:Re.category})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"P. Paquete"}),i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Jm(Re.priceIsla)})]})]}),ge&&i.jsx("div",{className:"px-3 pb-3 border-t",children:i.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Categora"}),i.jsx("div",{className:"text-sm",children:Re.category}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Unidades x paquete"}),i.jsx("div",{className:"text-sm",children:String(Re.unitsPerPackage||1)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Unidad"}),i.jsx("div",{className:"text-sm tabular-nums",children:Jm(Re.priceIsla/(Re.unitsPerPackage||1))})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Precio Paquete"}),Xe?i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:String(Ke),onChange:Ce=>ae(Number(Ce.target.value||0))}):i.jsx("div",{className:"text-sm font-semibold tabular-nums",children:Jm(Re.priceIsla)})]})]}),i.jsxs("div",{children:[jt&&i.jsxs("div",{children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Utilidad Bruta"}),i.jsx("div",{className:"text-sm tabular-nums",children:Jm(it)})]}),i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Comisin"}),i.jsx("div",{className:"text-sm tabular-nums",children:Jm(de)})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Cdigo EAN"}),Xe?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:Ve,readOnly:!0}),i.jsx("button",{className:"px-3 py-2 rounded bg-blue-600 text-white",onClick:()=>{te("edit"),M(!0)},type:"button",children:"Escanear"})]}):i.jsx("div",{children:I[Re.productId]||""})]}),i.jsxs("div",{className:"mt-2",children:[i.jsx("div",{className:"text-[10px] text-gray-600",children:"Tipo Empaque"}),Xe?i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:pt,onChange:Ce=>wt(Ce.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):i.jsx("div",{className:"text-sm",children:ne[Re.productId]||""})]})]})]}),i.jsx("div",{className:"flex gap-2",children:Xe?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white",onClick:()=>{ye(Re.productId),be(null)},type:"button",children:"Guardar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-800 text-white",onClick:()=>{te("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200",onClick:()=>Q(null),type:"button",children:"Cancelar"})]}):jt&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400",onClick:()=>{Q(Re.productId),ae(Re.priceIsla||0),Fe(Re.priceRivas||0),We(I[Re.productId]||""),wt(ne[Re.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white",onClick:()=>l(Ce=>Ce.filter(Ye=>Ye.productId!==Re.productId)),type:"button",children:"Borrar"})]})})]})})]},Re.productId)})})]},oe)})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a})]}),i.jsx(Zst,{open:J,onClose:()=>M(!1),onDetected:Be}),i.jsx("div",{className:"hidden md:block bg-white rounded shadow border w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-[900px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-left",children:"Empaque"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Isla"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio Rivas"}),i.jsx("th",{className:"p-2 border text-right",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Cargando"})}):K.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:6,children:"Sin resultados."})}):K.map(oe=>i.jsxs("tr",{children:[i.jsx("td",{className:"p-2 border",children:oe.category}),i.jsx("td",{className:"p-2 border",children:oe.productName}),i.jsx("td",{className:"p-2 border",children:ve===oe.productId?i.jsxs("select",{className:"w-full border rounded px-2 py-1",value:pt,onChange:Z=>wt(Z.target.value),children:[i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"Tarro",children:"Tarro"}),i.jsx("option",{value:"Bolsa",children:"Bolsa"}),i.jsx("option",{value:"Ristra",children:"Ristra"}),i.jsx("option",{value:"Caja",children:"Caja"}),i.jsx("option",{value:"Vaso",children:"Vaso"}),i.jsx("option",{value:"Pana",children:"Pana"})]}):ne[oe.productId]||""}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===oe.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(Ke),onChange:Z=>ae(Number(Z.target.value||0))}):Jm(oe.priceIsla)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:ve===oe.productId?i.jsx("input",{className:"w-24 border rounded px-2 py-1 text-right",inputMode:"decimal",value:String(ee),onChange:Z=>Fe(Number(Z.target.value||0))}):Jm(oe.priceRivas)}),i.jsx("td",{className:"p-2 border text-right",children:ve===oe.productId?i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white text-sm",onClick:()=>ye(oe.productId),type:"button",children:"Guardar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-gray-200 text-sm",onClick:()=>Q(null),type:"button",children:"Cancelar"})]}):jt&&i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 text-sm",onClick:()=>{Q(oe.productId),ae(oe.priceIsla||0),Fe(oe.priceRivas||0),We(I[oe.productId]||"")},type:"button",children:"Editar"}),i.jsx("button",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",onClick:()=>{Q(oe.productId),te("edit"),M(!0)},type:"button",children:"Escanear"}),i.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white text-sm",onClick:()=>l(Z=>Z.filter(Ne=>Ne.productId!==oe.productId)),type:"button",children:"Borrar"})]})})]},oe.productId))})]})}),a&&i.jsx("p",{className:"hidden md:block mt-2 text-sm",children:a})]})}const S_=["Cuaderno","Block","Lapicero","Lpiz","Tajador","Borrador","Corrector","Cartucheras"],Uz=["Lider","Scribe","Smarty","Pointer","Paper Mate","Otro"],wB=["Hombre","Mujer","Variado","NA"],tit=["Universitario Cocido","5 Materia","2 Materia","Doble Raya","Rayado","Cuadriculado","Subrayado","Sublineado","Liso"],Ll=t=>`C$ ${(Number(t)||0).toFixed(2)}`;function ho(t){return String(t??"").trim().replace(/\s+/g," ").toLowerCase()}function dc(t,e=0){const r=Number(String(t??"").replace(",","."));return Number.isFinite(r)?r:e}function gE(t,e=1){const r=Math.floor(dc(t,e));return r>0?r:e}function Hue(t){return!Number.isFinite(t)||t<=0?0:t}function NB(t){const e=String(t??"").trim();return e||""}function Kd(t,e){const r=Object.keys(t||{}),n=new Map;r.forEach(a=>n.set(ho(a),a));for(const a of e){const s=n.get(ho(a));if(s!=null)return t[s]}}function rit(t){return Object.values(t||{}).every(r=>ho(r)==="")}function vx(t){const e=Math.max(0,dc(t.providerPrice,0)),r=Math.max(1,gE(t.quantity,1)),n=Hue(dc(t.margin,0)),a=Math.max(0,dc(t.salePrice,0)),s=n>0?e/n:e,o=a>0?a:s,l=o>0?e/o:n,c=e*r,u=(o-e)*r,d=o*r;return{providerPrice:e,quantity:r,margin:l,salePrice:o,facturado:c,gain:u,totalEsperado:d}}function nit(){const{refreshKey:t,refresh:e}=Ec(),[r,n]=g.useState(!0),[a,s]=g.useState(""),[o,l]=g.useState([]),[c,u]=g.useState(!1),[d,f]=g.useState(""),[A,h]=g.useState(""),[m,p]=g.useState(""),[x,v]=g.useState(""),[y,b]=g.useState(!1),[w,j]=g.useState(null),[I,_]=g.useState(!1),[S,E]=g.useState(null),[F,k]=g.useState(S_[0]),[B,D]=g.useState(Uz[0]),[X,he]=g.useState(""),[Ae,fe]=g.useState(0),[me,ne]=g.useState(1),[Pe,Te]=g.useState(.7),[O,K]=g.useState(0),[q,U]=g.useState("NA"),[W,J]=g.useState(""),[M,H]=g.useState(""),[te,ve]=g.useState(!1),[Q,Ke]=g.useState(""),[ae,ee]=g.useState([]),[Fe,ce]=g.useState([]),[be,Ve]=g.useState(!1);g.useEffect(()=>{(async()=>{n(!0),s("");try{const de=await Qt(ar(yt(ke,"products_stationery"))),Ce=[];de.forEach(Ye=>{const ft=Ye.data();Ce.push({id:Ye.id,category:ft.category||"",brand:ft.brand||"",name:ft.name||"",providerPrice:Number(ft.providerPrice||0),quantity:Number(ft.quantity||1),facturado:Number(ft.facturado||0),margin:Number(ft.margin||0),salePrice:Number(ft.salePrice||0),gain:Number(ft.gain||0),gender:ft.gender||"NA",typeProduct:ft.typeProduct||"",code:ft.code??"",createdAt:ft.createdAt,updatedAt:ft.updatedAt,totalEsperado:Number(ft.totalEsperado||Number(ft.salePrice||0)*Number(ft.quantity||1))})}),l(Ce)}catch(de){console.error(de),s(" Error cargando productos (papelera).")}finally{n(!1)}})()},[t]);const We=g.useMemo(()=>{const de=ho(d),Ce=ho(A),Ye=m.trim()===""?null:dc(m,NaN),ft=x.trim()===""?null:dc(x,NaN);return o.filter(we=>!(de&&!`${we.category} ${we.name}`.toLowerCase().includes(de)||Ce&&!String(we.code||"").toLowerCase().includes(Ce)||Ye!=null&&Number.isFinite(Ye)&&we.salePrice<Ye||ft!=null&&Number.isFinite(ft)&&we.salePrice>ft))},[o,d,A,m,x]),pt=g.useMemo(()=>d.trim()!==""||A.trim()!==""||m.trim()!==""||x.trim()!=="",[d,A,m,x]),wt=g.useMemo(()=>{const de=o.length,Ce=o.reduce((we,Le)=>we+(Le.facturado||0),0),Ye=o.reduce((we,Le)=>we+Number(Le.totalEsperado||Number(Le.salePrice||0)*Number(Le.quantity||1)),0),ft=o.reduce((we,Le)=>we+(Le.gain||0),0);return{count:de,sumFact:Ce,sumEsperado:Ye,sumGain:ft}},[o]),Ct=()=>{k(S_[0]),he(""),fe(0),ne(1),Te(.7),K(0),U("NA"),J(""),H(""),j(null)},St=()=>{Ct(),b(!0)},Rt=de=>{j(de),k(de.category||S_[0]),D(de.brand||Uz[0]),he(de.name||""),fe(Number(de.providerPrice||0)),ne(Number(de.quantity||1)),Te(Number(de.margin||.7)),K(Number(de.salePrice||0)),U(de.gender||"NA"),J(de.typeProduct||""),H(String(de.code||"")),b(!0)},jt=async()=>{s("");const de=String(F||"").trim(),Ce=String(B||"").trim(),Ye=String(X||"").trim(),{providerPrice:ft,quantity:we,margin:Le,salePrice:gt,facturado:Ut,totalEsperado:Mt,gain:Yt}=vx({providerPrice:Ae,quantity:me,margin:Pe,salePrice:O});if(!de)return s(" Categora requerida.");if(!Ye)return s(" Producto requerido.");if(ft<=0)return s(" Precio proveedor debe ser > 0.");if(we<=0)return s(" Cantidad debe ser > 0.");if(gt<=0)return s(" Precio venta invlido.");if(Le<=0)return s(" Margen invlido.");const st={category:de,brand:Ce,name:Ye,providerPrice:ft,quantity:we,facturado:Ut,margin:Le,salePrice:gt,gain:Yt,gender:q||"NA",typeProduct:String(W||"").trim(),code:NB(M)||null,updatedAt:xr.now(),totalEsperado:Mt};try{n(!0),w?(await _n(Jt(ke,"products_stationery",w.id),st),s(" Producto actualizado.")):(await $n(yt(ke,"products_stationery"),{...st,createdAt:xr.now()}),s(" Producto creado.")),b(!1),j(null),Ct(),e()}catch(_e){console.error(_e),s(" Error guardando producto.")}finally{n(!1)}},Ue=async()=>{var de;try{const Ce=new _2,Ye=await _2.listVideoInputDevices(),ft=(de=Ye[Ye.length-1])==null?void 0:de.deviceId;if(!ft)return null;const we=document.createElement("div");we.className="fixed inset-0 z-[9999] bg-black/70 flex items-center justify-center p-3";const Le=document.createElement("div");Le.className="bg-white w-full max-w-md rounded-xl overflow-hidden shadow-xl";const gt=document.createElement("div");gt.className="p-3 flex items-center justify-between border-b",gt.innerHTML="<div style='font-weight:700'>Escanear cdigo</div>";const Ut=document.createElement("button");Ut.textContent="Cerrar",Ut.className="px-3 py-1 rounded bg-gray-200";const Mt=document.createElement("div");Mt.className="p-3";const Yt=document.createElement("video");return Yt.style.width="100%",Yt.style.borderRadius="12px",Mt.appendChild(Yt),gt.appendChild(Ut),Le.appendChild(gt),Le.appendChild(Mt),we.appendChild(Le),document.body.appendChild(we),await new Promise(async st=>{const _e=()=>{we.remove(),st(null)};Ut.onclick=_e;const xe=await Ce.decodeFromVideoDevice(ft,Yt,ie=>{if(ie){const Oe=ie.getText();try{xe.stop()}catch{}we.remove(),st(Oe)}})})}catch(Ce){return console.error(Ce),null}},Be=async()=>{const de=await Ue();de&&H(de)},ye=async()=>{const de=await Ue();if(!de)return;const Ce=o.find(Ye=>String(Ye.code||"")===String(de));Ce?(E(Ce),_(!0),s("")):(E(null),_(!0),s(""))},oe=(de,Ce)=>{const Ye=de.map(Le=>({Id:Le.id,Categoria:Le.category,brand:Le.brand,Producto:Le.name,PrecioProveedor:Le.providerPrice,Cantidad:Le.quantity,Facturado:Le.facturado,TotalEsperado:Le.totalEsperado||Le.salePrice*Le.quantity,Margen:Le.margin,PrecioVenta:Le.salePrice,Ganancia:Le.gain,Genero:Le.gender,TipoProducto:Le.typeProduct,Codigo:Le.code||""})),ft=ls.json_to_sheet(Ye),we=ls.book_new();ls.book_append_sheet(we,ft,"Productos"),zS(we,Ce)},Z=()=>{const de=[{Id:"",Categoria:"Cuaderno",brand:"Lider",Producto:"Cuaderno Norma 100 hojas",PrecioProveedor:120,Cantidad:12,Margen:.7,PrecioVenta:"",Genero:"NA",TipoProducto:"Universitario Cocido",Codigo:"1234567890123"}],Ce=ls.json_to_sheet(de),Ye=ls.book_new();ls.book_append_sheet(Ye,Ce,"Productos");const ft=cP(Ye,{type:"array",bookType:"xlsx"}),we=new Blob([ft],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Le=URL.createObjectURL(we),gt=document.createElement("a");gt.href=Le,gt.download="template_products_stationery.xlsx",document.body.appendChild(gt),gt.click(),gt.remove(),URL.revokeObjectURL(Le)},Ne=de=>{const Ce=[],Ye=[];de.forEach((we,Le)=>{if(!we||typeof we!="object"||rit(we))return;const gt=Le+2,Ut=String(Kd(we,["Id","ID","docId","DocId"])??"").trim(),Mt=String(Kd(we,["Categoria","Categora","Category","category"])??"").trim(),Yt=String(Kd(we,["Brand","Marca","brand","marca"])??"").trim(),st=String(Kd(we,["Producto","Product","Nombre","Name","name"])??"").trim(),_e=Kd(we,["PrecioProveedor","Precio Prov","Precio Prov.","ProviderPrice","Costo","providerPrice"]),xe=Kd(we,["Cantidad","Qty","quantity","cantidad"]),ie=Kd(we,["Margen","Margin","margen","margin"]),Oe=Kd(we,["PrecioVenta","Precio Venta","SalePrice","salePrice"]),le=String(Kd(we,["Genero","Gnero","Gender","gender"])??"NA").trim(),De=String(Kd(we,["TipoProducto","Tipo","TypeProduct","typeProduct","Tipo producto"])??"").trim(),He=Kd(we,["Codigo","Cdigo","Code","Barcode","code"]),P=NB(He),R=Math.max(0,dc(_e,0)),L=Math.max(1,gE(xe,1)),G=Hue(dc(ie,0)),re=Math.max(0,dc(Oe,0));Mt||Ye.push(`Fila ${gt}: falta Categoria.`),st||Ye.push(`Fila ${gt}: falta Producto.`),R<=0&&Ye.push(`Fila ${gt}: PrecioProveedor debe ser > 0.`),L<=0&&Ye.push(`Fila ${gt}: Cantidad debe ser > 0.`),G<=0&&re<=0&&Ye.push(`Fila ${gt}: Margen debe ser > 0 (o enviar PrecioVenta).`);const $e=wB.includes(le||"NA")?le:"NA";Mt&&st&&R>0&&L>0&&(G>0||re>0)&&Ce.push({id:Ut||void 0,category:Mt,brand:Yt,name:st,providerPrice:R,quantity:L,margin:G>0?G:.7,salePrice:re>0?re:void 0,gender:$e,typeProduct:De,code:P||"",_raw:we})});const ft=new Map;for(const we of Ce){const Le=we.id?`id::${we.id}`:`${ho(we.category)}::${ho(we.name)}`;ft.set(Le,we)}return{rows:Array.from(ft.values()),errors:Ye}},Re=async de=>{if(s(""),ce([]),ee([]),Ke((de==null?void 0:de.name)||""),!de)return;const Ce=de.name.toLowerCase(),Ye=Ce.endsWith(".xlsx")||Ce.endsWith(".xls"),ft=Ce.endsWith(".csv");if(!Ye&&!ft){ce(["Solo se permiten archivos .xlsx, .xls o .csv"]);return}try{Ve(!0);const we=new FileReader,Le=await new Promise((xe,ie)=>{we.onerror=()=>ie(new Error("No se pudo leer el archivo.")),we.onload=()=>xe(we.result),we.readAsArrayBuffer(de)}),gt=Lv(new Uint8Array(Le),{type:"array"}),Ut=gt.SheetNames[0],Mt=gt.Sheets[Ut],Yt=ls.sheet_to_json(Mt,{defval:""}),{rows:st,errors:_e}=Ne(Yt);ee(st),ce(_e),st.length===0&&_e.length===0&&ce(["No se encontraron filas vlidas para importar."])}catch(we){console.error(we),ce(["Error leyendo el archivo. Revis que no est corrupto."])}finally{Ve(!1)}},ge=(de,Ce)=>{ee(Ye=>{const ft=[...Ye],we=ft[de];return we?(ft[de]={...we,...Ce},ft):Ye})},Xe=g.useMemo(()=>{const de=new Set(o.map(we=>we.id)),Ce=new Set(o.map(we=>`${ho(we.category)}::${ho(we.name)}`));let Ye=0,ft=0;for(const we of ae){if(we.id&&de.has(we.id)){Ye+=1;continue}const Le=`${ho(we.category)}::${ho(we.name)}`;Ce.has(Le)?Ye+=1:ft+=1}return{total:ae.length,willCreate:ft,willUpdate:Ye}},[ae,o]),vt=async()=>{if(s(""),Fe.length>0){s(" Correg los errores antes de importar.");return}if(ae.length===0){s(" No hay filas para importar.");return}try{Ve(!0);const de={},Ce={};o.forEach(Le=>{de[Le.id]=Le,Ce[`${ho(Le.category)}::${ho(Le.name)}`]=Le});const Ye=cf(ke);let ft=0,we=0;for(const Le of ae){const gt=String(Le.category||"").trim(),Ut=String(Le.name||"").trim(),{providerPrice:Mt,quantity:Yt,margin:st,salePrice:_e,facturado:xe,totalEsperado:ie,gain:Oe}=vx({providerPrice:Le.providerPrice,quantity:Le.quantity,margin:Le.margin,salePrice:Le.salePrice});if(!gt||!Ut||Mt<=0||Yt<=0||_e<=0||st<=0)continue;const le={category:gt,name:Ut,providerPrice:Mt,quantity:Yt,facturado:xe,totalEsperado:ie,margin:st,salePrice:_e,gain:Oe,gender:Le.gender||"NA",typeProduct:String(Le.typeProduct||"").trim(),code:NB(Le.code)||null,updatedAt:xr.now()};let De;if(Le.id&&de[Le.id])De=de[Le.id];else{const He=`${ho(gt)}::${ho(Ut)}`;De=Ce[He]}if(De)Ye.update(Jt(ke,"products_stationery",De.id),le),we+=1;else{const He=Jt(yt(ke,"products_stationery"));Ye.set(He,{...le,createdAt:xr.now()}),ft+=1}}await Ye.commit(),s(` Importacin lista. Creados: ${ft}, Actualizados: ${we}`),ve(!1),ee([]),ce([]),Ke(""),e()}catch(de){console.error(de),s(" Error importando productos a Firestore.")}finally{Ve(!1)}},it=()=>{f(""),h(""),p(""),v("")};return i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Papelera"}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white hover:bg-black",onClick:ye,type:"button",children:"Escanear"}),i.jsx("button",{className:"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700",onClick:St,type:"button",children:"+ Nuevo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",onClick:()=>{ve(!0),ee([]),ce([]),Ke("")},type:"button",children:"Importar (.xlsx)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>oe(o,"products_stationery_todo.xlsx"),type:"button",children:"Exportar (todo)"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>oe(We,"products_stationery_filtrado.xlsx"),type:"button",children:"Exportar (filtrado)"}),i.jsx(_c,{onClick:e,loading:r||be})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[i.jsx(I_,{label:"Productos",value:wt.count}),i.jsx(I_,{label:"Facturado",value:Ll(wt.sumFact)}),i.jsx(I_,{label:"Esperado",value:Ll(wt.sumEsperado)}),i.jsx(I_,{label:"Ganancia",value:Ll(wt.sumGain)})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("button",{className:`w-full md:w-auto px-3 py-2 rounded border bg-white hover:bg-gray-50 ${pt?"border-yellow-300 bg-yellow-50":""}`,type:"button",onClick:()=>u(de=>!de),children:[c?"Cerrar filtros":"Abrir filtros"," ",pt?"(activos)":""]}),c&&i.jsxs("div",{className:"mt-2 bg-white border rounded-xl shadow-sm p-3 text-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:d,onChange:de=>f(de.target.value),placeholder:"Ej: Cuaderno Norma"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:A,onChange:de=>h(de.target.value),placeholder:"Barcode"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mn"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:m,onChange:de=>p(de.target.value),placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta mx"}),i.jsx("input",{className:"w-full border rounded px-2 py-2 text-right",inputMode:"decimal",value:x,onChange:de=>v(de.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"md:col-span-4 flex gap-2 justify-end",children:[i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:it,children:"Limpiar"}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:()=>u(!1),children:"Aplicar"})]})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("div",{children:["Mostrando: ",i.jsx("b",{children:We.length})]}),i.jsxs("div",{children:["Coleccin: ",i.jsx("b",{children:"products_stationery"})]})]})]})]}),i.jsx("div",{className:"md:hidden space-y-2",children:r?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Cargando"}):We.length===0?i.jsx("div",{className:"bg-white rounded-xl border shadow p-4 text-center",children:"Sin resultados."}):We.map(de=>i.jsxs("div",{className:"bg-white border rounded-xl p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:de.category}),i.jsx("div",{className:"text-base font-bold leading-tight",children:de.name}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Ll(de.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Esperado:"," ",i.jsx("b",{children:Ll(de.totalEsperado||de.salePrice*de.quantity)})]}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Ll(de.gain)})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Cdigo: ",i.jsx("b",{children:de.code||""})]}),i.jsx("div",{className:"mt-2 flex gap-2",children:i.jsx("button",{className:"flex-1 px-3 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>Rt(de),children:"Editar"})})]},de.id))}),i.jsx("div",{className:"hidden md:block bg-white border rounded overflow-x-auto",children:i.jsxs("table",{className:"min-w-[1200px] w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Facturado"}),i.jsx("th",{className:"p-2 border text-right",children:"Esperado"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"Venta"}),i.jsx("th",{className:"p-2 border text-right",children:"Ganancia"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Acciones"})]})}),i.jsx("tbody",{children:r?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Cargando"})}):We.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:12,children:"Sin resultados."})}):We.map(de=>i.jsxs("tr",{className:"align-top",children:[i.jsx("td",{className:"p-2 border",children:de.category}),i.jsx("td",{className:"p-2 border",children:de.name}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ll(de.providerPrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:de.quantity}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ll(de.facturado)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ll(de.totalEsperado||de.salePrice*de.quantity)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Number(de.margin||0).toFixed(2)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ll(de.salePrice)}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:Ll(de.gain)}),i.jsx("td",{className:"p-2 border",children:de.gender}),i.jsx("td",{className:"p-2 border",children:de.typeProduct}),i.jsx("td",{className:"p-2 border",children:de.code||""}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("button",{className:"px-2 py-1 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>Rt(de),children:"Editar"})})]},de.id))})]})}),a&&i.jsx("p",{className:"mt-2 text-sm",children:a}),y&&i.jsxs(Qz,{onClose:()=>b(!1),title:w?"Editar producto":"Nuevo producto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Categora"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:F,onChange:de=>k(de.target.value),children:S_.map(de=>i.jsx("option",{value:de,children:de},de))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsx("input",{className:"w-full border rounded px-2 py-2",value:X,onChange:de=>he(de.target.value),placeholder:"Ej: Cuaderno Norma..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio proveedor"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Ae)?"":Ae,onChange:de=>fe(Math.max(0,dc(de.target.value,0)))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Cantidad"}),i.jsx("input",{type:"number",min:1,className:"w-full border rounded px-2 py-2 text-right",value:me,onChange:de=>ne(gE(de.target.value,1))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Facturado (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Ll(vx({providerPrice:Ae,quantity:me,margin:Pe,salePrice:O}).facturado)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Margen"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(Pe)?"":Pe,onChange:de=>Te(Math.max(0,dc(de.target.value,0)))}),i.jsx("div",{className:"text-[11px] text-gray-600 mt-1",children:"Ej: 0.70 / 0.80"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Precio venta (editable)"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full border rounded px-2 py-2 text-right",value:Number.isNaN(vx({providerPrice:Ae,quantity:me,margin:Pe,salePrice:O}).salePrice)?"":vx({providerPrice:Ae,quantity:me,margin:Pe,salePrice:O}).salePrice,onChange:de=>{K(Math.max(0,dc(de.target.value,0)))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Ganancia (auto)"}),i.jsx("div",{className:"w-full border rounded px-2 py-2 text-right bg-gray-50 tabular-nums",children:Ll(vx({providerPrice:Ae,quantity:me,margin:Pe,salePrice:O}).gain)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Gnero"}),i.jsx("select",{className:"w-full border rounded px-2 py-2",value:q,onChange:de=>U(de.target.value),children:wB.map(de=>i.jsx("option",{value:de,children:de},de))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo producto"}),i.jsxs("select",{className:"w-full border rounded px-2 py-2",value:W,onChange:de=>J(de.target.value),children:[i.jsx("option",{value:"",children:""}),tit.map(de=>i.jsx("option",{value:de,children:de},de))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 border rounded px-2 py-2",value:M,onChange:de=>H(de.target.value),placeholder:"Escane o peg el cdigo"}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:Be,children:"Escanear"})]})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[i.jsx("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",type:"button",onClick:()=>{b(!1),j(null)},children:"Cancelar"}),i.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700",type:"button",onClick:jt,disabled:r,children:"Guardar"})]})]}),I&&i.jsx(Qz,{onClose:()=>_(!1),title:"Resultado de escaneo",children:S?i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"text-xs text-gray-600",children:S.category}),i.jsx("div",{className:"text-lg font-bold",children:S.name}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Precio venta"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Ll(S.salePrice)})]}),i.jsxs("div",{className:"rounded-lg border bg-gray-50 p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Ganancia"}),i.jsx("div",{className:"text-lg font-extrabold tabular-nums",children:Ll(S.gain)})]})]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Proveedor"}),i.jsx("div",{className:"font-semibold tabular-nums",children:Ll(S.providerPrice)})]}),i.jsxs("div",{className:"rounded-lg border p-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cantidad"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.quantity})]}),i.jsxs("div",{className:"rounded-lg border p-2 col-span-2",children:[i.jsx("div",{className:"text-[11px] text-gray-600",children:"Cdigo"}),i.jsx("div",{className:"font-semibold tabular-nums",children:S.code||""})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{className:"px-4 py-2 rounded bg-yellow-400 hover:bg-yellow-500",type:"button",onClick:()=>{_(!1),Rt(S)},children:"Editar"})})]}):i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"No encontrado"}),i.jsxs("div",{className:"text-gray-600 mt-1",children:["Ese cdigo no existe en ",i.jsx("b",{children:"products_stationery"}),"."]})]})}),te&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-3",children:i.jsxs("div",{className:"bg-white w-full max-w-6xl max-h-[90vh] overflow-y-auto rounded shadow-lg p-5 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Importar papelera (.xlsx / .csv)"}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>ve(!1),children:"Cerrar"})]}),i.jsxs("div",{className:"bg-gray-50 border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-end md:justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"1) Sub tu archivo"}),i.jsx("div",{className:"text-xs text-gray-600",children:"Columnas esperadas: Id (opcional), Categoria, Producto, PrecioProveedor, Cantidad, Margen (o PrecioVenta), Genero, TipoProducto, Codigo."})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:Z,type:"button",children:"Descargar template .xlsx"})]}),i.jsxs("div",{className:"mt-3 flex flex-col md:flex-row gap-3 md:items-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:de=>{var Ce;return Re(((Ce=de.target.files)==null?void 0:Ce[0])||null)}}),Q&&i.jsxs("span",{className:"text-xs text-gray-600",children:["Archivo: ",i.jsx("b",{children:Q})]}),be&&i.jsx("span",{className:"text-xs",children:"Procesando"})]})]}),Fe.length>0&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-3",children:[i.jsx("div",{className:"font-semibold text-red-700 mb-2",children:"Errores encontrados"}),i.jsx("ul",{className:"list-disc pl-5 text-red-700 text-xs space-y-1",children:Fe.slice(0,60).map((de,Ce)=>i.jsx("li",{children:de},Ce))})]}),i.jsxs("div",{className:"bg-white border rounded p-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"2) Previsualizacin (editable)"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["Se importarn ",Xe.total," filas (Crear:"," ",Xe.willCreate," / Actualizar:"," ",Xe.willUpdate,")"]})]}),i.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50",onClick:vt,disabled:be||ae.length===0||Fe.length>0,type:"button",children:"Importar a Firestore"})]}),i.jsxs("div",{className:"overflow-x-auto border rounded",children:[i.jsxs("table",{className:"min-w-[1500px] w-full text-xs",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("th",{className:"p-2 border text-left",children:"Id (opcional)"}),i.jsx("th",{className:"p-2 border text-left",children:"Categora"}),i.jsx("th",{className:"p-2 border text-left",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Proveedor"}),i.jsx("th",{className:"p-2 border text-right",children:"Cantidad"}),i.jsx("th",{className:"p-2 border text-right",children:"Margen"}),i.jsx("th",{className:"p-2 border text-right",children:"PrecioVenta"}),i.jsx("th",{className:"p-2 border text-left",children:"Gnero"}),i.jsx("th",{className:"p-2 border text-left",children:"Tipo"}),i.jsx("th",{className:"p-2 border text-left",children:"Cdigo"}),i.jsx("th",{className:"p-2 border text-center",children:"Accin"})]})}),i.jsx("tbody",{children:ae.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:11,className:"p-4 text-center text-gray-500",children:"Sub un archivo para ver la previsualizacin."})}):ae.slice(0,300).map((de,Ce)=>{const Ye=de.id?o.some(Le=>Le.id===de.id):!1,ft=o.some(Le=>`${ho(Le.category)}::${ho(Le.name)}`==`${ho(de.category)}::${ho(de.name)}`),we=Ye||ft;return i.jsxs("tr",{className:"whitespace-nowrap",children:[i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:de.id||"",onChange:Le=>ge(Ce,{id:Le.target.value.trim()||void 0}),placeholder:"docId (update exacto)"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-44 border rounded px-2 py-1",value:de.category,onChange:Le=>ge(Ce,{category:Le.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-72 border rounded px-2 py-1",value:de.name,onChange:Le=>ge(Ce,{name:Le.target.value})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:de.providerPrice,onChange:Le=>ge(Ce,{providerPrice:Math.max(0,dc(Le.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",min:1,className:"w-24 border rounded px-2 py-1 text-right",value:de.quantity,onChange:Le=>ge(Ce,{quantity:gE(Le.target.value,1)})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-24 border rounded px-2 py-1 text-right",value:de.margin,onChange:Le=>ge(Ce,{margin:Math.max(0,dc(Le.target.value,0))})})}),i.jsx("td",{className:"p-2 border text-right tabular-nums",children:i.jsx("input",{type:"number",step:"0.01",className:"w-28 border rounded px-2 py-1 text-right",value:de.salePrice??"",onChange:Le=>ge(Ce,{salePrice:Math.max(0,dc(Le.target.value,0))||void 0}),placeholder:"Opcional"})}),i.jsx("td",{className:"p-2 border",children:i.jsx("select",{className:"w-28 border rounded px-2 py-1",value:de.gender,onChange:Le=>ge(Ce,{gender:Le.target.value}),children:wB.map(Le=>i.jsx("option",{value:Le,children:Le},Le))})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:de.typeProduct,onChange:Le=>ge(Ce,{typeProduct:Le.target.value})})}),i.jsx("td",{className:"p-2 border",children:i.jsx("input",{className:"w-56 border rounded px-2 py-1",value:de.code||"",onChange:Le=>ge(Ce,{code:Le.target.value})})}),i.jsx("td",{className:"p-2 border text-center",children:i.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${we?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:we?"ACTUALIZA":"CREA"})})]},`${de.id||""}-${Ce}`)})})]}),ae.length>300&&i.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Mostrando 300 de ",ae.length," filas (importa todas)."]})]})]})]})})]})}function I_({label:t,value:e}){return i.jsxs("div",{className:"bg-white border rounded p-3 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-500",children:t}),i.jsx("div",{className:"text-lg font-extrabold",children:e})]})}function Qz({title:t,children:e,onClose:r}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-3",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-3xl p-4 relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-xl font-bold",children:t}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:r,type:"button",children:"Cerrar"})]}),e]})})}const Ju=t=>`C$ ${(Number(t)||0).toFixed(2)}`,g0=t=>Number(t||0).toFixed(3),CB=(t,e)=>{var a,s,o,l;const r=t._raw||{},n=t.customerName||r.customerName||((a=r.customer)==null?void 0:a.name)||r.clientName||((s=r.client)==null?void 0:s.name)||"";return t.type==="CONTADO"&&n?n:(t.customerId?e[t.customerId]:"")||t.customerName||r.customerName||((o=r.customer)==null?void 0:o.name)||r.clientName||((l=r.client)==null?void 0:l.name)||"Nombre cliente"},Vz=t=>{const e=t._raw||{},r=Gue(e)||t.date,n=Jx(r);return isFinite(n)?n:NaN},_B=t=>String((t==null?void 0:t.status)||"").toUpperCase()==="PROCESADA"||t!=null&&t.closureId||t!=null&&t.closureDate||t!=null&&t.processedDate?"PROCESADA":"FLOTANTE",ait=t=>String(t??"").toLowerCase().trim(),Hz=t=>["lb","lbs","libra","libras"].includes(ait(t)),$z=t=>Number((t==null?void 0:t.qty)??(t==null?void 0:t.quantity)??0)||0,sit=t=>t?Array.isArray(t.items)&&t.items.length>0?t.items.reduce((e,r)=>Hz((r==null?void 0:r.measurement)??(t==null?void 0:t.measurement))?e+$z(r):e,0):Hz(t==null?void 0:t.measurement)?$z(t):0:0;function $ue(t){if(!t)return"";if(t!=null&&t.toDate)return Br(t.toDate(),"yyyy-MM-dd");const e=String(t).trim();if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const r=["dd/MM/yyyy","d/M/yyyy","MM/dd/yyyy","M/d/yyyy","yyyy/MM/dd","yyyy-M-d","yyyy/M/d","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSSX"];for(const a of r){const s=dS(e,a,new Date);if(p6(s))return Br(s,"yyyy-MM-dd")}const n=new Date(e);return isNaN(n.getTime())?"":Br(n,"yyyy-MM-dd")}function Jx(t){const e=$ue(t);if(!e)return NaN;const r=dS(e,"yyyy-MM-dd",new Date);return p6(r)?r.getTime():NaN}function Gue(t){var n,a;const e=$ue(t==null?void 0:t.date),r=(n=t==null?void 0:t.createdAt)!=null&&n.toDate?t.createdAt.toDate():null;if(e&&r){const s=Jx(e),o=r.getTime();if(Math.abs(o-s)/(1e3*60*60*24)>30)return Br(r,"yyyy-MM-dd")}return e||((a=t==null?void 0:t.timestamp)!=null&&a.toDate?Br(t.timestamp.toDate(),"yyyy-MM-dd"):r?Br(r,"yyyy-MM-dd"):"")}function iit(t,e){var s,o,l,c;const r=Gue(t);if(!r)return null;let n=0,a=0;return Array.isArray(t.items)&&t.items.length>0?(n=t.items.reduce((u,d)=>u+(Number(d.qty??d.quantity??d.lbs??0)||0),0),a=Number(t.amount??t.total??0)||0):(n=Number(t.quantity??t.lbs??t.weight??0)||0,a=Number(t.amount??t.total??0)||0),{id:e,date:r,type:t.type||"CONTADO",total:a,quantity:n,customerId:t.customerId||((s=t.customer)==null?void 0:s.id)||((o=t.customer)==null?void 0:o.customerId)||t.clientId||void 0,customerName:t.customerName||((l=t.customer)==null?void 0:l.name)||t.clientName||((c=t.client)==null?void 0:c.name)||void 0,_raw:t}}async function oit(t){const e=ar(yt(ke,"ar_movements"),mr("ref.saleId","==",t)),r=await Qt(e);await Promise.all(r.docs.map(n=>Mn(Jt(ke,"ar_movements",n.id))))}function lit({role:t="",sellerCandyId:e="",roles:r}){const n=r&&r.length?r:t,a=xn(n,"vendedor_pollo"),s=xn(n,"admin");if(!(xn(n,"admin")||xn(n,"vendedor_pollo")||xn(n,"supervisor_pollo")||xn(n,"contador")))return i.jsx("div",{className:"p-6 max-w-4xl mx-auto text-center text-red-600",children:"Acceso restringido  Solo administradores, vendedores y supervisores de pollo."});const o=s?8:7,[l,c]=g.useState(!1),[u,d]=g.useState(!1),[f,A]=g.useState(null),[h,m]=g.useState([]),p=async ye=>{c(!0),d(!0),A(ye),m([]);try{const oe=await si(Jt(ke,"salesV2",ye)),Z=oe.exists()?oe.data():null;if(!Z){m([]);return}let Ne=[];if(Array.isArray(Z.items)&&Z.items.length>0)Ne=Z.items;else if(Z.items&&typeof Z.items=="object")try{Ne=Object.values(Z.items)}catch{Ne=[]}else Z.item?Ne=[Z.item]:Array.isArray(Z.products)&&Z.products.length>0?Ne=Z.products:Array.isArray(Z.lines)&&Z.lines.length>0?Ne=Z.lines:Array.isArray(Z.detalles)&&Z.detalles.length>0?Ne=Z.detalles:(Z.productName||Z.product)&&(Ne=[{productName:Z.productName||Z.product||"",qty:Z.qty??Z.quantity??Z.lbs??0,unitPrice:Z.unitPrice??Z.price??0,discount:Z.discount??0,total:Z.total??Z.amount??0}]);const Re=it=>{if(it==null)return NaN;if(typeof it=="number")return it;let de=String(it).trim();if(!de)return NaN;if(de=de.replace(/[^0-9.,-]/g,""),!de)return NaN;de.indexOf(".")>-1&&de.indexOf(",")>-1?de=de.replace(/,/g,""):de.indexOf(",")>-1&&de.indexOf(".")===-1&&(de=de.replace(/,/g,"."));const Ce=Number(de);return isNaN(Ce)?NaN:Ce},ge=new Set;for(const it of Ne)if(Array.isArray(it==null?void 0:it.allocations))for(const de of it.allocations){const Ce=String((de==null?void 0:de.batchId)||"").trim();Ce&&ge.add(Ce)}else if(it!=null&&it.allocations&&typeof it.allocations=="object")try{for(const de of Object.values(it.allocations)){const Ce=String((de==null?void 0:de.batchId)||"").trim();Ce&&ge.add(Ce)}}catch{}if(Array.isArray(Z==null?void 0:Z.allocations))for(const it of Z.allocations){const de=String((it==null?void 0:it.batchId)||"").trim();de&&ge.add(de)}const Xe={};ge.size>0&&await Promise.all(Array.from(ge).map(async it=>{try{const de=await si(Jt(ke,"inventory_batches",it));if(de.exists()){const Ce=de.data();Xe[it]=Number(Ce.salePrice??Ce.sale_price??Ce.price??0)}}catch{}}));const vt=Ne.map(it=>{const de=String(it.productName||it.product||it.name||"(sin nombre)"),Ce=Number(it.qty??it.quantity??it.lbs??it.weight??0)||0,Ye=Re(it.total??it.lineFinal??it.amount??it.monto??it.line_total)||0;let ft=0;const we=[it.unitPrice,it.unitPricePackage,it.salePrice,it.sale_price,it.price,it.unit_price,it.pricePerUnit,it.price_per_unit];for(const Ut of we){const Mt=Re(Ut);if(!isNaN(Mt)&&Mt!==0){ft=Mt;break}}if(!ft){const Ut=(Z==null?void 0:Z.salePrice)??(Z==null?void 0:Z.sale_price)??(Z==null?void 0:Z.unitPrice)??(Z==null?void 0:Z.unit_price)??(Z==null?void 0:Z.price)??(Z==null?void 0:Z.pricePerUnit),Mt=Re(Ut);!isNaN(Mt)&&Mt!==0&&(ft=Mt)}if(!ft){const Ut=Array.isArray(it.allocations)?it.allocations[0]:it.allocations&&typeof it.allocations=="object"?Object.values(it.allocations)[0]:null,Mt=Ut?String(Ut.batchId||"").trim():"";Mt&&Xe[Mt]&&(ft=Xe[Mt]||0)}!ft&&it.productId&&(ft=productPriceMap[String(it.productId)]||0),(!ft||ft===0)&&Ye>0&&Ce>0&&(ft=Ye/Ce);const Le=Re(it.discount??it.desc??0)||0;let gt=Ye;return(!gt||gt===0)&&(gt=Number(ft*Ce||0)),gt=Number(gt)||0,{productName:de,qty:Ce,unitPrice:ft,discount:Le,total:gt}});m(vt)}catch(oe){console.error(oe)}finally{d(!1)}},[x,v]=g.useState(Br(new Date,"yyyy-MM-01")),[y,b]=g.useState(Br(new Date,"yyyy-MM-dd")),[w,j]=g.useState([]),[I,_]=g.useState([]),[S,E]=g.useState([]),[F,k]=g.useState(!0),[B,D]=g.useState(""),{refreshKey:X,refresh:he}=Ec(),[Ae,fe]=g.useState(""),[me,ne]=g.useState(""),[Pe,Te]=g.useState("ALL"),[O,K]=g.useState(""),[q,U]=g.useState(null),W=15,[J,M]=g.useState(1),H=g.useMemo(()=>{const ye={};return w.forEach(oe=>ye[oe.id]=oe.name),ye},[w]);g.useEffect(()=>{Pe!=="ALL"&&!S.includes(Pe)&&Te("ALL")},[S,Pe]),g.useEffect(()=>{(async()=>{k(!0),D("");try{const ye=[];if(a&&e){const Ye=ar(yt(ke,"customers_pollo"),mr("vendorId","==",e),wn("createdAt","desc"));(await Qt(Ye)).forEach(we=>ye.push({id:we.id,name:we.data().name||""}))}else(await Qt(ar(yt(ke,"customers_pollo"),wn("createdAt","desc")))).forEach(ft=>ye.push({id:ft.id,name:ft.data().name||""}));j(ye);const oe={};ye.forEach(Ye=>{oe[Ye.id]=Ye.name});const[Z,Ne,Re]=await Promise.all([Qt(ar(yt(ke,"salesV2"),wn("timestamp","desc"))),Qt(ar(yt(ke,"daily_closures"),wn("createdAt","desc"))),Qt(ar(yt(ke,"ar_movements_pollo"),mr("date",">=",x),mr("date","<=",y)))]),ge=new Map;Re.forEach(Ye=>{var gt;const ft=Ye.data(),we=String(((gt=ft==null?void 0:ft.ref)==null?void 0:gt.saleId)||"").trim(),Le=String((ft==null?void 0:ft.customerId)||"").trim();we&&Le&&ge.set(we,Le)});const Xe=new Map;Ne.forEach(Ye=>{const ft=Ye.data(),we=Array.isArray(ft==null?void 0:ft.salesV2)?ft.salesV2:[];for(const Le of we){const gt=String((Le==null?void 0:Le.id)||"").trim();if(!gt)continue;const Ut=gt.split("#")[0];(String((Le==null?void 0:Le.status)||"").toUpperCase()==="PROCESADA"||Le!=null&&Le.closureDate||Le!=null&&Le.processedDate)&&Xe.set(Ut,{closureDate:Le==null?void 0:Le.closureDate,processedDate:Le==null?void 0:Le.processedDate})}});const vt=[];Z.forEach(Ye=>{const ft=Ye.data(),we=Xe.get(Ye.id),Le=ge.get(Ye.id);!ft.customerId&&Le&&(ft.customerId=Le),!ft.customerName&&Le&&(ft.customerName=oe[Le]||""),we&&(ft.status="PROCESADA",!ft.closureDate&&we.closureDate&&(ft.closureDate=we.closureDate),!ft.processedDate&&we.processedDate&&(ft.processedDate=we.processedDate));const gt=iit(ft,Ye.id);gt&&vt.push(gt)});const it=vt.sort((Ye,ft)=>ft.date.localeCompare(Ye.date));_(it);const de=Jx(x),Ce=Jx(y);E(Array.from(new Set(it.filter(Ye=>{const ft=Vz(Ye);return!(!isFinite(ft)||isFinite(de)&&ft<de||isFinite(Ce)&&ft>Ce)}).map(Ye=>{var ft,we,Le,gt;return((ft=Ye._raw)==null?void 0:ft.productName)||((gt=(Le=(we=Ye._raw)==null?void 0:we.items)==null?void 0:Le[0])==null?void 0:gt.productName)||"(sin producto)"}))).sort()),M(1)}catch(ye){console.error(ye),D(" Error cargando transacciones.")}finally{k(!1)}})()},[x,y,X]);const te=g.useMemo(()=>{const ye=Jx(x),oe=Jx(y);return I.filter(Z=>{const Ne=Vz(Z);return!(!isFinite(Ne)||isFinite(ye)&&Ne<ye||isFinite(oe)&&Ne>oe)})},[I,x,y]),ve=g.useMemo(()=>te.filter(ye=>{var oe,Z,Ne,Re;if(Ae&&ye.customerId!==Ae||me&&ye.type!==me)return!1;if(Pe&&Pe!=="ALL"){const ge=((oe=ye._raw)==null?void 0:oe.productName)||((Re=(Ne=(Z=ye._raw)==null?void 0:Z.items)==null?void 0:Ne[0])==null?void 0:Re.productName)||"";if(!ge||ge!==Pe)return!1}return!(O&&_B(ye._raw)!==O)}),[te,Ae,me,Pe,O]),Q=g.useMemo(()=>{let ye=0,oe=0,Z=0,Ne=0;for(const Xe of ve){const vt=sit(Xe._raw);Xe.type==="CONTADO"?(ye+=vt,Z+=Xe.total):(oe+=vt,Ne+=Xe.total)}const Re=ye+oe,ge=Z+Ne;return{packsCash:ye,packsCredito:oe,packsTotal:Re,montoCash:Z,montoCredito:Ne,montoTotal:ge}},[ve]),Ke=g.useMemo(()=>{let ye=0,oe=0;for(const Ne of ve)Ne.type==="CONTADO"?ye+=Ne.quantity:oe+=Ne.quantity;const Z=ye+oe;return{unidadesCash:ye,unidadesCredito:oe,unidadesTotal:Z}},[ve]),ae=Math.max(1,Math.ceil(ve.length/W)),ee=g.useMemo(()=>{const ye=(J-1)*W;return ve.slice(ye,ye+W)},[ve,J]),[Fe,ce]=g.useState(!0),[be,Ve]=g.useState(!0),[We,pt]=g.useState(!0);g.useMemo(()=>f&&I.find(ye=>ye.id===f)||null,[f,I]);const wt=async ye=>{if(s&&(U(null),!!window.confirm("Eliminar esta venta? Se restaurar el inventario asociado.")))try{k(!0),await Nre(ye.id),await oit(ye.id),_(oe=>oe.filter(Z=>Z.id!==ye.id)),D(" Venta eliminada")}catch(oe){console.error(oe),D(" No se pudo eliminar la venta.")}finally{k(!1)}},Ct=()=>{const ye=`Ventas del dia  ${x} a ${y}`,oe=ge=>(ge||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Z=ve.map(ge=>{var vt,it,de,Ce;const Xe=CB(ge,H);return(vt=ge._raw)!=null&&vt.productName||(Ce=(de=(it=ge._raw)==null?void 0:it.items)==null?void 0:de[0])!=null&&Ce.productName,`<tr>
          <td>${ge.date}</td>
          <td>${oe(Xe)}</td>
          <td>${ge.type==="CREDITO"?"Crdito":"Cash"}</td>
          <td style="text-align:right">${ge.quantity}</td>
          <td style="text-align:right">${Ju(ge.total)}</td>
        </tr>`}).join(""),Ne=`<!doctype html><html><head><meta charset="utf-8" />
    <title>${oe(ye)}</title>
    <style>
      *{font-family:Arial, sans-serif} h1{margin:0 0 8px}
      .muted{color:#555;font-size:12px;margin-bottom:12px}
      .kpis{display:grid;grid-template-columns:repeat(2,max-content);gap:8px 28px;margin:10px 0 14px}
      table{width:100%;border-collapse:collapse;font-size:12px}
      th,td{border:1px solid #ddd;padding:6px}
      th{background:#f5f5f5;text-align:left}
      @media print{@page{size:A4;margin:12mm}}
    </style></head><body>
      <h1>${oe(ye)}</h1>
      <div class="kpis">

      
        <div><b>Unidades Cash:</b> ${g0(Ke.unidadesCash)}</div>
        <div><b>Unidades Crdito:</b> ${g0(Ke.unidadesCredito)}</div>
        <div><b>Total Unidades:</b> ${g0(Ke.unidadesTotal)}</div>
      </div>

      <div class="kpis">
        <div><b>Libras Cash:</b> ${Q.packsCash}</div>
        <div><b>Libras Crdito:</b> ${Q.packsCredito}</div>
        <div><b>Ventas Cash:</b> ${Ju(Q.montoCash)}</div>
        <div><b>Ventas Crdito:</b> ${Ju(Q.montoCredito)}</div>
      </div>

      <table><thead><tr>
        <th>Fecha</th><th>Cliente</th><th>Tipo</th><th>Libras</th><th>Ventas</th>
      </tr></thead><tbody>
      ${Z||'<tr><td colspan="5" style="text-align:center">Sin transacciones</td></tr>'}
      </tbody></table>
      <script>window.print()<\/script>
    </body></html>`,Re=window.open("","_blank");Re&&(Re.document.open(),Re.document.write(Ne),Re.document.close())},St=()=>M(1),Rt=()=>M(ye=>Math.max(1,ye-1)),jt=()=>M(ye=>Math.min(ae,ye+1)),Ue=()=>M(ae),Be=()=>{const ye=[];if(ae<=7)for(let Z=1;Z<=ae;Z++)ye.push(Z);else{const Z=Math.max(1,J-2),Ne=Math.min(ae,J+2);ye.push(1),Z>2&&ye.push(-1);for(let Re=Z;Re<=Ne;Re++)Re!==1&&Re!==ae&&ye.push(Re);Ne<ae-1&&ye.push(-2),ye.push(ae)}return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 justify-between mt-3",children:[i.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:St,disabled:J===1,children:" Primero"}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Rt,disabled:J===1,children:" Anterior"}),ye.map((Z,Ne)=>typeof Z=="number"?i.jsx("button",{className:`px-3 py-1 border rounded ${Z===J?"bg-blue-600 text-white":""}`,onClick:()=>M(Z),children:Z},Ne):i.jsx("span",{className:"px-2",children:""},Ne)),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:jt,disabled:J===ae,children:"Siguiente "}),i.jsx("button",{className:"px-2 py-1 border rounded disabled:opacity-50",onClick:Ue,disabled:J===ae,children:"ltimo "})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:["Pgina ",J," de ",ae,"  ",ve.length," transaccin(es)"]})]})};return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Ventas del dia"}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>ce(ye=>!ye),"aria-expanded":Fe,children:[i.jsx("span",{children:"Filtros de bsqueda"}),i.jsx("span",{className:`transition-transform ${Fe?"rotate-180":""}`,children:""})]}),Fe&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-7 gap-3 items-end text-sm",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Desde"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:x,onChange:ye=>{v(ye.target.value),M(1)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Hasta"}),i.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:y,onChange:ye=>{b(ye.target.value),M(1)}})]}),i.jsxs("div",{className:"sm:col-span-2 lg:col-span-2",children:[i.jsx("label",{className:"block font-semibold",children:"Cliente (crdito)"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Ae,onChange:ye=>{fe(ye.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),w.map(ye=>i.jsx("option",{value:ye.id,children:ye.name},ye.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Tipo"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:me,onChange:ye=>{ne(ye.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"CONTADO",children:"Cash"}),i.jsx("option",{value:"CREDITO",children:"Crdito"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Producto"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:Pe,onChange:ye=>{Te(ye.target.value),M(1)},children:[i.jsx("option",{value:"ALL",children:"Todos"}),S.map(ye=>i.jsx("option",{value:ye,children:ye},ye))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold",children:"Estado"}),i.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:O,onChange:ye=>{K(ye.target.value),M(1)},children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"FLOTANTE",children:"FLOTANTE"}),i.jsx("option",{value:"PROCESADA",children:"PROCESADA"})]})]}),i.jsx("button",{className:"sm:col-span-2 lg:col-span-1 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 w-full",onClick:Ct,children:"Exportar PDF"}),i.jsx("div",{className:"sm:col-span-2 lg:col-span-1 flex",children:i.jsx(_c,{onClick:he,loading:F,className:"w-full justify-center"})})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm mb-4",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>Ve(ye=>!ye),"aria-expanded":be,children:[i.jsx("span",{children:"KPIs"}),i.jsx("span",{className:`transition-transform ${be?"rotate-180":""}`,children:""})]}),be&&i.jsx("div",{className:"p-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:g0(Q.packsCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Libras Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:g0(Q.packsCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Cash"}),i.jsx("div",{className:"text-xl font-semibold",children:Ju(Q.montoCash)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Crdito"}),i.jsx("div",{className:"text-xl font-semibold",children:Ju(Q.montoCredito)})]}),i.jsxs("div",{className:"p-3 border rounded bg-gray-50",children:[i.jsx("div",{className:"text-xs text-gray-600",children:"Ventas Total"}),i.jsx("div",{className:"text-xl font-semibold",children:Ju(Q.montoTotal)})]})]})})]}),i.jsxs("div",{className:"bg-white border rounded shadow-sm",children:[i.jsxs("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-semibold",onClick:()=>pt(ye=>!ye),"aria-expanded":We,children:[i.jsx("span",{children:"Transacciones"}),i.jsx("span",{className:`transition-transform ${We?"rotate-180":""}`,children:""})]}),We&&i.jsxs("div",{className:"p-3 border-t space-y-4",children:[i.jsxs("div",{className:"block md:hidden space-y-3",children:[F?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Cargando"}):ee.length===0?i.jsx("div",{className:"bg-white border rounded-lg p-4 shadow",children:"Sin transacciones en el rango."}):ee.map(ye=>{var Re,ge,Xe,vt;const oe=CB(ye,H),Z=((Re=ye._raw)==null?void 0:Re.productName)||((vt=(Xe=(ge=ye._raw)==null?void 0:ge.items)==null?void 0:Xe[0])==null?void 0:vt.productName)||"(sin producto)",Ne=_B(ye._raw);return i.jsx("div",{className:"bg-white border rounded-xl shadow",children:i.jsxs("details",{className:"group",children:[i.jsxs("summary",{className:"list-none cursor-pointer p-3 flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"font-semibold truncate",children:oe}),i.jsx("div",{className:"text-xs text-gray-600 shrink-0",children:ye.date})]}),i.jsxs("div",{className:"mt-1 flex items-center gap-2 flex-wrap text-xs",children:[i.jsx("span",{className:`px-2 py-1 rounded-full border ${Ne==="PROCESADA"?"bg-blue-50 border-blue-200 text-blue-700":"bg-gray-50 border-gray-200 text-gray-700"}`,children:Ne}),i.jsx("span",{className:`px-2 py-1 rounded-full border ${ye.type==="CREDITO"?"bg-yellow-50 border-yellow-200 text-yellow-700":"bg-green-50 border-green-200 text-green-700"}`,children:ye.type==="CREDITO"?"Crdito":"Cash"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Libras:"})," ",i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:it=>{it.preventDefault(),p(ye.id)},title:"Ver detalle",children:g0(ye.quantity)})]}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("b",{children:"Monto:"})," ",Ju(ye.total)]})]})]}),i.jsx("div",{className:"text-gray-500 mt-1",children:i.jsx("span",{className:"inline-block transition-transform group-open:rotate-180",children:""})})]}),i.jsx("div",{className:"px-3 pb-3 pt-0 text-sm",children:i.jsxs("div",{className:"grid grid-cols-1 gap-2 border-t pt-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Cliente"}),i.jsx("span",{className:"font-medium text-right",children:oe})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Producto"}),i.jsx("span",{className:"font-medium text-right",children:Z})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Fecha"}),i.jsx("span",{className:"font-medium",children:ye.date})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Estado"}),i.jsx("span",{className:"font-medium",children:Ne})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Tipo"}),i.jsx("span",{className:"font-medium",children:ye.type==="CREDITO"?"Crdito":"Cash"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Libras"}),i.jsx("span",{className:"font-medium",children:i.jsx("button",{type:"button",className:"underline text-blue-600",onClick:()=>p(ye.id),title:"Ver detalle",children:g0(ye.quantity)})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Monto"}),i.jsx("span",{className:"font-semibold",children:Ju(ye.total)})]}),i.jsx("div",{className:"flex items-center justify-between",children:s&&i.jsxs("div",{className:"pt-2 flex items-center justify-end gap-2 w-full",children:[i.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:()=>U(it=>it===ye.id?null:ye.id),children:" Acciones"}),q===ye.id&&i.jsx("button",{className:"px-3 py-2 rounded bg-red-600 text-white hover:bg-red-700",onClick:()=>wt(ye),children:"Eliminar"})]})})]})})]})},ye.id)}),i.jsx("div",{className:"bg-white p-3 rounded shadow border",children:Be()})]}),i.jsxs("div",{className:"hidden md:block bg-white p-2 rounded shadow border w-full",children:[i.jsxs("table",{className:"min-w-full w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Fecha"}),i.jsx("th",{className:"p-2 border",children:"Estado"}),i.jsx("th",{className:"p-2 border",children:"Cliente"}),i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border",children:"Tipo"}),i.jsx("th",{className:"p-2 border",children:"Libras"}),i.jsx("th",{className:"p-2 border",children:"Ventas"}),s&&i.jsx("th",{className:"p-2 border",children:"Acciones"})]})}),i.jsx("tbody",{children:F?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Cargando"})}):ee.length===0?i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-center",colSpan:o,children:"Sin transacciones en el rango."})}):ee.map(ye=>{var Re,ge,Xe,vt;const oe=CB(ye,H),Z=((Re=ye._raw)==null?void 0:Re.productName)||((vt=(Xe=(ge=ye._raw)==null?void 0:ge.items)==null?void 0:Xe[0])==null?void 0:vt.productName)||"(sin producto)",Ne=_B(ye._raw);return i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border",children:ye.date}),i.jsx("td",{className:"p-2 border",children:Ne}),i.jsx("td",{className:"p-2 border",children:oe}),i.jsx("td",{className:"p-2 border",children:Z}),i.jsx("td",{className:"p-2 border",children:ye.type==="CREDITO"?"Crdito":"Cash"}),i.jsx("td",{className:"p-2 border",children:i.jsx("button",{type:"button",className:"underline text-blue-600 hover:text-blue-800",title:"Ver detalle de productos de esta venta",onClick:()=>p(ye.id),children:g0(ye.quantity)})}),i.jsx("td",{className:"p-2 border",children:Ju(ye.total)}),s&&i.jsxs("td",{className:"p-2 border relative",children:[i.jsx("button",{className:"px-2 py-1 rounded border hover:bg-gray-50",onClick:()=>U(it=>it===ye.id?null:ye.id),title:"Acciones",children:""}),q===ye.id&&i.jsx("div",{className:"absolute right-2 mt-1 w-28 bg-white border rounded shadow z-10 text-left",children:i.jsx("button",{className:"block w-full text-left px-3 py-2 hover:bg-gray-100 text-red-600",onClick:()=>wt(ye),children:"Eliminar"})})]})]},ye.id)})})]}),Be()]})]})]}),B&&i.jsx("p",{className:"mt-2 text-sm",children:B}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl border w-[95%] max-w-3xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("div",{children:i.jsxs("h3",{className:"text-lg font-bold",children:["Productos vendidos"," ",f?` #${f}`:""]})}),i.jsx("button",{className:"px-3 py-1 rounded bg-gray-200 hover:bg-gray-300",onClick:()=>c(!1),children:"Cerrar"})]}),i.jsx("div",{className:"bg-white rounded border overflow-x-auto",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-2 border",children:"Producto"}),i.jsx("th",{className:"p-2 border text-right",children:"Libras"}),i.jsx("th",{className:"p-2 border text-right",children:"Precio"}),i.jsx("th",{className:"p-2 border text-right",children:"Descuento"}),i.jsx("th",{className:"p-2 border text-right",children:"Monto"})]})}),i.jsx("tbody",{children:u?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Cargando"})}):h.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center",children:"Sin tems en esta venta."})}):h.map((ye,oe)=>i.jsxs("tr",{className:"text-center",children:[i.jsx("td",{className:"p-2 border text-left",children:ye.productName}),i.jsx("td",{className:"p-2 border text-right",children:ye.qty}),i.jsx("td",{className:"p-2 border text-right",children:Ju(ye.unitPrice)}),i.jsx("td",{className:"p-2 border text-right",children:Ju(ye.discount||0)}),i.jsx("td",{className:"p-2 border text-right",children:Ju(ye.total)})]},oe))})]})})]})})]})}function cit(){const[t,e]=g.useState(!1);return g.useEffect(()=>{var a;const r=window.matchMedia("(max-width: 900px)"),n=()=>e(r.matches);return n(),(a=r.addEventListener)==null||a.call(r,"change",n),()=>{var s;return(s=r.removeEventListener)==null?void 0:s.call(r,"change",n)}},[]),t}function uit(){const[t,e]=g.useState(null),[r,n]=g.useState(""),[a,s]=g.useState([]),[o,l]=g.useState(""),[c,u]=g.useState(!0),d=cit(),f=g.useMemo(()=>d?i.jsx(Uye,{role:r,roles:a}):i.jsx(Lye,{role:r,roles:a}),[d,r,a]),A=(t==null?void 0:t.email)||"";if(g.useEffect(()=>{const m=cj(uf,async p=>{if(u(!0),p){e(p);try{const x=Jt(ke,"users",p.uid),v=await si(x);if(v.exists()){const y=v.data(),b=Array.isArray(y.roles)?y.roles:y.role?[y.role]:[],w=y.sellerCandyId||"";s(b),n(b[0]||""),l(w||"")}else n(""),s([]),l("")}catch{n(""),l("")}}else e(null),n(""),l("");u(!1)});return()=>m()},[]),c)return i.jsx("div",{className:"p-6 text-center",children:"Cargando..."});const h=()=>{const m=a&&a.length?a:r;return xn(m,"admin")?i.jsx(Bh,{to:"financialDashboard",replace:!0}):xn(m,"vendedor_pollo")?i.jsx(Bh,{to:"salesV2",replace:!0}):xn(m,"supervisor_pollo")?i.jsx(Bh,{to:"batches",replace:!0}):xn(m,"contador")?i.jsx(Bh,{to:"batches",replace:!0}):xn(m,"vendedor_ropa")?i.jsx(Bh,{to:"salesClothes",replace:!0}):xn(m,"vendedor_dulces")?i.jsx(Bh,{to:"salesCandies",replace:!0}):i.jsx(Bh,{to:"/",replace:!0})};return i.jsx(x0e,{children:i.jsxs(WAe,{children:[i.jsx(Fn,{path:"/",element:i.jsx(Oye,{})}),i.jsxs(Fn,{path:"/admin",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","vendedor_ropa","vendedor_dulces","supervisor_pollo","contador"],children:f}),children:[i.jsx(Fn,{index:!0,element:i.jsx(h,{})}),i.jsx(Fn,{path:"bills",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(fPe,{role:r,roles:a})})}),i.jsx(Fn,{path:"salesV2",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(RV,{user:t})})}),i.jsx(Fn,{path:"financialDashboard",element:i.jsx(Vn,{allowedRoles:["admin","contador","supervisor_pollo"],children:i.jsx(u4e,{})})}),i.jsx(Fn,{path:"expenses",element:i.jsx(Vn,{allowedRoles:["admin","contador"],children:i.jsx(d4e,{})})}),i.jsx(Fn,{path:"transactionsPollo",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(lit,{role:r,roles:a})})}),i.jsx(Fn,{path:"batches",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(o4e,{role:r,roles:a})})}),i.jsx(Fn,{path:"paidBatches",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(x4e,{})})}),i.jsx(Fn,{path:"fix",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(A4e,{})})}),i.jsx(Fn,{path:"transactionclose",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(l4e,{})})}),i.jsx(Fn,{path:"billhistoric",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(hPe,{})})}),i.jsx(Fn,{path:"users",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(APe,{})})}),i.jsx(Fn,{path:"products",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(mPe,{})})}),i.jsx(Fn,{path:"customersPollo",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","supervisor_pollo","contador"],children:i.jsx(X4e,{role:r,roles:a,currentUserEmail:A,sellerPolloId:o})})}),i.jsx(Fn,{path:"datacenter",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(qQe,{})})}),i.jsx(Fn,{path:"productsCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(K9e,{})})}),i.jsx(Fn,{path:"mainordersCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(PQe,{})})}),i.jsx(Fn,{path:"productsPricesCandies",element:i.jsx(Vn,{roles:a,allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eit,{})})}),i.jsx(Fn,{path:"inventoryMainOrderCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(BQe,{})})}),i.jsx(Fn,{path:"inventoryCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(Z9e,{})})}),i.jsx(Fn,{path:"billingsCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(QQe,{})})}),i.jsx(Fn,{path:"cashDeliveries",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(Xst,{})})}),i.jsx(Fn,{path:"customersCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(eQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"salesCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(iQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"expensesCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(oQe,{})})}),i.jsx(Fn,{path:"dashboardCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(pQe,{})})}),i.jsx(Fn,{path:"transactionCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(dQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"vendorsCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(gQe,{})})}),i.jsx(Fn,{path:"productsVendorsCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(_Qe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"cierreVentasCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(FQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"reporteCierresCandies",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(HQe,{role:r,roles:a,currentUserEmail:A,sellerCandyId:o})})}),i.jsx(Fn,{path:"consolidatedVendors",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_dulces"],children:i.jsx(LQe,{})})}),i.jsx(Fn,{path:"salesClothes",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(M4e,{})})}),i.jsx(Fn,{path:"notebooksInventory",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(nit,{})})}),i.jsx(Fn,{path:"TransactionsReportClothes",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(z4e,{})})}),i.jsx(Fn,{path:"financialDashboardClothes",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(Q4e,{})})}),i.jsx(Fn,{path:"ExpensesClothes",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(V4e,{})})}),i.jsx(Fn,{path:"inventoryClothesBatches",element:i.jsx(Vn,{allowedRoles:["admin"],children:i.jsx(w4e,{})})}),i.jsx(Fn,{path:"productsClothes",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(k4e,{})})}),i.jsx(Fn,{path:"CustomersClothes",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_ropa"],children:i.jsx(O4e,{})})})]}),i.jsx(Fn,{path:"/salesV2",element:i.jsx(Vn,{allowedRoles:["admin","vendedor_pollo","contador"],children:i.jsx(RV,{user:t})})}),i.jsx(Fn,{path:"*",element:i.jsx(Bh,{to:"/"})})]})})}Fye.then(t=>{console.info("Auth persistence mode:",t)}).catch(()=>{}).finally(()=>{EB.createRoot(document.getElementById("root")).render(i.jsx($o.StrictMode,{children:i.jsx(uit,{})}))});export{Ka as _,fit as c,CA as g};
